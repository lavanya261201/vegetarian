webpackJsonp(["reader"],{"./client/blocks/reader-combined-card/index.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),n=o(r),a=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),l=o(a),i=s("./node_modules/babel-runtime/helpers/createClass.js"),d=o(i),c=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),u=o(c),p=s("./node_modules/babel-runtime/helpers/inherits.js"),f=o(p),m=s("./node_modules/lodash/isEmpty.js"),h=o(m),_=s("./node_modules/lodash/filter.js"),g=o(_),b=s("./node_modules/lodash/size.js"),v=o(b),y=s("./node_modules/lodash/get.js"),j=o(y),x=s("./node_modules/prop-types/index.js"),k=o(x),P=s("./node_modules/react/react.js"),S=o(P),E=s("./node_modules/i18n-calypso/index.js"),I=s("./client/components/card/index.jsx"),w=o(I),C=s("./client/reader/route/index.js"),R=s("./client/blocks/reader-avatar/index.jsx"),N=o(R),T=s("./client/blocks/reader-site-stream-link/index.jsx"),M=o(T),L=s("./client/blocks/reader-combined-card/post.jsx"),D=o(L),F=s("./client/lib/feed-stream-store/post-key.js"),A=s("./client/components/data/query-reader-site/index.jsx"),H=o(A),O=s("./client/components/data/query-reader-feed/index.jsx"),U=o(O),B=s("./client/reader/stats.js"),K=s("./client/reader/get-helpers.js"),q=s("./client/reader/follow-button/index.jsx"),W=o(q),G=function(e){function t(){var e,s,o,r;(0,l.default)(this,t);for(var a=arguments.length,i=Array(a),d=0;d<a;d++)i[d]=arguments[d];return s=o=(0,u.default)(this,(e=t.__proto__||(0,n.default)(t)).call.apply(e,[this].concat(i))),o.recordRenderTrack=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.props,t=e.postKey,s=e.posts;(0,B.recordTrack)("calypso_reader_combined_card_render",{blog_id:t.blogId,feed_id:t.feedId,post_count:(0,v.default)(s)})},r=s,(0,u.default)(o,r)}return(0,f.default)(t,e),(0,d.default)(t,[{key:"componentDidMount",value:function(){this.recordRenderTrack()}},{key:"componentWillReceiveProps",value:function(e){this.props.postKey.feedId===e.postKey.feedId&&this.props.postKey.blogId===e.postKey.blogId&&(0,v.default)(this.props.posts)===(0,v.default)(e.posts)||this.recordRenderTrack(e)}},{key:"render",value:function(){var e=this.props,t=e.posts,s=e.site,o=e.feed,r=e.postKey,n=e.selectedPostKey,a=e.onClick,l=e.isDiscover,i=e.translate,d=r.feedId,c=r.blogId,u=(0,j.default)(s,"icon.img"),p=(0,j.default)(o,"image"),f=(0,C.getStreamUrl)(d,c),m=(0,K.getSiteName)({site:s,post:t[0]}),_=function(e){return(0,F.keysAreEqual)((0,F.keyForPost)(e),n)},b=o&&o.URL||s&&s.URL,v=(0,g.default)(t,function(e){return!(0,h.default)(e.canonical_media)}).length;return S.default.createElement(w.default,{className:"reader-combined-card"},S.default.createElement("header",{className:"reader-combined-card__header"},S.default.createElement(N.default,{siteIcon:u,feedIcon:p,author:null,preferGravatar:!0,siteUrl:f,isCompact:!0}),S.default.createElement("div",{className:"reader-combined-card__header-details"},S.default.createElement(M.default,{className:"reader-combined-card__site-link",feedId:d,siteId:c},m),S.default.createElement("p",{className:"reader-combined-card__header-post-count"},i("%(count)d posts",{args:{count:t.length}}))),this.props.showFollowButton&&b&&S.default.createElement(W.default,{siteUrl:b,followSource:this.props.followSource})),S.default.createElement("ul",{className:"reader-combined-card__post-list"},t.map(function(e){return S.default.createElement(D.default,{key:"post-"+e.ID,post:e,streamUrl:f,onClick:a,isDiscover:l,isSelected:_(e),showFeaturedAsset:v>0})})),d&&S.default.createElement(U.default,{feedId:+d,includeMeta:!1}),c&&S.default.createElement(H.default,{siteId:+c,includeMeta:!1}))}}]),t}(S.default.Component);G.propTypes={posts:k.default.array.isRequired,site:k.default.object,feed:k.default.object,onClick:k.default.func,isDiscover:k.default.bool,postKey:k.default.object.isRequired,selectedPostKey:k.default.object,showFollowButton:k.default.bool,followSource:k.default.string},G.defaultProps={isDiscover:!1,showFollowButton:!1},t.default=(0,E.localize)(G),e.exports=t.default},"./client/blocks/reader-combined-card/placeholders/post.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=s("./node_modules/react/react.js"),n=o(r),a=function(){return n.default.createElement("li",{className:"reader-combined-card__post is-placeholder"},n.default.createElement("div",{className:"reader-combined-card__featured-image-wrapper"}),n.default.createElement("div",{className:"reader-combined-card__post-details"},n.default.createElement("h1",{className:"reader-combined-card__post-title"}),n.default.createElement("div",{className:"reader-excerpt is-placeholder"}),n.default.createElement("div",{className:"reader-combined-card__post-author-and-time is-placeholder"},n.default.createElement("div",{className:"reader-combined-card__visit-link-placeholder"}),n.default.createElement("div",{className:"reader-combined-card__timestamp"}))))};t.default=a,e.exports=t.default},"./client/blocks/reader-combined-card/post.jsx":function(e,t,s){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=s("./node_modules/babel-runtime/helpers/extends.js"),a=r(n),l=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=r(l),d=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),c=r(d),u=s("./node_modules/babel-runtime/helpers/createClass.js"),p=r(u),f=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),m=r(f),h=s("./node_modules/babel-runtime/helpers/inherits.js"),_=r(h),g=s("./node_modules/lodash/has.js"),b=r(g),v=s("./node_modules/prop-types/index.js"),y=r(v),j=s("./node_modules/react/react.js"),x=r(j),k=s("./node_modules/react-dom/index.js"),P=r(k),S=s("./node_modules/component-closest/index.js"),E=r(S),I=s("./node_modules/i18n-calypso/index.js"),w=s("./node_modules/classnames/index.js"),C=r(w),R=s("./client/components/auto-direction/index.jsx"),N=r(R),T=s("./client/components/emojify/index.jsx"),M=r(T),L=s("./client/blocks/reader-excerpt/index.jsx"),D=r(L),F=s("./client/blocks/reader-visit-link/index.jsx"),A=r(F),H=s("./client/blocks/reader-author-link/index.jsx"),O=r(H),U=s("./client/reader/stats.js"),B=o(U),K=s("./client/reader/post-time/index.jsx"),q=r(K),W=s("./client/blocks/reader-featured-image/index.jsx"),G=r(W),V=s("./client/blocks/reader-featured-video/index.jsx"),Y=r(V),z=s("./client/blocks/reader-combined-card/placeholders/post.jsx"),X=r(z),$=s("./client/reader/lib/author-name-blacklist/index.js"),Q=function(e){function t(){var e,s,o,r;(0,c.default)(this,t);for(var n=arguments.length,a=Array(n),l=0;l<n;l++)a[l]=arguments[l];return s=o=(0,m.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(a))),o.handleCardClick=function(e){var t=P.default.findDOMNode(o),s=window.getSelection&&window.getSelection();return e.button>0||e.metaKey||e.controlKey||e.shiftKey||e.altKey?void((0,E.default)(e.target,".reader-combined-card__post-title-link",!0,t)&&B.recordPermalinkClick("card_title_with_modifier",o.props.post)):void((0,E.default)(e.target,".ignore-click, [rel~=external]",!0,t)||(0,E.default)(e.target,"a",!0,t)&&(0,E.default)(e.target,".reader-excerpt",!0,t)||s&&s.toString()||e.defaultPrevented||(e.preventDefault(),o.props.onClick(o.props.post)))},r=s,(0,m.default)(o,r)}return(0,_.default)(t,e),(0,p.default)(t,[{key:"render",value:function(){var e=this.props,t=e.post,s=e.streamUrl,o=e.isDiscover,r=e.isSelected,n=!t||"pending"===t._state||"minimal"===t._state;if(n)return x.default.createElement(X.default,null);var l=(0,b.default)(t,"author.name")&&!(0,$.isAuthorNameBlacklisted)(t.author.name),i=null;t.canonical_media&&"video"===t.canonical_media.mediaType?i=x.default.createElement(Y.default,(0,a.default)({},t.canonical_media,{videoEmbed:t.canonical_media,allowPlaying:!1})):t.canonical_media&&(i=x.default.createElement(G.default,{imageWidth:100,imageUrl:t.canonical_media.src,href:t.URL}));var d=function(){(0,U.recordPermalinkClick)("timestamp_combined_card",t)},c=(0,C.default)({"reader-combined-card__post":!0,"is-selected":r,"has-featured-asset":!!i});return x.default.createElement("li",{className:c,onClick:this.handleCardClick},this.props.showFeaturedAsset&&x.default.createElement("div",{className:"reader-combined-card__featured-asset-wrapper"},i),x.default.createElement("div",{className:"reader-combined-card__post-details"},x.default.createElement(N.default,null,x.default.createElement("h1",{className:"reader-combined-card__post-title"},x.default.createElement("a",{className:"reader-combined-card__post-title-link",href:t.URL},x.default.createElement(M.default,null,t.title)))),x.default.createElement(D.default,{post:t,isDiscover:o}),x.default.createElement("div",{className:"reader-combined-card__post-author-and-time ignore-click"},x.default.createElement(A.default,{href:t.URL,iconSize:14},this.props.translate("Visit")),l&&x.default.createElement(O.default,{className:"reader-combined-card__author-link",author:t.author,siteUrl:s,post:t},t.author.name),t.date&&t.URL&&x.default.createElement("span",{className:"reader-combined-card__timestamp"},l&&x.default.createElement("span",null,", "),x.default.createElement("a",{className:"reader-combined-card__timestamp-link",onClick:d,href:t.URL,target:"_blank",rel:"noopener noreferrer"},x.default.createElement(q.default,{date:t.date}))))))}}]),t}(x.default.Component);Q.propTypes={post:y.default.object.isRequired,streamUrl:y.default.string,onClick:y.default.func,showFeaturedAsset:y.default.bool},Q.defaultProps={showFeaturedAsset:!0},t.default=(0,I.localize)(Q),e.exports=t.default},"./client/blocks/reader-post-card/blocked.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),n=o(r),a=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),l=o(a),i=s("./node_modules/babel-runtime/helpers/createClass.js"),d=o(i),c=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),u=o(c),p=s("./node_modules/babel-runtime/helpers/inherits.js"),f=o(p),m=s("./node_modules/prop-types/index.js"),h=o(m),_=s("./node_modules/react/react.js"),g=o(_),b=s("./node_modules/i18n-calypso/index.js"),v=s("./node_modules/react-redux/es/index.js"),y=s("./client/state/reader/site-blocks/actions.js"),j=s("./client/components/card/index.jsx"),x=o(j),k=s("./client/reader/stats.js"),P=s("./client/state/analytics/actions.js"),S=function(e){function t(){var e,s,o,r;(0,l.default)(this,t);for(var a=arguments.length,i=Array(a),d=0;d<a;d++)i[d]=arguments[d];return s=o=(0,u.default)(this,(e=t.__proto__||(0,n.default)(t)).call.apply(e,[this].concat(i))),o.unblock=function(){o.props.bumpStat("reader_actions","unblocked_blog"),o.props.recordGoogleEvent("reader_actions","Clicked Unblock Site"),(0,k.recordTrack)("calypso_reader_unblock_site",{blog_id:o.props.post.site_ID}),o.props.requestSiteUnblock(o.props.post.site_ID)},r=s,(0,u.default)(o,r)}return(0,f.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){var e=this.props,t=e.post,s=e.translate;return g.default.createElement(x.default,{className:"reader-post-card is-blocked"},g.default.createElement("p",{className:"reader-post-card__blocked-description"},s("You have blocked %(site_name)s.",{args:{site_name:t.site_name}}),g.default.createElement("a",{onClick:this.unblock,className:"reader-post-card__blocked-undo"},s("Undo?"))))}}]),t}(g.default.Component);S.propTypes={post:h.default.object},t.default=(0,v.connect)(null,{recordGoogleEvent:P.recordGoogleEvent,bumpStat:P.bumpStat,requestSiteUnblock:y.requestSiteUnblock})((0,b.localize)(S)),e.exports=t.default},"./client/blocks/reader-related-card-v2/index.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=e.post,s=e.site,o=e.onSiteClick,r=e.followSource,n=(0,T.getStreamUrl)(t.feed_ID,t.site_ID),a=s&&s.title||t.site_name,l=(0,h.default)(t,"author.name",""),i=!(0,M.areEqualIgnoringWhitespaceAndCase)(a,l);return g.default.createElement("div",{className:"reader-related-card-v2__meta"},g.default.createElement("a",{href:n,onClick:o,"aria-hidden":"true"},g.default.createElement(C.default,{user:t.author})),g.default.createElement("div",{className:"reader-related-card-v2__byline"},l&&i&&g.default.createElement("span",{className:"reader-related-card-v2__byline-author"},g.default.createElement(O.default,{author:t.author,siteUrl:n,post:t,onClick:o,className:"reader-related-card-v2__link"},l)),g.default.createElement("span",{className:"reader-related-card-v2__byline-site"},g.default.createElement("a",{href:n,onClick:o,className:"reader-related-card-v2__link"},a))),g.default.createElement(N.default,{siteUrl:t.site_URL,followSource:r,railcar:t.railcar}))}function n(){return g.default.createElement("div",{className:"reader-related-card-v2__meta is-placeholder"},g.default.createElement(C.default,{user:null}),g.default.createElement("div",{className:"reader-related-card-v2__byline"},g.default.createElement("span",{className:"reader-related-card-v2__byline-author"},"Author name"),g.default.createElement("span",{className:"reader-related-card-v2__byline-site"},"Site title")))}function a(){return g.default.createElement(I.default,{className:"reader-related-card-v2 is-placeholder"},g.default.createElement(n,null),g.default.createElement("a",{className:"reader-related-card-v2__post reader-related-card-v2__link-block"},g.default.createElement("div",{className:"reader-related-card-v2__featured-image"}),g.default.createElement("div",{className:"reader-related-card-v2__site-info"},g.default.createElement("h1",{className:"reader-related-card-v2__title"},"Title"),g.default.createElement("div",{className:"reader-related-card-v2__excerpt post-excerpt"},"Excerpt"))))}function l(e){var t=e.post,s=e.site,o=e.siteId,n=e.onPostClick,l=void 0===n?f.default:n,i=e.onSiteClick,c=void 0===i?f.default:i,p=e.followSource;if(!t||"minimal"===t._state||"pending"===t._state)return g.default.createElement(a,null);var m=(0,T.getPostUrl)(t),h=(0,y.default)("reader-related-card-v2",{"has-thumbnail":!!t.canonical_media,"has-excerpt":t.excerpt&&t.excerpt.length>1}),_=(0,u.default)(l,t),b=(0,u.default)(c,t),v=t.canonical_media,j=void 0;return j=v?"video"===v.mediaType?g.default.createElement(D.default,(0,d.default)({},v,{videoEmbed:v,className:"reader-related-card-v2__featured-image",href:m,onThumbnailClick:_,allowPlaying:!1})):g.default.createElement(A.default,{imageUrl:v.src,imageWidth:U,onClick:_,href:m,className:"reader-related-card-v2__featured-image"}):null,g.default.createElement(I.default,{className:h},o&&!s&&g.default.createElement(S.default,{siteId:o}),g.default.createElement(r,{post:t,site:s,onSiteClick:b,followSource:p}),j,g.default.createElement("a",{href:m,className:"reader-related-card-v2__post reader-related-card-v2__link-block",onClick:_},g.default.createElement("div",{className:"reader-related-card-v2__site-info"},g.default.createElement("h1",{className:"reader-related-card-v2__title"},t.title),g.default.createElement("div",{className:"reader-related-card-v2__excerpt post-excerpt"},t.canonical_media?t.short_excerpt:t.better_excerpt_no_html))))}Object.defineProperty(t,"__esModule",{value:!0}),t.LocalizedRelatedPostCard=void 0;var i=s("./node_modules/babel-runtime/helpers/extends.js"),d=o(i),c=s("./node_modules/lodash/partial.js"),u=o(c),p=s("./node_modules/lodash/noop.js"),f=o(p),m=s("./node_modules/lodash/get.js"),h=o(m);t.RelatedPostCard=l;var _=s("./node_modules/react/react.js"),g=o(_),b=s("./node_modules/react-redux/es/index.js"),v=s("./node_modules/classnames/index.js"),y=o(v),j=s("./node_modules/i18n-calypso/index.js"),x=s("./client/state/reader/posts/selectors.js"),k=s("./client/state/reader/sites/selectors.js"),P=s("./client/components/data/query-reader-site/index.jsx"),S=o(P),E=s("./client/components/card/compact.jsx"),I=o(E),w=s("./client/components/gravatar/index.jsx"),C=o(w),R=s("./client/reader/follow-button/index.jsx"),N=o(R),T=s("./client/reader/route/index.js"),M=s("./client/lib/string/index.js"),L=s("./client/blocks/reader-featured-video/index.jsx"),D=o(L),F=s("./client/blocks/reader-featured-image/index.jsx"),A=o(F),H=s("./client/blocks/reader-author-link/index.jsx"),O=o(H),U=385,B=t.LocalizedRelatedPostCard=(0,j.localize)(l);t.default=(0,b.connect)(function(e,t){var s=t.post,o=(0,x.getPost)(e,s),r=s&&s.site_ID,n=r&&(0,k.getSite)(e,r);return{post:o,site:n,siteId:r}})(B)},"./client/components/card/compact.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=s("./node_modules/lodash/assign.js"),n=o(r),a=s("./node_modules/react/react.js"),l=o(a),i=s("./node_modules/classnames/index.js"),d=o(i),c=s("./node_modules/create-react-class/index.js"),u=o(c),p=s("./client/components/card/index.jsx"),f=o(p);t.default=(0,u.default)({displayName:"CompactCard",render:function(){var e=(0,n.default)({},this.props,{className:(0,d.default)(this.props.className,"is-compact")});return l.default.createElement(f.default,e,this.props.children)}}),e.exports=t.default},"./client/components/data/sync-reader-follows/index.js":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),n=o(r),a=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),l=o(a),i=s("./node_modules/babel-runtime/helpers/createClass.js"),d=o(i),c=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),u=o(c),p=s("./node_modules/babel-runtime/helpers/inherits.js"),f=o(p),m=s("./node_modules/react/react.js"),h=s("./node_modules/react-redux/es/index.js"),_=s("./client/state/selectors/should-sync-reader-follows.js"),g=o(_),b=s("./client/state/reader/follows/actions.js"),v=function(e){function t(){return(0,l.default)(this,t),(0,u.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,d.default)(t,[{key:"check",value:function(){this.props.shouldSync&&this.props.requestFollows()}},{key:"componentDidMount",value:function(){this.check()}},{key:"componentDidUpdate",value:function(){this.check()}},{key:"render",value:function(){return null}}]),t}(m.Component);t.default=(0,h.connect)(function(e){return{shouldSync:(0,g.default)(e)}},{requestFollows:b.requestFollows})(v),e.exports=t.default},"./client/components/infinite-list/index.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var r=s("./node_modules/babel-runtime/core-js/object/keys.js"),n=o(r),a=s("./node_modules/lodash/omit.js"),l=o(a),i=s("./node_modules/debug/browser.js"),d=o(i),c=s("./node_modules/page/index.js"),u=o(c),p=s("./node_modules/react/react.js"),f=o(p),m=s("./node_modules/react-dom/index.js"),h=o(m),_=s("./client/lib/detect-history-navigation/index.js"),g=o(_),b=s("./client/lib/infinite-list/actions.js"),v=o(b),y=s("./client/lib/infinite-list/positions-store.js"),j=o(y),x=s("./client/lib/infinite-list/scroll-store.js"),k=o(x),P=s("./client/components/infinite-list/scroll-helper.js"),S=o(P),E=s("./client/lib/scroll-to/index.js"),I=o(E),w=s("./client/lib/react-smart-set-state/index.js"),C=o(w),R=(0,d.default)("calypso:infinite-list");e.exports=f.default.createClass({displayName:"InfiniteList",lastScrollTop:-1,scrollRAFHandle:!1,scrollHelper:null,isScrolling:!1,propTypes:{items:f.default.PropTypes.array.isRequired,fetchingNextPage:f.default.PropTypes.bool.isRequired,lastPage:f.default.PropTypes.bool.isRequired,guessedItemHeight:f.default.PropTypes.number.isRequired,itemsPerRow:f.default.PropTypes.number,fetchNextPage:f.default.PropTypes.func.isRequired,getItemRef:f.default.PropTypes.func.isRequired,renderItem:f.default.PropTypes.func.isRequired,renderLoadingPlaceholders:f.default.PropTypes.func.isRequired,renderTrailingItems:f.default.PropTypes.func,context:f.default.PropTypes.oneOfType([f.default.PropTypes.object,f.default.PropTypes.bool])},getDefaultProps:function(){return{itemsPerRow:1,renderTrailingItems:function(){}}},smartSetState:C.default,componentWillMount:function(){var e=u.default.current,t=void 0,s=void 0;g.default.loadedViaHistory()&&(t=j.default.get(e),s=k.default.get(e)),t&&s&&(R("overriding scrollTop:",s),t.scrollTop=s),this.scrollHelper=new S.default(this.boundsForRef),this.scrollHelper.props=this.props,this._contextLoaded()&&(this._scrollContainer=this.props.context||window,this.scrollHelper.updateContextHeight(this.getCurrentContextHeight())),this.isScrolling=!1,t?R("infinite-list positions loaded from store"):(R("infinite-list positions reset for new list"),t={firstRenderedIndex:0,topPlaceholderHeight:0,lastRenderedIndex:this.scrollHelper.initialLastRenderedIndex(),bottomPlaceholderHeight:0,scrollTop:0}),R("infinite list mounting",t),this.setState(t)},componentDidMount:function(){this._contextLoaded()&&this._setContainerY(this.state.scrollTop),g.default.loadedViaHistory()&&this._overrideHistoryScroll(),R("setting scrollTop:",this.state.scrollTop),this.updateScroll({triggeredByScroll:!1}),this._contextLoaded()&&this._scrollContainer.addEventListener("scroll",this.onScroll)},componentWillReceiveProps:function(e){this.scrollHelper.props=e,this.isScrolling||(this.cancelAnimationFrame(),this.updateScroll({triggeredByScroll:!1})),e.context!==this.props.context&&this._contextLoaded()&&this._scrollContainer.removeEventListener("scroll",this._resetScroll)},componentDidUpdate:function(e){this._contextLoaded()&&(this.props.context!==e.context&&(this._scrollContainer&&this._scrollContainer.removeEventListener("scroll",this.onScroll),this._scrollContainer=this.props.context||window,this._scrollContainer.addEventListener("scroll",this.onScroll),g.default.loadedViaHistory()&&this._overrideHistoryScroll()),this.isScrolling||(this.cancelAnimationFrame(),this.updateScroll({triggeredByScroll:!1})))},reset:function(){this.cancelAnimationFrame(),this.scrollHelper=new S.default(this.boundsForRef),this.scrollHelper.props=this.props,this._contextLoaded()&&(this._scrollContainer=this.props.context||window,this.scrollHelper.updateContextHeight(this.getCurrentContextHeight())),this.isScrolling=!1,this.setState({firstRenderedIndex:0,topPlaceholderHeight:0,lastRenderedIndex:this.scrollHelper.initialLastRenderedIndex(),bottomPlaceholderHeight:0,scrollTop:0})},componentWillUnmount:function(){this._scrollContainer.removeEventListener("scroll",this.onScroll),this._scrollContainer.removeEventListener("scroll",this._resetScroll),this.cancelAnimationFrame()},cancelAnimationFrame:function(){this.scrollRAFHandle&&(window.cancelAnimationFrame(this.scrollRAFHandle),this.scrollRAFHandle=null),this.lastScrollTop=-1},onScroll:function(){this.isScrolling||this.scrollRAFHandle||this.getCurrentScrollTop()===this.lastScrollTop||(this.scrollRAFHandle=window.requestAnimationFrame(this.scrollChecks))},getCurrentContextHeight:function(){var e=this.props.context||window.document.documentElement;return e.clientHeight},getCurrentScrollTop:function(){return this.props.context?(R("getting scrollTop from context"),this.props.context.scrollTop):window.pageYOffset},scrollChecks:function(){return this.isMounted()&&this.getCurrentScrollTop()!==this.lastScrollTop?void this.updateScroll({triggeredByScroll:!0}):void(this.scrollRAFHandle=null)},scrollToTop:function(){var e=this;this.cancelAnimationFrame(),this.isScrolling=!0,this.props.context&&this.props.context!==window?(this.props.context.scrollTop=0,this.updateScroll({triggeredByScroll:!1}),this.isScrolling=!1):(0,I.default)({x:0,y:0,duration:250,onComplete:function(){e.isMounted()&&e.updateScroll({triggeredByScroll:!1}),e.isScrolling=!1}})},updateScroll:function(e){var t=u.default.current,s=void 0;this._contextLoaded()&&(this.lastScrollTop=this.getCurrentScrollTop(),v.default.storeScroll(t,this.lastScrollTop),this.scrollHelper.updateContextHeight(this.getCurrentContextHeight()),this.scrollHelper.scrollPosition=this.lastScrollTop,this.scrollHelper.triggeredByScroll=e.triggeredByScroll,this.scrollHelper.updatePlaceholderDimensions(),this.scrollHelper.scrollChecks(this.state),this.scrollHelper.stateUpdated&&(s={firstRenderedIndex:this.scrollHelper.firstRenderedIndex,topPlaceholderHeight:this.scrollHelper.topPlaceholderHeight,lastRenderedIndex:this.scrollHelper.lastRenderedIndex,bottomPlaceholderHeight:this.scrollHelper.bottomPlaceholderHeight,scrollTop:this.lastScrollTop},this.lastScrollTop=-1,R("new scroll positions",s,this.state),this.smartSetState(s),v.default.storePositions(t,s)),this.scrollRAFHandle=window.requestAnimationFrame(this.scrollChecks))},boundsForRef:function(e){return e in this.refs?h.default.findDOMNode(this.refs[e]).getBoundingClientRect():null},getVisibleItemIndexes:function(e){var t=h.default.findDOMNode(this),s=[],o=this.state.firstRenderedIndex,r=this.state.lastRenderedIndex,n=e&&e.offsetTop?e.offsetTop:0,a=void 0,l=void 0,i=void 0,d=void 0,c=e&&e.offsetBottom?e.offsetBottom:0;if(c=c||0,r>-1)for(i=t.children,d=1;d<i.length-1;d++)l=t.children[d].getBoundingClientRect(),a=window.innerHeight||document.documentElement.clientHeight,(l.top<0&&Math.abs(l.top)<l.height-n||l.top>0&&l.top<a-c)&&s.push({index:o+d-1,bounds:l});return s},render:function(){var e=(0,l.default)(this.props,(0,n.default)(this.constructor.propTypes)),t="infinite-list__spacer",s=void 0,o=this.state.lastRenderedIndex,r=[];for((o===-1||o>this.props.items.length-1)&&(R("resetting lastRenderedIndex, currently at %s, %d items",o,this.props.items.length),o=Math.min(this.state.firstRenderedIndex+this.scrollHelper.initialLastRenderedIndex(),this.props.items.length-1),R("reset lastRenderedIndex to %s",o)),R("rendering %d to %d",this.state.firstRenderedIndex,o),s=this.state.firstRenderedIndex;s<=o;s++)r.push(this.props.renderItem(this.props.items[s],s));return this.props.fetchingNextPage&&(r=r.concat(this.props.renderLoadingPlaceholders())),f.default.createElement("div",e,f.default.createElement("div",{ref:"topPlaceholder",className:t,style:{height:this.state.topPlaceholderHeight}}),r,this.props.renderTrailingItems(),f.default.createElement("div",{ref:"bottomPlaceholder",className:t,style:{height:this.state.bottomPlaceholderHeight}}))},_setContainerY:function(e){return this.props.context&&this.props.context!==window?void(this.props.context.scrollTop=e):void window.scrollTo(0,e)},_overrideHistoryScroll:function(){this._contextLoaded()&&this._scrollContainer.addEventListener("scroll",this._resetScroll)},_resetScroll:function(e){var t=this.state.scrollTop;this._contextLoaded()&&(R("history setting scroll position:",e),this._setContainerY(t),this._scrollContainer.removeEventListener("scroll",this._resetScroll),R("override scroll position from HTML5 history popstate:",t))},_contextLoaded:function(){return this.props.context||this.props.context===!1||!("context"in this.props)}})},"./client/components/infinite-list/scroll-helper.js":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var r=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),n=o(r),a=s("./node_modules/babel-runtime/helpers/createClass.js"),l=o(a),i=s("./node_modules/debug/browser.js"),d=o(i),c=(0,d.default)("calypso:infinite-list:helper"),u=function(){function e(t){(0,n.default)(this,e),this.boundsForRef=t,this.itemHeights={},this.contextHeight=null,this.topHideLevelHard=null,this.topHideLevelSoft=null,this.bottomHideLevelHard=null,this.bottomHideLevelSoft=null,this.bottomHideLevelUltraSoft=null,this.props=null,this.scrollPosition=null,this.containerTop=null,this.topPlaceholderHeight=null,this.bottomPlaceholderHeight=null,this.containerBottom=null,this.stateUpdated=null,this.firstRenderedIndex=null,this.lastRenderedIndex=null}return(0,l.default)(e,[{key:"storedItemHeight",value:function(e){var t=this.props.guessedItemHeight;return e in this.itemHeights&&(t=this.itemHeights[e]),t}},{key:"forEachInRow",value:function(e,t,s){if("function"==typeof t){s&&(t=t.bind(s));for(var o=e-e%this.props.itemsPerRow,r=Math.min(o+this.props.itemsPerRow,this.props.items.length)-1,n=o;n<=r;n++)t(this.props.items[n],n)}}},{key:"storeRowItemHeights",value:function(e,t){this.forEachInRow(t,function(t){var s=this.props.getItemRef(t),o=this.boundsForRef(s),r=void 0;r=o?"bottom"===e?this.containerBottom-this.bottomPlaceholderHeight-o.top:o.bottom-(this.containerTop+this.topPlaceholderHeight):this.props.guessedItemHeight,this.itemHeights[s]=r},this)}},{key:"deleteRowItemHeights",value:function(e){var t=this;this.forEachInRow(e,function(e){var s=t.props.getItemRef(e);delete t.itemHeights[s]},this)}},{key:"getRowHeight",value:function(e){var t=this,s=0;return this.forEachInRow(e,function(e){var o=t.props.getItemRef(e),r=t.storedItemHeight(o);s=Math.max(s,r)},this),s}},{key:"updateContextHeight",value:function(e){this.contextHeight!==e&&(this.contextHeight=e,this.topHideLevelHard=Math.min(-1*e,-5*this.props.guessedItemHeight),this.topHideLevelSoft=Math.min(-2*e,-10*this.props.guessedItemHeight),this.bottomHideLevelHard=e+Math.max(e,5*this.props.guessedItemHeight),this.bottomHideLevelSoft=e+Math.max(2*e,10*this.props.guessedItemHeight),this.bottomHideLevelUltraSoft=e+Math.max(3*e,15*this.props.guessedItemHeight))}},{key:"initialLastRenderedIndex",value:function(){return Math.min(this.props.items.length-1,Math.floor(this.bottomHideLevelSoft/this.props.guessedItemHeight)-1)}},{key:"updatePlaceholderDimensions",value:function(){var e=this.boundsForRef("topPlaceholder"),t=this.boundsForRef("bottomPlaceholder");this.topPlaceholderHeight=e.height,this.containerTop=e.top,this.bottomPlaceholderHeight=t.height,this.containerBottom=t.bottom}},{key:"scrollChecks",value:function(e){this.reset(e),this.adjustLastRenderedIndex(),this.shouldHideItemsAbove()?this.hideItemsAbove():this.shouldShowItemsAbove()&&this.showItemsAbove(),this.shouldHideItemsBelow()?this.hideItemsBelow():this.shouldShowItemsBelow()&&this.showItemsBelow(),this.shouldLoadNextPage()&&this.loadNextPage()}},{key:"reset",value:function(e){this.stateUpdated=!1,this.firstRenderedIndex=e.firstRenderedIndex,this.lastRenderedIndex=e.lastRenderedIndex}},{key:"adjustLastRenderedIndex",value:function(){var e=this.initialLastRenderedIndex(),t=this.lastRenderedIndex||0,s=this.firstRenderedIndex||0,o=this.props.items.length,r=t;0===o&&(r=-1),t>=o&&(r=Math.min(s+e,o-1)),r===-1&&o>0&&0===s&&(r=e),r!==this.lastRenderedIndex&&(this.stateUpdated=!0,this.lastRenderedIndex=r)}},{key:"shouldHideItemsAbove",value:function(){return this.containerTop+this.topPlaceholderHeight<this.topHideLevelSoft}},{key:"hideItemsAbove",value:function(){for(var e=void 0,t=void 0;this.firstRenderedIndex<this.props.items.length;){if(this.storeRowItemHeights("top",this.firstRenderedIndex),e=this.getRowHeight(this.firstRenderedIndex),t=this.containerTop+this.topPlaceholderHeight+e,t>this.topHideLevelHard){this.deleteRowItemHeights(this.firstRenderedIndex);break}this.topPlaceholderHeight+=e,this.firstRenderedIndex+=this.props.itemsPerRow,this.stateUpdated=!0,c("hiding top item",e,this.topPlaceholderHeight)}}},{key:"shouldShowItemsAbove",value:function(){return this.containerTop+this.topPlaceholderHeight>this.topHideLevelHard}},{key:"showItemsAbove",value:function(){for(var e=void 0,t=void 0;this.firstRenderedIndex>0&&(e=this.getRowHeight(this.firstRenderedIndex-this.props.itemsPerRow),t=this.containerTop+this.topPlaceholderHeight-e,!(t<this.topHideLevelSoft));)this.deleteRowItemHeights(this.firstRenderedIndex-this.props.itemsPerRow),this.firstRenderedIndex-=this.props.itemsPerRow,this.firstRenderedIndex=Math.max(0,this.firstRenderedIndex),
this.firstRenderedIndex<=0?this.topPlaceholderHeight=0:this.topPlaceholderHeight=Math.max(0,this.topPlaceholderHeight-e),this.stateUpdated=!0,c("showing top item",e,this.topPlaceholderHeight)}},{key:"shouldHideItemsBelow",value:function(){var e=this.containerBottom-this.bottomPlaceholderHeight;return e>this.bottomHideLevelUltraSoft}},{key:"hideItemsBelow",value:function(){for(var e=void 0,t=void 0;this.lastRenderedIndex>=0;){if(this.storeRowItemHeights("bottom",this.lastRenderedIndex),t=this.getRowHeight(this.lastRenderedIndex),e=this.containerBottom-this.bottomPlaceholderHeight-t,e<this.bottomHideLevelHard){this.deleteRowItemHeights(this.lastRenderedIndex);break}this.bottomPlaceholderHeight+=t,this.lastRenderedIndex-=this.props.itemsPerRow,this.stateUpdated=!0,c("hiding bottom item",t,this.bottomPlaceholderHeight)}}},{key:"shouldShowItemsBelow",value:function(){var e=this.containerBottom-this.bottomPlaceholderHeight;return e<this.bottomHideLevelHard}},{key:"showItemsBelow",value:function(){for(var e=void 0,t=void 0,s=void 0;this.lastRenderedIndex<this.props.items.length-1&&(e=this.getRowHeight(this.lastRenderedIndex+this.props.itemsPerRow),s=this.containerBottom-this.bottomPlaceholderHeight,t=s+e,!(t>this.bottomHideLevelSoft&&s>this.bottomHideLevelHard));)this.deleteRowItemHeights(this.lastRenderedIndex+this.props.itemsPerRow),this.bottomPlaceholderHeight-e<0?(this.containerBottom+=e-this.bottomPlaceholderHeight,this.bottomPlaceholderHeight=0):this.bottomPlaceholderHeight-=e,this.lastRenderedIndex+=this.props.itemsPerRow,this.lastRenderedIndex=Math.min(this.lastRenderedIndex,this.props.items.length-1),this.lastRenderedIndex>=this.props.items.length-1&&(this.bottomPlaceholderHeight=0),this.stateUpdated=!0,c("showing bottom item",e,this.bottomPlaceholderHeight)}},{key:"shouldLoadNextPage",value:function(){return!this.props.fetchingNextPage&&!this.props.lastPage&&(0===this.bottomPlaceholderHeight&&this.containerBottom<this.bottomHideLevelHard)}},{key:"loadNextPage",value:function(){var e=this,t=this.triggeredByScroll;c("fetching next page",this.containerBottom,this.bottomPlaceholderHeight),this.scrollPosition>this.contextHeight&&(t=!0),setTimeout(function(){return!e.props.fetchingNextPage&&!e.props.lastPage&&void e.props.fetchNextPage({triggeredByScroll:t})},0)}}]),e}();e.exports=u},"./client/components/list-end/index.js":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(){return l}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var n=s("./node_modules/react/react.js"),a=o(n),l=a.default.createElement("div",{className:"list-end"});e.exports=t.default},"./client/components/mobile-back-to-sidebar/index.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=s("./node_modules/react/react.js"),n=o(r),a=s("./node_modules/react-redux/es/index.js"),l=s("./client/state/ui/layout-focus/actions.js"),i=n.default.createClass({displayName:"MobileBackToSidebar",toggleSidebar:function(e){e.preventDefault(),this.props.setLayoutFocus("sidebar")},render:function(){return n.default.createElement("div",{className:"mobile-back-to-sidebar",onClick:this.toggleSidebar},n.default.createElement("svg",{className:"gridicon gridicon-back-arrow mobile-back-to-sidebar__icon",height:"24",width:"24",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},n.default.createElement("g",null,n.default.createElement("path",{d:"M8.886 4L7 5.886 13.114 12 7 18.114 8.886 20l8-8"}))),n.default.createElement("span",{className:"mobile-back-to-sidebar__content"},this.props.children))}});t.default=(0,a.connect)(null,{setLayoutFocus:l.setLayoutFocus})(i),e.exports=t.default},"./client/components/reader-main/index.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=s("./node_modules/babel-runtime/helpers/objectWithoutProperties.js"),n=o(r),a=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),l=o(a),i=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),d=o(i),c=s("./node_modules/babel-runtime/helpers/createClass.js"),u=o(c),p=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),f=o(p),m=s("./node_modules/babel-runtime/helpers/inherits.js"),h=o(m),_=s("./node_modules/react/react.js"),g=o(_),b=s("./client/components/main/index.jsx"),v=o(b),y=s("./client/components/data/sync-reader-follows/index.js"),j=o(y),x=function(e){function t(){return(0,d.default)(this,t),(0,f.default)(this,(t.__proto__||(0,l.default)(t)).apply(this,arguments))}return(0,h.default)(t,e),(0,u.default)(t,[{key:"componentWillMount",value:function(){document.querySelector("body").classList.add("is-reader-page")}},{key:"componentWillUnmount",value:function(){document.querySelector("body").classList.remove("is-reader-page")}},{key:"render",value:function(){var e=this.props,t=e.children,s=(0,n.default)(e,["children"]);return g.default.createElement(v.default,s,g.default.createElement(j.default,{key:"syncReaderFollows"}),t)}}]),t}(g.default.Component);t.default=x,e.exports=t.default},"./client/components/section-nav/index.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var r=s("./node_modules/lodash/includes.js"),n=o(r),a=s("./node_modules/lodash/isEqual.js"),l=o(a),i=s("./node_modules/react/react.js"),d=o(i),c=s("./node_modules/classnames/index.js"),u=o(c),p=s("./client/my-sites/comments/comment-navigation/comment-navigation-tab.jsx"),f=o(p),m=s("./client/components/section-nav/tabs.jsx"),h=o(m),_=s("./client/components/section-nav/item.jsx"),g=o(_),b=s("./client/components/search/index.jsx"),v=o(b),y=d.default.createClass({displayName:"SectionNav",propTypes:{children:d.default.PropTypes.node,selectedText:d.default.PropTypes.node,selectedCount:d.default.PropTypes.number,hasPinnedItems:d.default.PropTypes.bool,onMobileNavPanelOpen:d.default.PropTypes.func,className:d.default.PropTypes.string,allowDropdown:d.default.PropTypes.bool},getInitialState:function(){return{mobileOpen:!1}},getDefaultProps:function(){return{onMobileNavPanelOpen:function(){},allowDropdown:!0}},componentWillMount:function(){this.checkForSiblingControls(this.props.children)},componentWillReceiveProps:function(e){(0,l.default)(this.props,e)||(this.checkForSiblingControls(e.children),this.hasSiblingControls||this.closeMobilePanel())},renderDropdown:function(){return this.props.allowDropdown?d.default.createElement("div",{className:"section-nav__mobile-header",onClick:this.toggleMobileOpenState},d.default.createElement("span",{className:"section-nav__mobile-header-text"},this.props.selectedText)):d.default.createElement("div",null)},render:function(){var e,t=this.getChildren();return t?(e=(0,u.default)({"section-nav":!0,"is-open":this.state.mobileOpen,"has-pinned-items":this.hasPinnedSearch||this.props.hasPinnedItems},this.props.className),d.default.createElement("div",{className:e},this.renderDropdown(),d.default.createElement("div",{className:"section-nav__panel"},t))):(e=(0,u.default)({"section-nav":!0,"is-empty":!0},this.props.className),d.default.createElement("div",{className:e},d.default.createElement("div",{className:"section-nav__panel"},d.default.createElement(g.default,null))))},getChildren:function(){return d.default.Children.map(this.props.children,function(e){var t={hasSiblingControls:this.hasSiblingControls,closeSectionNavMobilePanel:this.closeMobilePanel};return e?(e.type!==h.default||e.props.selectedText||"string"!=typeof this.props.selectedText||(t.selectedText=this.props.selectedText),e.type===h.default&&this.props.selectedCount&&(t.selectedCount=this.props.selectedCount),e.type===v.default&&(e.props.pinned&&(this.hasPinnedSearch=!0),t.onSearch=this.generateOnSearch(e.props.onSearch)),d.default.cloneElement(e,t)):null}.bind(this))},closeMobilePanel:function(){window.innerWidth<480&&this.state.mobileOpen&&this.setState({mobileOpen:!1})},toggleMobileOpenState:function(){var e=!this.state.mobileOpen;this.setState({mobileOpen:e}),e&&this.props.onMobileNavPanelOpen()},generateOnSearch:function(e){return function(){e.apply(this,arguments),this.closeMobilePanel()}.bind(this)},checkForSiblingControls:function(e){this.hasSiblingControls=!1;var t=[v.default,f.default];d.default.Children.forEach(e,function(e,s){s&&e&&!(0,n.default)(t,e.type)&&(this.hasSiblingControls=!0)}.bind(this))}});e.exports=y},"./client/components/section-nav/item.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var r=s("./client/components/count/index.jsx"),n=o(r),a=s("./client/sections-preload.js"),l=s("./node_modules/react/react.js"),i=s("./node_modules/react-pure-render/mixin.js"),d=s("./node_modules/classnames/index.js"),c=l.createClass({displayName:"NavItem",mixins:[i],propTypes:{itemType:l.PropTypes.string,path:l.PropTypes.string,selected:l.PropTypes.bool,tabIndex:l.PropTypes.number,onClick:l.PropTypes.func,isExternalLink:l.PropTypes.bool,disabled:l.PropTypes.bool,count:l.PropTypes.oneOfType([l.PropTypes.number,l.PropTypes.bool]),className:l.PropTypes.string,preloadSectionName:l.PropTypes.string},_preloaded:!1,preload:function(){!this._preloaded&&this.props.preloadSectionName&&(this._preloaded=!0,(0,a.preload)(this.props.preloadSectionName))},render:function(){var e,t,s,o=this.props.itemType?this.props.itemType:"tab",r={"is-selected":this.props.selected,"is-external":this.props.isExternalLink};return r["section-nav-"+o]=!0,e=d(this.props.className,r),this.props.isExternalLink&&(t="_blank"),this.props.disabled||(s=this.props.onClick),l.createElement("li",{className:e},l.createElement("a",{href:this.props.path,target:t,className:"section-nav-"+o+"__link",onClick:s,onMouseEnter:this.preload,tabIndex:this.props.tabIndex||0,"aria-selected":this.props.selected,disabled:this.props.disabled,role:"menuitem",rel:this.props.isExternalLink?"external":null},l.createElement("span",{className:"section-nav-"+o+"__text"},this.props.children,"number"==typeof this.props.count&&l.createElement(n.default,{count:this.props.count}))))}});e.exports=c},"./client/components/section-nav/tabs.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var r=s("./node_modules/babel-runtime/helpers/extends.js"),n=o(r),a=s("./node_modules/lodash/debounce.js"),l=o(a),i=s("./node_modules/react-dom/index.js"),d=s("./node_modules/react/react.js"),c=s("./node_modules/classnames/index.js"),u=s("./client/components/select-dropdown/index.jsx"),p=s("./client/components/select-dropdown/item.jsx"),f=s("./client/lib/viewport/index.js"),m=480,h=d.createClass({displayName:"NavTabs",propTypes:{selectedText:d.PropTypes.string,selectedCount:d.PropTypes.number,label:d.PropTypes.string,hasSiblingControls:d.PropTypes.bool},getDefaultProps:function(){return{hasSiblingControls:!1}},getInitialState:function(){return{isDropdown:!1}},componentDidMount:function(){this.setDropdown(),this.debouncedAfterResize=(0,l.default)(this.setDropdown,300),window.addEventListener("resize",this.debouncedAfterResize)},componentWillReceiveProps:function(){this.setDropdown()},componentWillUnmount:function(){window.removeEventListener("resize",this.debouncedAfterResize)},render:function(){var e=d.Children.map(this.props.children,function(e,t){return e&&d.cloneElement(e,{ref:"tab-"+t})}),t=c({"section-nav-tabs":!0,"is-dropdown":this.state.isDropdown,"is-open":this.state.isDropdownOpen,"has-siblings":this.props.hasSiblingControls}),s=f.getWindowInnerWidth();return d.createElement("div",{className:"section-nav-group",ref:"navGroup"},d.createElement("div",{className:t},this.props.label&&d.createElement("h6",{className:"section-nav-group__label"},this.props.label),d.createElement("ul",{className:"section-nav-tabs__list",role:"menu",onKeyDown:this.keyHandler},e),this.state.isDropdown&&s>m&&this.getDropdown()))},getTabWidths:function(){var e=0;d.Children.forEach(this.props.children,function(t,s){if(t){var o=i.findDOMNode(this.refs["tab-"+s]).offsetWidth;e+=o}}.bind(this)),this.tabsWidth=e},getDropdown:function(){var e=d.Children.map(this.props.children,function(e,t){return e?d.createElement(p,(0,n.default)({},e.props,{key:"navTabsDropdown-"+t}),e.props.children):null});return d.createElement(u,{className:"section-nav-tabs__dropdown",selectedText:this.props.selectedText,selectedCount:this.props.selectedCount},e)},setDropdown:function(){var e;if(window.innerWidth>m){if(!this.refs.navGroup)return;e=this.refs.navGroup.offsetWidth,this.tabsWidth||this.getTabWidths(),e<=this.tabsWidth&&!this.state.isDropdown?this.setState({isDropdown:!0}):e>this.tabsWidth&&this.state.isDropdown&&this.setState({isDropdown:!1})}else window.innerWidth<=m&&this.state.isDropdown&&this.setState({isDropdown:!1})},keyHandler:function(e){switch(e.keyCode){case 32:case 13:e.preventDefault(),document.activeElement.click()}}});e.exports=h},"./client/lib/feed-lookup/index.js":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){return"feed-lookup-"+e}function n(e){var t=r(e);return(0,f.isRequestInflight)(t)?_.get(e):h.default.undocumented().discoverFeed({url:e})}function a(e){var t=_.get(e);return t?t:(t=n(e).then(function(e){if(!(0,c.default)(e.feeds)){var t=(0,i.default)(e.feeds);if(!(0,c.default)(t.feed_ID))return t.feed_ID}}),_.set(e,t),t)}var l=s("./node_modules/lodash/head.js"),i=o(l),d=s("./node_modules/lodash/isEmpty.js"),c=o(d),u=s("./node_modules/lru/index.js"),p=o(u),f=s("./client/lib/inflight/index.js"),m=s("./client/lib/wp/browser.js"),h=o(m),_=new p.default(10);e.exports=a},"./client/lib/feed-post-store/display-types.js":function(e,t,s){"use strict";e.exports={UNCLASSIFIED:0,PHOTO_ONLY:1,LARGE_BANNER:2,ONE_LINER:4,LANDSCAPE_BANNER:8,PORTRAIT_BANNER:16,GALLERY:32,VIDEO:64,THUMBNAIL:128,FEATURED_VIDEO:512,X_POST:1024}},"./client/lib/feed-stream-store/actions.js":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){var t={orderBy:e.orderBy,number:e.perPage,meta:"post,discover_original_post"},s=e.getLastItemWithDate();return s?t.before=s:(t.number=4,e.startDate&&(t.before=e.startDate)),t}function n(e){var t=I.default.get(e);if(t&&!t.isLastPage()&&!t.isFetchingNextPage()&&!t.hasRecentError()){x.default.handleViewAction({type:k.action.FETCH_NEXT_PAGE,id:e});var s=r(t);t.onNextPageFetch(s),t.fetcher(s,a.bind(null,t.id))}}function a(e,t,s){!t&&s&&s.posts&&(0,y.default)(s.posts,function(e){e&&(0,b.default)(e,"meta.data.discover_original_post")&&S.default.receivePost(null,e.meta.data.discover_original_post,{blogId:e.meta.data.discover_original_post.site_ID,postId:e.meta.data.discover_original_post.ID}),e&&(0,b.default)(e,"meta.data.post")?S.default.receivePost(null,e.meta.data.post,{feedId:e.feed_ID,postId:e.ID}):e&&e.feed_ID&&e.feed_item_ID?S.default.receivePost(null,e,{feedId:e.feed_ID,postId:e.feed_item_ID}):e&&e.site_ID&&S.default.receivePost(null,e,{blogId:e.site_ID,postId:e.ID}),e.comments&&(0,R.reduxDispatch)({type:N.COMMENTS_RECEIVE,siteId:e.site_ID,postId:e.ID,comments:e.comments})}),x.default.handleServerAction({type:k.action.RECEIVE_PAGE,id:e,error:t,data:s})}function l(e,t,s){!t&&s&&s.posts&&(0,y.default)(s.posts,function(e){e.comments&&(0,R.reduxDispatch)({type:N.COMMENTS_RECEIVE,siteId:e.site_ID,postId:e.ID,comments:e.comments})}),x.default.handleServerAction({type:k.action.RECEIVE_UPDATES,id:e,error:t,data:s})}function i(e){x.default.handleViewAction({type:k.action.SHOW_UPDATES,id:e})}function d(e){x.default.handleViewAction({type:k.action.SELECT_NEXT_ITEM,id:e})}function c(e){x.default.handleViewAction({type:k.action.SELECT_PREV_ITEM,id:e})}function u(e){x.default.handleViewAction({type:k.action.SELECT_FIRST_ITEM,id:e})}function p(e,t){x.default.handleViewAction({type:k.action.SELECT_ITEM,id:e,postKey:t})}function f(e,t){var s=I.default.get(e);if(s){x.default.handleViewAction({type:k.action.FILL_GAP,id:e,gap:t});var o={before:t.to.toISOString(),after:t.from.toISOString(),number:s.gapFillCount,orderBy:s.orderBy};s.onGapFetch(o),s.fetcher(o,m.bind(null,s.id,t))}}function m(e,t,s,o){x.default.handleServerAction({type:k.action.RECEIVE_GAP,id:e,gap:t,error:s,data:o})}function h(e,t){x.default.handleViewAction({type:k.action.DISMISS_FEED_STREAM_POST,postKey:{blogId:t.site_ID,postId:t.ID},id:e}),C.default.undocumented().me().dismissSite(t.site_ID)}function _(e){x.default.handleViewAction({type:k.action.SHUFFLE_POSTS,id:e})}Object.defineProperty(t,"__esModule",{value:!0});var g=s("./node_modules/lodash/get.js"),b=o(g),v=s("./node_modules/lodash/forEach.js"),y=o(v);t.fetchNextPage=n,t.receivePage=a,t.receiveUpdates=l,t.showUpdates=i,t.selectNextItem=d,t.selectPrevItem=c,t.selectFirstItem=u,t.selectItem=p,t.fillGap=f,t.receiveGap=m,t.dismissPost=h,t.shufflePosts=_;var j=s("./client/dispatcher/index.js"),x=o(j),k=s("./client/lib/feed-stream-store/constants.js"),P=s("./client/lib/feed-post-store/actions.js"),S=o(P),E=s("./client/lib/feed-stream-store/feed-stream-cache.js"),I=o(E),w=s("./client/lib/wp/browser.js"),C=o(w),R=s("./client/lib/redux-bridge/index.js"),N=s("./client/state/action-types.js")},"./client/lib/feed-stream-store/feed-stream-cache.js":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){return/^following|a8c|likes|conversations/.test(e)}var n=s("./node_modules/lru/index.js"),a=o(n),l=new a.default(10),i={};e.exports={get:function(e){return r(e)?i[e]:l.get(e)},set:function(e,t){r(e)?i[e]=t:l.set(e,t)},clear:function(){i={},l=new a.default(10)}}},"./client/lib/feed-stream-store/feed-stream.js":function(e,t,s){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=s("./node_modules/babel-runtime/core-js/set.js"),a=r(n),l=s("./node_modules/babel-runtime/core-js/object/assign.js"),i=r(l),d=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),c=r(d),u=s("./node_modules/babel-runtime/helpers/createClass.js"),p=r(u),f=s("./node_modules/lodash/uniqBy.js"),m=r(f),h=s("./node_modules/lodash/defer.js"),_=r(h),g=s("./node_modules/lodash/some.js"),b=r(g),v=s("./node_modules/lodash/noop.js"),y=r(v),j=s("./node_modules/lodash/map.js"),x=r(j),k=s("./node_modules/lodash/get.js"),P=r(k),S=s("./node_modules/lodash/forEach.js"),E=r(S),I=s("./node_modules/lodash/findLastIndex.js"),w=r(I),C=s("./node_modules/lodash/findIndex.js"),R=r(C),N=s("./node_modules/lodash/filter.js"),T=r(N),M=s("./node_modules/moment/moment.js"),L=r(M),D=s("./node_modules/debug/browser.js"),F=r(D),A=s("./client/lib/mixins/emitter/index.js"),H=r(A),O=s("./client/lib/feed-post-store/index.js"),U=r(O),B=s("./client/lib/feed-stream-store/actions.js"),K=o(B),q=s("./client/lib/feed-stream-store/constants.js"),W=s("./client/lib/data-poller/index.js"),G=r(W),V=s("./client/reader/controller-helper.js"),Y=s("./client/reader/stats.js"),z=o(Y),X=s("./client/lib/feed-stream-store/post-key.js"),$=(0,F.default)("calypso:feed-store:post-list-store"),Q=function(){function e(t){if((0,c.default)(this,e),!t)throw new Error("must supply a feed stream spec");if(!t.id)throw new Error("missing id");if(!t.fetcher)throw new Error("missing fetcher");if(!t.keyMaker)throw new Error("must supply keyMaker");this.id=t.id,(0,i.default)(this,{id:t.id,postKeys:[],pendingPostKeys:[],postById:new a.default,errors:[],fetcher:t.fetcher,page:1,perPage:7,selectedIndex:-1,xPostedByURL:{},maxUpdates:t.maxUpdates||40,gapFillCount:21,orderBy:"date",_isLastPage:!1,_isFetchingNextPage:!1,keyMaker:t.keyMaker,onNextPageFetch:t.onNextPageFetch||y.default,onGapFetch:t.onGapFetch||y.default,onUpdateFetch:t.onUpdateFetch||y.default,dateProperty:t.dateProperty||"date",poller:G.default.add(this,"pollForUpdates",{interval:6e4,leading:!1,pauseWhenHidden:!1}),startDate:t.startDate})}return(0,p.default)(e,[{key:"destroy",value:function(){G.default.remove(this.poller)}},{key:"handlePayload",value:function(e){var t=e&&e.action;if(t&&t.id===this.id)switch(t.type){case q.action.RECEIVE_PAGE:this.receivePage(t.id,t.error,t.data);break;case q.action.RECEIVE_UPDATES:this.receiveUpdates(t.id,t.error,t.data);break;case q.action.SHOW_UPDATES:this.acceptUpdates();break;case q.action.RECEIVE_GAP:this.receiveFeedGap(t.gap,t.error,t.data);break;case q.action.FETCH_NEXT_PAGE:this.setIsFetchingNextPage(!0);break;case q.action.SELECT_ITEM:this.selectItem(t.postKey,t.id);break;case q.action.SELECT_NEXT_ITEM:this.selectNextItem(t.postKey);break;case q.action.SELECT_PREV_ITEM:this.selectPrevItem(t.postKey);break;case q.action.SELECT_FIRST_ITEM:this.selectFirstItem()}}},{key:"get",value:function(){return this.postKeys}},{key:"getID",value:function(){return this.id}},{key:"getAll",value:function(){return(0,x.default)(this.postKeys,function(e){return e.isGap?e:U.default.get(e)})}},{key:"getPage",value:function(){return this.page}},{key:"getPerPage",value:function(){return this.perPage}},{key:"getUpdateCount",value:function(){return this.pendingPostKeys.length}},{key:"getSelectedPostKey",value:function(){return this.selectedIndex>=0&&this.selectedIndex<this.postKeys.length?this.postKeys[this.selectedIndex]:null}},{key:"isLastPage",value:function(){return this._isLastPage}},{key:"isFetchingNextPage",value:function(){return this._isFetchingNextPage}},{key:"isValidPostOrGap",value:function(e){if(e.isGap===!0)return!0;var t=U.default.get(e);return t&&"error"!==t._state&&"pending"!==t._state&&"minimal"!==t._state}},{key:"selectNextItem",value:function(){var e=this;if(this.selectedIndex!==-1){var t=(0,R.default)(this.postKeys,this.isValidPostOrGap,this.selectedIndex+1);t!==-1&&(this.selectedIndex=t,this.emitChange());var s=10;if(t+s>this.postKeys.length||t===-1){var o=function(){return K.fetchNextPage(e.getID())};(0,_.default)(o),this.onKeyboardFetchPerformed()}}}},{key:"onKeyboardFetchPerformed",value:function(){z.recordTrack("calypso_reader_fullpost_keyboard_fetch")}},{key:"selectPrevItem",value:function(){if(!(this.selectedIndex<1)){var e=(0,w.default)(this.postKeys,this.isValidPostOrGap,this.selectedIndex-1);e!==-1&&(this.selectedIndex=e,this.emitChange())}}},{key:"selectFirstItem",value:function(){0!==this.selectedIndex&&(this.selectedIndex=0,this.emitChange())}},{key:"selectItem",value:function(e,t){var s=(0,R.default)(this.postKeys,e);this.isValidPostOrGap(this.postKeys[s])&&s!==this.selectedIndex&&(this.selectedIndex=s,(0,V.setLastStoreId)(t),this.emitChange())}},{key:"getLastItemWithDate",value:function(){if(this.oldestPostDate)return this.oldestPostDate;var e=this.postKeys.length-1;if(e!==-1){var t=void 0;do{var s=this.postKeys[e];s.isGap||(t=s[this.dateProperty]),--e}while(!t&&e!==-1);return t}}},{key:"getFirstItemWithDate",value:function(){if(0!==this.postKeys.length){var e=0,t=void 0;do{var s=this.postKeys[e];s.isGap||(t=s[this.dateProperty]),++e}while(!t&&e<this.postKeys.length);return t}}},{key:"hasRecentError",value:function(e){var t=Date.now()-6e4;return this.errors.some(function(s){return s.timestamp&&s.timestamp>t&&(!e||e===s.error)})}},{key:"setIsFetchingNextPage",value:function(e){this._isFetchingNextPage=e,this.emitChange()}},{key:"pollForUpdates",value:function(){var e=this;if(this.isFetchingUpdates)return void $("already fetching, skip");if(!this.postKeys.length)return void $("skipping poll because we have no posts");var t=this.getFirstItemWithDate();if(t){this.isFetchingUpdates=!0;var s={orderBy:this.orderBy,number:this.maxUpdates,before:(0,L.default)().toISOString(),after:(0,L.default)(t).toISOString()};this.onUpdateFetch(s),$("polling for updates"),this.fetcher(s,function(t,s){$("poll response received",t,s),e.isFetchingUpdates=!1,K.receiveUpdates(e.id,t,s)})}}},{key:"getSitesCrossPostedTo",value:function(e){return this.xPostedByURL[e]}},{key:"getPostFromMetadata",value:function(e){return e&&(0,P.default)(e,"meta.data.discover_original_post")?e.meta.data.discover_original_post:e&&(0,P.default)(e,"meta.data.post")?e.meta.data.post:e.feed_ID||e.site_ID?e:null}},{key:"addXPost",value:function(e,t){if(this.xPostedByURL[e]){var s=this.xPostedByURL[e];s=s.filter(function(e){return e.siteName!==t.siteName&&e.siteURL!==t.siteURL}),s.push(t),this.xPostedByURL[e]=s}else this.xPostedByURL[e]=[t]}},{key:"filterFollowedXPosts",value:function(e){return e}},{key:"filterNewPosts",value:function(e){var t=this,s=this.postById;return e=(0,T.default)(e,function(e){return!s.has((0,X.keyToString)(t.keyMaker(e)))}),e=this.filterFollowedXPosts(e),(0,x.default)(e,this.keyMaker)}},{key:"receivePage",value:function(e,t,s){if(e===this.id){if($("receiving page in %s",this.id),this._isFetchingNextPage=!1,this.oldestPostDate=(0,P.default)(s,["date_range","after"]),this.lastPageHandle=(0,P.default)(s,["meta","next_page"],null),t)return $("Error fetching posts from API:",t),t.timestamp=Date.now(),this.errors.push(t),void this.emitChange();var o=s&&s.posts;if(!o)return void this.emitChange();if(!o.length)return this._isLastPage=!0,void this.emitChange();var r=this.filterNewPosts(o);if(r.length){var n=this.postById;(0,E.default)(r,function(e){n.add((0,X.keyToString)(e))}),this.postKeys=this.postKeys.concat(r)}this.page++,this.emitChange()}}},{key:"receiveUpdates",value:function(e,t,s){if(e===this.id&&!t&&s&&s.posts){var o=this.filterNewPosts(s.posts);o.length>0&&(this.pendingPostKeys=o,this.pendingDateAfter=(0,L.default)(this.keyMaker(s.posts[s.posts.length-1])[this.dateProperty]),this.emitChange())}}},{key:"acceptUpdates",value:function(){if(0!==this.pendingPostKeys.length){var e=this.postById;(0,E.default)(this.pendingPostKeys,function(t){e.add((0,X.keyToString)(t))});var t=(0,L.default)(this.postKeys[0][this.dateProperty]),s=this.postKeys[0];!(0,b.default)(this.pendingPostKeys,function(e){return(0,X.keysAreEqual)(e,s)})&&this.pendingDateAfter>t&&this.pendingPostKeys.push({isGap:!0,from:t,to:this.pendingDateAfter}),this.postKeys=(0,m.default)(this.pendingPostKeys.concat(this.postKeys),function(e){return(0,X.keyToString)(e)}),this.selectedIndex>-1&&(this.selectedIndex=-1),this.pendingPostKeys=[],this.pendingDateAfter=null,this.emitChange()}}},{key:"receiveFeedGap",value:function(e,t,s){if(t)return this.errors.push(t),void this.emitChange();var o=s&&s.posts;if(o){var r=this.postKeys.indexOf(e);if(r===-1)return void $("gap %o not found",e);var n=this.postKeys.slice(0,r),a=this.postKeys.slice(r+1),l=this.filterNewPosts(o),i=(0,L.default)(a[0][this.dateProperty]);o.length===this.gapFillCount&&(0,L.default)(o[o.length-1][this.dateProperty])>i&&l.push({isGap:!0,from:i,to:(0,L.default)(o[o.length-1][this.dateProperty])}),this.postKeys=n.concat(l,a),this.emitChange()}}}]),e}();t.default=Q,(0,H.default)(Q.prototype),e.exports=t.default},"./client/lib/feed-stream-store/index.js":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){return{feedId:e.feed_ID,postId:e.ID,date:new Date(e.date)}}function n(e){return{blogId:e.site_ID,postId:e.ID,date:new Date(e.date)}}function a(e){return e.feed_ID&&e.feed_item_ID?{feedId:e.feed_ID,postId:e.feed_item_ID,date:new Date(e.date)}:n(e)}function l(e){return function(t){var s=n(t);return(0,R.default)({},s,(0,w.default)({},e,t[e]))}}function i(e){delete e.meta,delete e.orderBy,delete e.before,delete e.after,e.page_handle=this.lastPageHandle}function d(e){var t=this,s=(0,F.default)(e,this.keyMaker);return(0,W.default)(s,function(e){if(!t.postById.has((0,ne.keyToString)(e)))return!0;var s=(0,K.default)(t.postKeys,function(t){return(0,ne.keysAreEqual)(t,e)});return!s||!(0,H.default)(s.comments,e.comments)})}function c(e){e.meta="post,discover_original_post"}function u(e){e.fields="ID,site_ID,date"}function p(e){u(e),e.fields+=",date_liked"}function f(e){u(e),e.fields+=",tagged_on"}function m(e){u(e),e.fields+=",last_comment_date_gmt,comments"}function h(e,t){return function(s,o){var r="calypso_traintracks_render";o&&o.algorithm&&(e.algorithm=o.algorithm),(0,U.default)(o&&o.posts,function(t){t.railcar&&(e.isQuerySuggestion&&(t.railcar.rec_result="suggestion"),se.default.tracks.recordEvent(r,t.railcar))}),t(s,o)}}function _(e){var t=e.split(":")[1],s=function(e,s){e.ID=t,ae.readFeedPosts(e,s)};return new $.default({id:e,fetcher:s,keyMaker:r,onNextPageFetch:c})}function g(e){var t=e.split(":")[1],s=function(e,s){e.tag=t,ae.readTagPosts(e,s)};return V.default.isEnabled("reader/tags-with-elasticsearch")?new J.default({id:e,fetcher:s,keyMaker:n,perPage:5}):new $.default({id:e,fetcher:s,keyMaker:l("tagged_on"),onGapFetch:f,onUpdateFetch:f,dateProperty:"tagged_on"})}function b(e){return"relevance"!==e&&"date"!==e?"relevance":e}function v(e){function t(e,t){e.q=r,e.meta="site",e.sort=o,ae.readSearch(e,h(a,t))}var s=e.split(":"),o=b(s[1]),r=s.slice(2).join(":"),a=void 0;return a="date"===o?new $.default({id:e,fetcher:t,keyMaker:n,perPage:5,onGapFetch:u,onUpdateFetch:u,maxUpdates:20}):new J.default({id:e,fetcher:t,keyMaker:n,perPage:5}),a.sortOrder=o,a}function y(e){var t=e.split(":")[1],s=t.split("-"),o=(0,E.default)(s),r=o[0],n=o.slice(1),l=function(e,t){e.owner=r,e.slug=n.join("-"),ae.readListPosts(e,t)};return new $.default({id:e,fetcher:l,keyMaker:a,onGapFetch:u,onUpdateFetch:u})}function j(e){var t=e.split(":")[1],s=function(e,s){e.site=t,ae.readSitePosts(e,s)};return new $.default({id:e,fetcher:s,keyMaker:n,onGapFetch:u,onUpdateFetch:u})}function x(e){var t=e.split(":")[1],s=function(e,s){ae.readSiteFeatured(t,e,s)};return new $.default({id:e,fetcher:s,keyMaker:n,onGapFetch:u,onUpdateFetch:u})}function k(e){function t(t,o){switch(e){case"cold_posts":t.algorithm="read:recommendations:posts/es/2";break;case"cold_posts_1w":t.algorithm="read:recommendations:posts/es/3";break;case"cold_posts_2w":t.algorithm="read:recommendations:posts/es/4";break;case"cold_posts_4w":t.algorithm="read:recommendations:posts/es/5";break;case"cold_posts_topics":t.algorithm="read:recommendations:posts/es/6";break;case"custom_recs_posts_with_images":t.alg_prefix="read:recommendations:posts",t.seed=(0,L.default)(0,1e4);break;default:t.algorithm="read:recommendations:posts/es/1"}ae.readRecommendedPosts(t,h(s,o))}var s=new J.default({id:e,fetcher:t,keyMaker:n,perPage:6}),o=s.onNextPageFetch;return s.onNextPageFetch=function(e){o.call(this,e),e.algorithm=s.algorithm},s}function P(e){var t=ee.default.get(e);if(t)return t;if("following"===e)t=new $.default({id:e,fetcher:ae.readFollowing.bind(ae),keyMaker:r,onNextPageFetch:c});else if("conversations"===e)t=new $.default({id:e,fetcher:ae.readConversations.bind(ae),keyMaker:le,onNextPageFetch:i,onUpdateFetch:m,onGapFetch:m,dateProperty:"last_comment_date_gmt"}),t.filterNewPosts=d;else if("conversations-a8c"===e)t=new $.default({id:e,fetcher:ae.readA8cConversations.bind(ae),keyMaker:le,onNextPageFetch:i,onUpdateFetch:m,onGapFetch:m,dateProperty:"last_comment_date_gmt"}),t.filterNewPosts=d;else if("a8c"===e)t=new $.default({id:e,fetcher:ae.readA8C.bind(ae),keyMaker:r,onNextPageFetch:c});else if("likes"===e)t=new $.default({id:e,fetcher:ae.readLiked.bind(ae),keyMaker:l("date_liked"),onGapFetch:p,onUpdateFetch:p,dateProperty:"date_liked"});else if("recommendations_posts"===e)t=k(e);else if((0,T.default)(e,"cold_posts"))t=k(e);else if((0,T.default)(e,"custom_recs"))t=k(e);else if((0,T.default)(e,"feed:"))t=_(e);else if((0,T.default)(e,"tag:"))t=g(e);else if((0,T.default)(e,"list:"))t=y(e);else if((0,T.default)(e,"site:"))t=j(e);else if((0,T.default)(e,"featured:"))t=x(e);else{if(!(0,T.default)(e,"search:"))throw new Error("Unknown feed store ID");t=v(e)}return t.dispatchToken=z.default.register(t.handlePayload.bind(t)),ee.default.set(e,t),t}Object.defineProperty(t,"__esModule",{value:!0});var S=s("./node_modules/babel-runtime/helpers/toArray.js"),E=o(S),I=s("./node_modules/babel-runtime/helpers/defineProperty.js"),w=o(I),C=s("./node_modules/babel-runtime/helpers/extends.js"),R=o(C),N=s("./node_modules/lodash/startsWith.js"),T=o(N),M=s("./node_modules/lodash/random.js"),L=o(M),D=s("./node_modules/lodash/map.js"),F=o(D),A=s("./node_modules/lodash/isEqual.js"),H=o(A),O=s("./node_modules/lodash/forEach.js"),U=o(O),B=s("./node_modules/lodash/find.js"),K=o(B),q=s("./node_modules/lodash/filter.js"),W=o(q);
t.default=P;var G=s("./client/config/index.js"),V=o(G),Y=s("./client/dispatcher/index.js"),z=o(Y),X=s("./client/lib/feed-stream-store/feed-stream.js"),$=o(X),Q=s("./client/lib/feed-stream-store/paged-stream.js"),J=o(Q),Z=s("./client/lib/feed-stream-store/feed-stream-cache.js"),ee=o(Z),te=s("./client/lib/analytics/index.js"),se=o(te),oe=s("./client/lib/wp/browser.js"),re=o(oe),ne=s("./client/lib/feed-stream-store/post-key.js"),ae=re.default.undocumented(),le=function(){var e=l("last_comment_date_gmt");return function(t){var s=e(t);return s.comments=(0,F.default)(t.comments,"ID").reverse(),s}}();e.exports=t.default},"./client/lib/feed-stream-store/paged-stream.js":function(e,t,s){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=s("./node_modules/babel-runtime/helpers/toConsumableArray.js"),a=r(n),l=s("./node_modules/babel-runtime/core-js/set.js"),i=r(l),d=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),c=r(d),u=s("./node_modules/babel-runtime/helpers/createClass.js"),p=r(u),f=s("./node_modules/lodash/defer.js"),m=r(f),h=s("./node_modules/lodash/map.js"),_=r(h),g=s("./node_modules/lodash/last.js"),b=r(g),v=s("./node_modules/lodash/forEach.js"),y=r(v),j=s("./node_modules/lodash/findLastIndex.js"),x=r(j),k=s("./node_modules/lodash/findIndex.js"),P=r(k),S=s("./node_modules/lodash/filter.js"),E=r(S),I=s("./node_modules/lodash/assign.js"),w=r(I),C=s("./node_modules/debug/browser.js"),R=r(C),N=s("./client/lib/mixins/emitter/index.js"),T=r(N),M=s("./client/lib/feed-post-store/index.js"),L=r(M),D=s("./client/lib/feed-stream-store/constants.js"),F=s("./client/reader/controller-helper.js"),A=s("./client/lib/feed-stream-store/actions.js"),H=o(A),O=(0,R.default)("calypso:feed-store:post-list-store"),U=function(){function e(t){if((0,c.default)(this,e),!t)throw new Error("must supply a paged stream spec");if(!t.id)throw new Error("missing id");if(!t.fetcher)throw new Error("missing fetcher");if(!t.keyMaker)throw new Error("must supply keyMaker");this.id=t.id,(0,w.default)(this,{id:t.id,postKeys:[],pendingPostKeys:[],postById:new i.default,errors:[],fetcher:t.fetcher,page:1,perPage:t.perPage||10,query:t.query,selectedIndex:-1,orderBy:"date",_isLastPage:!1,_isFetchingNextPage:!1,keyMaker:t.keyMaker})}return(0,p.default)(e,[{key:"handlePayload",value:function(e){var t=e&&e.action;if(t&&t.id===this.id)switch(t.type){case D.action.RECEIVE_PAGE:this.receivePage(t.id,t.error,t.data);break;case D.action.FETCH_NEXT_PAGE:this.setIsFetchingNextPage(!0);break;case D.action.SELECT_ITEM:this.selectItem(t.selectedIndex);break;case D.action.SELECT_NEXT_ITEM:this.selectNextItem(t.selectedIndex);break;case D.action.SELECT_PREV_ITEM:this.selectPrevItem(t.selectedIndex);break;case D.action.SELECT_FIRST_ITEM:this.selectFirstItem();break;case D.action.DISMISS_FEED_STREAM_POST:this.dismissPost(t.postKey)}}},{key:"get",value:function(){return this.postKeys}},{key:"getID",value:function(){return this.id}},{key:"getAll",value:function(){return(0,_.default)(this.postKeys,function(e){return L.default.get(e)})}},{key:"getPage",value:function(){return this.page}},{key:"getPerPage",value:function(){return this.perPage}},{key:"getUpdateCount",value:function(){return 0}},{key:"getSelectedPostKey",value:function(){return this.selectedIndex>=0&&this.selectedIndex<this.postKeys.length?this.postKeys[this.selectedIndex]:null}},{key:"getSelectedIndex",value:function(){return this.selectedIndex}},{key:"isLastPage",value:function(){return this._isLastPage}},{key:"isFetchingNextPage",value:function(){return this._isFetchingNextPage}},{key:"isValidPostOrGap",value:function(e){var t=L.default.get(e);return t&&"error"!==t._state&&"pending"!==t._state&&"minimal"!==t._state}},{key:"selectNextItem",value:function(){var e=this;if(this.selectedIndex!==-1){var t=(0,P.default)(this.postKeys,this.isValidPostOrGap,this.selectedIndex+1);t!==-1&&(this.selectedIndex=t,this.emitChange());var s=10;if(t+s>this.postKeys.length||t===-1){var o=function(){return H.fetchNextPage(e.getID())};(0,m.default)(o)}}}},{key:"selectPrevItem",value:function(){if(!(this.selectedIndex<1)){var e=(0,x.default)(this.postKeys,this.isValidPostOrGap,this.selectedIndex-1);e!==-1&&(this.selectedIndex=e,this.emitChange())}}},{key:"selectFirstItem",value:function(){0!==this.selectedIndex&&(this.selectedIndex=0,this.emitChange())}},{key:"selectItem",value:function(e,t){var s=(0,P.default)(this.postKeys,e);this.isValidPostOrGap(this.postKeys[s])&&s!==this.selectedIndex&&(this.selectedIndex=s,(0,F.setLastStoreId)(t),this.emitChange())}},{key:"onNextPageFetch",value:function(e){e.offset=(this.page-1)*this.perPage,e.before=this.startDate||void 0,e.after=void 0,e.number=this.perPage}},{key:"getLastItemWithDate",value:function(){return null}},{key:"getFirstItemWithDate",value:function(){return null}},{key:"hasRecentError",value:function(e){var t=Date.now()-6e4;return this.errors.some(function(s){return s.timestamp&&s.timestamp>t&&(!e||e===s.error)})}},{key:"setIsFetchingNextPage",value:function(e){this._isFetchingNextPage=e,this.emitChange()}},{key:"filterNewPosts",value:function(e){var t=this.postById;return e=(0,E.default)(e,function(e){return!t.has(e.ID)}),(0,_.default)(e,this.keyMaker)}},{key:"getSitesCrossPostedTo",value:function(){return null}},{key:"receivePage",value:function(e,t,s){if(e===this.id){if(O("receiving page in %s",this.id),this._isFetchingNextPage=!1,t)return O("Error fetching posts from API:",t),t.timestamp=Date.now(),this.errors.push(t),void this.emitChange();var o=s&&s.posts;if(o){if(!o.length)return this._isLastPage=!0,void this.emitChange();var r=this.filterNewPosts(o);if(r.length){var n=this.postById;(0,y.default)(r,function(e){n.add(e.postId)}),this.postKeys=this.postKeys.concat(r),this.page++,this.emitChange()}}}}},{key:"dismissPost",value:function(e){var t=(0,P.default)(this.postKeys,e);if(t!==-1){var s=[].concat((0,a.default)(this.postKeys)),o=(0,b.default)(s),r=s[t];s[t]=o,s.pop(),this.postById.delete(r.postId),this.postKeys=s,this.emitChange()}}}]),e}();t.default=U,(0,T.default)(U.prototype),e.exports=t.default},"./client/lib/infinite-list/actions.js":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var r=s("./node_modules/lodash/throttle.js"),n=o(r),a=s("./node_modules/lodash/isEqual.js"),l=o(a),i=s("./client/dispatcher/index.js"),d=s("./client/lib/infinite-list/scroll-store.js"),c=s("./client/lib/infinite-list/positions-store.js"),u=null,p=null,f=1e3,m={leading:!1};e.exports={storePositions:(0,n.default)(function(e,t){u||setTimeout(function(){var e=c.get(u.url);(0,l.default)(u.positions,e)||i.handleViewAction({type:"INFINITE_LIST_POSITION_CHANGED",url:u.url,positions:u.positions}),u=null},0),u={url:e,positions:t}},f,m),storeScroll:(0,n.default)(function(e,t){p||setTimeout(function(){var e=d.get(p.url);p.scrollPosition!==e&&i.handleViewAction({type:"SCROLL_CHANGED",url:p.url,scrollPosition:p.scrollPosition}),p=null},0),p={url:e,scrollPosition:t}},f,m)}},"./client/lib/infinite-list/positions-store.js":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var s=u.get(e);l("comparing positions:",e,s,t),(0,a.default)(s,t)||(l("storing values:",e,t),c[e]=t,u.emit("change"))}var n=s("./node_modules/lodash/isEqual.js"),a=o(n),l=s("./node_modules/debug/browser.js")("calypso:infinite-list:positions-store"),i=s("./client/dispatcher/index.js"),d=s("./client/lib/mixins/emitter/index.js"),c={},u={get:function(e){return l("positions-store:get(): ",e,c),c[e]}};d(u),u.dispatchToken=i.register(function(e){var t=e.action;switch(t.type){case"INFINITE_LIST_POSITION_CHANGED":r(t.url,t.positions)}}),e.exports=u},"./client/lib/infinite-list/scroll-store.js":function(e,t,s){"use strict";function o(e,t){var s=a.get(e);s!==t&&(n[e]=t)}var r=s("./client/dispatcher/index.js"),n={},a={get:function(e){return n[e]}};a.dispatchToken=r.register(function(e){var t=e.action;switch(t.type){case"SCROLL_CHANGED":o(t.url,t.scrollPosition)}}),e.exports=a},"./client/lib/inflight/index.js":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t._clear=t.trackPromise=t.requestTracker=t.completeRequest=t.markRequestInflight=t.isRequestInflight=void 0;var r=s("./node_modules/babel-runtime/core-js/set.js"),n=o(r),a=new n.default;t.isRequestInflight=function(e){return a.has(e)},t.markRequestInflight=function(e){return a.add(e)},t.completeRequest=function(e){return a.delete(e)},t.requestTracker=function(e,t){return a.add(e),function(s,o){a.delete(e),t(s,o)}},t.trackPromise=function(e,t){return a.add(e),t.then(function(){a.delete(e)},function(){a.delete(e)}),t},t._clear=function(){return a.clear()}},"./client/lib/reader-post-flux-adapter/index.js":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=s("./node_modules/babel-runtime/helpers/extends.js"),n=o(r),a=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),l=o(a),i=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),d=o(i),c=s("./node_modules/babel-runtime/helpers/createClass.js"),u=o(c),p=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),f=o(p),m=s("./node_modules/babel-runtime/helpers/inherits.js"),h=o(m),_=s("./node_modules/lodash/map.js"),g=o(_),b=s("./node_modules/react/react.js"),v=o(b),y=s("./node_modules/prop-types/index.js"),j=o(y),x=s("./node_modules/react-redux/es/index.js"),k=s("./client/lib/feed-post-store/index.js"),P=o(k),S=s("./client/lib/feed-post-store/actions.js"),E=s("./client/state/reader/sites/selectors.js"),I=s("./client/state/reader/feeds/selectors.js"),w=function(e){var t=function(t){function s(){var e,t,o,r;(0,d.default)(this,s);for(var n=arguments.length,a=Array(n),i=0;i<n;i++)a[i]=arguments[i];return t=o=(0,f.default)(this,(e=s.__proto__||(0,l.default)(s)).call.apply(e,[this].concat(a))),o.getStateFromStores=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.props,t=e.postKey,s=(0,g.default)(t.postIds,function(e){var s={};t.feedId?s.feedId=t.feedId:s.blogId=t.blogId,s.postId=e;var o=P.default.get(s);return o&&"minimal"!==o._state||(0,S.fetchPost)(s),o});return{posts:s}},o.state=o.getStateFromStores(o.props),o.updateState=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.getStateFromStores();o.setState(e)},r=t,(0,f.default)(o,r)}return(0,h.default)(s,t),(0,u.default)(s,[{key:"componentWillMount",value:function(){P.default.on("change",this.updateState)}},{key:"componentWillReceiveProps",value:function(e){this.updateState(this.getStateFromStores(e))}},{key:"componentWillUnmount",value:function(){P.default.off("change",this.updateState)}},{key:"render",value:function(){var t=this.state,s=t.post,o=t.posts;return s||o?v.default.createElement(e,(0,n.default)({},this.props,{post:s,posts:o})):null}}]),s}(v.default.PureComponent);return t.propTypes={postKey:j.default.object,selectedPost:j.default.string,feed:j.default.object,site:j.default.object},(0,x.connect)(function(e,t){var s=t.postKey,o=s.feedId,r=s.blogId,n=void 0,a=void 0;return o?(n=(0,I.getFeed)(e,o),a=n&&n.blog_ID?(0,E.getSite)(e,n.blog_ID):void 0):(a=(0,E.getSite)(e,r),n=a&&a.feed_ID?(0,I.getFeed)(e,a.feed_ID):void 0),{feed:n,site:a}})(t)};t.default=w,e.exports=t.default},"./client/lib/track-scroll-page/index.js":function(e,t,s){"use strict";var o=s("./client/lib/analytics/index.js");e.exports=function(e,t,s,r){o.ga.recordEvent(s,"Loaded Next Page","page",r),o.pageView.record(e,t),o.mc.bumpStat("newdash_pageviews","scroll")}},"./client/my-sites/comments/comment-navigation/comment-navigation-tab.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.CommentNavigationTab=void 0;var r=s("./node_modules/react/react.js"),n=o(r),a=s("./node_modules/classnames/index.js"),l=o(a),i=t.CommentNavigationTab=function(e){var t=e.children,s=e.className,o=e.onClick;return n.default.createElement("div",{className:(0,l.default)("comment-navigation__tab",s),onClick:o},t)};t.default=i},"./client/reader/controller-helper.js":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){k=e}function n(){return k?(0,x.default)(k):null}function a(e,t){if(1===e.getPage()){if(t&&t.query&&t.query.at){var s=(0,f.default)(t.query.at);s.isValid()&&(e.startDate=s.format())}(0,y.fetchNextPage)(e.id)}return e}function l(e,t,s){g.default.pageView.record(e,t),g.default.mc.bumpStat("reader_views","full_post"===s?s:s+"_load")}function i(e,t,s,o,r){g.default.ga.recordEvent(s,"Loaded Next Page","page",r),(0,b.recordTrack)("calypso_reader_infinite_scroll_performed",{path:e,page:r,section:o}),g.default.pageView.record(e,t),g.default.mc.bumpStat({newdash_pageviews:"scroll",reader_views:o+"_scroll"})}function d(e){g.default.mc.bumpStat("reader_views",e+"_load_new"),g.default.ga.recordEvent("Reader","Clicked Load New Posts",e),(0,b.recordTrack)("calypso_reader_load_new_posts",{section:e})}function c(e,t){e.store.dispatch((0,v.setDocumentHeadTitle)(h.default.translate("%s  Reader",{args:t})))}function u(e){return!!e.lastRoute}Object.defineProperty(t,"__esModule",{value:!0}),t.setLastStoreId=r,t.getLastStore=n,t.ensureStoreLoading=a,t.trackPageLoad=l,t.trackScrollPage=i,t.trackUpdatesLoaded=d,t.setPageTitle=c,t.userHasHistory=u;var p=s("./node_modules/moment/moment.js"),f=o(p),m=s("./node_modules/i18n-calypso/index.js"),h=o(m),_=s("./client/lib/analytics/index.js"),g=o(_),b=s("./client/reader/stats.js"),v=s("./client/state/document-head/actions.js"),y=s("./client/lib/feed-stream-store/actions.js"),j=s("./client/lib/feed-stream-store/index.js"),x=o(j),k=void 0},"./client/reader/controller.js":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){return!!e.lastRoute}function n(e){(0,C.renderWithReduxStore)(d.default.createElement(k.default),document.getElementById("primary"),e.store)}Object.defineProperty(t,"__esModule",{value:!0}),t.readA8C=t.blogListing=t.feedListing=t.feedDiscovery=t.following=t.unmountSidebar=t.sidebar=t.preloadReaderBundle=t.incompleteUrlRedirects=t.updateLastRoute=t.legacyRedirects=t.prettyRedirects=t.initAbTests=void 0;var a=s("./node_modules/react-dom/index.js"),l=o(a),i=s("./node_modules/react/react.js"),d=o(i),c=s("./node_modules/page/index.js"),u=o(c),p=s("./node_modules/i18n-calypso/index.js"),f=o(p),m=s("./client/lib/abtest/index.js"),h=s("./client/lib/route/index.js"),_=o(h),g=s("./client/lib/feed-lookup/index.js"),b=o(g),v=s("./client/lib/feed-stream-store/index.js"),y=o(v),j=s("./client/reader/controller-helper.js"),x=s("./client/reader/feed-error/index.jsx"),k=o(x),P=s("./client/reader/following/main.jsx"),S=o(P),E=s("./client/reader/route/index.js"),I=s("./client/reader/stats.js"),w=s("./client/sections-preload.js"),C=s("./client/lib/react-helpers/index.js"),R=s("./client/components/async-load/index.jsx"),N=o(R),T="Reader",M=[],L=null,D=function(e){s.e("async-load-reader-sidebar").then(function(t){e(s("./client/reader/sidebar/index.jsx").__esModule?s("./client/reader/sidebar/index.jsx").default:s("./client/reader/sidebar/index.jsx"))}.bind(null,s)).catch(s.oe)},F=function(e){s.e("async-load-reader-feed-stream").then(function(t){e(s("./client/reader/feed-stream/index.jsx").__esModule?s("./client/reader/feed-stream/index.jsx").default:s("./client/reader/feed-stream/index.jsx"))}.bind(null,s)).catch(s.oe)},A=function(e){s.e("async-load-reader-site-stream").then(function(t){e(s("./client/reader/site-stream/index.jsx").__esModule?s("./client/reader/site-stream/index.jsx").default:s("./client/reader/site-stream/index.jsx"))}.bind(null,s)).catch(s.oe)},H=function(e){s.e("async-load-reader-team-main").then(function(t){e(s("./client/reader/team/main.jsx").__esModule?s("./client/reader/team/main.jsx").default:s("./client/reader/team/main.jsx"))}.bind(null,s)).catch(s.oe)},O={initAbTests:function(e,t){M.forEach(function(e){return(0,m.abtest)(e)}),t()},prettyRedirects:function(e,t){var s=void 0;return e.params.blog_id?s=(0,E.getPrettySiteUrl)(e.params.blog_id):e.params.feed_id&&(s=(0,E.getPrettyFeedUrl)(e.params.feed_id)),s?u.default.redirect(s):void t()},legacyRedirects:function(e,t){var s={feedStream:/^\/read\/blog\/feed\/([0-9]+)$/i,feedFullPost:/^\/read\/post\/feed\/([0-9]+)\/([0-9]+)$/i,blogStream:/^\/read\/blog\/id\/([0-9]+)$/i,blogFullPost:/^\/read\/post\/id\/([0-9]+)\/([0-9]+)$/i};e.path.match(s.feedStream)?u.default.redirect("/read/feeds/"+e.params.feed_id):e.path.match(s.feedFullPost)?u.default.redirect("/read/feeds/"+e.params.feed_id+"/posts/"+e.params.post_id):e.path.match(s.blogStream)?u.default.redirect("/read/blogs/"+e.params.blog_id):e.path.match(s.blogFullPost)&&u.default.redirect("/read/blogs/"+e.params.blog_id+"/posts/"+e.params.post_id),t()},updateLastRoute:function(e,t){L&&(e.lastRoute=L),L=e.path,t()},incompleteUrlRedirects:function(e,t){var s=void 0;return e.path.match(/^\/read\/feeds\/([0-9]+)\/posts$/i)?s="/read/feeds/"+e.params.feed_id:e.path.match(/^\/read\/blogs\/([0-9]+)\/posts$/i)&&(s="/read/blogs/"+e.params.blog_id),s?u.default.redirect(s):void t()},preloadReaderBundle:function(e,t){(0,w.preload)("reader"),t()},sidebar:function(e,t){(0,C.renderWithReduxStore)(d.default.createElement(N.default,{require:D,path:e.path}),document.getElementById("secondary"),e.store),t()},unmountSidebar:function(e,t){l.default.unmountComponentAtNode(document.getElementById("secondary")),t()},following:function(e){var t=_.default.sectionify(e.path),s=T+" > Following",o=(0,y.default)("following"),r="following",n=(0,y.default)("custom_recs_posts_with_images");n.perPage=4,(0,j.ensureStoreLoading)(o,e),(0,j.trackPageLoad)(t,s,r),(0,I.recordTrack)("calypso_reader_following_loaded"),(0,j.setPageTitle)(e,f.default.translate("Following")),(0,C.renderWithReduxStore)(d.default.createElement(S.default,{key:"following",listName:f.default.translate("Followed Sites"),postsStore:o,recommendationsStore:n,showPrimaryFollowButtonOnCards:!1,trackScrollPage:j.trackScrollPage.bind(null,t,s,T,r),onUpdatesShown:j.trackUpdatesLoaded.bind(null,r)}),"primary",e.store)},feedDiscovery:function(e,t){e.params.feed_id.match(/^\d+$/)?t():(0,b.default)(e.params.feed_id).then(function(e){u.default.redirect("/read/feeds/"+e)}).catch(function(){n(e)})},feedListing:function(e){var t="/read/feeds/:feed_id",s=T+" > Feed > "+e.params.feed_id,o=(0,y.default)("feed:"+e.params.feed_id),n="blog";(0,j.ensureStoreLoading)(o,e),(0,j.trackPageLoad)(t,s,n),(0,I.recordTrack)("calypso_reader_blog_preview",{feed_id:e.params.feed_id}),(0,C.renderWithReduxStore)(d.default.createElement(N.default,{require:F,key:"feed-"+e.params.feed_id,postsStore:o,feedId:+e.params.feed_id,trackScrollPage:j.trackScrollPage.bind(null,t,s,T,n),onUpdatesShown:j.trackUpdatesLoaded.bind(null,n),showPrimaryFollowButtonOnCards:!1,suppressSiteNameLink:!0,showBack:r(e)}),document.getElementById("primary"),e.store)},blogListing:function(e){var t="/read/blogs/:blog_id",s=T+" > Site > "+e.params.blog_id,o=(0,y.default)("site:"+e.params.blog_id),n="blog";(0,j.ensureStoreLoading)(o,e),(0,j.trackPageLoad)(t,s,n),(0,I.recordTrack)("calypso_reader_blog_preview",{blog_id:e.params.blog_id}),(0,C.renderWithReduxStore)(d.default.createElement(N.default,{require:A,key:"site-"+e.params.blog_id,postsStore:o,siteId:+e.params.blog_id,trackScrollPage:j.trackScrollPage.bind(null,t,s,T,n),onUpdatesShown:j.trackUpdatesLoaded.bind(null,n),showPrimaryFollowButtonOnCards:!1,suppressSiteNameLink:!0,showBack:r(e)}),document.getElementById("primary"),e.store)},readA8C:function(e){var t=_.default.sectionify(e.path),s=T+" > A8C",o=(0,y.default)("a8c"),r="a8c";(0,j.ensureStoreLoading)(o,e),(0,j.trackPageLoad)(t,s,r),(0,j.setPageTitle)(e,"Automattic"),(0,C.renderWithReduxStore)(d.default.createElement(N.default,{require:H,key:"read-a8c",className:"is-a8c",listName:"Automattic",postsStore:o,trackScrollPage:j.trackScrollPage.bind(null,t,s,T,r),showPrimaryFollowButtonOnCards:!1,onUpdatesShown:j.trackUpdatesLoaded.bind(null,r)}),document.getElementById("primary"),e.store)}},U=O.initAbTests,B=O.prettyRedirects,K=O.legacyRedirects,q=O.updateLastRoute,W=O.incompleteUrlRedirects,G=O.preloadReaderBundle,V=O.sidebar,Y=O.unmountSidebar,z=O.following,X=O.feedDiscovery,$=O.feedListing,Q=O.blogListing,J=O.readA8C;t.initAbTests=U,t.prettyRedirects=B,t.legacyRedirects=K,t.updateLastRoute=q,t.incompleteUrlRedirects=W,t.preloadReaderBundle=G,t.sidebar=V,t.unmountSidebar=Y,t.following=z,t.feedDiscovery=X,t.feedListing=$,t.blogListing=Q,t.readA8C=J},"./client/reader/conversations/controller.js":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=d.default.sectionify(e.path),s="conversations",o="Reader > Conversations";(0,m.trackPageLoad)(t,"Reader > Conversations",s),(0,c.recordTrack)("calypso_reader_conversations_viewed");var r=(0,_.default)("conversations");(0,m.ensureStoreLoading)(r,e);var n=m.trackScrollPage.bind(null,"/read/conversations",o,"Reader",s);(0,u.renderWithReduxStore)(l.default.createElement(f.default,{require:g,key:"conversations",title:"Conversations",store:r,trackScrollPage:n}),document.getElementById("primary"),e.store)}function n(e){var t=d.default.sectionify(e.path),s="conversations-a8c",o="Reader > Conversations > Automattic";(0,m.trackPageLoad)(t,"Reader > Conversations > Automattic",s),(0,c.recordTrack)("calypso_reader_conversations_a8c_viewed");var r=(0,_.default)("conversations-a8c");(0,m.ensureStoreLoading)(r,e);var n=m.trackScrollPage.bind(null,"/read/conversations/a8c",o,"Reader",s);(0,u.renderWithReduxStore)(l.default.createElement(f.default,{require:b,key:"conversations",title:"Conversations @ Automattic",store:r,trackScrollPage:n}),document.getElementById("primary"),e.store)}Object.defineProperty(t,"__esModule",{value:!0}),t.conversations=r,t.conversationsA8c=n;var a=s("./node_modules/react/react.js"),l=o(a),i=s("./client/lib/route/index.js"),d=o(i),c=s("./client/reader/stats.js"),u=s("./client/lib/react-helpers/index.js"),p=s("./client/components/async-load/index.jsx"),f=o(p),m=s("./client/reader/controller-helper.js"),h=s("./client/lib/feed-stream-store/index.js"),_=o(h),g=function(e){s.e("async-load-reader-conversations-stream").then(function(t){e(s("./client/reader/conversations/stream.js").__esModule?s("./client/reader/conversations/stream.js").default:s("./client/reader/conversations/stream.js"))}.bind(null,s)).catch(s.oe)},b=function(e){s.e("async-load-reader-conversations-stream").then(function(t){e(s("./client/reader/conversations/stream.js").__esModule?s("./client/reader/conversations/stream.js").default:s("./client/reader/conversations/stream.js"))}.bind(null,s)).catch(s.oe)}},"./client/reader/conversations/index.js":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){(0,n.default)("/read/conversations",l.preloadReaderBundle,l.updateLastRoute,l.initAbTests,l.sidebar,a.conversations),(0,n.default)("/read/conversations/a8c",l.preloadReaderBundle,l.updateLastRoute,l.initAbTests,l.sidebar,a.conversationsA8c)};var r=s("./node_modules/page/index.js"),n=o(r),a=s("./client/reader/conversations/controller.js"),l=s("./client/reader/controller.js");e.exports=t.default},"./client/reader/discover/controller.js":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.discover=void 0;var r=s("./node_modules/react/react.js"),n=o(r),a=s("./client/config/index.js"),l=o(a),i=s("./client/lib/route/index.js"),d=o(i),c=s("./client/lib/feed-stream-store/index.js"),u=o(c),p=s("./client/reader/stats.js"),f=s("./client/reader/controller-helper.js"),m=s("./client/lib/react-helpers/index.js"),h=s("./client/components/async-load/index.jsx"),_=o(h),g="Reader",b=function(e){s.e("async-load-reader-site-stream").then(function(t){e(s("./client/reader/site-stream/index.jsx").__esModule?s("./client/reader/site-stream/index.jsx").default:s("./client/reader/site-stream/index.jsx"))}.bind(null,s)).catch(s.oe)},v={discover:function(e){var t=(0,l.default)("discover_blog_id"),s=d.default.sectionify(e.path),o=g+" > Site > "+t,r=(0,u.default)("site:"+t),a=(0,u.default)("featured:"+t),i="discover";(0,f.ensureStoreLoading)(r,e),(0,f.ensureStoreLoading)(a,e),(0,f.trackPageLoad)(s,o,i),(0,p.recordTrack)("calypso_reader_discover_viewed"),(0,m.renderWithReduxStore)(n.default.createElement(_.default,{require:b,key:"site-"+t,postsStore:r,siteId:+t,title:"Discover",trackScrollPage:f.trackScrollPage.bind(null,s,o,g,i),onUpdatesShown:f.trackUpdatesLoaded.bind(null,i),suppressSiteNameLink:!0,showPrimaryFollowButtonOnCards:!1,isDiscoverStream:!0,showBack:!1,className:"is-discover-stream is-site-stream",featuredStore:a}),document.getElementById("primary"),e.store)}};t.default=v;var y=v.discover;t.discover=y},"./client/reader/discover/index.js":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){(0,n.default)("/discover",l.preloadReaderBundle,l.updateLastRoute,l.initAbTests,l.sidebar,a.discover)};var r=s("./node_modules/page/index.js"),n=o(r),a=s("./client/reader/discover/controller.js"),l=s("./client/reader/controller.js");e.exports=t.default},"./client/reader/feed-error/index.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),n=o(r),a=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),l=o(a),i=s("./node_modules/babel-runtime/helpers/createClass.js"),d=o(i),c=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),u=o(c),p=s("./node_modules/babel-runtime/helpers/inherits.js"),f=o(p),m=s("./node_modules/react/react.js"),h=o(m),_=s("./node_modules/i18n-calypso/index.js"),g=o(_),b=s("./client/components/reader-main/index.jsx"),v=o(b),y=s("./client/components/mobile-back-to-sidebar/index.jsx"),j=o(y),x=s("./client/components/empty-content/index.jsx"),k=o(x),P=s("./client/reader/stats.js"),S=function(e){function t(){var e,s,o,r;(0,l.default)(this,t);for(var a=arguments.length,i=Array(a),d=0;d<a;d++)i[d]=arguments[d];return s=o=(0,u.default)(this,(e=t.__proto__||(0,n.default)(t)).call.apply(e,[this].concat(i))),o.recordAction=function(){(0,P.recordAction)("clicked_search_on_404"),(0,P.recordGaEvent)("Clicked Search on 404"),(0,P.recordTrack)("calypso_reader_search_on_feed_error_clicked")},o.recordSecondaryAction=function(){(0,P.recordAction)("clicked_discover_on_404"),(0,P.recordGaEvent)("Clicked Discover on 404"),(0,P.recordTrack)("calypso_reader_discover_on_feed_error_clicked")},r=s,(0,u.default)(o,r)}return(0,f.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){var e=h.default.createElement("a",{className:"empty-content__action button is-primary",onClick:this.recordAction,href:"/read/search"},this.props.translate("Find Sites to Follow")),t=h.default.createElement("a",{className:"empty-content__action button",onClick:this.recordSecondaryAction,href:"/discover"},this.props.translate("Explore Discover"));return h.default.createElement(v.default,null,h.default.createElement(j.default,null,h.default.createElement("h1",null,this.props.sidebarTitle)),h.default.createElement(k.default,{action:e,secondaryAction:t,title:this.props.message,illustration:"/calypso/images/illustrations/illustration-404.svg",illustrationWidth:500}))}}]),t}(h.default.Component);S.defaultProps={message:g.default.translate("Sorry, we can't find that site.")},S.propTypes={sidebarTitle:h.default.PropTypes.string},t.default=(0,_.localize)(S),e.exports=t.default},"./client/reader/following/controller.js":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.followingManage=t.followingEdit=void 0;var r=s("./node_modules/react/react.js"),n=o(r),a=s("./node_modules/i18n-calypso/index.js"),l=o(a),i=s("./client/lib/route/index.js"),d=o(i),c=s("./client/lib/user-settings/index.js"),u=o(c),p=s("./client/reader/controller-helper.js"),f=s("./client/lib/react-helpers/index.js"),m=s("./client/components/async-load/index.jsx"),h=o(m),_="Reader",g=function(e){s.e("async-load-reader-following-manage").then(function(t){e(s("./client/reader/following-manage/index.jsx").__esModule?s("./client/reader/following-manage/index.jsx").default:s("./client/reader/following-manage/index.jsx"))}.bind(null,s)).catch(s.oe)},b={followingManage:function(e){var t=d.default.sectionify(e.path),s=_+" > Manage Followed Sites",o="following_manage",r=e.query,a=r.q,i=r.s,c=r.sort,m=r.showMoreResults;(0,p.setPageTitle)(e,l.default.translate("Manage Followed Sites")),(0,p.trackPageLoad)(t,s,o),(0,f.renderWithReduxStore)(n.default.createElement(h.default,{require:g,key:"following-manage",initialFollowUrl:e.query.follow,sitesQuery:a,subsQuery:i,showMoreResults:Boolean(m),subsSortOrder:c,context:e,userSettings:u.default}),document.getElementById("primary"),e.store)}};t.default=b;var v=b.followingEdit,y=b.followingManage;t.followingEdit=v,t.followingManage=y},"./client/reader/following/index.js":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){(0,n.default)("/following/*",l.initAbTests),(0,n.default)("/following/manage",l.updateLastRoute,l.sidebar,a.followingManage),n.default.redirect("/following/edit*","/following/manage")};var r=s("./node_modules/page/index.js"),n=o(r),a=s("./client/reader/following/controller.js"),l=s("./client/reader/controller.js");e.exports=t.default},"./client/reader/following/intro.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),n=o(r),a=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),l=o(a),i=s("./node_modules/babel-runtime/helpers/createClass.js"),d=o(i),c=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),u=o(c),p=s("./node_modules/babel-runtime/helpers/inherits.js"),f=o(p),m=s("./node_modules/react/react.js"),h=o(m),_=s("./node_modules/i18n-calypso/index.js"),g=s("./node_modules/gridicons/build/index.js"),b=o(g),v=s("./node_modules/react-redux/es/index.js"),y=s("./node_modules/redux/lib/index.js"),j=s("./client/components/data/query-preferences/index.jsx"),x=o(j),k=s("./client/state/preferences/actions.js"),P=s("./client/state/preferences/selectors.js"),S=s("./client/reader/stats.js"),E=s("./client/state/ui/guided-tours/contexts.js"),I=s("./client/lib/abtest/index.js"),w=(0,I.abtest)("readerIntroIllustration"),C=function(e){function t(){var e,s,o,r;(0,l.default)(this,t);for(var a=arguments.length,i=Array(a),d=0;d<a;d++)i[d]=arguments[d];return s=o=(0,u.default)(this,(e=t.__proto__||(0,n.default)(t)).call.apply(e,[this].concat(i))),o.recordRenderTrack=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.props;e.isNewReader===!0&&(0,S.recordTrack)("calypso_reader_following_intro_render")},r=s,(0,u.default)(o,r)}return(0,f.default)(t,e),(0,d.default)(t,[{key:"componentDidMount",value:function(){this.recordRenderTrack()}},{key:"componentWillReceiveProps",value:function(e){this.props.isNewReader!==e.isNewReader&&this.recordRenderTrack(e)}},{key:"render",value:function(){var e=this.props,t=e.isNewReader,s=e.translate,o=e.dismiss,r=e.isNewUser;if(!t||!r)return null;var n=h.default.createElement("a",{onClick:this.props.handleManageLinkClick,href:"/following/manage"}),a=null;return"blue"===w?a="following__intro-blue":"lightBlue"===w?a="following__intro-light-blue":"white"===w&&(a="following__intro-white"),
a?h.default.createElement("header",{className:a},h.default.createElement(x.default,null),h.default.createElement("div",{className:"following__intro-header"},h.default.createElement("div",{className:"following__intro-copy"},h.default.createElement("span",null,s("{{strong}}Welcome!{{/strong}} Reader is a custom magazine. {{link}}Follow your favorite sites{{/link}} and their latest posts will appear here. {{span}}Read, like, and comment in a distraction-free environment.{{/span}}",{components:{link:n,strong:h.default.createElement("strong",null),span:h.default.createElement("span",{className:"following__intro-copy-hidden"})}}))),h.default.createElement("div",{className:"following__intro-character"}),h.default.createElement("div",{className:"following__intro-close",onClick:o,title:s("Close"),role:"button","aria-label":s("Close")},h.default.createElement(b.default,{icon:"cross-circle",className:"following__intro-close-icon",title:s("Close")}),h.default.createElement("span",{className:"following__intro-close-icon-bg"})))):null}}]),t}(h.default.Component);t.default=(0,v.connect)(function(e){return{isNewReader:(0,P.getPreference)(e,"is_new_reader"),isNewUser:(0,E.isUserNewerThan)(2*E.WEEK_IN_MILLISECONDS)(e)}},function(e){return(0,y.bindActionCreators)({dismiss:function(){return(0,S.recordTrack)("calypso_reader_following_intro_dismiss"),(0,k.savePreference)("is_new_reader",!1)},handleManageLinkClick:function(){return(0,S.recordTrack)("calypso_reader_following_intro_link_clicked"),(0,k.savePreference)("is_new_reader",!1)}},e)})((0,_.localize)(C)),e.exports=t.default},"./client/reader/following/main.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){(0,x.recordTrack)("calypso_reader_search_from_following",{query:e}),""!==(0,a.default)(e)&&(0,h.default)("/read/search?q="+encodeURIComponent(e)+"&focus=1")}Object.defineProperty(t,"__esModule",{value:!0});var n=s("./node_modules/lodash/trim.js"),a=o(n),l=s("./node_modules/lodash/flatMap.js"),i=o(l),d=s("./node_modules/lodash/initial.js"),c=o(d),u=s("./node_modules/react/react.js"),p=o(u),f=s("./node_modules/i18n-calypso/index.js"),m=s("./node_modules/page/index.js"),h=o(m),_=s("./client/reader/stream/index.jsx"),g=o(_),b=s("./client/components/card/compact.jsx"),v=o(b),y=s("./client/components/search/index.jsx"),j=o(y),x=s("./client/reader/stats.js"),k=s("./client/reader/search-stream/suggestion.jsx"),P=o(k),S=s("./client/reader/search-stream/suggestion-provider.jsx"),E=o(S),I=s("./client/reader/following/intro.jsx"),w=o(I),C=s("./client/config/index.js"),R=o(C),N=function(e){var t=e.suggestions&&(0,c.default)((0,i.default)(e.suggestions,function(e){return[p.default.createElement(P.default,{suggestion:e.text,source:"following",railcar:e.railcar}),", "]}));return p.default.createElement(g.default,e,R.default.isEnabled("reader/following-intro")&&p.default.createElement(w.default,null),p.default.createElement(v.default,{className:"following__search"},p.default.createElement(j.default,{onSearch:r,autoFocus:!1,delaySearch:!0,delayTimeout:500,placeholder:e.translate("Search billions of WordPress.com posts")})),p.default.createElement("div",{className:"search-stream__blank-suggestions"},t&&e.translate("Suggestions: {{suggestions /}}.",{components:{suggestions:t}}),""))};t.default=(0,E.default)((0,f.localize)(N)),e.exports=t.default},"./client/reader/full-post/controller.js":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(){var e=p.default.translate("Post not found");(0,g.setPageTitle)(context,e),(0,y.renderWithReduxStore)(c.default.createElement(_.default,{sidebarTitle:e,message:p.default.translate("Post Not Found")}),document.getElementById("primary"),context.store)}function n(e){var t=e.params.blog,s=e.params.post,o="/read/blogs/:blog_id/posts/:post_id",n=j+" > Blog Post > "+t+" > "+s,a=void 0;e.query.ref_blog&&e.query.ref_post&&(a={blogId:e.query.ref_blog,postId:e.query.ref_post}),(0,g.trackPageLoad)(o,n,"full_post"),(0,y.renderWithReduxStore)(c.default.createElement(v.default,{require:k,blogId:t,postId:s,referral:a,onClose:function(){m.default.back(e.lastRoute||"/")},onPostNotFound:r}),document.getElementById("primary"),e.store),x()}function a(e){function t(){m.default.back(e.lastRoute||"/")}var s=e.params.feed,o=e.params.post,n="/read/feeds/:feed_id/posts/:feed_item_id",a=j+" > Feed Post > "+s+" > "+o;(0,g.trackPageLoad)(n,a,"full_post"),(0,y.renderWithReduxStore)(c.default.createElement(v.default,{require:P,feedId:s,postId:o,onClose:t,onPostNotFound:r}),document.getElementById("primary"),e.store),x()}Object.defineProperty(t,"__esModule",{value:!0});var l=s("./node_modules/lodash/defer.js"),i=o(l);t.blogPost=n,t.feedPost=a;var d=s("./node_modules/react/react.js"),c=o(d),u=s("./node_modules/i18n-calypso/index.js"),p=o(u),f=s("./node_modules/page/index.js"),m=o(f),h=s("./client/reader/feed-error/index.jsx"),_=o(h),g=s("./client/reader/controller-helper.js"),b=s("./client/components/async-load/index.jsx"),v=o(b),y=s("./client/lib/react-helpers/index.js"),j="Reader",x=function(){return(0,i.default)(function(){"undefined"==typeof window||window.location.hash||window.scrollTo(0,0)})},k=function(e){s.e("async-load-blocks-reader-full-post").then(function(t){e(s("./client/blocks/reader-full-post/index.jsx").__esModule?s("./client/blocks/reader-full-post/index.jsx").default:s("./client/blocks/reader-full-post/index.jsx"))}.bind(null,s)).catch(s.oe)},P=function(e){s.e("async-load-blocks-reader-full-post").then(function(t){e(s("./client/blocks/reader-full-post/index.jsx").__esModule?s("./client/blocks/reader-full-post/index.jsx").default:s("./client/blocks/reader-full-post/index.jsx"))}.bind(null,s)).catch(s.oe)}},"./client/reader/full-post/index.js":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){(0,n.default)("/read/feeds/:feed/posts/:post",l.updateLastRoute,l.unmountSidebar,a.feedPost),(0,n.default)("/read/blogs/:blog/posts/:post",l.updateLastRoute,l.unmountSidebar,a.blogPost)};var r=s("./node_modules/page/index.js"),n=o(r),a=s("./client/reader/full-post/controller.js"),l=s("./client/reader/controller.js");e.exports=t.default},"./client/reader/index.js":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){e.params.team="a8c",t()}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){d.default.isEnabled("reader")&&((0,a.default)("/",l.preloadReaderBundle,l.initAbTests,l.updateLastRoute,l.sidebar,l.following),(0,a.default)("/read/following","/"),(0,a.default)("/read","/"),(0,a.default)("/read/blogs","/"),(0,a.default)("/read/feeds","/"),(0,a.default)("/read/blog","/"),(0,a.default)("/read/post","/"),(0,a.default)("/read/feed","/"),(0,a.default)("/read/*",l.preloadReaderBundle,l.initAbTests),(0,a.default)("/read/blog/feed/:feed_id",l.legacyRedirects),(0,a.default)("/read/feeds/:feed_id/posts",l.incompleteUrlRedirects),(0,a.default)("/read/feeds/:feed_id",l.updateLastRoute,l.prettyRedirects,l.sidebar,l.feedDiscovery,l.feedListing),(0,a.default)("/read/blog/id/:blog_id",l.legacyRedirects),(0,a.default)("/read/blogs/:blog_id/posts",l.incompleteUrlRedirects),(0,a.default)("/read/blogs/:blog_id",l.updateLastRoute,l.prettyRedirects,l.sidebar,l.blogListing),(0,a.default)("/read/post/feed/:feed_id/:post_id",l.legacyRedirects),(0,a.default)("/read/post/id/:blog_id/:post_id",l.legacyRedirects)),(0,a.default)("/read/a8c",l.updateLastRoute,l.sidebar,r,l.readA8C)};var n=s("./node_modules/page/index.js"),a=o(n),l=s("./client/reader/controller.js"),i=s("./client/config/index.js"),d=o(i);e.exports=t.default},"./client/reader/liked-stream/controller.js":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.likes=void 0;var r=s("./node_modules/react/react.js"),n=o(r),a=s("./client/lib/route/index.js"),l=o(a),i=s("./client/lib/feed-stream-store/index.js"),d=o(i),c=s("./client/reader/controller-helper.js"),u=s("./client/reader/liked-stream/main.jsx"),p=o(u),f=s("./client/lib/react-helpers/index.js"),m="Reader",h={likes:function(e){var t=l.default.sectionify(e.path),s=m+" > My Likes",o=(0,d.default)("likes"),r="postlike";(0,c.ensureStoreLoading)(o,e),(0,c.trackPageLoad)(t,s,r),(0,f.renderWithReduxStore)(n.default.createElement(p.default,{key:"liked",postsStore:o,trackScrollPage:c.trackScrollPage.bind(null,t,s,m,r),onUpdatesShown:c.trackUpdatesLoaded.bind(null,r)}),document.getElementById("primary"),e.store)}};t.default=h;var _=h.likes;t.likes=_},"./client/reader/liked-stream/empty.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),n=o(r),a=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),l=o(a),i=s("./node_modules/babel-runtime/helpers/createClass.js"),d=o(i),c=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),u=o(c),p=s("./node_modules/babel-runtime/helpers/inherits.js"),f=o(p),m=s("./node_modules/react/react.js"),h=o(m),_=s("./node_modules/i18n-calypso/index.js"),g=s("./client/components/empty-content/index.jsx"),b=o(g),v=s("./client/reader/stats.js"),y=s("./client/reader/discover/helper.js"),j=function(e){function t(){var e,s,o,r;(0,l.default)(this,t);for(var a=arguments.length,i=Array(a),d=0;d<a;d++)i[d]=arguments[d];return s=o=(0,u.default)(this,(e=t.__proto__||(0,n.default)(t)).call.apply(e,[this].concat(i))),o.recordAction=function(){(0,v.recordAction)("clicked_following_on_empty_likes"),(0,v.recordGaEvent)("Clicked Following on Empty Like Stream"),(0,v.recordTrack)("calypso_reader_following_on_empty_like_stream_clicked")},o.recordSecondaryAction=function(){(0,v.recordAction)("clicked_discover_on_empty_likes"),(0,v.recordGaEvent)("Clicked Discover on Empty Like Stream"),(0,v.recordTrack)("calypso_reader_discover_on_empty_like_stream_clicked")},r=s,(0,u.default)(o,r)}return(0,f.default)(t,e),(0,d.default)(t,[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"render",value:function(){var e=h.default.createElement("a",{className:"empty-content__action button is-primary",onClick:this.recordAction,href:"/"},this.props.translate("Back to Following")),t=(0,y.isDiscoverEnabled)()?h.default.createElement("a",{className:"empty-content__action button",onClick:this.recordSecondaryAction,href:"/discover"},this.props.translate("Explore Discover")):null;return h.default.createElement(b.default,{title:this.props.translate("No Likes Yet"),line:this.props.translate("Posts that you like will appear here."),action:e,secondaryAction:t,illustration:"/calypso/images/illustrations/illustration-empty-results.svg",illustrationWidth:400})}}]),t}(h.default.Component);t.default=(0,_.localize)(j),e.exports=t.default},"./client/reader/liked-stream/index.js":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){(0,n.default)("/activities/likes",l.preloadReaderBundle,l.initAbTests,l.updateLastRoute,l.sidebar,a.likes)};var r=s("./node_modules/page/index.js"),n=o(r),a=s("./client/reader/liked-stream/controller.js"),l=s("./client/reader/controller.js");e.exports=t.default},"./client/reader/liked-stream/main.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=s("./node_modules/babel-runtime/helpers/extends.js"),n=o(r),a=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),l=o(a),i=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),d=o(i),c=s("./node_modules/babel-runtime/helpers/createClass.js"),u=o(c),p=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),f=o(p),m=s("./node_modules/babel-runtime/helpers/inherits.js"),h=o(m),_=s("./node_modules/react/react.js"),g=o(_),b=s("./node_modules/i18n-calypso/index.js"),v=s("./client/reader/stream/index.jsx"),y=o(v),j=s("./client/reader/liked-stream/empty.jsx"),x=o(j),k=s("./client/components/data/document-head/index.jsx"),P=o(k),S=function(e){function t(){return(0,d.default)(this,t),(0,f.default)(this,(t.__proto__||(0,l.default)(t)).apply(this,arguments))}return(0,h.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this.props.translate("My Likes"),t=g.default.createElement(x.default,null);return g.default.createElement(y.default,(0,n.default)({},this.props,{listName:e,emptyContent:t,showFollowInHeader:!0}),g.default.createElement(P.default,{title:this.props.translate("%s  Reader",{args:e})}))}}]),t}(g.default.Component);t.default=(0,b.localize)(S),e.exports=t.default},"./client/reader/list-gap/index.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),n=o(r),a=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),l=o(a),i=s("./node_modules/babel-runtime/helpers/createClass.js"),d=o(i),c=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),u=o(c),p=s("./node_modules/babel-runtime/helpers/inherits.js"),f=o(p),m=s("./node_modules/react/react.js"),h=o(m),_=s("./node_modules/classnames/index.js"),g=o(_),b=s("./node_modules/i18n-calypso/index.js"),v=s("./client/reader/utils.js"),y=function(e){function t(){var e,s,o,r;(0,l.default)(this,t);for(var a=arguments.length,i=Array(a),d=0;d<a;d++)i[d]=arguments[d];return s=o=(0,u.default)(this,(e=t.__proto__||(0,n.default)(t)).call.apply(e,[this].concat(i))),o.state={isFilling:!1},o.handleClick=function(){o.setState({isFilling:!0}),(0,v.handleGapClicked)(o.props.gap,o.props.store.id)},r=s,(0,u.default)(o,r)}return(0,f.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){var e=(0,g.default)({"reader-list-gap":!0,"is-filling":this.state.isFilling,"is-selected":this.props.selected}),t=this.props.translate;return h.default.createElement("div",{className:e,onClick:this.handleClick},h.default.createElement("button",{type:"button",className:"button reader-list-gap__button"},t("Load More Posts")))}}]),t}(h.default.Component);y.propTypes={gap:h.default.PropTypes.object.isRequired,store:h.default.PropTypes.object.isRequired,selected:h.default.PropTypes.bool},t.default=(0,b.localize)(y),e.exports=t.default},"./client/reader/list/controller.js":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.listListing=void 0;var r=s("./node_modules/react/react.js"),n=o(r),a=s("./client/lib/feed-stream-store/index.js"),l=o(a),i=s("./client/reader/stats.js"),d=s("./client/reader/controller-helper.js"),c=s("./client/lib/react-helpers/index.js"),u=s("./client/components/async-load/index.jsx"),p=o(u),f="Reader",m=function(e){s.e("async-load-reader-list-stream").then(function(t){e(s("./client/reader/list-stream/index.jsx").__esModule?s("./client/reader/list-stream/index.jsx").default:s("./client/reader/list-stream/index.jsx"))}.bind(null,s)).catch(s.oe)},h={listListing:function(e){var t="/read/list/:owner/:slug",s=f+" > List > "+e.params.user+" - "+e.params.list,o=(0,l.default)("list:"+e.params.user+"-"+e.params.list),r="list";(0,d.ensureStoreLoading)(o,e),(0,d.trackPageLoad)(t,s,r),(0,i.recordTrack)("calypso_reader_list_loaded",{list_owner:e.params.user,list_slug:e.params.list}),(0,c.renderWithReduxStore)(n.default.createElement(p.default,{require:m,key:"tag-"+e.params.user+"-"+e.params.list,postsStore:o,owner:encodeURIComponent(e.params.user),slug:encodeURIComponent(e.params.list),showPrimaryFollowButtonOnCards:!1,trackScrollPage:d.trackScrollPage.bind(null,t,s,f,r),onUpdatesShown:d.trackUpdatesLoaded.bind(null,r)}),document.getElementById("primary"),e.store)}};t.default=h;var _=h.listListing;t.listListing=_},"./client/reader/list/index.js":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){(0,n.default)("/read/list/:user/:list",l.updateLastRoute,l.sidebar,a.listListing)};var r=s("./node_modules/page/index.js"),n=o(r),a=s("./client/reader/list/controller.js"),l=s("./client/reader/controller.js");e.exports=t.default},"./client/reader/recommendations/controller.js":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.recommendedPosts=void 0;var r=s("./node_modules/react/react.js"),n=o(r),a=s("./client/lib/track-scroll-page/index.js"),l=o(a),i=s("./client/reader/controller-helper.js"),d=s("./client/reader/recommendations/posts/index.jsx"),c=o(d),u=s("./client/lib/route/index.js"),p=o(u),f=s("./client/lib/feed-stream-store/index.js"),m=o(f),h=s("./client/lib/react-helpers/index.js"),_="Reader",g={recommendedPosts:function(e){var t=p.default.sectionify(e.path),s="",o=null,r="";switch(t){case"/recommendations/cold":s=_+" > Coldstart Posts",o=(0,m.default)("cold_posts"),r="coldstart_posts";break;case"/recommendations/cold1w":s=_+" > Coldstart+1w Posts",o=(0,m.default)("cold_posts_1w"),r="coldstart_posts_1w";break;case"/recommendations/cold2w":s=_+" > Coldstart+2w Posts",o=(0,m.default)("cold_posts_2w"),r="coldstart_posts_2w";break;case"/recommendations/cold4w":s=_+" > Coldstart+4w Posts",o=(0,m.default)("cold_posts_4w"),r="coldstart_posts_4w";break;case"/recommendations/coldtopics":s=_+" > Coldstart Diverse Posts",o=(0,m.default)("cold_posts_topics"),r="coldstart_posts_topics";break;default:s=_+" > Recommended Posts",o=(0,m.default)("custom_recs_posts_with_images"),r="custom_recs_posts_with_images"}(0,i.ensureStoreLoading)(o,e),(0,i.trackPageLoad)(t,s,r),(0,h.renderWithReduxStore)(n.default.createElement(c.default,{key:"recommendations_posts",postsStore:o,trackScrollPage:l.default.bind(null,t,s,_,r),onUpdatesShown:i.trackUpdatesLoaded.bind(null,r),showBack:(0,i.userHasHistory)(e)}),document.getElementById("primary"),e.store)}};t.default=g;var b=g.recommendedPosts;t.recommendedPosts=b},"./client/reader/recommendations/index.js":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=s("./node_modules/lodash/forEach.js"),n=o(r);t.default=function(){(0,l.default)("/recommendations/start","/"),(0,l.default)("/recommendations","/read/search"),u.default.isEnabled("reader/recommendations/posts")&&(0,n.default)(["/recommendations/posts","/recommendations/cold","/recommendations/cold1w","/recommendations/cold2w","/recommendations/cold4w","/recommendations/coldtopics"],function(e){l.default.apply(l.default,[e,d.preloadReaderBundle,d.updateLastRoute,d.sidebar,i.recommendedPosts])})};var a=s("./node_modules/page/index.js"),l=o(a),i=s("./client/reader/recommendations/controller.js"),d=s("./client/reader/controller.js"),c=s("./client/config/index.js"),u=o(c);e.exports=t.default},"./client/reader/recommendations/posts/empty.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),n=o(r),a=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),l=o(a),i=s("./node_modules/babel-runtime/helpers/createClass.js"),d=o(i),c=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),u=o(c),p=s("./node_modules/babel-runtime/helpers/inherits.js"),f=o(p),m=s("./node_modules/react/react.js"),h=o(m),_=s("./node_modules/i18n-calypso/index.js"),g=s("./client/components/empty-content/index.jsx"),b=o(g),v=s("./client/reader/stats.js"),y=s("./client/reader/discover/helper.js"),j=function(e){function t(){var e,s,o,r;(0,l.default)(this,t);for(var a=arguments.length,i=Array(a),d=0;d<a;d++)i[d]=arguments[d];return s=o=(0,u.default)(this,(e=t.__proto__||(0,n.default)(t)).call.apply(e,[this].concat(i))),o.recordAction=function(){(0,v.recordAction)("clicked_following_on_empty_recommended_posts"),(0,v.recordGaEvent)("Clicked Following on Empty Recommended Posts Stream"),(0,v.recordTrack)("calypso_reader_following_on_empty_Posts_stream_clicked")},o.recordSecondaryAction=function(){(0,v.recordAction)("clicked_discover_on_empty_recommended_posts"),(0,v.recordGaEvent)("Clicked Discover on Empty Recommended Posts Stream"),(0,v.recordTrack)("calypso_reader_discover_on_empty_Posts_stream_clicked")},r=s,(0,u.default)(o,r)}return(0,f.default)(t,e),(0,d.default)(t,[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"render",value:function(){var e=h.default.createElement("a",{className:"empty-content__action button is-primary",onClick:this.recordAction,href:"/"},this.props.translate("Back to Following")),t=(0,y.isDiscoverEnabled)()?h.default.createElement("a",{className:"empty-content__action button",onClick:this.recordSecondaryAction,href:"/discover"},this.props.translate("Explore Discover")):null;return h.default.createElement(b.default,{title:this.props.translate("No Post Recommendations yet"),line:this.props.translate("Posts we recommend based on your WordPress.com activity will appear here."),action:e,secondaryAction:t,illustration:"/calypso/images/illustrations/illustration-empty-results.svg",illustrationWidth:500})}}]),t}(h.default.Component);t.default=(0,_.localize)(j),e.exports=t.default},"./client/reader/recommendations/posts/index.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=s("./node_modules/babel-runtime/helpers/extends.js"),n=o(r),a=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),l=o(a),i=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),d=o(i),c=s("./node_modules/babel-runtime/helpers/createClass.js"),u=o(c),p=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),f=o(p),m=s("./node_modules/babel-runtime/helpers/inherits.js"),h=o(m),_=s("./node_modules/react/react.js"),g=o(_),b=s("./node_modules/i18n-calypso/index.js"),v=s("./client/reader/stream/index.jsx"),y=o(v),j=s("./client/reader/recommendations/posts/empty.jsx"),x=o(j),k=s("./client/components/data/document-head/index.jsx"),P=o(k),S=function(e){function t(){return(0,d.default)(this,t),(0,f.default)(this,(t.__proto__||(0,l.default)(t)).apply(this,arguments))}return(0,h.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this.props.translate("Recommended Posts"),t=g.default.createElement(x.default,null);return g.default.createElement(y.default,(0,n.default)({},this.props,{listName:e,emptyContent:t,showFollowInHeader:!0}),g.default.createElement(P.default,{title:this.props.translate("%s  Reader",{args:e})}))}}]),t}(g.default.Component);t.default=(0,b.localize)(S),e.exports=t.default},"./client/reader/search-stream/search-stream-header.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.SEARCH_TYPES=void 0;var r=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),n=o(r),a=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),l=o(a),i=s("./node_modules/babel-runtime/helpers/createClass.js"),d=o(i),c=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),u=o(c),p=s("./node_modules/babel-runtime/helpers/inherits.js"),f=o(p),m=s("./node_modules/lodash/values.js"),h=o(m),_=s("./node_modules/lodash/noop.js"),g=o(_),b=s("./node_modules/react/react.js"),v=o(b),y=s("./node_modules/i18n-calypso/index.js"),j=s("./client/components/section-nav/tabs.jsx"),x=o(j),k=s("./client/components/section-nav/index.jsx"),P=o(k),S=s("./client/components/section-nav/item.jsx"),E=o(S),I=t.SEARCH_TYPES={POSTS:"posts",SITES:"sites"},w=function(e){function t(){var e,s,o,r;(0,l.default)(this,t);for(var a=arguments.length,i=Array(a),d=0;d<a;d++)i[d]=arguments[d];return s=o=(0,u.default)(this,(e=t.__proto__||(0,n.default)(t)).call.apply(e,[this].concat(i))),o.handlePostsSelected=function(){return o.props.onSelection(I.POSTS)},o.handleSitesSelected=function(){return o.props.onSelection(I.SITES)},r=s,(0,u.default)(o,r)}return(0,f.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){var e=this.props,t=e.translate,s=e.wideDisplay,o=e.selected;return s?v.default.createElement("ul",{className:"search-stream__headers"},v.default.createElement("li",{className:"search-stream__post-header"},t("Posts")),v.default.createElement("li",{className:"search-stream__site-header"},t("Sites"))):v.default.createElement("div",{className:"search-stream__header"},v.default.createElement(P.default,null,v.default.createElement(x.default,null,v.default.createElement(E.default,{key:"posts-nav",selected:o===I.POSTS,onClick:this.handlePostsSelected},t("Posts")),v.default.createElement(E.default,{key:"sites-nav",selected:o===I.SITES,onClick:this.handleSitesSelected},t("Sites")))))}}]),t}(b.Component);w.propTypes={translate:b.PropTypes.func,wideDisplay:b.PropTypes.bool,selected:b.PropTypes.oneOf((0,h.default)(I)),onSelection:b.PropTypes.func},w.defaultProps={onSelection:g.default,selected:I.posts},t.default=(0,y.localize)(w)},"./client/reader/search-stream/suggestion-provider.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){return t?t.length<=e?[]:(0,j.default)((0,v.default)(t,e),function(e,t){var s=(e.displayName||e.slug).replace(/-/g," "),o="read:search-suggestions:tags/1";return a(s,o,t)}):null}function n(e){var t=E.default.getLocaleSlug().split("-")[0];return I.suggestions[t]?(0,j.default)((0,v.default)(I.suggestions[t],e),function(e,t){var s="read:search-suggestions:picks/1";return a(e,s,t)}):null}function a(e,t,s){return{text:e,railcar:{railcar:N.default.tracks.createRandomId()+"-"+s,ui_algo:t,ui_position:s,rec_result:e}}}function l(e,t){var s=r(e,t);if(null===s)return null;var o=s.length?s:n(e);return o}Object.defineProperty(t,"__esModule",{value:!0});var i=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),d=o(i),c=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),u=o(c),p=s("./node_modules/babel-runtime/helpers/createClass.js"),f=o(p),m=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),h=o(m),_=s("./node_modules/babel-runtime/helpers/inherits.js"),g=o(_),b=s("./node_modules/lodash/sampleSize.js"),v=o(b),y=s("./node_modules/lodash/map.js"),j=o(y),x=s("./node_modules/react-redux/es/index.js"),k=s("./node_modules/react/react.js"),P=o(k),S=s("./client/lib/i18n-utils/browser.js"),E=o(S),I=s("./client/reader/search-stream/suggestions.js"),w=s("./client/state/selectors/get-reader-followed-tags.js"),C=o(w),R=s("./client/lib/analytics/index.js"),N=o(R),T=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;return function(s){function o(){var s,r,n,a;(0,u.default)(this,o);for(var i=arguments.length,c=Array(i),p=0;p<i;p++)c[p]=arguments[p];return r=n=(0,h.default)(this,(s=o.__proto__||(0,d.default)(o)).call.apply(s,[this].concat(c))),n.memoizedSuggestions=null,n.getFirstSuggestions=function(e){return n.memoizedSuggestions?n.memoizedSuggestions:n.memoizedSuggestions=l(t,(0,C.default)(e))},n.EnhancedComponent=(0,x.connect)(function(e){return{suggestions:n.getFirstSuggestions(e)}})(e),a=r,(0,h.default)(n,a)}return(0,g.default)(o,s),(0,f.default)(o,[{key:"componentWillUnmount",value:function(){this.memoizedSuggestions=null}},{key:"render",value:function(){var e=this.EnhancedComponent;return P.default.createElement(e,this.props)}}]),o}(k.Component)};t.default=T,e.exports=t.default},"./client/reader/search-stream/suggestion.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Suggestion=void 0;var r=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),n=o(r),a=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),l=o(a),i=s("./node_modules/babel-runtime/helpers/createClass.js"),d=o(i),c=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),u=o(c),p=s("./node_modules/babel-runtime/helpers/inherits.js"),f=o(p),m=s("./node_modules/react/react.js"),h=o(m),_=s("./node_modules/qs/lib/index.js"),g=s("./client/reader/stats.js"),b=s("./client/lib/analytics/index.js"),v=o(b),y=t.Suggestion=function(e){function t(){var e,s,o,r;(0,l.default)(this,t);for(var a=arguments.length,i=Array(a),d=0;d<a;d++)i[d]=arguments[d];return s=o=(0,u.default)(this,(e=t.__proto__||(0,n.default)(t)).call.apply(e,[this].concat(i))),o.handleSuggestionClick=function(){var e=o.props,t=e.suggestion,s=e.source,r=e.railcar;(0,g.recordTrack)("calypso_reader_search_suggestion_click",{suggestion:t,source:s}),(0,g.recordTracksRailcarInteract)("search_suggestion_click",r)},r=s,(0,u.default)(o,r)}return(0,f.default)(t,e),(0,d.default)(t,[{key:"componentWillMount",value:function(){var e=this.props.railcar;v.default.tracks.recordEvent("calypso_traintracks_render",e)}},{key:"render",value:function(){var e=this.props,t=e.suggestion,s=e.sort,o={isSuggestion:1,q:t,sort:s},r="/read/search?"+(0,_.stringify)(o);return h.default.createElement("a",{onClick:this.handleSuggestionClick,href:r},t)}}]),t}(m.Component);y.propTypes={suggestion:m.PropTypes.string.isRequired,source:m.PropTypes.string,sort:m.PropTypes.string,railcar:m.PropTypes.object},t.default=y},"./client/reader/search-stream/suggestions.js":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.suggestions={en:["Anime","Art","Astrology","Batman","Beach","Beautiful","Beauty","Bloom","Books","Chickens","Cocktails","Colorado","Community Pool","Craft Beer","Cute","Delicious","DIY","Dogs","Elasticsearch","Fabulous","Farm","Fashion","Fitness","Flowers","Food","Funny","Garden","Groovy","Happy Place","Health","Hiking","Homeschool","Homesteading","Iceland","Inspiration","Juno","Life","Love","Makeup","Mathematics","Michigan","Monkeys","Motivation","Mountain Biking","Overwatch","Parenting","Philosophy","Photography","Poetry","Politics","Pride","Psychology","Recipe","Red Sox","Robots","Scenic","Sharks","Sous vide","Sunday Brunch","Technology","Tibet","Toddlers","Travel Backpacks","Travel","Vegan","Woodworking","WordPress","Writing","Yoga","Zombies"],es:["amor","arte","cine","fotografia","libros","literatura","moda","musica","poesia","viajes"],fr:["amour","art","beaut","beauty","fashion","lifestyle","livres","maquillage","mode","photo","photographie","recette","vegan","voyage"],de:["beauty","bcher","diy","essen","fashion","food","foto","kinder","mode","politik","reisen","vegan"]}},"./client/reader/search/controller.js":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var s="/read/search";e&&(s+="?"+c.default.stringify({q:e,sort:t})),i.default.replace(s)}Object.defineProperty(t,"__esModule",{value:!0}),t.search=void 0;var n=s("./node_modules/react/react.js"),a=o(n),l=s("./node_modules/page/index.js"),i=o(l),d=s("./node_modules/qs/lib/index.js"),c=o(d),u=s("./client/lib/feed-stream-store/index.js"),p=o(u),f=s("./client/reader/stats.js"),m=s("./client/reader/controller-helper.js"),h=s("./client/lib/react-helpers/index.js"),_=s("./client/components/async-load/index.jsx"),g=o(_),b=s("./client/reader/search-stream/search-stream-header.jsx"),v="Reader",y=function(e){s.e("async-load-reader-search-stream").then(function(t){e(s("./client/reader/search-stream/index.jsx").__esModule?s("./client/reader/search-stream/index.jsx").default:s("./client/reader/search-stream/index.jsx"))}.bind(null,s)).catch(s.oe)},j={search:function(e){function t(e){r(e,"relevance"!==c?c:void 0)}function s(e){r(u,"relevance"!==e?e:void 0)}var o="/read/search",n=v+" > Search",l="search",i=e.query,d=i.sort,c=void 0===d?"relevance":d,u=i.q,_=i.show,j=void 0===_?b.SEARCH_TYPES.POSTS:_,x=void 0;u?(x=(0,p.default)("search:"+c+":"+u),x.isQuerySuggestion="1"===e.query.isSuggestion,(0,m.ensureStoreLoading)(x,e)):(x=(0,p.default)("custom_recs_posts_with_images"),
(0,m.ensureStoreLoading)(x,e)),(0,m.trackPageLoad)(o,n,l),u?(0,f.recordTrack)("calypso_reader_search_performed",{query:u,sort:c}):(0,f.recordTrack)("calypso_reader_search_loaded");var k=!u||"1"===e.query.focus;(0,h.renderWithReduxStore)(a.default.createElement(g.default,{require:y,key:"search",postsStore:x,query:u,trackScrollPage:m.trackScrollPage.bind(null,o,n,v,l),onUpdatesShown:m.trackUpdatesLoaded.bind(null,l),showBack:!1,showPrimaryFollowButtonOnCards:!0,autoFocusInput:k,onQueryChange:t,onSortChange:s,searchType:j}),document.getElementById("primary"),e.store)}};t.default=j;var x=j.search;t.search=x},"./client/reader/search/index.js":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){l.default.isEnabled("reader/search")?(0,n.default)("/read/search",d.preloadReaderBundle,d.updateLastRoute,d.sidebar,i.search):n.default.redirect("/read/search","/")};var r=s("./node_modules/page/index.js"),n=o(r),a=s("./client/config/index.js"),l=o(a),i=s("./client/reader/search/controller.js"),d=s("./client/reader/controller.js");e.exports=t.default},"./client/reader/stream/empty-search-recommended-post.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){function t(){(0,i.recordTrackForPost)("calypso_reader_recommended_post_clicked",o,{recommendation_source:"empty-search"}),(0,i.recordAction)("search_page_rec_post_click")}function s(){(0,i.recordTrackForPost)("calypso_reader_recommended_site_clicked",o,{recommendation_source:"empty-search"}),(0,i.recordAction)("search_page_rec_site_click")}var o=e.post,r={title:o.site_name};return a.default.createElement("div",{className:"search-stream__recommendation-list-item",key:o.global_ID},a.default.createElement(l.RelatedPostCard,{post:o,site:r,onSiteClick:s,onPostClick:t,followSource:d.EMPTY_SEARCH_RECOMMENDATIONS}))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var n=s("./node_modules/react/react.js"),a=o(n),l=s("./client/blocks/reader-related-card-v2/index.jsx"),i=s("./client/reader/stats.js"),d=s("./client/reader/follow-button/follow-sources.jsx");e.exports=t.default},"./client/reader/stream/empty.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),n=o(r),a=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),l=o(a),i=s("./node_modules/babel-runtime/helpers/createClass.js"),d=o(i),c=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),u=o(c),p=s("./node_modules/babel-runtime/helpers/inherits.js"),f=o(p),m=s("./node_modules/react/react.js"),h=o(m),_=s("./node_modules/i18n-calypso/index.js"),g=s("./client/components/empty-content/index.jsx"),b=o(g),v=s("./client/reader/stats.js"),y=s("./client/reader/discover/helper.js"),j=function(e){function t(){var e,s,o,r;(0,l.default)(this,t);for(var a=arguments.length,i=Array(a),d=0;d<a;d++)i[d]=arguments[d];return s=o=(0,u.default)(this,(e=t.__proto__||(0,n.default)(t)).call.apply(e,[this].concat(i))),o.recordAction=function(){(0,v.recordAction)("clicked_search_on_empty"),(0,v.recordGaEvent)("Clicked Search on EmptyContent"),(0,v.recordTrack)("calypso_reader_search_on_empty_stream_clicked")},r=s,(0,u.default)(o,r)}return(0,f.default)(t,e),(0,d.default)(t,[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"render",value:function(){var e=(0,y.isDiscoverEnabled)()?h.default.createElement("a",{className:"empty-content__action button is-primary",onClick:this.recordAction,href:"/read/search"},this.props.translate("Find Sites to Follow")):null,t=null;return h.default.createElement(b.default,{className:"is-drake",title:this.props.translate("Welcome to Reader"),line:this.props.translate("Recent posts from sites you follow will appear here."),action:e,secondaryAction:t,illustration:"/calypso/images/drake/drake-all-done.svg",illustrationWidth:500})}}]),t}(h.default.Component);t.default=(0,_.localize)(j),e.exports=t.default},"./client/reader/stream/index.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){if(e<=0)return Ie;var t=(0,x.default)(Math.floor(Math.log(e)*Math.LOG2E*5-6),Ee,Ie);return t}Object.defineProperty(t,"__esModule",{value:!0});var n=s("./node_modules/babel-runtime/helpers/extends.js"),a=o(n),l=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(l),d=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),c=o(d),u=s("./node_modules/babel-runtime/helpers/createClass.js"),p=o(u),f=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),m=o(f),h=s("./node_modules/babel-runtime/helpers/inherits.js"),_=o(h),g=s("./node_modules/lodash/map.js"),b=o(g),v=s("./node_modules/lodash/identity.js"),y=o(v),j=s("./node_modules/lodash/clamp.js"),x=o(j),k=s("./node_modules/lodash/times.js"),P=o(k),S=s("./node_modules/lodash/noop.js"),E=o(S),I=s("./node_modules/lodash/findLast.js"),w=o(I),C=s("./node_modules/lodash/defer.js"),R=o(C),N=s("./node_modules/react-dom/index.js"),T=o(N),M=s("./node_modules/react/react.js"),L=o(M),D=s("./node_modules/classnames/index.js"),F=o(D),A=s("./node_modules/react-redux/es/index.js"),H=s("./node_modules/i18n-calypso/index.js"),O=s("./client/components/reader-main/index.jsx"),U=o(O),B=s("./client/reader/stream/empty.jsx"),K=o(B),q=s("./client/lib/feed-stream-store/actions.js"),W=s("./client/lib/like-store/like-store.js"),G=o(W),V=s("./client/lib/like-store/actions.js"),Y=o(V),z=s("./client/reader/like-helper.jsx"),X=o(z),$=s("./client/components/list-end/index.js"),Q=o($),J=s("./client/components/infinite-list/index.jsx"),Z=o(J),ee=s("./client/components/mobile-back-to-sidebar/index.jsx"),te=o(ee),se=s("./client/reader/stream/post-placeholder.jsx"),oe=o(se),re=s("./client/lib/feed-post-store/index.js"),ne=o(re),ae=s("./client/reader/update-notice/index.jsx"),le=o(ae),ie=s("./client/lib/keyboard-shortcuts/index.js"),de=o(ie),ce=s("./client/lib/scroll-to/index.js"),ue=o(ce),pe=s("./client/reader/xpost-helper.js"),fe=o(pe),me=s("./client/reader/stream/post-lifecycle.jsx"),he=o(me),_e=s("./client/reader/utils.js"),ge=s("./client/state/selectors/get-blocked-sites.js"),be=o(ge),ve=s("./client/state/selectors/get-reader-follows.js"),ye=o(ve),je=s("./client/lib/feed-stream-store/post-key.js"),xe=s("./client/state/ui/reader/card-expansions/actions.js"),ke=s("./client/reader/stream/utils.js"),Pe=600,Se=46,Ee=4,Ie=30,we=function(e){function t(){var e,s,o,r;(0,c.default)(this,t);for(var n=arguments.length,a=Array(n),l=0;l<n;l++)a[l]=arguments[l];return s=o=(0,m.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(a))),Ce.call(o),r=s,(0,m.default)(o,r)}return(0,_.default)(t,e),(0,p.default)(t,[{key:"getStateFromStores",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=e.postsStore,s=e.recommendationsStore,o=e.totalSubs,n=(0,b.default)(t.get(),e.transformStreamItems),a=s?s.get():null;s&&(!a||a.length<n.length*(ke.RECS_PER_BLOCK/r(o)))&&(s.isFetchingNextPage()||(0,R.default)(function(){return(0,q.fetchNextPage)(s.id)}));var l=this.state&&this.state.items;return this.state&&n===this.state.posts&&a===this.state.recs||(l=(0,ke.injectRecommendations)(n,a,r(o))),e.shouldCombineCards&&(l=(0,ke.combineCards)(l)),{items:l,posts:n,recs:a,updateCount:t.getUpdateCount(),selectedPostKey:t.getSelectedPostKey(),isFetchingNextPage:t.isFetchingNextPage&&t.isFetchingNextPage(),isLastPage:t.isLastPage()}}},{key:"componentDidUpdate",value:function(e,t){(0,je.keysAreEqual)(t.selectedPostKey,this.state.selectedPostKey)||(this.scrollToSelectedPost(!0),this.isPostFullScreen()&&(0,_e.showSelectedPost)({store:this.props.postsStore,replaceHistory:!0}))}},{key:"scrollToSelectedPost",value:function(e){var t=-80,s=T.default.findDOMNode(this).querySelector(".is-selected");if(s){var o=document.documentElement;s.focus();var r=(window.pageYOffset||o.scrollTop)-(o.clientTop||0),n=s.getBoundingClientRect(),a=parseInt(r+n.top+t,10);e?(0,ue.default)({x:0,y:a,duration:200}):window.scrollTo(0,a)}}},{key:"componentDidMount",value:function(){this.props.postsStore.on("change",this.updateState),this.props.recommendationsStore&&this.props.recommendationsStore.on("change",this.updateState),this.props.resetCardExpansions(),de.default.on("move-selection-down",this.selectNextItem),de.default.on("move-selection-up",this.selectPrevItem),de.default.on("open-selection",this.handleOpenSelection),de.default.on("like-selection",this.toggleLikeOnSelectedPost),de.default.on("go-to-top",this.goToTop),window.addEventListener("popstate",this._popstate),"scrollRestoration"in history&&(history.scrollRestoration="manual")}},{key:"componentWillUnmount",value:function(){this.props.postsStore.off("change",this.updateState),this.props.recommendationsStore&&this.props.recommendationsStore.off("change",this.updateState),de.default.off("move-selection-down",this.selectNextItem),de.default.off("move-selection-up",this.selectPrevItem),de.default.off("open-selection",this.handleOpenSelection),de.default.off("like-selection",this.toggleLikeOnSelectedPost),de.default.off("go-to-top",this.goToTop),window.removeEventListener("popstate",this._popstate),"scrollRestoration"in history&&(history.scrollRestoration="auto")}},{key:"componentWillReceiveProps",value:function(e){e.postsStore!==this.props.postsStore&&(this.props.postsStore.off("change",this.updateState),this.props.recommendationsStore&&this.props.recommendationsStore.off("change",this.updateState),e.postsStore.on("change",this.updateState),e.recommendationsStore&&e.recommendationsStore.on("change",this.updateState),this.props.resetCardExpansions(),this.updateState(e),this._list&&this._list.reset())}},{key:"toggleLikeAction",value:function(e,t){var s=G.default.isPostLikedByCurrentUser(e,t);null!==s&&Y.default[s?"unlikePost":"likePost"](e,t)}},{key:"isPostFullScreen",value:function(){return!!window.location.pathname.match(/^\/read\/(blogs|feeds)\/([0-9]+)\/posts\/([0-9]+)$/i)}},{key:"getVisibleItemIndexes",value:function(){return this._list&&this._list.getVisibleItemIndexes({offsetTop:Se})}},{key:"render",value:function(){var e=this,t=this.props.postsStore,s=t.isLastPage()&&(!this.state.posts||0===this.state.posts.length),o=void 0,r=void 0;s||t.hasRecentError("invalid_tag")?(o=this.props.emptyContent,!o&&this.props.showDefaultEmptyContentIfMissing&&(o=L.default.createElement(K.default,null)),r=!1):(o=L.default.createElement(Z.default,{ref:function(t){return e._list=t},className:"reader__content",items:this.state.items,lastPage:this.state.isLastPage,fetchingNextPage:this.state.isFetchingNextPage,guessedItemHeight:Pe,fetchNextPage:this.fetchNextPage,getItemRef:this.getPostRef,renderItem:this.renderPost,renderLoadingPlaceholders:this.renderLoadingPlaceholders}),r=!0);var n=this.props.isMain?U.default:"div";return L.default.createElement(n,{className:(0,F.default)("following",this.props.className)},this.props.isMain&&this.props.showMobileBackToSidebar&&L.default.createElement(te.default,null,L.default.createElement("h1",null,this.props.translate("Streams"))),L.default.createElement(le.default,{count:this.state.updateCount,onClick:this.showUpdates}),this.props.children,o,r&&t.isLastPage()&&this.state.posts.length?L.default.createElement(Q.default,null):null)}}]),t}(L.default.Component);we.propTypes={postsStore:M.PropTypes.object.isRequired,recommendationsStore:M.PropTypes.object,trackScrollPage:M.PropTypes.func.isRequired,suppressSiteNameLink:M.PropTypes.bool,showPostHeader:M.PropTypes.bool,showFollowInHeader:M.PropTypes.bool,onUpdatesShown:M.PropTypes.func,emptyContent:M.PropTypes.object,className:M.PropTypes.string,showDefaultEmptyContentIfMissing:M.PropTypes.bool,showPrimaryFollowButtonOnCards:M.PropTypes.bool,showMobileBackToSidebar:M.PropTypes.bool,placeholderFactory:M.PropTypes.func,followSource:M.PropTypes.string,isDiscoverStream:M.PropTypes.bool,shouldCombineCards:M.PropTypes.bool,useCompactCards:M.PropTypes.bool,transformStreamItems:M.PropTypes.func,isMain:M.PropTypes.bool},we.defaultProps={showPostHeader:!0,suppressSiteNameLink:!1,showFollowInHeader:!1,onUpdatesShown:E.default,className:"",showDefaultEmptyContentIfMissing:!0,showPrimaryFollowButtonOnCards:!0,showMobileBackToSidebar:!0,isDiscoverStream:!1,shouldCombineCards:!0,transformStreamItems:y.default,isMain:!0,useCompactCards:!1};var Ce=function(){var e=this;this.state=this.getStateFromStores(),this.updateState=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.props;e.setState(e.getStateFromStores(t))},this._popstate=function(){e.state.selectedPostKey&&"manual"!==history.scrollRestoration&&e.scrollToSelectedPost(!1)},this.handleOpenSelection=function(){var t=e.props.postsStore.getSelectedPostKey();(0,_e.showSelectedPost)({store:e.props.postsStore,postKey:t})},this.toggleLikeOnSelectedPost=function(){var t=e.props.postsStore.getSelectedPostKey(),s=void 0;t&&!t.isGap&&(s=ne.default.get(t));var o=fe.default.getXPostMetadata(s);return o.postURL?void(e.isPostFullScreen()&&o.blogId&&o.postId&&e.toggleLikeAction(o.blogId,o.postId)):void(X.default.shouldShowLikes(s)&&e.toggleLikeAction(s.site_ID,s.ID))},this.goToTop=function(){e.state.updateCount&&e.state.updateCount>0?e.showUpdates():(0,q.selectFirstItem)(e.props.postsStore.id)},this.selectNextItem=function(){if(e.state.selectedPostKey)return void(0,q.selectNextItem)(e.props.postsStore.id);var t=e.getVisibleItemIndexes(),s=e.state,o=s.items,r=s.posts;if(t&&t.length>0){for(var n=t[0].index,a=0;a<t.length;a++){var l=t[a];if(l.bounds.top>0&&!o[l.index].isRecommendationBlock){n=l.index;break}}var i=o[n];if(i.isCombination){var d={postId:i.postIds[0]};i.feedId?d.feedId=i.feedId:d.blogId=i.blogId,(0,q.selectItem)(e.props.postsStore.id,d)}var c=(0,w.default)(r,o[n],n);(0,je.keysAreEqual)(c,e.state.selectedPostKey)?(0,q.selectNextItem)(e.props.postsStore.id):(0,q.selectItem)(e.props.postsStore.id,c)}},this.selectPrevItem=function(){e.state.selectedPostKey&&(0,q.selectPrevItem)(e.props.postsStore.id)},this.fetchNextPage=function(t){e.props.postsStore.isLastPage()||e.props.postsStore.isFetchingNextPage()||(t.triggeredByScroll&&e.props.trackScrollPage(e.props.postsStore.getPage()+1),(0,q.fetchNextPage)(e.props.postsStore.id))},this.showUpdates=function(){e.props.onUpdatesShown(),(0,q.showUpdates)(e.props.postsStore.id),e.props.recommendationsStore&&(0,q.shufflePosts)(e.props.recommendationsStore.id),e._list&&e._list.scrollToTop()},this.renderLoadingPlaceholders=function(){var t=e.state.posts.length?2:e.props.postsStore.getPerPage();return(0,P.default)(t,function(t){return e.props.placeholderFactory?e.props.placeholderFactory({key:"feed-post-placeholder-"+t}):L.default.createElement(oe.default,{key:"feed-post-placeholder-"+t})})},this.getPostRef=function(e){return(0,je.keyToString)(e)},this.renderPost=function(t,s){var o=e.props.recommendationsStore&&e.props.recommendationsStore.id,r=e.props.postsStore.getSelectedPostKey(),n=!(!r||r.postId!==t.postId||r.blogId!==t.blogId&&r.feedId!==t.feedId),l=e.getPostRef(t),i=function(s){return(0,_e.showSelectedPost)((0,a.default)({},s,{postKey:t.isCombination?(0,je.keyForPost)(s):t,store:e.props.postsStore}))};return L.default.createElement(he.default,{key:l,ref:l,isSelected:n,handleClick:i,postKey:t,store:e.props.postsStore,suppressSiteNameLink:e.props.suppressSiteNameLink,showPostHeader:e.props.showPostHeader,showFollowInHeader:e.props.showFollowInHeader,showPrimaryFollowButtonOnCards:e.props.showPrimaryFollowButtonOnCards,isDiscoverStream:e.props.isDiscoverStream,showSiteName:e.props.showSiteNameOnCards,followSource:e.props.followSource,blockedSites:e.props.blockedSites,index:s,selectedPostKey:r,recStoreId:o,compact:e.props.useCompactCards})}};t.default=(0,H.localize)((0,A.connect)(function(e){return{blockedSites:(0,be.default)(e),totalSubs:(0,ye.default)(e).length}},{resetCardExpansions:xe.resetCardExpansions})(we)),e.exports=t.default},"./client/reader/stream/post-lifecycle.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=s("./node_modules/babel-runtime/helpers/extends.js"),n=o(r),a=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),l=o(a),i=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),d=o(i),c=s("./node_modules/babel-runtime/helpers/createClass.js"),u=o(c),p=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),f=o(p),m=s("./node_modules/babel-runtime/helpers/inherits.js"),h=o(m),_=s("./node_modules/lodash/includes.js"),g=o(_),b=s("./node_modules/lodash/omit.js"),v=o(b),y=s("./node_modules/lodash/defer.js"),j=o(y),x=s("./node_modules/react/react.js"),k=o(x),P=s("./client/lib/feed-post-store/index.js"),S=o(P),E=s("./client/lib/feed-post-store/actions.js"),I=o(E),w=s("./client/reader/stream/post-placeholder.jsx"),C=o(w),R=s("./client/reader/stream/post-unavailable.jsx"),N=o(R),T=s("./client/reader/list-gap/index.jsx"),M=o(T),L=s("./client/reader/stream/x-post.jsx"),D=o(L),F=s("./client/reader/utils.js"),A=s("./client/reader/stream/recommended-posts.jsx"),H=o(A),O=s("./client/reader/xpost-helper.js"),U=o(O),B=s("./client/blocks/reader-post-card/blocked.jsx"),K=o(B),q=s("./client/reader/stream/post.jsx"),W=o(q),G=s("./client/reader/follow-button/follow-sources.jsx"),V=s("./client/blocks/reader-combined-card/index.jsx"),Y=o(V),z=s("./client/lib/reader-post-flux-adapter/index.js"),X=o(z),$=s("./client/reader/stream/empty-search-recommended-post.jsx"),Q=o($),J=(0,X.default)(Y.default),Z=function(e){function t(){var e,s,o,r;(0,d.default)(this,t);for(var n=arguments.length,a=Array(n),i=0;i<n;i++)a[i]=arguments[i];return s=o=(0,f.default)(this,(e=t.__proto__||(0,l.default)(t)).call.apply(e,[this].concat(a))),o.state={post:o.getPostFromStore()},o.updatePost=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.props,t=o.getPostFromStore(e);t!==o.state.post&&o.setState({post:t})},r=s,(0,f.default)(o,r)}return(0,h.default)(t,e),(0,u.default)(t,[{key:"getPostFromStore",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;if(e.postKey.isRecommendationBlock||e.postKey.isCombination||e.postKey.isGap)return null;var t=S.default.get(e.postKey);return t&&"minimal"!==t._state||(0,j.default)(function(){return I.default.fetchPost(e.postKey)}),t}},{key:"componentWillMount",value:function(){S.default.on("change",this.updatePost)}},{key:"componentWillUnmount",value:function(){S.default.off("change",this.updatePost)}},{key:"componentWillReceiveProps",value:function(e){this.updatePost(e)}},{key:"shouldComponentUpdate",value:function(e,t){var s=(0,v.default)(this.props,"handleClick"),o=(0,v.default)(e,"handleClick"),r=this.state.post!==t.post||!(0,F.shallowEquals)(s,o);return r}},{key:"render",value:function(){var e=this.state.post,t=this.props,s=t.postKey,o=t.selectedPostKey,r=t.recStoreId,a=t.followSource;if(s.isRecommendationBlock)return k.default.createElement(H.default,{recommendations:s.recommendations,index:s.index,storeId:r,followSource:G.IN_STREAM_RECOMMENDATION});if(s.isCombination)return k.default.createElement(J,{postKey:s,index:this.props.index,onClick:this.props.handleClick,selectedPostKey:o,followSource:a,showFollowButton:this.props.showPrimaryFollowButtonOnCards});if(s.isRecommendation)return k.default.createElement(Q.default,{post:e,site:s});if(s.isGap)return k.default.createElement(M.default,{gap:s,store:this.props.store,selected:this.props.isSelected,handleClick:this.props.handleClick});if(!e||"minimal"===e._state||"pending"===e._state)return k.default.createElement(C.default,null);if("error"===e._state)return k.default.createElement(N.default,{post:e});if((0,g.default)(this.props.blockedSites,+s.blogId))return k.default.createElement(K.default,{post:e});if((0,O.isXPost)(e)){var l=U.default.getXPostMetadata(e),i=this.props.store.getSitesCrossPostedTo(l.commentURL||l.postURL);return k.default.createElement(D.default,(0,n.default)({},(0,v.default)(this.props,"store"),{xPostedTo:i,xMetadata:l,post:e,postKey:s}))}var d=this.props.store.getSitesCrossPostedTo(e.URL);return k.default.createElement(W.default,(0,n.default)({},(0,v.default)(this.props,"store"),{post:e,xPostedTo:d}))}}]),t}(k.default.PureComponent);Z.propTypes={postKey:x.PropTypes.object.isRequired,isDiscoverStream:x.PropTypes.bool,handleClick:x.PropTypes.func,recStoreId:x.PropTypes.string},t.default=Z,e.exports=t.default},"./client/reader/stream/post-placeholder.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),n=o(r),a=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),l=o(a),i=s("./node_modules/babel-runtime/helpers/createClass.js"),d=o(i),c=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),u=o(c),p=s("./node_modules/babel-runtime/helpers/inherits.js"),f=o(p),m=s("./node_modules/react/react.js"),h=o(m),_=s("./client/components/card/index.jsx"),g=o(_),b=function(e){function t(){return(0,l.default)(this,t),(0,u.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){return h.default.createElement(g.default,{tagName:"article",className:"reader__card is-placeholder"},h.default.createElement("div",{className:"reader__post-header"},h.default.createElement("h1",{className:"reader__post-title"},h.default.createElement("a",{className:"reader__post-title-link",target:"_blank",rel:"noopener noreferrer"},h.default.createElement("span",{className:"reader__placeholder-text"},"Loading interesting posts"))),h.default.createElement("div",{className:"reader__post-byline"},h.default.createElement("span",{className:"site-icon",height:"16",width:"16"}),h.default.createElement("h4",{className:"reader__site-name"},h.default.createElement("span",{className:"reader__placeholder-text"},"Loading Sites")),h.default.createElement("time",{className:"reader__post-time"},h.default.createElement("span",{className:"reader__placeholder-text"},"10 min")))),h.default.createElement("div",{className:"reader__post-excerpt"},h.default.createElement("p",null,h.default.createElement("span",{className:"reader__placeholder-text"},"Please wait while we grab all the interesting posts, photos, videos and more to show you in Reader. It shouldnt take long."))),h.default.createElement("ul",{className:"reader__post-footer"},h.default.createElement("li",{className:"reader__post-read-time"},h.default.createElement("span",{className:"reader__placeholder-text"},"10 min read"))))}}]),t}(h.default.PureComponent);t.default=b,e.exports=t.default},"./client/reader/stream/post-unavailable.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=s("./node_modules/babel-runtime/core-js/json/stringify.js"),n=o(r),a=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),l=o(a),i=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),d=o(i),c=s("./node_modules/babel-runtime/helpers/createClass.js"),u=o(c),p=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),f=o(p),m=s("./node_modules/babel-runtime/helpers/inherits.js"),h=o(m),_=s("./node_modules/react/react.js"),g=o(_),b=s("./node_modules/i18n-calypso/index.js"),v=s("./client/config/index.js"),y=o(v),j=s("./client/components/card/index.jsx"),x=o(j),k=function(e){function t(){return(0,d.default)(this,t),(0,f.default)(this,(t.__proto__||(0,l.default)(t)).apply(this,arguments))}return(0,h.default)(t,e),(0,u.default)(t,[{key:"componentWillMount",value:function(){this.errors={unauthorized:this.props.translate("This is a post on a private site that youre following, but not currently a member of. Please request membership to display these posts in Reader."),default:this.props.translate("An error occurred loading this post.")}}},{key:"render",value:function(){var e=this.errors[this.props.post.errorCode||"default"]||this.errors.default;return 404===this.props.post.statusCode?null:g.default.createElement(x.default,{tagName:"article",className:"reader__card is-error"},g.default.createElement("div",{className:"reader__post-header"},g.default.createElement("h1",{className:"reader__post-title"},g.default.createElement("a",{className:"reader__post-title-link",target:"_blank",rel:"noopener noreferrer"},g.default.createElement("span",{className:"reader__placeholder-text"},"Oops!")))),g.default.createElement("div",{className:"reader__post-excerpt"},g.default.createElement("p",null,e),y.default.isEnabled("reader/full-errors")?g.default.createElement("pre",null,(0,n.default)(this.props.post,null,"  ")):null))}}]),t}(g.default.PureComponent);t.default=(0,b.localize)(k),e.exports=t.default},"./client/reader/stream/post.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=s("./node_modules/babel-runtime/helpers/extends.js"),n=o(r),a=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),l=o(a),i=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),d=o(i),c=s("./node_modules/babel-runtime/helpers/createClass.js"),u=o(c),p=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),f=o(p),m=s("./node_modules/babel-runtime/helpers/inherits.js"),h=o(m),_=s("./node_modules/lodash/omit.js"),g=o(_),b=s("./node_modules/lodash/get.js"),v=o(b),y=s("./node_modules/react/react.js"),j=o(y),x=s("./node_modules/react-redux/es/index.js"),k=s("./client/blocks/reader-post-card/index.jsx"),P=o(k),S=s("./client/state/reader/sites/selectors.js"),E=s("./client/state/reader/feeds/selectors.js"),I=s("./client/components/data/query-reader-site/index.jsx"),w=o(I),C=s("./client/components/data/query-reader-feed/index.jsx"),R=o(C),N=s("./client/lib/feed-post-store/index.js"),T=o(N),M=s("./client/lib/react-smart-set-state/index.js"),L=o(M),D=s("./client/reader/stats.js"),F=s("./client/reader/discover/helper.js"),A=s("./client/reader/utils.js"),H=function(e){function t(){var e,s,o,r;(0,d.default)(this,t);for(var a=arguments.length,i=Array(a),c=0;c<a;c++)i[c]=arguments[c];return s=o=(0,f.default)(this,(e=t.__proto__||(0,l.default)(t)).call.apply(e,[this].concat(i))),o.onClick=function(e){var t=void 0;(0,v.default)(o.props,"discoverPick.post")&&(t=(0,n.default)({},e,{referral:{blogId:F.discoverBlogId,postId:o.props.post.ID}})),o.props.handleClick&&o.props.handleClick({post:t||e})},o.onCommentClick=function(){(0,D.recordAction)("click_comments"),(0,D.recordGaEvent)("Clicked Post Comment Button"),(0,D.recordTrackForPost)("calypso_reader_post_comments_button_clicked",o.props.post),o.props.handleClick&&o.props.handleClick({post:o.props.post,comments:!0})},r=s,(0,f.default)(o,r)}return(0,h.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this.props.post,t=e.feed_ID,s=e.site_ID,o=e.is_external,r=e.is_discover,n=void 0;if(r){var a=(0,F.getSourceData)(this.props.post),l=a.blogId;n=l}return j.default.createElement(P.default,{post:this.props.post,discoverPick:this.props.discoverPick,site:this.props.site,feed:this.props.feed,onClick:this.onClick,onCommentClick:this.onCommentClick,isSelected:this.props.isSelected,showPrimaryFollowButton:this.props.showPrimaryFollowButtonOnCards,followSource:this.props.followSource,showSiteName:this.props.showSiteName,isDiscoverStream:this.props.isDiscoverStream,postKey:this.props.postKey,compact:this.props.compact},t&&j.default.createElement(R.default,{feedId:t,includeMeta:!1}),!o&&s&&j.default.createElement(w.default,{siteId:+s,includeMeta:!1}),n&&j.default.createElement(w.default,{siteId:n,includeMeta:!1}))}}]),t}(j.default.Component);H.displayName="ReaderPostCardAdapter";var O=(0,x.connect)(function(e,t){var s=(0,v.default)(t,"post.site_ID"),o=(0,v.default)(t,"post.is_external"),r=(0,v.default)(t,"post.feed_ID"),n=null;if((0,v.default)(t,"post.is_discover")){var a=(0,v.default)(t,"discoverPick.post");if(t.isDiscoverStream){var l=(0,F.getSourceData)(t.post),i=l.blogId,d=i?(0,S.getSite)(e,i):null;(a||d)&&(n={post:a,site:d})}else a&&(n={post:a})}return{site:o?null:(0,S.getSite)(e,s),feed:(0,E.getFeed)(e,r),discoverPick:n}})(H),U=function(e){function t(e){(0,d.default)(this,t);var s=(0,f.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e));return s.updateState=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.getStateFromStores();s.smartSetState(e)},s.state=s.getStateFromStores(e),s.smartSetState=L.default,s}return(0,h.default)(t,e),(0,u.default)(t,[{key:"getStateFromStores",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=e.post,s=t.is_discover&&!(0,F.isDiscoverSitePick)(t),o=null;return s&&(o={post:T.default.get((0,F.getSourceData)(t))}),{discoverPick:o}}},{key:"componentWillMount",value:function(){T.default.on("change",this.updateState)}},{key:"componentWillReceiveProps",value:function(e){this.updateState(this.getStateFromStores(e))}},{key:"componentWillUnmount",value:function(){T.default.off("change",this.updateState)}},{key:"shouldComponentUpdate",value:function(e,t){var s=(0,g.default)(this.props,"handleClick"),o=(0,g.default)(e,"handleClick"),r=this.props!==e&&!(0,A.shallowEquals)(s,o)||(0,v.default)(this.state,"discoverPick.post")!==(0,v.default)(t,"discoverPick.post");return r}},{key:"render",value:function(){return j.default.createElement(O,(0,n.default)({},this.props,{discoverPick:this.state.discoverPick}))}}]),t}(j.default.Component);U.displayName="ReaderPostCardAdapterFluxContainer",t.default=U,e.exports=t.default},"./client/reader/stream/recommended-posts.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t,s){(0,N.recordTrackForPost)("calypso_reader_recommended_post_dismissed",s,{recommendation_source:"in-stream",ui_position:e}),(0,N.recordAction)("in_stream_rec_dismiss"),(0,L.dismissPost)(t,s)}function n(e,t){(0,N.recordTrackForPost)("calypso_reader_recommended_site_clicked",t,{recommendation_source:"in-stream",ui_position:e}),(0,N.recordAction)("in_stream_rec_site_click")}function a(e,t){(0,N.recordTrackForPost)("calypso_reader_recommended_post_clicked",t,{recommendation_source:"in-stream",ui_position:e}),(0,N.recordAction)("in_stream_rec_post_click")}Object.defineProperty(t,"__esModule",{value:!0}),t.RecommendedPosts=void 0;var l=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(l),d=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),c=o(d),u=s("./node_modules/babel-runtime/helpers/createClass.js"),p=o(u),f=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),m=o(f),h=s("./node_modules/babel-runtime/helpers/inherits.js"),_=o(h),g=s("./node_modules/lodash/some.js"),b=o(g),v=s("./node_modules/lodash/partial.js"),y=o(v),j=s("./node_modules/lodash/map.js"),x=o(j),k=s("./node_modules/react/react.js"),P=o(k),S=s("./node_modules/i18n-calypso/index.js"),E=s("./node_modules/gridicons/build/index.js"),I=o(E),w=s("./client/blocks/reader-related-card-v2/index.jsx"),C=s("./client/lib/feed-post-store/index.js"),R=o(C),N=s("./client/reader/stats.js"),T=s("./client/components/button/index.jsx"),M=o(T),L=s("./client/lib/feed-stream-store/actions.js"),D=t.RecommendedPosts=function(e){function t(){var e,s,o,r;(0,c.default)(this,t);for(var n=arguments.length,a=Array(n),l=0;l<n;l++)a[l]=arguments[l];return s=o=(0,m.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(a))),o.state={posts:(0,x.default)(o.props.recommendations,R.default.get.bind(R.default))},o.updatePosts=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.props,t=(0,x.default)(e.recommendations,R.default.get.bind(R.default));(0,b.default)(t,function(e,t){return e!==o.state.posts[t]})&&o.setState({
posts:t})},r=s,(0,m.default)(o,r)}return(0,_.default)(t,e),(0,p.default)(t,[{key:"componentWillMount",value:function(){R.default.on("change",this.updatePosts)}},{key:"componentWillReceiveProps",value:function(e){this.updatePosts(e)}},{key:"componentWillUnmount",value:function(){R.default.off("change",this.updatePosts)}},{key:"render",value:function(){var e=this;return P.default.createElement("div",{className:"reader-stream__recommended-posts"},P.default.createElement("h1",{className:"reader-stream__recommended-posts-header"},P.default.createElement(I.default,{icon:"thumbs-up",size:18}),"",this.props.translate("Recommended Posts")),P.default.createElement("ul",{className:"reader-stream__recommended-posts-list"},(0,x.default)(this.state.posts,function(t,s){var o=e.props.index+s;return P.default.createElement("li",{className:"reader-stream__recommended-posts-list-item",key:t.global_ID},P.default.createElement("div",{className:"reader-stream__recommended-post-dismiss"},P.default.createElement(M.default,{borderless:!0,title:e.props.translate("Dismiss this recommendation"),onClick:(0,y.default)(r,o,e.props.storeId,t)},P.default.createElement(I.default,{icon:"cross",size:14}))),P.default.createElement(w.RelatedPostCard,{post:t,onPostClick:(0,y.default)(a,o),onSiteClick:(0,y.default)(n,o),followSource:e.props.followSource}))})))}}]),t}(P.default.PureComponent);D.propTypes={index:k.PropTypes.number,translate:k.PropTypes.func,recommendations:k.PropTypes.array},t.default=(0,S.localize)(D)},"./client/reader/stream/utils.js":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){return(0,g.isDiscoverBlog)(e.blogId)||(0,g.isDiscoverFeed)(e.feedId)}function n(e,t){return e&&t&&!e.isRecommendationBlock&&!t.isRecommendationBlock&&(e.blogId&&e.blogId===t.blogId||e.feedId&&e.feedId===t.feedId)}function a(e,t){return(0,_.default)(e.date).isSame(t.date,"day")}function l(e,t){if(!e||!t)return null;var s={isCombination:!0,date:e.date&&e.date<t.date?e.date:t.date,postIds:[].concat((0,c.default)(e.postIds||[e.postId]),(0,c.default)(t.postIds||[t.postId]))};return e.blogId&&(s.blogId=e.blogId),e.feedId&&(s.feedId=e.feedId),s}function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],s=arguments[2];if(!t||0===t.length)return e;if(e.length<s)return e;var o=0;return(0,m.default)(e,function(e,r){if(r&&r%s===0&&o<t.length){var n={isRecommendationBlock:!0,recommendations:t.slice(o,o+b),index:o};return o+=b,[n,e]}return e})}Object.defineProperty(t,"__esModule",{value:!0}),t.combineCards=t.RECS_PER_BLOCK=void 0;var d=s("./node_modules/babel-runtime/helpers/toConsumableArray.js"),c=o(d),u=s("./node_modules/lodash/last.js"),p=o(u),f=s("./node_modules/lodash/flatMap.js"),m=o(f);t.isDiscoverPostKey=r,t.sameSite=n,t.sameDay=a,t.combine=l,t.injectRecommendations=i;var h=s("./node_modules/moment/moment.js"),_=o(h),g=s("./client/reader/discover/helper.js"),b=t.RECS_PER_BLOCK=2;t.combineCards=function(e){return e.reduce(function(e,t){var s=(0,p.default)(e);return n(s,t)&&a(s,t)&&!r(t)?e[e.length-1]=l((0,p.default)(e),t):e.push(t),e},[])}},"./client/reader/stream/x-post.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),n=o(r),a=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),l=o(a),i=s("./node_modules/babel-runtime/helpers/createClass.js"),d=o(i),c=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),u=o(c),p=s("./node_modules/babel-runtime/helpers/inherits.js"),f=o(p),m=s("./node_modules/lodash/get.js"),h=o(m),_=s("./node_modules/react/react.js"),g=o(_),b=s("./node_modules/react-dom/index.js"),v=o(b),y=s("./node_modules/classnames/index.js"),j=o(y),x=s("./node_modules/url/url.js"),k=o(x),P=s("./node_modules/i18n-calypso/index.js"),S=s("./node_modules/component-closest/index.js"),E=o(S),I=s("./node_modules/react-redux/es/index.js"),w=s("./client/components/card/index.jsx"),C=o(w),R=s("./client/blocks/reader-avatar/index.jsx"),N=o(R),T=s("./client/state/reader/sites/selectors.js"),M=s("./client/state/reader/feeds/selectors.js"),L=s("./client/components/data/query-reader-site/index.jsx"),D=o(L),F=s("./client/components/data/query-reader-feed/index.jsx"),A=o(F),H=function(e){function t(){var e,s,o,r;(0,l.default)(this,t);for(var a=arguments.length,i=Array(a),d=0;d<a;d++)i[d]=arguments[d];return s=o=(0,u.default)(this,(e=t.__proto__||(0,n.default)(t)).call.apply(e,[this].concat(i))),o.handleTitleClick=function(e){e.button>0||e.metaKey||e.controlKey||e.shiftKey||e.altKey||(e.preventDefault(),o.props.handleClick(o.props.xMetadata))},o.handleCardClick=function(e){var t=v.default.findDOMNode(o);(0,E.default)(e.target,".should-scroll",!0,t)&&setTimeout(function(){window.scrollTo(0,0)},100),(0,E.default)(e.target,".ignore-click",!0,t)||(0,E.default)(e.target,"a",!0,t)&&(0,E.default)(e.target,".reader__x-post",!0,t)||e.metaKey||e.controlKey||e.shiftKey||e.altKey||e.defaultPrevented||(e.preventDefault(),o.props.handleClick(o.props.xMetadata))},o.getSiteNameFromURL=function(e){return e&&"+"+k.default.parse(e).hostname.split(".")[0]},o.getDescription=function(e){var t=void 0,s=o.getSiteNameFromURL(o.props.xMetadata.siteURL),r=!!o.props.xMetadata.commentURL;return t=r?o.props.translate("{{author}}%(authorFirstName)s{{/author}} {{label}}left a comment on %(siteName)s, cross-posted to{{/label}} {{blogNames/}}",{args:{siteName:s,authorFirstName:e},components:{author:g.default.createElement("span",{className:"reader__x-post-author"}),label:g.default.createElement("span",{className:"reader__x-post-label"}),blogNames:o.getXPostedToContent()}}):o.props.translate("{{author}}%(authorFirstName)s{{/author}} {{label}}cross-posted from %(siteName)s to{{/label}} {{blogNames/}}",{args:{siteName:s,authorFirstName:e},components:{author:g.default.createElement("span",{className:"reader__x-post-author"}),label:g.default.createElement("span",{className:"reader__x-post-label"}),blogNames:o.getXPostedToContent()}})},o.getXPostedToContent=function(){var e=o.props.xPostedTo;return e&&0!==e.length||(e=[{siteURL:o.props.post.site_URL,siteName:o.getSiteNameFromURL(o.props.post.site_URL)}]),e.map(function(e,t,s){return g.default.createElement("span",{className:"reader__x-post-site",key:e.siteURL+"-"+t},e.siteName,t+2<s.length&&g.default.createElement("span",null,", "),t+2===s.length&&g.default.createElement("span",null," ",o.props.translate("and",{comment:"last conjunction in a list of blognames: (blog1, blog2,) blog3 _and_ blog4"})," "))})},r=s,(0,u.default)(o,r)}return(0,f.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){var e=this.props,t=e.post,s=e.postKey,o=e.site,r=e.feed,n=e.translate,a=s.blogId,l=s.feedId,i=(0,h.default)(o,"icon.img"),d=(0,h.default)(r,"image"),c=(0,j.default)({reader__card:!0,"is-x-post":!0,"is-selected":this.props.isSelected}),u=t.title;return u=u.replace(/x-post:/i,""),u||(u="("+n("no title")+")"),g.default.createElement(C.default,{tagName:"article",onClick:this.handleCardClick,className:c},g.default.createElement(N.default,{siteIcon:i,feedIcon:d,author:t.author,onClick:this.handleTitleClick,isCompact:!0}),g.default.createElement("div",{className:"reader__x-post"},t.title&&g.default.createElement("h1",{className:"reader__post-title"},g.default.createElement("a",{className:"reader__post-title-link",onClick:this.handleTitleClick,href:t.URL,target:"_blank",rel:"noopener noreferrer"},u)),this.getDescription(t.author.first_name)),l&&g.default.createElement(A.default,{feedId:+l,includeMeta:!1}),a&&g.default.createElement(D.default,{siteId:+a,includeMeta:!1}))}}]),t}(_.PureComponent);H.propTypes={post:g.default.PropTypes.object.isRequired,isSelected:g.default.PropTypes.bool.isRequired,xMetadata:g.default.PropTypes.object.isRequired,xPostedTo:g.default.PropTypes.array,handleClick:g.default.PropTypes.func.isRequired,translate:g.default.PropTypes.func.isRequired,postKey:g.default.PropTypes.object,site:g.default.PropTypes.object,feed:g.default.PropTypes.object},t.default=(0,I.connect)(function(e,t){var s=t.postKey,o=s.feedId,r=s.blogId,n=void 0,a=void 0;return o?(n=(0,M.getFeed)(e,o),a=n&&n.blog_ID?(0,T.getSite)(e,n.blog_ID):void 0):(a=(0,T.getSite)(e,r),n=a&&a.feed_ID?(0,M.getFeed)(e,a.feed_ID):void 0),{feed:n,site:a}})((0,P.localize)(H)),e.exports=t.default},"./client/reader/tag-stream/controller.js":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.tagListing=void 0;var r=s("./node_modules/lodash/trim.js"),n=o(r),a=s("./node_modules/react/react.js"),l=o(a),i=s("./client/lib/feed-stream-store/index.js"),d=o(i),c=s("./client/reader/stats.js"),u=s("./client/reader/controller-helper.js"),p=s("./client/lib/react-helpers/index.js"),f=s("./client/components/async-load/index.jsx"),m=o(f),h=s("./client/reader/follow-button/follow-sources.jsx"),_="Reader",g=function(e){s.e("async-load-reader-tag-stream-main").then(function(t){e(s("./client/reader/tag-stream/main.jsx").__esModule?s("./client/reader/tag-stream/main.jsx").default:s("./client/reader/tag-stream/main.jsx"))}.bind(null,s)).catch(s.oe)};t.tagListing=function(e){var t="/tag/:slug",s=_+" > Tag > "+e.params.tag,o=(0,n.default)(e.params.tag).toLowerCase().replace(/\s+/g,"-").replace(/-{2,}/g,"-"),r=encodeURIComponent(o).toLowerCase(),a=(0,d.default)("tag:"+o),i="topic";(0,u.ensureStoreLoading)(a,e),(0,u.trackPageLoad)(t,s,i),(0,c.recordTrack)("calypso_reader_tag_loaded",{tag:o}),(0,p.renderWithReduxStore)(l.default.createElement(m.default,{require:g,key:"tag-"+r,postsStore:a,encodedTagSlug:r,decodedTagSlug:o,trackScrollPage:u.trackScrollPage.bind(null,t,s,_,i),onUpdatesShown:u.trackUpdatesLoaded.bind(null,i),showBack:!!e.lastRoute,showPrimaryFollowButtonOnCards:!0,followSource:h.TAG_PAGE}),document.getElementById("primary"),e.store)}},"./client/reader/tag-stream/index.js":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){(0,n.default)("/tag/*",l.preloadReaderBundle,l.initAbTests),(0,n.default)("/tag/:tag",l.updateLastRoute,l.sidebar,a.tagListing),(0,n.default)("/tags",l.initAbTests,l.updateLastRoute,l.sidebar,a.recommendedTags)};var r=s("./node_modules/page/index.js"),n=o(r),a=s("./client/reader/tag-stream/controller.js"),l=s("./client/reader/controller.js");e.exports=t.default},"./client/reader/update-notice/index.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),n=o(r),a=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),l=o(a),i=s("./node_modules/babel-runtime/helpers/createClass.js"),d=o(i),c=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),u=o(c),p=s("./node_modules/babel-runtime/helpers/inherits.js"),f=o(p),m=s("./node_modules/lodash/noop.js"),h=o(m),_=s("./node_modules/react/react.js"),g=o(_),b=s("./node_modules/i18n-calypso/index.js"),v=s("./node_modules/react-redux/es/index.js"),y=s("./node_modules/classnames/index.js"),j=o(y),x=s("./node_modules/gridicons/build/index.js"),k=o(x),P=s("./client/components/data/document-head/index.jsx"),S=o(P),E=s("./client/state/document-head/selectors.js"),I=function(e){function t(){var e,s,o,r;(0,l.default)(this,t);for(var a=arguments.length,i=Array(a),d=0;d<a;d++)i[d]=arguments[d];return s=o=(0,u.default)(this,(e=t.__proto__||(0,n.default)(t)).call.apply(e,[this].concat(i))),o.handleClick=function(e){e.preventDefault(),o.props.onClick()},r=s,(0,u.default)(o,r)}return(0,f.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){var e=(0,j.default)({"reader-update-notice":!0,"is-active":this.props.count>0});return g.default.createElement("div",{className:e,onClick:this.handleClick},g.default.createElement(S.default,{unreadCount:this.props.count}),g.default.createElement(k.default,{icon:"arrow-up",size:18}),this.props.translate("%s new post","%s new posts",{args:[this.props.cappedUnreadCount],count:this.props.count}))}}]),t}(g.default.PureComponent);I.propTypes={count:g.default.PropTypes.number.isRequired,onClick:g.default.PropTypes.func,cappedUnreadCount:g.default.PropTypes.string},I.defaultProps={onClick:h.default},t.default=(0,v.connect)(function(e){return{cappedUnreadCount:(0,E.getDocumentHeadCappedUnreadCount)(e)}})((0,b.localize)(I)),e.exports=t.default},"./client/reader/utils.js":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){return e.button>0||e.metaKey||e.controlKey||e.shiftKey||e.altKey}function n(e){return void 0!==e&&404===e.statusCode}function a(e){var t=e.store,s=e.replaceHistory,o=e.postKey,r=e.comments;if(o){if((0,y.setLastStoreId)(t&&t.id),o.isGap===!0)return i(o,t.id);if(!o.isRecommendationBlock){var n=g.default.get(o);if((0,b.isXPost)(n)&&!s)return l(v.default.getXPostMetadata(n));var a=void 0;a=o.feedId?{feed_ID:o.feedId,feed_item_ID:o.postId}:{site_ID:o.blogId,ID:o.postId},d({post:a,replaceHistory:s,comments:r})}}}function l(e){if(e.blogId&&e.postId){var t={site_ID:e.blogId,ID:e.postId};d({post:t})}else window.open(e.postURL)}function i(e,t){e&&e.isGap&&t&&((0,j.fillGap)(t,e),(0,x.recordAction)("fill_gap"),(0,x.recordGaEvent)("Clicked Fill Gap"),(0,x.recordTrack)("calypso_reader_filled_gap",{stream:t}))}function d(e){var t=e.post,s=e.replaceHistory,o=e.comments,r=o?"#comments":"",n="";if(t.referral){var a=t.referral,l=a.blogId,i=a.postId;n+="ref_blog="+l+"&ref_post="+i}var d=s?"replace":"show";t.feed_ID&&t.feed_item_ID?h.default[d]("/read/feeds/"+t.feed_ID+"/posts/"+t.feed_item_ID+r+n):h.default[d]("/read/blogs/"+t.site_ID+"/posts/"+t.ID+r+n)}Object.defineProperty(t,"__esModule",{value:!0}),t.shallowEquals=void 0;var c=s("./node_modules/babel-runtime/core-js/object/keys.js"),u=o(c),p=s("./node_modules/lodash/every.js"),f=o(p);t.isSpecialClick=r,t.isPostNotFound=n,t.showSelectedPost=a,t.showFullXPost=l,t.handleGapClicked=i,t.showFullPost=d;var m=s("./node_modules/page/index.js"),h=o(m),_=s("./client/lib/feed-post-store/index.js"),g=o(_),b=s("./client/reader/xpost-helper.js"),v=o(b),y=s("./client/reader/controller-helper.js"),j=s("./client/lib/feed-stream-store/actions.js"),x=s("./client/reader/stats.js");t.shallowEquals=function(e,t){return(0,f.default)((0,u.default)(e),function(s){return e[s]===t[s]})}},"./client/reader/xpost-helper.js":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){return e&&e.display_type&d.X_POST}Object.defineProperty(t,"__esModule",{value:!0}),t.getXPostMetadata=void 0;var n=s("./node_modules/babel-runtime/core-js/object/keys.js"),a=o(n);t.isXPost=r;var l=s("./node_modules/url/url.js"),i=o(l),d=s("./client/lib/feed-post-store/display-types.js"),c={getXPostMetadata:function(e){var t={siteURL:null,postURL:null,commentURL:null,blogId:null,postId:null};if(e&&e.metadata)for(var s=(0,a.default)(e.metadata),o=0;o<s.length;o++){var r=e.metadata[s[o]];if("_xpost_original_permalink"===r.key||"xcomment_original_permalink"===r.key){var n=i.default.parse(r.value,!1,!1);t.siteURL=n.protocol+"//"+n.host,t.postURL=""+t.siteURL+n.path,n.hash&&0===n.hash.indexOf("#comment-")&&(t.commentURL=n.href)}else if("xpost_origin"===r.key){var l=r.value.split(":");t.blogId=l[0],t.postId=l[1]}}return t}};t.default=c;var u=c.getXPostMetadata;t.getXPostMetadata=u},"./client/state/reader/posts/selectors.js":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){return e.reader.posts.items[t]}function n(e,t,s){if(e.reader.posts.items!==c){var o=e.reader.posts.items,r=(0,d.default)(o,function(e){return e&&e.site_ID&&e.ID&&!e.is_external});u=(0,l.default)(r,function(e){return e.site_ID+"-"+e.ID}),c=o}return u[t+"-"+s]}Object.defineProperty(t,"__esModule",{value:!0});var a=s("./node_modules/lodash/keyBy.js"),l=o(a),i=s("./node_modules/lodash/filter.js"),d=o(i);t.getPost=r,t.getPostBySiteAndId=n;var c=null,u={}},"./node_modules/babel-runtime/helpers/toArray.js":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=s("./node_modules/babel-runtime/core-js/array/from.js"),n=o(r);t.default=function(e){return Array.isArray(e)?e:(0,n.default)(e)}},"./node_modules/create-react-class/factory.js":function(e,t,s){"use strict";function o(e){return e}function r(e,t,s){function r(e,t){var s=b.hasOwnProperty(t)?b[t]:null;x.hasOwnProperty(t)&&i("OVERRIDE_BASE"===s,"ReactClassInterface: You are attempting to override `%s` from your class specification. Ensure that your method names do not overlap with React methods.",t),e&&i("DEFINE_MANY"===s||"DEFINE_MANY_MERGED"===s,"ReactClassInterface: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",t)}function n(e,s){if(s){i("function"!=typeof s,"ReactClass: You're attempting to use a component class or function as a mixin. Instead, just use a regular object."),i(!t(s),"ReactClass: You're attempting to use a component as a mixin. Instead, just use a regular object.");var o=e.prototype,n=o.__reactAutoBindPairs;s.hasOwnProperty(d)&&v.mixins(e,s.mixins);for(var a in s)if(s.hasOwnProperty(a)&&a!==d){var l=s[a],c=o.hasOwnProperty(a);if(r(c,a),v.hasOwnProperty(a))v[a](e,l);else{var u=b.hasOwnProperty(a),m="function"==typeof l,h=m&&!u&&!c&&s.autobind!==!1;if(h)n.push(a,l),o[a]=l;else if(c){var _=b[a];i(u&&("DEFINE_MANY_MERGED"===_||"DEFINE_MANY"===_),"ReactClass: Unexpected spec policy %s for key %s when mixing in component specs.",_,a),"DEFINE_MANY_MERGED"===_?o[a]=p(o[a],l):"DEFINE_MANY"===_&&(o[a]=f(o[a],l))}else o[a]=l}}}else;}function c(e,t){if(t)for(var s in t){var o=t[s];if(t.hasOwnProperty(s)){var r=s in v;i(!r,'ReactClass: You are attempting to define a reserved property, `%s`, that shouldn\'t be on the "statics" key. Define it as an instance property instead; it will still be accessible on the constructor.',s);var n=s in e;i(!n,"ReactClass: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",s),e[s]=o}}}function u(e,t){i(e&&t&&"object"==typeof e&&"object"==typeof t,"mergeIntoWithNoDuplicateKeys(): Cannot merge non-objects.");for(var s in t)t.hasOwnProperty(s)&&(i(void 0===e[s],"mergeIntoWithNoDuplicateKeys(): Tried to merge two objects with the same key: `%s`. This conflict may be due to a mixin; in particular, this may be caused by two getInitialState() or getDefaultProps() methods returning objects with clashing keys.",s),e[s]=t[s]);return e}function p(e,t){return function(){var s=e.apply(this,arguments),o=t.apply(this,arguments);if(null==s)return o;if(null==o)return s;var r={};return u(r,s),u(r,o),r}}function f(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function m(e,t){var s=t.bind(e);return s}function h(e){for(var t=e.__reactAutoBindPairs,s=0;s<t.length;s+=2){var o=t[s],r=t[s+1];e[o]=m(e,r)}}function _(e){var t=o(function(e,o,r){this.__reactAutoBindPairs.length&&h(this),this.props=e,this.context=o,this.refs=l,this.updater=r||s,this.state=null;var n=this.getInitialState?this.getInitialState():null;i("object"==typeof n&&!Array.isArray(n),"%s.getInitialState(): must return an object or null",t.displayName||"ReactCompositeComponent"),this.state=n});t.prototype=new k,t.prototype.constructor=t,t.prototype.__reactAutoBindPairs=[],g.forEach(n.bind(null,t)),n(t,y),n(t,e),n(t,j),t.getDefaultProps&&(t.defaultProps=t.getDefaultProps()),i(t.prototype.render,"createClass(...): Class specification must implement a `render` method.");for(var r in b)t.prototype[r]||(t.prototype[r]=null);return t}var g=[],b={mixins:"DEFINE_MANY",statics:"DEFINE_MANY",propTypes:"DEFINE_MANY",contextTypes:"DEFINE_MANY",childContextTypes:"DEFINE_MANY",getDefaultProps:"DEFINE_MANY_MERGED",getInitialState:"DEFINE_MANY_MERGED",getChildContext:"DEFINE_MANY_MERGED",render:"DEFINE_ONCE",componentWillMount:"DEFINE_MANY",componentDidMount:"DEFINE_MANY",componentWillReceiveProps:"DEFINE_MANY",shouldComponentUpdate:"DEFINE_ONCE",componentWillUpdate:"DEFINE_MANY",componentDidUpdate:"DEFINE_MANY",componentWillUnmount:"DEFINE_MANY",updateComponent:"OVERRIDE_BASE"},v={displayName:function(e,t){e.displayName=t},mixins:function(e,t){if(t)for(var s=0;s<t.length;s++)n(e,t[s])},childContextTypes:function(e,t){e.childContextTypes=a({},e.childContextTypes,t)},contextTypes:function(e,t){e.contextTypes=a({},e.contextTypes,t)},getDefaultProps:function(e,t){e.getDefaultProps?e.getDefaultProps=p(e.getDefaultProps,t):e.getDefaultProps=t},propTypes:function(e,t){e.propTypes=a({},e.propTypes,t)},statics:function(e,t){c(e,t)},autobind:function(){}},y={componentDidMount:function(){this.__isMounted=!0}},j={componentWillUnmount:function(){this.__isMounted=!1}},x={replaceState:function(e,t){this.updater.enqueueReplaceState(this,e,t)},isMounted:function(){return!!this.__isMounted}},k=function(){};return a(k.prototype,e.prototype,x),_}var n,a=s("./node_modules/object-assign/index.js"),l=s("./node_modules/fbjs/lib/emptyObject.js"),i=s("./node_modules/fbjs/lib/invariant.js"),d="mixins";n={},e.exports=r},"./node_modules/create-react-class/index.js":function(e,t,s){"use strict";var o=s("./node_modules/react/react.js"),r=s("./node_modules/create-react-class/factory.js");if("undefined"==typeof o)throw Error("create-react-class could not find the React object. If you are using script tags, make sure that React is being loaded before create-react-class.");var n=(new o.Component).updater;e.exports=r(o.Component,o.isValidElement,n)},"./node_modules/lodash/clamp.js":function(e,t,s){function o(e,t,s){return void 0===s&&(s=t,t=void 0),void 0!==s&&(s=n(s),s=s===s?s:0),void 0!==t&&(t=n(t),t=t===t?t:0),r(n(e),t,s)}var r=s("./node_modules/lodash/_baseClamp.js"),n=s("./node_modules/lodash/toNumber.js");e.exports=o},"./node_modules/lodash/sampleSize.js":function(e,t,s){function o(e,t,s){var o=-1,d=l(e),c=d.length,u=c-1;for(t=(s?a(e,t,s):void 0===t)?1:r(i(t),0,c);++o<t;){var p=n(o,u),f=d[p];d[p]=d[o],d[o]=f}return d.length=t,d}var r=s("./node_modules/lodash/_baseClamp.js"),n=s("./node_modules/lodash/_baseRandom.js"),a=s("./node_modules/lodash/_isIterateeCall.js"),l=s("./node_modules/lodash/toArray.js"),i=s("./node_modules/lodash/toInteger.js");e.exports=o}});