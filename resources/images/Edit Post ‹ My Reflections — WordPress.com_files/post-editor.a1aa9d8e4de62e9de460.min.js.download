webpackJsonp(["post-editor","async-load-post-editor-media-modal"],{"./client/blocks/image-editor/image-editor-buttons.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=o(p),m=n("./node_modules/lodash/noop.js"),h=o(m),g=n("./node_modules/prop-types/index.js"),y=o(g),v=n("./node_modules/react/react.js"),b=o(v),_=n("./node_modules/react-redux/es/index.js"),x=n("./node_modules/i18n-calypso/index.js"),C=n("./client/components/button/index.jsx"),E=o(C),w=n("./client/state/ui/editor/image-editor/selectors.js"),j=function(e){function t(){return(0,a.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){var e=this.props,t=e.hasChanges,n=e.onCancel,o=e.src,r=e.onDone,i=e.onReset,s=e.translate,a=e.doneButtonText;return b.default.createElement("div",{className:"image-editor__buttons"},n&&b.default.createElement(E.default,{className:"image-editor__buttons-button",onClick:n},s("Cancel")),b.default.createElement(E.default,{className:"image-editor__buttons-button",disabled:!t,onClick:i},s("Reset")),b.default.createElement(E.default,{className:"image-editor__buttons-button",disabled:!o,primary:!0,onClick:r},a||s(" Done ")))}}]),t}(v.Component);j.propTypes={src:y.default.string,hasChanges:y.default.bool,resetImageEditorState:y.default.func,onDone:y.default.func,onCancel:y.default.func,onReset:y.default.func,doneButtonText:y.default.string},j.defaultProps={src:"",hasChanges:!1,resetImageEditorState:h.default,onDone:h.default,onCancel:h.default,onReset:h.default,doneButtonText:""},t.default=(0,_.connect)(function(e){var t=(0,w.getImageEditorFileInfo)(e),n=t.src,o=(0,w.imageEditorHasChanges)(e);return{src:n,hasChanges:o}})((0,x.localize)(j)),e.exports=t.default},"./client/blocks/image-editor/image-editor-canvas.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ImageEditorCanvas=void 0;var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=o(p),m=n("./node_modules/lodash/startsWith.js"),h=o(m),g=n("./node_modules/lodash/noop.js"),y=o(g),v=n("./node_modules/prop-types/index.js"),b=o(v),_=n("./node_modules/react/react.js"),x=o(_),C=n("./node_modules/react-dom/index.js"),E=o(C),w=n("./node_modules/react-redux/es/index.js"),j=n("./node_modules/classnames/index.js"),S=o(j),T=n("./client/blocks/image-editor/image-editor-crop.jsx"),P=o(T),k=n("./client/lib/media/utils.js"),I=o(k),N=n("./client/state/ui/editor/image-editor/selectors.js"),R=n("./client/state/ui/editor/image-editor/actions.js"),D=n("./client/state/selectors/get-image-editor-is-greater-than-minimum-dimensions.js"),M=o(D),O=t.ImageEditorCanvas=function(e){function t(e){(0,a.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return n.frameRateInterval=1e3/30,n.requestAnimationFrameId=null,n.lastTimestamp=null,n.onWindowResize=function(){n.requestAnimationFrameId=window.requestAnimationFrame(n.updateCanvasPosition)},n.onLoadComplete=n.onLoadComplete.bind(n),n.updateCanvasPosition=n.updateCanvasPosition.bind(n),n.isVisible=!1,n}return(0,f.default)(t,e),(0,d.default)(t,[{key:"componentDidMount",value:function(){this.isVisible=!0}},{key:"componentWillReceiveProps",value:function(e){this.props.src!==e.src&&this.getImage(e.src)}},{key:"isBlobSrc",value:function(e){return(0,h.default)(e,"blob")}},{key:"getImage",value:function(e){var t=this,n=this.props,o=n.onLoadError,r=n.mimeType,i=new XMLHttpRequest;this.isBlobSrc(e)||(e+="?"),i.open("GET",e,!0),i.responseType="arraybuffer",i.onload=function(){if(t.isVisible){var e=window.URL.createObjectURL(new Blob([i.response],{type:r}));t.initImage(e)}},i.onerror=function(e){return o(e)},i.send()}},{key:"initImage",value:function(e){this.image=new Image,this.image.src=e,this.image.onload=this.onLoadComplete,this.image.onerror=this.onLoadComplete}},{key:"onLoadComplete",value:function(e){"load"===e.type&&this.isVisible&&(this.drawImage(),this.updateCanvasPosition(),"undefined"!=typeof window&&(this.lastTimestamp=window.performance.now(),window.addEventListener("resize",this.onWindowResize)),this.props.setImageEditorImageHasLoaded(this.image.width,this.image.height))}},{key:"componentWillUnmount",value:function(){"undefined"!=typeof window&&this.onWindowResize&&(window.removeEventListener("resize",this.onWindowResize),window.cancelAnimationFrame(this.requestAnimationFrameId)),this.isVisible=!1}},{key:"componentDidUpdate",value:function(){this.drawImage(),this.updateCanvasPosition()}},{key:"toBlob",value:function(e){var t=this.props.crop,n=t.leftRatio,o=t.topRatio,r=t.widthRatio,i=t.heightRatio,s=this.props,a=s.mimeType,l=s.transform,d=E.default.findDOMNode(this.refs.canvas),u=d.getContext("2d"),c=l.degrees%180!==0,p=c?this.image.height:this.image.width,f=c?this.image.width:this.image.height,m=n*p,h=o*f,g=r*p,y=i*f,v=u.getImageData(m,h,g,y),b=document.createElement("canvas");b.width=g,b.height=y;var _=b.getContext("2d");_.putImageData(v,0,0),I.default.canvasToBlob(b,e,a,1)}},{key:"drawImage",value:function(){if(this.image){var e=E.default.findDOMNode(this.refs.canvas),t=this.image.width,n=this.image.height,o=this.props.transform,r=o.degrees%180!==0;e.width=r?n:t,e.height=r?t:n;var i=e.getContext("2d");i.clearRect(0,0,e.width,e.height),i.save(),i.setTransform(1,0,0,1,e.width/2,e.height/2),i.scale(o.scaleX,o.scaleY),i.rotate(o.degrees*Math.PI/180),i.drawImage(this.image,-t/2,-n/2),i.restore()}}},{key:"updateCanvasPosition",value:function(e){var t=e,n=t-this.lastTimestamp;if(!(n<this.frameRateInterval)){this.lastTimestamp=t-n%this.frameRateInterval;var o=this.props.crop,r=o.leftRatio,i=o.topRatio,s=o.widthRatio,a=o.heightRatio,l=E.default.findDOMNode(this.refs.canvas),d=-50*s-100*r,u=-50*a-100*i,c=l.offsetTop,p=l.offsetLeft,f=l.offsetWidth,m=l.offsetHeight;this.props.setImageEditorCropBounds(c-m*-u/100,p-f*-d/100,c+m*(1+u/100),p+f*(1+d/100))}}},{key:"preventDrag",value:function(e){return e.preventDefault(),!1}},{key:"render",value:function(){var e=this.props.crop,t=e.leftRatio,n=e.topRatio,o=e.widthRatio,r=e.heightRatio,i=this.props,s=i.isImageLoaded,a=i.showCrop,l=-50*o-100*t,d=-50*r-100*n,u={transform:"translate("+l+"%, "+d+"%)",maxWidth:85/o+"%",maxHeight:85/r+"%"},c=(0,S.default)("image-editor__canvas",{"is-placeholder":!s});return x.default.createElement("div",{className:"image-editor__canvas-container"},x.default.createElement("canvas",{ref:"canvas",style:u,onMouseDown:this.preventDrag,className:c}),a&&x.default.createElement(P.default,null))}}]),t}(_.Component);O.propTypes={src:b.default.string,mimeType:b.default.string,transform:b.default.shape({degrees:b.default.number,scaleX:b.default.number,scaleY:b.default.number}),crop:b.default.shape({topRatio:b.default.number,leftRatio:b.default.number,widthRatio:b.default.number,heightRatio:b.default.number}),setImageEditorCropBounds:b.default.func,setImageEditorImageHasLoaded:b.default.func,onLoadError:b.default.func,isImageLoaded:b.default.bool,showCrop:b.default.bool},O.defaultProps={transform:{degrees:0,scaleX:1,scaleY:1},crop:{cropTopRatio:0,cropLeftRatio:0,cropWidthRatio:1,cropHeightRatio:1},setImageEditorCropBounds:y.default,setImageEditorImageHasLoaded:y.default,onLoadError:y.default,isImageLoaded:!1,showCrop:!0},t.default=(0,w.connect)(function(e){var t=(0,N.getImageEditorTransform)(e),n=(0,N.getImageEditorFileInfo)(e),o=n.src,r=n.mimeType,i=(0,N.getImageEditorCrop)(e),s=(0,N.isImageEditorImageLoaded)(e),a=(0,M.default)(e);return{src:o,mimeType:r,transform:t,crop:i,isImageLoaded:s,showCrop:!(!s||!a)}},{setImageEditorCropBounds:R.setImageEditorCropBounds,setImageEditorImageHasLoaded:R.setImageEditorImageHasLoaded},null,{withRef:!0})(O)},"./client/blocks/image-editor/image-editor-crop.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/helpers/toConsumableArray.js"),i=o(r),s=n("./node_modules/babel-runtime/core-js/object/assign.js"),a=o(s),l=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/createClass.js"),f=o(p),m=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),h=o(m),g=n("./node_modules/babel-runtime/helpers/inherits.js"),y=o(g),v=n("./node_modules/lodash/noop.js"),b=o(v),_=n("./node_modules/lodash/isEqual.js"),x=o(_),C=n("./node_modules/prop-types/index.js"),E=o(C),w=n("./node_modules/react/react.js"),j=o(w),S=n("./node_modules/react-redux/es/index.js"),T=n("./node_modules/classnames/index.js"),P=o(T),k=n("./client/components/draggable/index.jsx"),I=o(k),N=n("./client/state/ui/editor/image-editor/selectors.js"),R=n("./client/state/ui/editor/image-editor/constants.js"),D=n("./client/state/ui/editor/image-editor/actions.js"),M=n("./client/state/ui/editor/image-editor/reducer.js"),O=n("./client/state/selectors/get-image-editor-original-aspect-ratio.js"),A=o(O),L=function(e){function t(e){(0,c.default)(this,t);var n=(0,h.default)(this,(t.__proto__||(0,d.default)(t)).call(this,e));return n.state=n.getDefaultState(e),n.onTopLeftDrag=n.onTopLeftDrag.bind(n),n.onTopRightDrag=n.onTopRightDrag.bind(n),n.onBottomLeftDrag=n.onBottomLeftDrag.bind(n),n.onBottomRightDrag=n.onBottomRightDrag.bind(n),n.applyCrop=n.applyCrop.bind(n),n.onBorderDrag=n.onBorderDrag.bind(n),n}return(0,y.default)(t,e),(0,f.default)(t,[{key:"getDefaultState",value:function(e){return{top:e.bounds.topBound,left:e.bounds.leftBound,bottom:e.bounds.bottomBound,right:e.bounds.rightBound}}},{key:"componentWillMount",value:function(){this.updateCrop(this.getDefaultState(this.props),this.props,this.applyComputedCrop)}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.bounds,o=t.aspectRatio,r=t.crop;if(!(0,x.default)(n,e.bounds)){var i=e.bounds.rightBound-e.bounds.leftBound,s=e.bounds.bottomBound-e.bounds.topBound,a=e.bounds.topBound+e.crop.topRatio*s,l=e.bounds.leftBound+e.crop.leftRatio*i,d=a+e.crop.heightRatio*s,u=l+e.crop.widthRatio*i,c={top:a,left:l,bottom:d,right:u};this.setState(c),this.updateCrop(c)}o!==e.aspectRatio&&this.updateCrop(this.getDefaultState(e),e,this.applyCrop),e.imageEditorHasChanges||!(0,x.default)(e.crop,M.defaultCrop)||(0,x.default)(r,e.crop)||this.updateCrop(this.getDefaultState(e),e,this.applyComputedCrop)}},{key:"updateCrop",value:function(e,t,n){t=t||this.props;var o=t.aspectRatio;if(o===R.AspectRatios.FREE)return void this.setState(e,n);var r=t.degrees%180!==0,i=(0,a.default)({},this.state,e),s=i.right-i.left,l=i.bottom-i.top,d=void 0,u=void 0,c=s,p=l;switch(o){case R.AspectRatios.ORIGINAL:if(!this.props.originalAspectRatio)return void this.setState(e,n);var f=this.props.originalAspectRatio,m=f.width,h=f.height;d=r?h:m,u=r?m:h;break;case R.AspectRatios.ASPECT_1X1:d=1,u=1;break;case R.AspectRatios.ASPECT_16X9:d=r?9:16,u=r?16:9;break;case R.AspectRatios.ASPECT_4X3:d=r?3:4,u=r?4:3;break;case R.AspectRatios.ASPECT_3X2:d=r?2:3,u=r?3:2}var g=Math.min(s/d,l/u);c=d*g,p=u*g,e.hasOwnProperty("top")?e.top=i.bottom-p:e.hasOwnProperty("bottom")&&(e.bottom=i.top+p),e.hasOwnProperty("left")?e.left=i.right-c:e.hasOwnProperty("right")&&(e.right=i.left+c),this.setState(e,n)}},{key:"onTopLeftDrag",value:function(e,t){var n=this.state,o=n.right,r=n.bottom,i=this.props.minCropSize,s=t,a=e;o-a<=i.width&&(a=o-i.width),r-s<=i.height&&(s=r-i.height),this.updateCrop({top:s,left:a})}},{key:"onTopRightDrag",value:function(e,t){var n=this.state,o=n.left,r=n.bottom,i=this.props.minCropSize,s=t,a=e;a-o<=i.width&&(a=o+i.width),r-s<=i.height&&(s=r-i.height),this.updateCrop({top:s,right:a})}},{key:"onBottomRightDrag",value:function(e,t){var n=this.state,o=n.left,r=n.top,i=this.props.minCropSize,s=t,a=e;a-o<=i.width&&(a=o+i.width),s-r<=i.height&&(s=r+i.height),this.updateCrop({bottom:s,right:a})}},{key:"onBottomLeftDrag",value:function(e,t){var n=this.state,o=n.right,r=n.top,i=this.props.minCropSize,s=t,a=e;o-a<=i.width&&(a=o-i.width),s-r<=i.height&&(s=r+i.height),this.updateCrop({bottom:s,left:a})}},{key:"onBorderDrag",value:function(e,t){var n=this.state,o=n.top,r=n.left,i=n.right,s=n.bottom,a=i-r,l=s-o;this.setState({top:t,left:e,bottom:t+l,right:e+a})}},{key:"getCropBounds",value:function(){var e=this.state,t=e.top,n=e.left,o=e.right,r=e.bottom,i=this.props.bounds,s=i.topBound,a=i.leftBound,l=i.rightBound,d=i.bottomBound,u=t-s,c=n-a,p=o-n,f=r-t,m=l-a,h=d-s,g=this.props.degrees%180!==0;if(this.props.originalAspectRatio){var y=this.props.originalAspectRatio,v=y.width,b=y.height,_=g?b:v,x=g?v:b,C=x/_;h=m*C}return[u/h,c/m,p/m,f/h]}},{key:"applyCrop",value:function(){var e;(e=this.props).imageEditorCrop.apply(e,(0,i.default)(this.getCropBounds()))}},{key:"applyComputedCrop",value:function(){var e;(e=this.props).imageEditorComputedCrop.apply(e,(0,i.default)(this.getCropBounds()))}},{key:"render",value:function(){var e=this.state,t=e.top,n=e.left,o=e.right,r=e.bottom,i=o-n,s=r-t,a="image-editor__crop-handle",l=this.props.bounds,d=l.topBound,u=l.leftBound,c=l.rightBound,p=l.bottomBound;return j.default.createElement("div",null,j.default.createElement("div",{className:"image-editor__crop-background",style:{top:d+"px",left:n+"px",width:i+"px",height:Math.max(0,t-d)+"px"}}),j.default.createElement("div",{className:"image-editor__crop-background",style:{top:d+"px",left:u+"px",width:Math.max(0,n-u)+"px",height:Math.max(0,p-d)+"px"}}),j.default.createElement("div",{className:"image-editor__crop-background",style:{top:r+"px",left:n+"px",width:i+"px",height:Math.max(0,p-r)+"px"}}),j.default.createElement("div",{className:"image-editor__crop-background",style:{top:d+"px",left:o+"px",width:Math.max(0,c-o)+"px",height:Math.max(0,p-d)+"px"}}),j.default.createElement(I.default,{ref:"border",onDrag:this.onBorderDrag,onStop:this.applyCrop,x:n,y:t,width:i,height:s,bounds:{top:d,left:u,bottom:p,right:c},className:"image-editor__crop"}),j.default.createElement(I.default,{onDrag:this.onTopLeftDrag,onStop:this.applyCrop,x:n,y:t,controlled:!0,bounds:{bottom:r,right:o,top:d,left:u},ref:"topLeft",className:(0,P.default)(a,a+"-nwse")}),j.default.createElement(I.default,{onDrag:this.onTopRightDrag,onStop:this.applyCrop,y:t,x:o,controlled:!0,bounds:{bottom:r,left:n,top:d,right:c},ref:"topRight",className:(0,P.default)(a,a+"-nesw")}),j.default.createElement(I.default,{onDrag:this.onBottomRightDrag,onStop:this.applyCrop,y:r,x:o,controlled:!0,bounds:{top:t,left:n,bottom:p,right:c},ref:"bottomRight",className:(0,P.default)(a,a+"-nwse")}),j.default.createElement(I.default,{onDrag:this.onBottomLeftDrag,onStop:this.applyCrop,y:r,x:n,controlled:!0,bounds:{top:t,right:o,bottom:p,left:u},ref:"bottomLeft",className:(0,P.default)(a,a+"-nesw")}))}}]),t}(w.Component);L.propTypes={degrees:E.default.number,bounds:E.default.shape({topBound:E.default.number,leftBound:E.default.number,bottomBound:E.default.number,rightBound:E.default.number}),crop:E.default.shape({topRatio:E.default.number,leftRatio:E.default.number,widthRatio:E.default.number,heightRatio:E.default.number}),aspectRatio:E.default.string,imageEditorCrop:E.default.func,imageEditorComputedCrop:E.default.func,minCropSize:E.default.shape({width:E.default.number,height:E.default.number}),imageEditorHasChanges:E.default.bool},L.defaultProps={degrees:0,bounds:{topBound:0,leftBound:0,bottomBound:100,rightBound:100},imageEditorCrop:b.default,imageEditorComputedCrop:b.default,minCropSize:{width:50,height:50},imageEditorHasChanges:!1},t.default=(0,S.connect)(function(e){var t=(0,N.getImageEditorCropBounds)(e),n=(0,N.getImageEditorCrop)(e),o=(0,N.getImageEditorAspectRatio)(e),r=(0,N.getImageEditorTransform)(e),i=r.degrees;return{bounds:t,crop:n,aspectRatio:o,degrees:i,originalAspectRatio:(0,A.default)(e),imageEditorHasChanges:(0,N.imageEditorHasChanges)(e)}},{imageEditorCrop:D.imageEditorCrop,imageEditorComputedCrop:D.imageEditorComputedCrop})(L),e.exports=t.default},"./client/blocks/image-editor/image-editor-toolbar.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ImageEditorToolbar=void 0;var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=o(p),m=n("./node_modules/lodash/values.js"),h=o(m),g=n("./node_modules/lodash/noop.js"),y=o(g),v=n("./node_modules/prop-types/index.js"),b=o(v),_=n("./node_modules/react/react.js"),x=o(_),C=n("./node_modules/react-redux/es/index.js"),E=n("./node_modules/i18n-calypso/index.js"),w=n("./node_modules/gridicons/build/index.js"),j=o(w),S=n("./node_modules/classnames/index.js"),T=o(S),P=n("./client/components/popover/menu.jsx"),k=o(P),I=n("./client/components/popover/menu-item.jsx"),N=o(I),R=n("./client/state/ui/editor/image-editor/constants.js"),D=n("./client/state/ui/editor/image-editor/selectors.js"),M=n("./client/state/ui/editor/image-editor/actions.js"),O=n("./client/state/selectors/get-image-editor-is-greater-than-minimum-dimensions.js"),A=o(O),L=t.ImageEditorToolbar=function(e){function t(e){(0,a.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return n.state={showAspectPopover:!1},n.setAspectMenuContext=n.setAspectMenuContext.bind(n),n.onAspectOpen=n.onAspectOpen.bind(n),n.onAspectClose=n.onAspectClose.bind(n),n.rotate=n.rotate.bind(n),n.flip=n.flip.bind(n),n}return(0,f.default)(t,e),(0,d.default)(t,[{key:"rotate",value:function(){this.props.imageEditorRotateCounterclockwise()}},{key:"flip",value:function(){this.props.imageEditorFlip()}},{key:"onAspectOpen",value:function(e){e.preventDefault();var t=this.props,n=t.isAspectRatioDisabled,o=t.onShowNotice,r=t.translate;if(n){var i=r("To change the aspect ratio, the height and width must be bigger than {{strong}}%(width)dpx{{/strong}}.",{args:{width:R.MinimumImageDimensions.WIDTH,height:R.MinimumImageDimensions.HEIGHT},components:{strong:x.default.createElement("strong",null)}});return void o(i)}this.setState({showAspectPopover:!0})}},{key:"onAspectClose",value:function(e){this.setState({showAspectPopover:!1}),"string"==typeof e&&this.props.setImageEditorAspectRatio(e)}},{key:"setAspectMenuContext",value:function(e){this.setState({popoverContext:e})}},{key:"renderAspectMenu",value:function(){var e=this.state,t=e.popoverContext,n=e.showAspectPopover,o=this.props,r=o.translate,i=o.aspectRatio,s=o.allowedAspectRatios;if(t&&1!==s.length){var a=[{action:R.AspectRatios.FREE,label:r("Free")},{action:R.AspectRatios.ORIGINAL,label:r("Original")},{action:R.AspectRatios.ASPECT_1X1,label:r("Square")},{action:R.AspectRatios.ASPECT_16X9,label:r("16:9")},{action:R.AspectRatios.ASPECT_4X3,label:r("4:3")},{action:R.AspectRatios.ASPECT_3X2,label:r("3:2")}];return x.default.createElement(k.default,{isVisible:n,onClose:this.onAspectClose,position:"top",context:t,className:"image-editor__toolbar-popover popover is-dialog-visible"},a.map(function(e){return s.indexOf(e.action)!==-1?x.default.createElement(N.default,{key:"image-editor-toolbar-aspect-"+e.action,action:e.action},i===e.action&&x.default.createElement(j.default,{icon:"checkmark",size:12}),e.label):null}))}}},{key:"renderButtons",value:function(){var e=this.props,t=e.translate,n=e.allowedAspectRatios,o=e.isAspectRatioDisabled,r=[{tool:"rotate",icon:"rotate",text:t("Rotate"),onClick:this.rotate},1===n.length?null:{tool:"aspect",ref:this.setAspectMenuContext,icon:"crop",text:t("Crop"),onClick:this.onAspectOpen,disabled:o},{tool:"flip-vertical",icon:"flip-vertical",text:t("Flip"),onClick:this.flip}];return r.map(function(e){var t=(0,T.default)("image-editor__toolbar-button",{"is-disabled":e&&e.disabled});return e?x.default.createElement("button",{key:"image-editor-toolbar-"+e.tool,ref:e.ref,className:t,onClick:e.onClick},x.default.createElement(j.default,{icon:e.icon}),x.default.createElement("span",null,e.text)):null})}},{key:"render",value:function(){return x.default.createElement("div",{className:"image-editor__toolbar"},this.renderButtons(),this.renderAspectMenu())}}]),t}(_.Component);L.propTypes={aspectRatio:b.default.string,imageEditorRotateCounterclockwise:b.default.func,imageEditorFlip:b.default.func,setImageEditorAspectRatio:b.default.func,allowedAspectRatios:b.default.array,onShowNotice:b.default.func,isAspectRatioDisabled:b.default.bool},L.defaultProps={imageEditorRotateCounterclockwise:y.default,imageEditorFlip:y.default,setImageEditorAspectRatio:y.default,allowedAspectRatios:(0,h.default)(R.AspectRatios),onShowNotice:y.default,isAspectRatioDisabled:!1},t.default=(0,C.connect)(function(e){var t=(0,D.getImageEditorAspectRatio)(e),n=(0,A.default)(e);return{aspectRatio:t,isAspectRatioDisabled:!n}},{imageEditorRotateCounterclockwise:M.imageEditorRotateCounterclockwise,imageEditorFlip:M.imageEditorFlip,setImageEditorAspectRatio:M.setImageEditorAspectRatio})((0,E.localize)(L))},"./client/blocks/image-editor/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/helpers/extends.js"),i=o(r),s=n("./node_modules/lodash/partial.js"),a=o(s),l=n("./node_modules/lodash/isEqual.js"),d=o(l),u=n("./node_modules/lodash/noop.js"),c=o(u),p=n("./node_modules/react/react.js"),f=o(p),m=n("./node_modules/react-redux/es/index.js"),h=n("./node_modules/redux/lib/index.js"),g=n("./node_modules/path-browserify/index.js"),y=o(g),v=n("./node_modules/i18n-calypso/index.js"),b=n("./node_modules/classnames/index.js"),_=o(b),x=n("./client/components/close-on-escape/index.jsx"),C=o(x),E=n("./client/components/notice/index.jsx"),w=o(E),j=n("./client/blocks/image-editor/image-editor-canvas.jsx"),S=o(j),T=n("./client/blocks/image-editor/image-editor-toolbar.jsx"),P=o(T),k=n("./client/blocks/image-editor/image-editor-buttons.jsx"),I=o(k),N=n("./client/lib/media/utils.js"),R=o(N),D=n("./client/state/ui/editor/image-editor/actions.js"),M=n("./client/state/ui/editor/image-editor/selectors.js"),O=n("./client/state/ui/selectors.js"),A=n("./client/state/sites/selectors.js"),L=n("./client/components/data/query-sites/index.jsx"),F=o(L),B=n("./client/state/ui/editor/image-editor/constants.js"),z=n("./client/blocks/image-editor/utils.js"),U=f.default.createClass({displayName:"ImageEditor",propTypes:{media:p.PropTypes.object,siteId:p.PropTypes.number,onDone:p.PropTypes.func,onCancel:p.PropTypes.func,onReset:p.PropTypes.func,className:p.PropTypes.string,defaultAspectRatio:p.PropTypes.oneOf(B.AspectRatiosValues),allowedAspectRatios:p.PropTypes.arrayOf(p.PropTypes.oneOf(B.AspectRatiosValues)),site:p.PropTypes.object,fileName:p.PropTypes.string,setImageEditorFileInfo:p.PropTypes.func,setImageEditorDefaultAspectRatio:p.PropTypes.func,translate:p.PropTypes.func,isImageLoaded:p.PropTypes.bool},getDefaultProps:function(){return{media:null,onDone:c.default,onCancel:null,onReset:c.default,isImageLoaded:!1,defaultAspectRatio:B.AspectRatios.FREE,allowedAspectRatios:B.AspectRatiosValues,setImageEditorDefaultAspectRatio:c.default}},getInitialState:function(){return{noticeText:null,noticeStatus:"is-info"}},componentWillReceiveProps:function(e){var t=this.props.media;e.media&&!(0,d.default)(e.media,t)&&(this.props.resetAllImageEditorState(),this.updateFileInfo(e.media),this.setDefaultAspectRatio())},componentDidMount:function(){this.updateFileInfo(this.props.media),this.setDefaultAspectRatio()},setDefaultAspectRatio:function(){var e=this.props,t=e.defaultAspectRatio,n=e.allowedAspectRatios;this.props.setImageEditorDefaultAspectRatio((0,z.getDefaultAspectRatio)(t,n))},updateFileInfo:function(e){var t=this.props.site,n=void 0,o="default",r="image/png",i="default";e&&(n=e.src||R.default.url(e,{photon:t&&!t.is_private}),o=e.file||y.default.basename(n),r=R.default.getMimeType(e)||r,i=e.title||i),this.props.resetImageEditorState(),this.props.setImageEditorFileInfo(n,o,r,i)},convertBlobToImage:function(e){var t=this.props.onDone,n=document.createElement("img"),o=URL.createObjectURL(e),r=this.getImageEditorProps();n.onload=function(){URL.revokeObjectURL(o),t(null,e,(0,i.default)({},r,{width:n.width,height:n.height}))},n.onerror=function(){t(null,e,r)},n.src=o},onDone:function e(){var t=this.props,n=t.isImageLoaded,e=t.onDone;if(!n)return void e(new Error("Image not loaded yet."),null,this.getImageEditorProps());var o=this.refs.editCanvas.getWrappedInstance();o.toBlob(this.convertBlobToImage)},onCancel:function(){this.props.onCancel(this.getImageEditorProps())},onReset:function(){this.props.resetImageEditorState(),this.props.onReset(this.getImageEditorProps())},getImageEditorProps:function(){var e=this.props,t=e.src,n=e.fileName,o=e.media,r=e.mimeType,i=e.title,s=e.site,a={src:t,fileName:n,mimeType:r,title:i,site:s,resetAllImageEditorState:this.props.resetAllImageEditorState};return o&&o.ID&&(a.ID=o.ID),a},showNotice:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"is-info";this.setState({noticeText:e,noticeStatus:t})},clearNoticeState:function(){this.setState({noticeText:null,noticeStatus:"is-info"})},renderNotice:function(){if(!this.state.noticeText)return null;var e="is-info"===this.state.noticeStatus;return f.default.createElement(w.default,{status:this.state.noticeStatus,showDismiss:e,text:this.state.noticeText,isCompact:!1,onDismissClick:this.clearNoticeState,className:"image-editor__notice"})},onLoadCanvasError:function(){var e=this.props.translate;this.showNotice(e("Sorry, there was a problem loading the image. Please close this editor and try selecting the image again."),"is-error")},render:function(){var e=this.props,t=e.className,n=e.siteId,o=e.allowedAspectRatios,r=this.state.noticeText,i=(0,_.default)("image-editor",t);return f.default.createElement("div",{className:i},r&&this.renderNotice(),f.default.createElement(C.default,{onEscape:this.onCancel}),f.default.createElement(F.default,{siteId:n}),f.default.createElement("figure",null,f.default.createElement("div",{className:"image-editor__content"},f.default.createElement(S.default,{ref:"editCanvas",onLoadError:this.onLoadCanvasError}),f.default.createElement(P.default,{onShowNotice:this.showNotice,allowedAspectRatios:o}),f.default.createElement(I.default,{onCancel:this.props.onCancel&&this.onCancel,onDone:this.onDone,onReset:this.onReset,doneButtonText:this.props.doneButtonText}))))}});t.default=(0,m.connect)(function(e,t){var n=t.siteId;return n||(n=(0,O.getSelectedSiteId)(e)),(0,i.default)({},(0,M.getImageEditorFileInfo)(e),{site:(0,A.getSite)(e,n),isImageLoaded:(0,M.isImageEditorImageLoaded)(e)})},function(e,t){var n=(0,z.getDefaultAspectRatio)(t.defaultAspectRatio,t.allowedAspectRatios),o={aspectRatio:n};return(0,h.bindActionCreators)({setImageEditorFileInfo:D.setImageEditorFileInfo,setImageEditorDefaultAspectRatio:D.setImageEditorDefaultAspectRatio,resetImageEditorState:(0,a.default)(D.resetImageEditorState,o),resetAllImageEditorState:(0,a.default)(D.resetAllImageEditorState,o)},e)})((0,v.localize)(U)),e.exports=t.default},"./client/blocks/image-editor/utils.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d.AspectRatiosValues;return(0,l.default)(t,e)===-1&&(e=(0,s.default)(t,"0",d.AspectRatiosValues.FREE)),(0,l.default)(d.AspectRatiosValues,e)===-1?r(e):e}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/lodash/get.js"),s=o(i),a=n("./node_modules/lodash/indexOf.js"),l=o(a);t.getDefaultAspectRatio=r;var d=n("./client/state/ui/editor/image-editor/constants.js")},"./client/blocks/plan-storage/bar.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=o(p),m=n("./node_modules/prop-types/index.js"),h=o(m),g=n("./node_modules/react/react.js"),y=o(g),v=n("./node_modules/i18n-calypso/index.js"),b=n("./node_modules/classnames/index.js"),_=o(b),x=n("./node_modules/filesize/lib/filesize.js"),C=o(x),E=n("./client/components/progress-bar/index.jsx"),w=o(E),j=n("./client/lib/plans/constants.js"),S=80,T=60,P=function(e){function t(){return(0,a.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.mediaStorage,o=e.sitePlanSlug,r=e.siteSlug,i=e.translate;if(o===j.PLAN_BUSINESS)return null;if(!n||n.max_storage_bytes===-1)return null;var s=Math.min(Math.round(n.storage_used_bytes/n.max_storage_bytes*1e3)/10,100),a=(0,_.default)(t,"plan-storage__bar",{"is-alert":s>S,"is-warn":s>T&&s<=S}),l=(0,C.default)(n.max_storage_bytes);return y.default.createElement("div",{className:a},y.default.createElement(w.default,{value:s,total:100,compact:!0}),y.default.createElement("span",{className:"plan-storage__storage-label"},i("%(percent)f%% of %(max)s used",{args:{percent:s,max:l}})),y.default.createElement("a",{className:"plan-storage__storage-link",href:"/plans/"+r},i("Upgrade")),this.props.children)}}]),t}(g.Component);P.propTypes={className:h.default.string,mediaStorage:h.default.object,siteSlug:h.default.string.isRequired,sitePlanSlug:h.default.string.isRequired},P.defaultProps={siteSlug:""},t.default=(0,v.localize)(P),e.exports=t.default},"./client/blocks/plan-storage/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=o(p),m=n("./node_modules/classnames/index.js"),h=o(m),g=n("./node_modules/react/react.js"),y=o(g),v=n("./node_modules/react-redux/es/index.js"),b=n("./client/components/data/query-media-storage/index.jsx"),_=o(b),x=n("./client/state/sites/media-storage/selectors.js"),C=n("./client/state/sites/selectors.js"),E=n("./client/lib/plans/constants.js"),w=n("./client/blocks/plan-storage/bar.jsx"),j=o(w),S=function(e){function t(){return(0,a.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.jetpackSite,o=e.siteId,r=e.sitePlanSlug,i=e.siteSlug;return n||!r?null:r===E.PLAN_BUSINESS?null:y.default.createElement("div",{className:(0,h.default)(t,"plan-storage")
},y.default.createElement(_.default,{siteId:o}),y.default.createElement(j.default,{siteSlug:i,sitePlanSlug:r,mediaStorage:this.props.mediaStorage},this.props.children))}}]),t}(g.Component);S.propTypes={className:g.PropTypes.string,mediaStorage:g.PropTypes.object,siteId:g.PropTypes.number,sitePlanSlug:g.PropTypes.string,siteSlug:g.PropTypes.string},t.default=(0,v.connect)(function(e,t){var n=t.siteId;return{mediaStorage:(0,x.getMediaStorage)(e,n),jetpackSite:(0,C.isJetpackSite)(e,n),sitePlanSlug:(0,C.getSitePlanSlug)(e,n),siteSlug:(0,C.getSiteSlug)(e,n)}})(S),e.exports=t.default},"./client/blocks/post-status/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=e.translate,n=e.post,o=e.showAll,r=e.showIcon,i=void 0===r||r;if(!n)return null;var s=n.sticky,a=n.status,d=void 0,u=void 0,p=void 0;if(s?(d=t("Sticky"),u="is-sticky",p="bookmark-outline"):"pending"===a?(d=t("Pending Review"),u="is-pending",p="aside"):"future"===a?(d=t("Scheduled"),u="is-scheduled",p="calendar"):"trash"===a?(d=t("Trashed"),u="is-trash",p="trash"):o&&"draft"===a?(d=t("Draft"),u="is-draft",p="aside"):o&&"publish"===a&&(d=t("Published"),u="is-published",p="aside"),!d)return null;var f=(0,c.default)("post-status",u);return l.default.createElement("span",{className:f},i&&l.default.createElement(m.default,{icon:p,size:18,className:"post-status__icon"}),l.default.createElement("span",{className:"post-status__text"},d))}Object.defineProperty(t,"__esModule",{value:!0}),t.PostStatus=r;var i=n("./node_modules/prop-types/index.js"),s=o(i),a=n("./node_modules/react/react.js"),l=o(a),d=n("./node_modules/react-redux/es/index.js"),u=n("./node_modules/classnames/index.js"),c=o(u),p=n("./node_modules/i18n-calypso/index.js"),f=n("./node_modules/gridicons/build/index.js"),m=o(f),h=n("./client/state/posts/selectors.js");r.displayName="PostStatus",r.propTypes={globalId:s.default.string,translate:s.default.func,post:s.default.object,showAll:s.default.bool,showIcon:s.default.bool},t.default=(0,d.connect)(function(e,t){var n=t.globalId;return{post:(0,h.getNormalizedPost)(e,n)}})((0,p.localize)(r))},"./client/blocks/term-form-dialog/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/keys.js"),i=o(r),s=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/createClass.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),f=o(p),m=n("./node_modules/babel-runtime/helpers/inherits.js"),h=o(m),g=n("./node_modules/lodash/assign.js"),y=o(g),v=n("./node_modules/lodash/noop.js"),b=o(v),_=n("./node_modules/lodash/find.js"),x=o(_),C=n("./node_modules/lodash/get.js"),E=o(C),w=n("./node_modules/prop-types/index.js"),j=o(w),S=n("./node_modules/react/react.js"),T=o(S),P=n("./node_modules/react-redux/es/index.js"),k=n("./node_modules/i18n-calypso/index.js"),I=n("./client/components/dialog/index.jsx"),N=o(I),R=n("./client/blocks/term-tree-selector/terms.jsx"),D=o(R),M=n("./client/components/forms/form-input-validation/index.jsx"),O=o(M),A=n("./client/components/forms/form-textarea/index.jsx"),L=o(A),F=n("./client/components/forms/form-text-input/index.jsx"),B=o(F),z=n("./client/components/forms/form-section-heading/index.jsx"),U=o(z),H=n("./client/components/forms/form-checkbox/index.jsx"),W=o(H),V=n("./client/components/forms/form-label/index.jsx"),q=o(V),G=n("./client/components/forms/form-legend/index.jsx"),K=o(G),$=n("./client/components/forms/form-fieldset/index.jsx"),Y=o($),J=n("./client/lib/viewport/index.js"),Z=o(J),X=n("./client/state/ui/selectors.js"),Q=n("./client/state/post-types/taxonomies/selectors.js"),ee=n("./client/state/terms/selectors.js"),te=n("./client/state/terms/actions.js"),ne=n("./client/state/analytics/actions.js"),oe=function(e){function t(e){(0,d.default)(this,t);var n=(0,f.default)(this,(t.__proto__||(0,a.default)(t)).call(this,e));return n.onSearch=function(e){n.setState({searchTerm:e})},n.closeDialog=function(){n.state.saving||n.props.onClose()},n.onParentChange=function(e){n.setState({selectedParent:[e.ID],isTopLevel:!1},n.isValid)},n.onTopLevelChange=function(){n.setState({isTopLevel:!n.state.isTopLevel,selectedParent:[]},n.isValid)},n.onNameChange=function(e){n.setState({name:e.target.value})},n.onDescriptionChange=function(e){n.setState({description:e.target.value})},n.validateInput=function(e){13===e.keyCode?n.saveTerm():n.isValid()},n.saveTerm=function(){var e=n.getFormValues();if(n.isValid()&&!n.state.saving){n.setState({saving:!0});var t=n.props,o=t.siteId,r=t.taxonomy,i={mc:"edited_"+r,ga:"Edited "+r},s=!n.props.term,a=s?n.props.addTerm(o,r,e):n.props.updateTerm(o,r,n.props.term.ID,n.props.term.slug,e);s&&(i.mc="created_"+r,i.ga="Created New "+r),n.props.bumpStat("taxonomy_manager",i.mc),n.props.recordGoogleEvent("Taxonomy Manager",i.ga),a.then(function(e){n.setState({saving:!1}),n.props.onSuccess(e),n.closeDialog()})}},n.state=n.constructor.initialState,n}return(0,h.default)(t,e),(0,c.default)(t,[{key:"init",value:function(e){if(!e.term)return e.searchTerm&&e.searchTerm.trim().length?void this.setState((0,y.default)({},this.constructor.initialState,{name:e.searchTerm}),this.isValid):void this.setState(this.constructor.initialState);var t=e.term,n=t.name,o=t.description,r=t.parent,i=void 0!==r&&r;this.setState((0,y.default)({},this.constructor.initialState,{name:n,description:o,isTopLevel:!i,selectedParent:i?[i]:[]}))}},{key:"componentWillReceiveProps",value:function(e){(this.props.term!==e.term||this.props.showDialog!==e.showDialog&&e.showDialog)&&this.init(e)}},{key:"componentDidMount",value:function(){this.init(this.props)}},{key:"getFormValues",value:function(){var e=this.state.name.trim(),t={name:e};if(this.props.isHierarchical&&(t.parent=this.state.selectedParent.length?this.state.selectedParent[0]:0),this.props.showDescriptionInput){var n=this.state.description.trim();t.description=n}return t}},{key:"isValid",value:function e(){var t=this,n={},o=this.getFormValues();o.name.length||(n.name=this.props.translate("Name required",{textOnly:!0}));var r=o.name.toLowerCase(),s=(0,x.default)(this.props.terms,function(e){return e.name.toLowerCase()===r&&(!t.props.term||e.ID!==t.props.term.ID)});s&&(n.name=this.props.translate("Name already exists",{context:"Terms: Add term error message - duplicate term name exists",textOnly:!0})),!this.props.isHierarchical||this.state.isTopLevel||o.parent||(n.parent=this.props.translate('Parent item required when "Top level" is unchecked',{context:"Terms: Add term error message",textOnly:!0}));var e=!(0,i.default)(n).length;return this.setState({errors:n,isValid:e}),e}},{key:"renderParentSelector",value:function(){var e=this.props,t=e.labels,n=e.siteId,o=e.taxonomy,r=e.translate,i=e.terms,s=this.state,a=s.searchTerm,l=s.selectedParent,d={};a&&a.length&&(d.search=a);var u=(0,E.default)(this.props.term,"ID"),c=!!this.state.errors.parent;return u&&i&&1===i.length?null:T.default.createElement(Y.default,null,T.default.createElement(K.default,null,t.parent_item),T.default.createElement(q.default,null,T.default.createElement(W.default,{ref:"topLevel",checked:this.state.isTopLevel,onChange:this.onTopLevelChange}),T.default.createElement("span",null,r("Top level",{context:"Terms: New term being created is top level"}))),T.default.createElement(D.default,{siteId:n,taxonomy:o,isError:c,onSearch:this.onSearch,onChange:this.onParentChange,query:d,selected:l,hideTermAndChildren:u}),c&&T.default.createElement(O.default,{isError:!0,text:this.state.errors.parent}))}},{key:"render",value:function(){var e=this.props,t=e.isHierarchical,n=e.labels,o=e.term,r=e.translate,i=e.showDescriptionInput,s=e.showDialog,a=this.state,l=a.name,d=a.description,u=!o,c=r(u?"Add":"Update"),p=[{action:"cancel",label:r("Cancel")},{action:u?"add":"update",label:this.state.saving?r("Saving…"):c,isPrimary:!0,disabled:!this.state.isValid||this.state.saving,onClick:this.saveTerm}],f=!!this.state.errors.name;return T.default.createElement(N.default,{autoFocus:!1,isVisible:s,buttons:p,onClose:this.closeDialog,additionalClassNames:"term-form-dialog"},T.default.createElement(U.default,null,u?n.add_new_item:n.edit_item),T.default.createElement(Y.default,null,T.default.createElement(B.default,{autoFocus:s&&!Z.default.isMobile(),placeholder:n.new_item_name,ref:"termName",isError:f,onKeyUp:this.validateInput,value:l,onChange:this.onNameChange}),f&&T.default.createElement(O.default,{isError:!0,text:this.state.errors.name})),i&&T.default.createElement(Y.default,null,T.default.createElement(K.default,null,r("Description",{context:"Terms: Term description label"})),T.default.createElement(L.default,{ref:"termDescription",onKeyUp:this.validateInput,value:d,onChange:this.onDescriptionChange})),t&&this.renderParentSelector())}}]),t}(S.Component);oe.initialState={description:"",name:"",selectedParent:[],isTopLevel:!0,isValid:!1,errors:{},saving:!1},oe.propTypes={labels:j.default.object,onClose:j.default.func,onSuccess:j.default.func,postType:j.default.string,searchTerm:j.default.string,showDescriptionInput:j.default.bool,showDialog:j.default.bool,siteId:j.default.number,taxonomy:j.default.string,term:j.default.object,terms:j.default.array,translate:j.default.func,recordGoogleEvent:j.default.func,bumpStat:j.default.func},oe.defaultProps={onClose:b.default,onSuccess:b.default,showDescriptionInput:!1,showDialog:!1},t.default=(0,P.connect)(function(e,t){var n=t.taxonomy,o=t.postType,r=(0,X.getSelectedSiteId)(e),i=(0,Q.getPostTypeTaxonomy)(e,r,o,n),s=(0,E.default)(i,"labels",{}),a=(0,E.default)(i,"hierarchical",!1);return{terms:(0,ee.getTerms)(e,r,n),isHierarchical:a,labels:s,siteId:r}},{addTerm:te.addTerm,updateTerm:te.updateTerm,recordGoogleEvent:ne.recordGoogleEvent,bumpStat:ne.bumpStat})((0,k.localize)(oe)),e.exports=t.default},"./client/blocks/term-tree-selector/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/react/react.js"),i=o(r),s=n("./node_modules/classnames/index.js"),a=o(s),l=n("./client/blocks/term-tree-selector/terms.jsx"),d=o(l);t.default=i.default.createClass({displayName:"TermTreeSelector",propTypes:{multiple:r.PropTypes.bool,className:r.PropTypes.string,onChange:r.PropTypes.func.isRequired,selected:r.PropTypes.array,createLink:r.PropTypes.string,analyticsPrefix:r.PropTypes.string,taxonomy:r.PropTypes.string,height:r.PropTypes.number,compact:r.PropTypes.bool},getDefaultProps:function(){return{analyticsPrefix:"Category Selector",selected:[],taxonomy:"category",onChange:function(){},height:300}},getInitialState:function(){return{search:""}},onSearch:function(e){e!==this.state.search&&this.setState({search:e})},componentWillReceiveProps:function(e){e.taxonomy!==this.props.taxonomy&&this.setState({search:""})},render:function(){var e=this.props,t=e.className,n=e.taxonomy,o=e.onChange,r=e.selected,s=e.createLink,l=e.multiple,u=e.height,c=e.compact,p=(0,a.default)(t),f=this.state.search,m={};return f&&f.length&&(m.search=f),i.default.createElement("div",{className:p,ref:"wrapper"},i.default.createElement(d.default,{taxonomy:n,onSearch:this.onSearch,onChange:o,query:m,selected:r,createLink:s,multiple:l,height:u,compact:c}))}}),e.exports=t.default},"./client/blocks/term-tree-selector/no-results.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/react/react.js"),i=o(r),s=n("./node_modules/react-pure-render/mixin.js"),a=o(s);t.default=i.default.createClass({displayName:"TermTreeSelectorNoResults",mixins:[a.default],propTypes:{createLink:r.PropTypes.string},render:function(){var e=this.props.createLink,t=void 0;return e&&(t=this.translate("You may want to {{a}}create a new item{{/a}}.",{context:"Term Selector: term search/listing results",comment:"This is used when no terms match the given search, or if there are no terms at all.",components:{a:i.default.createElement("a",{className:"create-link",href:e,target:"_blank",rel:"noopener noreferrer"})}})),i.default.createElement("span",{className:"is-empty-content"},this.translate("No results. Please try a different search.")," ",t)}}),e.exports=t.default},"./client/blocks/term-tree-selector/search.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/react/react.js"),i=o(r),s=n("./node_modules/gridicons/build/index.js"),a=o(s);t.default=i.default.createClass({displayName:"TermTreeSelectorSearch",propTypes:{searchTerm:r.PropTypes.string,onSearch:r.PropTypes.func.isRequired},render:function(){return i.default.createElement("div",{className:"term-tree-selector__search"},i.default.createElement(a.default,{icon:"search",size:18}),i.default.createElement("input",{type:"search",placeholder:this.translate("Search…",{textOnly:!0}),value:this.props.searchTerm,onChange:this.props.onSearch}))}}),e.exports=t.default},"./client/blocks/term-tree-selector/terms.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/helpers/extends.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/objectWithoutProperties.js"),a=o(s),l=n("./node_modules/lodash/reduce.js"),d=o(l),u=n("./node_modules/lodash/range.js"),c=o(u),p=n("./node_modules/lodash/memoize.js"),f=o(p),m=n("./node_modules/lodash/map.js"),h=o(m),g=n("./node_modules/lodash/filter.js"),y=o(g),v=n("./node_modules/lodash/isEqual.js"),b=o(v),_=n("./node_modules/lodash/includes.js"),x=o(_),C=n("./node_modules/lodash/difference.js"),E=o(C),w=n("./node_modules/lodash/debounce.js"),j=o(w),S=n("./node_modules/react/react.js"),T=o(S),P=n("./node_modules/react-redux/es/index.js"),k=n("./node_modules/classnames/index.js"),I=o(k),N=n("./node_modules/i18n-calypso/index.js"),R=n("./node_modules/react-virtualized/dist/commonjs/List/index.js"),D=o(R),M=n("./client/lib/analytics/index.js"),O=o(M),A=n("./client/blocks/term-tree-selector/no-results.jsx"),L=o(A),F=n("./client/blocks/term-tree-selector/search.jsx"),B=o(F),z=n("./client/lib/formatting/index.js"),U=n("./client/components/data/query-terms/index.jsx"),H=o(U),W=n("./client/state/ui/selectors.js"),V=n("./client/state/terms/selectors.js"),q=500,G=100,K=10,$=25,Y=T.default.createClass({displayName:"TermTreeSelectorList",propTypes:{hideTermAndChildren:S.PropTypes.number,terms:S.PropTypes.array,taxonomy:S.PropTypes.string,multiple:S.PropTypes.bool,selected:S.PropTypes.array,search:S.PropTypes.string,siteId:S.PropTypes.number,translate:S.PropTypes.func,defaultTermId:S.PropTypes.number,lastPage:S.PropTypes.number,onSearch:S.PropTypes.func,onChange:S.PropTypes.func,isError:S.PropTypes.bool,height:S.PropTypes.number},getInitialState:function(){return{searchTerm:"",requestedPages:[1]}},getDefaultProps:function(){return{analyticsPrefix:"Category Selector",searchThreshold:8,loading:!0,terms:[],onSearch:function(){},onChange:function(){},onNextPage:function(){},height:300}},componentWillMount:function(){var e=this;this.itemHeights={},this.hasPerformedSearch=!1,this.list=null,this.termIds=(0,h.default)(this.props.terms,"ID"),this.getTermChildren=(0,f.default)(this.getTermChildren),this.queueRecomputeRowHeights=(0,j.default)(this.recomputeRowHeights),this.debouncedSearch=(0,j.default)(function(){e.props.onSearch(e.state.searchTerm)},q)},componentWillReceiveProps:function(e){e.taxonomy!==this.props.taxonomy&&this.setState(this.getInitialState()),this.props.terms!==e.terms&&(this.getTermChildren.cache.clear(),this.termIds=(0,h.default)(e.terms,"ID"))},componentDidUpdate:function(e){var t=!(0,b.default)(e.selected,this.props.selected)||e.loading&&!this.props.loading||!e.terms&&this.props.terms;t&&this.list.forceUpdateGrid(),this.props.terms!==e.terms&&this.recomputeRowHeights()},recomputeRowHeights:function(){this.list&&(this.list.recomputeRowHeights(),this.isSmall()&&this.forceUpdate())},setSelectorRef:function(e){e&&this.setState({selectorRef:e})},getPageForIndex:function(e){var t=this.props,n=t.query,o=t.lastPage,r=n.number||G,i=Math.ceil(e/r);return Math.max(Math.min(i,o||1/0),1)},setRequestedPages:function(e){var t=e.startIndex,n=e.stopIndex,o=this.state.requestedPages,r=(0,E.default)((0,c.default)(this.getPageForIndex(t-K),this.getPageForIndex(n+K)+1),o);r.length&&this.setState({requestedPages:o.concat(r)})},setItemRef:function(e,t){if(t&&e){var n=this.itemHeights[e.ID]||$,o=t.clientHeight;this.itemHeights[e.ID]=o,n!==o&&this.queueRecomputeRowHeights()}},hasNoSearchResults:function(){return!this.props.loading&&this.props.terms&&!this.props.terms.length&&!!this.state.searchTerm.length},hasNoTerms:function(){return!this.props.loading&&this.props.terms&&!this.props.terms.length},getItem:function(e){if(this.props.terms)return this.props.terms[e]},isSmall:function(){return!(!this.props.terms||this.state.searchTerm)&&this.props.terms.length<this.props.searchThreshold},isRowLoaded:function(e){var t=e.index;return this.props.lastPage||!!this.getItem(t)},getTermChildren:function(e){var t=this.props.terms;return(0,y.default)(t,function(t){var n=t.parent;return n===e})},getItemHeight:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e?e.parent&&!n&&(0,x.default)(this.termIds,e.parent)?0:e.ID===this.props.hideTermAndChildren?0:this.itemHeights[e.ID]?this.itemHeights[e.ID]:(0,d.default)(this.getTermChildren(e.ID),function(e,n){return e+t.getItemHeight(n,!0)},$):$},getRowHeight:function(e){var t=e.index;return this.getItemHeight(this.getItem(t))},getCompactContainerHeight:function(){var e=this;return(0,c.default)(0,this.getRowCount()).reduce(function(t,n){return t+e.getRowHeight({index:n})},0)},getResultsWidth:function(){var e=this.state.selectorRef;return e?e.clientWidth:0},getRowCount:function(){var e=0;return this.props.terms&&(e+=this.props.terms.length),!this.props.loading&&this.props.terms||(e+=1),e},onSearch:function(e){var t=e.target.value;this.state.searchTerm&&!t&&this.props.onSearch(""),t!==this.state.searchTerm&&(this.hasPerformedSearch||(this.hasPerformedSearch=!0,O.default.ga.recordEvent(this.props.analyticsPrefix,"Performed Term Search")),this.setState({searchTerm:t}),this.debouncedSearch())},setListRef:function(e){this.list=e},renderItem:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if((!e.parent||n||!(0,x.default)(this.termIds,e.parent))&&e.ID!==this.props.hideTermAndChildren){var o=function(){for(var n,o=arguments.length,r=Array(o),i=0;i<o;i++)r[i]=arguments[i];return(n=t.props).onChange.apply(n,[e].concat(r))},r=function(){for(var n=arguments.length,o=Array(n),r=0;r<n;r++)o[r]=arguments[r];return t.setItemRef.apply(t,[e].concat(o))},i=this.getTermChildren(e.ID),s=this.props,a=s.multiple,l=s.defaultTermId,d=s.translate,u=s.selected,c=e.ID,p=(0,z.decodeEntities)(e.name)||d("Untitled"),f=(0,x.default)(u,c),m=a?"checkbox":"radio",h=a&&f&&l&&1===u.length&&l===c,g=T.default.createElement("input",{type:m,value:c,onChange:o,disabled:h,checked:f});return T.default.createElement("div",{key:c,ref:r,className:"term-tree-selector__list-item"},T.default.createElement("label",null,g,T.default.createElement("span",{className:"term-tree-selector__label"},p)),i.length>0&&T.default.createElement("div",{className:"term-tree-selector__nested-list"},i.map(function(e){return t.renderItem(e,!0)})))}},renderNoResults:function(){if(this.hasNoSearchResults()||this.hasNoTerms())return T.default.createElement("div",{key:"no-results",className:"term-tree-selector__list-item is-empty"},(this.hasNoSearchResults()||!this.props.emptyMessage)&&T.default.createElement(L.default,{createLink:this.props.createLink}),this.hasNoTerms()&&this.props.emptyMessage)},renderRow:function(e){var t=e.index,n=this.getItem(t);return n?this.renderItem(n):T.default.createElement("div",{key:"placeholder",className:"term-tree-selector__list-item is-placeholder"},T.default.createElement("label",null,T.default.createElement("input",{type:this.props.multiple?"checkbox":"radio",disabled:!0,className:"term-tree-selector__input"}),T.default.createElement("span",{className:"term-tree-selector__label"},this.props.translate("Loading…"))))},cellRendererWrapper:function(e){var t=e.key,n=e.style,o=(0,a.default)(e,["key","style"]);return T.default.createElement("div",{key:t,style:n},this.renderRow(o))},render:function(){var e=this.getRowCount(),t=this.isSmall(),n=this.state.searchTerm.length,o=(n>0||!t)&&(this.props.terms||!this.props.terms&&n>0),r=this.props,s=r.className,a=r.isError,l=r.loading,d=r.siteId,u=r.taxonomy,c=r.query,p=r.height,f=(0,I.default)("term-tree-selector",s,{"is-loading":l,"is-small":t,"is-error":a,"is-compact":this.props.compact});return T.default.createElement("div",{ref:this.setSelectorRef,className:f},this.state.requestedPages.map(function(e){return T.default.createElement(H.default,{key:"query-"+e,siteId:d,taxonomy:u,query:(0,i.default)({},c,{page:e})})}),o&&T.default.createElement(B.default,{searchTerm:this.state.searchTerm,onSearch:this.onSearch}),T.default.createElement(D.default,{ref:this.setListRef,width:this.getResultsWidth(),height:t?this.getCompactContainerHeight():p,onRowsRendered:this.setRequestedPages,rowCount:e,estimatedRowSize:$,rowHeight:this.getRowHeight,rowRenderer:this.cellRendererWrapper,noRowsRenderer:this.renderNoResults,className:"term-tree-selector__results"}))}});t.default=(0,P.connect)(function(e,t){var n=(0,W.getSelectedSiteId)(e),o=t.taxonomy,r=t.query;return{loading:(0,V.isRequestingTermsForQueryIgnoringPage)(e,n,o,r),terms:(0,V.getTermsForQueryIgnoringPage)(e,n,o,r),lastPage:(0,V.getTermsLastPageForQuery)(e,n,o,r),siteId:n,query:r}})((0,N.localize)(Y)),e.exports=t.default},"./client/blocks/upload-image/constants.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.ALLOWED_FILE_EXTENSIONS=["jpg","jpeg","gif","png","bmp","tiff","ico"],t.ERROR_UNSUPPORTED_FILE="ERROR_UNSUPPORTED_FILE",t.ERROR_IMAGE_EDITOR_DONE="ERROR_IMAGE_EDITOR_DONE",t.ERROR_UPLOADING_IMAGE="ERROR_UPLOADING_IMAGE"},"./client/blocks/upload-image/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/helpers/typeof.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/extends.js"),a=o(s),l=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/createClass.js"),f=o(p),m=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),h=o(m),g=n("./node_modules/babel-runtime/helpers/inherits.js"),y=o(g),v=n("./node_modules/lodash/uniqueId.js"),b=o(v),_=n("./node_modules/lodash/noop.js"),x=o(_),C=n("./node_modules/prop-types/index.js"),E=o(C),w=n("./node_modules/react/react.js"),j=o(w),S=n("./node_modules/classnames/index.js"),T=o(S),P=n("./node_modules/react-redux/es/index.js"),k=n("./node_modules/i18n-calypso/index.js"),I=n("./node_modules/path-browserify/index.js"),N=o(I),R=n("./node_modules/gridicons/build/index.js"),D=o(R),M=n("./client/blocks/upload-image/constants.js"),O=n("./client/state/ui/editor/image-editor/constants.js"),A=n("./client/state/ui/selectors.js"),L=n("./client/state/selectors/get-media-item.js"),F=o(L),B=n("./client/components/dialog/index.jsx"),z=o(B),U=n("./client/components/file-picker/index.jsx"),H=o(U),W=n("./client/state/ui/editor/image-editor/actions.js"),V=n("./client/components/spinner/index.jsx"),q=o(V),G=n("./client/blocks/image-editor/index.jsx"),K=o(G),$=n("./client/components/drop-zone/index.jsx"),Y=o($),J=n("./client/lib/media/actions.js"),Z=o(J),X=n("./client/lib/media/store.js"),Q=o(X),ee=n("./client/lib/media/utils.js"),te=o(ee),ne=n("./client/lib/media/validation-store.js"),oe=o(ne),re=n("./client/lib/media/constants.js"),ie=n("./client/components/button/index.jsx"),se=o(ie),ae=function(e){function t(){var e,n,o,r;(0,c.default)(this,t);for(var i=arguments.length,s=Array(i),a=0;a<i;a++)s[a]=arguments[a];return n=o=(0,h.default)(this,(e=t.__proto__||(0,d.default)(t)).call.apply(e,[this].concat(s))),o.state={isUploading:!1,isEditingImage:!1,selectedImage:null,selectedImageName:"",editedImage:null,uploadedImage:null,errors:[]},o.receiveFiles=function(e){var t=o.props.translate,n=e[0].name,r=N.default.extname(n).toLowerCase().substring(1);if(M.ALLOWED_FILE_EXTENSIONS.indexOf(r)===-1)return void o.handleError(M.ERROR_UNSUPPORTED_FILE,t("File you are trying to upload is not supported. Please select a valid image file."));var i=URL.createObjectURL(e[0]);o.setState({isEditingImage:!0,selectedImage:i,selectedImageName:n})},o.handleError=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=o.props,r=n.onError,i=n.translate,s=t;e===M.ERROR_UPLOADING_IMAGE&&t.length&&t[0]===re.ValidationErrors.SERVER_ERROR&&(s=i("File could not be uploaded because an error occurred while uploading.")),r(e,s)},o.onImageEditorDone=function(e,t,n){return e?o.handleError(M.ERROR_IMAGE_EDITOR_DONE,e):(o.setState({editedImage:URL.createObjectURL(t),isUploading:!0}),Q.default.off("change",o.handleMediaStoreChange),oe.default.off("change",o.storeValidationErrors),o.props.onImageEditorDone(t,n),o.uploadImage(t,n),void o.hideImageEditor())},o.handleMediaStoreChange=function(){var e=o.props,t=e.siteId,n=e.onImageUploadDone,r=o.state.errors,i=Q.default.get(t,o.uploadingImageTransientId),s=i&&te.default.isItemBeingUploaded(i);if(!s){if(o.setState({isUploading:!1}),i&&i.URL)return o.uploadingImageTransientId=null,o.setState({uploadedImage:i}),Q.default.off("change",o.handleMediaStoreChange),void n(i);var a=r[o.uploadingImageTransientId]||[];o.handleError(M.ERROR_UPLOADING_IMAGE,a)}},o.storeValidationErrors=function(){o.setState({errors:oe.default.getAllErrors(o.props.siteId)})},o.hideImageEditor=function(){o.props.resetAllImageEditorState(),URL.revokeObjectURL(o.state.selectedImage),o.setState({isEditingImage:!1,selectedImage:null})},o.removeUploadedImage=function(){var e=o.props.onImageRemove,t=o.state.uploadedImage;o.revokeImageObjects(),o.setState({selectedImage:null,selectedImageName:"",editedImage:null,uploadedImage:null}),e(t)},o.revokeImageObjects=function(){var e=o.state,t=e.selectedImage,n=e.editedImage;t&&URL.revokeObjectURL(t),n&&URL.revokeObjectURL(n)},o.editUploadedImage=function(){var e=o.state.editedImage;o.setState({isEditingImage:!0,selectedImage:e})},r=n,(0,h.default)(o,r)}return(0,y.default)(t,e),(0,f.default)(t,[{key:"uploadImage",value:function(e,t){var n=this.props.siteId,o=t.fileName,r=t.mimeType,i=(0,b.default)("upload-image-");this.uploadingImageTransientId=i;var s={ID:i,fileName:o,fileContents:e,mimeType:r};oe.default.on("change",this.storeValidationErrors),Q.default.on("change",this.handleMediaStoreChange),Z.default.add(n,s),this.setState({isUploading:!0})}},{key:"renderImageEditor",value:function(){var e=this.props.defaultImage,t=this.state,n=t.isEditingImage,o=t.selectedImage,r=t.selectedImageName;if(!n)return null;var i=this.props,s=i.additionalImageEditorClasses,l=i.imageEditorProps,d=i.doneButtonText,u=(0,T.default)("upload-image-modal",s),c=e&&o===e.URL,p=c?e:{src:o,file:r};return j.default.createElement(z.default,{additionalClassNames:u,isVisible:!0},j.default.createElement(K.default,(0,a.default)({},l,{media:p,onDone:this.onImageEditorDone,onCancel:this.hideImageEditor,doneButtonText:d?d:"Done"})))}},{key:"componentWillMount",value:function(){var e=this.props.defaultImage;e&&this.setState({uploadedImage:e,selectedImage:e.URL,selectedImageName:N.default.basename(e.URL),editedImage:e.URL})}},{key:"componentWillUnmount",value:function(){this.revokeImageObjects(),Q.default.off("change",this.handleMediaStoreChange),oe.default.off("change",this.storeValidationErrors),this.uploadingImageTransientId=null}},{key:"renderImagePickerContent",value:function(){var e=this.props,t=e.imagePickerContent,n=e.addAnImageText,o=e.translate;return t?t:j.default.createElement(H.default,{accept:"image/*",onPick:this.receiveFiles},j.default.createElement("div",{className:"upload-image__image-picker"},j.default.createElement(D.default,{icon:"add-image",size:36}),j.default.createElement("span",null,n||o("Add an Image"))))}},{key:"renderUploadingContent",value:function(){var e=this.props.uploadingContent,t=this.state.editedImage;return e?e:j.default.createElement("div",{className:"upload-image__uploading-container"},j.default.createElement("img",{src:t,className:"upload-image__uploading-image"}),j.default.createElement(q.default,{className:"upload-image__spinner",size:20}))}},{key:"renderUploadingDoneContent",value:function(){var e=this.props.uploadingDoneContent,t=this.state.uploadedImage;return e?e:t&&t.URL?j.default.createElement("div",{className:"upload-image__uploading-done-container"},j.default.createElement("div",{className:"upload-image__uploaded-image-wrapper"},j.default.createElement("img",{src:t.URL,className:"upload-image__uploaded-image"}),j.default.createElement(se.default,{onClick:this.editUploadedImage,compact:!0,className:"upload-image__uploaded-image-edit-button"},j.default.createElement(D.default,{icon:"pencil",size:18,className:"upload-image__uploaded-image-edit-icon"}))),j.default.createElement(se.default,{onClick:this.removeUploadedImage,compact:!0,className:"upload-image__uploaded-image-remove"},j.default.createElement(D.default,{icon:"cross",size:24,className:"upload-image__uploaded-image-remove-icon"}))):null}},{key:"render",value:function(){var e=this.props,t=e.translate,n=e.additionalClasses,o=e.dragUploadText,r=this.state,i=r.isUploading,s=r.uploadedImage;return j.default.createElement("div",{className:(0,T.default)("upload-image",n)},this.renderImageEditor(),j.default.createElement("div",{className:(0,T.default)("upload-image__image-container",{"is-uploading":i,"is-uploaded":!i&&s})},j.default.createElement(Y.default,{textLabel:o?o:t("Drop to upload image"),onFilesDrop:this.receiveFiles}),!i&&!s&&this.renderImagePickerContent(),i&&this.renderUploadingContent(),!i&&s&&this.renderUploadingDoneContent()))}}]),t}(w.Component);ae.propTypes={siteId:E.default.number,imageEditorProps:E.default.object,additionalImageEditorClasses:E.default.string,additionalClasses:E.default.string,imagePickerContent:E.default.element,uploadingContent:E.default.element,uploadingDoneContent:E.default.element,doneButtonText:E.default.string,addAnImageText:E.default.string,dragUploadText:E.default.string,defaultImage:E.default.any,onError:E.default.func,onImageEditorDone:E.default.func,onImageUploadDone:E.default.func,onImageRemove:E.default.func},ae.defaultProps={imageEditorProps:{defaultAspectRatio:O.AspectRatios.ORIGINAL},backgroundContent:null,onImageEditorDone:x.default,onImageUploadDone:x.default,onImageRemove:x.default,onError:x.default,isUploading:!1},ae.uploadingImageTransientId=null,t.default=(0,P.connect)(function(e,t){var n=t.siteId,o=t.defaultImage;return n||(n=(0,A.getSelectedSiteId)(e)),o&&"object"===("undefined"==typeof o?"undefined":(0,i.default)(o))||(o=(0,F.default)(e,n,o)),{siteId:n,defaultImage:o}},{resetAllImageEditorState:W.resetAllImageEditorState})((0,k.localize)(ae)),e.exports=t.default},"./client/blocks/video-editor/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=o(p),m=n("./node_modules/lodash/noop.js"),h=o(m),g=n("./node_modules/lodash/get.js"),y=o(g),v=n("./node_modules/prop-types/index.js"),b=o(v),_=n("./node_modules/react/react.js"),x=o(_),C=n("./node_modules/react-redux/es/index.js"),E=n("./node_modules/i18n-calypso/index.js"),w=n("./node_modules/classnames/index.js"),j=o(w),S=n("./client/components/progress-bar/index.jsx"),T=o(S),P=n("./client/components/notice/index.jsx"),k=o(P),I=n("./client/post-editor/media-modal/detail/detail-preview-video.jsx"),N=o(I),R=n("./client/blocks/video-editor/video-editor-controls.jsx"),D=o(R),M=n("./client/state/ui/editor/video-editor/actions.js"),O=n("./client/state/selectors/get-poster-upload-progress.js"),A=o(O),L=n("./client/state/selectors/get-poster-url.js"),F=o(L),B=n("./client/state/selectors/should-show-video-editor-error.js"),z=o(B),U=function(e){
function t(){var e,n,o,r;(0,a.default)(this,t);for(var s=arguments.length,l=Array(s),d=0;d<s;d++)l[d]=arguments[d];return n=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.state={error:!1,isLoading:!0,isSelectingFrame:!1,pauseVideo:!1},o.selectFrame=function(){var e=o.state.isLoading;return e?void o.setState({error:!0}):void o.setState({error:!1,isSelectingFrame:!0,pauseVideo:!0})},o.updatePoster=function(e){if(o.state.isSelectingFrame){var t=o.props.media,n=(0,y.default)(t,"videopress_guid",null);n&&o.props.updatePoster(n,{atTime:e})}},o.setError=function(){o.setState({error:!0})},o.setIsLoading=function(){o.setState({isLoading:!1})},o.pauseVideo=function(){o.setState({error:!1,isSelectingFrame:!1,pauseVideo:!0})},o.uploadImage=function(e){if(e){var t=o.props.media,n=(0,y.default)(t,"videopress_guid",null);n&&o.props.updatePoster(n,{file:e})}},r=n,(0,c.default)(o,r)}return(0,f.default)(t,e),(0,d.default)(t,[{key:"componentWillReceiveProps",value:function(e){return e.shouldShowError&&!this.props.shouldShowError?void this.setState({error:!0,pauseVideo:!1}):void(this.props.posterUrl!==e.posterUrl&&this.props.onUpdatePoster(this.getVideoEditorProps(e.posterUrl)))}},{key:"getVideoEditorProps",value:function(e){var t=this.props.media,n={posterUrl:e};return t&&t.ID&&(n.ID=t.ID),n}},{key:"renderError",value:function(){var e=this.props,t=e.onCancel,n=e.translate;return x.default.createElement(k.default,{status:"is-error",showDismiss:!0,text:n("We are unable to edit this video."),isCompact:!1,onDismissClick:t})}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.media,o=e.onCancel,r=e.uploadProgress,i=e.translate,s=this.state,a=s.error,l=s.isLoading,d=s.isSelectingFrame,u=s.pauseVideo,c=(0,j.default)("video-editor",t);return x.default.createElement("div",{className:c},a&&this.renderError(),x.default.createElement("figure",null,x.default.createElement("div",{className:"video-editor__content"},x.default.createElement("div",{className:"video-editor__preview-wrapper"},x.default.createElement(N.default,{className:"video-editor__preview",isPlaying:!u,item:n,onPause:this.updatePoster,onScriptLoadError:this.setError,onVideoLoaded:this.setIsLoading})),r&&!a&&!d&&x.default.createElement(T.default,{className:"video-editor__progress-bar",isPulsing:!0,total:100,value:r}),x.default.createElement("span",{className:"video-editor__text"},i("Select a frame to use as the thumbnail image or upload your own.")),x.default.createElement(D.default,{isPosterUpdating:r&&!a,isVideoLoading:l,onCancel:o,onSelectFrame:this.selectFrame,onUploadImage:this.uploadImage,onUploadImageClick:this.pauseVideo}))))}}]),t}(_.Component);U.propTypes={className:b.default.string,media:b.default.object.isRequired,onCancel:b.default.func,onUpdatePoster:b.default.func,posterUrl:b.default.string,shouldShowError:b.default.bool,uploadProgress:b.default.number},U.defaultProps={onCancel:h.default,onUpdatePoster:h.default},t.default=(0,C.connect)(function(e){return{posterUrl:(0,F.default)(e),shouldShowError:(0,z.default)(e),uploadProgress:(0,A.default)(e)}},{updatePoster:M.updatePoster})((0,E.localize)(U)),e.exports=t.default},"./client/blocks/video-editor/video-editor-controls.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/lodash/noop.js"),i=o(r),s=n("./node_modules/prop-types/index.js"),a=o(s),l=n("./node_modules/react/react.js"),d=o(l),u=n("./node_modules/i18n-calypso/index.js"),c=n("./client/components/button/index.jsx"),p=o(c),f=n("./client/blocks/video-editor/video-editor-upload-button.js"),m=o(f),h=function(e){var t=e.isPosterUpdating,n=e.isVideoLoading,o=e.onCancel,r=e.onSelectFrame,i=e.onUploadImage,s=e.onUploadImageClick,a=e.translate;return d.default.createElement("div",{className:"video-editor__controls"},o&&d.default.createElement(p.default,{className:"video-editor__controls-button",disabled:t,onClick:o},a("Cancel")),d.default.createElement(m.default,{isPosterUpdating:t,onClick:s,onUploadImage:i},a("Upload Image")),d.default.createElement(p.default,{className:"video-editor__controls-button",disabled:n||t,onClick:r,primary:!0},a("Select Frame")))};h.propTypes={isPosterUpdating:a.default.bool,isVideoLoading:a.default.bool,onCancel:a.default.func,onSelectFrame:a.default.func,onUploadImage:a.default.func,onUploadImageClick:a.default.func},h.defaultProps={isPosterUpdating:!1,isVideoLoading:!0,onSelectFrame:i.default,onUploadImage:i.default,onUploadImageClick:i.default},t.default=(0,u.localize)(h),e.exports=t.default},"./client/blocks/video-editor/video-editor-upload-button.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=o(p),m=n("./node_modules/lodash/noop.js"),h=o(m),g=n("./node_modules/react/react.js"),y=o(g),v=n("./node_modules/prop-types/index.js"),b=o(v),_=n("./client/components/button/index.jsx"),x=o(_),C=n("./client/components/file-picker/index.jsx"),E=o(C),w=function(e){function t(){var e,n,o,r;(0,a.default)(this,t);for(var s=arguments.length,l=Array(s),d=0;d<s;d++)l[d]=arguments[d];return n=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.uploadImage=function(e){var t=e[0];t&&o.props.onUploadImage(t)},r=n,(0,c.default)(o,r)}return(0,f.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.isPosterUpdating,o=e.onClick;return y.default.createElement("form",{className:"video-editor__upload-form"},y.default.createElement(E.default,{accept:"image/*",onPick:this.uploadImage},y.default.createElement(x.default,{className:"video-editor__controls-button",disabled:n,onClick:o},t)))}}]),t}(g.Component);w.propTypes={isPosterUpdating:b.default.bool,onClick:b.default.func,onUploadImage:b.default.func},w.defaultProps={isPosterUpdating:!1,onClick:h.default,onUploadImage:h.default},t.default=w,e.exports=t.default},"./client/components/accordion/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=o(p),m=n("./node_modules/lodash/noop.js"),h=o(m),g=n("./node_modules/react/react.js"),y=o(g),v=n("./node_modules/prop-types/index.js"),b=o(v),_=n("./node_modules/classnames/index.js"),x=o(_),C=n("./node_modules/gridicons/build/index.js"),E=o(C),w=n("./client/components/accordion/status.jsx"),j=o(w),S=function(e){function t(e){(0,a.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments));return n.toggleExpanded=function(){n.setExpandedStatus(!n.state.isExpanded)},n.setExpandedStatus=function(e){n.setState({isExpanded:e}),n.props.onToggle(e)},n.state={isExpanded:e.initialExpanded},n}return(0,f.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.icon,o=e.title,r=e.subtitle,i=e.status,s=e.children,a=e.e2eTitle,l=(0,x.default)("accordion",t,{"is-expanded":this.state.isExpanded||this.props.forceExpand,"has-icon":!!n,"has-subtitle":!!r,"has-status":!!i});return y.default.createElement("div",{className:l,"data-e2e-title":a},y.default.createElement("header",{className:"accordion__header"},y.default.createElement("button",{type:"button",onClick:this.toggleExpanded,className:"accordion__toggle"},n&&y.default.createElement("span",{className:"accordion__icon"},n),y.default.createElement("span",{className:"accordion__title"},o),r&&y.default.createElement("span",{className:"accordion__subtitle"},r),y.default.createElement("span",{className:"accordion__arrow"},y.default.createElement(E.default,{icon:"dropdown"}))),i&&y.default.createElement(j.default,i)),y.default.createElement("div",{className:"accordion__content"},y.default.createElement("div",{className:"accordion__content-wrap"},s)))}}]),t}(g.Component);S.propTypes={initialExpanded:b.default.bool,forceExpand:b.default.bool,onToggle:b.default.func,title:b.default.string.isRequired,subtitle:b.default.string,status:b.default.object,icon:b.default.element,e2eTitle:b.default.string},S.defaultProps={initialExpanded:!1,forceExpand:!1,onToggle:h.default},t.default=S,e.exports=t.default},"./client/components/accordion/section.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=o(p),m=n("./node_modules/react/react.js"),h=o(m),g=n("./node_modules/classnames/index.js"),y=o(g),v=function(e){function t(){return(0,a.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){return h.default.createElement("section",{className:(0,y.default)("accordion__section",this.props.className)},this.props.children)}}]),t}(m.Component);t.default=v,e.exports=t.default},"./client/components/accordion/status.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=o(p),m=n("./node_modules/react/react.js"),h=o(m),g=n("./node_modules/prop-types/index.js"),y=o(g),v=n("./node_modules/classnames/index.js"),b=o(v),_=n("./node_modules/gridicons/build/index.js"),x=o(_),C=n("./client/components/tooltip/index.jsx"),E=o(C),w={info:"info",warning:"notice",error:"notice"},j=function(e){function t(){(0,a.default)(this,t);var e=(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments));return e.state={},e.setTooltipContext=function(t){t&&e.setState({tooltipContext:t})},e.showTooltip=e.toggleTooltip.bind(e,!0),e.hideTooltip=e.toggleTooltip.bind(e,!1),e}return(0,f.default)(t,e),(0,d.default)(t,[{key:"toggleTooltip",value:function(e){this.setState({isTooltipVisible:e})}},{key:"render",value:function(){var e=this.props,t=e.type,n=e.text,o=e.url,r=e.position;return h.default.createElement("a",{href:o,onClick:this.props.onClick,ref:this.setTooltipContext,onMouseEnter:this.showTooltip,onMouseLeave:this.hideTooltip,className:(0,b.default)("accordion__status","is-"+t)},h.default.createElement(x.default,{icon:w[t]}),n&&h.default.createElement(E.default,{position:r,isVisible:this.state.isTooltipVisible,context:this.state.tooltipContext},n))}}]),t}(m.PureComponent);j.propTypes={type:y.default.oneOf(["info","warning","error"]),text:y.default.node,url:y.default.string,position:y.default.string,onClick:y.default.func},j.defaultProps={type:"info",onClick:function(){}},t.default=j,e.exports=t.default},"./client/components/button-group/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=o(p),m=n("./node_modules/react/react.js"),h=o(m),g=n("./node_modules/classnames/index.js"),y=o(g),v=function(e){function t(){return(0,a.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){var e=(0,y.default)("button-group",this.props.className,{"is-busy":this.props.busy,"is-primary":this.props.primary});return h.default.createElement("span",{className:e},this.props.children)}}]),t}(m.PureComponent);v.propTypes={children:function(e){var t=null;return h.default.Children.forEach(e.children,function(e){!e||e.props&&"button"===e.props.type||(t=new Error("All children elements should be a Button."))}),t}},t.default=v,e.exports=t.default},"./client/components/card/compact.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/lodash/assign.js"),i=o(r),s=n("./node_modules/react/react.js"),a=o(s),l=n("./node_modules/classnames/index.js"),d=o(l),u=n("./node_modules/create-react-class/index.js"),c=o(u),p=n("./client/components/card/index.jsx"),f=o(p);t.default=(0,c.default)({displayName:"CompactCard",render:function(){var e=(0,i.default)({},this.props,{className:(0,d.default)(this.props.className,"is-compact")});return a.default.createElement(f.default,e,this.props.children)}}),e.exports=t.default},"./client/components/data/media-library-selected-data/index.jsx":function(e,t,n){"use strict";function o(e){return{mediaLibrarySelectedItems:i.getAll(e)}}var r=n("./node_modules/react/react.js"),i=n("./client/lib/media/library-selected-store.js"),s=n("./client/lib/react-pass-to-children/index.js");e.exports=r.createClass({displayName:"MediaLibrarySelectedData",propTypes:{siteId:r.PropTypes.number.isRequired},getInitialState:function(){return o(this.props.siteId)},componentDidMount:function(){i.on("change",this.updateState)},componentWillUnmount:function(){i.off("change",this.updateState)},componentWillReceiveProps:function(e){this.props.siteId!==e.siteId&&this.setState(o(e.siteId))},updateState:function(){this.setState(o(this.props.siteId))},render:function(){return s(this,this.state)}})},"./client/components/data/media-list-data/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){return{media:c.getAll(e),mediaHasNextPage:c.hasNextPage(e),mediaFetchingNextPage:c.isFetchingNextPage(e)}}var i=n("./node_modules/lodash/isEqual.js"),s=o(i),a=n("./node_modules/lodash/assign.js"),l=o(a),d=n("./node_modules/react/react.js"),u=n("./client/lib/media/actions.js"),c=n("./client/lib/media/list-store.js"),p=n("./client/lib/react-pass-to-children/index.js"),f=n("./client/components/data/media-list-data/utils.js");e.exports=d.createClass({displayName:"MediaListData",propTypes:{siteId:d.PropTypes.number.isRequired,source:d.PropTypes.string,postId:d.PropTypes.number,filter:d.PropTypes.string,search:d.PropTypes.string},getInitialState:function(){return r(this.props.siteId)},componentWillMount:function(){u.setQuery(this.props.siteId,this.getQuery()),c.on("change",this.updateStateData),this.updateStateData()},componentWillUnmount:function(){c.off("change",this.updateStateData)},componentWillReceiveProps:function(e){var t=this.getQuery(e);this.props.siteId===e.siteId&&(0,s.default)(t,this.getQuery())||(u.setQuery(e.siteId,t),this.setState(r(e.siteId)))},getQuery:function(e){var t={};return e=e||this.props,e.search&&(t.search=e.search),e.filter&&!e.source&&("this-post"===e.filter?e.postId&&(t.post_ID=e.postId):t.mime_type=f.getMimeBaseTypeFromFilter(e.filter)),e.source&&(t.source=e.source,t.path="recent"),t},fetchData:function(){u.fetchNextPage(this.props.siteId)},updateStateData:function(){this.setState(r(this.props.siteId))},render:function(){return p(this,(0,l.default)({},this.state,{mediaOnFetchNextPage:this.fetchData}))}})},"./client/components/data/media-list-data/utils.js":function(e,t,n){"use strict";e.exports={getMimeBaseTypeFromFilter:function(e){var t;switch(e){case"images":t="image/";break;case"audio":t="audio/";break;case"videos":t="video/";break;case"documents":t="application/";break;default:t=""}return t}}},"./client/components/data/media-validation-data/index.jsx":function(e,t,n){"use strict";function o(e){return{mediaValidationErrors:i.getAllErrors(e)}}var r=n("./node_modules/react/react.js"),i=n("./client/lib/media/validation-store.js"),s=n("./client/lib/react-pass-to-children/index.js");e.exports=r.createClass({displayName:"MediaValidationData",propTypes:{siteId:r.PropTypes.number.isRequired},getInitialState:function(){return o(this.props.siteId)},componentDidMount:function(){i.on("change",this.updateState)},componentWillUnmount:function(){i.off("change",this.updateState)},componentWillReceiveProps:function(e){this.props.siteId!==e.siteId&&this.setState(o(e.siteId))},updateState:function(){this.setState(o(this.props.siteId))},render:function(){return s(this,this.state)}})},"./client/components/data/query-jetpack-modules/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=o(p),m=n("./node_modules/react/react.js"),h=n("./node_modules/react-redux/es/index.js"),g=n("./client/state/selectors/is-fetching-jetpack-modules.js"),y=o(g),v=n("./client/state/jetpack/modules/actions.js"),b=function(e){function t(){return(0,a.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,d.default)(t,[{key:"componentWillMount",value:function(){this.request(this.props)}},{key:"componentWillReceiveProps",value:function(e){this.props.siteId!==e.siteId&&this.request(e)}},{key:"request",value:function(e){e.requestingModules||e.fetchModuleList(e.siteId)}},{key:"render",value:function(){return null}}]),t}(m.Component);b.propTypes={siteId:m.PropTypes.number.isRequired,requestingModules:m.PropTypes.bool,fetchModuleList:m.PropTypes.func},t.default=(0,h.connect)(function(e,t){return{requestingModules:(0,y.default)(e,t.siteId)}},{fetchModuleList:v.fetchModuleList})(b),e.exports=t.default},"./client/components/data/query-keyring-services/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=o(p),m=n("./node_modules/react/react.js"),h=n("./node_modules/react-redux/es/index.js"),g=n("./client/state/sharing/services/selectors.js"),y=n("./client/state/sharing/services/actions.js"),v=function(e){function t(){return(0,a.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,d.default)(t,[{key:"componentWillMount",value:function(){this.props.isRequesting||this.props.requestKeyringServices()}},{key:"render",value:function(){return null}}]),t}(m.Component);v.propTypes={isRequesting:m.PropTypes.bool,requestKeyringServices:m.PropTypes.func},t.default=(0,h.connect)(function(e){return{isRequesting:(0,g.isKeyringServicesFetching)(e)}},{requestKeyringServices:y.requestKeyringServices})(v),e.exports=t.default},"./client/components/data/query-media-storage/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=o(p),m=n("./node_modules/react/react.js"),h=n("./node_modules/react-redux/es/index.js"),g=n("./node_modules/redux/lib/index.js"),y=n("./client/state/sites/media-storage/selectors.js"),v=n("./client/state/sites/media-storage/actions.js"),b=n("./client/lib/media/store.js"),_=o(b),x=function(e){function t(e){(0,a.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return n.requestStorage=n.requestStorage.bind(n),n}return(0,f.default)(t,e),(0,d.default)(t,[{key:"requestStorage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;!e.requestingMediaStorage&&e.siteId&&e.requestMediaStorage(e.siteId)}},{key:"componentWillMount",value:function(){this.requestStorage(),_.default.on("fetch-media-limits",this.requestStorage)}},{key:"componentWillUnmount",value:function(){_.default.off("fetch-media-limits",this.requestStorage)}},{key:"componentWillReceiveProps",value:function(e){!e.requestingMediaStorage&&e.siteId&&this.props.siteId!==e.siteId&&this.requestStorage(e)}},{key:"render",value:function(){return null}}]),t}(m.Component);x.propTypes={siteId:m.PropTypes.number,requestingMediaStorage:m.PropTypes.bool,requestMediaStorage:m.PropTypes.func},x.defaultProps={requestMediaStorage:function(){}},t.default=(0,h.connect)(function(e,t){return{requestingMediaStorage:(0,y.isRequestingMediaStorage)(e,t.siteId)}},function(e){return(0,g.bindActionCreators)({requestMediaStorage:v.requestMediaStorage},e)})(x),e.exports=t.default},"./client/components/data/query-media/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=o(p),m=n("./node_modules/react/react.js"),h=n("./node_modules/react-pure-render/shallowEqual.js"),g=o(h),y=n("./node_modules/react-redux/es/index.js"),v=n("./client/state/media/actions.js"),b={requestMedia:v.requestMedia,requestMediaItem:v.requestMediaItem},_=function(e){function t(){return(0,a.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,d.default)(t,[{key:"componentDidMount",value:function(){this.request()}},{key:"componentDidUpdate",value:function(e){this.props.siteId===e.siteId&&this.props.mediaId===e.mediaId&&(0,g.default)(this.props.query,e.query)||this.request()}},{key:"request",value:function(){var e=this.props,t=e.siteId,n=e.mediaId,o=e.query,r=!!n;r?this.props.requestMediaItem(t,n):this.props.requestMedia(t,o)}},{key:"render",value:function(){return null}}]),t}(m.Component);_.propTypes={siteId:m.PropTypes.number.isRequired,query:m.PropTypes.object,mediaId:m.PropTypes.number,request:m.PropTypes.func},_.defaultProps={request:function(){}},t.default=(0,y.connect)(null,b)(_),e.exports=t.default},"./client/components/data/query-page-templates/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=o(p),m=n("./node_modules/react/react.js"),h=n("./node_modules/react-redux/es/index.js"),g=n("./client/state/page-templates/selectors.js"),y=n("./client/state/sites/selectors.js"),v=n("./client/state/page-templates/actions.js"),b=function(e){function t(){return(0,a.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,d.default)(t,[{key:"componentWillMount",value:function(){this.request(this.props)}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.siteId,o=t.themeSlug,r=e.siteId,i=e.themeSlug,s=n!==r||o&&i&&o!==i;s&&this.request(e)}},{key:"request",value:function(e){e.isRequesting||e.requestPageTemplates(e.siteId)}},{key:"render",value:function(){return null}}]),t}(m.Component);b.propTypes={siteId:m.PropTypes.number.isRequired,isRequesting:m.PropTypes.bool,requestPageTemplates:m.PropTypes.func},t.default=(0,h.connect)(function(e,t){var n=t.siteId;return{isRequesting:(0,g.isRequestingPageTemplates)(e,n),themeSlug:(0,y.getSiteOption)(e,n,"theme_slug")}},{requestPageTemplates:v.requestPageTemplates})(b),e.exports=t.default},"./client/components/data/query-post-revisions/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=o(p),m=n("./node_modules/react/react.js"),h=n("./node_modules/react-redux/es/index.js"),g=n("./client/state/posts/revisions/actions.js"),y=function(e){function t(){return(0,a.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,d.default)(t,[{key:"componentWillMount",value:function(){this.request()}},{key:"componentDidUpdate",value:function(e){this.props.siteId===e.siteId&&this.props.postId===e.postId||this.request()}},{key:"request",value:function(){this.props.requestPostRevisions(this.props.siteId,this.props.postId,this.props.postType)}},{key:"render",value:function(){return null}}]),t}(m.Component);y.propTypes={postId:m.PropTypes.number,postType:m.PropTypes.string,siteId:m.PropTypes.number,requestPostRevisions:m.PropTypes.func},t.default=(0,h.connect)(function(){return{}},{requestPostRevisions:g.requestPostRevisions})(y),e.exports=t.default},"./client/components/data/query-publicize-connections/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=o(p),m=n("./node_modules/react/react.js"),h=n("./node_modules/react-redux/es/index.js"),g=n("./client/state/sharing/publicize/selectors.js"),y=n("./client/state/sharing/publicize/actions.js"),v=n("./client/state/ui/selectors.js"),b=function(e){function t(){return(0,a.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,d.default)(t,[{key:"componentDidMount",value:function(){!this.props.requestingConnections&&this.props.siteId&&this.props.requestConnections(this.props.siteId)}},{key:"componentDidUpdate",value:function(e){var t=e.siteId;this.props.siteId&&t!==this.props.siteId&&!this.props.requestingConnections&&this.props.requestConnections(this.props.siteId)}},{key:"render",value:function(){return null}}]),t}(m.Component);b.propTypes={requestConnections:m.PropTypes.func,requestingConnections:m.PropTypes.bool,selectedSite:m.PropTypes.bool,siteId:m.PropTypes.number},b.defaultProps={requestConnections:function(){},requestingConnections:!1,selectedSite:!1,siteId:0},t.default=(0,h.connect)(function(e,t){var n=t.siteId,o=t.selectedSite;return n=n||o&&(0,v.getSelectedSiteId)(e),{requestingConnections:(0,g.isFetchingConnections)(e,n),siteId:n}},{requestConnections:y.fetchConnections})(b),e.exports=t.default},"./client/components/data/query-simple-payments/index.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=o(p),m=n("./node_modules/react/react.js"),h=n("./node_modules/prop-types/index.js"),g=o(h),y=n("./node_modules/react-redux/es/index.js"),v=n("./client/state/simple-payments/product-list/actions.js"),b=function(e){function t(){return(0,a.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,d.default)(t,[{key:"componentWillMount",value:function(){this.request(this.props)}},{key:"componentWillReceiveProps",value:function(e){e.siteId===this.props.siteId&&e.productId===this.props.productId||this.request(e)}},{key:"request",value:function(e){var t=e.siteId,n=e.productId;if(t&&0!==n)return n?void e.requestProduct(t,n):void e.requestProducts(t)}},{key:"render",value:function(){return null}}]),t}(m.Component);b.propTypes={productId:g.default.number,siteId:g.default.number.isRequired,requestProduct:g.default.func,requestProducts:g.default.func},b.defaultProps={productId:null},t.default=(0,y.connect)(null,{requestProduct:v.requestProduct,requestProducts:v.requestProducts})(b),e.exports=t.default},"./client/components/data/query-site-settings/index.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=o(p),m=n("./node_modules/react/react.js"),h=n("./node_modules/prop-types/index.js"),g=o(h),y=n("./node_modules/react-redux/es/index.js"),v=n("./client/state/site-settings/selectors.js"),b=n("./client/state/site-settings/actions.js"),_=function(e){function t(){return(0,a.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,d.default)(t,[{key:"componentWillMount",value:function(){this.requestSettings(this.props)}},{key:"componentWillReceiveProps",value:function(e){var t=this.props.siteId;e.siteId&&t!==e.siteId&&this.requestSettings(e)}},{key:"requestSettings",value:function(e){var t=e.requestingSiteSettings,n=e.siteId;!t&&n&&e.requestSiteSettings(n)}},{key:"render",value:function(){return null}}]),t}(m.Component);_.propTypes={siteId:g.default.number,requestingSiteSettings:g.default.bool,requestSiteSettings:g.default.func},t.default=(0,y.connect)(function(e,t){var n=t.siteId;
return{requestingSiteSettings:(0,v.isRequestingSiteSettings)(e,n)}},{requestSiteSettings:b.requestSiteSettings})(_),e.exports=t.default},"./client/components/data/query-taxonomies/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=o(p),m=n("./node_modules/react/react.js"),h=n("./node_modules/react-redux/es/index.js"),g=n("./client/state/post-types/taxonomies/actions.js"),y=n("./client/state/post-types/taxonomies/selectors.js"),v=function(e){function t(){return(0,a.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,d.default)(t,[{key:"componentWillMount",value:function(){this.request(this.props)}},{key:"componentWillReceiveProps",value:function(e){this.props.siteId===e.siteId&&this.props.postType===e.postType||this.request(e)}},{key:"request",value:function(e){!e.requesting&&e.siteId&&e.requestPostTypeTaxonomies(e.siteId,e.postType)}},{key:"shouldComponentUpdate",value:function(){return!1}},{key:"render",value:function(){return null}}]),t}(m.Component);v.propTypes={siteId:m.PropTypes.number,postType:m.PropTypes.string.isRequired,requesting:m.PropTypes.bool.isRequired,requestPostTypeTaxonomies:m.PropTypes.func.isRequired},t.default=(0,h.connect)(function(e,t){return{requesting:(0,y.isRequestingPostTypeTaxonomies)(e,t.siteId,t.postType)}},{requestPostTypeTaxonomies:g.requestPostTypeTaxonomies})(v),e.exports=t.default},"./client/components/data/query-terms/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=o(p),m=n("./node_modules/react/react.js"),h=n("./node_modules/react-redux/es/index.js"),g=n("./node_modules/react-pure-render/shallowEqual.js"),y=o(g),v=n("./client/state/terms/actions.js"),b=n("./client/state/terms/selectors.js"),_=function(e){function t(){return(0,a.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,d.default)(t,[{key:"componentWillMount",value:function(){this.request(this.props)}},{key:"componentWillReceiveProps",value:function(e){this.props.siteId===e.siteId&&this.props.taxonomy===e.taxonomy&&(0,y.default)(this.props.query,e.query)||this.request(e)}},{key:"request",value:function(e){!e.requesting&&e.siteId&&e.requestSiteTerms(e.siteId,e.taxonomy,e.query)}},{key:"shouldComponentUpdate",value:function(){return!1}},{key:"render",value:function(){return null}}]),t}(m.Component);_.propTypes={siteId:m.PropTypes.number,taxonomy:m.PropTypes.string.isRequired,query:m.PropTypes.object,requesting:m.PropTypes.bool.isRequired,requestSiteTerms:m.PropTypes.func.isRequired},_.defaultProps={query:{}},t.default=(0,h.connect)(function(e,t){return{requesting:(0,b.isRequestingTermsForQuery)(e,t.siteId,t.taxonomy,t.query)}},{requestSiteTerms:v.requestSiteTerms})(_),e.exports=t.default},"./client/components/data/query-users-suggestions/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=o(p),m=n("./node_modules/react/react.js"),h=n("./node_modules/react-redux/es/index.js"),g=n("./client/state/users/suggestions/selectors.js"),y=n("./client/state/users/suggestions/actions.js"),v=function(e){function t(){return(0,a.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,d.default)(t,[{key:"componentWillMount",value:function(){this.request(this.props)}},{key:"componentWillReceiveProps",value:function(e){this.props.siteId!==e.siteId&&this.request(e)}},{key:"request",value:function(e){!e.isRequesting&&e.siteId&&e.requestUserSuggestions(e.siteId)}},{key:"render",value:function(){return null}}]),t}(m.Component);v.propTypes={siteId:m.PropTypes.number,isRequesting:m.PropTypes.bool,requestUserSuggestions:m.PropTypes.func},v.defaultProps={requestUserSuggestions:function(){},isRequesting:!1},t.default=(0,h.connect)(function(e,t){return{isRequesting:(0,g.isRequestingUserSuggestions)(e,t.siteId)}},{requestUserSuggestions:y.requestUserSuggestions})(v),e.exports=t.default},"./client/components/data/query-users/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=o(p),m=n("./node_modules/react/react.js"),h=n("./node_modules/prop-types/index.js"),g=o(h),y=n("./node_modules/react-redux/es/index.js"),v=n("./node_modules/react-pure-render/shallowEqual.js"),b=o(v),_=n("./client/state/users/actions.js"),x=function(e){function t(){return(0,a.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,d.default)(t,[{key:"componentWillMount",value:function(){this.request()}},{key:"componentDidUpdate",value:function(e){(0,b.default)(this.props.userIds,e.userIds)&&this.props.siteId===e.siteId||this.request()}},{key:"request",value:function(){this.props.requestUsers(this.props.siteId,this.props.userIds)}},{key:"render",value:function(){return null}}]),t}(m.Component);x.propTypes={requestUsers:g.default.func,siteId:g.default.number,userIds:g.default.arrayOf(g.default.number)},t.default=(0,y.connect)(function(){return{}},{requestUsers:_.requestUsers})(x),e.exports=t.default},"./client/components/date-picker/day.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/lodash/noop.js"),i=o(r),s=n("./node_modules/react/react.js"),a=o(s),l=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.default;return function(o){n(e,t,o)}},d=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.default;return function(o){n(e,t,o)}},u=function(e){var t=e.date,n=e.modifiers,o=e.onMouseEnter,r=e.onMouseLeave;return a.default.createElement("div",{className:"date-picker__day",onMouseEnter:l(t,n,o),onMouseLeave:d(t,n,r)},t.getDate())};t.default=u,e.exports=t.default},"./client/components/date-picker/event.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.CalendarEvent=void 0;var r=n("./node_modules/react/react.js"),i=o(r),s=n("./node_modules/gridicons/build/index.js"),a=o(s),l=n("./node_modules/social-logos/build/index.js"),d=o(l),u=n("./node_modules/classnames/index.js"),c=o(u),p=function(e){return e&&i.default.createElement("span",{className:"date-picker__icon-wrapper date-picker__icon-wrapper-"+e},i.default.createElement(a.default,{icon:e,size:18}))},f=function(e,t){if(!e)return null;var n=(0,c.default)("date-picker__social-icon-wrapper","date-picker__social-icon-wrapper-"+e,{"date-picker__social-icon-wrapper-color":t});return i.default.createElement("span",{className:n},i.default.createElement(d.default,{icon:e,size:18}))};t.CalendarEvent=function(e){var t=e.icon,n=e.socialIcon,o=e.socialIconColor,r=void 0===o||o,s=e.title;return i.default.createElement("div",{className:"date-picker__calendar-event"},p(t),f(n,r),i.default.createElement("span",{className:"date-picker__event-title"},s))}},"./client/components/date-picker/events-tooltip.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=o(p),m=n("./node_modules/lodash/map.js"),h=o(m),g=n("./node_modules/lodash/noop.js"),y=o(g),v=n("./node_modules/react/react.js"),b=o(v),_=n("./node_modules/prop-types/index.js"),x=o(_),C=n("./node_modules/i18n-calypso/index.js"),E=n("./client/components/tooltip/index.jsx"),w=o(E),j=n("./client/components/date-picker/event.jsx"),S=function(e){function t(){return(0,a.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){var e=this.props,t=e.events,n=e.isVisible,o=e.maxEvents,r=this.props.title;r||(r=this.props.translate("%d post","%d posts",{count:t.length,args:t.length}));var i=!!(t&&t.length&&n),s=t.length-o,a=this.props.moreEventsLabel;return a||(a=this.props.translate("… and %(moreEvents)d more post","… and %(moreEvents)d more posts",{count:s,args:{moreEvents:s}})),b.default.createElement(w.default,{className:"date-picker__events-tooltip",context:this.props.context,isVisible:i,onClose:y.default},b.default.createElement("span",null,r),b.default.createElement("hr",{className:"date-picker__division"}),b.default.createElement("ul",null,(0,h.default)(t,function(e,t){return t<o&&b.default.createElement("li",{key:e.id},b.default.createElement(j.CalendarEvent,{icon:e.icon,socialIcon:e.socialIcon,socialIconColor:e.socialIconColor,title:e.title}))}),s>0&&b.default.createElement("li",null,a)))}}]),t}(v.Component);S.propTypes={title:x.default.string,events:x.default.array,moment:x.default.func.isRequired,maxEvents:x.default.number,moreEvents:x.default.string},S.defaultProps={events:[],maxEvents:8},t.default=(0,C.localize)(S),e.exports=t.default},"./client/components/date-picker/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/helpers/extends.js"),i=o(r),s=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/createClass.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),f=o(p),m=n("./node_modules/babel-runtime/helpers/inherits.js"),h=o(m),g=n("./node_modules/lodash/get.js"),y=o(g),v=n("./node_modules/lodash/filter.js"),b=o(v),_=n("./node_modules/lodash/map.js"),x=o(_),C=n("./node_modules/lodash/merge.js"),E=o(C),w=n("./node_modules/lodash/noop.js"),j=o(w),S=n("./node_modules/react/react.js"),T=o(S),P=n("./node_modules/prop-types/index.js"),k=o(P),I=n("./node_modules/react-day-picker/DayPicker.js"),N=o(I),R=n("./node_modules/i18n-calypso/index.js"),D=n("./client/components/date-picker/day.jsx"),M=o(D),O=function(e){function t(){var e,n,o,r;(0,d.default)(this,t);for(var i=arguments.length,s=Array(i),l=0;l<i;l++)s[l]=arguments[l];return n=o=(0,f.default)(this,(e=t.__proto__||(0,a.default)(t)).call.apply(e,[this].concat(s))),o.setCalendarDay=function(e,t){var n=o.props.moment(e);if(t.disabled)return null;var r={year:n.year(),month:n.month(),date:n.date()},i=(o.props.timeReference||n).set(r);o.props.onSelectDay(i,r,t)},o.setCalendarMonth=function(){var e=o.refs.daypicker;e.showMonth(new Date)},o.renderDay=function(e,t){return T.default.createElement(M.default,{date:e,modifiers:t,onMouseEnter:o.handleDayMouseEnter,onMouseLeave:o.handleDayMouseLeave})},o.handleDayMouseEnter=function(e,t,n){var r=o.filterEventsByDay(e);o.props.onDayMouseEnter(e,t,n,r)},o.handleDayMouseLeave=function(e,t,n){var r=o.filterEventsByDay(e);o.props.onDayMouseLeave(e,t,n,r)},r=n,(0,f.default)(o,r)}return(0,h.default)(t,e),(0,c.default)(t,[{key:"isSameDay",value:function(e,t){return e=this.props.moment(e),t=this.props.moment(t),e.isSame(t,"day")}},{key:"filterEventsByDay",value:function(e){if(!this.props.events)return[];var t=void 0,n=void 0,o=[];for(t=0;t<this.props.events.length;t++)n=this.props.events[t],this.isSameDay(n.date,e)&&("undefined"==typeof n.id&&(n.id="event-"+t),o.push(n));return o}},{key:"locale",value:function e(){var t=this.props.moment,n=t().localeData(),o=n.firstDayOfWeek(),r=t.weekdaysMin(),e={formatDay:function(e){return t(e).format("llll")},formatMonthTitle:function(e){return t(e).format("MMMM YYYY")},formatWeekdayShort:function(e){return(0,y.default)(r,e," ")[0]},formatWeekdayLong:function(e){return t().weekday(e).format("dddd")},getFirstDayOfWeek:function(){return o}};return(0,E.default)(e,this.props.locale)}},{key:"getDateInstance",value:function(e){return this.props.moment.isMoment(e)?e.toDate():e instanceof Number||"number"==typeof e?new Date(e):e}},{key:"render",value:function(){var e=this,t=(0,i.default)({},this.props.modifiers,{"past-days":{before:new Date},sunday:{daysOfWeek:[0]}});return this.props.selectedDay&&(t["is-selected"]=this.getDateInstance(this.props.selectedDay)),this.props.events&&this.props.events.length&&(t.events=(0,x.default)((0,b.default)(this.props.events,function(e){return e.date}),function(t){return e.getDateInstance(t.date)})),T.default.createElement(N.default,{modifiers:t,ref:"daypicker",className:"date-picker",disabledDays:this.props.disabledDays,month:this.props.calendarViewDate,onDayClick:this.setCalendarDay,renderDay:this.renderDay,localeUtils:this.locale(),onMonthChange:this.props.onMonthChange,enableOutsideDays:this.props.enableOutsideDays,onCaptionClick:this.setCalendarMonth})}}]),t}(S.PureComponent);O.propTypes={calendarViewDate:k.default.object,enableOutsideDays:k.default.bool,events:k.default.array,locale:k.default.object,modifiers:k.default.object,moment:k.default.func.isRequired,selectedDay:k.default.object,timeReference:k.default.object,onMonthChange:k.default.func,onSelectDay:k.default.func,onDayMouseEnter:k.default.func,onDayMouseLeave:k.default.func},O.defaultProps={enableOutsideDays:!0,calendarViewDate:new Date,modifiers:{},selectedDay:null,onMonthChange:j.default,onSelectDay:j.default,onDayMouseEnter:j.default,onDayMouseLeave:j.default},t.default=(0,R.localize)(O),e.exports=t.default},"./client/components/draggable/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/helpers/extends.js"),i=o(r),s=n("./node_modules/babel-runtime/core-js/object/keys.js"),a=o(s),l=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/createClass.js"),f=o(p),m=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),h=o(m),g=n("./node_modules/babel-runtime/helpers/inherits.js"),y=o(g),v=n("./node_modules/lodash/omit.js"),b=o(v),_=n("./node_modules/lodash/noop.js"),x=o(_),C=n("./node_modules/react/react.js"),E=o(C),w=function(e){function t(e){(0,c.default)(this,t);var n=(0,h.default)(this,(t.__proto__||(0,d.default)(t)).call(this,e));return n.state={x:n.props.x,y:n.props.y},n.onTouchStartHandler=n.onTouchStartHandler.bind(n),n.onMouseDownHandler=n.onMouseDownHandler.bind(n),n.draggingHandler=n.draggingHandler.bind(n),n.draggingEndedHandler=n.draggingEndedHandler.bind(n),n.update=n.update.bind(n),n}return(0,y.default)(t,e),(0,f.default)(t,[{key:"componentWillReceiveProps",value:function(e){this.state.x===e.x&&this.state.y===e.y||this.setState({x:e.x,y:e.y})}},{key:"componentWillUnmount",value:function(){this.removeListeners()}},{key:"draggingStartedHandler",value:function(e){this.dragging=!0;var t=e;this.isTouchEvent(e)&&(t=e.touches[0]),this.relativePos={x:t.pageX-this.state.x,y:t.pageY-this.state.y},cancelAnimationFrame(this.frameRequestId),this.frameRequestId=requestAnimationFrame(this.update)}},{key:"isTouchEvent",value:function(e){return(!e.pageX||!e.pageY)&&e.targetTouches&&e.targetTouches.length}},{key:"draggingHandler",value:function(e){var t=e;this.isTouchEvent(e)&&(t=e.touches[0]);var n=t.pageX-this.relativePos.x,o=t.pageY-this.relativePos.y;this.mousePos={x:n,y:o}}},{key:"draggingEndedHandler",value:function(){this.dragging=!1,this.mousePos=null,cancelAnimationFrame(this.frameRequestId),this.removeListeners(),this.props.onStop()}},{key:"onTouchStartHandler",value:function(e){e.preventDefault(),document.addEventListener("touchmove",this.draggingHandler),document.addEventListener("touchend",this.draggingEndedHandler),this.draggingStartedHandler(e)}},{key:"onMouseDownHandler",value:function(e){e.preventDefault(),document.addEventListener("mousemove",this.draggingHandler),document.addEventListener("mouseup",this.draggingEndedHandler),this.draggingStartedHandler(e)}},{key:"update",value:function(){if(!this.mousePos)return void(this.frameRequestId=requestAnimationFrame(this.update));var e=this.props.bounds,t=this.mousePos,n=t.x,o=t.y;e&&(n=Math.max(e.left,Math.min(e.right-this.props.width,n)),o=Math.max(e.top,Math.min(e.bottom-this.props.height,o))),this.dragging&&(this.frameRequestId=requestAnimationFrame(this.update)),this.props.onDrag(n,o),this.props.controlled||this.setState({x:n,y:o})}},{key:"removeListeners",value:function(){document.removeEventListener("mousemove",this.draggingHandler),document.removeEventListener("mouseup",this.draggingEndedHandler),document.removeEventListener("touchmove",this.draggingHandler),document.removeEventListener("touchend",this.draggingEndedHandler)}},{key:"render",value:function(){var e=(0,b.default)(this.props,(0,a.default)(this.constructor.propTypes)),t={transform:"translate("+this.state.x+"px, "+this.state.y+"px)"};return(this.props.width||this.props.height)&&(t.width=this.props.width+"px",t.height=this.props.height+"px"),E.default.createElement("div",(0,i.default)({},e,{style:t,onMouseDown:this.onMouseDownHandler,onTouchStart:this.onTouchStartHandler}))}}]),t}(C.Component);w.propTypes={onDrag:C.PropTypes.func,onStop:C.PropTypes.func,width:C.PropTypes.number,height:C.PropTypes.number,x:C.PropTypes.number,y:C.PropTypes.number,controlled:C.PropTypes.bool,bounds:C.PropTypes.shape({top:C.PropTypes.number,left:C.PropTypes.number,bottom:C.PropTypes.number,right:C.PropTypes.number})},w.defaultProps={onDrag:x.default,onStop:x.default,width:0,height:0,x:0,y:0,controlled:!1,bounds:null},t.default=w,e.exports=t.default},"./client/components/drop-zone/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.DropZone=void 0;var r=n("./node_modules/babel-runtime/core-js/array/from.js"),i=o(r),s=n("./node_modules/lodash/without.js"),a=o(s),l=n("./node_modules/lodash/noop.js"),d=o(l),u=n("./node_modules/lodash/includes.js"),c=o(u),p=n("./node_modules/lodash/identity.js"),f=o(p),m=n("./node_modules/react-dom/index.js"),h=o(m),g=n("./node_modules/react/react.js"),y=o(g),v=n("./node_modules/prop-types/index.js"),b=o(v),_=n("./node_modules/react-redux/es/index.js"),x=n("./node_modules/classnames/index.js"),C=o(x),E=n("./node_modules/gridicons/build/index.js"),w=o(E),j=n("./node_modules/i18n-calypso/index.js"),S=n("./client/components/root-child/index.jsx"),T=o(S),P=n("./client/state/ui/drop-zone/actions.js"),k=t.DropZone=y.default.createClass({displayName:"DropZone",propTypes:{className:b.default.string,fullScreen:b.default.bool,icon:b.default.node,onDrop:b.default.func,onVerifyValidTransfer:b.default.func,onFilesDrop:b.default.func,textLabel:b.default.string,translate:b.default.func,showDropZone:b.default.func.isRequired,hideDropZone:b.default.func.isRequired,dropZoneName:b.default.string},getInitialState:function(){return{isDraggingOverDocument:!1,isDraggingOverElement:!1,lastVisibleState:!1}},getDefaultProps:function(){return{className:null,onDrop:d.default,onVerifyValidTransfer:function(){return!0},onFilesDrop:d.default,fullScreen:!1,icon:y.default.createElement(w.default,{icon:"cloud-upload",size:48}),translate:f.default,dropZoneName:null}},componentDidMount:function(){this.dragEnterNodes=[],window.addEventListener("dragover",this.preventDefault),window.addEventListener("drop",this.onDrop),window.addEventListener("dragenter",this.toggleDraggingOverDocument),window.addEventListener("dragleave",this.toggleDraggingOverDocument),window.addEventListener("mouseup",this.resetDragState)},componentDidUpdate:function(e,t){t.isDraggingOverDocument!==this.state.isDraggingOverDocument&&this.toggleMutationObserver()},componentWillUnmount:function(){window.removeEventListener("dragover",this.preventDefault),window.removeEventListener("drop",this.onDrop),window.removeEventListener("dragenter",this.toggleDraggingOverDocument),window.removeEventListener("dragleave",this.toggleDraggingOverDocument),window.removeEventListener("mouseup",this.resetDragState),this.disconnectMutationObserver()},resetDragState:function(){(this.state.isDraggingOverDocument||this.state.isDraggingOverElement)&&(this.setState({isDraggingOverDocument:!1,isDraggingOverElement:!1}),this.toggleDropZoneReduxState(!1))},toggleMutationObserver:function(){this.disconnectMutationObserver(),this.state.isDraggingOverDocument&&(this.observer=new window.MutationObserver(this.detectNodeRemoval),this.observer.observe(document.body,{childList:!0,subtree:!0}))},disconnectMutationObserver:function(){this.observer&&(this.observer.disconnect(),delete this.observer)},detectNodeRemoval:function(e){var t=this;e.forEach(function(e){e.removedNodes.length&&(t.dragEnterNodes=(0,a.default)(t.dragEnterNodes,(0,i.default)(e.removedNodes)))})},toggleDraggingOverDocument:function(e){"dragenter"!==e.type||(0,c.default)(this.dragEnterNodes,e.target)?"dragleave"===e.type&&(this.dragEnterNodes=(0,a.default)(this.dragEnterNodes,e.target)):this.dragEnterNodes.push(e.target);var t=window.CustomEvent&&e instanceof window.CustomEvent?e.detail:e,n=this.props.onVerifyValidTransfer(t.dataTransfer),o=n&&this.dragEnterNodes.length;this.setState({isDraggingOverDocument:o,isDraggingOverElement:o&&(this.props.fullScreen||this.isWithinZoneBounds(t.clientX,t.clientY))}),window.CustomEvent&&e instanceof window.CustomEvent&&(this.dragEnterNodes=(0,a.default)(this.dragEnterNodes,window)),this.toggleDropZoneReduxState(!(!this.state.isDraggingOverDocument&&!this.state.isDraggingOverElement))},toggleDropZoneReduxState:function(e){this.state.lastVisibleState!==e&&(e?this.props.showDropZone(this.props.dropZoneName):this.props.hideDropZone(this.props.dropZoneName),this.setState({lastVisibleState:e}))},preventDefault:function(e){e.preventDefault()},isWithinZoneBounds:function(e,t){if(!this.refs.zone)return!1;var n=this.refs.zone.getBoundingClientRect();return n.bottom!==n.top&&n.left!==n.right&&(e>=n.left&&e<=n.right&&t>=n.top&&t<=n.bottom)},onDrop:function(e){e.dataTransfer&&e.dataTransfer.files.length,this.resetDragState(),(this.props.fullScreen||h.default.findDOMNode(this.refs.zone).contains(e.target))&&(this.props.onDrop(e),this.props.onVerifyValidTransfer(e.dataTransfer)&&(e.dataTransfer&&this.props.onFilesDrop(Array.prototype.slice.call(e.dataTransfer.files)),e.stopPropagation(),e.preventDefault()))},renderContent:function(){var e=this.props.textLabel?this.props.textLabel:this.props.translate("Drop files to upload");return y.default.createElement("div",{className:"drop-zone__content"},this.props.children?this.props.children:y.default.createElement("div",null,y.default.createElement("span",{className:"drop-zone__content-icon"},this.props.icon),y.default.createElement("span",{className:"drop-zone__content-text"},e)))},render:function(){var e=(0,C.default)("drop-zone",this.props.className,{"is-active":this.state.isDraggingOverDocument||this.state.isDraggingOverElement,"is-dragging-over-document":this.state.isDraggingOverDocument,"is-dragging-over-element":this.state.isDraggingOverElement,"is-full-screen":this.props.fullScreen}),t=y.default.createElement("div",{ref:"zone",className:e},this.renderContent());return this.props.fullScreen?y.default.createElement(T.default,null,t):t}}),I={showDropZone:P.showDropZone,hideDropZone:P.hideDropZone};t.default=(0,_.connect)(null,I)((0,j.localize)(k))},"./client/components/email-verification/email-verification-dialog/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=o(p),m=n("./node_modules/lodash/noop.js"),h=o(m),g=n("./node_modules/lodash/includes.js"),y=o(g),v=n("./node_modules/lodash/get.js"),b=o(v),_=n("./node_modules/prop-types/index.js"),x=o(_),C=n("./node_modules/react/react.js"),E=o(C),w=n("./node_modules/i18n-calypso/index.js"),j=n("./node_modules/react-redux/es/index.js"),S=n("./client/components/dialog/index.jsx"),T=o(S),P=n("./client/components/button/index.jsx"),k=o(P),I=n("./client/components/spinner/index.jsx"),N=o(I),R=n("./client/state/current-user/selectors.js"),D=n("./client/state/current-user/email-verification/actions.js"),M=function(e){function t(){var e,n,o,r;(0,a.default)(this,t);for(var s=arguments.length,l=Array(s),d=0;d<s;d++)l[d]=arguments[d];return n=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.handleClose=function(){o.props.resetVerifyEmailState(),o.props.onClose()},r=n,(0,c.default)(o,r)}return(0,f.default)(t,e),(0,d.default)(t,[{key:"getResendButtonLabel",value:function(){return"sent"===this.props.emailVerificationStatus||"error"===this.props.emailVerificationStatus?this.props.translate("Email Sent"):"requesting"===this.props.emailVerificationStatus?E.default.createElement(N.default,{className:"email-verification-dialog__confirmation-dialog-spinner"}):this.props.translate("Resend Email")}},{key:"getDialogButtons",value:function(){return[E.default.createElement(k.default,{key:"resend",primary:!1,disabled:(0,y.default)(["requesting","sent","error"],this.props.emailVerificationStatus),onClick:this.props.verifyEmail},this.getResendButtonLabel()),E.default.createElement(k.default,{key:"close",primary:!0,onClick:this.handleClose},this.props.translate("OK"))]}},{key:"render",value:function(){var e={confirmHeading:this.props.translate("Please verify your email address:"),confirmExplanation:this.props.translate("When you first signed up for a WordPress.com account we sent you an email. Please open it and click on the blue button to verify your email address."),confirmReasoning:this.props.translate("Verifying your email allows us to assist you if you ever lose access to your account in the future."),confirmEmail:this.props.translate("{{wrapper}}%(email)s{{/wrapper}} {{emailPreferences}}change{{/emailPreferences}}",{components:{wrapper:E.default.createElement("span",{className:"email-verification-dialog__confirmation-dialog-email-wrapper"}),emailPreferences:E.default.createElement("a",{href:"/me/account"})},args:{email:this.props.email}})};return E.default.createElement(T.default,{isVisible:!0,buttons:this.getDialogButtons(),additionalClassNames:"email-verification-dialog__confirmation-dialog is-narrow"},E.default.createElement("h1",{className:"email-verification-dialog__confirmation-dialog-heading is-variable-height"},e.confirmHeading),E.default.createElement("p",{className:"email-verification-dialog__confirmation-dialog-email"},e.confirmEmail),E.default.createElement("p",{className:"email-verification-dialog__confirmation-dialog-explanation"},e.confirmExplanation),E.default.createElement("p",{className:"email-verification-dialog__confirmation-dialog-reasoning"},e.confirmReasoning))}}]),t}(C.Component);M.propTypes={onClose:x.default.func,translate:x.default.func,email:x.default.string,emailVerificationStatus:x.default.string},M.defaultProps={onClose:h.default},t.default=(0,j.connect)(function(e){return{email:(0,R.getCurrentUserEmail)(e),emailVerificationStatus:(0,b.default)(e,"currentUser.emailVerification.status")}},{verifyEmail:D.verifyEmail,resetVerifyEmailState:D.resetVerifyEmailState})((0,w.localize)(M)),e.exports=t.default},"./client/components/file-picker/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=o(p),m=n("./node_modules/lodash/noop.js"),h=o(m),g=n("./node_modules/lodash/assign.js"),y=o(g),v=n("./node_modules/react/react.js"),b=o(v),_=n("./node_modules/component-file-picker/index.js"),x=o(_),C=function(e){function t(e){(0,a.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return n.showPicker=n.showPicker.bind(n),n}return(0,f.default)(t,e),(0,d.default)(t,[{key:"showPicker",value:function(){this.props.onClick(),(0,x.default)((0,y.default)({},this.props),this.props.onPick)}},{key:"render",value:function(){return b.default.createElement("span",{className:"file-picker",onClick:this.showPicker},this.props.children)}}]),t}(b.default.Component);t.default=C,C.displayName="FilePicker",C.propTypes={multiple:b.default.PropTypes.bool,directory:b.default.PropTypes.bool,accept:b.default.PropTypes.string,onClick:b.default.PropTypes.func,onPick:b.default.PropTypes.func},C.defaultProps={multiple:!1,directory:!1,accept:null,onClick:h.default,onPick:h.default},e.exports=t.default},"./client/components/foldable-card/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=o(p),m=n("./node_modules/lodash/noop.js"),h=o(m),g=n("./node_modules/react/react.js"),y=o(g),v=n("./node_modules/classnames/index.js"),b=o(v),_=n("./node_modules/i18n-calypso/index.js"),x=n("./client/components/card/index.jsx"),C=o(x),E=n("./client/components/card/compact.jsx"),w=o(E),j=n("./node_modules/gridicons/build/index.js"),S=o(j),T=n("./client/components/screen-reader-text/index.js"),P=o(T),k=function(e){function t(){var e,n,o,r;(0,a.default)(this,t);for(var s=arguments.length,l=Array(s),d=0;d<s;d++)l[d]=arguments[d];return n=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),
o.state={expanded:o.props.expanded},o.onClick=function(){o.props.children&&o.setState({expanded:!o.state.expanded}),o.props.onClick&&o.props.onClick(),o.state.expanded?o.props.onClose(o.props.cardKey):o.props.onOpen(o.props.cardKey)},r=n,(0,c.default)(o,r)}return(0,f.default)(t,e),(0,d.default)(t,[{key:"componentWillReceiveProps",value:function(e){e.expanded!==this.props.expanded&&this.setState({expanded:e.expanded})}},{key:"getClickAction",value:function(){if(!this.props.disabled)return this.onClick}},{key:"getActionButton",value:function(){return this.state.expanded?this.props.actionButtonExpanded||this.props.actionButton:this.props.actionButton}},{key:"renderActionButton",value:function(){var e=this.props.clickableHeader?null:this.getClickAction();if(this.props.actionButton)return y.default.createElement("div",{className:"foldable-card__action",onClick:e},this.getActionButton());if(this.props.children){var t=24,n=this.props.screenReaderText||this.props.translate("More");return y.default.createElement("button",{disabled:this.props.disabled,type:"button",className:"foldable-card__action foldable-card__expand",onClick:e},y.default.createElement(P.default,null,n),y.default.createElement(S.default,{icon:this.props.icon,size:t}))}}},{key:"renderContent",value:function(){return y.default.createElement("div",{className:"foldable-card__content"},this.props.children)}},{key:"renderHeader",value:function(){var e=this.props.summary?y.default.createElement("span",{className:"foldable-card__summary"},this.props.summary," "):null,t=this.props.expandedSummary?y.default.createElement("span",{className:"foldable-card__summary-expanded"},this.props.expandedSummary," "):null,n=this.props.clickableHeader?this.getClickAction():null,o=(0,b.default)("foldable-card__header",{"is-clickable":!!this.props.clickableHeader,"has-border":!!this.props.summary});return y.default.createElement("div",{className:o,onClick:n},y.default.createElement("span",{className:"foldable-card__main"},this.props.header," "),y.default.createElement("span",{className:"foldable-card__secondary"},e,t,this.renderActionButton()))}},{key:"render",value:function(){var e=this.props.compact?w.default:C.default,t=(0,b.default)("foldable-card",this.props.className,{"is-disabled":!!this.props.disabled,"is-expanded":!!this.state.expanded,"has-expanded-summary":!!this.props.expandedSummary});return y.default.createElement(e,{className:t},this.renderHeader(),this.state.expanded&&this.renderContent())}}]),t}(g.Component);k.propTypes={actionButton:g.PropTypes.element,actionButtonExpanded:g.PropTypes.element,cardKey:g.PropTypes.string,compact:g.PropTypes.bool,disabled:g.PropTypes.bool,expandedSummary:g.PropTypes.oneOfType([g.PropTypes.string,g.PropTypes.element]),expanded:g.PropTypes.bool,icon:g.PropTypes.string,onClick:g.PropTypes.func,onClose:g.PropTypes.func,onOpen:g.PropTypes.func,screenReaderText:g.PropTypes.oneOfType([g.PropTypes.string,g.PropTypes.bool]),summary:g.PropTypes.oneOfType([g.PropTypes.string,g.PropTypes.element])},k.defaultProps={onOpen:h.default,onClose:h.default,cardKey:"",icon:"chevron-down",expanded:!1,screenReaderText:!1},t.default=(0,_.localize)(k),e.exports=t.default},"./client/components/forms/form-checkbox/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/helpers/extends.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/objectWithoutProperties.js"),a=o(s),l=n("./node_modules/react/react.js"),d=o(l),u=n("./node_modules/classnames/index.js"),c=o(u),p=function(e){var t=e.className,n=(0,a.default)(e,["className"]);return d.default.createElement("input",(0,i.default)({},n,{type:"checkbox",className:(0,c.default)(t,"form-checkbox")}))};t.default=p,e.exports=t.default},"./client/components/forms/form-currency-input/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){if(!e)return null;if(!n)return e;var o=(0,c.default)((0,f.default)(n,function(t){return t.code===e}),"label",e);return h.default.createElement("span",{className:"form-currency-input__affix"},o,h.default.createElement(x.default,{icon:"chevron-down",size:18,className:"form-currency-input__select-icon"}),h.default.createElement("select",{className:"form-currency-input__select",value:e,onChange:t},n.map(function(e){var t=e.code,n=e.label,o=void 0===n?t:n;return h.default.createElement("option",{key:t,value:t},o)})))}function i(e){var t=e.className,n=e.currencySymbolPrefix,o=e.currencySymbolSuffix,i=e.onCurrencyChange,s=e.currencyList,l=e.placeholder,u=void 0===l?"0.00":l,c=(0,d.default)(e,["className","currencySymbolPrefix","currencySymbolSuffix","onCurrencyChange","currencyList","placeholder"]),p=(0,b.default)("form-currency-input",t),f=r(n,i,s),m=r(o,i,s);return h.default.createElement(E.default,(0,a.default)({},c,{type:"number",className:p,prefix:f,suffix:m,placeholder:u}))}Object.defineProperty(t,"__esModule",{value:!0});var s=n("./node_modules/babel-runtime/helpers/extends.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/objectWithoutProperties.js"),d=o(l),u=n("./node_modules/lodash/get.js"),c=o(u),p=n("./node_modules/lodash/find.js"),f=o(p),m=n("./node_modules/react/react.js"),h=o(m),g=n("./node_modules/prop-types/index.js"),y=o(g),v=n("./node_modules/classnames/index.js"),b=o(v),_=n("./node_modules/gridicons/build/index.js"),x=o(_),C=n("./client/components/forms/form-text-input-with-affixes/index.jsx"),E=o(C),w=y.default.shape({code:y.default.string.isRequired,label:y.default.string});i.propTypes={currencySymbolPrefix:y.default.string,currencySymbolSuffix:y.default.string,onCurrencyChange:y.default.func,currencyList:y.default.arrayOf(w)},t.default=i,e.exports=t.default},"./client/components/forms/form-input-validation/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=o(p),m=n("./node_modules/react/react.js"),h=o(m),g=n("./node_modules/prop-types/index.js"),y=o(g),v=n("./node_modules/classnames/index.js"),b=o(v),_=n("./node_modules/gridicons/build/index.js"),x=o(_),C=function(e){function t(){return(0,a.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){var e=(0,b.default)({"form-input-validation":!0,"is-warning":this.props.isWarning,"is-error":this.props.isError}),t=this.props.isError||this.props.isWarning?"notice-outline":"checkmark";return h.default.createElement("div",{className:e},h.default.createElement("span",null,h.default.createElement(x.default,{size:24,icon:this.props.icon?this.props.icon:t})," ",this.props.text))}}]),t}(h.default.Component);C.displayName="FormInputValidation",C.propTypes={isError:y.default.bool,isWarning:y.default.bool,text:y.default.node,icon:y.default.string},C.defaultProps={isError:!1},t.default=C,e.exports=t.default},"./client/components/forms/form-legend/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/helpers/extends.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/objectWithoutProperties.js"),a=o(s),l=n("./node_modules/react/react.js"),d=o(l),u=n("./node_modules/classnames/index.js"),c=o(u),p=function(e){var t=e.className,n=e.children,o=(0,a.default)(e,["className","children"]);return d.default.createElement("legend",(0,i.default)({},o,{className:(0,c.default)(t,"form-legend")}),n)};t.default=p,e.exports=t.default},"./client/components/forms/form-radio/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/helpers/extends.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/objectWithoutProperties.js"),a=o(s),l=n("./node_modules/react/react.js"),d=o(l),u=n("./node_modules/classnames/index.js"),c=o(u),p=function(e){var t=e.className,n=(0,a.default)(e,["className"]);return d.default.createElement("input",(0,i.default)({},n,{type:"radio",className:(0,c.default)(t,"form-radio")}))};t.default=p,e.exports=t.default},"./client/components/forms/form-range/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/helpers/extends.js"),i=o(r),s=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/createClass.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),f=o(p),m=n("./node_modules/babel-runtime/helpers/inherits.js"),h=o(m),g=n("./node_modules/lodash/noop.js"),y=o(g),v=n("./node_modules/lodash/omit.js"),b=o(v),_=n("./node_modules/react/react.js"),x=o(_),C=n("./node_modules/prop-types/index.js"),E=o(C),w=n("./node_modules/classnames/index.js"),j=o(w),S=function(e){function t(){var e,n,o,r;(0,d.default)(this,t);for(var i=arguments.length,s=Array(i),l=0;l<i;l++)s[l]=arguments[l];return n=o=(0,f.default)(this,(e=t.__proto__||(0,a.default)(t)).call.apply(e,[this].concat(s))),o.shouldNormalizeChange=function(){var e=window.navigator.userAgent;return-1!==e.indexOf("MSIE")||-1!==e.indexOf("Trident/")},o.onChange=function(e){o.props.onChange(e)},r=n,(0,f.default)(o,r)}return(0,h.default)(t,e),(0,c.default)(t,[{key:"componentDidMount",value:function(){this.shouldNormalizeChange()&&this.refs.range.addEventListener("change",this.onChange)}},{key:"componentWillUnmount",value:function(){this.refs.range.removeEventListener("change",this.onChange)}},{key:"render",value:function(){var e=(0,j.default)(this.props.className,"form-range");return x.default.createElement("input",(0,i.default)({ref:"range",type:"range",className:e},(0,b.default)(this.props,"className")))}}]),t}(x.default.Component);S.displayName="FormRange",S.propTypes={onChange:E.default.func},S.defaultProps={onChange:y.default},t.default=S,e.exports=t.default},"./client/components/forms/form-section-heading/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/helpers/extends.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/objectWithoutProperties.js"),a=o(s),l=n("./node_modules/react/react.js"),d=o(l),u=n("./node_modules/classnames/index.js"),c=o(u),p=function(e){var t=e.className,n=e.children,o=(0,a.default)(e,["className","children"]);return d.default.createElement("h3",(0,i.default)({},o,{className:(0,c.default)(t,"form-section-heading")}),n)};t.default=p,e.exports=t.default},"./client/components/forms/form-setting-explanation/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/helpers/extends.js"),i=o(r),s=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/createClass.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),f=o(p),m=n("./node_modules/babel-runtime/helpers/inherits.js"),h=o(m),g=n("./node_modules/lodash/omit.js"),y=o(g),v=n("./node_modules/react/react.js"),b=o(v),_=n("./node_modules/prop-types/index.js"),x=o(_),C=n("./node_modules/classnames/index.js"),E=o(C),w=function(e){function t(){return(0,d.default)(this,t),(0,f.default)(this,(t.__proto__||(0,a.default)(t)).apply(this,arguments))}return(0,h.default)(t,e),(0,c.default)(t,[{key:"render",value:function(){var e=(0,E.default)(this.props.className,"form-setting-explanation",{"no-validate":this.props.noValidate,"is-indented":this.props.isIndented});return b.default.createElement("p",(0,i.default)({},(0,y.default)(this.props,"className","noValidate","isIndented"),{className:e}),this.props.children)}}]),t}(b.default.Component);w.displayName="FormSettingExplanation",w.propTypes={noValidate:x.default.bool,isIndented:x.default.bool,className:x.default.string},w.defaultProps={noValidate:!1,isIndented:!1},t.default=w,e.exports=t.default},"./client/components/forms/form-text-input-with-affixes/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/helpers/objectWithoutProperties.js"),i=o(r),s=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/createClass.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),f=o(p),m=n("./node_modules/babel-runtime/helpers/inherits.js"),h=o(m),g=n("./node_modules/react/react.js"),y=o(g),v=n("./node_modules/prop-types/index.js"),b=o(v),_=n("./node_modules/classnames/index.js"),x=o(_),C=n("./client/components/forms/form-text-input/index.jsx"),E=o(C),w=function(e){function t(){return(0,d.default)(this,t),(0,f.default)(this,(t.__proto__||(0,a.default)(t)).apply(this,arguments))}return(0,h.default)(t,e),(0,c.default)(t,[{key:"render",value:function(){var e=this.props,t=e.noWrap,n=e.prefix,o=e.suffix,r=(0,i.default)(e,["noWrap","prefix","suffix"]);return y.default.createElement("div",{className:(0,x.default)("form-text-input-with-affixes",{"no-wrap":t})},n&&y.default.createElement("span",{className:"form-text-input-with-affixes__prefix"},n),y.default.createElement(E.default,r),o&&y.default.createElement("span",{className:"form-text-input-with-affixes__suffix"},o))}}]),t}(y.default.Component);w.displayName="FormTextInputWithAffixes",w.propTypes={noWrap:b.default.bool,prefix:b.default.node,suffix:b.default.node},t.default=w,e.exports=t.default},"./client/components/forms/form-textarea/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/helpers/extends.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/objectWithoutProperties.js"),a=o(s),l=n("./node_modules/react/react.js"),d=o(l),u=n("./node_modules/classnames/index.js"),c=o(u),p=function(e){var t=e.className,n=e.isError,o=e.isValid,r=e.children,s=(0,a.default)(e,["className","isError","isValid","children"]);return d.default.createElement("textarea",(0,i.default)({},s,{className:(0,c.default)(t,"form-textarea",{"is-error":n,"is-valid":o})}),r)};t.default=p,e.exports=t.default},"./client/components/forms/form-toggle/compact.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/helpers/extends.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/objectWithoutProperties.js"),a=o(s),l=n("./node_modules/react/react.js"),d=o(l),u=n("./node_modules/classnames/index.js"),c=o(u),p=n("./client/components/forms/form-toggle/index.jsx"),f=o(p),m=function(e){var t=e.className,n=e.children,o=(0,a.default)(e,["className","children"]);return d.default.createElement(f.default,(0,i.default)({},o,{className:(0,c.default)(t,"is-compact")}),n)};t.default=m,e.exports=t.default},"./client/components/forms/form-toggle/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=o(p),m=n("./node_modules/lodash/noop.js"),h=o(m),g=n("./node_modules/react/react.js"),y=o(g),v=n("./node_modules/prop-types/index.js"),b=o(v),_=n("./node_modules/classnames/index.js"),x=o(_),C=function(e){function t(){var e,n,o,r;(0,a.default)(this,t);for(var s=arguments.length,l=Array(s),d=0;d<s;d++)l[d]=arguments[d];return n=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.onKeyDown=function(e){o.props.disabled||("Enter"!==e.key&&" "!==e.key||(e.preventDefault(),o.props.onChange(!o.props.checked)),o.props.onKeyDown(e))},o.onClick=function(e){e&&e.stopPropagation&&e.stopPropagation(),o.props.disabled||o.props.onChange(!o.props.checked)},o.onLabelClick=function(e){if(!o.props.disabled){var t=e.target.nodeName.toLowerCase();"a"!==t&&"input"!==t&&"select"!==t&&(e.preventDefault(),o.props.onChange(!o.props.checked))}},r=n,(0,c.default)(o,r)}return(0,f.default)(t,e),(0,d.default)(t,[{key:"componentWillMount",value:function(){this.id=this.constructor.idNum++}},{key:"render",value:function(){var e=this.props.id||"toggle-"+this.id,t=(0,x.default)("form-toggle__wrapper",{"is-disabled":this.props.disabled}),n=(0,x.default)("form-toggle",this.props.className,{"is-toggling":this.props.toggling});return y.default.createElement("span",{className:t},y.default.createElement("input",{id:e,className:n,type:"checkbox",checked:this.props.checked,readOnly:!0,disabled:this.props.disabled}),y.default.createElement("label",{className:"form-toggle__label",htmlFor:e},y.default.createElement("span",{className:"form-toggle__switch",onClick:this.onClick,onKeyDown:this.onKeyDown,role:"checkbox","aria-checked":this.props.checked,"aria-label":this.props["aria-label"],tabIndex:this.props.disabled?-1:0}),y.default.createElement("span",{className:"form-toggle__label-content",onClick:this.onLabelClick},this.props.children)))}}]),t}(g.PureComponent);C.propTypes={onChange:b.default.func,onKeyDown:b.default.func,checked:b.default.bool,disabled:b.default.bool,id:b.default.string,className:b.default.string,toggling:b.default.bool,"aria-label":b.default.string,children:b.default.node},C.defaultProps={checked:!1,disabled:!1,onKeyDown:h.default,onChange:h.default},C.idNum=0,t.default=C,e.exports=t.default},"./client/components/forms/range/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/helpers/extends.js"),i=o(r),s=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/createClass.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),f=o(p),m=n("./node_modules/babel-runtime/helpers/inherits.js"),h=o(m),g=n("./node_modules/lodash/uniqueId.js"),y=o(g),v=n("./node_modules/lodash/omit.js"),b=o(v),_=n("./node_modules/react/react.js"),x=o(_),C=n("./node_modules/prop-types/index.js"),E=o(C),w=n("./node_modules/classnames/index.js"),j=o(w),S=n("./client/components/forms/form-range/index.jsx"),T=o(S),P=function(e){function t(){var e,n,o,r;(0,d.default)(this,t);for(var i=arguments.length,s=Array(i),l=0;l<i;l++)s[l]=arguments[l];return n=o=(0,f.default)(this,(e=t.__proto__||(0,a.default)(t)).call.apply(e,[this].concat(s))),o.state={id:(0,y.default)("range")},o.getMinContentElement=function(){if(o.props.minContent)return x.default.createElement("span",{className:"range__content is-min"},o.props.minContent)},o.getMaxContentElement=function(){if(o.props.maxContent)return x.default.createElement("span",{className:"range__content is-max"},o.props.maxContent)},o.getValueLabelElement=function(){var e,t;if(o.props.showValueLabel)return e=100*(o.props.value-o.props.min)/(o.props.max-o.props.min),t=Math.floor(13*((50-e)/50)),x.default.createElement("span",{className:"range__label",style:{left:(e||0)+"%",marginLeft:t}},x.default.createElement("output",{className:"range__label-inner",htmlFor:o.state.id,value:o.props.value},o.props.value))},r=n,(0,f.default)(o,r)}return(0,h.default)(t,e),(0,c.default)(t,[{key:"render",value:function(){var e=(0,j.default)(this.props.className,"range",{"has-min-content":!!this.props.minContent,"has-max-content":!!this.props.maxContent});return x.default.createElement("div",{className:e},this.getMinContentElement(),x.default.createElement(T.default,(0,i.default)({id:this.state.id,className:"range__input"},(0,b.default)(this.props,"minContent","maxContent","showValueLabel","className"))),this.getMaxContentElement(),this.getValueLabelElement())}}]),t}(x.default.Component);P.displayName="Range",P.propTypes={minContent:E.default.oneOfType([E.default.element,E.default.string]),maxContent:E.default.oneOfType([E.default.element,E.default.string]),min:E.default.oneOfType([E.default.string,E.default.number]),max:E.default.oneOfType([E.default.string,E.default.number]),value:E.default.oneOfType([E.default.string,E.default.number]),showValueLabel:E.default.bool},P.defaultProps={min:0,max:10,value:0,showValueLabel:!1},t.default=P,e.exports=t.default},"./client/components/forms/sortable-list/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/helpers/extends.js"),i=o(r),s=n("./node_modules/babel-runtime/core-js/object/keys.js"),a=o(s),l=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/createClass.js"),f=o(p),m=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),h=o(m),g=n("./node_modules/babel-runtime/helpers/inherits.js"),y=o(g),v=n("./node_modules/lodash/noop.js"),b=o(v),_=n("./node_modules/lodash/fromPairs.js"),x=o(_),C=n("./node_modules/lodash/findIndex.js"),E=o(C),w=n("./node_modules/lodash/assign.js"),j=o(w),S=n("./node_modules/react/react.js"),T=o(S),P=n("./node_modules/prop-types/index.js"),k=o(P),I=n("./node_modules/i18n-calypso/index.js"),N=n("./node_modules/classnames/index.js"),R=o(N),D=n("./node_modules/debug/browser.js"),M=o(D),O=n("./client/lib/touch-detect/index.js"),A=o(O),L=(0,M.default)("calypso:forms:sortable-list"),F=function(e){function t(){var e,n,o,r;(0,c.default)(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=o=(0,h.default)(this,(e=t.__proto__||(0,d.default)(t)).call.apply(e,[this].concat(l))),o.state={activeIndex:null,activeOrder:null,position:null},o.getPositionForCursorElement=function(e,t){return{top:t.clientY-e.clientHeight/2,left:t.clientX-e.clientWidth/2}},o.compareCursorVerticalToElement=function(e,t){var n=e.getBoundingClientRect();return t.clientY<n.top?-1:t.clientY>n.bottom?1:0},o.isCursorBeyondElementThreshold=function(e,t,n,o){var r=e.getBoundingClientRect();switch(t){case"top":return o.clientY<=r.top+r.height/2;case"right":return o.clientX>=r.left+r.width/2&&("top"===n||o.clientY>=r.top)&&("bottom"===n||o.clientY<=r.bottom);case"bottom":return o.clientY>=r.top+r.height/2;case"left":return o.clientX<=r.left+r.width/2&&("top"===n||o.clientY>=r.top)&&("bottom"===n||o.clientY<=r.bottom);default:return!1}},o.getAdjustedElementIndex=function(e){return o.state.activeOrder?o.state.activeOrder[e]:e},o.getCursorElementIndex=function(e){var t,n=o.compareCursorVerticalToElement(o.refs.list,e),r=o.getAdjustedElementIndex(o.state.activeIndex),i=o.refs["wrap-shadow-"+o.state.activeIndex].getBoundingClientRect();return t=(0,E.default)(o.props.children,function(t,s){var a,l,d;return s!==o.state.activeIndex&&(l=o.getAdjustedElementIndex(s),"horizontal"===o.props.direction&&(1===n&&o.refs["wrap-"+s].getBoundingClientRect().top>=i.top?d="bottom":-1===n&&o.refs["wrap-"+s].getBoundingClientRect().bottom<=i.bottom&&(d="top")),l<r?a=o.isCursorBeyondElementThreshold(o.refs["wrap-"+s],"horizontal"===o.props.direction?"left":"top",d,e):l>r&&(a=a||o.isCursorBeyondElementThreshold(o.refs["wrap-"+s],"horizontal"===o.props.direction?"right":"bottom",d,e)),a)}),o.getAdjustedElementIndex(t)},o.moveItem=function(e){var t="previous"===e?-1:1,n=(0,a.default)(o.props.children).map(Number);n[o.state.activeIndex+t]=o.state.activeIndex,n[o.state.activeIndex]=o.state.activeIndex+t,o.props.onChange(n),o.setState({activeIndex:n[o.state.activeIndex]})},o.onMouseDown=function(e,t){o.setState({activeIndex:e,position:o.getPositionForCursorElement(t.currentTarget.firstChild,t)})},o.onMouseMove=function(e){var t,n;if(null!==o.state.activeIndex&&o.props.allowDrag&&!A.default.hasTouch()){if(t=o.state.activeOrder,n=o.getCursorElementIndex(e),n>=0)if(o.state.activeIndex===n)t=null;else{t=(0,a.default)(o.props.children).map(Number);for(var r=0,i=t.length;r<i;r++)r>=n&&r<o.state.activeIndex?t[r]=r+1:r<=n&&r>o.state.activeIndex&&(t[r]=r-1);t[o.state.activeIndex]=n}o.setState({position:o.getPositionForCursorElement(o.refs["wrap-"+o.state.activeIndex].firstChild,e),activeOrder:t})}},o.onMouseUp=function(){o.state.activeOrder&&o.props.onChange(o.state.activeOrder),o.setState({activeIndex:null,activeOrder:null,position:null})},o.onClick=function(e){o.setState({activeIndex:e})},o.getOrderedListItemElements=function(){return T.default.Children.map(o.props.children,function(e,t){var n,o=this.state.activeIndex===t,r=this.props.allowDrag&&!A.default.hasTouch(),s=r?["onMouseDown","onMouseUp"]:["onClick"],a={order:this.getAdjustedElementIndex(t)},l=(0,R.default)({"sortable-list__item":!0,"is-active":o,"is-draggable":r});return s=(0,x.default)(s.map(function(e){return[e,this[e].bind(null,t)]},this)),o&&(0,j.default)(a,this.state.position),n=T.default.createElement("li",(0,i.default)({ref:"wrap-"+t,key:"wrap-"+t},s,{className:l,style:a}),e),o&&r?[T.default.createElement("li",{ref:"wrap-shadow-"+t,key:"wrap-shadow-"+t,className:"sortable-list__item is-shadow",style:a},e),n]:n},o)},o.getNavigationElement=function(){if(!o.props.allowDrag||A.default.hasTouch())return T.default.createElement("div",{className:"sortable-list__navigation"},T.default.createElement("button",{type:"button",onClick:o.moveItem.bind(null,"previous"),className:"sortable-list__navigation-button is-previous",disabled:null===o.state.activeIndex||0===o.state.activeIndex},T.default.createElement("span",{className:"screen-reader-text"},o.props.translate("Move previous")),T.default.createElement("span",{className:"noticon noticon-expand"})),T.default.createElement("button",{type:"button",onClick:o.moveItem.bind(null,"next"),className:"sortable-list__navigation-button is-next",disabled:null===o.state.activeIndex||o.state.activeIndex===o.props.children.length-1},T.default.createElement("span",{className:"screen-reader-text"},o.props.translate("Move next")),T.default.createElement("span",{className:"noticon noticon-collapse"})))},r=n,(0,h.default)(o,r)}return(0,y.default)(t,e),(0,f.default)(t,[{key:"componentWillMount",value:function(){L("Mounting "+this.constructor.displayName+" React component.")}},{key:"componentDidMount",value:function(){document.addEventListener("mousemove",this.onMouseMove)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousemove",this.onMouseMove)}},{key:"render",value:function(){var e=(0,R.default)({"sortable-list":!0,"is-horizontal":"horizontal"===this.props.direction,"is-vertical":"vertical"===this.props.direction});return T.default.createElement("div",{className:e},T.default.createElement("ol",{ref:"list",className:"sortable-list__list"},this.getOrderedListItemElements()),this.getNavigationElement())}}]),t}(T.default.Component);F.propTypes={direction:k.default.oneOf(["horizontal","vertical"]),allowDrag:k.default.bool,onChange:k.default.func},F.defaultProps={direction:"horizontal",allowDrag:!0,onChange:b.default},t.default=(0,I.localize)(F),e.exports=t.default},"./client/components/gallery-shortcode/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/helpers/extends.js"),i=o(r),s=n("./node_modules/babel-runtime/core-js/object/keys.js"),a=o(s),l=n("./node_modules/lodash/pick.js"),d=o(l),u=n("./node_modules/lodash/omit.js"),c=o(u),p=n("./node_modules/lodash/assign.js"),f=o(p),m=n("./node_modules/react/react.js"),h=o(m),g=n("./node_modules/classnames/index.js"),y=o(g),v=n("./node_modules/debug/browser.js"),b=o(v),_=n("./client/components/shortcode/index.jsx"),x=o(_),C=n("./client/lib/shortcode/index.js"),E=n("./client/lib/media/utils.js"),w=o(E),j=n("./client/lib/media/constants.js"),S=(0,b.default)("calypso:gallery-shortcode");t.default=h.default.createClass({displayName:"GalleryShortcode",propTypes:{siteId:m.PropTypes.number.isRequired,children:m.PropTypes.string,items:m.PropTypes.array,type:m.PropTypes.string,columns:m.PropTypes.number,orderBy:m.PropTypes.string,link:m.PropTypes.string,size:m.PropTypes.string,className:m.PropTypes.string},getDefaultProps:function(){return j.GalleryDefaultAttrs},filterRenderResult:function(e){if(!e.body&&!e.scripts&&!e.styles)return e;var t=(0,f.default)({},e,{scripts:{"tiled-gallery":{src:"https://s0.wp.com/wp-content/mu-plugins/tiled-gallery/tiled-gallery.js"}},styles:{"tiled-gallery":{src:"https://s0.wp.com/wp-content/mu-plugins/tiled-gallery/tiled-gallery.css"},"gallery-styles":{src:"https://widgets.wp.com/gallery-preview/style.css"}}});return"slideshow"===this.getAttributes().type&&(0,f.default)(t,{scripts:{"jquery-cycle":{src:"https://s0.wp.com/wp-content/mu-plugins/shortcodes/js/jquery.cycle.min.js"},"jetpack-slideshow":{src:"https://s0.wp.com/wp-content/mu-plugins/shortcodes/js/slideshow-shortcode.js",extra:'var jetpackSlideshowSettings = { "spinner": "https://s0.wp.com/wp-content/mu-plugins/shortcodes/img/slideshow-loader.gif" };'}},styles:{"jetpack-slideshow":{src:"https://s0.wp.com/wp-content/mu-plugins/shortcodes/css/slideshow-shortcode.css"}}}),t},getAttributes:function(){var e=(0,d.default)(this.props,"items","type","columns","orderBy","link","size");return this.props.children&&(0,f.default)(e,(0,C.parse)(this.props.children).attrs.named),e},getShortcode:function(){return this.props.children?this.props.children:w.default.generateGalleryShortcode(this.getAttributes())},render:function(){var e=this.getShortcode();if(!e)return null;var t=(0,y.default)("gallery-shortcode",this.props.className);return S(e),h.default.createElement(x.default,(0,i.default)({},(0,c.default)(this.props,(0,a.default)(this.constructor.propTypes)),{siteId:this.props.siteId,filterRenderResult:this.filterRenderResult,className:t}),e)}}),e.exports=t.default},"./client/components/header-cake/back.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=o(p),m=n("./node_modules/lodash/throttle.js"),h=o(m),g=n("./node_modules/react/react.js"),y=o(g),v=n("./node_modules/prop-types/index.js"),b=o(v),_=n("./node_modules/classnames/index.js"),x=o(_),C=n("./node_modules/i18n-calypso/index.js"),E=n("./node_modules/gridicons/build/index.js"),w=o(E),j=n("./client/components/button/index.jsx"),S=o(j),T=n("./client/lib/viewport/index.js"),P=o(T),k={windowWidth:480,characterLength:8},I=function(e){function t(){var e,n,o,r;(0,a.default)(this,t);
for(var s=arguments.length,l=Array(s),d=0;d<s;d++)l[d]=arguments[d];return n=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.state={windowWidth:P.default.getWindowInnerWidth()},o.handleWindowResize=function(){o.setState({windowWidth:P.default.getWindowInnerWidth()})},r=n,(0,c.default)(o,r)}return(0,f.default)(t,e),(0,d.default)(t,[{key:"componentDidMount",value:function(){this.resizeThrottled=(0,h.default)(this.handleWindowResize,100),window.addEventListener("resize",this.resizeThrottled)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.resizeThrottled)}},{key:"hideText",value:function(e){return this.state.windowWidth<=k.windowWidth&&e.length>=k.characterLength||this.state.windowWidth<=300}},{key:"render",value:function(){var e=this.props,t=e.href,n=e.icon,o=e.onClick,r=e.spacer,i=e.text,s=e.translate,a=void 0===i?s("Back"):i,l=(0,x.default)({"header-cake__back":!0,"is-spacer":r,"is-action":!!n});return y.default.createElement(S.default,{compact:!0,borderless:!0,className:l,href:t,onClick:o,disabled:r},y.default.createElement(w.default,{icon:n||"arrow-left",size:18}),!this.hideText(a)&&a)}}]),t}(g.Component);I.propTypes={onClick:b.default.func,href:b.default.string,text:b.default.string,spacer:b.default.bool},I.defaultProps={spacer:!1,disabled:!1},t.default=(0,C.localize)(I),e.exports=t.default},"./client/components/header-cake/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=o(p),m=n("./node_modules/react/react.js"),h=o(m),g=n("./node_modules/classnames/index.js"),y=o(g),v=n("./client/components/card/index.jsx"),b=o(v),_=n("./client/components/header-cake/back.jsx"),x=o(_),C=function(e){function t(){return(0,a.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){var e=this.props,t=e.backText,n=e.backHref,o=e.actionButton,r=e.actionText,i=e.actionIcon,s=e.actionHref,a=e.actionOnClick,l=(0,y.default)("header-cake",this.props.className,{"is-compact":this.props.isCompact});return h.default.createElement(b.default,{className:l},h.default.createElement(x.default,{text:t,href:n,onClick:this.props.onClick}),h.default.createElement("div",{className:"header-cake__title",onClick:this.props.onTitleClick},this.props.children),o||h.default.createElement(x.default,{text:r||t,href:s||n,onClick:a,icon:i,spacer:!a}))}}]),t}(m.Component);t.default=C,C.displayName="HeaderCake",C.propTypes={onClick:m.PropTypes.func,onTitleClick:m.PropTypes.func,backText:m.PropTypes.string,backHref:m.PropTypes.string,actionButton:m.PropTypes.element,actionText:m.PropTypes.string,actionHref:m.PropTypes.string,actionIcon:m.PropTypes.string,actionOnClick:m.PropTypes.func},C.defaultProps={isCompact:!1},e.exports=t.default},"./client/components/image-preloader/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/helpers/extends.js"),i=o(r),s=n("./node_modules/babel-runtime/core-js/object/keys.js"),a=o(s),l=n("./node_modules/lodash/omit.js"),d=o(l),u=n("./node_modules/lodash/noop.js"),c=o(u),p=n("./node_modules/react/react.js"),f=o(p),m={PENDING:"PENDING",LOADING:"LOADING",LOADED:"LOADED",FAILED:"FAILED"};t.default=f.default.createClass({displayName:"ImagePreloader",propTypes:{src:f.default.PropTypes.string,placeholder:f.default.PropTypes.element.isRequired,children:f.default.PropTypes.node,onLoad:f.default.PropTypes.func,onError:f.default.PropTypes.func},getInitialState:function(){return{status:m.PENDING}},componentWillMount:function(){this.createLoader()},componentWillReceiveProps:function(e){e.src!==this.props.src&&this.createLoader(e)},componentWillUnmount:function(){this.destroyLoader()},createLoader:function(e){var t=(e||this.props).src;this.destroyLoader(),this.setState({status:m.LOADING}),t&&(this.image=new Image,this.image.src=t,this.image.onload=this.onLoadComplete,this.image.onerror=this.onLoadComplete)},destroyLoader:function(){this.image&&(this.image.onload=c.default,this.image.onerror=c.default,delete this.image)},onLoadComplete:function(e){var t=this;return this.destroyLoader(),"load"!==e.type?this.setState({status:m.FAILED},function(){t.props.onError&&t.props.onError(e)}):void this.setState({status:m.LOADED},function(){t.props.onLoad&&t.props.onLoad(e)})},render:function(){var e=void 0,t=void 0;switch(this.state.status){case m.LOADING:e=this.props.placeholder;break;case m.LOADED:t=(0,d.default)(this.props,(0,a.default)(this.constructor.propTypes)),e=f.default.createElement("img",(0,i.default)({src:this.props.src},t));break;case m.FAILED:e=this.props.children}return f.default.createElement("div",{className:"image-preloader"},e)}}),e.exports=t.default},"./client/components/infinite-list/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var r=n("./node_modules/babel-runtime/core-js/object/keys.js"),i=o(r),s=n("./node_modules/lodash/omit.js"),a=o(s),l=n("./node_modules/debug/browser.js"),d=o(l),u=n("./node_modules/page/index.js"),c=o(u),p=n("./node_modules/react/react.js"),f=o(p),m=n("./node_modules/react-dom/index.js"),h=o(m),g=n("./client/lib/detect-history-navigation/index.js"),y=o(g),v=n("./client/lib/infinite-list/actions.js"),b=o(v),_=n("./client/lib/infinite-list/positions-store.js"),x=o(_),C=n("./client/lib/infinite-list/scroll-store.js"),E=o(C),w=n("./client/components/infinite-list/scroll-helper.js"),j=o(w),S=n("./client/lib/scroll-to/index.js"),T=o(S),P=n("./client/lib/react-smart-set-state/index.js"),k=o(P),I=(0,d.default)("calypso:infinite-list");e.exports=f.default.createClass({displayName:"InfiniteList",lastScrollTop:-1,scrollRAFHandle:!1,scrollHelper:null,isScrolling:!1,propTypes:{items:f.default.PropTypes.array.isRequired,fetchingNextPage:f.default.PropTypes.bool.isRequired,lastPage:f.default.PropTypes.bool.isRequired,guessedItemHeight:f.default.PropTypes.number.isRequired,itemsPerRow:f.default.PropTypes.number,fetchNextPage:f.default.PropTypes.func.isRequired,getItemRef:f.default.PropTypes.func.isRequired,renderItem:f.default.PropTypes.func.isRequired,renderLoadingPlaceholders:f.default.PropTypes.func.isRequired,renderTrailingItems:f.default.PropTypes.func,context:f.default.PropTypes.oneOfType([f.default.PropTypes.object,f.default.PropTypes.bool])},getDefaultProps:function(){return{itemsPerRow:1,renderTrailingItems:function(){}}},smartSetState:k.default,componentWillMount:function(){var e=c.default.current,t=void 0,n=void 0;y.default.loadedViaHistory()&&(t=x.default.get(e),n=E.default.get(e)),t&&n&&(I("overriding scrollTop:",n),t.scrollTop=n),this.scrollHelper=new j.default(this.boundsForRef),this.scrollHelper.props=this.props,this._contextLoaded()&&(this._scrollContainer=this.props.context||window,this.scrollHelper.updateContextHeight(this.getCurrentContextHeight())),this.isScrolling=!1,t?I("infinite-list positions loaded from store"):(I("infinite-list positions reset for new list"),t={firstRenderedIndex:0,topPlaceholderHeight:0,lastRenderedIndex:this.scrollHelper.initialLastRenderedIndex(),bottomPlaceholderHeight:0,scrollTop:0}),I("infinite list mounting",t),this.setState(t)},componentDidMount:function(){this._contextLoaded()&&this._setContainerY(this.state.scrollTop),y.default.loadedViaHistory()&&this._overrideHistoryScroll(),I("setting scrollTop:",this.state.scrollTop),this.updateScroll({triggeredByScroll:!1}),this._contextLoaded()&&this._scrollContainer.addEventListener("scroll",this.onScroll)},componentWillReceiveProps:function(e){this.scrollHelper.props=e,this.isScrolling||(this.cancelAnimationFrame(),this.updateScroll({triggeredByScroll:!1})),e.context!==this.props.context&&this._contextLoaded()&&this._scrollContainer.removeEventListener("scroll",this._resetScroll)},componentDidUpdate:function(e){this._contextLoaded()&&(this.props.context!==e.context&&(this._scrollContainer&&this._scrollContainer.removeEventListener("scroll",this.onScroll),this._scrollContainer=this.props.context||window,this._scrollContainer.addEventListener("scroll",this.onScroll),y.default.loadedViaHistory()&&this._overrideHistoryScroll()),this.isScrolling||(this.cancelAnimationFrame(),this.updateScroll({triggeredByScroll:!1})))},reset:function(){this.cancelAnimationFrame(),this.scrollHelper=new j.default(this.boundsForRef),this.scrollHelper.props=this.props,this._contextLoaded()&&(this._scrollContainer=this.props.context||window,this.scrollHelper.updateContextHeight(this.getCurrentContextHeight())),this.isScrolling=!1,this.setState({firstRenderedIndex:0,topPlaceholderHeight:0,lastRenderedIndex:this.scrollHelper.initialLastRenderedIndex(),bottomPlaceholderHeight:0,scrollTop:0})},componentWillUnmount:function(){this._scrollContainer.removeEventListener("scroll",this.onScroll),this._scrollContainer.removeEventListener("scroll",this._resetScroll),this.cancelAnimationFrame()},cancelAnimationFrame:function(){this.scrollRAFHandle&&(window.cancelAnimationFrame(this.scrollRAFHandle),this.scrollRAFHandle=null),this.lastScrollTop=-1},onScroll:function(){this.isScrolling||this.scrollRAFHandle||this.getCurrentScrollTop()===this.lastScrollTop||(this.scrollRAFHandle=window.requestAnimationFrame(this.scrollChecks))},getCurrentContextHeight:function(){var e=this.props.context||window.document.documentElement;return e.clientHeight},getCurrentScrollTop:function(){return this.props.context?(I("getting scrollTop from context"),this.props.context.scrollTop):window.pageYOffset},scrollChecks:function(){return this.isMounted()&&this.getCurrentScrollTop()!==this.lastScrollTop?void this.updateScroll({triggeredByScroll:!0}):void(this.scrollRAFHandle=null)},scrollToTop:function(){var e=this;this.cancelAnimationFrame(),this.isScrolling=!0,this.props.context&&this.props.context!==window?(this.props.context.scrollTop=0,this.updateScroll({triggeredByScroll:!1}),this.isScrolling=!1):(0,T.default)({x:0,y:0,duration:250,onComplete:function(){e.isMounted()&&e.updateScroll({triggeredByScroll:!1}),e.isScrolling=!1}})},updateScroll:function(e){var t=c.default.current,n=void 0;this._contextLoaded()&&(this.lastScrollTop=this.getCurrentScrollTop(),b.default.storeScroll(t,this.lastScrollTop),this.scrollHelper.updateContextHeight(this.getCurrentContextHeight()),this.scrollHelper.scrollPosition=this.lastScrollTop,this.scrollHelper.triggeredByScroll=e.triggeredByScroll,this.scrollHelper.updatePlaceholderDimensions(),this.scrollHelper.scrollChecks(this.state),this.scrollHelper.stateUpdated&&(n={firstRenderedIndex:this.scrollHelper.firstRenderedIndex,topPlaceholderHeight:this.scrollHelper.topPlaceholderHeight,lastRenderedIndex:this.scrollHelper.lastRenderedIndex,bottomPlaceholderHeight:this.scrollHelper.bottomPlaceholderHeight,scrollTop:this.lastScrollTop},this.lastScrollTop=-1,I("new scroll positions",n,this.state),this.smartSetState(n),b.default.storePositions(t,n)),this.scrollRAFHandle=window.requestAnimationFrame(this.scrollChecks))},boundsForRef:function(e){return e in this.refs?h.default.findDOMNode(this.refs[e]).getBoundingClientRect():null},getVisibleItemIndexes:function(e){var t=h.default.findDOMNode(this),n=[],o=this.state.firstRenderedIndex,r=this.state.lastRenderedIndex,i=e&&e.offsetTop?e.offsetTop:0,s=void 0,a=void 0,l=void 0,d=void 0,u=e&&e.offsetBottom?e.offsetBottom:0;if(u=u||0,r>-1)for(l=t.children,d=1;d<l.length-1;d++)a=t.children[d].getBoundingClientRect(),s=window.innerHeight||document.documentElement.clientHeight,(a.top<0&&Math.abs(a.top)<a.height-i||a.top>0&&a.top<s-u)&&n.push({index:o+d-1,bounds:a});return n},render:function(){var e=(0,a.default)(this.props,(0,i.default)(this.constructor.propTypes)),t="infinite-list__spacer",n=void 0,o=this.state.lastRenderedIndex,r=[];for((o===-1||o>this.props.items.length-1)&&(I("resetting lastRenderedIndex, currently at %s, %d items",o,this.props.items.length),o=Math.min(this.state.firstRenderedIndex+this.scrollHelper.initialLastRenderedIndex(),this.props.items.length-1),I("reset lastRenderedIndex to %s",o)),I("rendering %d to %d",this.state.firstRenderedIndex,o),n=this.state.firstRenderedIndex;n<=o;n++)r.push(this.props.renderItem(this.props.items[n],n));return this.props.fetchingNextPage&&(r=r.concat(this.props.renderLoadingPlaceholders())),f.default.createElement("div",e,f.default.createElement("div",{ref:"topPlaceholder",className:t,style:{height:this.state.topPlaceholderHeight}}),r,this.props.renderTrailingItems(),f.default.createElement("div",{ref:"bottomPlaceholder",className:t,style:{height:this.state.bottomPlaceholderHeight}}))},_setContainerY:function(e){return this.props.context&&this.props.context!==window?void(this.props.context.scrollTop=e):void window.scrollTo(0,e)},_overrideHistoryScroll:function(){this._contextLoaded()&&this._scrollContainer.addEventListener("scroll",this._resetScroll)},_resetScroll:function(e){var t=this.state.scrollTop;this._contextLoaded()&&(I("history setting scroll position:",e),this._setContainerY(t),this._scrollContainer.removeEventListener("scroll",this._resetScroll),I("override scroll position from HTML5 history popstate:",t))},_contextLoaded:function(){return this.props.context||this.props.context===!1||!("context"in this.props)}})},"./client/components/infinite-list/scroll-helper.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var r=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/createClass.js"),a=o(s),l=n("./node_modules/debug/browser.js"),d=o(l),u=(0,d.default)("calypso:infinite-list:helper"),c=function(){function e(t){(0,i.default)(this,e),this.boundsForRef=t,this.itemHeights={},this.contextHeight=null,this.topHideLevelHard=null,this.topHideLevelSoft=null,this.bottomHideLevelHard=null,this.bottomHideLevelSoft=null,this.bottomHideLevelUltraSoft=null,this.props=null,this.scrollPosition=null,this.containerTop=null,this.topPlaceholderHeight=null,this.bottomPlaceholderHeight=null,this.containerBottom=null,this.stateUpdated=null,this.firstRenderedIndex=null,this.lastRenderedIndex=null}return(0,a.default)(e,[{key:"storedItemHeight",value:function(e){var t=this.props.guessedItemHeight;return e in this.itemHeights&&(t=this.itemHeights[e]),t}},{key:"forEachInRow",value:function(e,t,n){if("function"==typeof t){n&&(t=t.bind(n));for(var o=e-e%this.props.itemsPerRow,r=Math.min(o+this.props.itemsPerRow,this.props.items.length)-1,i=o;i<=r;i++)t(this.props.items[i],i)}}},{key:"storeRowItemHeights",value:function(e,t){this.forEachInRow(t,function(t){var n=this.props.getItemRef(t),o=this.boundsForRef(n),r=void 0;r=o?"bottom"===e?this.containerBottom-this.bottomPlaceholderHeight-o.top:o.bottom-(this.containerTop+this.topPlaceholderHeight):this.props.guessedItemHeight,this.itemHeights[n]=r},this)}},{key:"deleteRowItemHeights",value:function(e){var t=this;this.forEachInRow(e,function(e){var n=t.props.getItemRef(e);delete t.itemHeights[n]},this)}},{key:"getRowHeight",value:function(e){var t=this,n=0;return this.forEachInRow(e,function(e){var o=t.props.getItemRef(e),r=t.storedItemHeight(o);n=Math.max(n,r)},this),n}},{key:"updateContextHeight",value:function(e){this.contextHeight!==e&&(this.contextHeight=e,this.topHideLevelHard=Math.min(-1*e,-5*this.props.guessedItemHeight),this.topHideLevelSoft=Math.min(-2*e,-10*this.props.guessedItemHeight),this.bottomHideLevelHard=e+Math.max(e,5*this.props.guessedItemHeight),this.bottomHideLevelSoft=e+Math.max(2*e,10*this.props.guessedItemHeight),this.bottomHideLevelUltraSoft=e+Math.max(3*e,15*this.props.guessedItemHeight))}},{key:"initialLastRenderedIndex",value:function(){return Math.min(this.props.items.length-1,Math.floor(this.bottomHideLevelSoft/this.props.guessedItemHeight)-1)}},{key:"updatePlaceholderDimensions",value:function(){var e=this.boundsForRef("topPlaceholder"),t=this.boundsForRef("bottomPlaceholder");this.topPlaceholderHeight=e.height,this.containerTop=e.top,this.bottomPlaceholderHeight=t.height,this.containerBottom=t.bottom}},{key:"scrollChecks",value:function(e){this.reset(e),this.adjustLastRenderedIndex(),this.shouldHideItemsAbove()?this.hideItemsAbove():this.shouldShowItemsAbove()&&this.showItemsAbove(),this.shouldHideItemsBelow()?this.hideItemsBelow():this.shouldShowItemsBelow()&&this.showItemsBelow(),this.shouldLoadNextPage()&&this.loadNextPage()}},{key:"reset",value:function(e){this.stateUpdated=!1,this.firstRenderedIndex=e.firstRenderedIndex,this.lastRenderedIndex=e.lastRenderedIndex}},{key:"adjustLastRenderedIndex",value:function(){var e=this.initialLastRenderedIndex(),t=this.lastRenderedIndex||0,n=this.firstRenderedIndex||0,o=this.props.items.length,r=t;0===o&&(r=-1),t>=o&&(r=Math.min(n+e,o-1)),r===-1&&o>0&&0===n&&(r=e),r!==this.lastRenderedIndex&&(this.stateUpdated=!0,this.lastRenderedIndex=r)}},{key:"shouldHideItemsAbove",value:function(){return this.containerTop+this.topPlaceholderHeight<this.topHideLevelSoft}},{key:"hideItemsAbove",value:function(){for(var e=void 0,t=void 0;this.firstRenderedIndex<this.props.items.length;){if(this.storeRowItemHeights("top",this.firstRenderedIndex),e=this.getRowHeight(this.firstRenderedIndex),t=this.containerTop+this.topPlaceholderHeight+e,t>this.topHideLevelHard){this.deleteRowItemHeights(this.firstRenderedIndex);break}this.topPlaceholderHeight+=e,this.firstRenderedIndex+=this.props.itemsPerRow,this.stateUpdated=!0,u("hiding top item",e,this.topPlaceholderHeight)}}},{key:"shouldShowItemsAbove",value:function(){return this.containerTop+this.topPlaceholderHeight>this.topHideLevelHard}},{key:"showItemsAbove",value:function(){for(var e=void 0,t=void 0;this.firstRenderedIndex>0&&(e=this.getRowHeight(this.firstRenderedIndex-this.props.itemsPerRow),t=this.containerTop+this.topPlaceholderHeight-e,!(t<this.topHideLevelSoft));)this.deleteRowItemHeights(this.firstRenderedIndex-this.props.itemsPerRow),this.firstRenderedIndex-=this.props.itemsPerRow,this.firstRenderedIndex=Math.max(0,this.firstRenderedIndex),this.firstRenderedIndex<=0?this.topPlaceholderHeight=0:this.topPlaceholderHeight=Math.max(0,this.topPlaceholderHeight-e),this.stateUpdated=!0,u("showing top item",e,this.topPlaceholderHeight)}},{key:"shouldHideItemsBelow",value:function(){var e=this.containerBottom-this.bottomPlaceholderHeight;return e>this.bottomHideLevelUltraSoft}},{key:"hideItemsBelow",value:function(){for(var e=void 0,t=void 0;this.lastRenderedIndex>=0;){if(this.storeRowItemHeights("bottom",this.lastRenderedIndex),t=this.getRowHeight(this.lastRenderedIndex),e=this.containerBottom-this.bottomPlaceholderHeight-t,e<this.bottomHideLevelHard){this.deleteRowItemHeights(this.lastRenderedIndex);break}this.bottomPlaceholderHeight+=t,this.lastRenderedIndex-=this.props.itemsPerRow,this.stateUpdated=!0,u("hiding bottom item",t,this.bottomPlaceholderHeight)}}},{key:"shouldShowItemsBelow",value:function(){var e=this.containerBottom-this.bottomPlaceholderHeight;return e<this.bottomHideLevelHard}},{key:"showItemsBelow",value:function(){for(var e=void 0,t=void 0,n=void 0;this.lastRenderedIndex<this.props.items.length-1&&(e=this.getRowHeight(this.lastRenderedIndex+this.props.itemsPerRow),n=this.containerBottom-this.bottomPlaceholderHeight,t=n+e,!(t>this.bottomHideLevelSoft&&n>this.bottomHideLevelHard));)this.deleteRowItemHeights(this.lastRenderedIndex+this.props.itemsPerRow),this.bottomPlaceholderHeight-e<0?(this.containerBottom+=e-this.bottomPlaceholderHeight,this.bottomPlaceholderHeight=0):this.bottomPlaceholderHeight-=e,this.lastRenderedIndex+=this.props.itemsPerRow,this.lastRenderedIndex=Math.min(this.lastRenderedIndex,this.props.items.length-1),this.lastRenderedIndex>=this.props.items.length-1&&(this.bottomPlaceholderHeight=0),this.stateUpdated=!0,u("showing bottom item",e,this.bottomPlaceholderHeight)}},{key:"shouldLoadNextPage",value:function(){return!this.props.fetchingNextPage&&!this.props.lastPage&&(0===this.bottomPlaceholderHeight&&this.containerBottom<this.bottomHideLevelHard)}},{key:"loadNextPage",value:function(){var e=this,t=this.triggeredByScroll;u("fetching next page",this.containerBottom,this.bottomPlaceholderHeight),this.scrollPosition>this.contextHeight&&(t=!0),setTimeout(function(){return!e.props.fetchingNextPage&&!e.props.lastPage&&void e.props.fetchNextPage({triggeredByScroll:t})},0)}}]),e}();e.exports=c},"./client/components/info-popover/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=o(p),m=n("./node_modules/react/react.js"),h=o(m),g=n("./node_modules/gridicons/build/index.js"),y=o(g),v=n("./client/components/popover/index.jsx"),b=o(v),_=n("./node_modules/classnames/index.js"),x=o(_),C=n("./client/lib/analytics/index.js"),E=o(C),w=function(e){function t(){var e,n,o,r;(0,a.default)(this,t);for(var s=arguments.length,l=Array(s),d=0;d<s;d++)l[d]=arguments[d];return n=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.state={showPopover:!1},o.handleClick=function(e){e.preventDefault(),o.setState({showPopover:!o.state.showPopover},o.recordStats)},o.handleClose=function(){return o.setState({showPopover:!1},o.recordStats)},o.recordStats=function(){var e=o.props,t=e.gaEventCategory,n=e.popoverName;if(t&&n){var r=o.state.showPopover?" Opened":" Closed";E.default.ga.recordEvent(t,"InfoPopover: "+n+r)}},r=n,(0,c.default)(o,r)}return(0,f.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){return h.default.createElement("span",{onClick:this.handleClick,ref:"infoPopover",className:(0,x.default)("info-popover",{is_active:this.state.showPopover},this.props.className)},h.default.createElement(y.default,{icon:"info-outline",size:18}),h.default.createElement(b.default,{autoRtl:this.props.autoRtl,id:this.props.id,isVisible:this.state.showPopover,context:this.refs&&this.refs.infoPopover,ignoreContext:this.props.ignoreContext,position:this.props.position,onClose:this.handleClose,className:(0,x.default)("popover","info-popover__tooltip",this.props.className),rootClassName:this.props.rootClassName},this.props.children))}}]),t}(m.Component);w.propTypes={autoRtl:m.PropTypes.bool,className:m.PropTypes.string,gaEventCategory:m.PropTypes.string,id:m.PropTypes.string,ignoreContext:m.PropTypes.shape({getDOMNode:m.PropTypes.func}),popoverName:m.PropTypes.string,position:m.PropTypes.oneOf(["top","top right","right","bottom right","bottom","bottom left","left","top left"]),rootClassName:m.PropTypes.string},w.defaultProps={autoRtl:!0,position:"bottom"},t.default=w,e.exports=t.default},"./client/components/input-chrono/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/react/react.js"),i=o(r),s=n("./node_modules/chrono-node/src/chrono.js"),a=o(s),l=["en","jp"];t.default=i.default.createClass({displayName:"InputChrono",focused:!1,propTypes:{value:i.default.PropTypes.string,lang:i.default.PropTypes.string,onSet:i.default.PropTypes.func,placeholder:i.default.PropTypes.string},getDefaultProps:function(){return{value:"",lang:"",placeholder:"",onSet:function(){}}},getInitialState:function(){return{value:this.props.value}},componentWillReceiveProps:function(e){this.focused||this.props.value===e.value||this.setState({value:e.value})},handleChange:function(e){this.setState({value:e.target.value})},handleBlur:function(e){this.setDateText(e),this.focused=!1},handleFocus:function(){this.focused=!0},onKeyDown:function(e){13===e.keyCode&&this.setDateText(e)},setDateText:function(e){var t=a.default.parseDate(e.target.value);t&&(this.setState({value:this.moment(t).calendar()}),this.props.onSet(this.moment(t)))},isLangSupported:function(e){return l.indexOf(e)>=0},render:function(){return i.default.createElement("div",{className:"input-chrono__container"},this.isLangSupported(this.props.lang)?i.default.createElement("input",{className:"input-chrono",value:this.state.value,placeholder:this.props.placeholder,onKeyDown:this.onKeyDown,onChange:this.handleChange,onFocus:this.handleFocus,onBlur:this.handleBlur}):i.default.createElement("div",{className:"text-chrono"},this.state.value))}}),e.exports=t.default},"./client/components/post-schedule/clock.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=o(p),m=n("./node_modules/lodash/noop.js"),h=o(m),g=n("./node_modules/react/react.js"),y=o(g),v=n("./node_modules/react-redux/es/index.js"),b=n("./node_modules/i18n-calypso/index.js"),_=n("./client/components/segmented-control/item.jsx"),x=o(_),C=n("./client/components/info-popover/index.jsx"),E=o(C),w=n("./client/state/selectors/get-site-setting.js"),j=o(w),S=n("./client/components/segmented-control/index.jsx"),T=o(S),P=n("./client/lib/viewport/index.js"),k=o(P),I=n("./client/components/post-schedule/utils.js"),N=function(e){function t(){(0,a.default)(this,t);var e=(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments));return e.setTime=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.getTimeValues(),o=(0,b.moment)(e.props.date).set(n);e.props.onChange(o,n)},e.adjustHour=function(t){return e.handleKeyDown(t,"hour")},e.adjustMinute=function(t){return e.handleKeyDown(t,"minute")},e.setAm=function(t){return e.setAmPm(t,"AM")},e.setPm=function(t){return e.setAmPm(t,"PM")},e}return(0,f.default)(t,e),(0,d.default)(t,[{key:"handleKeyDown",value:function(e,t){var n=e.keyCode-39,o=this.getTimeValues();if(-1!==n&&1!==n)return null;var r=Number(e.target.value);"hour"===t?(this.props.is12hour&&this.refs.amPmReference&&(r=this.convertTo24Hour(r)),r-=n,r=r>23?0:r,r=r<0?23:r):(r-=n,r=r>59?0:r,r=r<0?59:r),o[t]=r,this.setTime(e,o)}},{key:"getTimeValues",value:function(){var e=this.refs,t=e.amPmReference,n=e.hourReference,o=e.minuteRef,r={},i=(0,I.parseAndValidateNumber)(n.value),s=(0,I.parseAndValidateNumber)(o.value);return!1!==i&&i<24&&(r.hour=Number(i)),this.props.is12hour&&t&&(("undefined"==typeof r.hour||"PM"===t.value&&r.hour>12)&&(r.hour=Number(n.value.substr(-1))),r.hour=this.convertTo24Hour(r.hour)),!1!==s&&(s>60&&(s=o.value.substr(-1)),r.minute=Number(s)),r}},{key:"setAmPm",value:function(e,t){this.refs.amPmReference.value=t,this.setTime(e)}},{key:"convertTo24Hour",value:function(e){return"PM"===this.refs.amPmReference.value&&e<12?e+=12:"AM"===this.refs.amPmReference.value&&12===e&&(e=0),e}},{key:"renderTimezoneSection",value:function(){var e=this.props,t=e.date,n=e.gmtOffset,o=e.siteId,r=e.siteSlug,i=e.timezone,s=e.translate;if(i||(0,I.isValidGMTOffset)(n)){var a=void 0,l=void 0;if(i){var d=t.clone().tz(i);l=d.format("Z"),a=d.utcOffset()-(0,b.moment)(t).utcOffset()}else if((0,I.isValidGMTOffset)(n)){var u=t.clone().utcOffset(n);a=u.utcOffset()-(0,b.moment)().utcOffset()}if(a){var c=k.default.isMobile()?"top":"right",p=i?i.replace(/\_/gi," ")+" "+l:"UTC"+(0,I.convertHoursToHHMM)(n),f=s("This site timezone (%(timezoneText)s) will be used for publishing. You can change it in {{a}}General Settings{{/a}}.",{args:{timezoneText:p},components:{a:y.default.createElement("a",{href:"/settings/general/"+(r||o)})}});return y.default.createElement("span",null,y.default.createElement("div",{className:"post-schedule__clock-timezone"},s("This site timezone is %(diff)sh from your local timezone.",{args:{diff:(0,I.convertMinutesToHHMM)(a)}}),y.default.createElement(E.default,{className:"post-schedule__timezone-info",position:c},f)))}}}},{key:"render",value:function(){var e=this.props,t=e.date,n=e.is12hour,o=e.translate;return y.default.createElement("div",{className:"post-schedule__clock"},y.default.createElement("input",{className:"post-schedule__clock-time",name:"post-schedule__clock_hour",ref:"hourReference",value:t.format(n?"hh":"HH"),onChange:this.setTime,onKeyDown:this.adjustHour,type:"text"}),y.default.createElement("span",{className:"post-schedule__clock-divisor"},":"),y.default.createElement("input",{className:"post-schedule__clock-time",name:"post-schedule__clock_minute",ref:"minuteRef",value:t.format("mm"),onChange:this.setTime,onKeyDown:this.adjustMinute,type:"text"}),n&&y.default.createElement("span",null,y.default.createElement("input",{type:"hidden",ref:"amPmReference",name:"post-schedule__clock_am-pm",value:t.format("A")}),y.default.createElement(T.default,{compact:!0},y.default.createElement(x.default,{value:"am",onClick:this.setAm,selected:"AM"===t.format("A")},o("AM")),y.default.createElement(x.default,{value:"pm",onClick:this.setPm,selected:"PM"===t.format("A")},o("PM")))),this.renderTimezoneSection())}}]),t}(g.Component);N.propTypes={date:g.PropTypes.object.isRequired,timezone:g.PropTypes.string,gmtOffset:g.PropTypes.number,siteId:g.PropTypes.number,siteSlug:g.PropTypes.string,onChange:g.PropTypes.func},N.defaultProps={onChange:h.default},t.default=(0,v.connect)(function(e,t){var n=t.siteId;return{is12hour:(0,I.is12hr)((0,j.default)(e,n,"time_format"))}})((0,b.localize)(N)),e.exports=t.default},"./client/components/post-schedule/header-controls.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/react/react.js"),i=o(r),s=n("./node_modules/gridicons/build/index.js"),a=o(s),l=function(){};t.default=i.default.createClass({displayName:"header-controls",propTypes:{onYearChange:i.default.PropTypes.func},getDefaultProps:function(){return{onYearChange:l}},render:function(){var e=this;return i.default.createElement("div",{className:"post-schedule__year-controls"},i.default.createElement("button",{className:"post-schedule__year-control-up",onClick:function(){e.props.onYearChange(1)}},i.default.createElement(a.default,{icon:"chevron-up",size:14})),i.default.createElement("button",{className:"post-schedule__year-control-down",onClick:function(){e.props.onYearChange(-1)}},i.default.createElement(a.default,{icon:"chevron-down",size:14})))}}),e.exports=t.default},"./client/components/post-schedule/header.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/react/react.js"),i=o(r),s=n("./client/components/post-schedule/header-controls.jsx"),a=o(s),l=n("./node_modules/classnames/index.js"),d=o(l),u=function(){};t.default=i.default.createClass({displayName:"header",propTypes:{date:i.default.PropTypes.object,inputChronoDisplayed:i.default.PropTypes.bool,onDateChange:i.default.PropTypes.func},getDefaultProps:function(){return{inputChronoDisplayed:!0,onDateChange:u}},getInitialState:function(){return{showYearControls:!1}},setToCurrentMonth:function(){var e=this.moment().month();this.props.onDateChange(this.props.date.month(e))},setToCurrentYear:function(){var e=this.moment().year();this.props.onDateChange(this.props.date.year(e))},setYear:function(e){
var t=this.moment(this.props.date);return t.year(t.year()+e),0>t.year()||t.year()>9999?null:void this.props.onDateChange(t)},render:function(){var e=this,t=(0,d.default)("post-schedule__header",{"is-input-chrono-displayed":this.props.inputChronoDisplayed});return i.default.createElement("div",{className:t},i.default.createElement("span",{className:"post-schedule__header-month",onClick:this.setToCurrentMonth},this.props.date.format("MMMM")),i.default.createElement("div",{className:"post-schedule__header-year",onMouseEnter:function(){e.setState({showYearControls:!0})},onMouseLeave:function(){e.setState({showYearControls:!1})}},i.default.createElement("span",{onClick:this.setToCurrentYear},this.props.date.format("YYYY")),this.state.showYearControls&&i.default.createElement(a.default,{onYearChange:this.setYear})))}}),e.exports=t.default},"./client/components/post-schedule/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=o(p),m=n("./node_modules/react/react.js"),h=o(m),g=n("./node_modules/i18n-calypso/index.js"),y=n("./client/components/input-chrono/index.jsx"),v=o(y),b=n("./client/components/date-picker/index.jsx"),_=o(b),x=n("./client/components/data/query-site-settings/index.js"),C=o(x),E=n("./client/lib/user/index.js"),w=o(E),j=n("./client/components/date-picker/events-tooltip.jsx"),S=o(j),T=n("./client/components/post-schedule/clock.jsx"),P=o(T),k=n("./client/components/post-schedule/header.jsx"),I=o(k),N=n("./client/components/post-schedule/utils.js"),R=o(N),D=new w.default,M=function(){},O=function(e){function t(){var e,n,o,r;(0,a.default)(this,t);for(var s=arguments.length,l=Array(s),d=0;d<s;d++)l[d]=arguments[d];return n=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.state={calendarViewDate:(0,g.moment)(o.props.selectedDay?o.props.selectedDay:new Date),tooltipContext:null,showTooltip:!1},o.setCurrentMonth=function(e){e=(0,g.moment)(e),o.props.onMonthChange(e),o.setState({calendarViewDate:e})},o.setViewDate=function(e){o.setState({calendarViewDate:(0,g.moment)(e)})},o.updateDate=function(e){o.setState({calendarViewDate:e}),o.props.onDateChange(R.default.convertDateToGivenOffset(e,o.props.timezone,o.props.gmtOffset))},o.handleOnDayMouseEnter=function(e,t,n,r){var i=o.getEventsFromPosts(o.props.posts);return i&&i.length?void o.setState({eventsByDay:r,tooltipContext:n.target,showTooltip:!0}):o.props.onDayMouseEnter(e,t,n,r)},o.handleOnDayMouseLeave=function(e,t,n,r){var i=o.getEventsFromPosts(o.props.posts);return i&&i.length?void o.setState({eventsByDay:[],tooltipContext:null,showTooltip:!1}):o.props.onDayMouseLeave(e,t,n,r)},r=n,(0,c.default)(o,r)}return(0,f.default)(t,e),(0,d.default)(t,[{key:"componentWillMount",value:function(){return this.props.selectedDay?void this.setState({localizedDate:this.getDateToUserLocation(this.props.selectedDay)}):this.setState({localizedDate:null})}},{key:"componentWillReceiveProps",value:function(e){if(this.props.selectedDay!==e.selectedDay)return e.selectedDay?void this.setState({localizedDate:this.getDateToUserLocation(e.selectedDay)}):this.setState({localizedDate:null})}},{key:"locale",value:function(){return{formatMonthTitle:function(){}}}},{key:"events",value:function(){return this.props.events.concat(this.getEventsFromPosts(this.props.posts))}},{key:"getEventsFromPosts",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t.map(function(t){var n=e.getDateToUserLocation(t.date);return{id:t.ID,title:t.title,date:n.toDate()}})}},{key:"getDateToUserLocation",value:function(e){return R.default.convertDateToUserLocation(e||new Date,this.props.timezone,this.props.gmtOffset)}},{key:"getCurrentDate",value:function(){return(0,g.moment)(this.state.localizedDate||this.getDateToUserLocation())}},{key:"renderInputChrono",value:function(){var e=D.getLanguage(),t=this.getCurrentDate(),n=void 0;if(this.state.localizedDate){var o=(0,g.moment)().startOf("day"),r=(0,g.moment)(t).startOf("day"),i=r.diff(o,"days");n=-7<=i&&i<=6?t.calendar():t.format("L LT")}return h.default.createElement("div",{className:"post-schedule__input-chrono"},h.default.createElement(v.default,{value:n,placeholder:t.calendar(),lang:e?e.langSlug:null,onSet:this.updateDate}),h.default.createElement("hr",{className:"post-schedule__hr"}))}},{key:"renderClock",value:function(){var e=this.state.localizedDate;return e||(e=this.getDateToUserLocation(new Date)),h.default.createElement(P.default,{date:e,timezone:this.props.timezone,gmtOffset:this.props.gmtOffset,siteId:this.props.site?this.props.site.ID:null,siteSlug:this.props.site?this.props.site.slug:null,onChange:this.updateDate})}},{key:"render",value:function(){var e=!this.props.events||!this.props.events.length;return h.default.createElement("div",{className:"post-schedule"},this.props.site&&h.default.createElement(C.default,{siteId:this.props.site.ID}),h.default.createElement(I.default,{date:this.state.calendarViewDate,onDateChange:this.setViewDate,inputChronoDisplayed:this.props.displayInputChrono}),this.props.displayInputChrono&&this.renderInputChrono(),h.default.createElement(_.default,{events:this.events(),locale:this.locale(),disabledDays:this.props.disabledDays,enableOutsideDays:this.props.enableOutsideDays,modifiers:this.props.modifiers,selectedDay:this.state.localizedDate?this.state.localizedDate.toDate():null,timeReference:this.getCurrentDate(),calendarViewDate:this.state.calendarViewDate.toDate(),onMonthChange:this.setCurrentMonth,onSelectDay:this.updateDate,onDayMouseEnter:this.handleOnDayMouseEnter,onDayMouseLeave:this.handleOnDayMouseLeave}),this.renderClock(),e&&h.default.createElement(S.default,{events:this.state.eventsByDay,context:this.state.tooltipContext,isVisible:this.state.showTooltip}))}}]),t}(m.Component);O.propTypes={events:m.PropTypes.array,posts:m.PropTypes.array,timezone:m.PropTypes.string,gmtOffset:m.PropTypes.number,site:m.PropTypes.object,displayInputChrono:m.PropTypes.bool,onDateChange:m.PropTypes.func,onMonthChange:m.PropTypes.func,onDayMouseEnter:m.PropTypes.func,onDayMouseLeave:m.PropTypes.func},O.defaultProps={posts:[],events:[],displayInputChrono:!0,onDateChange:M,onMonthChange:M,onDayMouseEnter:M,onDayMouseLeave:M},t.default=O,e.exports=t.default},"./client/components/post-schedule/utils.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/math/trunc.js"),i=o(r),s=n("./node_modules/i18n-calypso/index.js"),a=function(e){return e&&/[gh]|[aA]$/.test(e)},l=function(e){return"number"==typeof e},d=function(e,t,n){return e=(0,s.moment)(e),t?e.tz(t):l(n)&&e.utcOffset(n),e},u=function(e){return(0,s.moment)(e.format?e.format():e)},c=function(e,t,n){var o=u(e),r=d(e,t,n);return o.utcOffset()-r.utcOffset()},p=function(e,t,n){return t||l(n)?u(e).subtract(c(e,t,n),"minute"):(0,s.moment)(e)},f=function(e,t,n){return e=d(e,t,n).add(c(e,t,n),"minute"),!t&&l(n)&&e.utcOffset(n),e},m=function(e){var t=(0,i.default)(e/60),n=e>0?"+":"";if(!(e/60%1))return n+String(t);e=Math.abs(e%60);var o=e<10?"0"+e:e;return""+n+t+":"+o},h=function(e){return m(60*e)},g=function(e){return e=String(e),"0"!==e&&"00"!==e&&("0"===e[0]||Number(e)>99)&&(e=Number(e.substr(1))),!(isNaN(Number(e))||Number(e)<0||e.length>2)&&Number(e)};t.default={convertDateToGivenOffset:f,convertDateToUserLocation:p,convertHoursToHHMM:h,convertMinutesToHHMM:m,getDateInLocalUTC:u,getLocalizedDate:d,getTimeOffset:c,is12hr:a,isValidGMTOffset:l,parseAndValidateNumber:g},e.exports=t.default},"./client/components/progress-bar/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=o(p),m=n("./node_modules/react/react.js"),h=o(m),g=n("./node_modules/classnames/index.js"),y=o(g),v=n("./client/components/screen-reader-text/index.js"),b=o(v),_=function(e){function t(){return(0,a.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,d.default)(t,[{key:"getCompletionPercentage",value:function(){var e=Math.ceil(this.props.value/this.props.total*100);return Math.min(e,100)}},{key:"renderBar",value:function(){var e=this.props.title?h.default.createElement(b.default,null,this.props.title):null,t={width:this.getCompletionPercentage()+"%"};return this.props.color&&(t.backgroundColor=this.props.color),h.default.createElement("div",{className:"progress-bar__progress",style:t},e)}},{key:"render",value:function(){var e=(0,y.default)(this.props.className,"progress-bar",{"is-compact":this.props.compact,"is-pulsing":this.props.isPulsing});return h.default.createElement("div",{className:e},this.renderBar())}}]),t}(m.PureComponent);_.defaultProps={total:100,compact:!1,isPulsing:!1},_.propTypes={value:h.default.PropTypes.number.isRequired,total:h.default.PropTypes.number,color:h.default.PropTypes.string,title:h.default.PropTypes.string,compact:h.default.PropTypes.bool,className:h.default.PropTypes.string,isPulsing:h.default.PropTypes.bool},t.default=_,e.exports=t.default},"./client/components/redux-forms/redux-form-fieldset/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.FieldsetRenderer=void 0;var r=n("./node_modules/babel-runtime/helpers/extends.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/objectWithoutProperties.js"),a=o(s),l=n("./node_modules/prop-types/index.js"),d=o(l),u=n("./node_modules/react/react.js"),c=o(u),p=n("./node_modules/redux-form/es/index.js"),f=n("./client/components/forms/form-fieldset/index.jsx"),m=o(f),h=n("./client/components/forms/form-label/index.jsx"),g=o(h),y=n("./client/components/forms/form-input-validation/index.jsx"),v=o(y),b=n("./client/components/forms/form-setting-explanation/index.jsx"),_=o(b),x=function(e){var t=e.inputComponent,n=e.input,o=e.meta,r=e.label,s=e.explanation,l=(0,a.default)(e,["inputComponent","input","meta","label","explanation"]),d=!(!o.touched||!o.error);return c.default.createElement(m.default,null,r&&c.default.createElement(g.default,{htmlFor:n.name},r),c.default.createElement(t,(0,i.default)({id:n.name,isError:d},n,l)),d&&c.default.createElement(v.default,{isError:!0,text:o.error}),s&&c.default.createElement(_.default,null,s))};t.FieldsetRenderer=x;var C=function(e){var t=e.component,n=(0,a.default)(e,["component"]);return c.default.createElement(p.Field,(0,i.default)({component:x,inputComponent:t},n))};C.propTypes={name:d.default.string.isRequired,component:d.default.func.isRequired,label:d.default.node,explanation:d.default.node},t.default=C},"./client/components/resizable-iframe/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/helpers/extends.js"),i=o(r),s=n("./node_modules/lodash/omit.js"),a=o(s),l=n("./node_modules/react-dom/index.js"),d=o(l),u=n("./node_modules/react/react.js"),c=o(u),p=n("./node_modules/debug/browser.js"),f=o(p),m=(0,f.default)("calypso:resizable-iframe"),h=function(){};t.default=c.default.createClass({displayName:"ResizableIframe",propTypes:{src:c.default.PropTypes.string,width:c.default.PropTypes.oneOfType([c.default.PropTypes.string,c.default.PropTypes.number]),height:c.default.PropTypes.oneOfType([c.default.PropTypes.string,c.default.PropTypes.number]),onLoad:c.default.PropTypes.func,onResize:c.default.PropTypes.func},getInitialState:function(){return{width:0,height:0}},getDefaultProps:function(){return{onLoad:h,onResize:h}},componentWillMount:function(){m("Mounting "+this.constructor.displayName+" React component.")},componentDidMount:function(){window.addEventListener("message",this.checkMessageForResize,!1),this.maybeConnect()},componentDidUpdate:function(){this.maybeConnect()},componentWillUnmount:function(){window.removeEventListener("message",this.checkMessageForResize)},getFrameBody:function(){return d.default.findDOMNode(this.refs.iframe).contentDocument.body},maybeConnect:function(){if(this.isFrameAccessible()){var e=this.getFrameBody();if(null===e.getAttribute("data-resizable-iframe-connected")){var t=document.createElement("script");t.innerHTML="\n\t\t\t( function() {\n\t\t\t\tvar observer;\n\n\t\t\t\tif ( ! window.MutationObserver || ! document.body || ! window.top ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tfunction sendResize() {\n\t\t\t\t\twindow.top.postMessage( {\n\t\t\t\t\t\taction: 'resize',\n\t\t\t\t\t\twidth: document.body.offsetWidth,\n\t\t\t\t\t\theight: document.body.offsetHeight\n\t\t\t\t\t}, '*' );\n\t\t\t\t}\n\n\t\t\t\tobserver = new MutationObserver( sendResize );\n\t\t\t\tobserver.observe( document.body, {\n\t\t\t\t\tattributes: true,\n\t\t\t\t\tattributeOldValue: false,\n\t\t\t\t\tcharacterData: true,\n\t\t\t\t\tcharacterDataOldValue: false,\n\t\t\t\t\tchildList: true,\n\t\t\t\t\tsubtree: true\n\t\t\t\t} );\n\n\t\t\t\twindow.addEventListener( 'load', sendResize, true );\n\n\t\t\t\t// Hack: Remove viewport unit styles, as these are relative\n\t\t\t\t// the iframe root and interfere with our mechanism for\n\t\t\t\t// determining the unconstrained page bounds.\n\t\t\t\tfunction removeViewportStyles( ruleOrNode ) {\n\t\t\t\t\t[ 'width', 'height', 'minHeight', 'maxHeight' ].forEach( function( style ) {\n\t\t\t\t\t\tif ( /^\\d+(vmin|vmax|vh|vw)$/.test( ruleOrNode.style[ style ] ) ) {\n\t\t\t\t\t\t\truleOrNode.style[ style ] = '';\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\t\t\t\t}\n\n\t\t\t\tArray.prototype.forEach.call( document.querySelectorAll( '[style]' ), removeViewportStyles );\n\t\t\t\tArray.prototype.forEach.call( document.styleSheets, function( stylesheet ) {\n\t\t\t\t\tArray.prototype.forEach.call( stylesheet.cssRules || stylesheet.rules, removeViewportStyles );\n\t\t\t\t} );\n\n\t\t\t\tdocument.body.style.position = 'absolute';\n\t\t\t\tdocument.body.setAttribute( 'data-resizable-iframe-connected', '' );\n\n\t\t\t\tsendResize();\n\t\t\t} )();\n\t\t",e.appendChild(t)}}},isFrameAccessible:function(){try{return!!this.getFrameBody()}catch(e){return!1}},checkMessageForResize:function(e){var t=d.default.findDOMNode(this.refs.iframe),n=e.data||{};if("string"==typeof n)try{n=JSON.parse(n)}catch(e){}if(t&&t.contentWindow===e.source){m("Received message: %o",n);var o=n,r=o.action,i=o.width,s=o.height,a=this.state,l=a.width,u=a.height;"resize"!==r||l===i&&u===s||(this.setState({width:i,height:s}),this.props.onResize())}},onLoad:function(e){this.maybeConnect(),this.props.onLoad(e)},render:function(){var e=["onResize"];return c.default.createElement("iframe",(0,i.default)({ref:"iframe"},(0,a.default)(this.props,e),{onLoad:this.onLoad,width:this.props.width||this.state.width,height:this.props.height||this.state.height}))}}),e.exports=t.default},"./client/components/screen-reader-text/index.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=e.children;return s.default.createElement("span",{className:"screen-reader-text"},t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var i=n("./node_modules/react/react.js"),s=o(i);e.exports=t.default},"./client/components/section-header/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=o(p),m=n("./node_modules/react/react.js"),h=o(m),g=n("./node_modules/classnames/index.js"),y=o(g),v=n("./client/components/card/compact.jsx"),b=o(v),_=n("./client/components/count/index.jsx"),x=o(_),C=function(e){function t(){return(0,a.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){var e="number"==typeof this.props.count,t=!(this.props.label||e||this.props.children),n=(0,y.default)(this.props.className,"section-header",{"is-empty":t});return h.default.createElement(b.default,{className:n,href:this.props.href},h.default.createElement("div",{className:"section-header__label"},h.default.createElement("span",{className:"section-header__label-text"},this.props.label),e&&h.default.createElement(x.default,{count:this.props.count})),h.default.createElement("div",{className:"section-header__actions"},this.props.children))}}]),t}(m.PureComponent);C.defaultProps={label:"",href:null},t.default=C,e.exports=t.default},"./client/components/section-nav/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var r=n("./node_modules/lodash/includes.js"),i=o(r),s=n("./node_modules/lodash/isEqual.js"),a=o(s),l=n("./node_modules/react/react.js"),d=o(l),u=n("./node_modules/classnames/index.js"),c=o(u),p=n("./client/my-sites/comments/comment-navigation/comment-navigation-tab.jsx"),f=o(p),m=n("./client/components/section-nav/tabs.jsx"),h=o(m),g=n("./client/components/section-nav/item.jsx"),y=o(g),v=n("./client/components/search/index.jsx"),b=o(v),_=d.default.createClass({displayName:"SectionNav",propTypes:{children:d.default.PropTypes.node,selectedText:d.default.PropTypes.node,selectedCount:d.default.PropTypes.number,hasPinnedItems:d.default.PropTypes.bool,onMobileNavPanelOpen:d.default.PropTypes.func,className:d.default.PropTypes.string,allowDropdown:d.default.PropTypes.bool},getInitialState:function(){return{mobileOpen:!1}},getDefaultProps:function(){return{onMobileNavPanelOpen:function(){},allowDropdown:!0}},componentWillMount:function(){this.checkForSiblingControls(this.props.children)},componentWillReceiveProps:function(e){(0,a.default)(this.props,e)||(this.checkForSiblingControls(e.children),this.hasSiblingControls||this.closeMobilePanel())},renderDropdown:function(){return this.props.allowDropdown?d.default.createElement("div",{className:"section-nav__mobile-header",onClick:this.toggleMobileOpenState},d.default.createElement("span",{className:"section-nav__mobile-header-text"},this.props.selectedText)):d.default.createElement("div",null)},render:function(){var e,t=this.getChildren();return t?(e=(0,c.default)({"section-nav":!0,"is-open":this.state.mobileOpen,"has-pinned-items":this.hasPinnedSearch||this.props.hasPinnedItems},this.props.className),d.default.createElement("div",{className:e},this.renderDropdown(),d.default.createElement("div",{className:"section-nav__panel"},t))):(e=(0,c.default)({"section-nav":!0,"is-empty":!0},this.props.className),d.default.createElement("div",{className:e},d.default.createElement("div",{className:"section-nav__panel"},d.default.createElement(y.default,null))))},getChildren:function(){return d.default.Children.map(this.props.children,function(e){var t={hasSiblingControls:this.hasSiblingControls,closeSectionNavMobilePanel:this.closeMobilePanel};return e?(e.type!==h.default||e.props.selectedText||"string"!=typeof this.props.selectedText||(t.selectedText=this.props.selectedText),e.type===h.default&&this.props.selectedCount&&(t.selectedCount=this.props.selectedCount),e.type===b.default&&(e.props.pinned&&(this.hasPinnedSearch=!0),t.onSearch=this.generateOnSearch(e.props.onSearch)),d.default.cloneElement(e,t)):null}.bind(this))},closeMobilePanel:function(){window.innerWidth<480&&this.state.mobileOpen&&this.setState({mobileOpen:!1})},toggleMobileOpenState:function(){var e=!this.state.mobileOpen;this.setState({mobileOpen:e}),e&&this.props.onMobileNavPanelOpen()},generateOnSearch:function(e){return function(){e.apply(this,arguments),this.closeMobilePanel()}.bind(this)},checkForSiblingControls:function(e){this.hasSiblingControls=!1;var t=[b.default,f.default];d.default.Children.forEach(e,function(e,n){n&&e&&!(0,i.default)(t,e.type)&&(this.hasSiblingControls=!0)}.bind(this))}});e.exports=_},"./client/components/section-nav/item.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var r=n("./client/components/count/index.jsx"),i=o(r),s=n("./client/sections-preload.js"),a=n("./node_modules/react/react.js"),l=n("./node_modules/react-pure-render/mixin.js"),d=n("./node_modules/classnames/index.js"),u=a.createClass({displayName:"NavItem",mixins:[l],propTypes:{itemType:a.PropTypes.string,path:a.PropTypes.string,selected:a.PropTypes.bool,tabIndex:a.PropTypes.number,onClick:a.PropTypes.func,isExternalLink:a.PropTypes.bool,disabled:a.PropTypes.bool,count:a.PropTypes.oneOfType([a.PropTypes.number,a.PropTypes.bool]),className:a.PropTypes.string,preloadSectionName:a.PropTypes.string},_preloaded:!1,preload:function(){!this._preloaded&&this.props.preloadSectionName&&(this._preloaded=!0,(0,s.preload)(this.props.preloadSectionName))},render:function(){var e,t,n,o=this.props.itemType?this.props.itemType:"tab",r={"is-selected":this.props.selected,"is-external":this.props.isExternalLink};return r["section-nav-"+o]=!0,e=d(this.props.className,r),this.props.isExternalLink&&(t="_blank"),this.props.disabled||(n=this.props.onClick),a.createElement("li",{className:e},a.createElement("a",{href:this.props.path,target:t,className:"section-nav-"+o+"__link",onClick:n,onMouseEnter:this.preload,tabIndex:this.props.tabIndex||0,"aria-selected":this.props.selected,disabled:this.props.disabled,role:"menuitem",rel:this.props.isExternalLink?"external":null},a.createElement("span",{className:"section-nav-"+o+"__text"},this.props.children,"number"==typeof this.props.count&&a.createElement(i.default,{count:this.props.count}))))}});e.exports=u},"./client/components/section-nav/tabs.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var r=n("./node_modules/babel-runtime/helpers/extends.js"),i=o(r),s=n("./node_modules/lodash/debounce.js"),a=o(s),l=n("./node_modules/react-dom/index.js"),d=n("./node_modules/react/react.js"),u=n("./node_modules/classnames/index.js"),c=n("./client/components/select-dropdown/index.jsx"),p=n("./client/components/select-dropdown/item.jsx"),f=n("./client/lib/viewport/index.js"),m=480,h=d.createClass({displayName:"NavTabs",propTypes:{selectedText:d.PropTypes.string,selectedCount:d.PropTypes.number,label:d.PropTypes.string,hasSiblingControls:d.PropTypes.bool},getDefaultProps:function(){return{hasSiblingControls:!1}},getInitialState:function(){return{isDropdown:!1}},componentDidMount:function(){this.setDropdown(),this.debouncedAfterResize=(0,a.default)(this.setDropdown,300),window.addEventListener("resize",this.debouncedAfterResize)},componentWillReceiveProps:function(){this.setDropdown()},componentWillUnmount:function(){window.removeEventListener("resize",this.debouncedAfterResize)},render:function(){var e=d.Children.map(this.props.children,function(e,t){return e&&d.cloneElement(e,{ref:"tab-"+t})}),t=u({"section-nav-tabs":!0,"is-dropdown":this.state.isDropdown,"is-open":this.state.isDropdownOpen,"has-siblings":this.props.hasSiblingControls}),n=f.getWindowInnerWidth();return d.createElement("div",{className:"section-nav-group",ref:"navGroup"},d.createElement("div",{className:t},this.props.label&&d.createElement("h6",{className:"section-nav-group__label"},this.props.label),d.createElement("ul",{className:"section-nav-tabs__list",role:"menu",onKeyDown:this.keyHandler},e),this.state.isDropdown&&n>m&&this.getDropdown()))},getTabWidths:function(){var e=0;d.Children.forEach(this.props.children,function(t,n){if(t){var o=l.findDOMNode(this.refs["tab-"+n]).offsetWidth;e+=o}}.bind(this)),this.tabsWidth=e},getDropdown:function(){var e=d.Children.map(this.props.children,function(e,t){return e?d.createElement(p,(0,i.default)({},e.props,{key:"navTabsDropdown-"+t}),e.props.children):null});return d.createElement(c,{className:"section-nav-tabs__dropdown",selectedText:this.props.selectedText,selectedCount:this.props.selectedCount},e)},setDropdown:function(){var e;if(window.innerWidth>m){if(!this.refs.navGroup)return;e=this.refs.navGroup.offsetWidth,this.tabsWidth||this.getTabWidths(),e<=this.tabsWidth&&!this.state.isDropdown?this.setState({isDropdown:!0}):e>this.tabsWidth&&this.state.isDropdown&&this.setState({isDropdown:!1})}else window.innerWidth<=m&&this.state.isDropdown&&this.setState({isDropdown:!1})},keyHandler:function(e){switch(e.keyCode){case 32:case 13:e.preventDefault(),document.activeElement.click()}}});e.exports=h},"./client/components/segmented-control/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var r=n("./node_modules/lodash/map.js"),i=o(r),s=n("./node_modules/lodash/filter.js"),a=o(s),l=n("./node_modules/react-dom/index.js"),d=n("./node_modules/react/react.js"),u=n("./node_modules/classnames/index.js"),c=n("./client/components/segmented-control/item.jsx"),p=1,f=d.createClass({displayName:"SegmentedControl",propTypes:{initialSelected:d.PropTypes.string,compact:d.PropTypes.bool,className:d.PropTypes.string,style:d.PropTypes.object,onSelect:d.PropTypes.func,options:d.PropTypes.arrayOf(d.PropTypes.shape({value:d.PropTypes.string.isRequired,label:d.PropTypes.string.isRequired,path:d.PropTypes.string}))},getDefaultProps:function(){return{compact:!1}},getInitialState:function(){var e;return this.props.options&&(e=this.props.initialSelected||this.props.options[0].value),{selected:e,keyboardNavigation:!1}},componentWillMount:function(){this.id=p,p++},componentWillUnmount:function(){window.removeEventListener("keydown",this.navigateItem)},render:function(){var e={"segmented-control":!0,"keyboard-navigation":this.state.keyboardNavigation,"is-compact":this.props.compact,"is-primary":this.props.primary};return this.props.className&&this.props.className.split(" ").forEach(function(t){e[t]=!0}),d.createElement("ul",{className:u(e),style:this.props.style,role:"radiogroup",onKeyDown:this.navigateItem,onKeyUp:this.setKeyboardNavigation.bind(this,!0)},this.getSegmentedItems())},getSegmentedItems:function(){var e=0;return this.props.children?d.Children.map(this.props.children,function(t,n){var o=d.cloneElement(t,{ref:t.type===c?"item-"+e:null,key:"item-"+n,onClick:function(e){this.setKeyboardNavigation(!1),"function"==typeof t.props.onClick&&t.props.onClick(e)}.bind(this)});return t.type===c&&e++,o},this):this.props.options.map(function(e,t){return d.createElement(c,{key:"segmented-control-"+this.id+"-"+e.value,ref:"item-"+t,selected:this.state.selected===e.value,onClick:this.selectItem.bind(this,e),path:e.path,index:t,value:e.value},e.label)},this)},selectItem:function(e){e&&(this.props.onSelect&&this.props.onSelect(e),this.setState({selected:e.value,keyboardNavigation:!1}))},setKeyboardNavigation:function(e){this.setState({keyboardNavigation:e})},navigateItem:function(e){switch(e.keyCode){case 9:this.navigateItemByTabKey(e);break;case 32:case 13:e.preventDefault(),document.activeElement.click();break;case 37:e.preventDefault(),this.focusSibling("previous");break;case 39:e.preventDefault(),this.focusSibling("next")}},navigateItemByTabKey:function(e){var t=e.shiftKey?"previous":"next",n=this.focusSibling(t);n!==!1&&e.preventDefault()},focusSibling:function(e){var t,n,o;return n=this.props.options?(0,a.default)((0,i.default)(this.props.options,"value"),Boolean):(0,a.default)(this.props.children,function(e){return e.type===c}),"number"!=typeof this.focused&&(this.focused=this.getCurrentFocusedIndex()),t="previous"===e?-1:1,o=this.focused+t,!(o>=n.length||o<0)&&(l.findDOMNode(this.refs["item-"+o].refs.itemLink).focus(),this.focused=o,o)},getCurrentFocusedIndex:function(){var e=document.activeElement.parentNode,t=Array.prototype.slice(e.parentNode.children),n=t.indexOf(e);return n>-1?n:0}});e.exports=f},"./client/components/segmented-control/item.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var r=n("./node_modules/babel-runtime/helpers/defineProperty.js"),i=o(r),s=n("./node_modules/react/react.js"),a=n("./node_modules/classnames/index.js"),l=s.createClass({displayName:"SegmentedControlItem",propTypes:{children:s.PropTypes.node.isRequired,path:s.PropTypes.string,selected:s.PropTypes.bool,title:s.PropTypes.string,value:s.PropTypes.string,onClick:s.PropTypes.func},getDefaultProps:function(){return{selected:!1}},render:function(){var e=a({"segmented-control__item":!0,"is-selected":this.props.selected}),t=a("segmented-control__link",(0,i.default)({},"item-index-"+this.props.index,null!=this.props.index));return s.createElement("li",{className:e},s.createElement("a",{href:this.props.path,className:t,ref:"itemLink",onClick:this.props.onClick,title:this.props.title,"data-e2e-value":this.props.value,role:"radio",tabIndex:0,"aria-selected":this.props.selected},s.createElement("span",{className:"segmented-control__text"},this.props.children)))}});e.exports=l},"./client/components/shortcode/data.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=o(p),m=n("./node_modules/lodash/pick.js"),h=o(m),g=n("./node_modules/react/react.js"),y=n("./node_modules/flux/utils.js"),v=n("./client/lib/shortcodes/store.js"),b=o(v),_=function(e){function t(){return(0,a.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.filterRenderResult,o=(0,h.default)(this.state.data,"body","scripts","styles");return(0,g.cloneElement)(t,n(o))}}],[{key:"getStores",value:function(){return[b.default]}},{key:"calculateState",value:function(e,t){var n=t.siteId,o=t.shortcode;return{data:b.default.get(n,o)}}}]),t}(g.Component);_.propTypes={siteId:g.PropTypes.number.isRequired,shortcode:g.PropTypes.string.isRequired,filterRenderResult:g.PropTypes.func},_.defaultProps={filterRenderResult:function(e){return e}},t.default=y.Container.create(_,{withProps:!0}),e.exports=t.default},"./client/components/shortcode/frame.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/helpers/extends.js"),i=o(r),s=n("./node_modules/babel-runtime/core-js/json/stringify.js"),a=o(s),l=n("./node_modules/lodash/omit.js"),d=o(l),u=n("./node_modules/lodash/isEqual.js"),c=o(u),p=n("./node_modules/react/react.js"),f=o(p),m=n("./node_modules/classnames/index.js"),h=o(m),g=n("./client/lib/embed-frame-markup/index.jsx"),y=o(g),v=n("./client/components/resizable-iframe/index.jsx"),b=o(v);t.default=f.default.createClass({displayName:"ShortcodeFrame",propTypes:{body:p.PropTypes.string,scripts:p.PropTypes.object,style:p.PropTypes.object,onLoad:p.PropTypes.func,className:p.PropTypes.string},getDefaultProps:function(){return{onLoad:function(){}}},getInitialState:function(){
return{html:""}},componentDidMount:function(){this.updateHtmlState(this.props)},componentWillReceiveProps:function(e){(0,c.default)(this.props,e)||this.updateHtmlState(e)},shouldComponentUpdate:function(e,t){return t.html!==this.state.html},updateHtmlState:function(e){this.setState({html:(0,y.default)(e)})},onFrameLoad:function(e){e.target.contentWindow.postMessage((0,a.default)({content:this.state.html}),"*"),this.props.onLoad(e)},render:function(){var e=(0,h.default)("shortcode-frame",this.props.className);if(!this.state.html)return null;var t=Math.random();return f.default.createElement(b.default,(0,i.default)({key:t},(0,d.default)(this.props,"body","scripts","styles"),{src:"https://wpcomwidgets.com/render/",onLoad:this.onFrameLoad,frameBorder:"0",sandbox:"allow-scripts",className:e}))}}),e.exports=t.default},"./client/components/shortcode/index.jsx":function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/babel-runtime/helpers/extends.js"),s=r(i),a=n("./node_modules/lodash/omit.js"),l=r(a),d=n("./node_modules/react/react.js"),u=r(d),c=n("./node_modules/classnames/index.js"),p=r(c),f=n("./client/lib/shortcodes/store.js"),m=r(f),h=n("./client/lib/shortcodes/actions.js"),g=o(h),y=n("./client/components/shortcode/data.jsx"),v=r(y),b=n("./client/components/shortcode/frame.jsx"),_=r(b);t.default=u.default.createClass({displayName:"Shortcode",propTypes:{siteId:d.PropTypes.number.isRequired,children:d.PropTypes.string.isRequired,filterRenderResult:d.PropTypes.func,className:d.PropTypes.string},componentDidMount:function(){this.fetchRendered(),this.listener=m.default.addListener(this.fetchRendered)},componentDidUpdate:function(){this.fetchRendered()},componentWillUnmount:function(){this.clearFetchTimeout(),this.listener&&this.listener.remove()},fetchRendered:function(){var e=this,t=this.props,n=t.siteId,o=t.children;m.default.get(n,o)||(this.clearFetchTimeout(),this.fetchTimeout=setTimeout(function(){e.clearFetchTimeout(),g.fetch(n,o)},0))},clearFetchTimeout:function(){clearTimeout(this.fetchTimeout),this.fetchTimeout=null},render:function(){var e=this.props,t=e.siteId,n=e.className,o=e.filterRenderResult,r=e.children,i=(0,p.default)("shortcode",n);return u.default.createElement(v.default,{siteId:t,shortcode:r,filterRenderResult:o},u.default.createElement(_.default,(0,s.default)({},(0,l.default)(this.props,"siteId","filterRenderResult"),{className:i})))}}),e.exports=t.default},"./client/components/sorted-grid/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/helpers/extends.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/toConsumableArray.js"),a=o(s),l=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/createClass.js"),f=o(p),m=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),h=o(m),g=n("./node_modules/babel-runtime/helpers/inherits.js"),y=o(g),v=n("./node_modules/lodash/slice.js"),b=o(v),_=n("./node_modules/lodash/reduce.js"),x=o(_),C=n("./node_modules/lodash/omit.js"),E=o(C),w=n("./node_modules/lodash/map.js"),j=o(w),S=n("./node_modules/lodash/last.js"),T=o(S),P=n("./node_modules/lodash/keys.js"),k=o(P),I=n("./node_modules/lodash/get.js"),N=o(I),R=n("./node_modules/react/react.js"),D=o(R),M=n("./node_modules/prop-types/index.js"),O=o(M),A=n("./client/components/infinite-list/index.jsx"),L=o(A),F=n("./client/components/sorted-grid/label.jsx"),B=o(F),z=function(e){function t(){var e,n,o,r;(0,c.default)(this,t);for(var i=arguments.length,s=Array(i),a=0;a<i;a++)s[a]=arguments[a];return n=o=(0,h.default)(this,(e=t.__proto__||(0,d.default)(t)).call.apply(e,[this].concat(s))),o.renderItem=function(e){return e.isGridLabel?o.renderLabels(e):o.props.renderItem(e)},r=n,(0,h.default)(o,r)}return(0,y.default)(t,e),(0,f.default)(t,[{key:"getItems",value:function(){for(var e=[],t=0;t<this.props.items.length;t+=this.props.itemsPerRow){var n=(0,b.default)(this.props.items,t,t+this.props.itemsPerRow),o=(0,x.default)((0,j.default)(n,this.props.getItemGroup),function(e,t){return e[t]=(0,N.default)(e,t,0)+1,e},{});e.push.apply(e,[{isGridLabel:!0,id:t,groups:o}].concat((0,a.default)(n)))}return e}},{key:"renderLabels",value:function(e){var t=this;return D.default.createElement("div",{key:"header_"+e.id,className:"sorted-grid__header"},(0,j.default)(e.groups,function(n,o){return D.default.createElement(B.default,{key:"group_"+o,text:t.props.getGroupLabel(o),itemsCount:n,itemsPerRow:t.props.itemsPerRow,lastInRow:(0,T.default)((0,k.default)(e.groups))===o})}))}},{key:"render",value:function(){var e=(0,E.default)(this.props,"getGroupLabel","getItemGroup","items","renderItem");return D.default.createElement(L.default,(0,i.default)({items:this.getItems(),renderItem:this.renderItem},e))}}]),t}(R.PureComponent);z.propTypes={getGroupLabel:O.default.func.isRequired,getItemGroup:O.default.func.isRequired,items:O.default.array,itemsPerRow:O.default.number.isRequired},t.default=z,e.exports=t.default},"./client/components/sorted-grid/label.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/react/react.js"),i=o(r),s=n("./node_modules/prop-types/index.js"),a=o(s),l=n("./node_modules/react-redux/es/index.js"),d=n("./client/state/preferences/selectors.js"),u=function(e){var t=e.itemsCount,n=e.itemsPerRow,o=e.lastInRow,r=e.scale,s=e.text,a=1%r/(n-1)*100||0,l={marginRight:(o?0:a)+"%",width:r*t*100+a*(t-1)+"%"};return i.default.createElement("div",{className:"sorted-grid__label",style:l},s)};u.propTypes={itemsCount:a.default.number,itemsPerRow:a.default.number,lastInRow:a.default.bool,scale:a.default.number.isRequired,text:a.default.string},u.defaultProps={text:""};var c=(0,l.connect)(function(e){return{scale:(0,d.getPreference)(e,"mediaScale")}},null,null,{pure:!1});t.default=c(u),e.exports=t.default},"./client/components/sticky-panel/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var r=n("./node_modules/lodash/throttle.js"),i=o(r),s=n("./node_modules/react-dom/index.js"),a=n("./node_modules/react/react.js"),l=n("./node_modules/classnames/index.js"),d=n("./client/lib/viewport/index.js");e.exports=a.createClass({displayName:"StickyPanel",propTypes:{minLimit:a.PropTypes.oneOfType([a.PropTypes.bool,a.PropTypes.number])},getDefaultProps:function(){return{minLimit:!1}},getInitialState:function(){return{isSticky:!1,spacerHeight:0,blockWidth:0}},componentDidMount:function(){this.threshold=s.findDOMNode(this).offsetTop,this.throttleOnResize=(0,i.default)(this.onWindowResize,200),window.addEventListener("scroll",this.onWindowScroll),window.addEventListener("resize",this.throttleOnResize),this.updateIsSticky()},componentWillUnmount:function(){window.removeEventListener("scroll",this.onWindowScroll),window.removeEventListener("resize",this.throttleOnResize),window.cancelAnimationFrame(this.rafHandle)},onWindowScroll:function(){this.rafHandle=window.requestAnimationFrame(this.updateIsSticky)},onWindowResize:function(){this.setState({spacerHeight:this.state.isSticky?s.findDOMNode(this).clientHeight:0,blockWidth:this.state.isSticky?s.findDOMNode(this).clientWidth:0})},updateIsSticky:function(){var e=window.pageYOffset>this.threshold;return this.props.minLimit!==!1&&this.props.minLimit>=window.innerWidth||d.isMobile()?this.setState({isSticky:!1}):void(e!==this.state.isSticky&&this.setState({isSticky:e,spacerHeight:e?s.findDOMNode(this).clientHeight:0,blockWidth:e?s.findDOMNode(this).clientWidth:0}))},getBlockStyle:function(){var e;if(this.state.isSticky)return e=document.getElementById("header").getBoundingClientRect().height,{top:e,width:this.state.blockWidth}},render:function(){var e=l("sticky-panel",this.props.className,{"is-sticky":this.state.isSticky});return a.createElement("div",{className:e},a.createElement("div",{className:"sticky-panel__content",style:this.getBlockStyle()},this.props.children),a.createElement("div",{className:"sticky-panel__spacer",style:{height:this.state.spacerHeight}}))}})},"./client/components/textarea-autosize/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/helpers/extends.js"),i=o(r),s=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/createClass.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),f=o(p),m=n("./node_modules/babel-runtime/helpers/inherits.js"),h=o(m),g=n("./node_modules/react/react.js"),y=o(g),v=n("./node_modules/prop-types/index.js"),b=o(v),_=n("./node_modules/classnames/index.js"),x=o(_),C=n("./node_modules/autosize/dist/autosize.js"),E=o(C),w=function(e){function t(){return(0,d.default)(this,t),(0,f.default)(this,(t.__proto__||(0,a.default)(t)).apply(this,arguments))}return(0,h.default)(t,e),(0,c.default)(t,[{key:"componentDidMount",value:function(){(0,E.default)(this.refs.textarea)}},{key:"componentWillUnmount",value:function(){E.default.destroy(this.refs.textarea)}},{key:"componentDidUpdate",value:function(e){this.props.value!==e.value&&this.resize()}},{key:"resize",value:function(){E.default.update(this.refs.textarea)}},{key:"render",value:function(){var e=(0,x.default)("textarea-autosize",this.props.className);return y.default.createElement("textarea",(0,i.default)({ref:"textarea"},this.props,{className:e}))}}]),t}(g.Component);w.propTypes={className:b.default.string},t.default=w,e.exports=t.default},"./client/components/tinymce/i18n.js":function(e,t,n){"use strict";var o=n("./node_modules/i18n-calypso/index.js");e.exports={Formats:o.translate("Formats",{context:"TinyMCE"}),Headings:o.translate("Headings",{context:"TinyMCE"}),"Heading 1":o.translate("Heading 1"),"Heading 2":o.translate("Heading 2"),"Heading 3":o.translate("Heading 3"),"Heading 4":o.translate("Heading 4"),"Heading 5":o.translate("Heading 5"),"Heading 6":o.translate("Heading 6"),Blocks:o.translate("Blocks",{context:"TinyMCE",comment:"block tags"}),Paragraph:o.translate("Paragraph"),Blockquote:o.translate("Blockquote"),Div:o.translate("Div",{context:"HTML tag"}),Pre:o.translate("Pre",{context:"HTML tag"}),Preformatted:o.translate("Preformatted",{context:"HTML tag"}),Address:o.translate("Address",{context:"HTML tag"}),Inline:o.translate("Inline",{context:"HTML elements"}),Underline:o.translate("Underline"),Strikethrough:o.translate("Strikethrough"),Subscript:o.translate("Subscript"),Superscript:o.translate("Superscript"),"Clear formatting":o.translate("Clear formatting"),Bold:o.translate("Bold"),Italic:o.translate("Italic"),"Source code":o.translate("Source code"),"Font Family":o.translate("Font Family"),"Font Sizes":o.translate("Font Sizes"),"Align center":o.translate("Align center"),"Align right":o.translate("Align right"),"Align left":o.translate("Align left"),Justify:o.translate("Justify"),"Increase indent":o.translate("Increase indent"),"Decrease indent":o.translate("Decrease indent"),Cut:o.translate("Cut"),Copy:o.translate("Copy"),Paste:o.translate("Paste"),"Select all":o.translate("Select all"),Undo:o.translate("Undo"),Redo:o.translate("Redo"),Ok:o.translate("OK"),Cancel:o.translate("Cancel"),Close:o.translate("Close"),"Visual aids":o.translate("Visual aids"),"Paste is now in plain text mode. Contents will now be pasted as plain text until you toggle this option off.":o.translate("Paste is now in plain text mode. Contents will now be pasted as plain text until you toggle this option off.")+"\n\n"+o.translate("If you’re looking to paste rich content from Microsoft Word, try turning this option off. The editor will clean up text pasted from Word automatically."),"Rich Text Area. Press ALT-F9 for menu. Press ALT-F10 for toolbar. Press ALT-0 for help":o.translate("Rich Text Area. Press Alt-Shift-H for help"),"You have unsaved changes are you sure you want to navigate away?":o.translate("The changes you made will be lost if you navigate away from this page."),"Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.":o.translate("Your browser does not support direct access to the clipboard. Please use keyboard shortcuts or your browser’s edit menu instead."),"Bullet list":o.translate("Bulleted list"),"Numbered list":o.translate("Numbered list"),"Toolbar Toggle":o.translate("Toolbar Toggle"),"Insert Read More tag":o.translate("Insert Read More tag"),"Insert Page Break tag":o.translate("Insert Page Break tag"),"No alignment":o.translate("No alignment"),Remove:o.translate("Remove"),"Edit ":o.translate("Edit"),"Horizontal line":o.translate("Horizontal line"),"Text color":o.translate("Text color"),"Paste as text":o.translate("Paste as text")}},"./client/components/tinymce/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var r=n("./node_modules/babel-runtime/helpers/extends.js"),i=o(r),s=n("./node_modules/lodash/forEach.js"),a=o(s),l=n("./node_modules/lodash/assign.js"),d=o(l),u=n("./client/components/tinymce/plugins/wpcom/plugin.js"),c=o(u),p=n("./client/components/tinymce/plugins/wpcom-autoresize/plugin.js"),f=o(p),m=n("./client/components/tinymce/plugins/wpcom-help/plugin.js"),h=o(m),g=n("./client/components/tinymce/plugins/wpcom-charmap/plugin.js"),y=o(g),v=n("./client/components/tinymce/plugins/wpcom-view/plugin.js"),b=o(v),_=n("./client/components/tinymce/plugins/wpcom-sourcecode/plugin.js"),x=o(_),C=n("./client/components/tinymce/plugins/wpeditimage/plugin.js"),E=o(C),w=n("./client/components/tinymce/plugins/wplink/plugin.js"),j=o(w),S=n("./client/components/tinymce/plugins/media/plugin.jsx"),T=o(S),P=n("./client/components/tinymce/plugins/advanced/plugin.jsx"),k=o(P),I=n("./client/components/tinymce/plugins/wpcom-tabindex/plugin.js"),N=o(I),R=n("./client/components/tinymce/plugins/wpcom-track-paste/plugin.js"),D=o(R),M=n("./client/components/tinymce/plugins/touch-scroll-toolbar/plugin.js"),O=o(M),A=n("./client/components/tinymce/plugins/editor-button-analytics/plugin.js"),L=o(A),F=n("./client/components/tinymce/plugins/calypso-alert/plugin.jsx"),B=o(F),z=n("./client/components/tinymce/plugins/contact-form/plugin.jsx"),U=o(z),H=n("./client/components/tinymce/plugins/simple-payments/plugin.jsx"),W=o(H),V=n("./client/components/tinymce/plugins/after-the-deadline/plugin.js"),q=o(V),G=n("./client/components/tinymce/plugins/wptextpattern/plugin.js"),K=o(G),$=n("./client/components/tinymce/plugins/toolbar-pin/plugin.js"),Y=o($),J=n("./client/components/tinymce/plugins/insert-menu/plugin.jsx"),Z=o(J),X=n("./client/components/tinymce/plugins/embed-reversal/plugin.js"),Q=o(X),ee=n("./client/post-editor/editor-html-toolbar/index.jsx"),te=o(ee),ne=n("./client/components/tinymce/plugins/mentions/plugin.jsx"),oe=o(ne),re=n("./client/components/tinymce/plugins/markdown/plugin.js"),ie=o(re),se=n("./client/components/tinymce/plugins/wpemoji/plugin.js"),ae=o(se),le=n("./client/lib/formatting/index.js"),de=n("./node_modules/react-dom/index.js"),ue=n("./node_modules/react/react.js"),ce=n("./node_modules/prop-types/index.js"),pe=n("./node_modules/classnames/index.js"),fe=n("./node_modules/autosize/dist/autosize.js"),me=n("./node_modules/tinymce/tinymce.js");n("./node_modules/tinymce/themes/modern/theme.js"),n("./node_modules/tinymce/plugins/colorpicker/plugin.js"),n("./node_modules/tinymce/plugins/directionality/plugin.js"),n("./node_modules/tinymce/plugins/hr/plugin.js"),n("./node_modules/tinymce/plugins/lists/plugin.js"),n("./node_modules/tinymce/plugins/media/plugin.js"),n("./node_modules/tinymce/plugins/paste/plugin.js"),n("./node_modules/tinymce/plugins/tabfocus/plugin.js"),n("./node_modules/tinymce/plugins/textcolor/plugin.js"),[c.default,f.default,h.default,y.default,b.default,x.default,E.default,j.default,Z.default,T.default,k.default,N.default,D.default,O.default,L.default,B.default,U.default,q.default,K.default,Y.default,Q.default,ie.default,ae.default,W.default].forEach(function(e){return e()});var he=n("./client/lib/user/index.js")(),ge=n("./client/components/tinymce/i18n.js"),ye=n("./client/lib/viewport/index.js"),ve=n("./client/config/index.js"),be=1,_e="/do-not-load/",xe={activate:"onActivate",blur:"onBlur",change:"onChange",input:"onInput",keyUp:"onKeyUp",deactivate:"onDeactivate",focus:"onFocus",hide:"onHide",init:"onInit",mouseUp:"onMouseUp",redo:"onRedo",remove:"onRemove",reset:"onReset",show:"onShow",submit:"onSubmit",undo:"onUndo",setContent:"onSetContent"},Ce=["colorpicker","hr","lists","media","paste","tabfocus","textcolor","wptextpattern","wpcom","wpeditimage","wplink","AtD","directionality","wpemoji","wpcom/autoresize","wpcom/media","wpcom/advanced","wpcom/help","wpcom/charmap","wpcom/tabindex","wpcom/touchscrolltoolbar","wpcom/view","wpcom/editorbuttonanalytics","wpcom/calypsoalert","wpcom/tabindex","wpcom/toolbarpin","wpcom/contactform","wpcom/sourcecode","wpcom/embedreversal","wpcom/trackpaste","wpcom/insertmenu","wpcom/markdown","wpcom/simplepayments"];(0,oe.default)(),Ce.push("wpcom/mentions");var Ee=[window.app.tinymceWpSkin,"//s1.wp.com/wp-includes/css/dashicons.css",window.app.tinymceEditorCss,"//fonts.googleapis.com/css?family=Noto+Serif:400,400i,700,700i&subset=cyrillic,cyrillic-ext,greek,greek-ext,latin-ext,vietnamese"];e.exports=ue.createClass({displayName:"TinyMCE",propTypes:{isNew:ce.bool,mode:ce.string,tabIndex:ce.number,onActivate:ce.func,onBlur:ce.func,onChange:ce.func,onDeactivate:ce.func,onFocus:ce.func,onHide:ce.func,onInit:ce.func,onInput:ce.func,onKeyUp:ce.func,onMouseUp:ce.func,onRedo:ce.func,onRemove:ce.func,onReset:ce.func,onShow:ce.func,onSubmit:ce.func,onSetContent:ce.func,onUndo:ce.func,onTextEditorChange:ce.func},contextTypes:{store:ce.object},getDefaultProps:function(){return{mode:"tinymce",isNew:!1}},getInitialState:function(){return{content:"",selection:null}},_editor:null,componentWillMount:function(){this._id="tinymce-"+be,be++},componentDidUpdate:function(e){this._editor&&(this.bindEditorEvents(e),this.props.mode!==e.mode&&this.toggleEditor())},componentDidMount:function(){this.mounted=!0;var e=function(e){var t=this;return this._editor=e,this.mounted?(this.bindEditorEvents(),e.on("SetTextAreaContent",function(e){return t.setTextAreaContent(e.content)}),void e.once("PostRender",this.toggleEditor.bind(this,{autofocus:!this.props.isNew}))):void this.destroyEditor()}.bind(this);this.localize();var t=he.isRTL()?"ltr,":"";me.init({selector:"#"+this._id,skin_url:"//s1.wp.com/wp-includes/js/tinymce/skins/lightgray",skin:"lightgray",content_css:Ee,language:he.get()?he.get().localeSlug:"en",language_url:_e,directionality:he.isRTL()?"rtl":"ltr",formats:{alignleft:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"left"}},{selector:"img,table,dl.wp-caption",classes:"alignleft"}],aligncenter:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"center"}},{selector:"img,table,dl.wp-caption",classes:"aligncenter"}],alignright:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"right"}},{selector:"img,table,dl.wp-caption",classes:"alignright"}],strikethrough:{inline:"del"}},relative_urls:!1,remove_script_host:!1,convert_urls:!1,branding:!1,browser_spellcheck:!0,fix_list_elements:!0,entities:"38,amp,60,lt,62,gt",entity_encoding:"raw",keep_styles:!1,wpeditimage_html5_captions:!0,redux_store:this.context.store,textarea:this.refs.text,preview_styles:"font-family font-size font-weight font-style text-decoration text-transform",end_container_on_empty_block:!0,plugins:Ce.join(),statusbar:!1,resize:!1,menubar:!1,indent:!1,atd_rpc_id:"https://wordpress.com",atd_ignore_enable:!0,autoresize_min_height:Math.max(document.documentElement.clientHeight-300,300),autoresize_bottom_margin:ye.isMobile()?10:50,toolbar1:"wpcom_insert_menu,formatselect,bold,italic,bullist,numlist,link,blockquote,alignleft,aligncenter,alignright,spellchecker,wp_more,"+t+"wpcom_advanced",toolbar2:"strikethrough,underline,hr,alignjustify,forecolor,pastetext,removeformat,wp_charmap,outdent,indent,undo,redo,wp_help",toolbar3:"",toolbar4:"",tabfocus_elements:"content-html,save-post",tabindex:this.props.tabIndex,body_class:"content post-type-post post-status-draft post-format-standard locale-en-us",add_unload_trigger:!1,setup:e}),fe(de.findDOMNode(this.refs.text))},componentWillUnmount:function(){this.mounted=!1,this._editor&&this.destroyEditor()},destroyEditor:function(){(0,a.default)(xe,function(e,t){this.props[e]&&this._editor.off(t,this.props[e])}.bind(this)),me.remove(this._editor),this._editor=null,fe.destroy(de.findDOMNode(this.refs.text))},doAutosizeUpdate:function(){fe.update(de.findDOMNode(this.refs.text))},bindEditorEvents:function(e){e=e||{},(0,a.default)(xe,function(t,n){e[t]!==this.props[t]&&(this.props[t]?this._editor.on(n,this.props[t]):this._editor.off(n,this.props[t]))}.bind(this))},toggleEditor:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{autofocus:!0};if(this._editor){if("html"===this.props.mode)return this._editor.hide(),this.doAutosizeUpdate(),void(e.autofocus&&this.focusEditor());this._editor.show(),e.autofocus&&this.focusEditor()}},focusEditor:function(){if("html"===this.props.mode){var e=de.findDOMNode(this.refs.text);this.state.selection?this.selectTextInTextArea(this.state.selection):e.setSelectionRange(0,0),11!==me.Env.ie&&e.focus()}else this._editor&&this._editor.focus()},getContent:function(e){if("html"===this.props.mode)return this.state.content;if(!this._editor)return"";var t=this._editor.getContent(e);return e&&"raw"===e.format||(t=t.replace(/<p>(?:<br ?\/?>|\u00a0|\uFEFF| )*<\/p>/g,"<p>&nbsp;</p>"),t=(0,le.removep)(t)),t},isDirty:function(){return!!this._editor&&this._editor.isDirty()},setTextAreaContent:function(e){this.setState({content:(0,le.decodeEntities)(e)},this.doAutosizeUpdate)},setEditorContent:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._editor){var n=this.props.mode;this._editor.setContent((0,le.wpautop)(e),(0,i.default)({},t,{mode:n})),t.initial&&this._editor.undoManager.clear()}this.setTextAreaContent(e)},setSelection:function(e){this.setState({selection:e})},selectTextInTextArea:function(e){if(e){var t=de.findDOMNode(this.refs.text),n=e.start,o=e.end||e.start;t.setSelectionRange(n,o),this.setState({selection:null})}},onTextAreaChange:function(e){var t=e.target.value;this.props.onTextEditorChange&&this.props.onTextEditorChange(t),this.setState({content:t},this.doAutosizeUpdate)},onToolbarChangeContent:function(e){this.props.onTextEditorChange&&this.props.onTextEditorChange(e),this.setState({content:e},this.doAutosizeUpdate)},localize:function(){var e=he.get(),t=ge;e&&(he.isRTL()&&(t=(0,d.default)({_dir:"rtl"},t)),me.addI18n(e.localeSlug,t),me.ScriptLoader.markDone(_e))},render:function(){var e=this.props.mode,t=pe({tinymce:!0,"is-visible":"html"===e});return ue.createElement("div",null,"html"===e&&ve.isEnabled("post-editor/html-toolbar")&&ue.createElement(te.default,{content:this.refs.text,onToolbarChangeContent:this.onToolbarChangeContent}),ue.createElement("textarea",{ref:"text",className:t,id:this._id,onChange:this.onTextAreaChange,tabIndex:this.props.tabIndex,value:this.state.content}))}})},"./client/components/tinymce/plugins/advanced/plugin.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){function t(){return(0,g.getPreference)(i(),"editorAdvancedVisible")}function n(){var t=e.theme.panel.find(".toolbar:not(.menubar)"),n=(0,m.isWithinBreakpoint)("<960px"),o=0;t.each(function(e,t){var r=n||0===t||d;e.visible(r),r&&(n?o=Math.max(o,e.getEl().clientHeight):o+=e.getEl().clientHeight)}),u.default.DOM.setStyles(e.getContainer(),{"padding-top":o}),p&&p.active(d)}var o=e.getParam("redux_store");if(o){var r=o.dispatch,i=o.getState,a=o.subscribe,d=t(),p=void 0;e.addButton("wpcom_advanced",{text:(0,c.translate)("Toggle Advanced"),tooltip:(0,c.translate)("Toggle Advanced"),classes:"btn wpcom-icon-button advanced",cmd:"WPCOM_ToggleAdvancedVisible",onPostRender:function(){p=this,this.innerHtml(l.default.renderToStaticMarkup(s.default.createElement("button",{type:"button",role:"presentation",tabIndex:"-1"},s.default.createElement(f.default,{icon:"ellipsis",size:28}))))}}),e.addCommand("WPCOM_ToggleAdvancedVisible",function(){r((0,h.savePreference)("editorAdvancedVisible",!d))}),e.on("init",function(){(0,g.isFetchingPreferences)(i())||r((0,h.fetchPreferences)())}),e.on("preInit",function(){e.shortcuts.add("access+z","","WPCOM_ToggleAdvancedVisible")}),e.on("init show",n),window.addEventListener("resize",n),a(function(){var e=t();e!==d&&(d=e,n())})}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){u.default.PluginManager.add("wpcom/advanced",r)};var i=n("./node_modules/react/react.js"),s=o(i),a=n("./node_modules/react-dom/server.js"),l=o(a),d=n("./node_modules/tinymce/tinymce.js"),u=o(d),c=n("./node_modules/i18n-calypso/index.js"),p=n("./node_modules/gridicons/build/index.js"),f=o(p),m=n("./client/lib/viewport/index.js"),h=n("./client/state/preferences/actions.js"),g=n("./client/state/preferences/selectors.js");e.exports=t.default},"./client/components/tinymce/plugins/after-the-deadline/core.js":function(e,t,n){"use strict";function o(){this.ignore_types=["Bias Language","Cliches","Complex Expression","Diacritical Marks","Double Negatives","Hidden Verbs","Jargon Language","Passive voice","Phrases to Avoid","Redundant Expression"],this.ignore_strings={},this.i18n={}}function r(e){this.tokens=e,this.index=0,this.count=0,this.last=0}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/i18n-calypso/index.js");o.prototype.setIgnoreStrings=function(e){var t=this;"string"==typeof e&&(e=e.split(/,\s*/g)),this.map(e,function(e){t.ignore_strings[e]=1})},o.prototype.showTypes=function(e){var t=e.split(/,\s*/g),n={},o=[];n["Double Negatives"]=1,n["Hidden Verbs"]=1,n["Passive voice"]=1,n["Bias Language"]=1,n.Cliches=1,n["Complex Expression"]=1,n["Diacritical Marks"]=1,n["Jargon Language"]=1,n["Phrases to Avoid"]=1,n["Redundant Expression"]=1,this.map(t,function(e){n[e]=void 0}),this.map(this.ignore_types,function(e){void 0!==n[e]&&o.push(e)}),this.ignore_types=o},o.prototype.makeError=function(e,t,n,o){var r={};return r.type=n,r.string=e,r.tokens=t,new RegExp("\\b"+e+"\\b").test(e)?r.regexp=new RegExp("(?!"+e+"<)\\b"+e.replace(/\s+/g,o)+"\\b"):new RegExp(e+"\\b").test(e)?r.regexp=new RegExp("(?!"+e+"<)"+e.replace(/\s+/g,o)+"\\b"):new RegExp("\\b"+e).test(e)?r.regexp=new RegExp("(?!"+e+"<)\\b"+e.replace(/\s+/g,o)):r.regexp=new RegExp("(?!"+e+"<)"+e.replace(/\s+/g,o)),r.used=!1,r},o.prototype.addToErrorStructure=function(e,t,n,o){var r=this;this.map(t,function(t){var i=t.word.split(/\s+/),s=t.pre,a=i[0];void 0===e["__"+a]&&(e["__"+a]={},e["__"+a].pretoks={},e["__"+a].defaults=[]),""===s?e["__"+a].defaults.push(r.makeError(t.word,i,n,o,s)):(void 0===e["__"+a].pretoks["__"+s]&&(e["__"+a].pretoks["__"+s]=[]),e["__"+a].pretoks["__"+s].push(r.makeError(t.word,i,n,o,s)))})},o.prototype.buildErrorStructure=function(e,t,n){var o=this._getSeparators(),r={};return this.addToErrorStructure(r,e,"hiddenSpellError",o),this.addToErrorStructure(r,n,"hiddenGrammarError",o),this.addToErrorStructure(r,t,"hiddenSuggestion",o),r},o.prototype._getSeparators=function(){var e,t="",n='"s!#$%&()*+,./:;<=>?@[\\]^_{|}';for(e=0;e<n.length;e++)t+="\\"+n.charAt(e);return"(?:(?:[ "+t+"])|(?:\\-\\-))+"},o.prototype.processXML=function(e){var t,n,o,r,s,a,l,d,u,c,p,f,m,h,g,y;for(t={},this.map(this.ignore_types,function(e){t[e]=1}),this.suggestions=[],n=e.getElementsByTagName("error"),o=[],r=[],s=[],a=0;a<n.length;a++)if(null!==n[a].getElementsByTagName("string").item(0).firstChild&&(l=n[a].getElementsByTagName("string").item(0).firstChild.data,d=n[a].getElementsByTagName("type").item(0).firstChild.data,u=n[a].getElementsByTagName("description").item(0).firstChild.data,c=null!==n[a].getElementsByTagName("precontext").item(0).firstChild?n[a].getElementsByTagName("precontext").item(0).firstChild.data:"",void 0===this.ignore_strings[l])){if(p={},p.description=u,p.suggestions=[],p.matcher=new RegExp("^"+l.replace(/\s+/,this._getSeparators())+"$"),p.context=c,p.string=l,p.type=d,this.suggestions.push(p),null!==n[a].getElementsByTagName("suggestions").item(0))for(f=n[a].getElementsByTagName("suggestions").item(0).getElementsByTagName("option"),m=0;m<f.length;m++)p.suggestions.push(f[m].firstChild.data);null!==n[a].getElementsByTagName("url").item(0)&&(h=n[a].getElementsByTagName("url").item(0).firstChild.data,p.moreinfo=h+"&theme=tinymce"),void 0===t[u]&&("suggestion"===d&&s.push({word:l,pre:c}),"grammar"===d&&o.push({word:l,pre:c})),"spelling"!==d&&"Homophone"!==u||r.push({word:l,pre:c}),"Cliches"===u&&(p.description="Clichés"),"Spelling"===u&&(p.description=(0,i.translate)("Spelling",{comment:"Proofreading error description"})),"Repeated Word"===u&&(p.description=(0,i.translate)("Repeated Word",{comment:"Proofreading error description"})),"Did you mean..."===u&&(p.description=(0,i.translate)("Did you mean…",{comment:"Proofreading error description"}))}return y=r.length+o.length+s.length,g=y>0?this.buildErrorStructure(r,s,o):void 0,{errors:g,count:y,suggestions:this.suggestions}},o.prototype.findSuggestion=function(e){var t,n,o=e.innerHTML,r=(this.getAttrib(e,"pre")+"").replace(/[\\,!\\?\\."\s]/g,""),i=this.suggestions.length;for(n=0;n<i;n++)if((""===r||r===this.suggestions[n].context)&&this.suggestions[n].matcher.test(o)){t=this.suggestions[n];break}return t},r.prototype.next=function(){var e=this.tokens[this.index];return this.count=this.last,this.last+=e.length+1,this.index++,""!==e&&("'"===e[0]&&(e=e.substring(1,e.length)),"'"===e[e.length-1]&&(e=e.substring(0,e.length-1))),e},r.prototype.hasNext=function(){return this.index<this.tokens.length},r.prototype.hasNextN=function(e){return this.index+e<this.tokens.length},r.prototype.skip=function(e,t){this.index+=e,this.last+=t,this.index<this.tokens.length&&(this.count=this.last-this.tokens[this.index].length)},r.prototype.getCount=function(){return this.count},r.prototype.peek=function(e){var t,n=[],o=this.index+e;for(t=this.index;t<o;t++)n.push(this.tokens[t]);return n},o.prototype.markMyWords=function(e,t){function n(e,t,n){var o,r=e.nodeValue,i=r.search(t),s=r.match(t),a=[];return i<0||!s.length?[e]:(i>0&&a.push(document.createTextNode(r.substr(0,i))),a.push(d.create(s[0].replace(t,n))),o=i+s[0].length,o<r.length&&a.push(document.createTextNode(r.substr(o))),a)}var o,i,s=new RegExp(this._getSeparators()),a=[],l=0,d=this,u=this._isTinyMCE?' data-mce-bogus="1"':"",c='<span class="mceItemHidden"'+u+">&nbsp;</span>";return this._walk(e,function(e){3!==e.nodeType||d.isMarkedNode(e)||a.push(e)}),this.map(a,function(e){var a,p,f,m,h,g,y,v,b,_,x,C,E,w,j,S,T,P,k={};if(3===e.nodeType){for(a=e.nodeValue,p=e.nodeValue.split(s),f="",m=[],i=new r(p);i.hasNext();){if(h=i.next(),g=t["__"+h],void 0!==g&&void 0!==g.pretoks){var I=function(e){void 0!==e&&!e.used&&void 0===k["__"+e.string]&&e.regexp.test(_)&&(k["__"+e.string]=1,m.push([e.regexp,'<span class="'+e.type+'" pre="'+f+'"'+u+">$&</span>"]),e.used=!0,v=!0)};y=g.defaults,g=g.pretoks["__"+f],v=!1,b=a.substr(0,i.getCount()),_=a.substr(b.length,a.length),void 0!==g&&(f+=" ",d.map(g,I)),v||(f="",d.map(y,I))}f=h}if(m.length>0){for(x=e,C=0;C<m.length;C++){var N=function(e){var t,r;if(3===e.nodeType){if(l++,d.isIE()&&e.nodeValue.length>0&&" "===e.nodeValue.substr(0,1))return d.create(c+e.nodeValue.substr(1,e.nodeValue.length-1).replace(E,w),!1);
if(o)return d.create(e.nodeValue.replace(E,w),!1);if(t=d.create("<span />"),"undefined"==typeof o&&(o="function"!=typeof t.appendChild))return d.remove(t),d.create(e.nodeValue.replace(E,w),!1);for(r=n(e,E,w),j=0;j<r.length;j++)t.appendChild(r[j]);return e=t}for(S=d.contents(e),T=0;T<S.length;T++)if(3===S[T].nodeType&&E.test(S[T].nodeValue))return P=d.isIE()&&S[T].nodeValue.length>0&&" "===S[T].nodeValue.substr(0,1)?d.create(c+S[T].nodeValue.substr(1,S[T].nodeValue.length-1).replace(E,w),!0):d.create(S[T].nodeValue.replace(E,w),!0),d.replaceWith(S[T],P),d.removeParent(P),l++,e;return e};E=m[C][0],w=m[C][1],x=N(x)}d.replaceWith(e,x)}}}),l},o.prototype._walk=function(e,t){var n;for(n=0;n<e.length;n++)t.call(t,e[n]),this._walk(this.contents(e[n]),t)},o.prototype.removeWords=function(e,t){var n=0,o=this;return this.map(this.findSpans(e).reverse(),function(e){var r;e&&(o.isMarkedNode(e)||o.hasClass(e,"mceItemHidden")||o.isEmptySpan(e))&&("&nbsp;"===e.innerHTML?(r=document.createTextNode(" "),o.replaceWith(e,r)):t&&e.innerHTML!==t||(o.removeParent(e),n++))}),n},o.prototype.isEmptySpan=function(e){return""===this.getAttrib(e,"class")&&""===this.getAttrib(e,"style")&&""===this.getAttrib(e,"id")&&!this.hasClass(e,"Apple-style-span")&&""===this.getAttrib(e,"mce_name")},o.prototype.isMarkedNode=function(e){return this.hasClass(e,"hiddenGrammarError")||this.hasClass(e,"hiddenSpellError")||this.hasClass(e,"hiddenSuggestion")},o.prototype.applySuggestion=function(e,t){var n;"(omit)"===t?this.remove(e):(n=this.create(t),this.replaceWith(e,n),this.removeParent(n))},o.prototype.hasErrorMessage=function(e){return void 0!==e&&null!==e.getElementsByTagName("message").item(0)},o.prototype.getErrorMessage=function(e){return e.getElementsByTagName("message").item(0)},o.prototype.isIE=function(){return"Microsoft Internet Explorer"===navigator.appName},t.default=o,e.exports=t.default},"./client/components/tinymce/plugins/after-the-deadline/plugin.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){function t(){w=new h.default,w.map=S,w._isTinyMCE=!0,w.getAttrib=function(e,t){return j.getAttrib(e,t)},w.findSpans=function(e){return void 0===e?j.select("span"):j.select("span",e)},w.hasClass=function(e,t){return j.hasClass(e,t)},w.contents=function(e){return e.childNodes},w.replaceWith=function(e,t){return j.replace(t,e)},w.create=function(e){return j.create("span",{class:"mceItemHidden","data-mce-bogus":1},e)},w.removeParent=function(e){return j.remove(e,!0),e},w.remove=function(e){j.remove(e)},w.setIgnoreStrings(e.getParam("atd_ignore_strings",[]).join(",")),w.showTypes(e.getParam("atd_show_types",""))}function n(e){return e.className&&/\bhidden(GrammarError|SpellError|Suggestion)\b/.test(e.className)}function o(t){return w.markMyWords(w.contents(e.getBody()),t)}function r(){e.dom.select("span.hiddenSpellError, span.hiddenGrammarError, span.hiddenSuggestion").length||(v&&v.hide(),a())}function i(t,n,o){o?S(e.dom.select("span.hiddenSpellError, span.hiddenGrammarError, span.hiddenSuggestion"),function(e){var t=e.innerText||e.textContent;t===n&&j.remove(e,!0)}):e.dom.remove(t,!0),r()}function a(){for(var t,n=new RegExp("mceItemHidden|hidden(((Grammar|Spell)Error)|Suggestion)"),o=e.dom.select("span"),r=o.length;r--;)t=o[r],t.className&&n.test(t.className)&&e.dom.remove(t,!0);e.setContent(e.getContent({format:"raw"}),{format:"raw"}),E=!1,e.nodeChanged(),e.fire("SpellcheckEnd")}function d(){var e=(0,f.getLocaleSlug)(),t=(0,l.default)(x,function(t){return e===t||0===e.indexOf(t+"-")});return t?t+"."+_:_}function c(t,n,o){e.setProgressState(!0);var r=new XMLHttpRequest;r.open("POST","https://"+d()+"/"+t),r.addEventListener("readystatechange",function(){4===r.readyState&&(e.setProgressState(),200===r.status&&o(""+r.responseText,r))});var i=e.getParam("atd_rpc_id");r.send(p.default.stringify({data:n,key:i}))}function m(e){var t=b.default.get(C)||[];-1===t.indexOf(e)&&t.push(e),y.default.set(C,t)}function g(t){var n=[],o=t.innerText||t.textContent,s=w.findSuggestion(t);s?(n.push({text:s.description,classes:"atd-menu-title",disabled:!0}),s.suggestions.length&&(n.push({text:"-"}),S(s.suggestions,function(e){n.push({text:e,onclick:function(){w.applySuggestion(t,e),r()}})}))):n.push({text:(0,f.translate)("No suggestions",{comment:"Editor proofreading no suggestions"}),classes:"atd-menu-title",disabled:!0}),s&&s.moreinfo&&(n.push({text:"-"}),n.push({text:(0,f.translate)("Explain…",{comment:"Editor proofreading menu item"}),onclick:function(){e.windowManager.open({title:(0,f.translate)("Explain…",{comment:"Editor proofreading menu item"}),url:s.moreinfo,width:480,height:380,inline:!0})}})),n.push.apply(n,[{text:"-"},{text:(0,f.translate)("Ignore suggestion",{comment:"Editor proofreading menu item"}),onclick:function(){i(t,o)}}]),e.getParam("atd_ignore_enable")?n.push({text:(0,f.translate)("Ignore always",{comment:"Editor proofreading menu item"}),onclick:function(){m(o),i(t,o,!0)}}):n.push({text:(0,f.translate)("Ignore all",{comment:"Editor proofreading menu item"}),onclick:function(){i(t,o,!0)}}),v=new T({items:n,target:t}),v.renderTo(document.body),v.on("hide",function(){v=null})}var v,E,w,j,S=u.default.each,T=u.default.ui.Menu.extend({init:function(e){e.context="contextmenu",e.autofix=!1,this.throttledReposition=(0,s.default)(this.reposition.bind(this),200),this.on("autohide",function(e){return e.preventDefault()}),this.boundHideIfNotMarked=this.hideIfNotMarked.bind(this),this._super(e)},hideIfNotMarked:function(e){n(e.target)||this.hide()},hide:function(){this._super(),this.remove(),window.removeEventListener("scroll",this.throttledReposition),e.off("SpellcheckEnd click touchstart focusout",this.boundHideIfNotMarked)},postRender:function(){this._super(),this.reposition(),window.addEventListener("scroll",this.throttledReposition),e.on("SpellcheckEnd click touchstart focusout",this.boundHideIfNotMarked)},reposition:function(){var t=e.dom.getRoot(),n=u.default.DOM.getPos(e.getContentAreaContainer()),o=e.dom.getPos(this.settings.target);"BODY"===t.nodeName?(o.x-=t.ownerDocument.documentElement.scrollLeft||t.scrollLeft,o.y-=t.ownerDocument.documentElement.scrollTop||t.scrollTop):(o.x-=t.scrollLeft,o.y-=t.scrollTop),n.x+=o.x,n.y+=o.y,this.moveTo(n.x,n.y+this.settings.target.offsetHeight)}});e.on("init",function(){j=e.dom,t(),e.addCommand("mceWritingImprovementTool",function(t){var n,r=0;return"function"!=typeof t&&(t=function(){}),"undefined"!=typeof window.AtD_proofread_click_count&&window.AtD_proofread_click_count++,E?void a():void c("checkDocument",e.getContent({format:"raw"}),function(i,s){return e.setProgressState(),200===s.status&&"html"!==s.responseText.substr(1,4)&&s.responseXML?null!==s.responseXML.getElementsByTagName("message").item(0)?void e.windowManager.alert(s.responseXML.getElementsByTagName("message").item(0).firstChild.data,t(0)):(n=w.processXML(s.responseXML),n.count>0&&(r=o(n.errors)),r?(E=!0,e.fire("SpellcheckStart")):e.windowManager.alert((0,f.translate)("No writing errors were found.",{comment:"Editor proofreading success prompt"})),void t(r)):void e.windowManager.alert((0,f.translate)("There was a problem communicating with the Proofreading service. Try again in one minute.",{comment:"Editor proofreading error"}),t(0))})}),e.settings.content_css!==!1&&j.addStyle(".hiddenSpellError{border-bottom:2px solid red;cursor:default;}.hiddenGrammarError{border-bottom:2px solid green;cursor:default;}.hiddenSuggestion{border-bottom:2px solid blue;cursor:default;}"),e.on("click",function(t){n(t.target)&&(t.preventDefault(),e.selection.select(t.target),g(t.target))})}),function(){function t(){var e=b.default.get(C);e&&w.setIgnoreStrings(e)}e.getParam("atd_ignore_enable")&&(void 0===b.default.getAll()&&y.default.fetch(),e.on("init",function(){b.default.on("change",t)}),e.on("remove",function(){b.default.off("change",t)}))}(),e.on("SpellcheckStart SpellcheckEnd",function(t){e.contentDocument.body.spellcheck="spellcheckend"===t.type,e.contentDocument.body.spellcheck||(e.contentDocument.body.focus(),e.contentDocument.body.blur())}),e.addMenuItem("spellchecker",{text:(0,f.translate)("Proofread Writing",{comment:"Editor proofreading toolbar tooltip"}),context:"tools",cmd:"mceWritingImprovementTool",onPostRender:function(){var t=this;e.on("SpellcheckStart SpellcheckEnd",function(){t.active(E)})}}),e.addButton("spellchecker",{tooltip:(0,f.translate)("Proofread Writing",{comment:"Editor proofreading button tooltip"}),cmd:"mceWritingImprovementTool",onPostRender:function(){var t=this;e.on("SpellcheckStart SpellcheckEnd",function(){t.active(E)})}}),e.on("remove",function(){v&&(v.remove(),v=null)})}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/lodash/throttle.js"),s=o(i),a=n("./node_modules/lodash/find.js"),l=o(a);t.default=function(){u.default.PluginManager.add("AtD",r)};var d=n("./node_modules/tinymce/tinymce.js"),u=o(d),c=n("./node_modules/querystring-es3/index.js"),p=o(c),f=n("./node_modules/i18n-calypso/index.js"),m=n("./client/components/tinymce/plugins/after-the-deadline/core.js"),h=o(m),g=n("./client/lib/preferences/actions.js"),y=o(g),v=n("./client/lib/preferences/store.js"),b=o(v),_="service.afterthedeadline.com",x=["en","pt","de","es","fr"],C="editorProofreadIgnore";e.exports=t.default},"./client/components/tinymce/plugins/calypso-alert/alert.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/react/react.js"),i=o(r),s=n("./client/components/dialog/index.jsx"),a=o(s),l=n("./client/components/forms/form-button/index.jsx"),d=o(l);t.default=i.default.createClass({displayName:"Alert",propTypes:{isVisible:i.default.PropTypes.bool.isRequired,onClose:i.default.PropTypes.func.isRequired,message:i.default.PropTypes.string.isRequired},splitMessage:function(){var e=this.props.message.split("\n\n");return e.map(function(e,t){return i.default.createElement("p",{key:"alert-"+t},e)})},getButtons:function(){return[i.default.createElement(d.default,{isPrimary:!1,"aria-label":this.translate("Dismiss alert message"),onClick:this.props.onClose},this.translate("OK"))]},render:function(){return i.default.createElement(a.default,{isVisible:this.props.isVisible,additionalClassNames:"editor-alert-modal",onClose:this.props.onClose,buttons:this.getButtons()},this.splitMessage())}}),e.exports=t.default},"./client/components/tinymce/plugins/calypso-alert/plugin.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=void 0;e.on("init",function(){t=document.createElement("div"),t.setAttribute("class","alert-container"),e.getContainer().appendChild(t),e.windowManager.alert=function(n,o,r){function i(){s("hide"),"function"==typeof o?o.call(r||e.windowManager):e.focus()}function s(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"show";l.default.render(u.default.createElement(p.default,{isVisible:"show"===o,onClose:i,message:e.editorManager.i18n.translate(n)}),t)}s("show")},e.notificationManager.open=function(t){e.windowManager.alert(t.text)}}),e.on("remove",function(){l.default.unmountComponentAtNode(t),t.parentNode.removeChild(t),t=null})}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/tinymce/tinymce.js"),s=o(i),a=n("./node_modules/react-dom/index.js"),l=o(a),d=n("./node_modules/react/react.js"),u=o(d),c=n("./client/components/tinymce/plugins/calypso-alert/alert.jsx"),p=o(c);t.default=function(){s.default.PluginManager.add("wpcom/calypsoalert",r)},e.exports=t.default},"./client/components/tinymce/plugins/contact-form/dialog/field-edit-button.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=o(p),m=n("./node_modules/lodash/noop.js"),h=o(m),g=n("./node_modules/react/react.js"),y=o(g),v=n("./node_modules/classnames/index.js"),b=o(v),_=n("./node_modules/i18n-calypso/index.js"),x=n("./node_modules/gridicons/build/index.js"),C=o(x),E=n("./client/components/button/index.jsx"),w=o(E),j=n("./client/components/popover/index.jsx"),S=o(j),T=function(e){function t(){(0,a.default)(this,t);var e=(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments));return e.state={showTooltip:!1},e.handleMouseEnter=e.handleMouseEnter.bind(e),e.handleMouseLeave=e.handleMouseLeave.bind(e),e}return(0,f.default)(t,e),(0,d.default)(t,[{key:"handleMouseEnter",value:function(){this.setState({showTooltip:!0})}},{key:"handleMouseLeave",value:function(){this.setState({showTooltip:!1})}},{key:"render",value:function(){var e=this.props,t=e.expanded,n=e.translate,o=(0,b.default)("editor-contact-form-modal-field__edit",{"is-expanded":t});return y.default.createElement("div",{className:"editor-contact-form-modal-field__edit-wrapper foldable-card__expand"},y.default.createElement(w.default,{className:"editor-contact-form-modal-field__edit-wrapper-button",ref:"editField",borderless:!0,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},y.default.createElement(C.default,{icon:"pencil",className:o})),y.default.createElement(S.default,{isVisible:this.state.showTooltip,context:this.refs&&this.refs.editField,onClose:h.default,position:"bottom",className:"popover tooltip is-dialog-visible"},n("Edit Field",{context:"button tooltip"})))}}]),t}(g.PureComponent);T.propTypes={expanded:g.PropTypes.bool.isRequired},t.default=(0,_.localize)(T),e.exports=t.default},"./client/components/tinymce/plugins/contact-form/dialog/field-header.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/react/react.js"),i=o(r),s=n("./client/components/tinymce/plugins/contact-form/dialog/locales.js"),a=o(s);t.default=i.default.createClass({displayName:"ContactFormDialogFieldHeader",propTypes:{label:r.PropTypes.string.isRequired,type:r.PropTypes.string.isRequired,options:r.PropTypes.string,required:r.PropTypes.bool},getLegend:function(){if(this.props.options){var e=this.props.options.split(",").length;return this.props.required?this.translate('Required field "%(fieldName)s" with %(numOption)d option','Required field "%(fieldName)s" with %(numOption)d options',{count:e,args:{fieldName:(0,a.default)(this.props.type),numOption:e},comment:"Explains to the user the field settings. If required, type, and how many options it has."}):this.translate('Optional field "%(fieldName)s" with %(numOption)d option','Optional field "%(fieldName)s" with %(numOption)d options',{count:e,args:{fieldName:(0,a.default)(this.props.type),numOption:e},comment:"Explains to the user the field settings. If required, type, and how many options it has."})}return this.props.required?this.translate('Required field "%(fieldName)s"',{args:{fieldName:(0,a.default)(this.props.type)},comment:"Explain to the user the field settings for fields other than dropdown and select list."}):this.translate('Optional field "%(fieldName)s"',{args:{fieldName:(0,a.default)(this.props.type)},comment:"Explain to the user the field settings for fields other than dropdown and select list."})},render:function(){return i.default.createElement("div",null,i.default.createElement("div",null,this.props.label),i.default.createElement("div",null,i.default.createElement("small",null,this.getLegend())))}}),e.exports=t.default},"./client/components/tinymce/plugins/contact-form/dialog/field-list.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/helpers/extends.js"),i=o(r),s=n("./node_modules/react/react.js"),a=o(s),l=n("./client/components/empty-content/index.jsx"),d=o(l),u=n("./client/components/tinymce/plugins/contact-form/dialog/field.jsx"),c=o(u);t.default=a.default.createClass({displayName:"ContactFormDialogFieldList",propTypes:{fields:s.PropTypes.array.isRequired,onFieldAdd:s.PropTypes.func.isRequired,onFieldRemove:s.PropTypes.func.isRequired,onFieldUpdate:s.PropTypes.func.isRequired},render:function(){var e=this;return this.props.fields.length>0?a.default.createElement("div",{className:"editor-contact-form-modal-fields"},this.props.fields.map(function(t,n){return a.default.createElement(c.default,(0,i.default)({key:n},t,{onRemove:function(){return e.props.onFieldRemove(n)},onUpdate:function(t){return e.props.onFieldUpdate(n,t)}}))})):a.default.createElement(d.default,{title:null,line:this.translate("An empty form is no fun! Go ahead and add some fields!"),action:this.translate("Add New Field"),actionCallback:this.props.onFieldAdd,isCompact:!0})}}),e.exports=t.default},"./client/components/tinymce/plugins/contact-form/dialog/field-remove-button.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/react/react.js"),i=o(r),s=n("./node_modules/react-pure-render/mixin.js"),a=o(s),l=n("./node_modules/gridicons/build/index.js"),d=o(l),u=n("./client/components/button/index.jsx"),c=o(u),p=n("./client/components/popover/index.jsx"),f=o(p);t.default=i.default.createClass({displayName:"ContactFormDialogFieldRemoveButton",mixins:[a.default],propTypes:{onRemove:r.PropTypes.func.isRequired},getInitialState:function(){return{showTooltip:!1}},render:function(){var e=this;return i.default.createElement("div",null,i.default.createElement(c.default,{ref:"removeField",borderless:!0,onMouseEnter:function(){return e.setState({showTooltip:!0})},onMouseLeave:function(){return e.setState({showTooltip:!1})},onClick:this.props.onRemove},i.default.createElement(d.default,{icon:"trash",className:"editor-contact-form-modal-field__remove"})),i.default.createElement(f.default,{isVisible:this.state.showTooltip,context:this.refs&&this.refs.removeField,onClose:function(){},position:"bottom",className:"popover tooltip is-dialog-visible"},this.translate("Remove Field",{context:"button tooltip"})))}}),e.exports=t.default},"./client/components/tinymce/plugins/contact-form/dialog/field.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/lodash/omit.js"),i=o(r),s=n("./node_modules/react/react.js"),a=o(s),l=n("./node_modules/react-pure-render/mixin.js"),d=o(l),u=n("./client/components/tinymce/plugins/contact-form/dialog/field-header.jsx"),c=o(u),p=n("./client/components/foldable-card/index.jsx"),f=o(p),m=n("./client/components/forms/form-fieldset/index.jsx"),h=o(m),g=n("./client/components/forms/form-label/index.jsx"),y=o(g),v=n("./client/components/forms/form-text-input/index.jsx"),b=o(v),_=n("./client/components/forms/form-checkbox/index.jsx"),x=o(_),C=n("./client/components/forms/form-input-validation/index.jsx"),E=o(C),w=n("./client/components/forms/form-setting-explanation/index.jsx"),j=o(w),S=n("./client/components/select-dropdown/index.jsx"),T=o(S),P=n("./client/components/select-dropdown/item.jsx"),k=o(P),I=n("./client/components/token-field/index.jsx"),N=o(I),R=n("./client/components/tinymce/plugins/contact-form/dialog/field-remove-button.jsx"),D=o(R),M=n("./client/components/tinymce/plugins/contact-form/dialog/field-edit-button.jsx"),O=o(M),A=n("./client/components/tinymce/plugins/contact-form/dialog/locales.js"),L=o(A),F=["checkbox","select","email","name","radio","text","textarea","url"];t.default=a.default.createClass({displayName:"ContactFormDialogField",mixins:[d.default],propTypes:{label:s.PropTypes.string.isRequired,type:s.PropTypes.string.isRequired,options:s.PropTypes.string,required:s.PropTypes.bool,onUpdate:s.PropTypes.func.isRequired,onRemove:s.PropTypes.func.isRequired,isExpanded:s.PropTypes.bool},renderOptions:function(){var e=this;if("radio"===this.props.type||"select"===this.props.type){var t=this.props.options;t=t?t.split(","):[];var n=!t||0===t.length;return a.default.createElement(h.default,null,a.default.createElement(y.default,null,this.translate("Options")),a.default.createElement(N.default,{value:t,onChange:function(t){return e.props.onUpdate({options:t.join()})}}),n&&a.default.createElement(E.default,{isError:!0,text:this.translate("Options can not be empty.")}),a.default.createElement(j.default,null,"Insert an option and press enter."))}},onLabelChange:function(e){this.props.onUpdate({label:e.target.value})},handleCardOpen:function(){this.props.onUpdate({isExpanded:!0})},handleCardClose:function(){this.props.onUpdate({isExpanded:!1})},render:function(){var e=this,t=!this.props.label,n=a.default.createElement(D.default,{onRemove:this.props.onRemove});return a.default.createElement(f.default,{header:a.default.createElement(c.default,(0,i.default)(this.props,["onUpdate"])),summary:n,expandedSummary:n,expanded:this.props.isExpanded,onClose:this.handleCardClose,onOpen:this.handleCardOpen,actionButton:a.default.createElement(O.default,{expanded:!1}),actionButtonExpanded:a.default.createElement(O.default,{expanded:!0})},a.default.createElement(h.default,null,a.default.createElement(y.default,null,this.translate("Field Label")),a.default.createElement(b.default,{value:this.props.label,onChange:this.onLabelChange,isError:t}),t&&a.default.createElement(E.default,{isError:!0,text:this.translate("Field Label can not be empty.")})),a.default.createElement(h.default,null,a.default.createElement(y.default,null,this.translate("Field Type")),a.default.createElement(T.default,{selectedText:(0,L.default)(this.props.type)},F.map(function(t){return a.default.createElement(k.default,{key:"field-type-"+t,selected:e.props.type===t,onClick:function(){return e.props.onUpdate({type:t})}},(0,L.default)(t))}))),a.default.createElement(h.default,null,a.default.createElement(y.default,null,a.default.createElement(x.default,{checked:this.props.required,onChange:function(){return e.props.onUpdate({required:!e.props.required})}}),a.default.createElement("span",null,this.translate("Required")))),this.renderOptions())}}),e.exports=t.default},"./client/components/tinymce/plugins/contact-form/dialog/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/react/react.js"),i=o(r),s=n("./node_modules/react-redux/es/index.js"),a=n("./client/components/dialog/index.jsx"),l=o(a),d=n("./client/components/forms/form-button/index.jsx"),u=o(d),c=n("./client/components/tinymce/plugins/contact-form/dialog/settings.jsx"),p=o(c),f=n("./client/components/tinymce/plugins/contact-form/dialog/navigation.jsx"),m=o(f),h=n("./client/components/tinymce/plugins/contact-form/dialog/field-list.jsx"),g=o(h),y=n("./client/state/current-user/selectors.js"),v=n("./client/lib/posts/post-edit-store.js"),b=o(v),_=n("./client/components/tinymce/plugins/contact-form/dialog/validations.js"),x=i.default.createClass({displayName:"ContactFormDialog",propTypes:{activeTab:r.PropTypes.oneOf(["fields","settings"]).isRequired,showDialog:r.PropTypes.bool.isRequired,isEdit:r.PropTypes.bool.isRequired,contactForm:r.PropTypes.shape({to:r.PropTypes.string,subject:r.PropTypes.string,fields:r.PropTypes.array.isRequired}).isRequired,onInsert:r.PropTypes.func.isRequired,onChangeTabs:r.PropTypes.func.isRequired,onClose:r.PropTypes.func.isRequired,onFieldAdd:r.PropTypes.func.isRequired,onFieldRemove:r.PropTypes.func.isRequired,onFieldUpdate:r.PropTypes.func.isRequired,onSettingsUpdate:r.PropTypes.func.isRequired},getActionButtons:function(){var e=(0,_.validateFormFields)(this.props.contactForm.fields)&&(0,_.validateSettingsToEmail)(this.props.contactForm.to),t=[i.default.createElement(u.default,{key:"save","data-e2e-button":"save",disabled:!e,onClick:this.props.onInsert},this.props.isEdit?this.translate("Update"):this.translate("Insert")),i.default.createElement(u.default,{key:"cancel",isPrimary:!1,"data-e2e-button":"cancel",onClick:this.props.onClose},this.translate("Cancel"))];return"fields"===this.props.activeTab?[i.default.createElement("div",{key:"secondaryActions",className:"editor-contact-form-modal__secondary-actions"},i.default.createElement(u.default,{key:"add",isPrimary:!1,"data-e2e-button":"add",onClick:this.props.onFieldAdd},this.translate("Add New Field")))].concat(t):t},render:function(){var e=this.props,t=e.activeTab,n=e.currentUser.email,o=e.post,r=o.title,s=o.type,a=e.contactForm,d=a.to,u=a.subject,c=a.fields,f=e.showDialog,h=e.onChangeTabs,y=e.onClose,v=e.onFieldAdd,b=e.onFieldUpdate,_=e.onFieldRemove,x=e.onSettingsUpdate,C="fields"===t?i.default.createElement(g.default,{fields:c,onFieldAdd:v,onFieldRemove:_,onFieldUpdate:b}):i.default.createElement(p.default,{to:d,subject:u,email:n,title:r,postType:s,onUpdate:x});return i.default.createElement(l.default,{isVisible:f,onClose:y,buttons:this.getActionButtons(),additionalClassNames:"editor-contact-form-modal"},i.default.createElement(m.default,{activeTab:t,onChangeTabs:h,fieldCount:c.length}),C)}});t.default=(0,s.connect)(function(e){return{post:b.default.get()||{},currentUser:(0,y.getCurrentUser)(e),contactForm:e.ui.editor.contactForm}})(x),e.exports=t.default},"./client/components/tinymce/plugins/contact-form/dialog/locales.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return s.hasOwnProperty(e)?s[e].call():null};var r=n("./node_modules/i18n-calypso/index.js"),i=o(r),s={name:function(){return i.default.translate("Name")},email:function(){return i.default.translate("Email Address")},checkbox:function(){return i.default.translate("Checkbox")},select:function(){return i.default.translate("Dropdown")},radio:function(){return i.default.translate("Radio Button")},text:function(){return i.default.translate("Text")},textarea:function(){return i.default.translate("Text Area")},url:function(){return i.default.translate("Web Address")}};e.exports=t.default},"./client/components/tinymce/plugins/contact-form/dialog/navigation.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/react/react.js"),i=o(r),s=n("./client/components/section-nav/index.jsx"),a=o(s),l=n("./client/components/section-nav/tabs.jsx"),d=o(l),u=n("./client/components/section-nav/item.jsx"),c=o(u);t.default=i.default.createClass({displayName:"ContactFormDialogNavigation",propTypes:{fieldCount:r.PropTypes.number.isRequired,activeTab:r.PropTypes.oneOf(["fields","settings"]).isRequired,onChangeTabs:r.PropTypes.func.isRequired},render:function(){var e=this,t=["fields","settings"];return i.default.createElement(a.default,{selectedText:"Form Fields"},i.default.createElement(d.default,null,t.map(function(t){return i.default.createElement(c.default,{key:"contact-form-"+t,selected:e.props.activeTab===t,count:"fields"===t?e.props.fieldCount:null,onClick:function(){return e.props.onChangeTabs(t)}},"fields"===t?e.translate("Form Fields"):e.translate("Settings"))})))}}),e.exports=t.default},"./client/components/tinymce/plugins/contact-form/dialog/settings.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/react/react.js"),i=o(r),s=n("./client/components/section-header/index.jsx"),a=o(s),l=n("./client/components/card/index.jsx"),d=o(l),u=n("./client/components/forms/form-fieldset/index.jsx"),c=o(u),p=n("./client/components/forms/form-label/index.jsx"),f=o(p),m=n("./client/components/forms/form-text-input/index.jsx"),h=o(m),g=n("./client/components/forms/form-input-validation/index.jsx"),y=o(g),v=n("./client/components/forms/form-setting-explanation/index.jsx"),b=o(v),_=n("./client/components/tinymce/plugins/contact-form/dialog/validations.js");t.default=i.default.createClass({displayName:"ContactFormDialogFormSettings",propTypes:{to:r.PropTypes.string,subject:r.PropTypes.string,email:r.PropTypes.string,title:r.PropTypes.string,onUpdate:r.PropTypes.func.isRequired},onToChange:function(e){this.props.onUpdate({to:e.target.value})},onSubjectChange:function(e){this.props.onUpdate({subject:e.target.value})},render:function(){var e=!(0,_.validateSettingsToEmail)(this.props.to);return i.default.createElement("div",{className:"editor-contact-form-modal-settings"},i.default.createElement(a.default,{label:this.translate("Contact Form Notification Settings")}),i.default.createElement(d.default,null,i.default.createElement("p",null,"post"===this.props.postType?this.translate("If you don’t make any changes here, feedback will be sent to the author of the post and the subject will be the name of this post."):this.translate("If you don’t make any changes here, feedback will be sent to the author of the page and the subject will be the name of this page.")),i.default.createElement(c.default,null,i.default.createElement(f.default,null,this.translate("Enter your email address")),i.default.createElement(h.default,{value:this.props.to,placeholder:this.props.email,isError:e,onChange:this.onToChange}),e&&i.default.createElement(y.default,{isError:!0,text:this.translate("%(email)s is not a valid email address.",{args:{email:this.props.to}})}),i.default.createElement(b.default,null,this.translate("You can enter multiple email addresses in the Email address field, and separate them with commas. A notification email will then be sent to each email address."))),i.default.createElement(c.default,null,i.default.createElement(f.default,null,this.translate("What should the subject line be?")),i.default.createElement(h.default,{value:this.props.subject,placeholder:this.props.title,onChange:this.onSubjectChange}))))}}),e.exports=t.default},"./client/components/tinymce/plugins/contact-form/dialog/validations.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){return!(!Array.isArray(e)||0===e.length)&&(0,a.default)(e,function(e){return"radio"!==e.type&&"select"!==e.type?!!e.label:!!e.label&&!!e.options})}function i(e){var t=e?e.split(",").map(function(e){return e.trim()}):[];return(0,a.default)(t,d.default.validate)}Object.defineProperty(t,"__esModule",{value:!0});var s=n("./node_modules/lodash/every.js"),a=o(s);t.validateFormFields=r,t.validateSettingsToEmail=i;var l=n("./node_modules/email-validator/index.js"),d=o(l)},"./client/components/tinymce/plugins/contact-form/plugin.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/tinymce/tinymce.js"),i=o(r),s=n("./node_modules/i18n-calypso/index.js"),a=o(s),l=n("./node_modules/react/react.js"),d=o(l),u=n("./node_modules/react-dom/index.js"),c=n("./node_modules/react-dom/server.js"),p=n("./node_modules/gridicons/build/index.js"),f=o(p),m=n("./client/components/tinymce/plugins/contact-form/dialog/index.jsx"),h=o(m),g=n("./client/state/ui/editor/contact-form/actions.js"),y=n("./client/components/tinymce/plugins/contact-form/shortcode-utils.js"),v=n("./client/lib/react-helpers/index.js"),b=function(e){var t=void 0,n=e.getParam("redux_store");e.on("init",function(){t=e.getContainer().appendChild(document.createElement("div"))}),e.on("remove",function(){(0,u.unmountComponentAtNode)(t),t.parentNode.removeChild(t),t=null}),e.addCommand("wpcomContactForm",function(o){function r(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"show",s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"fields";(0,v.renderWithReduxStore)((0,l.createElement)(h.default,{showDialog:"show"===o,activeTab:s,isEdit:i,onInsert:function(){var t=n.getState();
e.execCommand("mceInsertContent",!1,(0,y.serialize)(t.ui.editor.contactForm)),r("hide")},onChangeTabs:function(e){r("show",e)},onClose:function(){n.dispatch((0,g.formClear)()),e.focus(),r("hide")},onFieldAdd:function(){n.dispatch((0,g.fieldAdd)())},onFieldRemove:function(e){n.dispatch((0,g.fieldRemove)(e))},onFieldUpdate:function(e,t){n.dispatch((0,g.fieldUpdate)(e,t))},onSettingsUpdate:function(e){n.dispatch((0,g.settingsUpdate)(e))}}),t,n)}var i=!1;o?(n.dispatch((0,g.formLoad)((0,y.deserialize)(o))),i=!0):n.dispatch((0,g.formClear)()),r()}),e.addButton("wpcom_add_contact_form",{classes:"btn wpcom-icon-button contact-form",title:a.default.translate("Add Contact Form"),cmd:"wpcomContactForm",onPostRender:function(){this.innerHtml((0,c.renderToStaticMarkup)(d.default.createElement("button",{type:"button",role:"presentation"},d.default.createElement(f.default,{icon:"mention"}))))}})};t.default=function(){i.default.PluginManager.add("wpcom/contactform",b)},e.exports=t.default},"./client/components/tinymce/plugins/contact-form/shortcode-utils.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.to,n=e.subject,o=e.fields,r=void 0===o?[]:o,i=r.map(function(e){var t=e.label,n=e.type,o=e.options,r=e.required;if(t&&n){var i={tag:"contact-field",type:"self-closing",attrs:(0,a.default)({label:t,type:n,options:o})};return r&&(i.attrs.required=1),d.default.stringify(i)}}).join("");return d.default.stringify({tag:"contact-form",type:"closed",content:i,attrs:(0,a.default)({to:t,subject:n})})}function i(e){if(!e)return null;var t=d.default.parse(e);return t?function(e){var t=e.attrs;t=void 0===t?{}:t;var n=t.named;n=void 0===n?{}:n;for(var o=n.to,r=n.subject,i=e.content,s=[],l=void 0;i&&(l=d.default.next("contact-field",i));){if("attrs"in l.shortcode){var u=l.shortcode.attrs.named,c=u.label,p=u.type,f=u.options,m=u.required,h=(0,a.default)({label:c,type:p,options:f,required:m});"required"in h&&(h.required=!0),s.push(h)}i=i.slice(l.index+l.content.length)}return(0,a.default)({to:o,subject:r,fields:s})}(t):{}}Object.defineProperty(t,"__esModule",{value:!0});var s=n("./node_modules/lodash/pickBy.js"),a=o(s);t.serialize=r,t.deserialize=i;var l=n("./client/lib/shortcode/index.js"),d=o(l)},"./client/components/tinymce/plugins/editor-button-analytics/plugin.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){function t(t,n){return(0,u.default)(t.target,n,!0,e.container)}function n(e){if(t(e,".mce-colorbutton")&&!t(e,".mce-open"))(0,f.recordTinyMCEButtonClick)("forecolor_pick_current");else if(t(e,".mce-listbox"))(0,f.recordTinyMCEButtonClick)("format_dropdown");else if((0,u.default)(e.target,".mce-menu-item",!0)){var n=m.get(),o=n?n.localeSlug:"en";if("en"===o){var r=(0,u.default)(e.target,".mce-menu-item",!0).textContent,i=r.toLowerCase().trim().replace(/[^a-z0-9]+/g,"_");(0,f.recordTinyMCEButtonClick)("format_dropdown_"+i)}else(0,f.recordTinyMCEButtonClick)("format_dropdown_non_english")}}(0,s.default)(e.buttons).forEach(function(n){var o=e.buttons[n],r=o.onPostRender;o.onPostRender=function(){this.on("click",function(e){var o=n.replace(/^(wp|wpcom)_/,"");"forecolor"===n&&(o=t(e,".mce-open")?"forecolor_toggle":t(e,".mce-custom-color-btn")?"forecolor_pick_custom":t(e,".mce-colorbtn-trans")?"forecolor_remove":"forecolor_pick_color"),(0,f.recordTinyMCEButtonClick)(o)}),"function"==typeof r&&r.apply(this,Array.prototype.slice.call(arguments))}}),e.on("init",function(){e.dom.bind(document.body,"click",n)}),e.on("remove",function(){e.dom.unbind(document.body,"click",n)})}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/babel-runtime/core-js/object/keys.js"),s=o(i);t.default=function(){l.default.PluginManager.add("wpcom/editorbuttonanalytics",r)};var a=n("./node_modules/tinymce/tinymce.js"),l=o(a),d=n("./node_modules/component-closest/index.js"),u=o(d),c=n("./client/lib/user/index.js"),p=o(c),f=n("./client/lib/posts/stats.js"),m=(0,p.default)();e.exports=t.default},"./client/components/tinymce/plugins/embed-reversal/plugin.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){function t(t,n){if(n&&e){var o=!e.isHidden();if(o){var r=!0,i=!1,a=void 0;try{for(var l,d=(0,s.default)(e.getBody().querySelectorAll("*"));!(r=(l=d.next()).done);r=!0){var c=l.value;if((0,u.default)(c.textContent,t)){c.textContent=c.textContent.replace(t,n.result),e.undoManager.add();break}}}catch(e){i=!0,a=e}finally{try{!r&&d.return&&d.return()}finally{if(i)throw a}}}else{var p=m.default.getRawContent();if(!(0,u.default)(p,t))return;p=p.replace(t,n.result),e.fire("SetTextAreaContent",{content:p})}e.fire("change")}}function n(e){var n=void 0;e.clipboardData?n=e.clipboardData.getData("text/plain"):window.clipboardData&&(n=window.clipboardData.getData("Text")),n&&/^<.*>$/.test(n)&&g.default.undocumented().site((0,y.getSelectedSiteId)(o.getState())).embedReversal(n).then((0,l.default)(t,n)).catch(function(){})}var o=e.getParam("redux_store");if(o){e.on("paste",n);var r=e.getParam("textarea");r&&r.addEventListener("paste",n)}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/babel-runtime/core-js/get-iterator.js"),s=o(i),a=n("./node_modules/lodash/partial.js"),l=o(a),d=n("./node_modules/lodash/includes.js"),u=o(d),c=n("./node_modules/tinymce/tinymce.js"),p=o(c),f=n("./client/lib/posts/post-edit-store.js"),m=o(f),h=n("./client/lib/wp/browser.js"),g=o(h),y=n("./client/state/ui/selectors.js");t.default=function(){p.default.PluginManager.add("wpcom/embedreversal",r)},e.exports=t.default},"./client/components/tinymce/plugins/insert-menu/menu-items.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/react/react.js"),i=o(r),s=n("./node_modules/gridicons/build/index.js"),a=o(s),l=n("./node_modules/i18n-calypso/index.js"),d=o(l),u=n("./client/config/index.js"),c=o(u),p=function(e){var t=e.icon,n=e.label,o=e.e2e;return i.default.createElement("div",null,i.default.createElement(a.default,{className:"wpcom-insert-menu__menu-icon",icon:t}),i.default.createElement("span",{className:"wpcom-insert-menu__menu-label","data-e2e-insert-type":o},n))},f=[{name:"insert_media_item",item:i.default.createElement(p,{icon:"add-image",label:d.default.translate("Add Media"),e2e:"media"}),cmd:"wpcomAddMedia"}];c.default.isEnabled("external-media")&&f.push({name:"insert_from_google",item:i.default.createElement(p,{icon:"add-image",label:d.default.translate("Add from Google"),e2e:"google-media"}),cmd:"googleAddMedia"}),f.push({name:"insert_contact_form",item:i.default.createElement(p,{icon:"mention",label:d.default.translate("Add Contact Form"),e2e:"contact-form"}),cmd:"wpcomContactForm"}),c.default.isEnabled("simple-payments")&&f.push({name:"insert_payment_button",item:i.default.createElement(p,{icon:"money",label:d.default.translate("Add Payment Button"),e2e:"payment-button"}),cmd:"simplePaymentsButton"}),t.default=f,e.exports=t.default},"./client/components/tinymce/plugins/insert-menu/plugin.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/helpers/slicedToArray.js"),i=o(r),s=n("./node_modules/react/react.js"),a=o(s),l=n("./node_modules/tinymce/tinymce.js"),d=o(l),u=n("./node_modules/react-dom/server.js"),c=n("./node_modules/i18n-calypso/index.js"),p=o(c),f=n("./node_modules/gridicons/build/index.js"),m=o(f),h=n("./client/components/tinymce/plugins/insert-menu/menu-items.jsx"),g=o(h),y=function(e){g.default.forEach(function(t){return e.addMenuItem(t.name,{classes:"wpcom-insert-menu__menu-item",cmd:t.cmd,onPostRender:function(){this.innerHtml((0,u.renderToString)(t.item))}})}),e.addButton("wpcom_insert_menu",{type:"splitbutton",title:p.default.translate("Insert content"),classes:"btn wpcom-insert-menu insert-menu",cmd:g.default[0].cmd,menu:g.default.map(function(t){var n=t.name;return e.menuItems[n]}),onPostRender:function(){var e=this,t=(0,i.default)(this.$el[0].children,2),n=t[0],o=t[1];n.innerHTML=(0,u.renderToString)(a.default.createElement(m.default,{icon:"add-outline"}));var r=function(t,n){t.addEventListener("mouseenter",function(){var o=e.tooltip();o.text(n);var r=o.testMoveRel(t,["bc-tc","bc-tl","bc-tr"]);o.classes.toggle("tooltip-n","bc-tc"===r),o.classes.toggle("tooltip-nw","bc-tl"===r),o.classes.toggle("tooltip-ne","bc-tr"===r),o.moveRel(t,r)})};r(n,p.default.translate("Insert content")),r(o,p.default.translate("Insert special"))}})};t.default=function(){d.default.PluginManager.add("wpcom/insertmenu",y)},e.exports=t.default},"./client/components/tinymce/plugins/markdown/plugin.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){function t(e){var t=e.target;(0,s.default)(t.schema.elements).forEach(function(e){t.schema.elements[e].attributes.markdown={},t.schema.elements[e].attributesOrder.push("markdown")})}e.on("preinit",t)}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/babel-runtime/core-js/object/keys.js"),s=o(i);t.default=function(){l.default.PluginManager.add("wpcom/markdown",r)};var a=n("./node_modules/tinymce/tinymce.js"),l=o(a);e.exports=t.default},"./client/components/tinymce/plugins/media/advanced/index.jsx":function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/babel-runtime/helpers/extends.js"),s=r(i);t.default=function(e){function t(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=arguments[1];return d||(d=e.getContainer().appendChild(document.createElement("div"))),t?void(0,E.renderWithReduxStore)(l.default.createElement(C.default,(0,s.default)({visible:t,item:n},{onClose:o,insertMedia:i})),d,a):r()}function n(e){t(!0,e)}function o(){t(!1)}function r(){d&&u.default.unmountComponentAtNode(d)}function i(t){e.execCommand("mceInsertContent",!1,t),o()}var a=e.getParam("redux_store");if(_.default.isEnabled("post-editor/media-advanced")&&a){var d=void 0;e.addButton("wp_img_advanced",{tooltip:m.default.translate("Edit",{context:"verb"}),classes:"toolbar-segment-start",onPostRender:function(){this.innerHtml(p.default.renderToStaticMarkup(l.default.createElement("button",{type:"button",role:"presentation",tabIndex:"-1"},l.default.createElement(g.default,{icon:"pencil",size:18}))))},onClick:function(){var t=e.selection.getStart(),o=v.deserialize(t);n(o)}}),e.on("remove",r)}};var a=n("./node_modules/react/react.js"),l=r(a),d=n("./node_modules/react-dom/index.js"),u=r(d),c=n("./node_modules/react-dom/server.js"),p=r(c),f=n("./node_modules/i18n-calypso/index.js"),m=r(f),h=n("./node_modules/gridicons/build/index.js"),g=r(h),y=n("./client/lib/media-serialization/index.js"),v=o(y),b=n("./client/config/index.js"),_=r(b),x=n("./client/post-editor/editor-media-advanced/index.jsx"),C=r(x),E=n("./client/lib/react-helpers/index.js");e.exports=t.default},"./client/components/tinymce/plugins/media/drop-zone.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/assign.js"),i=o(r),s=n("./node_modules/lodash/noop.js"),a=o(s),l=n("./node_modules/react/react.js"),d=o(l),u=n("./client/lib/analytics/index.js"),c=o(u),p=n("./client/lib/mixins/data-observe/index.js"),f=o(p),m=n("./client/lib/posts/actions.js"),h=o(m),g=n("./client/my-sites/media-library/drop-zone.jsx"),y=o(g),v=n("./client/lib/media/actions.js"),b=o(v),_=n("./client/lib/media/utils.js"),x=o(_),C=n("./client/lib/media/library-selected-store.js"),E=o(C),w=n("./client/lib/media/validation-store.js"),j=o(w),S=n("./client/post-editor/media-modal/markup.js"),T=o(S);t.default=d.default.createClass({displayName:"TinyMCEDropZone",mixins:[(0,f.default)("sites")],propTypes:{editor:l.PropTypes.object,sites:l.PropTypes.object,onInsertMedia:l.PropTypes.func,onRenderModal:l.PropTypes.func},getInitialState:function(){return{isDragging:!1}},getDefaultProps:function(){return{onInsertMedia:a.default,onRenderModal:a.default}},componentDidMount:function(){var e=this.props.editor;e.dom.bind(e.getWin(),"dragenter",this.redirectEditorDragEvent),window.addEventListener("dragleave",this.stopDragging),e.dom.bind(e.getWin(),"dragleave",this.stopDragging),e.dom.bind(e.getWin(),"dragover",this.fakeDragEnterIfNecessary)},componentWillUnmount:function(){var e=this.props.editor;e.dom.unbind(e.getWin(),"dragenter",this.redirectEditorDragEvent),window.removeEventListener("dragleave",this.stopDragging),e.dom.unbind(e.getWin(),"dragleave",this.stopDragging),e.dom.unbind(e.getWin(),"dragover",this.fakeDragEnterIfNecessary)},redirectEditorDragEvent:function(e){window.dispatchEvent(new CustomEvent(e.type,{detail:e})),this.setState({isDragging:!0})},fakeDragEnterIfNecessary:function(e){this.state.isDragging||this.redirectEditorDragEvent((0,i.default)({},e,{type:"dragenter"}))},stopDragging:function(){this.setState({isDragging:!1})},insertMedia:function(){var e=this.props,t=e.sites,n=e.onInsertMedia,o=e.onRenderModal,r=t.getSelectedSite();if(r){var i=E.default.getAll(r.ID),s=1===i.length&&"image"===x.default.getMimePrefix(i[0]);s&&!j.default.hasErrors(r.ID)?(i[0].transient&&h.default.blockSave("MEDIA_MODAL_TRANSIENT_INSERT"),n(T.default.get(r,i[0])),b.default.setLibrarySelectedItems(r.ID,[])):o({visible:!0}),c.default.mc.bumpStat("editor_upload_via","editor_drop")}},render:function(){var e=this.props.sites,t=e.getSelectedSite();return t?d.default.createElement(y.default,{site:t,fullScreen:!1,trackStats:!1,onAddMedia:this.insertMedia}):null}}),e.exports=t.default},"./client/components/tinymce/plugins/media/plugin.jsx":function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(t){e.execCommand("mceInsertContent",!1,t)}function o(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=M();if(s){if(r({visible:!n.visible}),P.modal||(P.modal=e.getContainer().appendChild(document.createElement("div"))),n.visible&&!i.preserveFocus&&e.focus(!1),n.visible){var l=i.view,d=void 0===l?fe.ModalViews.LIST:l;S.dispatch((0,pe.setEditorMediaModalView)(d))}(0,me.renderWithReduxStore)(j.default.createElement(ee.default,(0,a.default)({},n,{onClose:o.bind(null,{visible:!1}),onInsertMedia:function(e){t(e),o({visible:!1})}})),P.modal,S)}}function r(n){var r=n.visible;return r?(P.dropzone||(P.dropzone=document.createElement("div"),e.getContainer().parentNode.insertBefore(P.dropzone,e.getContainer())),void(0,me.renderWithReduxStore)(j.default.createElement(re.default,{editor:e,sites:ye,onInsertMedia:t,onRenderModal:o}),P.dropzone,S)):void(P.dropzone&&x.default.unmountComponentAtNode(P.dropzone))}function i(){var t=e.selection.getStart();"IMG"!==t.nodeName&&(t=t.querySelector("img")),t&&(e.selection.select(t),e.selection.controlSelection.showResizeRect(t))}function s(e){r({visible:"dragend"===e.type})}function l(){var e=M();e&&q.default.clearValidationErrors(e.ID)}function u(t){var n=e.selection.getStart(),o=(0,$.deserialize)(n),r=M();if(o&&r){var s=e.dom.getParent(n,".mceTemp");s&&(e.selection.select(s),o.media.caption=e.dom.$(".wp-caption-dd",s).text());var a=(0,b.default)({},X.default.get(r.ID,o.media.ID));delete a.caption,a=(0,b.default)({},o.media,a);var l=ge.map(function(e){return L(K.default.getThumbnailSizeDimensions(e,r),a)}),d=ge.indexOf(o.appearance.size),u=d!==-1?l[d]:L(o.media,a),c=function(e,n){return!(l[n]>1)&&(t>0?l[n]>u:l[n]<u)},p=t>0?h.default:f.default,m=p(ge,c)||ge[ge.length-1],g=J.default.get(r,a,(0,b.default)(o.appearance,{size:m}));e.selection.setContent(g),i(),e.nodeChanged()}}function p(e,t){var n=M();if(t.element&&"IMG"===t.element.nodeName&&n){var o=(0,$.deserialize)(t.element),r=(0,b.default)({width:1/0,height:1/0},X.default.get(n.ID,o.media.ID)),i=L(o.media,r),s=!!o.media.transient;if(this.classes.toggle("hidden",s),e){var a=i>=1;this.disabled(a)}else{var l=L(K.default.getThumbnailSizeDimensions(ge[0],n),r),d=i<=l||ge[0]===o.appearance.size;this.disabled(d)}}}function m(e){"IMG"===e.target.nodeName&&I()}function g(e){var t=M();t&&(e.content.match(he)||[]).forEach(function(e){var n=(0,$.deserialize)(e);n.media.ID&&!X.default.get(t.ID,n.media.ID)&&setTimeout(function(){q.default.fetch(t.ID,n.media.ID)},0)})}function v(t){if(t.detail&&!(t.detail<2)){var n=(0,D.default)(t.target,".wp-caption-dd",!0);n&&e.selection.select(n)}}function _(t){if(8===t.keyCode||46===t.keyCode){var n=e.selection.getStart(!0);if(e.dom.hasClass(n,"wp-caption-dd")){var o=e.selection.getRng();(8===t.keyCode&&0===o.startOffset||46===t.keyCode&&n.textContent.length===o.endOffset)&&t.preventDefault()}}}function C(t){t||e.dom.select(".wp-caption-dd").forEach(function(t){if(!t.textContent.trim().length){var n=(0,D.default)(t,".wp-caption"),o=n.querySelector("img");e.dom.replace(o,n.parentNode)}})}function w(){var t=!1;return function(n){switch(n.type){case"touchstart":t=!1;break;case"touchmove":t=!0;break;case"touchend":t||"IMG"!==n.target.nodeName||(e.selection.select(n.target),n.preventDefault())}}}var S=e.getParam("redux_store");if(S){var T=S.getState,P={},I=void 0,R=void 0,M=function(){return(0,ce.getSelectedSite)(T())},A=function(){function e(e){return!!n[e]}function t(e){n[e]=!0,R()}var n={};return{isLoaded:e,onLoad:t}}();R=(0,y.default)(function(){var t=e.selection.getNode(),n=!1,o=0,r=void 0,s=void 0,l=M();if(l){var d=!e.isHidden();if(d)s=e.dom.select("img");else{if(r=U.default.getRawContent(),!r)return;s=r.match(he)||[]}s.forEach(function(t){var i=(0,$.deserialize)(t);if(i.media.ID){var s=X.default.get(l.ID,i.media.ID),a=!1,u=null;if(s&&"deleted"===s.status)return u=e.dom.getParent(t,"div.mceTemp"),e.$(u||t).remove(),void e.nodeChanged();if(s&&s.isDirty){if(!ve||ve.ID!==s.ID){ve=s;var p=e.dom.select("img.wp-image-"+s.ID);be=p.length}i.media.transient=!0,u=e.dom.getParent(t,".mceTemp"),u&&(s.caption=e.dom.$(".wp-caption-dd",u).text(),a=!0)}if(i.media.transient?(o++,n=!0,e.dom.$(t).toggleClass("is-transient",!0)):e.dom.$(t).toggleClass("is-transient",!1),!(!i.media.transient||s&&s.transient)||i.media.transient&&s&&s.isDirty&&s.transient){o--;var f=void 0;if(s){if(s.ID===i.media.ID&&s.URL===i.media.URL)return;var m=!1;s.isDirty&&(m=s.width<i.media.width||s.height<i.media.height);var h=(0,b.default)({},s,i.media,(0,c.default)(s,"ID","URL",m?"width":"",m?"height":""),{transient:!!s.transient}),g=(0,b.default)({},i.appearance,{forceResize:!s.transient&&i.media.width&&i.media.width!==s.width});a||delete h.caption,f=J.default.get(l,h,g),a&&(f=e.wpSetImgCaption(f))}else ne.default.error("An error occurred while uploading the file"),f="";var y={content:f,mode:d?"tinymce":"html"};e.fire("BeforeSetWpcomMedia",y);var v=y.resizedImageUrl||s.URL;if(!A.isLoaded(v)){var _=new Image;return _.src=v,_.onload=A.onLoad.bind(null,v),_.onerror=_.onload,void o++}var x="";a&&u.outerHTML?(x=u.outerHTML,u.outerHTML=y.content):t.outerHTML?(x=t.outerHTML,t.outerHTML=y.content):x=t,r&&(r=r.replace(x,y.content)),e.undoManager.data=e.undoManager.data.map(function(e){return e.content=e.content.replace(x,y.content),e}),be>0&&(be-=1)}}}),!o&&U.default.isSaveBlocked("MEDIA_MODAL_TRANSIENT_INSERT")&&B.default.unblockSave("MEDIA_MODAL_TRANSIENT_INSERT"),n&&!o&&(d||e.fire("SetTextAreaContent",{content:r}),"IMG"===t.nodeName&&i(),e.fire("change")),ve&&ve.isDirty&&0===be&&(q.default.edit(l.ID,(0,a.default)({},ve,{isDirty:!1})),be=null)}}),e.addCommand("wpcomAddMedia",function(){l(),o({visible:!0})}),e.addCommand("googleAddMedia",function(){l(),o({visible:!0,source:"google_photos"})}),e.addButton("wpcom_add_media",{classes:"btn wpcom-icon-button media",cmd:"wpcomAddMedia",title:k.default.translate("Add Media"),onPostRender:function(){this.innerHtml(E.default.renderToStaticMarkup(j.default.createElement("button",{type:"button",role:"presentation",tabIndex:"-1"},j.default.createElement(O.default,{icon:"image-multiple",size:20}))))}}),e.addButton("wp_img_edit",{tooltip:k.default.translate("Edit",{context:"verb"}),classes:"toolbar-segment-start",icon:"dashicon dashicons-edit",onclick:function(){var t=M();if(t){var n=t.ID,r=e.selection.getNode(),i=r.className.match(/wp-image-(\d+)/),s=i&&parseInt(i[1],10);if(s){var a=X.default.get(n,s);q.default.clearValidationErrors(n),o({visible:!0,labels:{confirm:k.default.translate("Update",{context:"verb"})}},{view:fe.ModalViews.DETAIL}),q.default.setLibrarySelectedItems(n,[a])}}}}),e.addButton("wp_img_caption",{tooltip:k.default.translate("Caption",{context:"verb"}),icon:"dashicon dashicons-admin-comments",classes:"toolbar-segment-start toolbar-segment-end",stateSelector:".wp-caption",onclick:function(){var t=e.selection.getStart(),n=(0,$.deserialize)(t),o=M(),r=void 0;if(n&&o){var i=(0,D.default)(t,".wp-caption");if(i)return e.dom.replace(t,i.parentNode),e.selection.getStart()!==t&&e.selection.select(t),e.selection.controlSelection.showResizeRect(t),void e.nodeChanged();var s=X.default.get(o.ID,n.media.ID);r=s&&s.caption?s.caption:k.default.translate("Enter a caption"),["width","height"].forEach(function(e){null===t.getAttribute(e)&&n.media[e]&&t.setAttribute(e,n.media[e])});var a={width:n.media.width};n.media.ID&&(a.id="attachment_"+n.media.ID),n.appearance.align&&(a.align="align"+n.appearance.align);var l=N.default.stringify({tag:"caption",attrs:a,content:[t.outerHTML,r].join(" ")});e.selection.setContent(l),e.selection.select(e.selection.getStart().querySelector(".wp-caption-dd"),!0),e.selection.controlSelection.hideResizeRect(),this.rootControl.hide()}}});var L=function(e,t){var n=(0,a.default)({},t,e),o=n.width,r=n.height;return Math.min(o/t.width||1/0,r/t.height||1/0)};if(e.addButton("wpcom_img_size_decrease",{tooltip:k.default.translate("Decrease size"),classes:"toolbar-segment-start img-size-decrease",icon:"dashicon dashicons-minus",onPostRender:function(){e.on("wptoolbar",p.bind(this,!1))},onclick:function(){u(-1)}}),e.addButton("wpcom_img_size_increase",{tooltip:k.default.translate("Increase size"),classes:"toolbar-segment-end img-size-increase",icon:"dashicon dashicons-plus",onPostRender:function(){e.on("wptoolbar",p.bind(this,!0))},onclick:function(){u(1)}}),e.addCommand("WP_Medialib",function(){o({visible:!0})}),e.addCommand("wpcomEditGallery",function(e){var t=M();if(t){var n=N.default.parse(e);"gallery"===n.tag&&(n=(0,b.default)({},W.GalleryDefaultAttrs,n.attrs.named),n.items=n.ids.split(",").map(function(e){e=parseInt(e,10);var n=X.default.get(t.ID,e);return n||q.default.fetch(t.ID,e),(0,b.default)({ID:e},n)}),delete n.ids,n.columns&&(n.columns=parseInt(n.columns,10)),n.orderby&&(n.orderBy=n.orderby,delete n.orderby),q.default.setLibrarySelectedItems(t.ID,n.items),o({visible:!0,initialGallerySettings:n,labels:{confirm:k.default.translate("Update",{context:"verb"})}},{preserveFocus:!0,view:fe.ModalViews.GALLERY}))}}),I=(0,y.default)(function(){e.execCommand("wpcomAutoResize",null,null,{skip_focus:!0})},400,{leading:!0}),e.on("click",v),e.on("keydown",_),ue.default.isEnabled("desktop")){var F=n("electron").ipcRenderer;e.on("contextmenu",function(){F.send("mce-contextmenu",{sender:!0})})}e.on("touchstart touchmove touchend",w()),e.on("init",function(){X.default.on("change",R),e.getDoc().addEventListener("load",m,!0),e.dom.bind(e.getDoc(),"dragstart dragend",s),e.selection.selectorChanged(".wp-caption",C)}),e.on("init show hide",function(){r({visible:!e.isHidden()})}),e.on("SetContent",g),e.on("remove",function(){(0,d.default)(P).forEach(function(e){x.default.unmountComponentAtNode(e),e.parentNode.removeChild(e)}),P={},X.default.off("change",R),e.getDoc().removeEventListener("load",m)}),(0,se.default)(e),(0,le.default)(e)}}var s=n("./node_modules/babel-runtime/helpers/extends.js"),a=r(s),l=n("./node_modules/lodash/values.js"),d=r(l),u=n("./node_modules/lodash/pick.js"),c=r(u),p=n("./node_modules/lodash/findLast.js"),f=r(p),m=n("./node_modules/lodash/find.js"),h=r(m),g=n("./node_modules/lodash/debounce.js"),y=r(g),v=n("./node_modules/lodash/assign.js"),b=r(v),_=n("./node_modules/react-dom/index.js"),x=r(_),C=n("./node_modules/react-dom/server.js"),E=r(C),w=n("./node_modules/react/react.js"),j=r(w),S=n("./node_modules/tinymce/tinymce.js"),T=r(S),P=n("./node_modules/i18n-calypso/index.js"),k=r(P),I=n("./client/lib/shortcode/index.js"),N=r(I),R=n("./node_modules/component-closest/index.js"),D=r(R),M=n("./node_modules/gridicons/build/index.js"),O=r(M),A=n("./client/lib/sites-list/index.js"),L=r(A),F=n("./client/lib/posts/actions.js"),B=r(F),z=n("./client/lib/posts/post-edit-store.js"),U=r(z),H=n("./client/lib/media/constants.js"),W=o(H),V=n("./client/lib/media/actions.js"),q=r(V),G=n("./client/lib/media/utils.js"),K=r(G),$=n("./client/lib/media-serialization/index.js"),Y=n("./client/post-editor/media-modal/markup.js"),J=r(Y),Z=n("./client/lib/media/store.js"),X=r(Z),Q=n("./client/post-editor/editor-media-modal/index.jsx"),ee=r(Q),te=n("./client/notices/index.js"),ne=r(te),oe=n("./client/components/tinymce/plugins/media/drop-zone.jsx"),re=r(oe),ie=n("./client/components/tinymce/plugins/media/restrict-size/index.js"),se=r(ie),ae=n("./client/components/tinymce/plugins/media/advanced/index.jsx"),le=r(ae),de=n("./client/config/index.js"),ue=r(de),ce=n("./client/state/ui/selectors.js"),pe=n("./client/state/ui/editor/actions.js"),fe=n("./client/state/ui/media-modal/constants.js"),me=n("./client/lib/react-helpers/index.js"),he=/<img\s[^>]*\/?>/gi,ge=["thumbnail","medium","large","full"],ye=(0,L.default)(),ve=null,be=null;e.exports=function(){T.default.PluginManager.add("wpcom/media",i)}},"./client/components/tinymce/plugins/media/restrict-size/index.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(){return isFinite(window.devicePixelRatio)?Math.round(g*window.devicePixelRatio):window.matchMedia&&window.matchMedia(h).matches?Math.round(2*g):g}function i(e,t,n,o,r,i,s){return""+t+i+o+s}function s(e){var t=(0,u.deserialize)(e);return t.media.transient||!t.media.ID?null:{originalUrl:t.media.URL,resizedUrl:(0,p.default)(t.media.URL,Math.min(t.media.width||1/0,y))}}function a(e,t,n,o){if(-1!==e.indexOf("data-wpmedia-src"))return e;var r=s(e);return null===r?e:""+t+r.resizedUrl+'" data-wpmedia-src="'+r.originalUrl+o}function l(e){return e.replace(m,i)}function d(e){return e.replace(f,a)}Object.defineProperty(t,"__esModule",{value:!0}),t.getMaxWidth=r,t.resetImages=l,t.setImages=d,t.default=function(e){e.on("BeforeSetContent BeforeSetWpcomMedia",function(e){e.content&&"html"!==e.mode&&(e.content=d(e.content))}),e.on("BeforeSetWpcomMedia",function(e){var t=s(e.content);null!==t&&(e.resizedImageUrl=t.resizedUrl)}),e.on("GetContent",function(e){"raw"===e.format&&e.content&&!e.selection&&(e.content=l(e.content))}),e.on("PostProcess",function(e){e.content&&(e.content=l(e.content))}),e.on("BeforeAddUndo",function(e){e.level.content&&(e.level.content=l(e.level.content))})};var u=n("./client/lib/media-serialization/index.js"),c=n("./client/lib/resize-image-url/index.js"),p=o(c),f=/(<img[^>]*?\ssrc=")([^"]*?)("[^>]*?\/?>)/gi,m=/(<img[^>]*?\ssrc=")([^"]*?)("[^>]*?)(\sdata-wpmedia-src="([^"]*?)")([^>]*?\/?>)/gi,h="( -webkit-min-device-pixel-ratio: 1.5 ), ( min--moz-device-pixel-ratio: 1.5 ), ( min-resolution: 1.5dppx )",g=680,y=r()},"./client/components/tinymce/plugins/mentions/editor-mention.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/react/react.js"),i=o(r),s=function(e){var t=e.username;return i.default.createElement("span",null,"@",t)};s.propTypes={username:i.default.PropTypes.string.isRequired},t.default=s,e.exports=t.default},"./client/components/tinymce/plugins/mentions/mentions.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Mentions=void 0;var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=o(p),m=n("./node_modules/lodash/pick.js"),h=o(m),g=n("./node_modules/lodash/last.js"),y=o(g),v=n("./node_modules/lodash/includes.js"),b=o(v),_=n("./node_modules/lodash/head.js"),x=o(_),C=n("./node_modules/lodash/get.js"),E=o(C),w=n("./node_modules/lodash/findIndex.js"),j=o(w),S=n("./node_modules/lodash/escapeRegExp.js"),T=o(S),P=n("./node_modules/react/react.js"),k=o(P),I=n("./node_modules/react-dom/server.js"),N=o(I),R=n("./node_modules/react-redux/es/index.js"),D=n("./node_modules/tinymce/tinymce.js"),M=o(D),O=n("./client/components/tinymce/plugins/mentions/suggestion-list.jsx"),A=o(O),L=n("./client/components/tinymce/plugins/mentions/editor-mention.jsx"),F=o(L),B=n("./client/components/data/query-users-suggestions/index.jsx"),z=o(B),U=n("./client/state/ui/selectors.js"),H=n("./client/state/users/suggestions/selectors.js"),W=M.default.util.VK,V=t.Mentions=function(e){function t(){var e,n,o,r;(0,a.default)(this,t);for(var s=arguments.length,l=Array(s),d=0;d<s;d++)l[d]=arguments[d];return n=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.matchingSuggestions=[],o.state={popoverContext:null,query:"",showPopover:!1},o.insertSuggestion=function(e){var t=e.user_login;if(t){var n=o.props.editor.selection,r=k.default.createElement(F.default,{username:t}),i=n.getRng(),s=document.createRange();s.setStart(i.startContainer,Math.max(i.startOffset-(o.state.query.length+1),0)),s.setEnd(i.endContainer,i.endOffset),n.setRng(s),n.setContent(n.getContent().replace(/@\S*/,N.default.renderToStaticMarkup(r))),o.props.editor.getBody().focus()}},o.onKeyDown=function(e){var t=e.keyCode,n=e.preventDefault,r=o.getSelectedSuggestionIndex();if((0,b.default)([W.DOWN,W.UP],t)&&-1!==r){var i=void 0;n(),t===W.DOWN?i=(r+1)%o.matchingSuggestions.length:(i=r-1,i<0&&(i=o.matchingSuggestions.length-1)),o.setState({selectedSuggestionId:o.matchingSuggestions[i].ID})}},o.onKeyUp=function(e){var t=e.keyCode;if(!(0,b.default)([W.DOWN,W.UP],t)){if((0,b.default)([W.SPACEBAR,27],t))return o.hidePopover();if(t===W.ENTER){if(!o.state.showPopover||0===o.matchingSuggestions.length)return;var n=o.getSuggestion();return n&&o.insertSuggestion(n),o.hidePopover()}var r=o.getQueryText();o.setState({showPopover:null!==r,selectedSuggestionId:null,query:r})}},o.setPopoverContext=function(e){return e&&o.setState({popoverContext:e})},o.hidePopover=function(){return o.setState({showPopover:!1})},r=n,(0,c.default)(o,r)}return(0,f.default)(t,e),(0,d.default)(t,[{key:"componentDidMount",value:function(){var e=this.props.editor,t=this.getPosition(),n=t.left,o=t.top;e.on("keyup",this.onKeyUp),e.on("click",this.hidePopover),this.left=n,this.top=o}},{key:"componentWillUpdate",value:function(e,t){if(!this.state.showPopover&&t.showPopover)return this.updatePosition(t),void this.props.editor.on("keydown",this.onKeyDown);if(this.state.showPopover&&!t.showPopover)return void this.props.editor.off("keydown",this.onKeyDown);if(t.showPopover){var n=this.getPosition(),o=n.top,r=n.left,i=this.top>o&&this.left<r,s=this.top<o&&this.left>r;(i||s)&&this.updatePosition(t,{top:o,left:r})}}},{key:"componentWillUnmount",value:function(){var e=this.props.editor;e.off("keydown",this.onKeyDown),e.off("keyup",this.onKeyUp),
e.off("click",this.hidePopover)}},{key:"getMatchingSuggestions",value:function(e,t){if(t){t=(0,T.default)(t);var n=new RegExp("^"+t+"|\\s"+t,"ig");e=e.filter(function(e){var t=e.user_login,o=e.display_name;return n.test(t+" "+o)})}return e.slice(0,10)}},{key:"getPosition",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state,t=e.query,n=this.props.editor,o=n.selection.getRng(),r=document.createRange();r.setStart(o.startContainer,o.startOffset-t.length),r.setEnd(o.endContainer,o.endOffset);var i=r.getClientRects(),s=i.length>0?(0,y.default)(i):M.default.$(n.selection.getNode()).offset();return(0,h.default)(s,["left","top"])}},{key:"updatePosition",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getPosition(e),n=t.left,o=t.top,r=this.props,i=r.editor,s=r.node,a=(0,E.default)(M.default.$(".mce-toolbar-grp",i.getContainer())[0],"offsetHeight",0),l=i.selection.getRng(),d=l.getClientRects(),u=void 0;u=d.length>0?d[0].height:i.selection.getNode().offsetHeight,this.left=n,this.top=o,s.style.left=this.left+"px",s.style.top=a+this.top+u-10+"px"}},{key:"getQueryText",value:function(){var e=new RegExp("(?:^|\\s)@([A-Za-z0-9_+-]*)$","gi"),t=this.props.editor.selection.getRng(),n=t.startContainer.textContent.slice(0,t.startOffset),o=e.exec(n);return o&&o.length>1?o[1]:null}},{key:"getSelectedSuggestionIndex",value:function(){var e=this;return this.state.selectedSuggestionId?(0,j.default)(this.matchingSuggestions,function(t){var n=t.ID;return n===e.state.selectedSuggestionId}):0}},{key:"getSuggestion",value:function(){var e=this.getSelectedSuggestionIndex();return e>-1?this.matchingSuggestions[e]:null}},{key:"render",value:function(){var e=this.props,t=e.siteId,n=e.suggestions,o=this.state,r=o.query,i=o.showPopover,s=o.popoverContext;this.matchingSuggestions=this.getMatchingSuggestions(n,r);var a=this.state.selectedSuggestionId||(0,E.default)((0,x.default)(this.matchingSuggestions),"ID");return k.default.createElement("div",{ref:this.setPopoverContext},k.default.createElement(z.default,{siteId:t}),this.matchingSuggestions.length>0&&i&&k.default.createElement(A.default,{query:r,suggestions:this.matchingSuggestions,selectedSuggestionId:a,popoverContext:s,onClick:this.insertSuggestion,onClose:this.hidePopover}))}}]),t}(P.Component);V.propTypes={editor:P.PropTypes.object.isRequired,node:P.PropTypes.object.isRequired,siteId:P.PropTypes.number.isRequired,suggestions:P.PropTypes.array},V.defaultProps={suggestions:[]},t.default=(0,R.connect)(function(e){var t=(0,U.getSelectedSiteId)(e);return{siteId:t,suggestions:(0,H.getUserSuggestions)(e,t)}})(V)},"./client/components/tinymce/plugins/mentions/plugin.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=document.createElement("div"),n=!1;e.on("init focus",function(){var o=e.getParam("redux_store"),r=(0,f.getSelectedSite)(o.getState());n||!r||r.single_user_site||(t.setAttribute("class","mentions__container"),e.getContainer().appendChild(t),(0,m.renderWithReduxStore)(u.default.createElement(p.default,{editor:e,node:t}),t,o),n=!0),n&&r&&r.single_user_site&&(l.default.unmountComponentAtNode(t),n=!1)}),e.on("keydown",function(e){document.querySelector(".mentions__suggestions")&&e.keyCode===h&&e.preventDefault()})}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/tinymce/tinymce.js"),s=o(i),a=n("./node_modules/react-dom/index.js"),l=o(a),d=n("./node_modules/react/react.js"),u=o(d),c=n("./client/components/tinymce/plugins/mentions/mentions.jsx"),p=o(c),f=n("./client/state/ui/selectors.js"),m=n("./client/lib/react-helpers/index.js"),h=s.default.util.VK.ENTER;t.default=function(){s.default.PluginManager.add("wpcom/mentions",r)},e.exports=t.default},"./client/components/tinymce/plugins/mentions/suggestion-list.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/lodash/bind.js"),i=o(r),s=n("./node_modules/react/react.js"),a=o(s),l=n("./client/components/popover/menu.jsx"),d=o(l),u=n("./client/components/popover/menu-item.jsx"),c=o(u),p=n("./client/components/tinymce/plugins/mentions/suggestion.jsx"),f=o(p),m=function(e){var t=e.onClick,n=e.onClose,o=e.popoverContext,r=e.query,s=e.selectedSuggestionId,l=e.suggestions;return a.default.createElement(d.default,{className:"mentions__suggestions",context:o,isVisible:!0,autoPosition:!1,position:"bottom right",onClose:n},l.map(function(e){return a.default.createElement(c.default,{className:"mentions__suggestion",key:e.ID,isSelected:e.ID===s,onClick:(0,i.default)(t,null,e)},a.default.createElement(f.default,{avatarUrl:e.image_URL,username:e.user_login,fullName:e.display_name,query:r}))}))};m.propTypes={onClick:s.PropTypes.func,onClose:s.PropTypes.func,query:s.PropTypes.string,popoverContext:s.PropTypes.object,selectedSuggestionId:s.PropTypes.number,suggestions:s.PropTypes.array},m.defaultProps={onClick:function(){},onClose:function(){},query:"",popoverContext:{},selectedSuggestionId:0,suggestions:[]},t.default=m,e.exports=t.default},"./client/components/tinymce/plugins/mentions/suggestion.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/react/react.js"),i=o(r),s=function(e){var t=e.avatarUrl,n=e.fullName,o=e.query,r=e.username,s=function(e,t){var n={username:"(^"+o+")(\\w*)\\s*",fullName:"(^.*?)(\\b"+o+")(.*)"},r=new RegExp(n[t],"ig").exec(e);return r?r.map(function(e,t){return 0===t?"":o.toLowerCase()===e.toLowerCase()?i.default.createElement("mark",{className:"mentions__highlight",key:t},e):e}):[e]},a=s(r,"username"),l=s(n,"fullName");return a.unshift("@"),i.default.createElement("div",null,i.default.createElement("img",{className:"mentions__avatar",src:t}),i.default.createElement("span",{className:"mentions__username"},a),i.default.createElement("small",{className:"mentions__fullname"},l))};s.propTypes={avatarUrl:r.PropTypes.string,fullName:r.PropTypes.string,query:r.PropTypes.string,username:r.PropTypes.string},s.defaultProps={avatarUrl:"",fullName:"",query:"",username:""},t.default=s,e.exports=t.default},"./client/components/tinymce/plugins/simple-payments/dialog/form.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=(""+e).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return t?Math.max(0,(t[1]?t[1].length:0)-(t[2]?+t[2]:0)):0}Object.defineProperty(t,"__esModule",{value:!0}),t.isProductFormDirty=t.isProductFormValid=t.getProductFormValues=void 0;var i=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),s=o(i),a=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),l=o(a),d=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(d),c=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),p=o(c),f=n("./node_modules/babel-runtime/helpers/inherits.js"),m=o(f),h=n("./node_modules/babel-runtime/helpers/extends.js"),g=o(h),y=n("./node_modules/babel-runtime/helpers/objectWithoutProperties.js"),v=o(y),b=n("./node_modules/lodash/trimEnd.js"),_=o(b),x=n("./node_modules/lodash/padEnd.js"),C=o(x),E=n("./node_modules/lodash/omit.js"),w=o(E),j=n("./node_modules/lodash/flowRight.js"),S=o(j),T=n("./node_modules/react/react.js"),P=o(T),k=n("./node_modules/redux-form/es/index.js"),I=n("./node_modules/i18n-calypso/index.js"),N=n("./node_modules/email-validator/index.js"),R=o(N),D=n("./client/components/external-link/index.jsx"),M=o(D),O=n("./client/components/forms/form-text-input/index.jsx"),A=o(O),L=n("./client/components/forms/form-textarea/index.jsx"),F=o(L),B=n("./client/components/forms/form-currency-input/index.jsx"),z=o(B),U=n("./client/components/forms/form-toggle/compact.jsx"),H=o(U),W=n("./client/components/redux-forms/redux-form-fieldset/index.jsx"),V=o(W),q=n("./client/blocks/upload-image/index.jsx"),G=o(q),K=n("./client/lib/format-currency/index.js"),$="simplePaymentsForm",Y=(t.getProductFormValues=function(e){return(0,k.getFormValues)($)(e)},t.isProductFormValid=function(e){return(0,k.isValid)($)(e)},t.isProductFormDirty=function(e){return(0,k.isDirty)($)(e)},["USD","EUR","AUD","BRL","CAD","CZK","DKK","HKD","HUF","ILS","JPY","MYR","MXN","TWD","NZD","NOK","PHP","PLN","GBP","RUB","SGD","SEK","CHF","THB"]),J=Y.map(function(e){var t=(0,K.getCurrencyDefaults)(e),n=t.symbol,o=n===e?e:e+" "+(0,_.default)(n,".");return{code:e,label:o}}),Z=function(e,t){var n=t.translate,o=(0,K.getCurrencyDefaults)(e.currency),i=o.precision,s={};if(e.title||(s.title=n("Product name can not be empty.")),e.price){if(NaN===parseFloat(e.price))s.price=n("Invalid price");else if(parseFloat(e.price)<0)s.price=n("Price can not be negative.");else if(r(e.price)>i)if(0===i)s.price=n("Price can not have decimal places.");else{var a=n("%(precision)d decimal place","%(precision)d decimal places",{count:i,args:{precision:i}});s.price=n("Price can not have more than %(countDecimal)s.",{args:{countDecimal:a}})}}else s.price=n("Price can not be empty.");return e.email?R.default.validate(e.email)||(s.email=n("%(email)s is not a valid email address.",{args:{email:e.email}})):s.email=n("Email address can not be empty."),e.featuredImageId&&"uploading"===e.featuredImageId&&(s.featuredImageId="uploading"),s},X=function(e){var t=e.price,n=e.currency,o=(0,v.default)(e,["price","currency"]),r=(0,K.getCurrencyDefaults)(n.input.value),i=r.precision,s=i>0?(0,C.default)("0.",i+2,"0"):"0";return P.default.createElement(W.FieldsetRenderer,(0,g.default)({inputComponent:z.default},t,(0,w.default)(o,["names"]),{currencySymbolPrefix:n.input.value,onCurrencyChange:n.input.onChange,currencyList:J,placeholder:s}))},Q=function(e){function t(){var e,n,o,r;(0,l.default)(this,t);for(var i=arguments.length,a=Array(i),d=0;d<i;d++)a[d]=arguments[d];return n=o=(0,p.default)(this,(e=t.__proto__||(0,s.default)(t)).call.apply(e,[this].concat(a))),o.handleImageEditorDone=function(){return o.props.input.onChange("uploading")},o.handleImageUploadDone=function(e){return o.props.input.onChange(e.ID)},o.handleImageRemove=function(){return o.props.input.onChange(null)},r=n,(0,p.default)(o,r)}return(0,m.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){return P.default.createElement(G.default,{defaultImage:this.props.input.value,onImageEditorDone:this.handleImageEditorDone,onImageUploadDone:this.handleImageUploadDone,onImageRemove:this.handleImageRemove,onError:this.props.onError})}}]),t}(T.Component),ee=function(e){function t(){var e,n,o,r;(0,l.default)(this,t);for(var i=arguments.length,a=Array(i),d=0;d<i;d++)a[d]=arguments[d];return n=o=(0,p.default)(this,(e=t.__proto__||(0,s.default)(t)).call.apply(e,[this].concat(a))),o.handleUploadImageError=function(e,t){return o.props.showError(t)},r=n,(0,p.default)(o,r)}return(0,m.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this.props.translate;return P.default.createElement("form",{className:"editor-simple-payments-modal__form"},P.default.createElement(k.Field,{name:"featuredImageId",onError:this.handleUploadImageError,component:Q}),P.default.createElement("div",{className:"editor-simple-payments-modal__form-fields"},P.default.createElement(V.default,{name:"title",label:e("What are you selling?"),placeholder:e("Product name"),component:A.default}),P.default.createElement(V.default,{name:"description",label:e("Description"),component:F.default}),P.default.createElement(k.Fields,{names:["price","currency"],label:e("Price"),component:X}),P.default.createElement(V.default,{name:"multiple",type:"checkbox",component:H.default},e("Allow people to buy more than one item at a time.")),P.default.createElement(V.default,{name:"email",label:e("Email"),explanation:e("This is where PayPal will send your money. To claim a payment, you'll need a {{paypalLink}}PayPal account{{/paypalLink}} connected to a bank account.",{components:{paypalLink:P.default.createElement(M.default,{href:"https://paypal.com",target:"_blank"})}}),component:A.default})))}}]),t}(T.Component);t.default=(0,S.default)(I.localize,(0,k.reduxForm)({form:$,enableReinitialize:!0,validate:Z}))(ee)},"./client/components/tinymce/plugins/simple-payments/dialog/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/helpers/extends.js"),i=o(r),s=n("./node_modules/babel-runtime/core-js/object/keys.js"),a=o(s),l=n("./node_modules/babel-runtime/core-js/promise.js"),d=o(l),u=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),f=o(p),m=n("./node_modules/babel-runtime/helpers/createClass.js"),h=o(m),g=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),y=o(g),v=n("./node_modules/babel-runtime/helpers/inherits.js"),b=o(v),_=n("./node_modules/lodash/get.js"),x=o(_),C=n("./node_modules/lodash/noop.js"),E=o(C),w=n("./node_modules/lodash/pick.js"),j=o(w),S=n("./node_modules/lodash/isNumber.js"),T=o(S),P=n("./node_modules/lodash/find.js"),k=o(P),I=n("./node_modules/prop-types/index.js"),N=o(I),R=n("./node_modules/react/react.js"),D=o(R),M=n("./node_modules/react-redux/es/index.js"),O=n("./node_modules/i18n-calypso/index.js"),A=n("./client/state/ui/selectors.js"),L=n("./client/state/sites/selectors.js"),F=n("./client/state/selectors/get-simple-payments.js"),B=o(F),z=n("./client/components/data/query-simple-payments/index.js"),U=o(z),H=n("./client/components/data/query-site-plans/index.jsx"),W=o(H),V=n("./client/components/dialog/index.jsx"),q=o(V),G=n("./client/components/button/index.jsx"),K=o(G),$=n("./client/components/notice/index.jsx"),Y=o($),J=n("./client/components/tinymce/plugins/simple-payments/dialog/navigation.jsx"),Z=o(J),X=n("./client/components/tinymce/plugins/simple-payments/dialog/form.jsx"),Q=o(X),ee=n("./client/components/tinymce/plugins/simple-payments/dialog/list.jsx"),te=o(ee),ne=n("./client/state/current-user/selectors.js"),oe=n("./client/lib/wp/browser.js"),re=o(oe),ie=n("./client/lib/accept/index.js"),se=o(ie),ae=n("./client/state/data-layer/wpcom/sites/simple-payments/index.js"),le=n("./client/state/simple-payments/product-list/actions.js"),de=n("./client/lib/plans/constants.js"),ue=n("./client/state/sites/plans/selectors.js"),ce=n("./client/my-sites/upgrade-nudge/index.jsx"),pe=o(ce),fe=n("./client/lib/analytics/track-component-view/index.jsx"),me=o(fe),he=n("./client/state/analytics/actions.js"),ge=n("./client/components/empty-content/index.jsx"),ye=o(ge),ve=n("./client/components/banner/index.jsx"),be=o(ve),_e=function(e){return Array.isArray(e)&&0===e.length},xe=function(e){return(0,ae.productToCustomPost)((0,X.getProductFormValues)(e))},Ce=function(e){return function(t,n){var o=xe(n());return re.default.site(e).addPost(o).then(function(n){var o=(0,ae.customPostToProduct)(n);return t((0,le.receiveUpdateProduct)(e,o)),o})}},Ee=function(e,t){return function(n,o){var r=xe(o());return re.default.site(e).post(t).update(r).then(function(t){var o=(0,ae.customPostToProduct)(t);return n((0,le.receiveUpdateProduct)(e,o)),o})}},we=function(e,t){return function(n){var o=re.default.site(e).post(t);return o.delete().then(function(){return o.delete()}).then(function(){return n((0,le.receiveDeleteProduct)(e,t))})}},je=function(e){function t(e){(0,f.default)(this,t);var n=(0,y.default)(this,(t.__proto__||(0,c.default)(t)).call(this,e));n.handleDialogClose=function(){n.checkUnsavedForm().then(function(e){return e&&n.props.onClose()})},n.handleChangeTabs=function(e){"form"===e?n.showButtonForm(null):n.checkUnsavedForm().then(function(e){return e&&n.showButtonList()})},n.showButtonForm=function(e){var t=n.getInitialFormFields(e);n.setState({activeTab:"form",editedPaymentId:e,initialFormValues:t})},n.handleSelectedChange=function(e){return n.setState({selectedPaymentId:e})},n.showError=function(e){return n._isMounted&&n.setState({errorMessage:e})},n.dismissError=function(){return n._isMounted&&n.setState({errorMessage:null})},n.handleInsert=function(){var e=n.props,t=e.siteId,o=e.dispatch,r=e.translate,i=n.state.activeTab;n.setIsSubmitting(!0);var s=void 0;s="list"===i?d.default.resolve(n.state.selectedPaymentId):o(Ce(t)).then(function(e){return o((0,he.recordTracksEvent)("calypso_simple_payments_button_create",{price:e.price,currency:e.currency,id:e.ID})),e.ID}),s.then(function(e){n.props.onInsert({id:e}),o((0,he.recordTracksEvent)("calypso_simple_payments_button_insert",{id:e}))}).catch(function(){return n.showError(r("The payment button could not be inserted."))}).then(function(){return n.setIsSubmitting(!1)})},n.handleSave=function(){n.setIsSubmitting(!0);var e=n.props,t=e.siteId,o=e.dispatch,r=e.translate,i=n.state.editedPaymentId;o(Ee(t,i)).then(n.handleFormClose).catch(function(){return n.showError(r("The payment button could not be updated."))}).then(function(){return n.setIsSubmitting(!1)})},n.handleFormClose=function(){n.isDirectEdit()?n.props.onClose():n.showButtonList()},n.handleTrash=function(e){var t=n.props.translate,o=t("Are you sure you want to delete this item? It will be disabled and removed from all locations where it currently appears.");(0,se.default)(o,function(o){if(o){n.setIsSubmitting(!0);var r=n.props,i=r.siteId,s=r.dispatch;s((0,he.recordTracksEvent)("calypso_simple_payments_button_delete",{id:e})),s(we(i,e)).catch(function(){return n.showError(t("The payment button could not be deleted."))}).then(function(){return n.setIsSubmitting(!1)})}},t("Delete"),null,{isScary:!0})},n._isMounted=!1;var o=n.props,r=o.editPaymentId,i=o.paymentButtons;return n.state={activeTab:r||_e(i)?"form":"list",editedPaymentId:r,initialFormValues:n.getInitialFormFields(r),selectedPaymentId:null,isSubmitting:!1,errorMessage:null},n}return(0,b.default)(t,e),(0,h.default)(t,[{key:"componentWillReceiveProps",value:function(e){e.showDialog&&!this.props.showDialog&&(e.editPaymentId?this.showButtonForm(e.editPaymentId):_e(e.paymentButtons)?this.showButtonForm(null):this.showButtonList()),null===this.props.paymentButtons&&_e(e.paymentButtons)&&this.showButtonForm(null)}},{key:"componentDidMount",value:function(){this._isMounted=!0}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"getInitialFormFields",value:function(e){var t=this.constructor.initialFields,n=this.props,o=n.paymentButtons,r=n.currencyCode,s=n.currentUserEmail;if((0,T.default)(e)){var l=(0,k.default)(o,function(t){return t.ID===e});if(l)return(0,j.default)(l,(0,a.default)(t))}var d=r||"USD",u=(0,x.default)(o,"0.email",s);return(0,i.default)({},t,{currency:d,email:u})}},{key:"isDirectEdit",value:function(){return(0,T.default)(this.props.editPaymentId)}},{key:"checkUnsavedForm",value:function(){var e=this,t="form"===this.state.activeTab&&this.props.formIsDirty;return t?new d.default(function(t){var n=e.props.translate;(0,se.default)(n("Wait! You have unsaved changes. Do you really want to discard them?"),t,n("Discard"),null,{isScary:!0})}):d.default.resolve(!0)}},{key:"showButtonList",value:function(){this.setState({activeTab:"list"})}},{key:"setIsSubmitting",value:function(e){this._isMounted&&this.setState({isSubmitting:e})}},{key:"getActionButtons",value:function(){var e=this.props,t=e.formIsValid,n=e.formIsDirty,o=e.translate,r=this.state,i=r.activeTab,s=r.editedPaymentId,a=r.isSubmitting,l=t&&n,d=void 0,u=void 0,c=void 0,p=void 0;return"form"===i&&(0,T.default)(s)?(d=this.handleFormClose,u=this.handleSave,c=!l,p=o("Done")):(d=this.props.onClose,u=this.handleInsert,c="form"===i&&!l||"list"===i&&null===this.state.selectedPaymentId,p=o("Insert")),[D.default.createElement(K.default,{onClick:d,disabled:a},o("Cancel")),D.default.createElement(K.default,{onClick:u,busy:a,disabled:a||c,primary:!0},a?o("Saving…"):p)]}},{key:"renderEmptyDialog",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.props,o=n.onClose,r=n.translate,i=n.showDialog;return D.default.createElement(q.default,{isVisible:i,onClose:o,buttons:[D.default.createElement(K.default,{onClick:o},r("Close"))],additionalClassNames:"editor-simple-payments-modal"},D.default.createElement(me.default,{eventName:"calypso_simple_payments_dialog_view"}),!t&&D.default.createElement(Z.default,{activeTab:"list",paymentButtons:[],onChangeTabs:E.default}),e)}},{key:"returnTrue",value:function(){return!0}},{key:"render",value:function(){var e=this.props,t=e.showDialog,n=e.siteId,o=e.siteSlug,r=e.paymentButtons,i=e.currencyCode,s=e.isJetpackNotSupported,a=e.translate,l=e.planHasSimplePaymentsFeature,d=e.shouldQuerySitePlans,u=this.state,c=u.activeTab,p=u.initialFormValues,f=u.errorMessage,m="list"===c||"form"===c&&!this.isDirectEdit()&&!_e(r);return!d&&s?this.renderEmptyDialog(D.default.createElement(ye.default,{className:"upgrade-jetpack",illustration:"/calypso/images/illustrations/illustration-jetpack.svg",title:a("Upgrade Jetpack to use Simple Payments"),illustrationWidth:600,action:D.default.createElement(be.default,{icon:"star",title:a("Upgrade your Jetpack!"),description:a("Simple Payments requires Jetpack version 5.2 or later."),feature:de.FEATURE_SIMPLE_PAYMENTS,plan:de.PLAN_PREMIUM,href:"../../plugins/jetpack/"+o})}),!0):d||l?D.default.createElement(q.default,{isVisible:t,onClose:this.handleDialogClose,buttons:this.getActionButtons(),additionalClassNames:"editor-simple-payments-modal"},D.default.createElement(me.default,{eventName:"calypso_simple_payments_dialog_view"}),D.default.createElement(U.default,{siteId:n}),(!i||d)&&D.default.createElement(W.default,{siteId:n}),m&&D.default.createElement(Z.default,{activeTab:c,paymentButtons:r,onChangeTabs:this.handleChangeTabs}),f&&D.default.createElement(Y.default,{status:"is-error",text:f,onDismissClick:this.dismissError}),"form"===c?D.default.createElement(Q.default,{initialValues:p,showError:this.showError}):D.default.createElement(te.default,{siteId:n,paymentButtons:r,selectedPaymentId:this.state.selectedPaymentId,onSelectedChange:this.handleSelectedChange,onTrashClick:this.handleTrash,onEditClick:this.showButtonForm})):this.renderEmptyDialog(D.default.createElement(ye.default,{illustration:"/calypso/images/illustrations/type-e-commerce.svg",illustrationWidth:300,title:a("Want to add a payment button to your site?"),action:D.default.createElement(pe.default,{className:"editor-simple-payments-modal__nudge-nudge",title:a("Upgrade your plan!"),message:a("Get simple payments, advanced social media tools, your own domain, and more."),feature:de.FEATURE_SIMPLE_PAYMENTS,event:"editor_simple_payments_modal_nudge",shouldDisplay:this.returnTrue})}),!0)}}]),t}(R.Component);je.propTypes={showDialog:N.default.bool.isRequired,editPaymentId:N.default.number,onClose:N.default.func.isRequired,onInsert:N.default.func.isRequired,isJetpackNotSupported:N.default.bool},je.initialFields={title:"",description:"",price:"",currency:"USD",multiple:!1,email:"",featuredImageId:null},t.default=(0,M.connect)(function(e,t){var n=t.siteId;return n||(n=(0,A.getSelectedSiteId)(e)),{siteId:n,siteSlug:(0,L.getSiteSlug)(e,n),paymentButtons:(0,B.default)(e,n),currencyCode:(0,ne.getCurrentUserCurrencyCode)(e),shouldQuerySitePlans:null===(0,ue.getSitePlanSlug)(e,n),isJetpackNotSupported:(0,L.isJetpackSite)(e,n)&&!(0,L.isJetpackMinimumVersion)(e,n,"5.2"),planHasSimplePaymentsFeature:(0,ue.hasFeature)(e,n,de.FEATURE_SIMPLE_PAYMENTS),formIsValid:(0,X.isProductFormValid)(e),formIsDirty:(0,X.isProductFormDirty)(e),currentUserEmail:(0,ne.getCurrentUserEmail)(e)}})((0,O.localize)(je)),e.exports=t.default},"./client/components/tinymce/plugins/simple-payments/dialog/list-item-placeholder.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/react/react.js"),i=o(r),s=n("./node_modules/i18n-calypso/index.js"),a=n("./client/components/card/compact.jsx"),l=o(a),d=function(e){var t=e.translate;return i.default.createElement(l.default,{className:"editor-simple-payments-modal__list-item is-placeholder"},i.default.createElement("div",{className:"editor-simple-payments-modal__list-label"},i.default.createElement("div",null,i.default.createElement("span",{className:"placeholder-text"},t("Loading payment buttons…"))),i.default.createElement("div",null,i.default.createElement("span",{className:"placeholder-text"},"$1000"))))};t.default=(0,s.localize)(d),e.exports=t.default},"./client/components/tinymce/plugins/simple-payments/dialog/list-item.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=o(p),m=n("./node_modules/lodash/noop.js"),h=o(m),g=n("./node_modules/react/react.js"),y=o(g),v=n("./node_modules/i18n-calypso/index.js"),b=n("./client/lib/format-currency/index.js"),_=n("./client/components/card/compact.jsx"),x=o(_),C=n("./client/components/ellipsis-menu/index.jsx"),E=o(C),w=n("./client/components/forms/form-radio/index.jsx"),j=o(w),S=n("./client/components/popover/menu-item.jsx"),T=o(S),P=n("./client/components/tinymce/plugins/simple-payments/dialog/product-image.jsx"),k=o(P),I=function(e){function t(){var e,n,o,r;(0,a.default)(this,t);for(var s=arguments.length,l=Array(s),d=0;d<s;d++)l[d]=arguments[d];return n=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.handleRadioChange=function(){return o.props.onSelectedChange(o.props.paymentId)},o.handleEditClick=function(){return o.props.onEditClick(o.props.paymentId)},o.handleTrashClick=function(){return o.props.onTrashClick(o.props.paymentId)},r=n,(0,c.default)(o,r)}return(0,f.default)(t,e),(0,d.default)(t,[{key:"formatPrice",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD",n=(0,b.getCurrencyObject)(e,t),o=n.integer,r=n.fraction;return""+o+r+" "+t}},{key:"render",value:function(){var e=this.props,t=e.siteId,n=e.paymentId,o=e.title,r=e.price,i=e.currency,s=e.featuredImageId,a=e.isSelected,l=e.translate,d="simple-payments-list-item-radio-"+n;return y.default.createElement(x.default,{className:"editor-simple-payments-modal__list-item"},y.default.createElement(j.default,{name:"selection",id:d,value:n,checked:a,onChange:this.handleRadioChange}),y.default.createElement("label",{className:"editor-simple-payments-modal__list-label",htmlFor:d},y.default.createElement("div",{className:"editor-simple-payments-modal__list-name"},o),y.default.createElement("div",null,this.formatPrice(r,i))),y.default.createElement(k.default,{siteId:t,imageId:s}),y.default.createElement(E.default,{className:"editor-simple-payments-modal__list-menu",popoverClassName:"is-dialog-visible",position:"bottom left"},y.default.createElement(T.default,{icon:"pencil",onClick:this.handleEditClick},l("Edit")),y.default.createElement(T.default,{icon:"trash",onClick:this.handleTrashClick},l("Trash"))))}}]),t}(g.Component);I.propTypes={onSelectedChange:g.PropTypes.func,onEditClick:g.PropTypes.func,onTrashClick:g.PropTypes.func},I.defaultProps={onSelectedChange:h.default,onEditClick:h.default,onTrashClick:h.default},t.default=(0,v.localize)(I),e.exports=t.default},"./client/components/tinymce/plugins/simple-payments/dialog/list.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=o(p),m=n("./node_modules/lodash/range.js"),h=o(m),g=n("./node_modules/lodash/noop.js"),y=o(g),v=n("./node_modules/react/react.js"),b=o(v),_=n("./client/components/tinymce/plugins/simple-payments/dialog/list-item.jsx"),x=o(_),C=n("./client/components/tinymce/plugins/simple-payments/dialog/list-item-placeholder.jsx"),E=o(C),w=function(e){function t(){return(0,a.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,d.default)(t,[{key:"renderListItems",value:function(){var e=this.props,t=e.siteId,n=e.paymentButtons,o=e.selectedPaymentId,r=e.onSelectedChange,i=e.onEditClick,s=e.onTrashClick;return n?n.map(function(e){var n=e.ID,a=e.title,l=e.price,d=e.currency,u=e.featuredImageId;return b.default.createElement(x.default,{key:n,siteId:t,paymentId:n,isSelected:o===n,title:a,price:l,currency:d,featuredImageId:u,onSelectedChange:r,onEditClick:i,onTrashClick:s})}):(0,h.default)(2).map(function(e){return b.default.createElement(E.default,{key:e})})}},{key:"render",value:function(){return b.default.createElement("div",{className:"editor-simple-payments-modal__list"},this.renderListItems())}}]),t}(v.Component);w.propTypes={siteId:v.PropTypes.number.isRequired,paymentButtons:v.PropTypes.array,selectedPaymentId:v.PropTypes.number,onSelectedChange:v.PropTypes.func,onEditClick:v.PropTypes.func,onTrashClick:v.PropTypes.func},w.defaultProps={selectedPaymentId:null,onSelectedChange:y.default,onEditClick:y.default,onTrashClick:y.default},t.default=w,e.exports=t.default},"./client/components/tinymce/plugins/simple-payments/dialog/navigation.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=o(p),m=n("./node_modules/react/react.js"),h=o(m),g=n("./node_modules/i18n-calypso/index.js"),y=n("./node_modules/gridicons/build/index.js"),v=o(y),b=n("./client/components/section-header/index.jsx"),_=o(b),x=n("./client/components/header-cake/index.jsx"),C=o(x),E=n("./client/components/button/index.jsx"),w=o(E),j=function(e){function t(){var e,n,o,r;(0,a.default)(this,t);for(var s=arguments.length,l=Array(s),d=0;d<s;d++)l[d]=arguments[d];return n=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.onChangeTabs=function(e){return function(){return o.props.onChangeTabs(e)}},r=n,(0,c.default)(o,r)}return(0,f.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){var e=this.props,t=e.paymentButtons,n=e.activeTab,o=e.translate,r="editor-simple-payments-modal__navigation";return"form"===n?h.default.createElement(C.default,{className:r,onClick:this.onChangeTabs("list"),backText:o("Payment Buttons")}):t?h.default.createElement(_.default,{className:r,label:o("Payment Buttons"),count:t.length},h.default.createElement(w.default,{compact:!0,icon:!0,onClick:this.onChangeTabs("form")},h.default.createElement(v.default,{icon:"plus-small"})," ",o("Add New"))):h.default.createElement(_.default,{className:r})}}]),t}(m.Component);j.propTypes={activeTab:m.PropTypes.oneOf(["list","form"]).isRequired,onChangeTabs:m.PropTypes.func.isRequired,paymentButtons:m.PropTypes.array},t.default=(0,g.localize)(j),e.exports=t.default},"./client/components/tinymce/plugins/simple-payments/dialog/product-image.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/react/react.js"),i=o(r),s=n("./node_modules/react-redux/es/index.js"),a=n("./client/lib/media/utils.js"),l=o(a),d=n("./client/components/data/query-media/index.jsx"),u=o(d),c=n("./client/state/selectors/get-media-item.js"),p=o(c),f=function(e){
var t=e.siteId,n=e.imageId,o=e.image;if(!t||!n)return null;if(!o)return i.default.createElement("figure",{className:"editor-simple-payments-modal__figure is-placeholder"},i.default.createElement(u.default,{siteId:t,mediaId:n}));var r=l.default.url(o,{size:"medium"});return i.default.createElement("figure",{className:"editor-simple-payments-modal__figure"},i.default.createElement("img",{className:"editor-simple-payments-modal__image",src:r}))};t.default=(0,s.connect)(function(e,t){var n=t.siteId,o=t.imageId;return{image:o?(0,p.default)(e,n,o):null}})(f),e.exports=t.default},"./client/components/tinymce/plugins/simple-payments/plugin.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/tinymce/tinymce.js"),i=o(r),s=n("./node_modules/react/react.js"),a=n("./node_modules/react-dom/index.js"),l=n("./client/components/tinymce/plugins/simple-payments/dialog/index.jsx"),d=o(l),u=n("./client/components/tinymce/plugins/simple-payments/shortcode-utils.js"),c=n("./client/lib/react-helpers/index.js"),p=function(e){var t=void 0,n=e.getParam("redux_store");e.on("init",function(){t=e.getContainer().appendChild(document.createElement("div"))}),e.on("remove",function(){(0,a.unmountComponentAtNode)(t),t.parentNode.removeChild(t),t=null}),e.addCommand("simplePaymentsButton",function(o){function r(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"show";(0,c.renderWithReduxStore)((0,s.createElement)(d.default,{showDialog:"show"===o,editPaymentId:i,onInsert:function(t){e.execCommand("mceInsertContent",!1,(0,u.serialize)(t)),r("hide")},onClose:function(){e.focus(),r("hide")}}),t,n)}var i=null;if(o){var a=(0,u.deserialize)(o);i=a.id||null}r()})};t.default=function(){i.default.PluginManager.add("wpcom/simplepayments",p)},e.exports=t.default},"./client/components/tinymce/plugins/simple-payments/shortcode-utils.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=e.id;return d.default.stringify({tag:"simple-payment",type:"single",attrs:{id:t}})}function i(e){if(!e)return null;var t=d.default.parse(e),n={},o=parseInt((0,a.default)(t,"attrs.named.id",null));return n.id=isNaN(o)?null:o,n}Object.defineProperty(t,"__esModule",{value:!0});var s=n("./node_modules/lodash/get.js"),a=o(s);t.serialize=r,t.deserialize=i;var l=n("./client/lib/shortcode/index.js"),d=o(l)},"./client/components/tinymce/plugins/toolbar-pin/plugin.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){function t(){i=e.getContainer()}function n(t){r=t,e.dom.toggleClass(i,"is-pinned",r)}var o=!1,r=!1,i=void 0,a=(0,s.default)(function(){i&&(r&&window.pageYOffset<i.offsetTop?n(!1):!r&&window.pageYOffset>i.offsetTop&&n(!0))},50),l=(0,s.default)(function(r){var i=!e.isHidden(),s="remove"!==r.type&&i&&(0,d.isWithinBreakpoint)(">660px");if(s!==o){var l=(s?"add":"remove")+"EventListener";window[l]("scroll",a),o=s,o?(t(),a()):n(!1)}},200);e.on("init show hide remove",l),window.addEventListener("resize",l)}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/lodash/throttle.js"),s=o(i);t.default=function(){l.default.PluginManager.add("wpcom/toolbarpin",r)};var a=n("./node_modules/tinymce/tinymce.js"),l=o(a),d=n("./client/lib/viewport/index.js");e.exports=t.default},"./client/components/tinymce/plugins/touch-scroll-toolbar/plugin.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){function t(){e.$(".mce-toolbar:not(.mce-menubar)",document.body).each(function(e,t){t.addEventListener("touchstart",function(e){e.stopImmediatePropagation()})})}function n(){e.$([e.$(".mce-inline-toolbar-grp .mce-container-body",document.body),e.$(".mce-toolbar-grp",e.theme.panel.getEl())]).each(function(t,n){n.on("scroll",(0,s.default)(function(t){var n=t.target,o=void 0;if(n.scrollLeft===n.scrollWidth-n.clientWidth?o="add":l.default.DOM.hasClass(n,"is-scrolled-full")&&(o="remove"),o){var r=e.$(n);r.hasClass("mce-container-body")||r.add(l.default.DOM.getParent(n,".mce-container-body")),r[o+"Class"]("is-scrolled-full")}},200))})}function o(){function t(){e.$(".mce-toolbar-grp",e.theme.panel.getEl()).each(function(t,n){var o=n.scrollWidth>n.clientWidth;e.$(n).toggleClass("is-scrollable",o)})}window.addEventListener("resize",(0,s.default)(t,200)),t(),e.on("wptoolbar",function(t){setTimeout(function(){if(t.toolbar&&t.toolbar.visible()){var n=t.toolbar.getEl(),o=n.firstChild.scrollWidth>n.clientWidth;e.dom.toggleClass(n,"is-scrollable",o)}},0)})}e.on("init",function(){t(),n(),o()})}var i=n("./node_modules/lodash/throttle.js"),s=o(i),a=n("./node_modules/tinymce/tinymce.js"),l=o(a);e.exports=function(){l.default.PluginManager.add("wpcom/touchscrolltoolbar",r)}},"./client/components/tinymce/plugins/wpcom-autoresize/plugin.js":function(e,t,n){"use strict";function o(e){function t(){return e.plugins.fullscreen&&e.plugins.fullscreen.isFullscreen()}function n(){var t,n,o,r,i;if(t=e.selection.getRng(),0===t.startOffset&&0!==t.endOffset||!t.collapsed)return!1;n=t.startContainer,o=e.getBody(),r=n;do if(i=r,r=r.parentNode,r.childNodes[r.childNodes.length-1]!==i)return!1;while(r!==o);return!0}function o(i){var l,d,u,c,p,f,m,h,g,y,v,b,_=r.DOM;if(d=e.getDoc()){if(u=d.body,c=d.documentElement,p=s.autoresize_min_height,!u||i&&"setcontent"===i.type&&i.initial||t())return void(u&&c&&(u.style.overflowY="auto",c.style.overflowY="auto"));m=e.dom.getStyle(u,"margin-top",!0),h=e.dom.getStyle(u,"margin-bottom",!0),g=e.dom.getStyle(u,"padding-top",!0),v=e.dom.getStyle(u,"border-top-width",!0),b=e.dom.getStyle(u,"border-bottom-width",!0),y=e.getParam("autoresize_bottom_margin",50),f=u.offsetHeight+parseInt(m,10)+parseInt(h,10)+parseInt(g,10)+parseInt(y,10)+parseInt(v,10)+parseInt(b,10),f&&f<c.offsetHeight&&(f=c.offsetHeight),(isNaN(f)||f<=0)&&(f=r.Env.ie?u.scrollHeight:r.Env.webkit&&0===u.clientHeight?0:u.offsetHeight),f>s.autoresize_min_height&&(p=f),s.autoresize_max_height&&f>s.autoresize_max_height?(p=s.autoresize_max_height,u.style.overflowY="auto",c.style.overflowY="auto"):(u.style.overflowY="hidden",c.style.overflowY="hidden",u.scrollTop=0),p!==a&&(l=p-a,_.setStyle(e.iframeElement,"height",p+"px"),a=p,r.isWebKit&&l<0&&o(i),(i&&"keyup"===i.type||i&&"nodechange"===i.type&&i.element&&"BR"===i.element.tagName)&&n()&&window.scrollTo(0,document.body.scrollHeight))}}function i(e,t,n){setTimeout(function(){o({}),e--?i(e,t,n):n&&n()},t)}var s=e.settings,a=0;e.settings.inline||r.Env.iOS||(s.autoresize_min_height=parseInt(e.getParam("autoresize_min_height",e.getElement().offsetHeight),10),s.autoresize_max_height=parseInt(e.getParam("autoresize_max_height",0),10),e.on("init",function(){var t,n;t=e.getParam("autoresize_overflow_padding",1),n=e.getParam("autoresize_bottom_margin",50),t!==!1&&e.dom.setStyles(e.getBody(),{paddingLeft:t,paddingRight:t}),n!==!1&&e.dom.setStyles(e.getBody(),{paddingBottom:n})}),e.on("nodechange setcontent keyup FullscreenStateChanged",o),e.getParam("autoresize_on_init",!0)&&e.on("init",function(){e.dom.addClass(e.getBody(),"wp-autoresize"),i(20,100,function(){i(5,1e3)})}),e.addCommand("wpcomAutoResize",o))}var r=n("./node_modules/tinymce/tinymce.js");e.exports=function(){r.PluginManager.add("wpcom/autoresize",o)}},"./client/components/tinymce/plugins/wpcom-charmap/charmap.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/react/react.js"),i=o(r),s=n("./client/components/dialog/index.jsx"),a=o(s),l=n("./client/components/forms/form-button/index.jsx"),d=o(l);t.default=i.default.createClass({displayName:"CharMap",propTypes:{onClose:i.default.PropTypes.func,showDialog:i.default.PropTypes.bool,editor:i.default.PropTypes.object},defaultCharMap:function(){return[["160","no-break space"],["173","soft hyphen"],["34","quotation mark"],["162","cent sign"],["8364","euro sign"],["163","pound sign"],["165","yen sign"],["169","copyright sign"],["174","registered sign"],["8482","trade mark sign"],["8240","per mille sign"],["181","micro sign"],["183","middle dot"],["8226","bullet"],["8230","three dot leader"],["8242","minutes / feet"],["8243","seconds / inches"],["167","section sign"],["182","paragraph sign"],["223","sharp s / ess-zed"],["8249","single left-pointing angle quotation mark"],["8250","single right-pointing angle quotation mark"],["171","left pointing guillemet"],["187","right pointing guillemet"],["8216","left single quotation mark"],["8217","right single quotation mark"],["8220","left double quotation mark"],["8221","right double quotation mark"],["8218","single low-9 quotation mark"],["8222","double low-9 quotation mark"],["60","less-than sign"],["62","greater-than sign"],["8804","less-than or equal to"],["8805","greater-than or equal to"],["8211","en dash"],["8212","em dash"],["175","macron"],["8254","overline"],["164","currency sign"],["166","broken bar"],["168","diaeresis"],["161","inverted exclamation mark"],["191","turned question mark"],["710","circumflex accent"],["732","small tilde"],["176","degree sign"],["8722","minus sign"],["177","plus-minus sign"],["247","division sign"],["8260","fraction slash"],["215","multiplication sign"],["185","superscript one"],["178","superscript two"],["179","superscript three"],["188","fraction one quarter"],["189","fraction one half"],["190","fraction three quarters"],["402","function / florin"],["8747","integral"],["8721","n-ary sumation"],["8734","infinity"],["8730","square root"],["8764","similar to"],["8773","approximately equal to"],["8776","almost equal to"],["8800","not equal to"],["8801","identical to"],["8712","element of"],["8713","not an element of"],["8715","contains as member"],["8719","n-ary product"],["8743","logical and"],["8744","logical or"],["172","not sign"],["8745","intersection"],["8746","union"],["8706","partial differential"],["8704","for all"],["8707","there exists"],["8709","diameter"],["8711","backward difference"],["8727","asterisk operator"],["8733","proportional to"],["8736","angle"],["180","acute accent"],["184","cedilla"],["170","feminine ordinal indicator"],["186","masculine ordinal indicator"],["8224","dagger"],["8225","double dagger"],["192","A - grave"],["193","A - acute"],["194","A - circumflex"],["195","A - tilde"],["196","A - diaeresis"],["197","A - ring above"],["198","ligature AE"],["199","C - cedilla"],["200","E - grave"],["201","E - acute"],["202","E - circumflex"],["203","E - diaeresis"],["204","I - grave"],["205","I - acute"],["206","I - circumflex"],["207","I - diaeresis"],["208","ETH"],["209","N - tilde"],["210","O - grave"],["211","O - acute"],["212","O - circumflex"],["213","O - tilde"],["214","O - diaeresis"],["216","O - slash"],["338","ligature OE"],["352","S - caron"],["217","U - grave"],["218","U - acute"],["219","U - circumflex"],["220","U - diaeresis"],["221","Y - acute"],["376","Y - diaeresis"],["222","THORN"],["224","a - grave"],["225","a - acute"],["226","a - circumflex"],["227","a - tilde"],["228","a - diaeresis"],["229","a - ring above"],["230","ligature ae"],["231","c - cedilla"],["232","e - grave"],["233","e - acute"],["234","e - circumflex"],["235","e - diaeresis"],["236","i - grave"],["237","i - acute"],["238","i - circumflex"],["239","i - diaeresis"],["240","eth"],["241","n - tilde"],["242","o - grave"],["243","o - acute"],["244","o - circumflex"],["245","o - tilde"],["246","o - diaeresis"],["248","o slash"],["339","ligature oe"],["353","s - caron"],["249","u - grave"],["250","u - acute"],["251","u - circumflex"],["252","u - diaeresis"],["253","y - acute"],["254","thorn"],["255","y - diaeresis"],["913","Alpha"],["914","Beta"],["915","Gamma"],["916","Delta"],["917","Epsilon"],["918","Zeta"],["919","Eta"],["920","Theta"],["921","Iota"],["922","Kappa"],["923","Lambda"],["924","Mu"],["925","Nu"],["926","Xi"],["927","Omicron"],["928","Pi"],["929","Rho"],["931","Sigma"],["932","Tau"],["933","Upsilon"],["934","Phi"],["935","Chi"],["936","Psi"],["937","Omega"],["945","alpha"],["946","beta"],["947","gamma"],["948","delta"],["949","epsilon"],["950","zeta"],["951","eta"],["952","theta"],["953","iota"],["954","kappa"],["955","lambda"],["956","mu"],["957","nu"],["958","xi"],["959","omicron"],["960","pi"],["961","rho"],["962","final sigma"],["963","sigma"],["964","tau"],["965","upsilon"],["966","phi"],["967","chi"],["968","psi"],["969","omega"],["8501","alef symbol"],["982","pi symbol"],["8476","real part symbol"],["978","upsilon - hook symbol"],["8472","Weierstrass p"],["8465","imaginary part"],["8592","leftwards arrow"],["8593","upwards arrow"],["8594","rightwards arrow"],["8595","downwards arrow"],["8596","left right arrow"],["8629","carriage return"],["8656","leftwards double arrow"],["8657","upwards double arrow"],["8658","rightwards double arrow"],["8659","downwards double arrow"],["8660","left right double arrow"],["8756","therefore"],["8834","subset of"],["8835","superset of"],["8836","not a subset of"],["8838","subset of or equal to"],["8839","superset of or equal to"],["8853","circled plus"],["8855","circled times"],["8869","perpendicular"],["8901","dot operator"],["8968","left ceiling"],["8969","right ceiling"],["8970","left floor"],["8971","right floor"],["9001","left-pointing angle bracket"],["9002","right-pointing angle bracket"],["9674","lozenge"],["9824","black spade suit"],["9827","black club suit"],["9829","black heart suit"],["9830","black diamond suit"],["8194","en space"],["8195","em space"],["8201","thin space"],["8204","zero width non-joiner"],["8205","zero width joiner"],["8206","left-to-right mark"],["8207","right-to-left mark"]]},renderCell:function(e){return i.default.createElement("div",{key:e[0],onClick:this.onCellClick,role:"button",title:e[1],className:"wpcom-charmap__character"},String.fromCharCode(parseInt(e[0],10)))},onCellClick:function(e){this.props.editor.execCommand("mceInsertContent",!1,e.target.textContent.trim())},getButtons:function(){return[i.default.createElement(d.default,{isPrimary:!1,"aria-label":this.translate("Close special characters dialog"),onClick:this.props.onClose},this.translate("Close"))]},render:function(){return i.default.createElement(a.default,{isVisible:this.props.showDialog,buttons:this.getButtons(),additionalClassNames:"wpcom-charmap__dialog",onClose:this.props.onClose},i.default.createElement("h2",{className:"wpcom-charmap__heading"},this.translate("Special characters")),i.default.createElement("div",{className:"wpcom-charmap__table"},this.defaultCharMap().map(this.renderCell,this)))}}),e.exports=t.default},"./client/components/tinymce/plugins/wpcom-charmap/plugin.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){var t;e.on("init",function(){t=document.createElement("div"),t.setAttribute("class","charmap-dialog-container"),e.getContainer().appendChild(t)}),e.on("remove",function(){s.default.unmountComponentAtNode(t),t.parentNode.removeChild(t),t=null}),e.addCommand("Wpcom_CharMap",function(){function n(){e.focus(),o("hide")}function o(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"show";s.default.render(l.default.createElement(p.default,{showDialog:"show"===o,onClose:n,editor:e}),t)}o("show")})}var i=n("./node_modules/react-dom/index.js"),s=o(i),a=n("./node_modules/react/react.js"),l=o(a),d=n("./node_modules/tinymce/tinymce.js"),u=o(d),c=n("./client/components/tinymce/plugins/wpcom-charmap/charmap.jsx"),p=o(c);e.exports=function(){u.default.PluginManager.add("wpcom/charmap",r)}},"./client/components/tinymce/plugins/wpcom-help/help-modal.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var r=n("./node_modules/lodash/forEach.js"),i=o(r),s=n("./node_modules/react/react.js"),a=n("./client/components/dialog/index.jsx"),l=n("./client/components/forms/form-button/index.jsx"),d=s.createClass({displayName:"HelpModal",propTypes:{onClose:s.PropTypes.func,macosx:s.PropTypes.bool,showDialog:s.PropTypes.bool},defaultShortcuts:function(){return[{c:this.translate("Copy"),x:this.translate("Cut")},{v:this.translate("Paste"),a:this.translate("Select all")},{z:this.translate("Undo"),y:this.translate("Redo")},{b:this.translate("Bold"),i:this.translate("Italic")},{u:this.translate("Underline"),k:this.translate("Insert/edit link")}]},additionalShortcuts:function(){return[{1:this.translate("Heading 1"),2:this.translate("Heading 2")},{3:this.translate("Heading 3"),4:this.translate("Heading 4")},{5:this.translate("Heading 5"),6:this.translate("Heading 6")},{l:this.translate("Align left"),c:this.translate("Align center")},{r:this.translate("Align right"),j:this.translate("Justify")},{d:this.translate("Strikethrough"),q:this.translate("Blockquote")},{u:this.translate("Bullet list"),o:this.translate("Numbered list")},{a:this.translate("Insert/edit link"),s:this.translate("Remove link")},{m:this.translate("Insert/edit image"),t:this.translate("Insert Read More tag")},{h:this.translate("Keyboard Shortcuts"),x:this.translate("Code")},{p:this.translate("Insert Page Break tag")}]},renderRow:function(e,t){var n=[];return(0,i.default)(e,function(e,t){n.push(s.createElement("th",{className:"wpcom-help__key",key:t},s.createElement("kbd",null,t))),n.push(s.createElement("td",{className:"wpcom-help__action",key:e},e))}),s.createElement("tr",{key:t},n)},getButtons:function(){return[s.createElement(l,{key:"close",isPrimary:!1,onClick:this.props.onClose},this.translate("Close"))]},getKeyLabel:function(){return this.translate("Key",{context:"Computer key used in keyboard shortcut"})},getActionLabel:function(){return this.translate("Action",{context:"Action taken when pressing keyboard shortcut"})},getTableHead:function(){return s.createElement("thead",null,s.createElement("tr",null,s.createElement("th",{className:"wpcom-help__key"},this.getKeyLabel()),s.createElement("th",{className:"wpcom-help__action"},this.getActionLabel()),s.createElement("th",{className:"wpcom-help__key"},this.getKeyLabel()),s.createElement("th",{className:"wpcom-help__action"},this.getActionLabel())))},render:function(){var e=this.props.macosx?this.translate("Default shortcuts, Command + key:",{context:"Mac shortcuts"}):this.translate("Default shortcuts, Ctrl + key:",{context:"Windows shortcuts"}),t=this.props.macosx?this.translate("Additional shortcuts, Control + Option + key:",{context:"Mac shortcuts"}):this.translate("Additional shortcuts, Shift + Alt + key:",{context:"Windows shortcuts"});return s.createElement(a,{isVisible:this.props.showDialog,buttons:this.getButtons(),additionalClassNames:"wpcom-help__dialog",onClose:this.props.onClose},s.createElement("h2",{className:"wpcom-help__heading"},this.translate("Keyboard Shortcuts")),s.createElement("p",null,e),s.createElement("table",{className:"wpcom-help__table"},this.getTableHead(),s.createElement("tbody",null,this.defaultShortcuts().map(this.renderRow,this))),s.createElement("p",null,t),s.createElement("table",{className:"wpcom-help__table"},this.getTableHead(),s.createElement("tbody",null,this.additionalShortcuts().map(this.renderRow,this))))}});e.exports=d},"./client/components/tinymce/plugins/wpcom-help/plugin.js":function(e,t,n){"use strict";function o(e){var t;e.on("init",function(){t=e.getContainer().appendChild(document.createElement("div"))}),e.on("remove",function(){r.unmountComponentAtNode(t),t.parentNode.removeChild(t),t=null}),e.addCommand("WP_Help",function(){function n(){e.focus(),o("hide")}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"show";r.render(i.createElement(a,{showDialog:"show"===e,onClose:n,macosx:s.Env.mac}),t)}o("show")})}var r=n("./node_modules/react-dom/index.js"),i=n("./node_modules/react/react.js"),s=n("./node_modules/tinymce/tinymce.js"),a=n("./client/components/tinymce/plugins/wpcom-help/help-modal.jsx");e.exports=function(){s.PluginManager.add("wpcom/help",o)}},"./client/components/tinymce/plugins/wpcom-sourcecode/plugin.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=e.content,n=e.initial,o=e.load;return t=t.replace(d,function(e,t){return t=t.replace(/\r/,""),t=t.replace(/<br ?\/?>\n?/g,"\n").replace(/<\/?p( [^>]*)?>\n?/g,"\n"),n&&!o||(t=t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")),"<pre>"+t+"</pre>"})}function i(e){var t=e.content;return t&&t.indexOf("[")!==-1?t.replace(d,function(e,t){return t=t.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&"),"<p>"+t+"</p>"}):t}function s(e){e.on("BeforeSetContent",function(e){e.content&&"html"!==e.mode&&(e.content=r(e))}),e.on("GetContent",function(e){"raw"===e.format&&e.content&&!e.selection&&(e.content=i(e))}),e.on("PostProcess",function(e){e.content&&(e.content=i(e))})}Object.defineProperty(t,"__esModule",{value:!0}),t.wrapPre=r,t.unwrapPre=i,t.default=function(){l.default.PluginManager.add("wpcom/sourcecode",s)};var a=n("./node_modules/tinymce/tinymce.js"),l=o(a),d=new RegExp("(?:<p>\\s*)?(?:<pre>\\s*)?(\\[(code|sourcecode)[^\\]]*\\][\\s\\S]*?\\[\\/\\2\\])(?:\\s*<\\/pre>)?(?:\\s*<\\/p>)?","gi")},"./client/components/tinymce/plugins/wpcom-tabindex/plugin.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){return function(){var t=document.getElementById(this.id+"_ifr");t&&t.setAttribute("tabIndex",e)}}function i(e){var t=e&&e.settings;if(t&&"tabindex"in t){var n=Math.min(32767,Number(t.tabindex));(0,a.default)(n)&&e.on("init",r(n))}}Object.defineProperty(t,"__esModule",{value:!0});var s=n("./node_modules/babel-runtime/core-js/number/is-integer.js"),a=o(s);t.default=function(){d.default.PluginManager.add("wpcom/tabindex",i)};var l=n("./node_modules/tinymce/tinymce.js"),d=o(l);e.exports=t.default},"./client/components/tinymce/plugins/wpcom-track-paste/plugin.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){m("init");var t=e.getParam("redux_store"),n=function(e){return"application/x-vnd.google-docs-image-clip+wrapped"===e||"application/x-vnd.google-docs-document-slice-clip+wrapped"===e},o=function(e){return e.some(n)?f.SOURCE_GOOGLE_DOCS:f.SOURCE_UNKNOWN},r=function(e,n){m("track paste event");var r=(0,s.default)(n),i=o(r);t.dispatch((0,c.withAnalytics)((0,c.recordTracksEvent)("calypso_editor_content_paste",{mode:e,types:r.join(", "),source:i}),(0,p.pasteEvent)(i)))},i=function(e){return e.clipboardData&&r("visual-editor",e.clipboardData.types)},a=function(e){return e.clipboardData&&r("html-editor",e.clipboardData.types)};e.on("paste",i);var l=e.getParam("textarea");l&&l.addEventListener("paste",a),e.on("remove",function(){e.off("paste",i),l.removeEventListener("paste",a)})}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/babel-runtime/core-js/array/from.js"),s=o(i),a=n("./node_modules/debug/browser.js"),l=o(a),d=n("./node_modules/tinymce/tinymce.js"),u=o(d),c=n("./client/state/analytics/actions.js"),p=n("./client/state/ui/editor/actions.js"),f=n("./client/components/tinymce/plugins/wpcom-track-paste/sources.js"),m=(0,l.default)("calypso:tinymce-plugins:wpcom-track-paste");t.default=function(){u.default.PluginManager.add("wpcom/trackpaste",r)},e.exports=t.default},"./client/components/tinymce/plugins/wpcom-view/gallery-view.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/createClass.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=o(p),m=n("./node_modules/react-dom/index.js"),h=o(m),g=n("./node_modules/react/react.js"),y=o(g),v=n("./client/lib/shortcode/index.js"),b=o(v),_=n("./client/components/gallery-shortcode/index.jsx"),x=o(_),C=function(e){function t(e){(0,a.default)(this,t);var n=(0,d.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return n.state={wrapper:null},n}return(0,f.default)(t,e),(0,c.default)(t,null,[{key:"match",value:function(e){var t=b.default.next("gallery",e);if(t)return{index:t.index,content:t.content,options:{shortcode:t.shortcode}}}},{key:"serialize",value:function(e){return encodeURIComponent(e)}},{key:"edit",value:function(e,t){e.execCommand("wpcomEditGallery",t)}}]),(0,c.default)(t,[{key:"componentDidMount",value:function(){this.setState({wrapper:h.default.findDOMNode(this.refs.view)}),window.MutationObserver&&(this.observer=new MutationObserver(this.props.onResize),this.observer.observe(h.default.findDOMNode(this.refs.view),{attributes:!0,childList:!0,subtree:!0}))}},{key:"componentWillUnmount",value:function(){this.observer&&this.observer.disconnect()}},{key:"renderShortcode",value:function(){if(this.state.wrapper)return y.default.createElement(x.default,{siteId:this.props.siteId,width:this.state.wrapper.clientWidth},this.props.content)}},{key:"render",value:function(){return y.default.createElement("div",{ref:"view",className:"wpview-content wpview-type-gallery"},this.renderShortcode())}}]),t}(g.Component);C.propTypes={siteId:g.PropTypes.number,content:g.PropTypes.string,onResize:g.PropTypes.func},C.defaultProps={onResize:function(){}},t.default=C,e.exports=t.default},"./client/components/tinymce/plugins/wpcom-view/plugin.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){function t(){var t=M(".wpview-marker");return!!t.length&&(t.each(function(t,n){var o=e.dom.getAttrib(n,"data-wpview-text"),r=e.dom.getAttrib(n,"data-wpview-type");e.dom.replace(e.dom.createFragment('<div class="wpview-wrap" data-wpview-text="'+o+'" data-wpview-type="'+r+'"><p class="wpview-selection-before"> </p><div class="wpview-body" contenteditable="false"></div><p class="wpview-selection-after"> </p></div>'),n)}),!0)}function n(){e.nodeChanged()}function o(){if(t()){var o=e.getParam("redux_store"),i=(0,u.getSelectedSiteId)(o.getState());M(".wpview-wrap").each(function(e,t){var a=M(t);if(void 0===a.attr("data-wpview-rendered")){var u=a.attr("data-wpview-type");(0,d.renderWithReduxStore)(f.createElement(l.default.components[u],{content:r(t),siteId:i,onResize:(0,s.default)(n,500)}),a.find(".wpview-body")[0],o),a.attr("data-wpview-rendered","")}})}}function r(e){return decodeURIComponent(M(e).attr("data-wpview-text")||"")}function i(e){return a(e,"wpview-wrap")}function a(e,t){for(;e&&e.parentNode;){if(e.className&&(" "+e.className+" ").indexOf(" "+t+" ")!==-1)return e;e=e.parentNode}return!1}function h(e){e.stopPropagation()}function g(t,n){var o=t?"before":"after",r=t?0:1;_(),e.selection.setCursorLocation(e.dom.select(".wpview-selection-"+o,n)[0],r),e.nodeChanged()}function y(t,n,o){var r=e.dom,i=r.create("p");O.ie&&O.ie<11||(i.innerHTML='<br data-mce-bogus="1">'),n?t.parentNode.insertBefore(i,t):r.insertAfter(i,t),_(),n&&o===A.ENTER?g(n,t):e.selection.setCursorLocation(i,0),e.nodeChanged()}function v(t){e.undoManager.transact(function(){y(t),p.unmountComponentAtNode(M(t).find(".wpview-body")[0]),e.dom.remove(t),e.focus()})}function b(t){var n,o=e.dom;t&&(t!==S&&(I||e.getBody().focus(),_(),S=t,o.setAttrib(t,"data-mce-selected",1),n=o.create("div",{class:"wpview-clipboard",contenteditable:"true"},r(t)),e.dom.select(".wpview-body",t)[0].appendChild(n),o.bind(n,"beforedeactivate focusin focusout",h),o.bind(S,"beforedeactivate focusin focusout",h),z?e.selection.select(n):e.selection.select(n,!0)),e.nodeChanged(),e.fire("wpview-selected",t))}function _(){var t,n=e.dom;S&&(t=e.dom.select(".wpview-clipboard",S)[0],n.unbind(t),n.remove(t),n.unbind(S,"beforedeactivate focusin focusout click mouseup",h),n.setAttrib(S,"data-mce-selected",null)),S=null}function x(e,t){return"<p>"+window.decodeURIComponent(t)+"</p>"}function C(e){return e.replace(/<div[^>]+data-wpview-text="([^"]+)"[^>]*>(?:[\s\S]+?wpview-selection-after[^>]+>[^<>]*<\/p>\s*|\.)<\/div>/g,x).replace(/<p [^>]*?data-wpview-text="([^"]+)"[^>]*>[\s\S]*?<\/p>/g,x)}function E(){var t,n;e.isHidden()||(t=e.getContent({format:"raw"}),n=l.default.setMarkers(t),t!==n&&e.setContent(n,{format:"raw",isSettingMarkers:!0}))}function w(e){M("div.wpview-wrap, p.wpview-marker",e).each(function(e,t){t.innerHTML="."})}function j(e){return e<=47&&e!==A.SPACEBAR&&e!==A.ENTER&&e!==A.DELETE&&e!==A.BACKSPACE&&(e<37||e>40)||e>=224||e>=144&&e<=150||e>=91&&e<=93||e>=112&&e<=135}var S,T,P,k,I,N,R,D,M=e.$,O=c.Env,A=c.util.VK,L=c.dom.TreeWalker,F=!1,B=!0,z=/iPad|iPod|iPhone/.test(navigator.userAgent);e.on("BeforeAddUndo",function(e){e.level.content&&(e.level.content=C(e.level.content))}),e.on("BeforeSetContent",function(t){var n;if(t.selection||M(".wpview-wrap .wpview-body").each(function(e,t){p.unmountComponentAtNode(t)}),t.content){if(!t.load&&(S&&v(S),n=e.selection.getNode(),n&&n!==e.getBody()&&/^\s*https?:\/\/\S+\s*$/i.test(t.content))){if(n=e.dom.getParent(n,"p"),!n||!/^[\s\uFEFF\u00A0]*$/.test(M(n).text()||""))return;n.innerHTML=""}t.isSettingMarkers||(t.content=l.default.setMarkers(t.content))}}),e.on("pastePreProcess",function(e){var t=e.content;if(t){t=c.trim(t.replace(/<[^>]+>/g,""));var n=/(https?:\/\/[^<]*)(\.jpg|\.jpeg|\.gif|\.png)\??.*$/i.exec(t);n?e.content='<img src="'+n[1]+n[2]+'" style="max-width:100%;" />':/^https?:\/\/\S+$/i.test(t)&&(e.content=t)}}),e.on("SetContent",function(){o()}),e.on("click",function(t){var n,o,r,s=t.clientX,a=t.clientY,l=e.getBody(),d=l.getBoundingClientRect(),u=l.firstChild,p=l.lastChild;u&&p&&(n=u.getBoundingClientRect(),o=p.getBoundingClientRect(),a<n.top&&(r=i(u))?(g(!0,r),t.preventDefault()):a>o.bottom&&(r=i(p))?(g(!1,r),t.preventDefault()):(s<d.left||s>d.right)&&c.each(e.dom.select(".wpview-wrap"),function(e){var n=e.getBoundingClientRect();return!(a<n.top)&&(a>=n.top&&a<=n.bottom?(s<d.left?(g(!0,e),t.preventDefault()):s>d.right&&(g(!1,e),t.preventDefault()),!1):void 0)}))}),e.on("init",function(){var t=!1,n=e.selection,o=window.MutationObserver||window.WebKitMutationObserver;e.on("BeforeSetContent",function(){var t,o,r=i(n.getNode());r&&(!r.nextSibling||i(r.nextSibling)?(o=e.getDoc().createTextNode(""),e.dom.insertAfter(o,r)):(t=new L(r.nextSibling,r.nextSibling),o=t.next()),n.select(o),n.collapse(!0))}),e.dom.bind(e.getDoc(),"touchmove",function(){t=!0}),e.on("mousedown mouseup click touchend",function(e){var n=i(e.target);return B=!1,n?(e.stopImmediatePropagation(),e.preventDefault(),"touchend"===e.type&&t?t=!1:b(n),!1):("touchend"!==e.type&&"mousedown"!==e.type||_(),void("touchend"===e.type&&t&&(t=!1)))},!0),o&&new o(function(){e.fire("wp-body-class-change")}).observe(e.getBody(),{attributes:!0,attributeFilter:["class"]})}),e.on("preinit show",function(){l.default.emitters.forEach(function(t){t.addListener("change",E,e.getParam("redux_store"))}),E()}),e.on("hide remove",function(){l.default.emitters.forEach(function(e){e.removeListener("change",E)})}),e.on("PreProcess",function(e){w(e.node)},!0),e.on("hide",function(){_(),w()}),e.on("GetContent",function(e){"raw"===e.format&&e.content&&!e.selection&&(e.content=C(e.content))}),e.on("PostProcess",function(e){e.content&&(e.content=e.content.replace(/<div [^>]*?data-wpview-text="([^"]+)"[^>]*>[\s\S]*?<\/div>/g,x).replace(/<p [^>]*?data-wpview-text="([^"]+)"[^>]*>[\s\S]*?<\/p>/g,x))}),e.on("keydown",function(t){var n,o,r,s,a,l,d,u=t.keyCode,c=e.dom,p=e.selection;if(S){if((t.metaKey||t.ctrlKey)&&u!==A.BACKSPACE&&86!==u||u>=112&&u<=123)return void((t.metaKey||t.ctrlKey)&&88===u&&(F=S));if(o=i(p.getNode()),o!==S)return void _();u===A.LEFT?(g(!0,o),t.preventDefault()):u===A.UP?(o.previousSibling?i(o.previousSibling)?g(!0,o.previousSibling):(_(),p.select(o.previousSibling,!0),p.collapse()):g(!0,o),t.preventDefault()):u===A.RIGHT?(g(!1,o),t.preventDefault()):u===A.DOWN?(o.nextSibling?i(o.nextSibling)?g(!1,o.nextSibling):(_(),p.setCursorLocation(o.nextSibling,0)):g(!1,o),t.preventDefault()):j(u)||(v(S),u!==A.ENTER&&u!==A.DELETE&&u!==A.BACKSPACE||t.preventDefault());
}else{if(t.metaKey||t.ctrlKey||u>=112&&u<=123)return;if(n=p.getNode(),P=n,o=i(n),p.isCollapsed()||(a=p.getRng(),(o=i(a.endContainer))?(l=a.cloneRange(),p.select(o.previousSibling,!0),p.collapse(),d=p.getRng(),l.setEnd(d.endContainer,d.endOffset),p.setRng(l)):(o=i(a.startContainer))&&(l=a.cloneRange(),l.setStart(o.nextSibling,0),p.setRng(l))),!o)return void(t.keyCode===A.BACKSPACE&&(e.dom.isEmpty(n)?(o=i(n.previousSibling))&&(g(!1,o),e.dom.remove(n),t.preventDefault()):(a=p.getRng())&&0===a.startOffset&&0===a.endOffset&&(o=i(n.previousSibling))&&(g(!1,o),t.preventDefault())));if(!(r=c.hasClass(o,"wpview-selection-before"))&&!(s=c.hasClass(o,"wpview-selection-after")))return;if(j(u))return;s&&u===A.UP||r&&u===A.BACKSPACE?(o.previousSibling?i(o.previousSibling)?g(!1,o.previousSibling):c.isEmpty(o.previousSibling)&&u===A.BACKSPACE?c.remove(o.previousSibling):(p.select(o.previousSibling,!0),p.collapse()):g(!0,o),t.preventDefault()):!s||u!==A.DOWN&&u!==A.RIGHT?!r||u!==A.UP&&u!==A.LEFT?r&&u===A.DOWN?(o.nextSibling?i(o.nextSibling)?g(!0,o.nextSibling):p.setCursorLocation(o.nextSibling,0):g(!1,o),t.preventDefault()):s&&u===A.LEFT||r&&u===A.RIGHT?(b(o),t.preventDefault()):s&&u===A.BACKSPACE?(v(o),t.preventDefault()):s?y(o):r&&y(o,!0,u):(o.previousSibling&&(i(o.previousSibling)?g(u===A.UP,o.previousSibling):(p.select(o.previousSibling,!0),p.collapse())),t.preventDefault()):(o.nextSibling&&(i(o.nextSibling)?g(u===A.RIGHT,o.nextSibling):p.setCursorLocation(o.nextSibling,0)),t.preventDefault()),u===A.ENTER&&t.preventDefault()}}),e.on("keyup",function(){F&&(v(F),F=!1)}),e.on("focus",function(){var t;I=!0,e.dom.addClass(e.getBody(),"has-focus"),B&&(t=i(e.getBody().firstChild))&&g(!0,t),B=!1}),e.on("blur",function(){I=!1,e.dom.removeClass(e.getBody(),"has-focus")}),e.on("NodeChange",function(t){var n=e.dom,o=e.dom.select(".wpview-wrap"),r=t.element.className,s=i(t.element),l=P;if(P=!1,clearInterval(T),c.each(o,function(e){e.className&&(e.className=e.className.replace(/ ?\bwpview-(?:selection-before|selection-after|cursor-hide)\b/g,""))}),I&&s)if("wpview-selection-before"!==r&&"wpview-selection-after"!==r||!e.selection.isCollapsed())a(t.element,"wpview-clipboard")||k||(_(),k++,g(!0,s));else{if(k=0,_(),l===s.previousSibling)return void g(!0,s);if(l===s.nextSibling)return void g(!1,s);n.addClass(s,r),T=setInterval(function(){n.hasClass(s,"wpview-cursor-hide")?n.removeClass(s,"wpview-cursor-hide"):n.addClass(s,"wpview-cursor-hide")},500)}}),e.on("BeforeExecCommand",function(){var t,n=e.selection.getNode();n&&((R="wpview-selection-before"===n.className)||"wpview-selection-after"===n.className)&&(t=i(n))&&(y(t,R),N=t)}),e.on("ExecCommand",function(){var t,n;S&&(t=S,_(),b(t)),N&&(n=N[R?"previousSibling":"nextSibling"],n&&"P"===n.nodeName&&e.dom.isEmpty(n)&&(e.dom.remove(n),g(R,N)),N=!1)}),e.on("ResolveName",function(t){e.dom.hasClass(t.target,"wpview-wrap")?(t.name=e.dom.getAttrib(t.target,"data-wpview-type")||"wpview",t.stopPropagation()):i(t.target)&&(t.preventDefault(),t.stopPropagation())}),e.addButton("wp_view_edit",{tooltip:m.translate("Edit",{context:"verb"}),icon:"dashicon dashicons-edit",onPostRender:function(){e.on("wptoolbar",function(){var t;S&&(t=e.dom.getAttrib(S,"data-wpview-type"),this.visible(l.default.isEditable(t)))}.bind(this))},onClick:function(){var t;S&&(t=e.dom.getAttrib(S,"data-wpview-type"),l.default.edit(t,e,r(S)))}}),e.addButton("wp_view_remove",{tooltip:m.translate("Remove"),icon:"dashicon dashicons-no",onClick:function(){S&&v(S)}}),e.once("preinit",function(){D=e.wp._createToolbar(["wp_view_edit","wp_view_remove"])}),e.on("wptoolbar",function(e){S&&(e.element=S,e.toolbar=D)})}var i=n("./node_modules/lodash/debounce.js"),s=o(i),a=n("./client/components/tinymce/plugins/wpcom-view/views.js"),l=o(a),d=n("./client/lib/react-helpers/index.js"),u=n("./client/state/ui/selectors.js"),c=n("./node_modules/tinymce/tinymce.js"),p=n("./node_modules/react-dom/index.js"),f=n("./node_modules/react/react.js"),m=n("./node_modules/i18n-calypso/index.js");e.exports=function(){c.PluginManager.add("wpcom/view",r)}},"./client/components/tinymce/plugins/wpcom-view/resizable-view.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/helpers/extends.js"),i=o(r),s=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/createClass.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),f=o(p),m=n("./node_modules/babel-runtime/helpers/inherits.js"),h=o(m);t.default=function(e){var t,n,o=e.displayName||e.name||"";return n=t=function(t){function n(){(0,d.default)(this,n);var e=(0,f.default)(this,(n.__proto__||(0,a.default)(n)).apply(this,arguments));return e.boundSetWrapperState=e.setWrapperState.bind(e),e.state={wrapper:null},e}return(0,h.default)(n,t),(0,c.default)(n,[{key:"setWrapperState",value:function(e){e&&(this.setState({wrapper:e}),this.disconnectObserver(),this.observer=new MutationObserver(this.props.onResize),this.observer.observe(e,{attributes:!0,childList:!0,subtree:!0}))}},{key:"componentWillUnmount",value:function(){this.disconnectObserver()}},{key:"disconnectObserver",value:function(){this.observer&&this.observer.disconnect()}},{key:"render",value:function(){var t=void 0;return this.state.wrapper&&(t={width:this.state.wrapper.clientWidth}),y.default.createElement("div",{ref:this.boundSetWrapperState},y.default.createElement(e,(0,i.default)({},this.props,t)))}}]),n}(b.default),t.displayName="ResizableView("+o+")",t.propTypes={onResize:g.PropTypes.func},t.defaultProps={onResize:function(){}},n};var g=n("./node_modules/react/react.js"),y=o(g),v=n("./node_modules/react-pure-render/component.js"),b=o(v);e.exports=t.default},"./client/components/tinymce/plugins/wpcom-view/views.js":function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/lodash/values.js"),s=r(i),a=n("./node_modules/lodash/mapValues.js"),l=r(a),d=n("./node_modules/lodash/map.js"),u=r(d),c=n("./node_modules/lodash/forEach.js"),p=r(c),f=n("./node_modules/events/events.js"),m=r(f),h=n("./client/components/tinymce/plugins/wpcom-view/gallery-view.jsx"),g=r(h),y=n("./client/components/tinymce/plugins/wpcom-view/views/embed/index.js"),v=r(y),b=n("./client/components/tinymce/plugins/wpcom-view/views/contact-form/index.jsx"),_=r(b),x=n("./client/components/tinymce/plugins/wpcom-view/views/video/index.js"),C=o(x),E=n("./client/components/tinymce/plugins/wpcom-view/views/simple-payments/index.jsx"),w=r(E),j=n("./client/config/index.js"),S={gallery:g.default,embed:new v.default,contactForm:_.default,video:C};(0,j.isEnabled)("simple-payments")&&(S.simplePayments=w.default);var T=(0,l.default)(S,function(e){return"function"==typeof e.getComponent?e.getComponent():e}),P=(0,s.default)(S).filter(function(e){return e instanceof m.default});t.default={setMarkers:function(e){var t,n=[{content:e}];return(0,p.default)(S,function(e,o){t=n.slice(),n=[],(0,p.default)(t,function(t){var r,i=t.content;if(t.processed)return void n.push(t);for(;i&&(r=e.match(i));)r.index&&n.push({content:i.substring(0,r.index)}),n.push({content:'<p class="wpview-marker" data-wpview-text="'+e.serialize(r.content,r.options)+'" data-wpview-type="'+o+'">.</p>',processed:!0}),i=i.slice(r.index+r.content.length);i&&n.push({content:i})})}),e=(0,u.default)(n,"content").join(""),e.replace(/<p>\s*<p data-wpview-marker=/g,"<p data-wpview-marker=").replace(/<\/p>\s*<\/p>/g,"</p>")},isEditable:function(e){return!(!S[e]||!S[e].edit)},edit:function(e,t,n){this.isEditable(e)&&S[e].edit(t,n)},components:T,emitters:P},e.exports=t.default},"./client/components/tinymce/plugins/wpcom-view/views/contact-form/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/react/react.js"),i=o(r),s=n("./client/components/tinymce/plugins/contact-form/shortcode-utils.js"),a=n("./client/lib/shortcode/index.js"),l=o(a),d=n("./client/components/tinymce/plugins/wpcom-view/views/contact-form/preview-fields.jsx"),u=o(d);t.default=i.default.createClass({displayName:"contact-form",statics:{match:function e(t){var e=l.default.next("contact-form",t);if(e)return{index:e.index,content:e.content,options:{shortcode:e.shortcode}}},serialize:function(e){return encodeURIComponent(e)},edit:function(e,t){e.execCommand("wpcomContactForm",t)}},render:function(){var e=(0,s.deserialize)(this.props.content),t=e.fields;return i.default.createElement("div",{className:"wpview-content wpview-type-contact-form"},[].concat(t).map(u.default),i.default.createElement("button",{disabled:!0},this.translate("Submit")))}}),e.exports=t.default},"./client/components/tinymce/plugins/wpcom-view/views/contact-form/preview-fields.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return y.hasOwnProperty(e.type)?y[e.type].apply(this,arguments):null};var r=n("./node_modules/react/react.js"),i=o(r),s=n("./client/components/tinymce/plugins/wpcom-view/views/contact-form/preview-fieldset.jsx"),a=o(s),l=n("./client/components/tinymce/plugins/wpcom-view/views/contact-form/preview-legend.jsx"),d=o(l),u=n("./client/components/tinymce/plugins/wpcom-view/views/contact-form/preview-required.jsx"),c=o(u),p=function(e,t){return i.default.createElement(a.default,{key:"contact-form-field-"+t},i.default.createElement(d.default,e),i.default.createElement("input",{type:"text"}))},f=function(e,t){return i.default.createElement(a.default,{key:"contact-form-field-"+t},i.default.createElement(d.default,e),i.default.createElement("textarea",null))},m=function(e,t){return i.default.createElement(a.default,{key:"contact-form-field-"+t},i.default.createElement("label",null,i.default.createElement("input",{type:"checkbox"}),e.label,i.default.createElement(c.default,{required:e.required})))},h=function(e,t){return i.default.createElement(a.default,{key:"contact-form-field-"+t},i.default.createElement(d.default,e),i.default.createElement("select",null,[].concat(e.options.split(",")).map(function(e,t){return i.default.createElement("option",{key:"contact-form-select-option-"+t},e)})))},g=function(e,t){return i.default.createElement(a.default,{key:"contact-form-field-"+t},i.default.createElement(d.default,e),[].concat(e.options.split(",")).map(function(e,t){return i.default.createElement("label",{key:"contact-form-radio-"+t},i.default.createElement("input",{type:"radio"}),i.default.createElement("span",null,e))}))},y={name:p,email:p,url:p,text:p,textarea:f,checkbox:m,select:h,radio:g};e.exports=t.default},"./client/components/tinymce/plugins/wpcom-view/views/contact-form/preview-fieldset.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/helpers/extends.js"),i=o(r),s=n("./node_modules/lodash/omit.js"),a=o(s),l=n("./node_modules/react/react.js"),d=o(l);t.default=d.default.createClass({displayName:"ContactFormViewPreviewFieldset",render:function(){return d.default.createElement("fieldset",(0,i.default)({},(0,a.default)(this.props,"className"),{className:"wpview-type-contact-form-field"}),this.props.children)}}),e.exports=t.default},"./client/components/tinymce/plugins/wpcom-view/views/contact-form/preview-legend.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/react/react.js"),i=o(r),s=n("./client/components/tinymce/plugins/wpcom-view/views/contact-form/preview-required.jsx"),a=o(s);t.default=i.default.createClass({displayName:"preview-legend",render:function(){return i.default.createElement("legend",null,this.props.label,i.default.createElement(a.default,this.props))}}),e.exports=t.default},"./client/components/tinymce/plugins/wpcom-view/views/contact-form/preview-required.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/react/react.js"),i=o(r);t.default=i.default.createClass({displayName:"ContactFormViewPreviewRequired",render:function(){return this.props.required?i.default.createElement("em",null," (",this.translate("required"),")"):null}}),e.exports=t.default},"./client/components/tinymce/plugins/wpcom-view/views/embed/index.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/helpers/typeof.js"),i=o(r),s=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/createClass.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),f=o(p),m=n("./node_modules/babel-runtime/helpers/get.js"),h=o(m),g=n("./node_modules/babel-runtime/helpers/inherits.js"),y=o(g),v=n("./node_modules/lodash/uniqueId.js"),b=o(v),_=n("./node_modules/lodash/defer.js"),x=o(_),C=n("./node_modules/events/events.js"),E=o(C),w=n("./client/lib/embeds/list-store.js"),j=o(w),S=n("./client/lib/embeds/store.js"),T=o(S),P=n("./client/lib/embeds/actions.js"),k=o(P),I=n("./client/components/tinymce/plugins/wpcom-view/views/embed/view.jsx"),N=o(I),R=n("./client/state/ui/selectors.js"),D=n("./client/state/action-types.js"),M=function(e){function t(){(0,d.default)(this,t);var e=(0,f.default)(this,(t.__proto__||(0,a.default)(t)).call(this));return e.sitesListener=e.updateSite.bind(e),e}return(0,y.default)(t,e),(0,c.default)(t,[{key:"onChange",value:function(){this.emit("change"),this.fetchSiteEmbeds()}},{key:"updateSite",value:function(e){var t=e||(0,R.getSelectedSiteId)(this.store.getState());this.hasOwnProperty("siteId")?this.siteId!==t&&(this.siteId=t,this.onChange()):(this.siteId=t,this.fetchSiteEmbeds())}},{key:"addListener",value:function(e,n,o){(0,h.default)(t.prototype.__proto__||(0,a.default)(t.prototype),"addListener",this).call(this,e,n),"change"===e&&1===this.listeners(e).length&&(this.store=o,this.selectedSiteSubscriberId=(0,b.default)(),o.dispatch({type:D.SELECTED_SITE_SUBSCRIBE,listener:this.sitesListener}),this.embedsListListener=j.default.addListener(this.onChange.bind(this)),this.embedsListener=T.default.addListener(this.onChange.bind(this)),this.updateSite())}},{key:"removeListener",value:function(e,n){(0,h.default)(t.prototype.__proto__||(0,a.default)(t.prototype),"removeListener",this).call(this,e,n),"change"!==e||this.listeners(e).length||(this.store.dispatch({type:D.SELECTED_SITE_UNSUBSCRIBE,listener:this.sitesListener}),this.embedsListListener&&this.embedsListListener.remove(),this.embedsListener&&this.embedsListener.remove())}},{key:"fetchSiteEmbeds",value:function(){this.siteId&&!j.default.get(this.siteId)&&k.default.fetch(this.siteId)}},{key:"fetchEmbed",value:function(e){this.siteId&&!T.default.get(e).status&&k.default.fetch(this.siteId,e)}},{key:"match",value:function(e){var t=this;if(this.siteId){var n=j.default.get(this.siteId);if(n&&"LOADED"===n.status)for(var o=/(^|<p>)(https?:\/\/[^\s"]+?)(<\/p>\s*|$)/gi,r=void 0,s=function(){var e=r[2],o=n.embeds.some(function(t){return t.test(e)});if(!o)return"continue";var i=T.default.get(e);return i.body?{v:{index:r.index+r[1].length,content:e}}:((0,x.default)(function(){return t.fetchEmbed(e)}),"continue")};r=o.exec(e);){var a=s();switch(a){case"continue":continue;default:if("object"===("undefined"==typeof a?"undefined":(0,i.default)(a)))return a.v}}}}},{key:"serialize",value:function(e){return encodeURIComponent(e)}},{key:"getComponent",value:function(){return N.default}}]),t}(E.default);t.default=M,e.exports=t.default},"./client/components/tinymce/plugins/wpcom-view/views/embed/view.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=o(p),m=n("./node_modules/lodash/pick.js"),h=o(m),g=n("./node_modules/react-dom/index.js"),y=o(g),v=n("./node_modules/react/react.js"),b=o(v),_=n("./node_modules/flux/utils.js"),x=n("./client/components/resizable-iframe/index.jsx"),C=o(x),E=n("./client/lib/embeds/store.js"),w=o(E),j=n("./client/lib/embed-frame-markup/index.jsx"),S=o(j),T=function(e){function t(){return(0,a.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,d.default)(t,[{key:"componentDidMount",value:function(){this.setState({wrapper:this.refs.view},this.setHtml)}},{key:"componentDidUpdate",value:function(e,t){this.state.body!==t.body&&this.setHtml(),this.constrainEmbedDimensions()}},{key:"constrainEmbedDimensions",value:function(){if(this.refs.iframe){var e=y.default.findDOMNode(this.refs.view),t=y.default.findDOMNode(this.refs.iframe);if(t.contentDocument){var n=t.contentDocument.querySelector("iframe");if(n&&n.width){var o=parseInt(n.width,10);if(!(o<=e.clientWidth)&&(n.style.width=e.clientWidth+"px",n.height)){var r=parseInt(n.height,10)/o;n.style.height=Math.round(e.clientWidth*r)+"px"}}}}}},{key:"setHtml",value:function(){if(this.state.body&&this.refs.iframe){var e=y.default.findDOMNode(this.refs.iframe);if(e.contentDocument){var t=(0,S.default)((0,h.default)(this.state,"body","scripts","styles"));e.contentDocument.open(),e.contentDocument.write(t),e.contentDocument.body.style.width="100%",e.contentDocument.body.style.overflow="hidden",e.contentDocument.close()}}}},{key:"renderFrame",value:function(){if(this.state.wrapper)return b.default.createElement(C.default,{ref:"iframe",onResize:this.props.onResize,frameBorder:"0",seamless:!0,width:"100%"})}},{key:"render",value:function(){return b.default.createElement("div",{ref:"view",className:"wpview-content wpview-type-embed"},this.renderFrame())}}],[{key:"getStores",value:function(){return[w.default]}},{key:"calculateState",value:function(e,t){return w.default.get(t.content)}}]),t}(v.Component);T.propTypes={siteId:v.PropTypes.number,content:v.PropTypes.string,onResize:v.PropTypes.func},T.defaultProps={onResize:function(){}};var P=_.Container.create(T,{withProps:!0});t.default=P,e.exports=t.default},"./client/components/tinymce/plugins/wpcom-view/views/simple-payments/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=o(p),m=n("./node_modules/lodash/get.js"),h=o(m),g=n("./node_modules/react/react.js"),y=o(g),v=n("./node_modules/react-redux/es/index.js"),b=n("./node_modules/i18n-calypso/index.js"),_=n("./client/lib/shortcode/index.js"),x=o(_),C=n("./client/components/tinymce/plugins/simple-payments/shortcode-utils.js"),E=n("./client/state/selectors/get-simple-payments.js"),w=o(E),j=n("./client/state/ui/selectors.js"),S=n("./client/lib/format-currency/index.js"),T=o(S),P=n("./client/components/data/query-simple-payments/index.js"),k=o(P),I=n("./client/components/data/query-media/index.jsx"),N=o(I),R=n("./client/state/selectors/get-media-item.js"),D=o(R),M=function(e){function t(){return(0,a.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){var e=this.props,t=e.translate,n=e.productId,o=e.product,r=e.siteId;if(!o)return y.default.createElement(k.default,{siteId:r,productId:n});var i=this.props.productImage,s=o.title,a=o.description,l=o.price,d=o.currency,u=o.multiple,c=o.featuredImageId;return y.default.createElement("div",{className:"wpview-content wpview-type-simple-payments"},c&&y.default.createElement(N.default,{siteId:r,mediaId:c}),y.default.createElement("div",{className:"wpview-type-simple-payments__wrapper"},i&&y.default.createElement("div",{className:"wpview-type-simple-payments__image-part"},y.default.createElement("figure",{className:"wpview-type-simple-payments__image-figure"},y.default.createElement("img",{className:"wpview-type-simple-payments__image",src:i.URL}))),y.default.createElement("div",{className:"wpview-type-simple-payments__text-part"},y.default.createElement("div",{className:"wpview-type-simple-payments__title"},s),y.default.createElement("div",{className:"wpview-type-simple-payments__description"},a),y.default.createElement("div",{className:"wpview-type-simple-payments__price-part"},(0,T.default)(l,d)),y.default.createElement("div",{className:"wpview-type-simple-payments__pay-part"},u&&y.default.createElement("div",{className:"wpview-type-simple-payments__pay-quantity"},y.default.createElement("input",{className:"wpview-type-simple-payments__pay-quantity-input",type:"text",value:"1",readOnly:!0})),y.default.createElement("div",{className:"wpview-type-simple-payments__pay-paypal-button-wrapper"},y.default.createElement("div",{className:"wpview-type-simple-payments__pay-paypal-button-content"},y.default.createElement("span",{className:"wpview-type-simple-payments__pay-paypal-button-text"},t("Pay with")),y.default.createElement("span",{className:"wpview-type-simple-payments_paypal-logo"})))))))}}]),t}(g.Component);M=(0,v.connect)(function(e,t){var n=t.content,o=(0,C.deserialize)(n),r=o.id,i=void 0===r?null:r,s=(0,j.getSelectedSiteId)(e),a=(0,w.default)(e,s,i);return{shortcodeData:o,productId:i,siteId:s,product:a,productImage:(0,D.default)(e,s,(0,h.default)(a,"featuredImageId"))}})((0,b.localize)(M)),M.match=function(e){var t=x.default.next("simple-payment",e);if(t)return{index:t.index,content:t.content,options:{shortcode:t.shortcode}}},M.serialize=function(e){return encodeURIComponent(e)},M.edit=function(e,t){e.execCommand("simplePaymentsButton",t)},t.default=M,e.exports=t.default},"./client/components/tinymce/plugins/wpcom-view/views/video/index.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=l.default.next("wpvideo",e);if(t)return{index:t.index,content:t.content,options:{shortcode:t.shortcode}}}function i(e){return encodeURIComponent(e)}function s(){return u.default}Object.defineProperty(t,"__esModule",{value:!0}),t.match=r,t.serialize=i,t.getComponent=s;var a=n("./client/lib/shortcode/index.js"),l=o(a),d=n("./client/components/tinymce/plugins/wpcom-view/views/video/view.jsx"),u=o(d)},"./client/components/tinymce/plugins/wpcom-view/views/video/view.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=e.siteId,n=e.content,o=e.width;if(!t||!o)return null;var r=(0,f.stringify)((0,s.default)({attrs:{named:{w:o}}},(0,f.parse)(n)));return l.default.createElement(h.default,{siteId:t,width:o},r)}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/lodash/merge.js"),s=o(i),a=n("./node_modules/react/react.js"),l=o(a),d=n("./node_modules/react-redux/es/index.js"),u=n("./client/components/tinymce/plugins/wpcom-view/resizable-view.jsx"),c=o(u),p=n("./client/state/ui/selectors.js"),f=n("./client/lib/shortcode/index.js"),m=n("./client/components/shortcode/index.jsx"),h=o(m);r.propTypes={siteId:a.PropTypes.number,content:a.PropTypes.string,width:a.PropTypes.number},t.default=(0,d.connect)(function(e){return{siteId:(0,p.getSelectedSiteId)(e)}})((0,c.default)(r)),e.exports=t.default},"./client/components/tinymce/plugins/wpcom/plugin.js":function(e,t,n){"use strict";function o(e){var t,n=i.DOM,o=i.each;e.on("focus",function(){window.wpActiveEditor=e.id}),e.on("BeforeSetContent",function(e){var t;e.content&&(e.content.indexOf("<!--more")!==-1&&(t=s("Read more…"),e.content=e.content.replace(/<!--more(.*?)-->/g,function(e,n){return'<img src="'+i.Env.transparentSrc+'" data-wp-more="more" data-wp-more-text="'+n+'" class="wp-more-tag mce-wp-more" title="'+t+'" data-mce-resize="false" data-mce-placeholder="1" />'})),e.content.indexOf("<!--nextpage-->")!==-1&&(t=s("Page break"),e.content=e.content.replace(/<!--nextpage-->/g,'<img src="'+i.Env.transparentSrc+'" data-wp-more="nextpage" class="wp-more-tag mce-wp-nextpage" title="'+t+'" data-mce-resize="false" data-mce-placeholder="1" />')),e.load&&"raw"!==e.format&&(e.content=a.wpautop(e.content)))}),e.on("PostProcess",function(e){e.get&&(e.content=e.content.replace(/<img[^>]+>/g,function(e){var t,n="";return e.indexOf('data-wp-more="more"')!==-1?((t=e.match(/data-wp-more-text="([^"]+)"/))&&(n=t[1]),e="<!--more"+n+"-->"):e.indexOf('data-wp-more="nextpage"')!==-1&&(e="<!--nextpage-->"),e}))}),e.on("ResolveName",function(t){var n;"IMG"===t.target.nodeName&&(n=e.dom.getAttrib(t.target,"data-wp-more"))&&(t.name=n)}),e.addCommand("WP_More",function(t){var n,o,r,a="wp-more-tag",l=e.dom,d=e.selection.getNode();return t=t||"more",a+=" mce-wp-"+t,r=s("more"===t?"Read more…":"Next page"),o='<img src="'+i.Env.transparentSrc+'" title="'+r+'" class="'+a+'" data-wp-more="'+t+'" data-mce-resize="false" data-mce-placeholder="1" />',"BODY"===d.nodeName||"P"===d.nodeName&&"BODY"===d.parentNode.nodeName?void e.insertContent(o):(n=l.getParent(d,function(e){return!(!e.parentNode||"BODY"!==e.parentNode.nodeName)},e.getBody()),void(n&&("P"===n.nodeName?n.appendChild(l.create("p",null,o).firstChild):l.insertAfter(l.create("p",null,o),n),e.nodeChanged())))}),e.addCommand("WP_Code",function(){e.formatter.toggle("code")}),e.addCommand("WP_Page",function(){e.execCommand("WP_More","nextpage")}),e.addButton("wp_more",{tooltip:s("Insert Read More tag"),onclick:function(){e.execCommand("WP_More","more")}}),e.addButton("wp_page",{tooltip:s("Page break"),onclick:function(){e.execCommand("WP_More","nextpage")}}),e.addButton("wp_help",{tooltip:s("Keyboard Shortcuts"),cmd:"WP_Help"}),e.addButton("wp_charmap",{icon:"charmap",tooltip:s("Special Characters"),cmd:"Wpcom_CharMap"}),e.addButton("wp_code",{tooltip:s("Code"),cmd:"WP_Code",stateSelector:"code"}),e.addMenuItem("wp_more",{text:s("Insert Read More tag"),icon:"wp_more",context:"insert",onclick:function(){e.execCommand("WP_More","more")}}),e.addMenuItem("wp_page",{text:s("Page break"),icon:"wp_page",context:"insert",onclick:function(){e.execCommand("WP_More","nextpage")}}),e.on("BeforeExecCommand",function(n){!i.Env.webkit||"InsertUnorderedList"!==n.command&&"InsertOrderedList"!==n.command||(t||(t=e.dom.create("style",{type:"text/css"},"#tinymce,#tinymce span,#tinymce li,#tinymce li>span,#tinymce p,#tinymce p>span{font:medium sans-serif;color:#000;line-height:normal;}")),e.getDoc().head.appendChild(t))}),e.on("ExecCommand",function(n){i.Env.webkit&&t&&("InsertUnorderedList"===n.command||"InsertOrderedList"===n.command)&&e.dom.remove(t)}),e.on("init",function(){var t=i.Env,n=["mceContentBody"],r=e.getDoc(),s=e.dom;i.Env.iOS&&s.addClass(r.documentElement,"ios"),"rtl"===e.getParam("directionality")&&(n.push("rtl"),s.setAttrib(r.documentElement,"dir","rtl")),t.ie?9===parseInt(t.ie,10)?n.push("ie9"):8===parseInt(t.ie,10)?n.push("ie8"):t.ie<8&&n.push("ie7"):t.webkit&&n.push("webkit"),n.push("wp-editor"),o(n,function(e){e&&s.addClass(r.body,e)}),e.on("BeforeSetContent",function(e){e.content&&(e.content=e.content.replace(/<p>\s*<(p|div|ul|ol|dl|table|blockquote|h[1-6]|fieldset|pre)( [^>]*)?>/gi,"<$1$2>").replace(/<\/(p|div|ul|ol|dl|table|blockquote|h[1-6]|fieldset|pre)>\s*<\/p>/gi,"</$1>"))}),e.getParam("wp_paste_filters",!0)&&(e.on("PastePreProcess",function(e){e.content=e.content.replace(/<br class="?Apple-interchange-newline"?>/gi,""),i.Env.webkit||(e.content=e.content.replace(/(<[^>]+) style="[^"]*"([^>]*>)/gi,"$1$2"),e.content=e.content.replace(/(<[^>]+) data-mce-style=([^>]+>)/gi,"$1 style=$2"))}),e.on("PastePostProcess",function(e){o(s.select("p",e.node),function(e){s.isEmpty(e)&&s.remove(e)})}))}),e.on("SaveContent",function(t){return!e.inline&&e.isHidden()?void(t.content=t.element.value):(t.content=t.content.replace(/<p>(?:<br ?\/?>|\u00a0|\uFEFF| )*<\/p>/g,"<p>&nbsp;</p>"),void(t.content=a.removep(t.content)))}),e.on("BeforeSetContent",function(e){e.content&&(e.content=(0,r.removeEmptySpacesInParagraphs)(e.content))}),e.on("preInit",function(){e.schema.addValidElements("@[id|accesskey|class|dir|lang|style|tabindex|title|contenteditable|draggable|dropzone|hidden|spellcheck|translate],i,b"),i.Env.iOS&&(e.settings.height=300),o({c:"JustifyCenter",r:"JustifyRight",l:"JustifyLeft",j:"JustifyFull",q:"mceBlockQuote",u:"InsertUnorderedList",o:"InsertOrderedList",s:"unlink",m:"WP_Medialib",t:"WP_More",d:"Strikethrough",h:"WP_Help",p:"WP_Page",x:"WP_Code"},function(t,n){e.shortcuts.add("access+"+n,"",t)})}),e.on("preinit",function(){function t(t,r){function i(){if(!a)return this;var e,t,o=window.pageXOffset||document.documentElement.scrollLeft,r=window.pageYOffset||document.documentElement.scrollTop,i=window.innerWidth,s=window.innerHeight,l=g?g.getBoundingClientRect():{top:0,right:i,bottom:s,left:0,width:i,height:s},p=this.getEl(),f=p.offsetWidth,m=p.offsetHeight,y=a.getBoundingClientRect(),v=(y.left+y.right)/2,b=5,_=8,x=m+_+b,C=h?h.getBoundingClientRect().bottom:0,E=d?d.getBoundingClientRect().bottom:0,w=u?s-u.getBoundingClientRect().top:0,j=c?s-c.getBoundingClientRect().top:0,S=Math.max(0,C,E,l.top),T=Math.max(0,w,j,s-l.bottom),P=y.top+l.top-S,k=s-l.top-y.bottom-T,I=s-S-T,N="";return P>=I||k>=I?this.hide():(this.bottom?k>=x?(N=" mce-arrow-up",e=y.bottom+l.top+r):P>=x&&(N=" mce-arrow-down",e=y.top+l.top+r-m-_):P>=x?(N=" mce-arrow-down",e=y.top+l.top+r-m-_):k>=x&&I/2>y.bottom+l.top-S&&(N=" mce-arrow-up",e=y.bottom+l.top+r),"undefined"==typeof e&&(e=r+S+b),t=v-f/2+l.left+o,y.left<0||y.right>l.width?t=l.left+o+(l.width-f)/2:f>=i?(N+=" mce-arrow-full",t=0):t<0&&y.left+f>i||t+f>i&&y.right-f<0?t=(i-f)/2:t<l.left+o?(N+=" mce-arrow-left",t=y.left+l.left+o):t+f>l.width+l.left+o&&(N+=" mce-arrow-right",t=y.right-f+l.left+o),p.className=p.className.replace(/ ?mce-arrow-[\w]+/g,"")+N,n.setStyles(p,{left:t,top:e}),this)}var s,l,m=[];return o(t,function(t){function n(){var n=e.selection;"bullist"===o&&n.selectorChanged("ul > li",function(e,n){for(var o,r=n.parents.length;r--&&(o=n.parents[r].nodeName,"OL"!==o&&"UL"!==o););t.active(e&&"UL"===o)}),"numlist"===o&&n.selectorChanged("ol > li",function(e,n){for(var o,r=n.parents.length;r--&&(o=n.parents[r].nodeName,"OL"!==o&&"UL"!==o););t.active(e&&"OL"===o)}),t.settings.stateSelector&&n.selectorChanged(t.settings.stateSelector,function(e){t.active(e)},!0),t.settings.disabledStateSelector&&n.selectorChanged(t.settings.disabledStateSelector,function(e){t.disabled(e)})}var o;"|"===t?l=null:p.has(t)?(t={type:t},f.toolbar_items_size&&(t.size=f.toolbar_items_size),m.push(t),l=null):(l||(l={type:"buttongroup",items:[]},m.push(l)),e.buttons[t]&&(o=t,t=e.buttons[o],"function"==typeof t&&(t=t()),t.type=t.type||"button",f.toolbar_items_size&&(t.size=f.toolbar_items_size),t=p.create(t),l.items.push(t),e.initialized?n():e.on("init",n)))}),s=p.create({type:"panel",layout:"stack",classes:"toolbar-grp inline-toolbar-grp",ariaRoot:!0,ariaRemember:!0,items:[{type:"toolbar",layout:"flow",items:m}]}),s.bottom=r,s.on("show",function(){this.reposition();
}),s.on("keydown",function(t){27===t.keyCode&&(this.hide(),e.focus())}),e.on("remove",function(){s.remove()}),s.reposition=i,s.hide().renderTo(document.body),s}function r(e){s&&(s.hide(),"hide"===e.type||"blur"===e.type?s=!1:"resizewindow"!==e.type&&"scrollwindow"!==e.type||(clearTimeout(l),l=setTimeout(function(){s&&"function"==typeof s.show&&s.show()},250)))}var s,a,l,d,u,c,p=i.ui.Factory,f=e.settings,m=e.getContainer(),h=document.getElementById("wpadminbar"),g=document.getElementById(e.id+"_ifr");m&&(d=i.$(".mce-toolbar-grp",m)[0],u=i.$(".mce-statusbar",m)[0]),"content"===e.id&&(c=document.getElementById("post-status-info")),e.shortcuts.add("alt+119","",function(){var e;s&&(e=s.find("toolbar")[0],e&&e.focus(!0))}),e.on("nodechange",function(t){var n=e.selection.isCollapsed(),o={element:t.element,parents:t.parents,collapsed:n};e.fire("wptoolbar",o),a=o.selection||o.element,s&&s.hide(),o.toolbar?(s=o.toolbar,s.show()):s=!1}),e.on("focus",function(){s&&s.show()}),n.bind(window,"resize scroll",r),e.on("remove",function(){n.unbind(window,"resize scroll",r)}),e.on("blur hide",r),e.wp=e.wp||{},e.wp._createToolbar=t},!0)}var r=n("./client/components/tinymce/plugins/wpcom/wpcom-utils.js"),i=n("./node_modules/tinymce/tinymce.js"),s=n("./node_modules/i18n-calypso/index.js").translate,a=n("./client/lib/formatting/index.js");e.exports=function(){i.PluginManager.add("wpcom",o)}},"./client/components/tinymce/plugins/wpcom/wpcom-utils.js":function(e,t,n){"use strict";function o(e){return e.replace(/<p>([^<>]+)<\/p>/gi,function(e,t){return"&nbsp;"!==t&&/\S/.test(t)?e:"<p><br /></p>"})}Object.defineProperty(t,"__esModule",{value:!0}),t.removeEmptySpacesInParagraphs=o},"./client/components/tinymce/plugins/wpeditimage/plugin.js":function(e,t,n){"use strict";function o(e){function t(t){return!(!e.dom.getAttrib(t,"data-mce-placeholder")&&!e.dom.getAttrib(t,"data-mce-object"))}function n(t){return t.replace(/(?:<p>)?\[(?:wp_)?caption([^\]]+)\]([\s\S]+?)\[\/(?:wp_)?caption\](?:<\/p>)?/g,function(t,n,o){var i=void 0,s=void 0,a=void 0,l=void 0,d=void 0,u=void 0,c=r.trim;return i=n.match(/id=['"]([^'"]*)['"] ?/),i&&(n=n.replace(i[0],"")),s=n.match(/align=['"]([^'"]*)['"] ?/),s&&(n=n.replace(s[0],"")),a=n.match(/class=['"]([^'"]*)['"] ?/),a&&(n=n.replace(a[0],"")),u=n.match(/width=['"]([0-9]*)['"] ?/),u&&(n=n.replace(u[0],"")),o=c(o),d=o.match(/((?:<a [^>]+>)?<img [^>]+>(?:<\/a>)?)([\s\S]*)/i),d&&d[2]?(l=c(d[2]),d=c(d[1])):(l=c(n).replace(/caption=['"]/,"").replace(/['"]$/,""),d=o),i=i&&i[1]?i[1].replace(/[<>&]+/g,""):"",s=s&&s[1]?s[1]:"alignnone",a=a&&a[1]?" "+a[1].replace(/[<>&]+/g,""):"",!u&&d&&(u=d.match(/width=['"]([0-9]*)['"]/)),u&&u[1]&&(u=u[1]),u&&l?(u=parseInt(u,10),e.getParam("wpeditimage_html5_captions")||(u+=10),'<div class="mceTemp"><dl id="'+i+'" class="wp-caption '+s+a+'" style="width: '+u+'px"><dt class="wp-caption-dt">'+d+'</dt><dd class="wp-caption-dd">'+l+"</dd></dl></div>"):o})}function o(e){return e.replace(/<div (?:id="attachment_|class="mceTemp)[^>]*>([\s\S]+?)<\/div>/g,function(e,t){var n="";return t.indexOf("<img ")===-1?(n=t.match(/<dd [^>]+>([\s\S]+?)<\/dd>/i),n&&n[1]?"<p>"+n[1]+"</p>":""):(n=t.replace(/\s*<dl ([^>]+)>\s*<dt [^>]+>([\s\S]+?)<\/dt>\s*<dd [^>]+>([\s\S]*?)<\/dd>\s*<\/dl>\s*/gi,function(e,t,n,o){var r=void 0,i=void 0,s=void 0;s=n.match(/width="([0-9]*)"/),s=s&&s[1]?s[1]:"",i=t.match(/class="([^"]*)"/),i=i&&i[1]?i[1]:"";var a=i.match(/align[a-z]+/i)||"alignnone";return s&&o?(r=t.match(/id="([^"]*)"/),r=r&&r[1]?r[1]:"",i=i.replace(/wp-caption ?|align[a-z]+ ?/gi,""),i&&(i=' class="'+i+'"'),o=o.replace(/\r\n|\r/g,"\n").replace(/<[a-zA-Z0-9]+( [^<>]+)?>/g,function(e){return e.replace(/[\r\n\t]+/," ")}),o=o.replace(/\s*\n\s*/g,"<br />"),'[caption id="'+r+'" align="'+a+'" width="'+s+'"'+i+"]"+n+" "+o+"[/caption]"):("alignnone"!==a[0]&&(n=n.replace(/><img/,' class="'+a[0]+'"><img')),n)}),n.indexOf("[caption")===-1&&(n=t.replace(/[\s\S]*?((?:<a [^>]+>)?<img [^>]+>(?:<\/a>)?)(<p>[\s\S]*<\/p>)?[\s\S]*/gi,"<p>$1</p>$2")),n)})}function i(t){return!t||t.indexOf("<")===-1&&t.indexOf(">")===-1?t:(l||(l=new r.html.Serializer({},e.schema)),l.serialize(e.parser.parse(t,{forced_root_block:!1})))}function s(t){var n=void 0;"DIV"===t.nodeName&&e.dom.hasClass(t,"mceTemp")?n=t:"IMG"!==t.nodeName&&"DT"!==t.nodeName&&"A"!==t.nodeName||(n=e.dom.getParent(t,"div.mceTemp")),n?(n.nextSibling?e.selection.select(n.nextSibling):n.previousSibling?e.selection.select(n.previousSibling):e.selection.select(n.parentNode),e.selection.collapse(!0),e.dom.remove(n)):e.dom.remove(t),e.nodeChanged(),e.undoManager.add()}var a=void 0,l=void 0,d=void 0,u=r.each,c=r.Env.iOS;e.addButton("wp_img_remove",{tooltip:"Remove",icon:"dashicon dashicons-trash",onclick:function(){s(e.selection.getNode())}}),u({alignleft:"Align left",aligncenter:"Align center",alignright:"Align right",alignnone:"No alignment"},function(t,n){var o=n.slice(5);e.addButton("wp_img_"+n,{tooltip:t,icon:"dashicon dashicons-align-"+o,cmd:"alignnone"===n?"wpAlignNone":"Justify"+o.slice(0,1).toUpperCase()+o.slice(1),onPostRender:function(){var t=this;e.on("NodeChange",function(o){if("IMG"===o.element.nodeName){var r=e.dom.getParent(o.element,".wp-caption")||o.element;"alignnone"===n?t.active(!/\balign(left|center|right)\b/.test(r.className)):t.active(e.dom.hasClass(r,n))}})}})}),e.once("preinit",function(){a=e.wp._createToolbar(["wp_img_alignleft","wp_img_aligncenter","wp_img_alignright","wp_img_alignnone","wpcom_img_size_decrease","wpcom_img_size_increase","wp_img_caption","wp_img_advanced","wp_img_edit","wp_img_remove"])}),e.on("wptoolbar",function(e){"IMG"!==e.element.nodeName||t(e.element)||(e.toolbar=a)}),c&&e.on("click",function(t){if("IMG"===t.target.nodeName){var n=t.target;window.setTimeout(function(){e.selection.select(n),e.nodeChanged()},200)}else a.hide()}),e.on("init",function(){var t=e.dom,n=e.getParam("wpeditimage_html5_captions")?"html5-captions":"html4-captions";t.addClass(e.getBody(),n),e.on("wpLoadImageForm",function(t){if(!e.getParam("wpeditimage_disable_captions")){var n={type:"textbox",flex:1,name:"caption",minHeight:60,multiline:!0,scroll:!0,label:"Image caption"};t.data.splice(t.data.length-1,0,n)}}),e.on("wpNewImageRefresh",function(e){var n=void 0,o=void 0;(n=t.getParent(e.node,"dl.wp-caption"))&&(n.style.width||(o=parseInt(e.node.clientWidth,10)+10,o=o?o+"px":"50%",t.setStyle(n,"width",o)))}),e.on("wpImageFormSubmit",function(n){var o=n.imgData.data,r=void 0,s=void 0,a=void 0,l=void 0,d=void 0,u=n.imgData.node,c=n.imgData.caption,p="",f="",m="";return o.id="__wp-temp-img-id",n.imgData.cancel=!0,o.style||(o.style=null),o.src?(c&&(c=c.replace(/\r\n|\r/g,"\n").replace(/<\/?[a-zA-Z0-9]+( [^<>]+)?>/g,function(e){return e.replace(/[\r\n\t]+/," ")}),c=c.replace(/(<br[^>]*>)\s*\n\s*/g,"$1").replace(/\s*\n\s*/g,"<br />"),c=i(c)),u?(d=u.id||null,t.setAttribs(u,o),r=t.getParent(u,"dl.wp-caption"),c?r?(s=t.select("dd.wp-caption-dd",r)[0])&&(s.innerHTML=c):(u.className&&(p=u.className.match(/wp-image-([0-9]+)/),f=u.className.match(/align(left|right|center|none)/)),f?(f=f[0],u.className=u.className.replace(/align(left|right|center|none)/g,"")):f="alignnone",f=' class="wp-caption '+f+'"',p&&(p=' id="attachment_'+p[1]+'"'),m=o.width||u.clientWidth,m&&(m=parseInt(m,10),e.getParam("wpeditimage_html5_captions")||(m+=10),m=' style="width: '+m+'px"'),a=u.parentNode&&"A"===u.parentNode.nodeName?u.parentNode:u,l="<dl "+p+f+m+'><dt class="wp-caption-dt"></dt><dd class="wp-caption-dd">'+c+"</dd></dl>",r=t.create("div",{class:"mceTemp"},l),(s=t.getParent(a,"p"))?s.parentNode.insertBefore(r,s):a.parentNode.insertBefore(r,a),e.$(r).find("dt.wp-caption-dt").append(a),s&&t.isEmpty(s)&&t.remove(s)):r&&(l="A"===u.parentNode.nodeName?t.getOuterHTML(u.parentNode):t.getOuterHTML(u),s=t.create("p",{},l),t.insertAfter(s,r.parentNode),e.selection.select(s),e.nodeChanged(),t.remove(r.parentNode))):(l=t.createHTML("img",o),c?(a=e.selection.getNode(),o.width&&(m=parseInt(o.width,10),e.getParam("wpeditimage_html5_captions")||(m+=10),m=' style="width: '+m+'px"'),l='<dl class="wp-caption alignnone"'+m+'><dt class="wp-caption-dt">'+l+'</dt><dd class="wp-caption-dd">'+c+"</dd></dl>",s="P"===a.nodeName?a:t.getParent(a,"p"),s&&"P"===s.nodeName?(r=t.create("div",{class:"mceTemp"},l),s.parentNode.insertBefore(r,s),e.selection.select(r),e.nodeChanged(),t.isEmpty(s)&&t.remove(s)):e.selection.setContent('<div class="mceTemp">'+l+"</div>")):e.selection.setContent(l)),u=t.get("__wp-temp-img-id"),t.setAttrib(u,"id",d),void(n.imgData.node=u)):void(u&&((r=t.getParent(u,"div.mceTemp"))?t.remove(r):"A"===u.parentNode.nodeName?t.remove(u.parentNode):t.remove(u),e.nodeChanged()))}),e.on("wpLoadImageData",function(n){var o=void 0,r=n.imgData.data,i=n.imgData.node;(o=t.getParent(i,"dl.wp-caption"))&&(o=t.select("dd.wp-caption-dd",o)[0],o&&(r.caption=e.serializer.serialize(o).replace(/<br[^>]*>/g,"$&\n").replace(/^<p>/,"").replace(/<\/p>$/,"")))}),t.bind(e.getDoc(),"dragstart",function(n){var o=e.selection.getNode();"IMG"===o.nodeName&&t.getParent(o,".wp-caption")&&n.preventDefault()}),r.Env.ie&&r.Env.ie>10&&t.bind(e.getBody(),"mscontrolselect",function(n){"IMG"===n.target.nodeName&&t.getParent(n.target,".wp-caption")?e.getBody().focus():"DL"===n.target.nodeName&&t.hasClass(n.target,"wp-caption")&&n.target.focus()})}),e.on("ObjectResized",function(t){var n=t.target;"IMG"===n.nodeName&&e.undoManager.transact(function(){var o=void 0,r=void 0,i=e.dom;n.className=n.className.replace(/\bsize-[^ ]+/,""),(o=i.getParent(n,".wp-caption"))&&(r=t.width||i.getAttrib(n,"width"),r&&(r=parseInt(r,10),e.getParam("wpeditimage_html5_captions")||(r+=10),i.setStyle(o,"width",r+"px")))})}),e.on("pastePostProcess",function(t){e.dom.getParent(e.selection.getNode(),"dd.wp-caption-dd")&&(e.$("img, audio, video, object, embed, iframe, script, style",t.node).remove(),e.$("*",t.node).each(function(t,n){e.dom.isBlock(n)&&(r.trim(n.textContent||n.innerText)?(e.dom.insertAfter(e.dom.create("br"),n),e.dom.remove(n,!0)):e.dom.remove(n))}),e.$("br",t.node).each(function(t,n){n.nextSibling&&"BR"!==n.nextSibling.nodeName&&n.previousSibling&&"BR"!==n.previousSibling.nodeName||e.dom.remove(n)}),d=!0)}),e.on("BeforeExecCommand",function(t){var n=void 0,o=void 0,r=void 0,i=void 0,s=void 0,l=void 0,u=t.command,c=e.dom;if("mceInsertContent"===u){if(n=e.selection.getNode(),l=c.getParent(n,"div.mceTemp")){if(d)return void(d=!1);o=c.create("p"),c.insertAfter(o,l),e.selection.setCursorLocation(o,0),"IMG"!==n.nodeName&&"DT"!==n.nodeName||e.$(l).remove(),e.nodeChanged()}}else if("JustifyLeft"===u||"JustifyRight"===u||"JustifyCenter"===u||"wpAlignNone"===u){if(n=e.selection.getNode(),i="align"+u.slice(7).toLowerCase(),r=e.dom.getParent(n,".wp-caption"),"IMG"!==n.nodeName&&!r)return;n=r||n,s=e.dom.hasClass(n,i)?" alignnone":" "+i,n.className=n.className.replace(/ ?align(left|center|right|none)/g,"")+s,e.nodeChanged(),t.preventDefault(),a&&a.reposition(),e.fire("ExecCommand",{command:u,ui:t.ui,value:t.value})}}),e.on("keydown",function(t){var n=void 0,o=void 0,i=void 0,a=void 0,l=e.selection,d=t.keyCode,u=e.dom,c=r.util.VK;if(d===c.ENTER)n=l.getNode(),o=u.getParent(n,"div.mceTemp"),o&&(u.events.cancel(t),r.each(u.select("dt, dd",o),function(e){u.isEmpty(e)&&u.remove(e)}),a=r.Env.ie&&r.Env.ie<11?"":'<br data-mce-bogus="1" />',i=u.create("p",null,a),"DD"===n.nodeName?u.insertAfter(i,o):o.parentNode.insertBefore(i,o),e.nodeChanged(),l.setCursorLocation(i,0));else if((d===c.DELETE||d===c.BACKSPACE)&&(n=l.getNode(),"DIV"===n.nodeName&&u.hasClass(n,"mceTemp")?o=n:"IMG"!==n.nodeName&&"DT"!==n.nodeName&&"A"!==n.nodeName||(o=u.getParent(n,"div.mceTemp")),o))return u.events.cancel(t),s(n),!1}),r.Env.gecko&&e.on("undo redo",function(){"IMG"===e.selection.getNode().nodeName&&e.selection.collapse()}),e.wpSetImgCaption=function(e){return n(e)},e.wpGetImgCaption=function(e){return o(e)},e.on("BeforeSetContent",function(t){"raw"!==t.format&&(t.content=e.wpSetImgCaption(t.content))}),e.on("PostProcess",function(t){t.get&&(t.content=e.wpGetImgCaption(t.content))}),e.wp=e.wp||{},e.wp.isPlaceholder=t}var r=n("./node_modules/tinymce/tinymce.js");e.exports=function(){r.PluginManager.add("wpeditimage",o)}},"./client/components/tinymce/plugins/wpemoji/plugin.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){function t(e){e.className="emoji",e.setAttribute("data-mce-resize","false"),e.setAttribute("data-mce-placeholder","1"),e.setAttribute("data-wp-emoji","1")}function n(e){l.default.parse(e,{base:(0,u.default)("twemoji_cdn_url"),size:"72x72",attributes:function(){return{"data-mce-resize":"false","data-mce-placeholder":"1","data-wp-emoji":"1"}},callback:function(e,t){var n=["a9","ae","2122","2194","2660","2663","2665","2666"];return-1===n.indexOf(e)&&"".concat(t.base,t.size,"/",e,t.ext)}})}function o(t){var o=void 0,r=void 0;t&&l.default.test(t.textContent||t.innerText)&&(i.webkit&&(o=e.selection,r=o.getBookmark()),n(t),i.webkit&&o.moveToBookmark(r))}var r=!1,i=s.default.Env,a=window.navigator.userAgent,d=a.indexOf("Windows")>-1,c=function(){var e=a.match(/Windows NT 6\.(\d)/);return!!(e&&e[1]>1)}();c?e.on("keyup",function(t){231===t.keyCode&&o(e.selection.getNode())}):d||(e.on("keydown keyup",function(e){r="keydown"===e.type}),e.on("input",function(){r||o(e.selection.getNode())})),e.on("setcontent",function(){o(e.selection.getNode())}),e.on("PastePostProcess",function(n){s.default.each(e.dom.$("img.emoji",n.node),function(e){e.alt&&l.default.test(e.alt)&&t(e)})}),e.on("postprocess",function(e){e.content&&(e.content=e.content.replace(/<img[^>]+data-wp-emoji="[^>]+>/g,function(e){var t=e.match(/alt="([^"]+)"/);return t&&t[1]?t[1]:e}))}),e.on("resolvename",function(t){"IMG"===t.target.nodeName&&e.dom.getAttrib(t.target,"data-wp-emoji")&&t.preventDefault()})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){s.default.PluginManager.add("wpemoji",r)};var i=n("./node_modules/tinymce/tinymce.js"),s=o(i),a=n("./node_modules/twemoji/2/twemoji.npm.js"),l=o(a),d=n("./client/config/index.js"),u=o(d);e.exports=t.default},"./client/components/tinymce/plugins/wplink/dialog.jsx":function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/babel-runtime/core-js/object/assign.js"),s=r(i),a=n("./node_modules/lodash/find.js"),l=r(a),d=n("./node_modules/react/react.js"),u=r(d),c=n("./node_modules/tinymce/tinymce.js"),p=r(c),f=n("./node_modules/react-redux/es/index.js"),m=n("./node_modules/gridicons/build/index.js"),h=r(m),g=n("./client/lib/media-serialization/index.js"),y=o(g),v=n("./client/lib/media/store.js"),b=r(v),_=n("./client/lib/media/utils.js"),x=r(_),C=n("./client/components/dialog/index.jsx"),E=r(C),w=n("./client/components/forms/form-text-input/index.jsx"),j=r(w),S=n("./client/components/forms/form-checkbox/index.jsx"),T=r(S),P=n("./client/components/forms/form-button/index.jsx"),k=r(P),I=n("./client/components/forms/form-fieldset/index.jsx"),N=r(I),R=n("./client/components/forms/form-label/index.jsx"),D=r(R),M=n("./client/my-sites/post-selector/index.jsx"),O=r(M),A=n("./client/state/ui/selectors.js"),L=n("./client/state/posts/selectors.js"),F=n("./client/lib/formatting/index.js"),B=n("./client/lib/posts/stats.js"),z=/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i,U=/^(https?|ftp):\/\/[A-Z0-9.-]+\.[A-Z]{2,4}[^ "]*$/i,H=/^(?:[a-z]+:|#|\?|\.|\/)/,W=u.default.createClass({displayName:"LinkDialog",propTypes:{visible:d.PropTypes.bool,editor:d.PropTypes.object,onClose:d.PropTypes.func,site:d.PropTypes.object,sitePosts:d.PropTypes.array,firstLoad:d.PropTypes.bool},getInitialState:function(){return this.getState()},getDefaultProps:function(){return{onClose:function(){},firstLoad:!1}},componentWillReceiveProps:function(e){e.visible&&!this.props.visible&&this.setState(this.getState())},getLink:function(){var e=this.props.editor;return e.dom.getParent(e.selection.getNode(),"a")},getCorrectedUrl:function(){var e=this.state.url.trim();return z.test(e)?"mailto:"+e:H.test(e)?e:"http://"+e},updateEditor:function(){var e,t,n,o=this.props.editor;return o.focus(),p.default.isIE&&o.selection.moveToBookmark(o.windowManager.bookmark),this.state.url?(t=this.getLink(),n=this.state.linkText,e={href:this.getCorrectedUrl(),target:this.state.newWindow?"_blank":""},t?(n&&("innerText"in t?t.innerText=n:t.textContent=n),o.dom.setAttribs(t,e)):n?(n=o.dom.encode(n),o.selection.setNode(o.dom.create("a",e,n))):o.execCommand("mceInsertLink",!1,e),void this.closeDialog()):void this.removeLink()},hasSelectedText:function(e){var t,n,o=this.props.editor,r=o.selection.getContent();if(/</.test(r)&&(!/^<a [^>]+>[^<]+<\/a>$/.test(r)||r.indexOf("href=")===-1))return!1;if(e){if(t=e.childNodes,0===t.length)return!1;for(n=t.length-1;n>=0;n--)if(3!==t[n].nodeType)return!1}return!0},getInferredUrl:function(){var e,t,n,o=this.props.editor.selection.getContent();if(z.test(o))return"mailto:"+o;if(U.test(o))return o.replace(/&amp;|&#0?38;/gi,"&");if(e=this.props.editor.selection.getNode(),e&&"IMG"===e.nodeName){if(t=y.deserialize(e),this.props.site&&t.media.ID)return n=b.default.get(this.props.site.ID,t.media.ID)||t.media,x.default.url(n,{size:"full"});if(t.media.URL)return t.media.URL}},getState:function(){var e=this.props.editor,t=e.selection.getNode(),n=e.dom.getParent(t,"a[href]"),o=this.hasSelectedText(n),r={isNew:!0,newWindow:!1,showLinkText:!0,linkText:"",url:"",isUserDefinedLinkText:!1};return n?(r.linkText=n.innerText||n.textContent,r.url=e.dom.getAttrib(n,"href"),r.newWindow="_blank"===e.dom.getAttrib(n,"target"),r.isNew=!1):o&&(r.linkText=e.selection.getContent({format:"text"})),n||(r.url=this.getInferredUrl()||""),this.hasSelectedText(n)||(r.showLinkText=!1),r},closeDialog:function(){this.props.onClose()},setUrl:function(e){this.setState({url:e.target.value})},setLinkText:function(e){this.setState({linkText:e.target.value,isUserDefinedLinkText:!0})},setNewWindow:function(e){this.setState({newWindow:e.target.checked})},onInputKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),this.updateEditor())},removeLink:function(){this.props.editor.execCommand("unlink"),this.closeDialog()},getButtons:function(){var e,t;return e=this.state.isNew?this.translate("Add Link"):this.translate("Save"),t=[u.default.createElement(k.default,{key:"save",onClick:this.updateEditor},e),u.default.createElement(k.default,{key:"cancel",isPrimary:!1,onClick:this.closeDialog},this.translate("Cancel"))],this.state.url&&!this.state.isNew&&t.push(u.default.createElement("button",{className:"wplink__remove-link",onClick:this.removeLink},u.default.createElement(h.default,{icon:"link-break"}),this.translate("Remove"))),t},setExistingContent:function(e){var t={url:e.URL},n=!this.state.isUserDefinedLinkText&&!this.props.editor.selection.getContent()&&!this.getLink();n&&(0,s.default)(t,{linkText:(0,F.decodeEntities)(e.title)}),(0,B.recordStat)("link-existing-content"),(0,B.recordEvent)("Set link to existing content"),this.setState(t)},getSelectedPostId:function(){if(this.state.url&&this.props.sitePosts){var e=(0,l.default)(this.props.sitePosts,{URL:this.state.url});return e?e.ID:void 0}},render:function(){return u.default.createElement(E.default,{isVisible:this.props.visible,onClose:this.closeDialog,buttons:this.getButtons(),autoFocus:!1,additionalClassNames:"wplink__dialog"},u.default.createElement(N.default,null,u.default.createElement(D.default,null,u.default.createElement("span",null,this.translate("URL")),u.default.createElement(j.default,{ref:"url",autoFocus:!0,onChange:this.setUrl,value:this.state.url,onKeyDown:this.onInputKeyDown})),this.state.showLinkText?u.default.createElement(D.default,null,u.default.createElement("span",null,this.translate("Link Text")),u.default.createElement(j.default,{onChange:this.setLinkText,value:this.state.linkText,onKeyDown:this.onInputKeyDown})):null),u.default.createElement(N.default,null,u.default.createElement(D.default,null,u.default.createElement(T.default,{onChange:this.setNewWindow,checked:this.state.newWindow}),u.default.createElement("span",null,this.translate("Open link in a new window/tab")))),u.default.createElement(N.default,null,u.default.createElement(D.default,null,u.default.createElement("span",null,this.translate("Link to existing content")),this.props.site&&u.default.createElement(O.default,{siteId:this.props.site.ID,type:"any",excludePrivateTypes:!0,status:"publish",orderBy:"date",order:"DESC",selected:this.getSelectedPostId(),onChange:this.setExistingContent,suppressFirstPageLoad:!this.props.firstLoad,emptyMessage:this.translate("No posts found")}))))}});t.default=(0,f.connect)(function(e){var t=(0,A.getSelectedSite)(e);return{site:t,sitePosts:t?(0,L.getSitePosts)(e,t.ID):null}})(W),e.exports=t.default},"./client/components/tinymce/plugins/wplink/plugin.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){function t(){var o=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];(0,m.renderWithReduxStore)(l.default.createElement(f.default,{visible:o,editor:e,firstLoad:!r,onClose:function(){return t(!1)}}),n,e.getParam("redux_store")),o&&(r=!0),o||e.focus()}var n=void 0,o=void 0,r=void 0;e.on("init",function(){n=e.getContainer().appendChild(document.createElement("div"))}),e.on("remove",function(){s.default.unmountComponentAtNode(n),n.parentNode.removeChild(n),n=null}),e.addCommand("WP_Link",function(){return t()}),e.addShortcut("access+a","","WP_Link"),e.addShortcut("meta+k","","WP_Link"),e.addButton("link",{icon:"link",tooltip:(0,c.translate)("Insert/edit link"),cmd:"WP_Link",stateSelector:"a[href]"}),e.addButton("unlink",{icon:"unlink",tooltip:"Remove link",cmd:"unlink"}),e.addMenuItem("link",{icon:"link",text:(0,c.translate)("Insert/edit link"),cmd:"WP_Link",stateSelector:"a[href]",context:"insert",prependToContext:!0}),e.on("pastepreprocess",function(t){var n=t.content;e.selection.isCollapsed()||(n=n.replace(/<[^>]+>/g,""),n=u.default.trim(n),/^(?:https?:)?\/\/\S+$/i.test(n)&&(e.execCommand("mceInsertLink",!1,{href:e.dom.decode(n)}),t.preventDefault()))}),u.default.ui.Factory.add("WPLinkPreview",u.default.ui.Control.extend({url:"#",renderHtml:function(){return'<div id="'+this._id+'" class="wp-link-preview"><a href="'+this.url+'" target="_blank" rel="noopener noreferrer" tabindex="-1">'+this.url+"</a></div>"},setURL:function(e){var t=void 0,n=void 0;this.url!==e&&(this.url=e,e=window.decodeURIComponent(e),e=e.replace(/^(?:https?:)?\/\/(?:www\.)?/,""),(t=e.indexOf("?"))!==-1&&(e=e.slice(0,t)),(t=e.indexOf("#"))!==-1&&(e=e.slice(0,t)),e=e.replace(/(?:index)?\.html$/,""),"/"===e.charAt(e.length-1)&&(e=e.slice(0,-1)),e.length>40&&(t=e.indexOf("/"))!==-1&&(n=e.lastIndexOf("/"))!==-1&&n!==t&&(t+e.length-n<40&&(n=-(40-(t+1))),e=e.slice(0,t+1)+"…"+e.slice(n)),u.default.$(this.getEl().firstChild).attr("href",this.url).text(e))}})),e.addButton("wp_link_preview",{type:"WPLinkPreview",onPostRender:function(){var t=this;e.on("wptoolbar",function(n){var r=e.dom.getParent(n.element,"a"),i=void 0,s=void 0;r&&(i=e.$(r),s=i.attr("href"),s&&!i.find("img").length&&(t.setURL(s),n.element=r,n.toolbar=o))})}}),e.addButton("wp_link_edit",{tooltip:"Edit ",icon:"dashicon dashicons-edit",cmd:"WP_Link"}),e.addButton("wp_link_remove",{tooltip:"Remove",icon:"dashicon dashicons-no",cmd:"unlink"}),e.on("preinit",function(){e.wp&&e.wp._createToolbar&&(o=e.wp._createToolbar(["wp_link_preview","wp_link_edit","wp_link_remove"],!0))})}var i=n("./node_modules/react-dom/index.js"),s=o(i),a=n("./node_modules/react/react.js"),l=o(a),d=n("./node_modules/tinymce/tinymce.js"),u=o(d),c=n("./node_modules/i18n-calypso/index.js"),p=n("./client/components/tinymce/plugins/wplink/dialog.jsx"),f=o(p),m=n("./client/lib/react-helpers/index.js");e.exports=function(){u.default.PluginManager.add("wplink",r)}},"./client/components/tinymce/plugins/wptextpattern/plugin.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){function t(){function t(e){for(var t,n=c.length;n--;)if(r=c[n],t=e.data.indexOf(r.end),t!==-1)return t}var n,o,r,i,l,d=e.selection.getRng(),u=d.startContainer,f=d.startOffset;u&&3===u.nodeType&&u.data.length&&f&&s.default.inArray(p,u.data.charAt(f-1))!==-1&&(n=t(u),o=u.data.lastIndexOf(r.end),n!==o&&o!==-1&&(o-n<=r.start.length||u.data.slice(n+r.start.length,o).indexOf(r.start.slice(0,1))===-1&&(i=e.formatter.get(r.format),i&&i[0].inline&&(e.undoManager.add(),e.undoManager.transact(function(){u.insertData(f,"​"),u=u.splitText(n),l=u.splitText(f-n),u.deleteData(0,r.start.length),u.deleteData(u.data.length-r.end.length,r.end.length),e.formatter.apply(r.format,{},u),e.selection.setCursorLocation(l,1)}),setTimeout(function(){a="space",e.once("selectionchange",function(){var e;l&&(e=l.data.indexOf("​"),e!==-1&&l.deleteData(e,e+1))})})))))}function n(t){var n,o=e.dom.getParent(t,"p");if(o){for(;(n=o.firstChild)&&3!==n.nodeType;)o=n;if(n)return n.data||(n=n.nextSibling&&3===n.nextSibling.nodeType?n.nextSibling:null),n}}function o(){var t,o,r=e.selection.getRng(),i=r.startContainer;i&&n(i)===i&&(t=i.parentNode,o=i.data,s.default.each(d,function(n){var s=o.match(n.regExp);if(s&&r.startOffset===s[0].length)return e.undoManager.add(),e.undoManager.transact(function(){i.deleteData(0,s[0].length),t.innerHTML||t.appendChild(document.createElement("br")),e.selection.setCursorLocation(t),e.execCommand(n.cmd)}),setTimeout(function(){a="space"}),!1}))}function r(){var t,o,r,l=e.selection.getRng(),d=l.startContainer,c=n(d),p=u.length;if(c){for(t=c.data;p--;)if(u[p].start){if(0===t.indexOf(u[p].start)){o=u[p];break}}else if(u[p].regExp&&u[p].regExp.test(t)){o=u[p];break}o&&(c===d&&s.default.trim(t)===o.start||e.once("keyup",function(){e.undoManager.add(),e.undoManager.transact(function(){o.format?(e.formatter.apply(o.format,{},c),c.replaceData(0,c.data.length,i(c.data.slice(o.start.length)))):o.element&&(r=c.parentNode&&c.parentNode.parentNode,r&&r.replaceChild(document.createElement(o.element),c.parentNode))}),setTimeout(function(){a="enter"})}))}}function i(e){return e?e.replace(/^\s+/,""):""}var a,l=s.default.util.VK,d=[{regExp:/^[*-]\s/,cmd:"InsertUnorderedList"},{regExp:/^1[.)]\s/,cmd:"InsertOrderedList"}],u=[{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:">",format:"blockquote"},{regExp:/^(-){3,}$/,element:"hr"}],c=[{start:"`",end:"`",format:"code"}],p=[];s.default.each(c,function(e){s.default.each((e.start+e.end).split(""),function(e){s.default.inArray(p,e)===-1&&p.push(e)})}),e.on("selectionchange",function(){a=null}),e.on("keydown",function(n){(a&&27===n.keyCode||"space"===a&&n.keyCode===l.BACKSPACE)&&(e.undoManager.undo(),n.preventDefault(),n.stopImmediatePropagation()),n.keyCode!==l.ENTER||l.modifierPressed(n)||r(),n.keyCode!==l.SPACEBAR||n.ctrlKey||n.metaKey||n.altKey?n.keyCode>47&&!(n.keyCode>=91&&n.keyCode<=93)&&setTimeout(t):setTimeout(o)},!0)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){s.default.PluginManager.add("wptextpattern",r)};var i=n("./node_modules/tinymce/tinymce.js"),s=o(i);e.exports=t.default},"./client/components/token-field/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var r=n("./node_modules/babel-runtime/helpers/extends.js"),i=o(r),s=n("./node_modules/babel-runtime/core-js/object/assign.js"),a=o(s),l=n("./node_modules/babel-runtime/core-js/object/freeze.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/typeof.js"),c=o(u),p=n("./node_modules/lodash/uniq.js"),f=o(p),m=n("./node_modules/lodash/take.js"),h=o(m),g=n("./node_modules/lodash/some.js"),y=o(g),v=n("./node_modules/lodash/map.js"),b=o(v),_=n("./node_modules/lodash/last.js"),x=o(_),C=n("./node_modules/lodash/identity.js"),E=o(C),w=n("./node_modules/lodash/forEach.js"),j=o(w),S=n("./node_modules/lodash/each.js"),T=o(S),P=n("./node_modules/lodash/difference.js"),k=o(P),I=n("./node_modules/lodash/clone.js"),N=o(I),R=n("./node_modules/react/react.js"),D=n("./node_modules/react-pure-render/mixin.js"),M=n("./node_modules/classnames/index.js"),O=n("./node_modules/debug/browser.js")("calypso:token-field"),A=n("./client/components/token-field/suggestions-list.jsx"),L=n("./client/components/token-field/token.jsx"),F=n("./client/components/token-field/token-input.jsx"),B=R.createClass({displayName:"TokenField",propTypes:{suggestions:R.PropTypes.array,maxSuggestions:R.PropTypes.number,displayTransform:R.PropTypes.func,saveTransform:R.PropTypes.func,onChange:R.PropTypes.func,isBorderless:R.PropTypes.bool,maxLength:R.PropTypes.number,onFocus:R.PropTypes.func,disabled:R.PropTypes.bool,tokenizeOnSpace:R.PropTypes.bool,placeholder:R.PropTypes.string,value:function e(t){var e=t.value;return Array.isArray(e)?void(0,j.default)(e,function(e){if("object"===("undefined"==typeof e?"undefined":(0,c.default)(e))&&!("value"in e))return new Error("When using object for value prop, each object is expected to have a 'value' property.")}):new Error("Value prop is expected to be an array.")}},getDefaultProps:function(){return{suggestions:(0,d.default)([]),maxSuggestions:100,value:(0,d.default)([]),placeholder:"",displayTransform:E.default,saveTransform:function(e){return e.trim()},onChange:function(){},isBorderless:!1,disabled:!1,tokenizeOnSpace:!1}},mixins:[D],getInitialState:function(){return{incompleteTokenValue:"",inputOffsetFromEnd:0,isActive:!1,selectedSuggestionIndex:-1,selectedSuggestionScroll:!1}},componentDidUpdate:function(){this.state.isActive&&!this.refs.input.hasFocus()&&(O("componentDidUpdate focusing input"),this.refs.input.focus())},componentWillReceiveProps:function(e){e.disabled&&this.state.isActive&&this.setState({isActive:!1,incompleteTokenValue:""})},render:function(){var e=M("token-field",{"is-active":this.state.isActive,"is-disabled":this.props.disabled}),t={ref:"main",className:e,tabIndex:"-1"};return this.props.disabled||(t=(0,a.default)({},t,{onKeyDown:this._onKeyDown,onKeyPress:this._onKeyPress,onFocus:this._onFocus})),R.createElement("div",t,R.createElement("div",{ref:"tokensAndInput",className:"token-field__input-container",tabIndex:"-1",onMouseDown:this._onContainerTouched,onTouchStart:this._onContainerTouched},this._renderTokensAndInput()),R.createElement(A,{match:this.props.saveTransform(this.state.incompleteTokenValue),displayTransform:this.props.displayTransform,suggestions:this._getMatchingSuggestions(),selectedIndex:this.state.selectedSuggestionIndex,scrollIntoView:this.state.selectedSuggestionScroll,isExpanded:this.state.isActive,onHover:this._onSuggestionHovered,onSelect:this._onSuggestionSelected}))},_renderTokensAndInput:function(){var e=(0,b.default)(this.props.value,this._renderToken);return e.splice(this._getIndexOfInput(),0,this._renderInput()),e},_renderToken:function(e){var t=this._getTokenValue(e),n=e.status?e.status:void 0;return R.createElement(L,{key:"token-"+t,value:t,status:n,tooltip:e.tooltip,displayTransform:this.props.displayTransform,onClickRemove:this._onTokenClickRemove,isBorderless:e.isBorderless||this.props.isBorderless,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,disabled:"error"!==n&&this.props.disabled})},_renderInput:function(){var e=this.props,t=e.autoCapitalize,n=e.autoComplete,o=e.maxLength,r=e.value,s=e.placeholder,a={autoCapitalize:t,autoComplete:n,ref:"input",key:"input",disabled:this.props.disabled,value:this.state.incompleteTokenValue,onBlur:this._onBlur};return 0===r.length&&s&&(a.placeholder=s),o&&r.length>=o||(a=(0,i.default)({},a,{onChange:this._onInputChange})),R.createElement(F,a)},_onFocus:function(e){this.setState({isActive:!0}),"function"==typeof this.props.onFocus&&this.props.onFocus(e)},_onBlur:function(e){this._inputHasValidValue()?(O("_onBlur adding current token"),this.setState({isActive:!1},this._addCurrentToken)):(O("_onBlur not adding current token"),
this.setState(this.getInitialState()))},_onTokenClickRemove:function(e){this._deleteToken(e.value)},_onSuggestionHovered:function(e){var t=this._getMatchingSuggestions().indexOf(e);t>=0&&this.setState({selectedSuggestionIndex:t,selectedSuggestionScroll:!1})},_onSuggestionSelected:function(e){O("_onSuggestionSelected",e),this._addNewToken(e)},_onInputChange:function(e){var t=e.value,n=this.props.tokenizeOnSpace?/[ ,\t]+/:/[,\t]+/,o=t.split(n);o.length>1&&this._addNewTokens(o.slice(0,-1)),this.setState({incompleteTokenValue:(0,x.default)(o)||"",selectedSuggestionIndex:-1,selectedSuggestionScroll:!1})},_onContainerTouched:function(e){e.target===this.refs.tokensAndInput&&this.state.isActive&&e.preventDefault()},_onKeyDown:function(e){var t=!1;switch(e.keyCode){case 8:t=this._handleDeleteKey(this._deleteTokenBeforeInput);break;case 9:t=this._addCurrentToken();break;case 13:t=this._addCurrentToken();break;case 37:t=this._handleLeftArrowKey();break;case 38:t=this._handleUpArrowKey();break;case 39:t=this._handleRightArrowKey();break;case 40:t=this._handleDownArrowKey();break;case 46:t=this._handleDeleteKey(this._deleteTokenAfterInput);break;case 32:this.props.tokenizeOnSpace&&(t=this._addCurrentToken())}t&&e.preventDefault()},_onKeyPress:function(e){var t=!1;switch(e.charCode){case 44:t=this._handleCommaKey()}t&&e.preventDefault()},_handleDeleteKey:function(e){var t=!1;return this.refs.input.hasFocus()&&this._isInputEmpty()&&(e(),t=!0),t},_getMatchingSuggestions:function(){var e=this.props.suggestions,t=this.props.saveTransform(this.state.incompleteTokenValue),n=[],o=[];return 0===t.length?e=(0,k.default)(e,this.props.value):(t=t.toLocaleLowerCase(),(0,T.default)(e,function(e){var r=e.toLocaleLowerCase().indexOf(t);this.props.value.indexOf(e)===-1&&(0===r?n.push(e):r>0&&o.push(e))}.bind(this)),e=n.concat(o)),(0,h.default)(e,this.props.maxSuggestions)},_getSelectedSuggestion:function(){if(this.state.selectedSuggestionIndex!==-1)return this._getMatchingSuggestions()[this.state.selectedSuggestionIndex]},_addCurrentToken:function(){var e=!1,t=this._getSelectedSuggestion();return t?(this._addNewToken(t),e=!0):this._inputHasValidValue()&&(this._addNewToken(this.state.incompleteTokenValue),e=!0),e},_handleLeftArrowKey:function(){var e=!1;return this._isInputEmpty()&&(this._moveInputBeforePreviousToken(),e=!0),e},_handleRightArrowKey:function(){var e=!1;return this._isInputEmpty()&&(this._moveInputAfterNextToken(),e=!0),e},_handleUpArrowKey:function(){return this.setState({selectedSuggestionIndex:Math.max((this.state.selectedSuggestionIndex||0)-1,0),selectedSuggestionScroll:!0}),!0},_handleDownArrowKey:function(){return this.setState({selectedSuggestionIndex:Math.min(this.state.selectedSuggestionIndex+1||0,this._getMatchingSuggestions().length-1),selectedSuggestionScroll:!0}),!0},_handleCommaKey:function(){var e=!0;return this._inputHasValidValue()&&this._addNewToken(this.state.incompleteTokenValue),e},_isInputEmpty:function(){return 0===this.state.incompleteTokenValue.length},_inputHasValidValue:function(){return this.props.saveTransform(this.state.incompleteTokenValue).length>0},_deleteTokenBeforeInput:function(){var e=this._getIndexOfInput()-1;e>-1&&this._deleteToken(this.props.value[e])},_deleteTokenAfterInput:function(){var e=this._getIndexOfInput();e<this.props.value.length&&(this._deleteToken(this.props.value[e]),this._moveInputToIndex(e))},_deleteToken:function(e){var t=this,n=this.props.value.filter(function(n){return t._getTokenValue(n)!==t._getTokenValue(e)});this.props.onChange(n)},_moveInputToIndex:function(e){this.setState({inputOffsetFromEnd:this.props.value.length-Math.max(e,-1)-1})},_moveInputBeforePreviousToken:function(){this.setState({inputOffsetFromEnd:Math.min(this.state.inputOffsetFromEnd+1,this.props.value.length)})},_moveInputAfterNextToken:function(){this.setState({inputOffsetFromEnd:Math.max(this.state.inputOffsetFromEnd-1,0)})},_addNewTokens:function(e){var t=this,n=(0,f.default)(e.map(this.props.saveTransform).filter(Boolean).filter(function(e){return!t._valueContainsToken(e)}));if(O("_addNewTokens: tokensToAdd",n),n.length>0){var o=(0,N.default)(this.props.value);o.splice.apply(o,[this._getIndexOfInput(),0].concat(n)),O("_addNewTokens: onChange",o),this.props.onChange(o)}},_addNewToken:function(e){this._addNewTokens([e]),this.setState({incompleteTokenValue:"",selectedSuggestionIndex:-1,selectedSuggestionScroll:!1}),this.state.isActive&&(O("_addNewToken focusing input"),this.refs.input.focus())},_valueContainsToken:function(e){var t=this;return(0,y.default)(this.props.value,function(n){return t._getTokenValue(e)===t._getTokenValue(n)})},_getTokenValue:function(e){return"object"===("undefined"==typeof e?"undefined":(0,c.default)(e))?e.value:e},_getIndexOfInput:function(){return this.props.value.length-this.state.inputOffsetFromEnd}});e.exports=B},"./client/components/token-field/suggestions-list.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var r=n("./node_modules/babel-runtime/core-js/object/freeze.js"),i=o(r),s=n("./node_modules/lodash/map.js"),a=o(s),l=n("./node_modules/react/react.js"),d=n("./node_modules/react-pure-render/mixin.js"),u=n("./node_modules/classnames/index.js"),c=n("./node_modules/dom-scroll-into-view/index.js"),p=l.createClass({displayName:"SuggestionsList",propTypes:{isExpanded:l.PropTypes.bool,match:l.PropTypes.string,displayTransform:l.PropTypes.func.isRequired,onSelect:l.PropTypes.func,suggestions:l.PropTypes.array,selectedIndex:l.PropTypes.number},getDefaultProps:function(){return{isExpanded:!1,match:"",onHover:function(){},onSelect:function(){},suggestions:(0,i.default)([])}},mixins:[d],componentDidUpdate:function(e){var t;e.isExpanded&&this.props.isExpanded&&this.props.selectedIndex>-1&&this.props.scrollIntoView&&(this._scrollingIntoView=!0,t=this.refs.list,c(t.children[this.props.selectedIndex],t,{onlyScrollIfNeeded:!0}),setTimeout(function(){this._scrollingIntoView=!1}.bind(this),100))},_computeSuggestionMatch:function(e){var t,n=this.props.displayTransform(this.props.match||"").toLocaleLowerCase();return 0===n.length?null:(e=this.props.displayTransform(e),t=e.toLocaleLowerCase().indexOf(n),{suggestionBeforeMatch:e.substring(0,t),suggestionMatch:e.substring(t,t+n.length),suggestionAfterMatch:e.substring(t+n.length)})},render:function(){var e=u("token-field__suggestions-list",{"is-expanded":this.props.isExpanded&&this.props.suggestions.length>0});return l.createElement("ul",{ref:"list",className:e,tabIndex:"-1"},this._renderSuggestions())},_renderSuggestions:function(){return(0,a.default)(this.props.suggestions,function(e,t){var n=this._computeSuggestionMatch(e),o=u("token-field__suggestion",{"is-selected":t===this.props.selectedIndex});return l.createElement("li",{className:o,key:e,onMouseDown:this._handleMouseDown,onClick:this._handleClick(e),onMouseEnter:this._handleHover(e)},n?l.createElement("span",null,n.suggestionBeforeMatch,l.createElement("strong",{className:"token-field__suggestion-match"},n.suggestionMatch),n.suggestionAfterMatch):this.props.displayTransform(e))}.bind(this))},_handleHover:function(e){return function(){this._scrollingIntoView||this.props.onHover(e)}.bind(this)},_handleClick:function(e){return function(){this.props.onSelect(e)}.bind(this)},_handleMouseDown:function(e){e.preventDefault()}});e.exports=p},"./client/components/token-field/token-input.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var r=n("./node_modules/babel-runtime/helpers/extends.js"),i=o(r),s=n("./node_modules/react/react.js"),a=n("./node_modules/react-pure-render/mixin.js"),l=s.createClass({displayName:"TokenInput",propTypes:{onChange:s.PropTypes.func,onBlur:s.PropTypes.func,value:s.PropTypes.string,placeholder:s.PropTypes.string,disabled:s.PropTypes.bool},getDefaultProps:function(){return{onChange:function(){},onBlur:function(){},value:"",disabled:!1,placeholder:""}},mixins:[a],render:function(){var e=(0,i.default)({},this.props,{onChange:this._onChange}),t=e.value,n=e.placeholder,o=(0===t.length&&n&&n.length||t.length)+1;return s.createElement("input",(0,i.default)({ref:"input",type:"text"},e,{size:o,className:"token-field__input"}))},focus:function(){this.isMounted()&&this.refs.input.focus()},hasFocus:function(){return this.isMounted()&&this.refs.input===document.activeElement},_onChange:function(e){this.props.onChange({value:e.target.value})}});e.exports=l},"./client/components/token-field/token.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/react/react.js"),i=o(r),s=n("./node_modules/react-pure-render/mixin.js"),a=o(s),l=n("./node_modules/classnames/index.js"),d=o(l),u=n("./client/components/tooltip/index.jsx"),c=o(u);t.default=i.default.createClass({displayName:"Token",propTypes:{value:i.default.PropTypes.string.isRequired,displayTransform:i.default.PropTypes.func.isRequired,onClickRemove:i.default.PropTypes.func,status:i.default.PropTypes.oneOf(["error","success","validating"]),isBorderless:i.default.PropTypes.bool,tooltip:i.default.PropTypes.string,disabled:i.default.PropTypes.bool},getDefaultProps:function(){return{onClickRemove:function(){},isBorderless:!1,disabled:!1}},mixins:[a.default],render:function(){var e=this.props,t=e.value,n=e.status,o=e.isBorderless,r=e.tooltip,s=e.displayTransform,a=(0,d.default)("token-field__token",{"is-error":"error"===n,"is-success":"success"===n,"is-validating":"validating"===n,"is-borderless":o,"is-disabled":this.props.disabled});return i.default.createElement("span",{className:a,tabIndex:"-1",onMouseEnter:this.props.onMouseEnter,onMouseLeave:this.props.onMouseLeave},i.default.createElement("span",{className:"token-field__token-text"},s(t)),i.default.createElement("span",{className:"token-field__remove-token noticon noticon-close-alt",onClick:!this.props.disabled&&this._onClickRemove}),r&&i.default.createElement(c.default,{showOnMobile:!0,context:this,status:n,isVisible:!0,position:"bottom"},r))},_onClickRemove:function(){this.props.onClickRemove({value:this.props.value})}}),e.exports=t.default},"./client/components/tooltip/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=o(p),m=n("./node_modules/react/react.js"),h=o(m),g=n("./node_modules/prop-types/index.js"),y=o(g),v=n("./node_modules/classnames/index.js"),b=o(v),_=n("./client/components/popover/index.jsx"),x=o(_),C=n("./client/lib/viewport/index.js"),E=o(C),w=function(){},j=function(e){function t(){return(0,a.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){if(!this.props.showOnMobile&&E.default.isMobile())return null;var e=(0,b.default)("popover","tooltip","is-"+this.props.status,"is-"+this.props.position,this.props.className);return h.default.createElement(x.default,{autoPosition:this.props.autoPosition,className:e,rootClassName:this.props.rootClassName,context:this.props.context,id:this.props.id,isVisible:this.props.isVisible,onClose:w,position:this.props.position,showDelay:this.props.showDelay},this.props.children)}}]),t}(m.Component);j.propTypes={autoPosition:y.default.bool,className:y.default.string,id:y.default.string,isVisible:y.default.bool,position:y.default.string,rootClassName:y.default.string,status:y.default.string,showDelay:y.default.number,showOnMobile:y.default.bool},j.defaultProps={showDelay:100,position:"top",showOnMobile:!1},t.default=j,e.exports=t.default},"./client/components/track-input-changes/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=o(p),m=n("./node_modules/lodash/noop.js"),h=o(m),g=n("./node_modules/lodash/assign.js"),y=o(g),v=n("./node_modules/react/react.js"),b=o(v),_=n("./node_modules/prop-types/index.js"),x=o(_),C=function(e){function t(){var e,n,o,r;(0,a.default)(this,t);for(var s=arguments.length,l=Array(s),d=0;d<s;d++)l[d]=arguments[d];return n=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.onInputChange=function(){o.inputEdited=!0},o.onInputBlur=function(e){o.inputEdited&&(o.props.onNewValue(e),o.inputEdited=!1)},r=n,(0,c.default)(o,r)}return(0,f.default)(t,e),(0,d.default)(t,[{key:"componentWillMount",value:function(){this.inputEdited=!1}},{key:"render",value:function(){var e=this,t=b.default.Children.only(this.props.children),n=(0,y.default)({},t.props,{onChange:function(n){"function"==typeof t.props.onChange&&t.props.onChange.call(t,n),e.onInputChange(n)},onBlur:function(n){"function"==typeof t.props.onBlur&&t.props.onBlur.call(t,n),e.onInputBlur(n)}});return b.default.cloneElement(t,n)}}]),t}(v.Component);C.displayName="TrackInputChanges",C.propTypes={onNewValue:x.default.func},C.defaultProps={onNewValue:h.default},t.default=C,e.exports=t.default},"./client/lib/embed-frame-markup/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.body,n=e.scripts,o=e.styles;return t||n||o?(0,d.renderToStaticMarkup)(l.default.createElement("html",null,l.default.createElement("head",null,(0,c.default)((0,s.default)(o,function(e){return l.default.createElement("link",{rel:"stylesheet",media:e.media,href:e.src})})),l.default.createElement("style",{dangerouslySetInnerHTML:{__html:"a { cursor: default; }"}})),l.default.createElement("body",{style:{margin:0}},l.default.createElement("div",{dangerouslySetInnerHTML:{__html:t}}),l.default.createElement("script",{src:p}),l.default.createElement("script",{dangerouslySetInnerHTML:{__html:"\n\t\t\t\t\t[ 'click', 'dragstart' ].forEach( function( type ) {\n\t\t\t\t\t\tdocument.addEventListener( type, function( event ) {\n\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t\tevent.stopImmediatePropagation();\n\t\t\t\t\t\t}, true );\n\t\t\t\t\t} );\n\t\t\t\t"}}),(0,c.default)((0,s.default)(n,function(e){var t=void 0;return e.extra&&(t=l.default.createElement("script",{dangerouslySetInnerHTML:{__html:e.extra}})),(0,c.default)({extra:t,script:l.default.createElement("script",{src:e.src})})}))))):""}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/lodash/mapValues.js"),s=o(i);t.default=r;var a=n("./node_modules/react/react.js"),l=o(a),d=n("./node_modules/react-dom/server.js"),u=n("./node_modules/react-addons-create-fragment/index.js"),c=o(u),p="https://s0.wp.com/wp-includes/js/jquery/jquery.js";e.exports=t.default},"./client/lib/embeds/actions.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./client/dispatcher/index.js"),i=o(r),s=n("./client/lib/wp/browser.js"),a=o(s);t.default={fetch:function(e,t){var n=a.default.undocumented().site(e),o=void 0;t?(i.default.handleViewAction({type:"FETCH_EMBED",siteId:e,url:t}),o={embed_url:t,force:"wpcom"}):i.default.handleViewAction({type:"FETCH_EMBEDS",siteId:e}),n.embeds(o,function(n,o){t?i.default.handleServerAction({type:"RECEIVE_EMBED",siteId:e,url:t,data:o,error:n}):i.default.handleServerAction({type:"RECEIVE_EMBEDS",siteId:e,embeds:o?o.embeds:null,error:n})})}},e.exports=t.default},"./client/lib/embeds/list-store.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/helpers/defineProperty.js"),i=o(r),s=n("./node_modules/babel-runtime/core-js/object/assign.js"),a=o(s),l=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/createClass.js"),f=o(p),m=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),h=o(m),g=n("./node_modules/babel-runtime/helpers/inherits.js"),y=o(g),v=n("./node_modules/flux/utils.js"),b=n("./client/dispatcher/index.js"),_=o(b),x=/\(\?P?<([\w$]+)>/g,C=/^([^\w\s\\])(.*)([^\w\s\\])([gim])?$/,E=function(e){function t(){return(0,c.default)(this,t),(0,h.default)(this,(t.__proto__||(0,d.default)(t)).apply(this,arguments))}return(0,y.default)(t,e),(0,f.default)(t,[{key:"getInitialState",value:function(){return{}}},{key:"get",value:function(e){return this.getState()[e]}},{key:"reduce",value:function(e,t){switch(t=t.action,t.type){case"FETCH_EMBEDS":e=(0,a.default)({},e,(0,i.default)({},t.siteId,{status:"LOADING"}));break;case"RECEIVE_EMBEDS":if(t.error)e=(0,a.default)({},e,(0,i.default)({},t.siteId,{status:"ERROR"}));else{var n=t.embeds.map(function(e){e=e.replace(x,"(");var t=e.match(C);if(t&&t[1]===t[3])return new RegExp(t[2],t[4]);try{return new RegExp(e)}catch(e){return!1}}).filter(Boolean);e=(0,a.default)({},e,(0,i.default)({},t.siteId,{status:"LOADED",embeds:n}))}}return e}}]),t}(v.ReduceStore);t.default=new E(_.default),e.exports=t.default},"./client/lib/embeds/store.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/helpers/defineProperty.js"),i=o(r),s=n("./node_modules/babel-runtime/core-js/object/assign.js"),a=o(s),l=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/createClass.js"),f=o(p),m=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),h=o(m),g=n("./node_modules/babel-runtime/helpers/inherits.js"),y=o(g),v=n("./node_modules/flux/utils.js"),b=n("./client/dispatcher/index.js"),_=o(b),x=function(e){function t(){return(0,c.default)(this,t),(0,h.default)(this,(t.__proto__||(0,d.default)(t)).apply(this,arguments))}return(0,y.default)(t,e),(0,f.default)(t,[{key:"getInitialState",value:function(){return{}}},{key:"get",value:function(e){var t=this.getState()[e];return t?t:{}}},{key:"reduce",value:function(e,t){switch(t=t.action,t.type){case"STOP_EDITING_POST":e={};break;case"FETCH_EMBED":e=(0,a.default)({},e,(0,i.default)({},t.url,{status:"LOADING"}));break;case"RECEIVE_EMBED":t.error?e=(0,a.default)({},e,(0,i.default)({},t.url,{status:"ERROR"})):t.data&&(e=(0,a.default)({},e,(0,i.default)({},t.url,{status:"LOADED",body:t.data.result,scripts:t.data.scripts,styles:t.data.styles})))}return e}}]),t}(v.ReduceStore);t.default=new x(_.default),e.exports=t.default},"./client/lib/infinite-list/actions.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var r=n("./node_modules/lodash/throttle.js"),i=o(r),s=n("./node_modules/lodash/isEqual.js"),a=o(s),l=n("./client/dispatcher/index.js"),d=n("./client/lib/infinite-list/scroll-store.js"),u=n("./client/lib/infinite-list/positions-store.js"),c=null,p=null,f=1e3,m={leading:!1};e.exports={storePositions:(0,i.default)(function(e,t){c||setTimeout(function(){var e=u.get(c.url);(0,a.default)(c.positions,e)||l.handleViewAction({type:"INFINITE_LIST_POSITION_CHANGED",url:c.url,positions:c.positions}),c=null},0),c={url:e,positions:t}},f,m),storeScroll:(0,i.default)(function(e,t){p||setTimeout(function(){var e=d.get(p.url);p.scrollPosition!==e&&l.handleViewAction({type:"SCROLL_CHANGED",url:p.url,scrollPosition:p.scrollPosition}),p=null},0),p={url:e,scrollPosition:t}},f,m)}},"./client/lib/infinite-list/positions-store.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var n=c.get(e);a("comparing positions:",e,n,t),(0,s.default)(n,t)||(a("storing values:",e,t),u[e]=t,c.emit("change"))}var i=n("./node_modules/lodash/isEqual.js"),s=o(i),a=n("./node_modules/debug/browser.js")("calypso:infinite-list:positions-store"),l=n("./client/dispatcher/index.js"),d=n("./client/lib/mixins/emitter/index.js"),u={},c={get:function(e){return a("positions-store:get(): ",e,u),u[e]}};d(c),c.dispatchToken=l.register(function(e){var t=e.action;switch(t.type){case"INFINITE_LIST_POSITION_CHANGED":r(t.url,t.positions)}}),e.exports=c},"./client/lib/infinite-list/scroll-store.js":function(e,t,n){"use strict";function o(e,t){var n=s.get(e);n!==t&&(i[e]=t)}var r=n("./client/dispatcher/index.js"),i={},s={get:function(e){return i[e]}};s.dispatchToken=r.register(function(e){var t=e.action;switch(t.type){case"SCROLL_CHANGED":o(t.url,t.scrollPosition)}}),e.exports=s},"./client/lib/media-serialization/constants.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Formats={DOM:"DOM",STRING:"STRING",SHORTCODE:"SHORTCODE",OBJECT:"OBJECT",API:"API",UNKNOWN:"UNKNOWN"},t.MediaTypes={IMAGE:"IMAGE",VIDEO:"VIDEO",AUDIO:"AUDIO",UNKNOWN:"UNKNOWN"}},"./client/lib/media-serialization/create-element-from-string.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=void 0;if(document.implementation&&document.implementation.createHTMLDocument)t=document.implementation.createHTMLDocument("").body;else if("undefined"!=typeof DOMParser)try{return(new DOMParser).parseFromString(e,"text/html").body.firstChild}catch(e){}return t=t||document.createElement("div"),t.innerHTML=e,t.firstChild},e.exports=t.default},"./client/lib/media-serialization/detect-format.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/helpers/typeof.js"),i=o(r),s=n("./node_modules/lodash/includes.js"),a=o(s);t.default=function(e){return"string"==typeof e?l.Formats.STRING:"object"===("undefined"==typeof e?"undefined":(0,i.default)(e))&&"string"==typeof e.nodeName?l.Formats.DOM:e&&e.tag&&(0,a.default)(c,e.type)?l.Formats.SHORTCODE:e&&e.type&&(0,a.default)(l.MediaTypes,e.type)?l.Formats.OBJECT:u.default.getMimePrefix(e)?l.Formats.API:l.Formats.UNKNOWN};var l=n("./client/lib/media-serialization/constants.js"),d=n("./client/lib/media/utils.js"),u=o(d),c=["closed","self-closing","single"];e.exports=t.default},"./client/lib/media-serialization/index.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var n=(0,s.default)(e);return l.default[n.toLowerCase()].deserialize(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.deserialize=r;var i=n("./client/lib/media-serialization/detect-format.js"),s=o(i),a=n("./client/lib/media-serialization/strategies/index.js"),l=o(a)},"./client/lib/media-serialization/strategies/api.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){var t={media:(0,s.default)({transient:!1},e),appearance:{}};switch(l.default.getMimePrefix(e)){case"image":t.type=d.MediaTypes.IMAGE;break;case"audio":t.type=d.MediaTypes.AUDIO;break;case"video":t.type=d.MediaTypes.VIDEO}return t}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/lodash/assign.js"),s=o(i);t.deserialize=r;var a=n("./client/lib/media/utils.js"),l=o(a),d=n("./client/lib/media-serialization/constants.js")},"./client/lib/media-serialization/strategies/dom.js":function(e,t,n){"use strict";function o(e,t){return t.type=i.MediaTypes.IMAGE,t.media.URL=e.getAttribute("src"),t.media.alt=e.getAttribute("alt"),t.media.transient=e.hasAttribute("data-istransient"),["width","height"].forEach(function(n){var o="natural"+n[0].toUpperCase()+n.slice(1),r=e.getAttribute(n)||e[o]||e[n];r&&isFinite(r)&&(t.media[n]=parseInt(r,10))}),s.test(e.className)&&(t.appearance.size=e.className.match(s)[1]),l.test(e.className)&&(t.appearance.align=e.className.match(l)[1]),a.test(e.className)&&(t.media.ID=e.className.match(a)[1],isFinite(t.media.ID)&&(t.media.ID=parseInt(t.media.ID,10))),t}function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{media:{},appearance:{}};switch(e.nodeName){case"IMG":t=o(e,t)}return t}Object.defineProperty(t,"__esModule",{value:!0}),t.deserialize=r;var i=n("./client/lib/media-serialization/constants.js"),s=/\bsize-(\w+)\b/,a=/\bwp-image-((media-)?\d+)\b/,l=/\balign(left|center|right|none)\b/},"./client/lib/media-serialization/strategies/index.js":function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./client/lib/media-serialization/strategies/dom.js"),i=o(r),s=n("./client/lib/media-serialization/strategies/string.js"),a=o(s),l=n("./client/lib/media-serialization/strategies/shortcode.js"),d=o(l),u=n("./client/lib/media-serialization/strategies/object.js"),c=o(u),p=n("./client/lib/media-serialization/strategies/api.js"),f=o(p),m=n("./client/lib/media-serialization/strategies/unknown.js"),h=o(m);t.default={dom:i,string:a,shortcode:d,object:c,api:f,unknown:h},e.exports=t.default},"./client/lib/media-serialization/strategies/object.js":function(e,t,n){"use strict";function o(e){return e}Object.defineProperty(t,"__esModule",{value:!0}),t.deserialize=o},"./client/lib/media-serialization/strategies/shortcode.js":function(e,t,n){"use strict";function o(e,t){if(e.attrs&&e.attrs.named&&(l.test(e.attrs.named.align)&&(t.appearance.align=e.attrs.named.align.match(l)[1]),a.test(e.attrs.named.id)&&(t.media.ID=parseInt(e.attrs.named.id.match(a)[1],10)),t.media.width&&isFinite(e.attrs.named.width)&&(t.media.width=parseInt(e.attrs.named.width,10))),!e.content)return t;var n=e.content.match(s);return n&&n[2]&&(t.media.caption=n[2].trim()),n?(0,i.deserialize)(n[1],t):t}function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{media:{},appearance:{}};switch(e.tag){case"caption":t=o(e,t)}return t}Object.defineProperty(t,"__esModule",{value:!0}),t.deserialize=r;var i=n("./client/lib/media-serialization/index.js"),s=/((?:<a [^>]+>)?<img [^>]+>(?:<\/a>)?)([\s\S]*)/i,a=/attachment_(\d+)/,l=/align(\w+)/},"./client/lib/media-serialization/strategies/string.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var n=u.default.parse(e);return n?(0,c.deserialize)(n,t):t}function i(e,t){var n=(0,f.default)(e);return n instanceof window.Element?(0,c.deserialize)(n,t):t}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{media:{},appearance:{}};return[r,i].reduce(function(n,o){return(0,l.default)(n,o(e,t))},{})}Object.defineProperty(t,"__esModule",{value:!0});var a=n("./node_modules/babel-runtime/core-js/object/assign.js"),l=o(a);t.deserialize=s;var d=n("./client/lib/shortcode/index.js"),u=o(d),c=n("./client/lib/media-serialization/index.js"),p=n("./client/lib/media-serialization/create-element-from-string.js"),f=o(p)},"./client/lib/media-serialization/strategies/unknown.js":function(e,t,n){"use strict";function o(){return{type:r.MediaTypes.UNKNOWN,media:{},appearance:{}}}Object.defineProperty(t,"__esModule",{value:!0}),t.deserialize=o;var r=n("./client/lib/media-serialization/constants.js")},"./client/lib/media/library-selected-store.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){e in h._media||(h._media[e]=[])}function i(e,t){h._media[e]=(0,c.default)(t,"ID")}function s(e,t){r(e),h._media[e].push(t.ID)}function a(e,t,n){var o;n||(n=t.ID),n&&e in h._media&&(o=h._media[e].indexOf(n),-1!==o&&h._media[e].splice(o,1,t.ID))}function l(e,t){t.forEach(function(t){a(e,t)})}function d(e,t){var n;e in h._media&&(n=h._media[e].indexOf(t.ID),-1!==n&&h._media[e].splice(n,1))}var u=n("./node_modules/lodash/map.js"),c=o(u),p=n("./client/lib/media/store.js"),f=n("./client/dispatcher/index.js"),m=n("./client/lib/mixins/emitter/index.js"),h={_media:{}};m(h),h.get=function(e,t){return p.get(e,t)},h.getAll=function(e){return e in h._media?h._media[e].map(function(t){return p.get(e,t)}).filter(function(e){return e&&(e.guid||e.transient)}):[]},h.dispatchToken=f.register(function(e){var t=e.action;switch(f.waitFor([p.dispatchToken]),t.type){case"CHANGE_MEDIA_SOURCE":i(t.siteId,[]),h.emit("change");break;case"SET_MEDIA_LIBRARY_SELECTED_ITEMS":if(t.error||!t.siteId||!t.data||!Array.isArray(t.data))break;i(t.siteId,t.data),h.emit("change");break;case"CREATE_MEDIA_ITEM":!t.error&&t.siteId&&t.data&&(s(t.siteId,t.data),h.emit("change"));break;case"RECEIVE_MEDIA_ITEM":if(t.error&&t.siteId&&t.id&&(d(t.siteId,{ID:t.id}),h.emit("change")),!t.siteId||!t.data||t.error)break;a(t.siteId,t.data,t.id),h.emit("change");break;case"RECEIVE_MEDIA_ITEMS":!t.error&&t.siteId&&t.data&&t.data.media&&(l(t.siteId,t.data.media),h.emit("change"));break;case"REMOVE_MEDIA_ITEM":if(!t.siteId||!t.data||t.error)break;d(t.siteId,t.data),h.emit("change")}}),e.exports=h},"./client/lib/mixins/url-search/build-url.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var r=n("./node_modules/lodash/pick.js"),i=o(r),s=n("./node_modules/url/url.js");e.exports=function(e,t){var n=s.parse(e,!0);return t?n.query.s=t:delete n.query.s,n=(0,i.default)(n,"pathname","hash","query"),s.format(n).replace(/\%20/g,"+")}},"./client/lib/popup-monitor/index.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(){this.intervals={},this.monitorInterval=null}var i=n("./node_modules/babel-runtime/core-js/object/keys.js"),s=o(i),a=n("./client/lib/mixins/emitter/index.js");a(r.prototype),r.prototype.open=function(e,t,n){var o;return t=t||Date.now(),o=window.open(e,t,n),this.startMonitoring(t,o),this},r.prototype.getScreenCenterSpecs=function(e,t){var n="undefined"!=typeof window.screenTop?window.screenTop:window.screenY,o="undefined"!=typeof window.screenLeft?window.screenLeft:window.screenX;return["width="+e,"height="+t,"top="+(n+window.innerHeight/2-t/2),"left="+(o+window.innerWidth/2-e/2)].join()},r.prototype.isOpen=function(e){var t=!1;try{t=this.intervals[e]&&this.intervals[e].closed}catch(e){}return!t},r.prototype.checkStatus=function(){for(var e in this.intervals)this.intervals.hasOwnProperty(e)&&!this.isOpen(e)&&(this.emit("close",e),delete this.intervals[e]);0===(0,s.default)(this.intervals).length&&(clearInterval(this.monitorInterval),delete this.monitorInterval)},r.prototype.startMonitoring=function(e,t){this.monitorInterval||(this.monitorInterval=setInterval(this.checkStatus.bind(this),100)),this.intervals[e]=t},e.exports=r},"./client/lib/posts/actions.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){var o,r=C.get();("string"==typeof e||Array.isArray(e))&&(e=(0,u.default)([].concat(e).map(function(e){return[e,t]}))),o=(r.metadata||[]).filter(function(t){return!e.hasOwnProperty(t.key)}),(0,l.default)(e).forEach(function(t){var r={key:t,operation:n};"delete"!==n&&(r.value=e[t]),o.push(r)}),P.handleViewAction({type:"EDIT_POST",post:{metadata:o}})}function i(e){return e=(0,m.default)(e),e=(0,y.normalizeTermsForApi)(e),e.author&&(e.author=e.author.ID),e}var s,a=n("./node_modules/babel-runtime/core-js/object/keys.js"),l=o(a),d=n("./node_modules/lodash/fromPairs.js"),u=o(d),c=n("./node_modules/lodash/defer.js"),p=o(c),f=n("./node_modules/lodash/clone.js"),m=o(f),h=n("./node_modules/lodash/assign.js"),g=o(h),y=n("./client/state/posts/utils.js"),v=n("./node_modules/debug/browser.js")("calypso:posts"),b=n("./node_modules/store/store.js"),_=n("./client/lib/wp/browser.js"),x=n("./client/lib/posts/posts-store.js"),C=n("./client/lib/posts/post-edit-store.js"),E=n("./client/lib/posts/post-list-store-factory.js"),w=n("./client/lib/preferences/store.js"),j=n("./client/lib/sites-list/index.js")(),S=n("./client/lib/posts/utils.js"),T=n("./client/lib/version-compare/index.js"),P=n("./client/dispatcher/index.js"),k=n("./client/lib/posts/stats.js");
s={startEditingNew:function(e,t){var n;t=t||{},n={type:"DRAFT_NEW_POST",siteId:e,postType:t.type||"post",title:t.title,content:t.content},P.handleViewAction(n)},startEditingExisting:function(e,t){var n,o=C.get();e&&(o&&o.site_ID===e&&o.ID===t||(P.handleViewAction({type:"START_EDITING_POST",siteId:e,postId:t}),n=_.site(e).post(t),n.get({context:"edit",meta:"autosave"},function(e,t){P.handleServerAction({type:"RECEIVE_POST_TO_EDIT",error:e,post:t})})))},stopEditing:function(){P.handleViewAction({type:"STOP_EDITING_POST"})},autosave:function(e){var t,n=C.get(),o=C.getSavedPost(),r=_.undocumented().site(n.site_ID);if(e=e||function(){},!C.isDirty())return e(new Error("NOT_DIRTY"));if(b.set("wpcom-autosave:"+n.site_ID+":"+n.ID,n),S.isPublished(o)||S.isPublished(n)){if(t=j.getSite(n.site_ID),!n.ID||!t||t.jetpack&&T(t.options.jetpack_version,"3.7.0-dev","<"))return e(new Error("NO_AUTOSAVE"));P.handleViewAction({type:"POST_AUTOSAVE",post:n}),r.postAutosave(n.ID,{content:n.content,title:n.title,excerpt:n.excerpt},function(t,n){P.handleServerAction({type:"RECEIVE_POST_AUTOSAVE",error:t,autosave:n}),e(t,n)})}else s.saveEdited(null,null,e,{recordSaveEvent:!1})},blockSave:function(e){P.handleViewAction({type:"BLOCK_EDIT_POST_SAVE",key:e})},unblockSave:function(e){P.handleViewAction({type:"UNBLOCK_EDIT_POST_SAVE",key:e})},edit:function(e){P.handleViewAction({type:"EDIT_POST",post:e})},editRawContent:function(e){P.handleViewAction({type:"EDIT_POST_RAW_CONTENT",content:e})},resetRawContent:function(){P.handleViewAction({type:"RESET_POST_RAW_CONTENT"})},updateMetadata:function(e,t){r(e,t,"update")},deleteMetadata:function(e){r(e,null,"delete")},saveEdited:function(e,t,n,o){var r,s,a,d,u,c,f;return P.handleViewAction({type:"EDIT_POST",post:e}),r=C.get(),C.hasContent()?C.isSaveBlocked()?void(0,p.default)(n,new Error("SAVE_BLOCKED"),r):(d=C.getChangedAttributes(),(0,l.default)(d).length?(d=i(d),u=C.getRawContent(),c=w.get("editor-mode"),f=!r.ID,P.handleViewAction({type:"EDIT_POST_SAVE"}),s=_.site(r.site_ID).post(r.ID),a={context:"edit",apiVersion:"1.2"},o&&o.recordSaveEvent===!1||k.recordSaveEvent(t),(d&&"future"===d.status&&S.isFutureDated(r)||d&&"publish"===d.status&&S.isBackDated(r))&&(d=(0,g.default)({},d,{status:"publish",date:r.date})),void s[f?"add":"update"](a,d,function(e,t){var o,r;r=w.get("editor-mode"),e||(o=x.get(t.global_ID)),P.handleServerAction({type:"RECEIVE_POST_BEING_EDITED",error:e,rawContent:c===r?u:null,isNew:f,original:o,post:t}),n(e,t)})):void(0,p.default)(n,new Error("NO_CHANGE"),r)):void(0,p.default)(n,new Error("NO_CONTENT"),r)},update:function(e,t,n){var o=_.site(e.site_ID).post(e.ID);o.update(t,s.receiveUpdate.bind(null,n))},trash:function(e,t){var n=_.site(e.site_ID).post(e.ID);n.delete(s.receiveUpdate.bind(null,t))},restore:function(e,t){var n=_.site(e.site_ID).post(e.ID);n.restore(s.receiveUpdate.bind(null,t))},queryPosts:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";P.handleViewAction({type:"QUERY_POSTS",options:e,postListStoreId:t})},fetchNextPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",t=E(e);if(!t.isLastPage()&&!t.isFetchingNextPage()){P.handleViewAction({type:"FETCH_NEXT_POSTS_PAGE",postListStoreId:e});var n=t.getID(),o=t.getNextPageParams(),r=t.getSiteId();r?_.site(r).postsList(o,s.receivePage.bind(null,n,e)):_.me().postsList(o,s.receivePage.bind(null,n,e))}},receivePage:function(e,t,n,o){P.handleServerAction({type:"RECEIVE_POSTS_PAGE",id:e,postListStoreId:t,error:n,data:o})},fetchUpdated:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",t=E(e);if(!t.isFetchingNextPage()){P.handleViewAction({type:"FETCH_UPDATED_POSTS",postListStoreId:e});var n=t.getID(),o=t.getUpdatesParams(),r=t.getSiteId();r?(v("Fetching posts that have been updated for %s since %s %o",r,o.modified_after,o),_.site(r).postsList(o,s.receiveUpdated.bind(null,n,e))):(v("Fetching posts that have been updated since %s %o",o.modified_after,o),_.me().postsList(o,s.receiveUpdated.bind(null,n,e)))}},receiveUpdated:function(e,t,n,o){P.handleServerAction({type:"RECEIVE_UPDATED_POSTS",id:e,postListStoreId:t,error:n,data:o})},receiveUpdate:function(e,t,n){var o;t||(o=x.get(n.global_ID)),P.handleServerAction({type:"RECEIVE_UPDATED_POST",error:t,original:o,post:n}),e(t,n)},fetchCounts:function(e,t){P.handleViewAction({type:"FETCH_POST_COUNTS",siteId:e}),_.undocumented().site(e).postCounts(t,function(t,n){P.handleServerAction({type:"RECEIVE_POST_COUNTS",error:t,data:n,siteId:e})})}},e.exports=s},"./client/lib/posts/post-list-cache-store.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=(new Date).getTime(),n=e.timeSaved;return t-n>I}function i(e){return l(e)?P[e].list:void(P[e]&&P[e].dirty&&(D("delete cached list %o",e),delete P[e],delete k[e]))}function s(e){var t=d(e.query);P[t]&&P[t].dirty||(P[t]={timeStored:(new Date).getTime(),dirty:!1,list:e,listKey:t})}function a(e,t){var n=N.getSite(e.site_ID),o=[n.slug,n.ID,!1],r=[e.status,t],i=void 0,s=void 0,a=void 0,l=void 0;for(s in P)P.hasOwnProperty(s)&&(a=P[s],l=a.list,l.query.type===e.type&&-1!==o.indexOf(l.query.siteId)&&(i=l.query.status.split(","),0!==(0,_.default)(i,r).length&&(a.dirty=!0)));T.cacheIndex.clearRecordsByParamFilter(function(e){var t=o.slice(0,-1),n=["/me/posts"].concat((0,v.default)(t.map(function(e){return"/sites/"+e+"/posts"}))),i=e.query&&e.query.status?e.query.status.split(","):[],s=(0,_.default)(i,r);return n.indexOf(e.path)!==-1&&!!s.length})}function l(e){return P[e]&&!r(P[e])&&!P[e].dirty}function d(e){var t=[],n=(0,g.default)(e).sort();return n.forEach(function(n){t.push(n+"-"+e[n])}),t.join(":")}function u(e,t,n){D("setCanonicalList %o %o (%o)",e,t,n),k[e]=k[e]||{},k[e][t]=n}function c(e,t){D("getCanonicalList %o %o",e,t);var n=k[e];if(!n||"object"!==("undefined"==typeof n?"undefined":(0,m.default)(n)))return!1;var o=(0,g.default)(n);return o[0]!==t?(delete P[e],delete k[e],!1):n[t]}function p(e,t){D("deleteCanonicalList %o %o",e,t);var n=k[e];n&&n[t]&&delete n[t]}Object.defineProperty(t,"__esModule",{value:!0});var f=n("./node_modules/babel-runtime/helpers/typeof.js"),m=o(f),h=n("./node_modules/babel-runtime/core-js/object/keys.js"),g=o(h),y=n("./node_modules/babel-runtime/helpers/toConsumableArray.js"),v=o(y),b=n("./node_modules/lodash/intersection.js"),_=o(b);t.getCacheKey=d,t.setCanonicalList=u,t.getCanonicalList=c,t.deleteCanonicalList=p;var x=n("./node_modules/debug/browser.js"),C=o(x),E=n("./client/lib/sites-list/index.js"),w=o(E),j=n("./client/dispatcher/index.js"),S=o(j),T=n("./client/lib/wp/sync-handler/cache-index.js"),P={},k={},I=3e5,N=(0,w.default)(),R={get:i,_reset:function(){P={}}},D=(0,C.default)("calypso:posts-list:cache");R.dispatchToken=S.default.register(function(e){var t=e.action,o=n("./client/lib/posts/post-list-store-factory.js")();switch(S.default.waitFor([o.dispatchToken]),t.type){case"FETCH_NEXT_POSTS_PAGE":s(o.get());break;case"RECEIVE_POSTS_PAGE":s(o.get());break;case"RECEIVE_UPDATED_POSTS":s(o.get());break;case"RECEIVE_UPDATED_POST":case"RECEIVE_POST_BEING_EDITED":t.post&&(a(t.post,t.original?t.original.status:null),s(o.get()))}}),t.default=R},"./client/lib/posts/post-list-store-factory.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=e||"default";return a[t]||(a[t]=new s.default(t)),a[t]}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var i=n("./client/lib/posts/post-list-store.js"),s=o(i),a={};r._reset=function(){a={}},e.exports=t.default},"./client/lib/posts/post-list-store.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(e.length<3||t.length<2)return[];var n=e.indexOf(t[0]);if(n===-1)return r(e,t.slice(1));var o=e.indexOf(t.slice(-1)[0]);if(o===-1)return r(e,t.slice(0,-1));var i=e.slice(n,o+1);return(0,S.default)(i,t)}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),s=o(i),a=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),l=o(a),d=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(d),c=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),p=o(c),f=n("./node_modules/babel-runtime/helpers/inherits.js"),m=o(f),h=n("./node_modules/babel-runtime/helpers/typeof.js"),g=o(h),y=n("./node_modules/lodash/transform.js"),v=o(y),b=n("./node_modules/lodash/some.js"),_=o(b),x=n("./node_modules/lodash/maxBy.js"),C=o(x),E=n("./node_modules/lodash/last.js"),w=o(E),j=n("./node_modules/lodash/difference.js"),S=o(j),T=n("./node_modules/lodash/clone.js"),P=o(T),k=n("./node_modules/lodash/assign.js"),I=o(k);t.getRemovedPosts=r,t.default=function(e){function t(e){var t=(0,I.default)({},H,e);"draft,pending"===t.status&&(t.orderBy="modified");var n=(0,z.getCacheKey)(t),o=U.default.get(n);o?d=o:(d={id:V,postIds:[],errors:[],page:0,isLastPage:!1,isFetchingNextPage:!1,isFetchingUpdated:!1,query:t,listKey:n},V++)}function n(e){return(0,v.default)(e,function(e,t,n){null!=t&&(e[n]=t)},{})}function o(){var e=d.query.orderBy;d.postIds.sort(function(t,n){var o=B.default.get(t),r=B.default.get(n),i=o[e],s=r[e];return i===s?o.title===r.title?0:o.title>r.title?1:-1:i>s?-1:1})}function i(e,t,n){if(t||!n||"object"!==("undefined"==typeof n?"undefined":(0,g.default)(n)))return t=t||{message:"Error fetching PostsList: empty data response"},W("Error fetching PostsList from api:",t),t.timestamp=Date.now(),void d.errors.push(t);var i=n.found,s=n.meta,a=n.posts,l=n.__sync,u=l||{},c=u.responseSource,p=u.requestKey;if(e===d.id){d.isFetchingNextPage=!1,d.nextPageHandle=s&&s.next_page,d.nextPageHandle&&i||(d.isLastPage=!0);var f=a.map(function(e){return e.global_ID}),m=d.postIds.slice(0);if("local"===c&&p)(0,z.setCanonicalList)(d.listKey,p,m);else{var h=(0,z.getCanonicalList)(d.listKey,p);h&&(W("canonicalList found (%o)",h),m=h,(0,z.deleteCanonicalList)(d.listKey,p))}var y=r(m,f);y.length&&(W("removePosts (%o)",y),m=(0,S.default)(m,y));var v=(0,S.default)(f,m);v.length&&(W("newPosts (%o)",v),m=m.concat(v),d.page++),d.postIds=m,o()}}function a(e,t,n){var r=void 0,i=void 0,s=void 0;return t?void W("An error occurred while fetching updated posts %o",t):void(e===d.id&&n.posts.length&&(r=n.posts,W("Fetched updated posts:",r),i=r.map(function(e){return e.global_ID}),s=(0,S.default)(i,d.postIds),s.length&&(d.postIds=d.postIds.concat(s),o())))}if(!e)throw new Error("must supply a post-list-store id");var d={postIds:[],errors:[],query:(0,P.default)(H),page:0,nextPageHandle:!1,isLastPage:!1,isFetchingNextPage:!1,isFetchingUpdated:!1};return new(function(o){function r(){(0,l.default)(this,r);var t=(0,p.default)(this,(r.__proto__||(0,s.default)(r)).call(this));return t.id=e,t.dispatchToken=O.default.register(t.handlePayload.bind(t)),t}return(0,m.default)(r,o),(0,u.default)(r,[{key:"get",value:function(){return d}},{key:"getID",value:function(){return d.id}},{key:"getSiteId",value:function(){return d.query.siteId}},{key:"getAll",value:function(){return d.postIds.map(function(e){return B.default.get(e)})}},{key:"getTree",value:function(){var e=[];return d.postIds.forEach(function(t){var n=(0,P.default)(B.default.get(t));n.parent=n.parent?n.parent.ID:0,e.push(n)}),(0,L.default)("ID").treeify(e)}},{key:"getPost",value:function(e){if(d.postIds.indexOf(e)>-1)return B.default.get(e)}},{key:"getPage",value:function(){return d.page}},{key:"off",value:function(e,t){this.removeListener(e,t)}},{key:"isLastPage",value:function(){return d.isLastPage}},{key:"isFetchingNextPage",value:function(){return d.isFetchingNextPage}},{key:"hasRecentError",value:function(){var e=30,t=Date.now();return(0,_.default)(d.errors,function(n){return t-n.timestamp<1e3*e})}},{key:"getNextPageParams",value:function(){var e={},t=d.query;return e.status=t.status,e.order_by=t.orderBy,e.order=t.order,e.author=t.author,e.number=t.perPage,e.type=t.type,e.page_handle=d.nextPageHandle,e.exclude_tree=t.exclude_tree,e.number=t.number,e.before=t.before,e.after=t.after,t.search&&(e.search=t.search),t.category&&(e.category=t.category),t.tag&&(e.tag=t.tag),e.siteId||(e.site_visibility="visible"),t.meta&&(e.meta=t.meta),n(e)}},{key:"getUpdatesParams",value:function(){var e={},t=d.query;return e.status=t.status,e.author=t.author,e.type=t.type,t.search&&(e.search=t.search),t.category&&(e.category=t.category),t.tag&&(e.tag=t.tag),e.siteId||(e.site_visibility="visible"),t.meta&&(e.meta=t.meta),d.postIds.length&&(e.modified_after=(0,C.default)(this.getAll(),function(e){return new Date(e.modified).getTime()}).modified,"modified"===t.orderBy||d.isLastPage||(e.after=this.getPost((0,w.default)(d.postIds)).date)),n(e)}},{key:"handlePayload",value:function(e){var n=e.action;if(!n.postListStoreId||n.postListStoreId===this.id||"RECEIVE_UPDATED_POST"===n.type)switch(O.default.waitFor([B.default.dispatchToken]),n.type){case"QUERY_POSTS":W("QUERY_POSTS",n),t(n.options),this.emit("change");break;case"FETCH_NEXT_POSTS_PAGE":W("FETCH_NEXT_POSTS_PAGE",n),d.isFetchingNextPage=!0,this.emit("change");break;case"RECEIVE_POSTS_PAGE":W("receivePage",n),i(n.id,n.error,n.data),this.emit("change");break;case"RECEIVE_UPDATED_POSTS":a(n.id,n.error,n.data),this.emit("change");break;case"RECEIVE_UPDATED_POST":n.post&&d.postIds.indexOf(n.post.global_ID)>-1&&this.emit("change")}}}]),r}(D.EventEmitter))};var N=n("./node_modules/debug/browser.js"),R=o(N),D=n("./node_modules/events/events.js"),M=n("./client/dispatcher/index.js"),O=o(M),A=n("./client/lib/tree-convert/index.js"),L=o(A),F=n("./client/lib/posts/posts-store.js"),B=o(F),z=n("./client/lib/posts/post-list-cache-store.js"),U=o(z),H={siteId:!1,type:"post",status:"publish",orderBy:"date",order:"DESC",author:!1,search:!1,category:!1,tag:!1,perPage:20},W=(0,R.default)("calypso:posts-list"),V=0},"./client/lib/posts/posts-store.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=a.get(e.global_ID);t&&(0,d.default)(e,t)||(f[e.global_ID]=e)}function i(e,t){var n=t||{},o=n.global_ID;if(!o)return void u("global_ID is required for a post",t);var i=a.get(o);return i&&"local"===e?void u("existing record (%o), do not overwrite with local response",i):void c.normalizeSync(t,function(e,t){r(t)})}function s(e,t){var n=i.bind(null,t);e.forEach(n)}var a,l=n("./node_modules/lodash/isEqual.js"),d=o(l),u=n("./node_modules/debug/browser.js")("calypso:posts"),c=n("./client/lib/posts/utils.js"),p=n("./client/dispatcher/index.js"),f={};a={get:function(e){return f[e]}},a.dispatchToken=p.register(function(e){var t=e.action;switch(t.type){case"RECEIVE_POSTS_PAGE":case"RECEIVE_UPDATED_POSTS":if(!t.error&&t.data.posts){var n=t.data.__sync&&t.data.__sync.responseSource;s(t.data.posts,n)}break;case"RECEIVE_UPDATED_POST":t.error||i("server",t.post)}}),e.exports=a},"./client/lib/posts/stats.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var n=void 0,o=j.getSelectedSite();y.default.mc.bumpStat("editor_usage",e),o&&(n=o.jetpack?"jetpack":"wpcom",y.default.mc.bumpStat("editor_usage_"+n,e),t&&y.default.mc.bumpStat("editor_cpt_usage_"+n,t+"_"+e))}function i(e){y.default.mc.bumpStat("editor_actions",e)}function s(e,t,n){y.default.ga.recordEvent("Editor",e,t,n)}function a(e){var t=b.default.get(),n=b.default.getSavedPost();if(t&&n){var o=n.status,a=t.status,l="calypso_editor_"+t.type+"_",d=!1,u=!1,c=!1,p=null;t.ID||x.default.isPublished(t)?"draft"===a?l+="savedraft":o===a?(c="edit",l+="update"):"publish"===a||"private"===a?(l+="publish",c="new",e&&e.isConfirmationSidebarEnabled&&(p="confirmation_sidebar")):"pending"===a?l+="pending":"future"===a&&(l+="schedule",d="status-schedule",u="Scheduled Post",e&&e.isConfirmationSidebarEnabled&&(p="confirmation_sidebar")):l+="savedraft",c&&r(c,t.type),d&&i(d),u&&s(u),w("recordSaveEvent %s currentStatus=%s nextStatus=%s",l,o,a),y.default.tracks.recordEvent(l,{post_id:t.ID,post_type:t.type,visibility:x.default.getVisibility(t),current_status:o,next_status:a,context:p})}}function l(e){T("editor-button","calypso_"+e),y.default.ga.recordEvent("Editor","Clicked TinyMCE Button",e),w("TinyMCE button click",e,"mc=",S)}function d(e){T("html-editor-button","calypso_"+e),y.default.ga.recordEvent("Editor","Clicked TinyMCE HTML Button",e),w("TinyMCE HTML button click",e,"mc=",S)}Object.defineProperty(t,"__esModule",{value:!0});var u=n("./node_modules/lodash/noop.js"),c=o(u);t.recordStat=i,t.recordEvent=s,t.recordSaveEvent=a,t.recordTinyMCEButtonClick=l,t.recordTinyMCEHTMLButtonClick=d;var p=n("./node_modules/debug/browser.js"),f=o(p),m=n("./client/config/index.js"),h=o(m),g=n("./client/lib/analytics/index.js"),y=o(g),v=n("./client/lib/posts/post-edit-store.js"),b=o(v),_=n("./client/lib/posts/utils.js"),x=o(_),C=n("./client/lib/sites-list/index.js"),E=o(C),w=(0,f.default)("calypso:posts:stats"),j=new E.default,S=Math.random()<=.01||"development"===(0,h.default)("env"),T=S?y.default.mc.bumpStat:c.default},"./client/lib/react-pass-to-children/index.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var r=n("./node_modules/lodash/assign.js"),i=o(r),s=n("./node_modules/react/react.js");e.exports=function(e,t){var n,o=(0,i.default)({},e.props,t);return delete o.children,s.Children.count(e.props.children)>1?(n=s.Children.map(e.props.children,function(e){return s.isValidElement(e)?s.cloneElement(e,o):e}),s.DOM.div(null,n)):s.cloneElement(e.props.children,o)}},"./client/lib/search-url/index.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){if(n)return void n(e);var o=(0,s.default)(window.location.href,e);d("search posts for:",e),t&&e?(d("replacing URL: "+o),l.default.replace(o)):(d("setting URL: "+o),l.default.show(o))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var i=n("./client/lib/mixins/url-search/build-url.js"),s=o(i),a=n("./node_modules/page/index.js"),l=o(a),d=n("./node_modules/debug/browser.js")("calypso:search-url");e.exports=t.default},"./client/lib/sharing/index.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./client/lib/popup-monitor/index.js"),i=o(r),s=function(e,t){var n=new i.default;n.open(e,null,"toolbar=0,location=0,status=0,menubar=0,"+n.getScreenCenterSpecs(780,500)),n.once("close",t)};t.default=s,e.exports=t.default},"./client/lib/shortcodes/actions.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){s.default.handleViewAction({type:d.ActionTypes.FETCH_SHORTCODE,payload:{siteId:e,shortcode:t}}),l.default.undocumented().site(e).shortcodes({shortcode:t},function(n,o){s.default.handleServerAction({type:d.ActionTypes.RECEIVE_SHORTCODE,payload:{siteId:e,shortcode:t,data:o},error:n})})}Object.defineProperty(t,"__esModule",{value:!0}),t.fetch=r;var i=n("./client/dispatcher/index.js"),s=o(i),a=n("./client/lib/wp/browser.js"),l=o(a),d=n("./client/lib/shortcodes/constants.js")},"./client/lib/shortcodes/constants.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.ActionTypes={FETCH_SHORTCODE:"FETCH_SHORTCODE",RECEIVE_SHORTCODE:"RECEIVE_SHORTCODE"},t.LoadStatus={LOADING:"LOADING",ERROR:"ERROR",LOADED:"LOADED"}},"./client/lib/shortcodes/store.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/helpers/defineProperty.js"),i=o(r),s=n("./node_modules/babel-runtime/core-js/object/assign.js"),a=o(s),l=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/createClass.js"),f=o(p),m=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),h=o(m),g=n("./node_modules/babel-runtime/helpers/inherits.js"),y=o(g),v=n("./node_modules/lodash/pickBy.js"),b=o(v),_=n("./node_modules/lodash/intersection.js"),x=o(_),C=n("./node_modules/flux/utils.js"),E=n("./client/dispatcher/index.js"),w=o(E),j=n("./client/lib/shortcode/index.js"),S=o(j),T=n("./client/lib/shortcodes/constants.js"),P=function(e){function t(){return(0,c.default)(this,t),(0,h.default)(this,(t.__proto__||(0,d.default)(t)).apply(this,arguments))}return(0,y.default)(t,e),(0,f.default)(t,[{key:"getInitialState",value:function(){return{}}},{key:"get",value:function(e,t){var n=this.getState();if(n[e]&&n[e][t])return n[e][t]}},{key:"reduce",value:function(e,t){switch(t=t.action,t.type){case T.ActionTypes.FETCH_SHORTCODE:e=(0,a.default)({},e,(0,i.default)({},t.payload.siteId,(0,a.default)({},e[t.payload.siteId],(0,i.default)({},t.payload.shortcode,{status:T.LoadStatus.LOADING}))));break;case T.ActionTypes.RECEIVE_SHORTCODE:e=(0,a.default)({},e,(0,i.default)({},t.payload.siteId,(0,a.default)({},e[t.payload.siteId],(0,i.default)({},t.payload.shortcode,{status:t.error?T.LoadStatus.ERROR:T.LoadStatus.LOADED})))),t.error||(0,a.default)(e[t.payload.siteId][t.payload.shortcode],{body:t.payload.data.result,scripts:t.payload.data.scripts,styles:t.payload.data.styles});break;case"RECEIVE_MEDIA_ITEMS":case"RECEIVE_MEDIA_ITEM":if(!e.hasOwnProperty(t.siteId))break;var n=void 0;n=Array.isArray(t.data.media)?t.data.media:[t.data];var o=n.map(function(e){return e.ID.toString()});e=(0,a.default)({},e,(0,i.default)({},t.siteId,(0,b.default)(e[t.siteId],function(e,t){var n=S.default.parse(t);if("gallery"!==n.tag||!n.attrs.named||!n.attrs.named.ids)return!0;var r=n.attrs.named.ids.split(",");return!(0,x.default)(r,o).length})))}return e}}]),t}(C.ReduceStore);t.default=new P(w.default),e.exports=t.default},"./client/lib/tree-convert/index.js":function(e,t,n){"use strict";function o(e){return this instanceof o?void(this.key=e||"id"):new o(e)}var r=n("./client/lib/tree-convert/tree-traverser.js");o.prototype.treeify=function(e){var t=[],n={};return e.forEach(function(t,o){n[e[o][this.key]]=t},this),e.forEach(function(e){var o;e.parent>0&&n[e.parent]?(o=n[e.parent],o.items=o.items||[],o.items.push(e)):(e.parent=0,t.push(e))}),this.sortItems(t),this.removeOrderProperty(t),t},o.prototype.untreeify=function(e,t){return t=t||[],e.forEach(function(e,n){e.items&&o.prototype.untreeify(e.items,t),e.order=n+1,t.push(e)}),t},o.prototype.sortItems=function(e){var t={};t.items=e,r.traverse(t,[function(e){return e.items&&e.items.sort(function(e,t){return e.order-t.order}),e}])},o.prototype.removeOrderProperty=function(e){var t={};t.items=e,r.traverse(t,[function(e){return e.items&&e.items.forEach(function(e){delete e.order}),e}])},e.exports=o},"./client/lib/tree-convert/tree-traverser.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){return s(t,function(t){return(0,p.default)(t.items,{id:e.id})})||t}function i(e,t,n){return t.forEach(function(t){e=t(e,n)},this),e.items&&(e.items=e.items.map(function(e){return i(e,t,n)})),e}function s(e,t){return t(e)?e:e.items?l(e.items,function(e){return s(e,t)}):void 0}function a(e,t,n){var o;if(e.items)for(o=0;o<e.items.length;o++){if(n(e.items[o]))return void(e.items[o]=t);a(e.items[o],t,n)}}function l(e,t){var n,o,r=e.length;for(n=0;n<r;n++)if(o=t(e[n]))return o}function d(e,t){return function(n){return n.id===t&&(n.items=n.items||[],n.items.push(e)),n}}function u(e,t,n){return function(o){var r,i="before"===n?0:1;return~(r=(0,m.default)(o.items,{id:t}))&&o.items.splice(r+i,0,e),o}}var c=n("./node_modules/lodash/some.js"),p=o(c),f=n("./node_modules/lodash/findIndex.js"),m=o(f);e.exports={traverse:function(e,t){return i(e,t,e)},parent:r,find:s,replaceItem:a,remover:function(e){return function(t){var n;return~(n=(0,m.default)(t.items,{id:e}))&&t.items.splice(n,1),t}},inserter:function(e,t,n){var o="child"===n?d:u;return o(e,t,n)}}},"./client/my-sites/comments/comment-navigation/comment-navigation-tab.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.CommentNavigationTab=void 0;var r=n("./node_modules/react/react.js"),i=o(r),s=n("./node_modules/classnames/index.js"),a=o(s),l=t.CommentNavigationTab=function(e){var t=e.children,n=e.className,o=e.onClick;return i.default.createElement("div",{className:(0,a.default)("comment-navigation__tab",n),onClick:o},t)};t.default=l},"./client/my-sites/media-library/content.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/freeze.js"),i=o(r),s=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/createClass.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),f=o(p),m=n("./node_modules/babel-runtime/helpers/inherits.js"),h=o(m),g=n("./node_modules/lodash/values.js"),y=o(g),v=n("./node_modules/lodash/noop.js"),b=o(v),_=n("./node_modules/lodash/mapValues.js"),x=o(_),C=n("./node_modules/lodash/head.js"),E=o(C),w=n("./node_modules/lodash/groupBy.js"),j=o(w),S=n("./node_modules/react/react.js"),T=o(S),P=n("./node_modules/react-redux/es/index.js"),k=n("./node_modules/react-addons-create-fragment/index.js"),I=o(k),N=n("./node_modules/prop-types/index.js"),R=o(N),D=n("./node_modules/page/index.js"),M=o(D),O=n("./node_modules/i18n-calypso/index.js"),A=n("./client/lib/analytics/index.js"),L=o(A),F=n("./client/lib/analytics/track-component-view/index.jsx"),B=o(F),z=n("./client/components/notice/index.jsx"),U=o(z),H=n("./client/components/notice/notice-action.jsx"),W=o(H),V=n("./client/components/data/media-list-data/index.jsx"),q=o(V),G=n("./client/components/data/media-library-selected-data/index.jsx"),K=o(G),$=n("./client/lib/media/actions.js"),Y=o($),J=n("./client/lib/media/constants.js"),Z=n("./client/state/sites/selectors.js"),X=n("./client/my-sites/media-library/header.jsx"),Q=o(X),ee=n("./client/my-sites/media-library/external-media-header.jsx"),te=o(ee),ne=n("./client/my-sites/media-library/list.jsx"),oe=o(ne),re=n("./client/my-sites/sharing/connections/inline-connection.jsx"),ie=o(re),se=n("./client/state/sharing/keyring/selectors.js"),ae=function(e){function t(){var e,n,o,r;(0,d.default)(this,t);for(var i=arguments.length,s=Array(i),l=0;l<i;l++)s[l]=arguments[l];return n=o=(0,f.default)(this,(e=t.__proto__||(0,a.default)(t)).call.apply(e,[this].concat(s))),o.retryList=function(){Y.default.sourceChanged(o.props.site.ID)},o.goToSharing=function(e){e.preventDefault(),(0,M.default)("/sharing/"+o.props.site.slug)},r=n,(0,f.default)(o,r)}return(0,h.default)(t,e),(0,c.default)(t,[{key:"renderErrors",value:function(){var e=this,t=(0,y.default)(this.props.mediaValidationErrors).map(E.default),n=(0,x.default)((0,j.default)(t),function(t,n){var o=void 0,r=void 0,i={count:t.length,args:t.length};e.props.site&&(r=Y.default.clearValidationErrorsByType.bind(null,e.props.site.ID,n));var s="is-error",a=void 0,l=void 0,d=!1;switch(n){case J.ValidationErrors.FILE_TYPE_NOT_IN_PLAN:s="is-warning",a="plan-media-storage-error-video",l="video-upload",o=e.props.translate("%d file could not be uploaded because your site does not support video files. Upgrade to a premium plan for video support.","%d files could not be uploaded because your site does not support video files. Upgrade to a premium plan for video support.",i);break;case J.ValidationErrors.FILE_TYPE_UNSUPPORTED:o=e.props.translate("%d file could not be uploaded because the file type is not supported.","%d files could not be uploaded because their file types are unsupported.",i);break;case J.ValidationErrors.UPLOAD_VIA_URL_404:o=e.props.translate("%d file could not be uploaded because no image exists at the specified URL.","%d files could not be uploaded because no images exist at the specified URLs",i);break;case J.ValidationErrors.EXCEEDS_MAX_UPLOAD_SIZE:o=e.props.translate("%d file could not be uploaded because it exceeds the maximum upload size.","%d files could not be uploaded because they exceed the maximum upload size.",i);break;case J.ValidationErrors.NOT_ENOUGH_SPACE:a="plan-media-storage-error",l="extra-storage",o=e.props.translate("%d file could not be uploaded because there is not enough space left.","%d files could not be uploaded because there is not enough space left.",i);break;case J.ValidationErrors.EXCEEDS_PLAN_STORAGE_LIMIT:a="plan-media-storage-error",l="extra-storage",o=e.props.translate("%d file could not be uploaded because you have reached your plan storage limit.","%d files could not be uploaded because you have reached your plan storage limit.",i);break;case J.ValidationErrors.SERVICE_FAILED:o=e.props.translate("We are unable to retrieve your full media library."),d=!0;break;default:o=e.props.translate("%d file could not be uploaded because an error occurred while uploading.","%d files could not be uploaded because errors occurred while uploading.",i)}return T.default.createElement(U.default,{status:s,text:o,onDismissClick:r},e.renderNoticeAction(a,l),d&&e.renderTryAgain())});return(0,I.default)(n)}},{key:"renderTryAgain",value:function(){return T.default.createElement(W.default,{onClick:this.retryList},this.props.translate("Retry"))}},{key:"renderNoticeAction",value:function(e,t){if(!e)return null;var n="calypso_upgrade_nudge_impression",o={cta_name:e,cta_feature:t};return T.default.createElement(W.default,{external:!0,href:t?"/plans/compare/"+this.props.siteSlug+"?feature="+t:"/plans/"+this.props.siteSlug,onClick:this.recordPlansNavigation.bind(this,"calypso_upgrade_nudge_cta_click",o)},this.props.translate("Upgrade Plan"),T.default.createElement(B.default,{eventName:n,eventProperties:o}))}},{key:"recordPlansNavigation",value:function(e,t){L.default.ga.recordEvent("Media","Clicked Upload Error Action"),L.default.tracks.recordEvent(e,t)}},{key:"renderExternalMedia",value:function(){var e=this.props.translate("To show Photos from Google, you need to connect your Google account.");return T.default.createElement("div",{className:"media-library__connect-message"},T.default.createElement("p",null,T.default.createElement("img",{src:"/calypso/images/sharing/google-photos-logo.svg",width:"96",height:"96"})),T.default.createElement("p",null,e),T.default.createElement(ie.default,{serviceName:"google_photos"}))}},{key:"getThumbnailType",value:function(){return""!==this.props.source?J.MEDIA_IMAGE_THUMBNAIL:this.props.site.is_private?J.MEDIA_IMAGE_RESIZER:J.MEDIA_IMAGE_PHOTON}},{key:"renderMediaList",value:function(){return!this.props.site||this.props.isRequesting&&!this.hasRequested?(this.hasRequested=!0,T.default.createElement(oe.default,{key:"list-loading",filterRequiresUpgrade:this.props.filterRequiresUpgrade})):""===this.props.source||this.props.isConnected?T.default.createElement(q.default,{siteId:this.props.site.ID,postId:this.props.postId,filter:this.props.filter,search:this.props.search,source:this.props.source},T.default.createElement(K.default,{siteId:this.props.site.ID},T.default.createElement(oe.default,{key:"list-"+[this.props.site.ID,this.props.search,this.props.filter].join(),site:this.props.site,filter:this.props.filter,filterRequiresUpgrade:this.props.filterRequiresUpgrade,search:this.props.search,containerWidth:this.props.containerWidth,thumbnailType:this.getThumbnailType(),single:this.props.single,scrollable:this.props.scrollable,onEditItem:this.props.onEditItem}))):this.renderExternalMedia()}},{key:"renderHeader",value:function(){return this.props.isConnected?""!==this.props.source?T.default.createElement(te.default,{onMediaScaleChange:this.props.onMediaScaleChange,site:this.props.site,visible:!this.props.isRequesting,canCopy:void 0===this.props.postId,source:this.props.source,onSourceChange:this.props.onSourceChange,selectedItems:this.props.selectedItems,sticky:!this.props.scrollable}):this.props.filterRequiresUpgrade?null:T.default.createElement(Q.default,{
site:this.props.site,filter:this.props.filter,onMediaScaleChange:this.props.onMediaScaleChange,onAddMedia:this.props.onAddMedia,onAddAndEditImage:this.props.onAddAndEditImage,selectedItems:this.props.selectedItems,onViewDetails:this.props.onViewDetails,onDeleteItem:this.props.onDeleteItem,sticky:!this.props.scrollable}):null}},{key:"render",value:function(){return T.default.createElement("div",{className:"media-library__content"},this.renderHeader(),this.renderErrors(),this.renderMediaList())}}]),t}(T.default.Component);ae.propTypes={site:R.default.object,mediaValidationErrors:R.default.object,filter:R.default.string,filterRequiresUpgrade:R.default.bool,search:R.default.string,source:R.default.string,containerWidth:R.default.number,single:R.default.bool,scrollable:R.default.bool,onAddMedia:R.default.func,onMediaScaleChange:R.default.func,onEditItem:R.default.func,postId:R.default.number,isConnected:R.default.bool},ae.defaultProps={mediaValidationErrors:(0,i.default)({}),onAddMedia:b.default,source:""},t.default=(0,P.connect)(function(e,t){return{siteSlug:t.site?(0,Z.getSiteSlug)(e,t.site.ID):"",isRequesting:(0,se.isKeyringConnectionsFetching)(e)}},null,null,{pure:!1})((0,O.localize)(ae)),e.exports=t.default},"./client/my-sites/media-library/data-source.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.MediaLibraryDataSource=void 0;var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=o(p),m=n("./node_modules/lodash/find.js"),h=o(m),g=n("./node_modules/react/react.js"),y=o(g),v=n("./node_modules/i18n-calypso/index.js"),b=n("./node_modules/gridicons/build/index.js"),_=o(b),x=n("./node_modules/prop-types/index.js"),C=o(x),E=n("./node_modules/classnames/index.js"),w=o(E),j=n("./client/components/button/index.jsx"),S=o(j),T=n("./client/components/popover/menu.jsx"),P=o(T),k=n("./client/components/popover/menu-item.jsx"),I=o(k),N=n("./client/config/index.js"),R=o(N),D=t.MediaLibraryDataSource=function(e){function t(e){(0,a.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return n.togglePopover=function(){n.setState({popover:!n.state.popover})},n.changeSource=function(e){var t=e.target,o=t.getAttribute("action")?t.getAttribute("action"):t.parentNode.getAttribute("action"),r=o?o:"";r!==n.props.source&&n.props.onSourceChange(r)},n.state={popover:!1},n}return(0,f.default)(t,e),(0,d.default)(t,[{key:"renderScreenReader",value:function(e){return y.default.createElement("span",{className:"screen-reader-text"},e&&e.label)}},{key:"renderMenuItems",value:function(e){var t=this;return e.map(function(e){return y.default.createElement(I.default,{action:e.value,key:e.value,onClick:t.changeSource},e.icon,e.label)})}},{key:"render",value:function(){var e=this.props,t=e.translate,n=e.source,o=[{value:"",label:t("WordPress library"),icon:y.default.createElement(_.default,{icon:"my-sites",size:24})},{value:"google_photos",label:t("Photos from Your Google library"),icon:y.default.createElement("img",{src:"/calypso/images/sharing/google-photos-logo.svg",width:"24",height:"24"})}],r=(0,h.default)(o,function(e){return e.value===n}),i=(0,w.default)({button:!0,"media-library__source-button":!0,"is-open":this.state.popover});return R.default.isEnabled("external-media")?y.default.createElement("div",{className:"media-library__datasource"},y.default.createElement(S.default,{borderless:!0,ref:"popoverMenuButton",className:i,onClick:this.togglePopover,title:t("Choose media library source")},r&&r.icon,this.renderScreenReader(r),y.default.createElement(P.default,{context:this.refs&&this.refs.popoverMenuButton,isVisible:this.state.popover,position:"bottom right",onClose:this.togglePopover,className:"is-dialog-visible media-library__header-popover"},this.renderMenuItems(o)))):null}}]),t}(g.Component);D.propTypes={source:C.default.string.isRequired,onSourceChange:C.default.func.isRequired},t.default=(0,v.localize)(D)},"./client/my-sites/media-library/drop-zone.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var r=n("./node_modules/lodash/noop.js"),i=o(r),s=n("./node_modules/react/react.js"),a=o(s),l=n("./client/lib/analytics/index.js"),d=o(l),u=n("./client/components/drop-zone/index.jsx"),c=o(u),p=n("./client/lib/media/actions.js"),f=o(p),m=n("./client/lib/site/utils.js");e.exports=a.default.createClass({displayName:"MediaLibraryDropZone",propTypes:{site:a.default.PropTypes.object,fullScreen:a.default.PropTypes.bool,onAddMedia:a.default.PropTypes.func,trackStats:a.default.PropTypes.bool},getDefaultProps:function(){return{fullScreen:!0,onAddMedia:i.default,trackStats:!0}},uploadFiles:function(e){this.props.site&&(f.default.clearValidationErrors(this.props.site.ID),f.default.add(this.props.site.ID,e),this.props.onAddMedia(),this.props.trackStats&&d.default.mc.bumpStat("editor_upload_via","drop"))},isValidTransfer:function(e){return!!e&&(!e.mozSourceNode&&(!e.types||-1!==Array.prototype.indexOf.call(e.types,"Files")))},render:function(){return(0,m.userCan)("upload_files",this.props.site)?a.default.createElement(c.default,{fullScreen:this.props.fullScreen,onVerifyValidTransfer:this.isValidTransfer,onFilesDrop:this.uploadFiles}):null}})},"./client/my-sites/media-library/external-media-header.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=o(p),m=n("./node_modules/lodash/debounce.js"),h=o(m),g=n("./node_modules/react/react.js"),y=o(g),v=n("./node_modules/gridicons/build/index.js"),b=o(v),_=n("./node_modules/i18n-calypso/index.js"),x=n("./node_modules/prop-types/index.js"),C=o(x),E=n("./client/my-sites/media-library/scale.jsx"),w=o(E),j=n("./client/components/card/index.jsx"),S=o(j),T=n("./client/components/button/index.jsx"),P=o(T),k=n("./client/lib/media/actions.js"),I=o(k),N=n("./client/lib/media/list-store.js"),R=o(N),D=n("./client/components/sticky-panel/index.jsx"),M=o(D),O=250,A=function(e){function t(e){(0,a.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return n.onCopy=function(){var e=n.props,t=e.site,o=e.selectedItems,r=e.source,i=e.onSourceChange;i("",function(){I.default.addExternal(t.ID,o,r)})},n.handleClick=n.onClick.bind(n),n.handleMedia=n.onUpdateState.bind(n),n.handleFetchOn=n.onSetFetch.bind(n),n.handleFetchOff=(0,h.default)(n.onDisableFetch.bind(n),O),n.state=n.getState(),n}return(0,f.default)(t,e),(0,d.default)(t,[{key:"onSetFetch",value:function(){this.handleFetchOff.cancel(),this.setState({fetching:!0})}},{key:"onDisableFetch",value:function(){this.setState({fetching:!1})}},{key:"componentDidMount",value:function(){R.default.on("change",this.handleMedia)}},{key:"componentWillUnmount",value:function(){this.handleFetchOff.cancel(),R.default.off("change",this.handleMedia)}},{key:"onUpdateState",value:function(){var e=this.getState(),t=e.fetching;t?this.handleFetchOn():this.handleFetchOff()}},{key:"getState",value:function(){return{fetching:R.default.isFetchingNextPage(this.props.site.ID)}}},{key:"onClick",value:function(){var e=this.props.site.ID;I.default.sourceChanged(e),I.default.fetchNextPage(e)}},{key:"renderCopyButton",value:function(){var e=this.props,t=e.selectedItems,n=e.translate;return y.default.createElement(P.default,{compact:!0,disabled:0===t.length,onClick:this.onCopy,primary:!0},n("Copy to media library"))}},{key:"renderCard",value:function(){var e=this.props,t=e.onMediaScaleChange,n=e.translate,o=e.canCopy;return y.default.createElement(S.default,{className:"media-library__header"},y.default.createElement(P.default,{compact:!0,disabled:this.state.fetching,onClick:this.handleClick},y.default.createElement(b.default,{icon:"refresh",size:24}),n("Refresh")),o&&this.renderCopyButton(),y.default.createElement(w.default,{onChange:t}))}},{key:"render",value:function(){var e=this.props.visible;return e?this.props.sticky?y.default.createElement(M.default,{minLimit:660},this.renderCard()):this.renderCard():null}}]),t}(y.default.Component);A.propTypes={onMediaScaleChange:C.default.func,site:C.default.object.isRequired,visible:C.default.bool.isRequired,canCopy:C.default.bool,selectedItems:C.default.array,onSourceChange:C.default.func,sticky:C.default.bool},t.default=(0,_.localize)(A),e.exports=t.default},"./client/my-sites/media-library/filter-bar.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.MediaLibraryFilterBar=void 0;var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=o(p),m=n("./node_modules/lodash/pull.js"),h=o(m),g=n("./node_modules/lodash/noop.js"),y=o(g),v=n("./node_modules/lodash/includes.js"),b=o(v),_=n("./node_modules/lodash/identity.js"),x=o(_),C=n("./node_modules/react/react.js"),E=o(C),w=n("./node_modules/i18n-calypso/index.js"),j=n("./node_modules/prop-types/index.js"),S=o(j),T=n("./client/components/section-nav/index.jsx"),P=o(T),k=n("./client/components/section-nav/tabs.jsx"),I=o(k),N=n("./client/components/search/index.jsx"),R=o(N),D=n("./client/lib/analytics/track-component-view/index.jsx"),M=o(D),O=n("./client/blocks/plan-storage/index.jsx"),A=o(O),L=n("./client/my-sites/media-library/filter-item.jsx"),F=o(L),B=n("./client/my-sites/media-library/data-source.jsx"),z=o(B),U=t.MediaLibraryFilterBar=function(e){function t(){var e,n,o,r;(0,a.default)(this,t);for(var s=arguments.length,l=Array(s),d=0;d<s;d++)l[d]=arguments[d];return n=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.changeFilter=function(e){o.props.onFilterChange(e)},r=n,(0,c.default)(o,r)}return(0,f.default)(t,e),(0,d.default)(t,[{key:"getSearchPlaceholderText",value:function(){var e=this.props,t=e.filter,n=e.source,o=e.translate;if("google_photos"===n)return o("Search your Google library…");switch(t){case"this-post":return o("Search media uploaded to this post…");case"images":return o("Search images…");case"audio":return o("Search audio files…");case"videos":return o("Search videos…");case"documents":return o("Search documents…");default:return o("Search all media…")}}},{key:"getFilterLabel",value:function(e){var t=this.props.translate;switch(e){case"this-post":return t("This Post",{comment:"Filter label for media list"});case"images":return t("Images",{comment:"Filter label for media list"});case"audio":return t("Audio",{comment:"Filter label for media list"});case"videos":return t("Videos",{comment:"Filter label for media list"});case"documents":return t("Documents",{comment:"Filter label for media list"});default:return t("All",{comment:"Filter label for media list"})}}},{key:"isFilterDisabled",value:function(e){var t=this.props.enabledFilters;return t&&(!e.length||!(0,b.default)(t,e))}},{key:"renderTabItems",value:function(){var e=this;if(""!==this.props.source)return null;var t=["","this-post","images","documents","videos","audio"];return this.props.post||(0,h.default)(t,"this-post"),E.default.createElement(I.default,null,t.map(function(t){return E.default.createElement(F.default,{key:"filter-tab-"+t,value:t,selected:e.props.filter===t,onChange:e.changeFilter,disabled:e.isFilterDisabled(t)},e.getFilterLabel(t))}))}},{key:"renderSearchSection",value:function(){if(this.props.filterRequiresUpgrade||!this.props.isConnected)return null;var e=""===this.props.source;return E.default.createElement(R.default,{key:this.props.source,analyticsGroup:"Media",pinned:e,fitsContainer:!0,onSearch:this.props.onSearch,initialValue:this.props.search,placeholder:this.getSearchPlaceholderText(),delaySearch:!0})}},{key:"renderPlanStorage",value:function(){if(this.props.source)return null;var e="calypso_upgrade_nudge_impression",t={cta_name:"plan-media-storage"};return E.default.createElement(A.default,{siteId:this.props.site.ID},E.default.createElement(M.default,{eventName:e,eventProperties:t}))}},{key:"render",value:function(){return E.default.createElement("div",{className:"media-library__filter-bar"},E.default.createElement(z.default,{source:this.props.source,onSourceChange:this.props.onSourceChange}),E.default.createElement(P.default,{selectedText:this.getFilterLabel(this.props.filter),hasSearch:!0,allowDropdown:!this.props.source},this.renderTabItems(),this.renderSearchSection()),this.renderPlanStorage())}}]),t}(C.Component);U.propTypes={basePath:S.default.string,enabledFilters:S.default.arrayOf(S.default.string),filter:S.default.string,filterRequiresUpgrade:S.default.bool,search:S.default.string,source:S.default.string,site:S.default.object,onFilterChange:S.default.func,onSearch:S.default.func,translate:S.default.func,post:S.default.bool,isConnected:S.default.bool},U.defaultProps={filter:"",basePath:"/media",onFilterChange:y.default,onSourceChange:y.default,onSearch:y.default,translate:x.default,source:"",post:!1,isConnected:!0},t.default=(0,w.localize)(U)},"./client/my-sites/media-library/filter-item.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=o(p),m=n("./node_modules/react/react.js"),h=o(m),g=n("./client/components/section-nav/item.jsx"),y=o(g),v=function(e){function t(){var e,n,o,r;(0,a.default)(this,t);for(var s=arguments.length,l=Array(s),d=0;d<s;d++)l[d]=arguments[d];return n=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.activate=function(){o.props.onChange(o.props.value)},r=n,(0,c.default)(o,r)}return(0,f.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){var e=this.props,t=e.isDisabled,n=e.selected;return h.default.createElement(y.default,{selected:n,onClick:this.activate,disabled:t},this.props.children)}}]),t}(m.Component);t.default=v,e.exports=t.default},"./client/my-sites/media-library/filter-to-mime-prefix.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t;switch(e){case"images":t="image";break;case"audio":t="audio";break;case"videos":t="video";break;case"documents":t="application"}return t},e.exports=t.default},"./client/my-sites/media-library/header.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/react/react.js"),i=o(r),s=n("./node_modules/gridicons/build/index.js"),a=o(s),l=n("./client/components/popover/menu.jsx"),d=o(l),u=n("./client/components/popover/menu-item.jsx"),c=o(u),p=n("./client/my-sites/media-library/scale.jsx"),f=o(p),m=n("./client/my-sites/media-library/upload-button.jsx"),h=o(m),g=n("./client/my-sites/media-library/upload-url.jsx"),y=o(g),v=n("./client/lib/site/utils.js"),b=n("./client/post-editor/media-modal/secondary-actions.jsx"),_=o(b),x=n("./client/components/card/index.jsx"),C=o(x),E=n("./client/components/button-group/index.jsx"),w=o(E),j=n("./client/components/button/index.jsx"),S=o(j),T=n("./client/components/sticky-panel/index.jsx"),P=o(T);t.default=i.default.createClass({displayName:"MediaLibraryHeader",propTypes:{site:r.PropTypes.object,filter:r.PropTypes.string,sliderPositionCount:r.PropTypes.number,onMediaScaleChange:i.default.PropTypes.func,onAddMedia:r.PropTypes.func,sticky:i.default.PropTypes.bool},getInitialState:function(){return{addingViaUrl:!1,isMoreOptionsVisible:!1}},getDefaultProps:function(){return{onAddMedia:function(){},sliderPositionCount:100,sticky:!1}},setMoreOptionsContext:function(e){e&&this.setState({moreOptionsContext:e})},toggleAddViaUrl:function(e){this.setState({addingViaUrl:e,isMoreOptionsVisible:!1})},toggleMoreOptions:function(e){this.setState({isMoreOptionsVisible:e})},renderUploadButtons:function(){var e=this.props,t=e.site,n=e.filter,o=e.onAddMedia;if((0,v.userCan)("upload_files",t))return i.default.createElement(w.default,{className:"media-library__upload-buttons"},i.default.createElement(h.default,{site:t,filter:n,onAddMedia:o,className:"button is-compact"},i.default.createElement(a.default,{icon:"add-image"}),i.default.createElement("span",{className:"is-desktop"},this.translate("Add New",{context:"Media upload"}))),i.default.createElement(S.default,{compact:!0,ref:this.setMoreOptionsContext,onClick:this.toggleMoreOptions.bind(this,!this.state.isMoreOptionsVisible),className:"button media-library__upload-more"},i.default.createElement("span",{className:"screen-reader-text"},this.translate("More Options")),i.default.createElement(a.default,{icon:"chevron-down",size:20}),i.default.createElement(d.default,{context:this.state.moreOptionsContext,isVisible:this.state.isMoreOptionsVisible,onClose:this.toggleMoreOptions.bind(this,!1),position:"bottom right",className:"is-dialog-visible media-library__header-popover"},i.default.createElement(c.default,{onClick:this.toggleAddViaUrl.bind(this,!0)},this.translate("Add via URL",{context:"Media upload"})))))},render:function(){var e=this.props,t=e.site,n=e.onAddMedia;if(this.state.addingViaUrl)return i.default.createElement(y.default,{site:t,onAddMedia:n,onClose:this.toggleAddViaUrl.bind(this,!1),className:"media-library__header"});var o=i.default.createElement(C.default,{className:"media-library__header"},this.renderUploadButtons(),i.default.createElement(_.default,{selectedItems:this.props.selectedItems,onViewDetails:this.props.onViewDetails,onDelete:this.props.onDeleteItem,site:this.props.site,view:"LIST"}),i.default.createElement(f.default,{onChange:this.props.onMediaScaleChange}));return this.props.sticky?i.default.createElement(P.default,{minLimit:660},o):o}}),e.exports=t.default},"./client/my-sites/media-library/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=o(p),m=n("./node_modules/lodash/some.js"),h=o(m),g=n("./node_modules/lodash/toArray.js"),y=o(g),v=n("./node_modules/lodash/isEqual.js"),b=o(v),_=n("./node_modules/react/react.js"),x=o(_),C=n("./node_modules/classnames/index.js"),E=o(C),w=n("./node_modules/prop-types/index.js"),j=o(w),S=n("./node_modules/react-redux/es/index.js"),T=n("./client/my-sites/media-library/content.jsx"),P=o(T),k=n("./client/lib/media/actions.js"),I=o(k),N=n("./client/my-sites/media-library/drop-zone.jsx"),R=o(N),D=n("./client/lib/media/library-selected-store.js"),M=o(D),O=n("./client/lib/media/utils.js"),A=o(O),L=n("./client/my-sites/media-library/filter-to-mime-prefix.js"),F=o(L),B=n("./client/my-sites/media-library/filter-bar.jsx"),z=o(B),U=n("./client/components/data/media-validation-data/index.jsx"),H=o(U),W=n("./client/components/data/query-preferences/index.jsx"),V=o(W),q=n("./client/lib/search-url/index.js"),G=o(q),K=n("./client/state/sharing/keyring/selectors.js"),$=n("./client/state/sharing/keyring/actions.js"),Y=function(e){return""===e.source||(0,h.default)(e.connectedServices,function(t){return t.service===e.source})},J=function(e){return!e.isRequesting&&""!==e.source&&0===e.connectedServices.length},Z=function(e){function t(){var e,n,o,r;(0,a.default)(this,t);for(var s=arguments.length,l=Array(s),d=0;d<s;d++)l[d]=arguments[d];return n=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.doSearch=function(e){(0,G.default)(e,o.props.search,o.props.onSearch)},o.onAddMedia=function(){var e=M.default.getAll(o.props.site.ID),t=e;o.props.site&&(o.props.filter&&(t=A.default.filterItemsByMimePrefix(t,(0,F.default)(o.props.filter))),o.props.single&&t.length>1&&(t=t.slice(-1)),(0,b.default)(e,t)||I.default.setLibrarySelectedItems(o.props.site.ID,t),o.props.onAddMedia())},r=n,(0,c.default)(o,r)}return(0,f.default)(t,e),(0,d.default)(t,[{key:"componentWillMount",value:function(){J(this.props)&&this.props.requestKeyringConnections()}},{key:"componentWillReceiveProps",value:function(e){J(e)&&""===this.props.source&&this.props.requestKeyringConnections()}},{key:"filterRequiresUpgrade",value:function(){var e=this.props,t=e.filter,n=e.site,o=e.source;if(o)return!1;switch(t){case"audio":return!(n&&n.options.upgraded_filetypes_enabled||n.jetpack);case"videos":return!(n&&n.options.videopress_enabled||n.jetpack)}return!1}},{key:"renderDropZone",value:function(){return""!==this.props.source?null:x.default.createElement(R.default,{site:this.props.site,filter:this.props.filter,fullScreen:this.props.fullScreenDropZone,onAddMedia:this.onAddMedia})}},{key:"render",value:function(){var e=void 0;e=x.default.createElement(P.default,{site:this.props.site,filter:this.props.filter,filterRequiresUpgrade:this.filterRequiresUpgrade(),search:this.props.search,source:this.props.source,isConnected:Y(this.props),containerWidth:this.props.containerWidth,single:this.props.single,scrollable:this.props.scrollable,onAddMedia:this.onAddMedia,onAddAndEditImage:this.props.onAddAndEditImage,onMediaScaleChange:this.props.onScaleChange,onSourceChange:this.props.onSourceChange,selectedItems:this.props.mediaLibrarySelectedItems,onDeleteItem:this.props.onDeleteItem,onEditItem:this.props.onEditItem,onViewDetails:this.props.onViewDetails,postId:this.props.postId}),this.props.site&&(e=x.default.createElement(H.default,{siteId:this.props.site.ID},e));var t=(0,E.default)("media-library",{"is-single":this.props.single},this.props.className);return x.default.createElement("div",{className:t},x.default.createElement(V.default,null),this.renderDropZone(),x.default.createElement(z.default,{site:this.props.site,filter:this.props.filter,filterRequiresUpgrade:this.filterRequiresUpgrade(),enabledFilters:this.props.enabledFilters,search:this.props.search,onFilterChange:this.props.onFilterChange,onSourceChange:this.props.onSourceChange,source:this.props.source,onSearch:this.doSearch,isConnected:Y(this.props),post:!!this.props.postId}),e)}}]),t}(_.Component);Z.propTypes={className:j.default.string,site:j.default.object,filter:j.default.string,enabledFilters:j.default.arrayOf(j.default.string),search:j.default.string,source:j.default.string,onAddMedia:j.default.func,onFilterChange:j.default.func,onSourceChange:j.default.func,onSearch:j.default.func,onScaleChange:j.default.func,onEditItem:j.default.func,fullScreenDropZone:j.default.bool,containerWidth:j.default.number,single:j.default.bool,scrollable:j.default.bool,postId:j.default.number},Z.defaultProps={fullScreenDropZone:!0,onAddMedia:function(){},onScaleChange:function(){},scrollable:!1,source:""},t.default=(0,S.connect)(function(e){return{connectedServices:(0,y.default)((0,K.getKeyringConnections)(e)).filter(function(e){return"other"===e.type&&"ok"===e.status}),isRequesting:(0,K.isKeyringConnectionsFetching)(e)}},{requestKeyringConnections:$.requestKeyringConnections})(Z),e.exports=t.default},"./client/my-sites/media-library/list-item-audio.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var r=n("./node_modules/babel-runtime/helpers/extends.js"),i=o(r),s=n("./node_modules/react/react.js"),a=n("./client/my-sites/media-library/list-item-file-details.jsx");e.exports=s.createClass({displayName:"MediaLibraryListItemDocument",render:function(){return s.createElement(a,(0,i.default)({},this.props,{icon:"audio"}))}})},"./client/my-sites/media-library/list-item-document.jsx":function(e,t,n){"use strict";var o=n("./node_modules/react/react.js"),r=n("./client/my-sites/media-library/list-item-file-details.jsx");e.exports=o.createClass({displayName:"MediaLibraryListItemDocument",render:function(){return o.createElement(r,this.props)}})},"./client/my-sites/media-library/list-item-file-details.jsx":function(e,t,n){"use strict";var o=n("./node_modules/react/react.js"),r=n("./node_modules/gridicons/build/index.js");e.exports=o.createClass({displayName:"MediaLibraryListItemFileDetails",propTypes:{media:o.PropTypes.object,scale:o.PropTypes.number,icon:o.PropTypes.string},getDefaultProps:function(){return{icon:"pages"}},render:function(){return o.createElement("div",{className:"media-library__list-item-file-details media-library__list-item-centered"},o.createElement("div",{className:"media-library__list-item-icon"},o.createElement(r,{icon:this.props.icon})),o.createElement("div",{className:"media-library__list-item-file-name",style:{fontSize:12*(1+this.props.scale)}},this.props.media.title),o.createElement("hr",{className:"media-library__list-item-details-separator"}),o.createElement("div",{className:"media-library__list-item-file-extension",style:{fontSize:9*(1+this.props.scale)}},(this.props.media.extension||"").toUpperCase()))}})},"./client/my-sites/media-library/list-item-image.jsx":function(e,t,n){"use strict";var o=n("./client/lib/media/constants.js"),r=n("./node_modules/react/react.js"),i=n("./client/lib/media/utils.js"),s=n("./client/my-sites/media-library/list-item-file-details.jsx");e.exports=r.createClass({displayName:"MediaLibraryListItemImage",propTypes:{media:r.PropTypes.object,scale:r.PropTypes.number,maxImageWidth:r.PropTypes.number,thumbnailType:r.PropTypes.string},getDefaultProps:function(){return{maxImageWidth:450,thumbnailType:o.MEDIA_IMAGE_PHOTON}},getInitialState:function(){return{}},getImageDimensions:function(){var e,t;return e=this.props.media.width?this.props.media.width:this.state.imageWidth,t=this.props.media.height?this.props.media.height:this.state.imageHeight,{width:e,height:t}},getImageStyle:function(){var e=this.getImageDimensions();return{maxHeight:e.height>e.width?"none":"100%",maxWidth:e.height<e.width?"none":"100%"}},setUnknownImageDimensions:function(e){this.props.media.width||this.setState({imageWidth:e.target.clientWidth}),this.props.media.height||this.setState({imageHeight:e.target.clientHeight})},render:function(){var e=i.url(this.props.media,{photon:this.props.thumbnailType===o.MEDIA_IMAGE_PHOTON,maxWidth:this.props.maxImageWidth,size:this.props.thumbnailType===o.MEDIA_IMAGE_THUMBNAIL&&"medium"});return e?r.createElement("img",{src:e,onLoad:this.setUnknownImageDimensions,alt:this.props.media.alt||this.props.media.title,style:this.getImageStyle(),className:"media-library__list-item-centered",draggable:"false"}):r.createElement(s,{scale:this.props.scale,media:this.props.media,icon:"image"})}})},"./client/my-sites/media-library/list-item-video.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var r=n("./node_modules/babel-runtime/helpers/extends.js"),i=o(r),s=n("./client/lib/media/constants.js"),a=n("./node_modules/react/react.js"),l=n("./node_modules/photon/index.js"),d=n("./client/my-sites/media-library/list-item-file-details.jsx"),u=n("./node_modules/gridicons/build/index.js");e.exports=a.createClass({displayName:"MediaLibraryListItemVideo",propTypes:{media:a.PropTypes.object,maxImageWidth:a.PropTypes.number,thumbnailType:a.PropTypes.string},getDefaultProps:function(){return{maxImageWidth:450,thumbnailType:s.MEDIA_IMAGE_PHOTON}},getHighestQualityThumbnail:function(){if(this.props.media.thumbnails)return this.props.media.thumbnails.fmt_hd||this.props.media.thumbnails.fmt_dvd||this.props.media.thumbnails.fmt_std},render:function(){var e=this.getHighestQualityThumbnail();if(e){var t=this.props.thumbnailType===s.MEDIA_IMAGE_THUMBNAIL?e:l(e,{width:this.props.maxImageWidth});return a.createElement("div",{className:"media-library__list-item-video",style:{backgroundImage:"url("+t+")"}},a.createElement("span",{className:"media-library__list-item-icon media-library__list-item-centered"},a.createElement(u,{icon:"video-camera"})))}return a.createElement(d,(0,i.default)({},this.props,{icon:"video-camera"}))}})},"./client/my-sites/media-library/list-item.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/helpers/extends.js"),i=o(r),s=n("./node_modules/babel-runtime/core-js/object/keys.js"),a=o(s),l=n("./node_modules/lodash/omit.js"),d=o(l),u=n("./node_modules/lodash/noop.js"),c=o(u),p=n("./node_modules/lodash/isEqual.js"),f=o(p),m=n("./node_modules/lodash/assign.js"),h=o(m),g=n("./client/post-editor/media-modal/gallery-help.jsx"),y=o(g),v=n("./client/lib/media/constants.js"),b=n("./node_modules/react/react.js"),_=n("./node_modules/classnames/index.js"),x=n("./client/components/spinner/index.jsx"),C=n("./node_modules/gridicons/build/index.js"),E=n("./client/my-sites/media-library/list-item-image.jsx"),w=n("./client/my-sites/media-library/list-item-video.jsx"),j=n("./client/my-sites/media-library/list-item-audio.jsx"),S=n("./client/my-sites/media-library/list-item-document.jsx"),T=n("./client/lib/media/utils.js");t.default=b.createClass({displayName:"MediaLibraryListItem",propTypes:{media:b.PropTypes.object,scale:b.PropTypes.number.isRequired,maxImageWidth:b.PropTypes.number,thumbnailType:b.PropTypes.string,showGalleryHelp:b.PropTypes.bool,selectedIndex:b.PropTypes.number,onToggle:b.PropTypes.func,onEditItem:b.PropTypes.func,style:b.PropTypes.object},getDefaultProps:function(){return{maxImageWidth:450,thumbnailType:v.MEDIA_IMAGE_PHOTON,selectedIndex:-1,onToggle:c.default,onEditItem:c.default}},shouldComponentUpdate:function(e){return!(e.media===this.props.media&&e.scale===this.props.scale&&e.maxImageWidth===this.props.maxImageWidth&&e.thumbnailType===this.props.thumbnailType&&e.selectedIndex===this.props.selectedIndex&&(0,f.default)(e.style,this.props.style))},clickItem:function(e){this.props.onToggle(this.props.media,e.shiftKey)},renderItem:function(){var e;if(this.props.media){switch(T.getMimePrefix(this.props.media)){case"image":e=E;break;case"video":e=w;break;case"audio":e=j;break;default:e=S}return b.createElement(e,this.props)}},renderSpinner:function(){if(this.props.media&&this.props.media.transient)return b.createElement(x,{className:"media-library__list-item-spinner"})},render:function(){var e,t,n,o;return e=_("media-library__list-item",{"is-placeholder":!this.props.media,"is-selected":-1!==this.props.selectedIndex,"is-transient":this.props.media&&this.props.media.transient,"is-small":this.props.scale<=.125}),t=(0,d.default)(this.props,(0,a.default)(this.constructor.propTypes)),n=(0,h.default)({width:100*this.props.scale+"%"},this.props.style),this.props.media&&(o=this.props.media.file),-1!==this.props.selectedIndex&&(t["data-selected-number"]=this.props.selectedIndex+1),b.createElement("div",(0,i.default)({className:e,style:n,onClick:this.clickItem},t),b.createElement("span",{className:"media-library__list-item-selected-icon"},b.createElement(C,{icon:"checkmark",size:20})),b.createElement("figure",{className:"media-library__list-item-figure",
title:o},this.renderItem(),this.renderSpinner(),this.props.showGalleryHelp&&b.createElement(y.default,null)))}}),e.exports=t.default},"./client/my-sites/media-library/list-no-content.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=o(p),m=n("./node_modules/react/react.js"),h=o(m),g=n("./node_modules/i18n-calypso/index.js"),y=n("./client/components/empty-content/index.jsx"),v=o(y),b=n("./client/my-sites/media-library/upload-button.jsx"),_=o(b),x=n("./client/lib/site/utils.js"),C=function(e){function t(){return(0,a.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,d.default)(t,[{key:"getLabel",value:function(){var e=this.props,t=e.filter,n=e.source,o=e.translate;if("google_photos"===n)return o("You don't have any photos in your Google library.",{comment:"Media no results"});switch(t){case"this-post":return o("There are no media items uploaded to this post.",{comment:"Media no results"});case"images":return o("You don't have any images.",{comment:"Media no results"});case"videos":return o("You don't have any videos.",{comment:"Media no results"});case"audio":return o("You don't have any audio files.",{comment:"Media no results"});case"documents":return o("You don't have any documents.",{comment:"Media no results"});default:return o("You don't have any media.",{comment:"Media no results"})}}},{key:"render",value:function(){var e="",t="";return(0,x.userCan)("upload_files",this.props.site)&&!this.props.source?(e=this.props.translate("Would you like to upload something?"),t=h.default.createElement(_.default,{className:"button is-primary",site:this.props.site},this.props.translate("Upload Media"))):this.props.source&&(e=this.props.translate("New photos may take a few minutes to appear.")),h.default.createElement(v.default,{title:this.getLabel(),line:e,action:t,illustration:"/calypso/images/media/illustration-media.svg",illustrationWidth:150})}}]),t}(m.Component);C.propTypes={site:h.default.PropTypes.object,filter:h.default.PropTypes.string,source:h.default.PropTypes.string},t.default=(0,g.localize)(C),e.exports=t.default},"./client/my-sites/media-library/list-no-results.jsx":function(e,t,n){"use strict";var o=n("./node_modules/react/react.js"),r=n("./client/my-sites/no-results/index.jsx");e.exports=o.createClass({displayName:"MediaLibraryListNoResults",propTypes:{filter:o.PropTypes.string,search:o.PropTypes.string},getDefaultProps:function(){return{search:""}},getLabel:function(){var e;switch(this.props.filter){case"images":e=this.translate("No images match your search for {{searchTerm/}}.",{components:{searchTerm:o.createElement("em",null,this.props.search)},context:"Media no search results"});break;case"videos":e=this.translate("No videos match your search for {{searchTerm/}}.",{components:{searchTerm:o.createElement("em",null,this.props.search)},context:"Media no search results"});break;case"audio":e=this.translate("No audio files match your search for {{searchTerm/}}.",{components:{searchTerm:o.createElement("em",null,this.props.search)},context:"Media no search results"});break;case"documents":e=this.translate("No documents match your search for {{searchTerm/}}.",{components:{searchTerm:o.createElement("em",null,this.props.search)},context:"Media no search results"});break;default:e=this.translate("No media files match your search for {{searchTerm/}}.",{components:{searchTerm:o.createElement("em",null,this.props.search)},context:"Media no search results"})}return e},render:function(){return o.createElement(r,{text:this.getLabel(),image:"/calypso/images/pages/illustration-pages.svg"})}})},"./client/my-sites/media-library/list-plan-promo.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var r=n("./node_modules/react/react.js"),i=o(r),s=n("./node_modules/prop-types/index.js"),a=o(s),l=n("./node_modules/page/index.js"),d=o(l),u=n("./client/lib/analytics/index.js"),c=o(u),p=n("./client/lib/formatting/index.js"),f=n("./client/components/empty-content/index.jsx"),m=n("./client/components/button/index.jsx");e.exports=i.default.createClass({displayName:"MediaLibraryListPlanPromo",propTypes:{site:a.default.object,filter:a.default.string},getTitle:function(){switch(this.props.filter){case"videos":return this.translate("Upload Videos",{textOnly:!0,context:"Media upload plan needed"});case"audio":return this.translate("Upload Audio",{textOnly:!0,context:"Media upload plan needed"});default:return this.translate("Upload Media",{textOnly:!0,context:"Media upload plan needed"})}},getSummary:function(){switch(this.props.filter){case"videos":return(0,p.preventWidows)(this.translate("To upload video files to your site, upgrade your plan.",{textOnly:!0,context:"Media upgrade promo"}),2);case"audio":return(0,p.preventWidows)(this.translate("To upload audio files to your site, upgrade your plan.",{textOnly:!0,context:"Media upgrade promo"}),2);default:return(0,p.preventWidows)(this.translate("To upload audio and video files to your site, upgrade your plan.",{textOnly:!0,context:"Media upgrade promo"}),2)}},viewPlansPage:function(){var e=this.props.site.slug,t=void 0===e?"":e;c.default.tracks.recordEvent("calypso_media_plans_button_click"),(0,d.default)("/plans/"+t)},render:function(){var e=i.default.createElement(m,{className:"button is-primary",onClick:this.viewPlansPage},this.translate("See Plans"));return i.default.createElement(f,{title:this.getTitle(),line:this.getSummary(),action:this.props.children||e,illustration:""})}})},"./client/my-sites/media-library/list-plan-upgrade-nudge.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){return t("audio"===e?"Upgrade to the Premium Plan and Enable Audio Uploads":"Upgrade to a Premium Plan and Enable VideoPress")}function i(e,t){return t("audio"===e?"By upgrading to the Premium plan you'll enable audio upload support on your site.":"By upgrading to a Premium Plan you'll enable VideoPress support on your site.")}Object.defineProperty(t,"__esModule",{value:!0}),t.MediaLibraryUpgradeNudge=void 0;var s=n("./node_modules/lodash/identity.js"),a=o(s),l=n("./node_modules/react/react.js"),d=o(l),u=n("./node_modules/i18n-calypso/index.js"),c=n("./client/lib/plans/constants.js"),p=n("./client/my-sites/upgrade-nudge/index.jsx"),f=o(p),m=n("./client/my-sites/media-library/list-plan-promo.js"),h=o(m),g=t.MediaLibraryUpgradeNudge=function(e){var t=e.translate,n=e.filter,o=e.site;return d.default.createElement("div",{className:"media-library__videopress-nudge-container"},d.default.createElement(h.default,{site:o,filter:n},d.default.createElement(f.default,{className:"media-library__videopress-nudge-regular",title:r(n,t),message:i(n,t),feature:"audio"===n?c.FEATURE_AUDIO_UPLOADS:c.FEATURE_VIDEO_UPLOADS,event:"calypso_media_uploads_upgrade_nudge"})))};g.propTypes={site:l.PropTypes.object,translate:l.PropTypes.func,filter:d.default.PropTypes.string},g.defaultProps={translate:a.default,filter:"video"},t.default=(0,u.localize)(g)},"./client/my-sites/media-library/list.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.MediaLibraryList=void 0;var r=n("./node_modules/babel-runtime/core-js/object/freeze.js"),i=o(r),s=n("./node_modules/lodash/noop.js"),a=o(s),l=n("./node_modules/lodash/findIndex.js"),d=o(l),u=n("./node_modules/lodash/filter.js"),c=o(u),p=n("./node_modules/lodash/clone.js"),f=o(p),m=n("./node_modules/react-redux/es/index.js"),h=n("./node_modules/i18n-calypso/index.js"),g=n("./client/components/sorted-grid/index.jsx"),y=o(g),v=n("./client/my-sites/media-library/list-plan-upgrade-nudge.jsx"),b=o(v),_=n("./client/state/preferences/selectors.js"),x=n("./node_modules/react-dom/index.js"),C=n("./node_modules/react/react.js"),E=n("./client/lib/media/actions.js"),w=n("./client/lib/media/utils.js"),j=n("./client/my-sites/media-library/list-item.jsx"),S=n("./client/my-sites/media-library/list-no-results.jsx"),T=n("./client/my-sites/media-library/list-no-content.jsx"),P=n("./client/lib/user/index.js")(),k=1e3,I=t.MediaLibraryList=C.createClass({displayName:"MediaLibraryList",propTypes:{site:C.PropTypes.object,media:C.PropTypes.arrayOf(C.PropTypes.object),mediaLibrarySelectedItems:C.PropTypes.arrayOf(C.PropTypes.object),filter:C.PropTypes.string,filterRequiresUpgrade:C.PropTypes.bool.isRequired,search:C.PropTypes.string,containerWidth:C.PropTypes.number,rowPadding:C.PropTypes.number,mediaScale:C.PropTypes.number.isRequired,thumbnailType:C.PropTypes.string,mediaHasNextPage:C.PropTypes.bool,mediaFetchingNextPage:C.PropTypes.bool,mediaOnFetchNextPage:C.PropTypes.func,single:C.PropTypes.bool,scrollable:C.PropTypes.bool,onEditItem:C.PropTypes.func},getInitialState:function(){return{}},getDefaultProps:function(){return{mediaLibrarySelectedItems:(0,i.default)([]),containerWidth:0,rowPadding:10,mediaHasNextPage:!1,mediaFetchingNextPage:!1,mediaOnFetchNextPage:a.default,single:!1,scrollable:!1,onEditItem:a.default}},setListContext:function(e){e&&this.setState({listContext:x.findDOMNode(e)})},getMediaItemHeight:function(){return Math.round(this.props.containerWidth*this.props.mediaScale)+this.props.rowPadding},getItemsPerRow:function(){return Math.floor(1/this.props.mediaScale)},getMediaItemStyle:function(e){var t,n,o=this.getItemsPerRow(),r=o===1/this.props.mediaScale,i=0===(e+1)%o;return t={paddingBottom:this.props.rowPadding,fontSize:225*this.props.mediaScale},r||i||(n=1%this.props.mediaScale/(o-1)*100+"%",P.isRTL()?t.marginLeft=n:t.marginRight=n),t},toggleItem:function(e,t){var n=void 0;n=this.props.single?(0,c.default)(this.props.mediaLibrarySelectedItems,{ID:e.ID}):(0,f.default)(this.props.mediaLibrarySelectedItems);var o=(0,d.default)(n,{ID:e.ID}),r=-1===o,i=(0,d.default)(this.props.media,{ID:e.ID}),s=i,a=i;!this.props.single&&t&&(s=Math.min(s,this.state.lastSelectedMediaIndex),a=Math.max(a,this.state.lastSelectedMediaIndex));for(var l=s;l<=a;l++){var u=(0,d.default)(n,{ID:this.props.media[l].ID});r&&-1===u?n.push(this.props.media[l]):r||-1===u||n.splice(u,1)}this.setState({lastSelectedMediaIndex:i}),this.props.site&&E.setLibrarySelectedItems(this.props.site.ID,n)},getItemRef:function(e){return"item-"+e.ID},getGroupLabel:function(e){var t=new Date(e),n=new Date;return t.getYear()===n.getYear()?(0,h.moment)(e).format("MMM DD"):(0,h.moment)(e).format("MMM DD, YYYY")},getItemGroup:function(e){return e.date.slice(0,10)},renderItem:function(e){var t,n=(0,d.default)(this.props.media,{ID:e.ID}),o=this.props.mediaLibrarySelectedItems,r=(0,d.default)(o,{ID:e.ID}),i=this.getItemRef(e);return t=!this.props.single&&r!==-1&&1===o.length&&"image"===w.getMimePrefix(e),C.createElement(j,{ref:i,key:i,style:this.getMediaItemStyle(n),media:e,scale:this.props.mediaScale,thumbnailType:this.props.thumbnailType,showGalleryHelp:t,selectedIndex:r,onToggle:this.toggleItem,onEditItem:this.props.onEditItem})},renderLoadingPlaceholders:function(){var e=this.getItemsPerRow(),t=(this.props.media||[]).length,n=e-t%e;return Array.apply(null,new Array(n)).map(function(e,n){return C.createElement(j,{key:"placeholder-"+n,style:this.getMediaItemStyle(t+n),scale:this.props.mediaScale})},this)},renderTrailingItems:function(){var e=this.props,t=e.media,n=e.source;if("google_photos"===n&&t&&t.length>=k){var o=(0,h.translate)("Use the search button to access more photos. You can search for dates, locations, and things.");return C.createElement("p",null,C.createElement("em",null,o))}return null},render:function(){var e;return this.props.filterRequiresUpgrade?C.createElement(b.default,{filter:this.props.filter,site:this.props.site}):!this.props.mediaHasNextPage&&this.props.media&&0===this.props.media.length?C.createElement(this.props.search?S:T,{site:this.props.site,filter:this.props.filter,search:this.props.search,source:this.props.source}):(e=function(){this.props.mediaOnFetchNextPage()}.bind(this),C.createElement(y.default,{ref:this.setListContext,getItemGroup:this.getItemGroup,getGroupLabel:this.getGroupLabel,context:!!this.props.scrollable&&this.state.listContext,items:this.props.media||[],itemsPerRow:this.getItemsPerRow(),lastPage:!this.props.mediaHasNextPage,fetchingNextPage:this.props.mediaFetchingNextPage,guessedItemHeight:this.getMediaItemHeight(),fetchNextPage:e,getItemRef:this.getItemRef,renderItem:this.renderItem,renderLoadingPlaceholders:this.renderLoadingPlaceholders,renderTrailingItems:this.renderTrailingItems,className:"media-library__list"}))}});t.default=(0,m.connect)(function(e){return{mediaScale:(0,_.getPreference)(e,"mediaScale")}},null,null,{pure:!1})(I)},"./client/my-sites/media-library/scale.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=o(p),m=n("./node_modules/lodash/partial.js"),h=o(m),g=n("./node_modules/lodash/debounce.js"),y=o(g),v=n("./node_modules/react/react.js"),b=o(v),_=n("./node_modules/react-redux/es/index.js"),x=n("./node_modules/i18n-calypso/index.js"),C=n("./node_modules/gridicons/build/index.js"),E=o(C),w=n("./client/components/forms/range/index.jsx"),j=o(w),S=n("./client/components/segmented-control/index.jsx"),T=o(S),P=n("./client/components/segmented-control/item.jsx"),k=o(P),I=n("./client/state/preferences/actions.js"),N=n("./client/state/preferences/selectors.js"),R=[.077,.115,.157,.24,.323],D=100,M=.32,O=function(e){function t(){(0,a.default)(this,t);var e=(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments));return e.onScaleChange=e.onScaleChange.bind(e),e.savePreference=e.savePreference.bind(e),e.debouncedSavePreference=(0,y.default)(e.savePreference,1e3),e.setScaleToMobileGrid=e.setScale.bind(e,M),e.setScaleToMobileFull=e.setScale.bind(e,1),e.state={},e}return(0,f.default)(t,e),(0,d.default)(t,[{key:"componentWillUnmount",value:function(){this.debouncedSavePreference.cancel()}},{key:"savePreference",value:function(e){this.props.saveMediaScalePreference(e)}},{key:"setScale",value:function(e){e!==this.props.scale&&(this.props.onChange(e),this.props.setMediaScalePreference(e),this.debouncedSavePreference(e))}},{key:"onScaleChange",value:function(e){var t=parseInt(e.target.value,10),n=t*R.length/D,o=R[Math.floor(n)];this.setState({sliderPosition:t}),this.setScale(o)}},{key:"getSliderPosition",value:function(){if(this.state.hasOwnProperty("sliderPosition"))return this.state.sliderPosition;var e=this.props.scale,t=R.indexOf(e);return-1===t?0:Math.floor(t*(D-1)/(R.length-1))}},{key:"render",value:function(){var e=this.props,t=e.translate,n=e.scale;return b.default.createElement("div",{className:"media-library__scale"},b.default.createElement(T.default,{className:"media-library__scale-toggle",compact:!0},b.default.createElement(k.default,{selected:1!==n,onClick:this.setScaleToMobileGrid},b.default.createElement("span",{className:"media-library__scale-toggle-label"},t("Grid")),b.default.createElement(E.default,{icon:"grid",size:18})),b.default.createElement(k.default,{selected:1===n,onClick:this.setScaleToMobileFull},b.default.createElement("span",{className:"media-library__scale-toggle-label"},t("List")),b.default.createElement(E.default,{icon:"menu",size:18}))),b.default.createElement(j.default,{step:"1",min:"0",max:D-1,minContent:b.default.createElement(E.default,{icon:"image",size:12}),maxContent:b.default.createElement(E.default,{icon:"image",size:24}),value:this.getSliderPosition(),onChange:this.onScaleChange,className:"media-library__scale-range"}))}}]),t}(v.Component);O.propTypes={mediaScale:v.PropTypes.number,onChange:v.PropTypes.func,setMediaScalePreference:v.PropTypes.func,saveMediaScalePreference:v.PropTypes.func},O.defaultProps={onChange:function(){}},t.default=(0,_.connect)(function(e){return{scale:(0,N.getPreference)(e,"mediaScale")}},{setMediaScalePreference:(0,h.default)(I.setPreference,"mediaScale"),saveMediaScalePreference:(0,h.default)(I.savePreference,"mediaScale")})((0,x.localize)(O)),e.exports=t.default},"./client/my-sites/media-library/upload-url.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=o(p),m=n("./node_modules/lodash/noop.js"),h=o(m),g=n("./node_modules/react/react.js"),y=o(g),v=n("./node_modules/classnames/index.js"),b=o(v),_=n("./node_modules/gridicons/build/index.js"),x=o(_),C=n("./node_modules/i18n-calypso/index.js"),E=n("./client/lib/analytics/index.js"),w=o(E),j=n("./client/components/forms/form-text-input/index.jsx"),S=o(j),T=n("./client/lib/media/actions.js"),P=o(T),k=function(e){function t(){var e,n,o,r;(0,a.default)(this,t);for(var s=arguments.length,l=Array(s),d=0;d<s;d++)l[d]=arguments[d];return n=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.state={value:"",isError:!1},o.upload=function(e){e.preventDefault();var t=!e.target.checkValidity();o.setState({isError:t}),!t&&o.props.site&&(P.default.clearValidationErrors(o.props.site.ID),P.default.add(o.props.site.ID,o.state.value),o.setState({value:"",isError:!1}),o.props.onAddMedia(),o.props.onClose(),w.default.mc.bumpStat("editor_upload_via","url"))},o.onChange=function(e){o.setState({isError:!1,value:e.target.value})},o.onKeyDown=function(e){return"Escape"===e.key?o.props.onClose(e):void("Enter"===e.key&&o.upload(e))},r=n,(0,c.default)(o,r)}return(0,f.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){var e=(0,b.default)("media-library__upload-url",this.props.className),t=this.props,n=t.onClose,o=t.translate;return y.default.createElement("form",{className:e,onSubmit:this.upload,noValidate:!0},y.default.createElement(S.default,{type:"url",value:this.state.value,placeholder:"https://",onChange:this.onChange,onKeyDown:this.onKeyDown,isError:this.state.isError,autoFocus:!0,required:!0}),y.default.createElement("div",{className:"media-library__upload-url-button-group"},y.default.createElement("button",{type:"submit",className:"button is-primary"},o("Upload",{context:"verb"})),y.default.createElement("button",{type:"button",className:"media-library__upload-url-cancel",onClick:n},y.default.createElement("span",{className:"screen-reader-text"},o("Cancel")),y.default.createElement(x.default,{icon:"cross"}))))}}]),t}(g.Component);k.propTypes={className:g.PropTypes.string,site:g.PropTypes.object,onAddMedia:g.PropTypes.func,onClose:g.PropTypes.func},k.defaultProps={onAddMedia:h.default,onClose:h.default},t.default=(0,C.localize)(k),e.exports=t.default},"./client/my-sites/no-results/index.jsx":function(e,t,n){"use strict";var o=n("./node_modules/react/react.js"),r=o.createClass({displayName:"noResults",getDefaultProps:function(){return{text:"No results",image:!1}},render:function(){return o.createElement("div",{className:"no-results"},this.props.image?o.createElement("img",{className:"no-results__img",src:this.props.image}):null,o.createElement("span",null,this.props.text))}});e.exports=r},"./client/my-sites/post-selector/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/lodash/snakeCase.js"),i=o(r),s=n("./node_modules/lodash/reduce.js"),a=o(s),l=n("./node_modules/react/react.js"),d=o(l),u=n("./node_modules/react-pure-render/mixin.js"),c=o(u),p=n("./client/my-sites/post-selector/selector.jsx"),f=o(p);t.default=d.default.createClass({displayName:"PostSelector",mixins:[c.default],propTypes:{type:l.PropTypes.string,excludePrivateTypes:l.PropTypes.bool,siteId:l.PropTypes.number.isRequired,status:l.PropTypes.string,multiple:l.PropTypes.bool,onChange:l.PropTypes.func,selected:l.PropTypes.number,excludeTree:l.PropTypes.number,emptyMessage:l.PropTypes.string,createLink:l.PropTypes.string,orderBy:l.PropTypes.oneOf(["title","date","modified","comment_count","ID"]),order:l.PropTypes.oneOf(["ASC","DESC"]),showTypeLabels:l.PropTypes.bool,suppressFirstPageLoad:l.PropTypes.bool},getDefaultProps:function(){return{type:"post",status:"publish,private",multiple:!1,orderBy:"title",order:"ASC",suppressFirstPageLoad:!1}},getInitialState:function(){return{search:""}},onSearch:function(e){e!==this.state.search&&this.setState({search:e})},getQuery:function(){var e=this.props,t=e.type,n=e.status,o=e.excludeTree,r=e.orderBy,s=e.order,l=e.excludePrivateTypes,d=this.state.search;return(0,a.default)({type:t,status:n,excludeTree:o,orderBy:r,order:s,excludePrivateTypes:l,search:d},function(e,t,n){return null===t||void 0===t?e:("orderBy"===n&&""!==d&&(t="date"),"order"===n&&""!==d&&(t="DESC"),e[(0,i.default)(n)]=t,e)},{})},render:function(){var e=this.props,t=e.siteId,n=e.multiple,o=e.onChange,r=e.emptyMessage,i=e.createLink,s=e.selected,a=e.showTypeLabels,l=e.suppressFirstPageLoad;return d.default.createElement(f.default,{siteId:t,query:this.getQuery(),onSearch:this.onSearch,multiple:n,onChange:o,emptyMessage:r,createLink:i,selected:s,showTypeLabels:a,suppressFirstPageLoad:l})}}),e.exports=t.default},"./client/my-sites/post-selector/no-results.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/react/react.js"),i=o(r);t.default=i.default.createClass({displayName:"PostSelectorNoResults",propTypes:{createLink:r.PropTypes.string},render:function(){var e=void 0,t=void 0;return t=this.translate("No results. Please try a different search."),this.props.createLink&&(e=this.translate("You may want to {{a}}create a new page{{/a}}.",{context:"Menus: item search/listing results",comment:"This is used when no posts or pages match the given search.",components:{a:i.default.createElement("a",{className:"create-link",href:this.props.createLink,target:"_blank",rel:"noopener noreferrer"})}})),i.default.createElement("span",{className:"is-empty-content"},t," ",e)}}),e.exports=t.default},"./client/my-sites/post-selector/search.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/react/react.js"),i=o(r),s=n("./node_modules/gridicons/build/index.js"),a=o(s);t.default=i.default.createClass({displayName:"PostSelectorSearch",propTypes:{searchTerm:r.PropTypes.string,onSearch:r.PropTypes.func.isRequired},render:function(){return i.default.createElement("div",{className:"post-selector__search"},i.default.createElement(a.default,{icon:"search",size:18}),i.default.createElement("input",{type:"search",placeholder:this.translate("Search…",{textOnly:!0}),value:this.props.searchTerm,onChange:this.props.onSearch}))}}),e.exports=t.default},"./client/my-sites/post-selector/selector.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/json/stringify.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/extends.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/objectWithoutProperties.js"),d=o(l),u=n("./node_modules/lodash/includes.js"),c=o(u),p=n("./node_modules/lodash/isEqual.js"),f=o(p),m=n("./node_modules/lodash/difference.js"),h=o(m),g=n("./node_modules/lodash/range.js"),y=o(g),v=n("./node_modules/lodash/filter.js"),b=o(v),_=n("./node_modules/lodash/reduce.js"),x=o(_),C=n("./node_modules/lodash/map.js"),E=o(C),w=n("./node_modules/lodash/get.js"),j=o(w),S=n("./node_modules/lodash/memoize.js"),T=o(S),P=n("./node_modules/lodash/debounce.js"),k=o(P),I=n("./node_modules/react/react.js"),N=o(I),R=n("./node_modules/react-redux/es/index.js"),D=n("./node_modules/classnames/index.js"),M=o(D),O=n("./node_modules/dom-helpers/util/scrollbarSize.js"),A=o(O),L=n("./node_modules/react-virtualized/dist/commonjs/List/index.js"),F=o(L),B=n("./node_modules/react-virtualized/dist/commonjs/AutoSizer/index.js"),z=o(B),U=n("./client/my-sites/post-selector/no-results.jsx"),H=o(U),W=n("./client/lib/analytics/index.js"),V=o(W),q=n("./client/my-sites/post-selector/search.jsx"),G=o(q),K=n("./client/lib/formatting/index.js"),$=n("./client/state/posts/selectors.js"),Y=n("./client/state/post-types/selectors.js"),J=n("./client/state/sites/selectors.js"),Z=n("./client/components/data/query-post-types/index.jsx"),X=o(Z),Q=n("./client/components/data/query-posts/index.jsx"),ee=o(Q),te=800,ne=25,oe=20,re=10,ie=N.default.createClass({displayName:"PostSelectorPosts",propTypes:{siteId:I.PropTypes.number.isRequired,query:I.PropTypes.object,queryWithVersion:I.PropTypes.object,posts:I.PropTypes.array,lastPage:I.PropTypes.number,loading:I.PropTypes.bool,emptyMessage:I.PropTypes.string,createLink:I.PropTypes.string,selected:I.PropTypes.number,onSearch:I.PropTypes.func,onChange:I.PropTypes.func,multiple:I.PropTypes.bool,showTypeLabels:I.PropTypes.bool},getInitialState:function(){return{searchTerm:"",requestedPages:[1]}},getDefaultProps:function(){return{analyticsPrefix:"Post Selector",searchThreshold:8,loading:!0,emptyMessage:"",posts:[],onSearch:function(){},onChange:function(){}}},componentWillMount:function(){var e=this;this.itemHeights={},this.hasPerformedSearch=!1,this.postIds=(0,E.default)(this.props.posts,"ID"),this.getPostChildren=(0,T.default)(this.getPostChildren),this.queueRecomputeRowHeights=(0,k.default)(this.recomputeRowHeights),this.debouncedSearch=(0,k.default)(function(){e.props.onSearch(e.state.searchTerm)},te)},componentWillReceiveProps:function(e){(0,f.default)(this.props.queryWithVersion,e.queryWithVersion)&&this.props.siteId===e.siteId||this.setState({requestedPages:[1]}),this.props.posts!==e.posts&&(this.getPostChildren.cache.clear(),this.postIds=(0,E.default)(e.posts,"ID"))},componentDidUpdate:function(e){var t=e.selected!==this.props.selected||e.loading&&!this.props.loading;t&&this.list.forceUpdateGrid(),this.props.posts!==e.posts&&this.recomputeRowHeights()},recomputeRowHeights:function(){this.list&&(this.list.recomputeRowHeights(),this.isCompact()&&this.forceUpdate())},setListRef:function(e){this.list=e},setItemRef:function(e,t){if(t&&e){var n=this.itemHeights[e.global_ID]||ne,o=t.clientHeight;this.itemHeights[e.global_ID]=o,n!==o&&this.queueRecomputeRowHeights()}},hasNoSearchResults:function(){return!this.props.loading&&this.props.posts&&!this.props.posts.length&&this.state.searchTerm},hasNoPosts:function(){return!this.props.loading&&this.props.posts&&!this.props.posts.length},getItem:function(e){if(this.props.posts)return this.props.posts[e]},isCompact:function(){return!(!this.props.posts||this.state.searchTerm||this.hasNoPosts())&&this.props.posts.length<this.props.searchThreshold},isTypeLabelsVisible:function(){return"boolean"==typeof this.props.showTypeLabels?this.props.showTypeLabels:"any"===this.props.queryWithVersion.type},isLastPage:function(){var e=this.props,t=e.lastPage,n=e.loading,o=this.state.requestedPages;return(0,c.default)(o,t)&&!n},getPostChildren:function(e){var t=this.props.posts;return(0,b.default)(t,function(t){var n=t.parent;return n&&n.ID===e})},getItemHeight:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e?e.parent&&!n&&(0,c.default)(this.postIds,e.parent.ID)?0:this.itemHeights[e.global_ID]?this.itemHeights[e.global_ID]:(0,x.default)(this.getPostChildren(e.ID),function(e,n){return e+t.getItemHeight(n,!0)},ne):ne},getRowHeight:function(e){var t=e.index;return this.getItemHeight(this.getItem(t))},getCompactContainerHeight:function(){var e=this;return(0,y.default)(0,this.getRowCount()).reduce(function(t,n){return t+e.getRowHeight({index:n})},0)},getPageForIndex:function(e){var t=this.props,n=t.queryWithVersion,o=t.lastPage,r=n.number||oe,i=Math.ceil(e/r);return Math.max(Math.min(i,o||1/0),1)},getRowCount:function(){var e=0;return this.props.posts&&(e+=this.props.posts.length),this.isLastPage()||(e+=1),e},setRequestedPages:function(e){var t=e.startIndex,n=e.stopIndex,o=this.state.requestedPages,r=(0,h.default)((0,y.default)(this.getPageForIndex(t-re),this.getPageForIndex(n+re)+1),o);r.length&&this.setState({requestedPages:o.concat(r)})},onSearch:function(e){var t=e.target.value;this.state.searchTerm&&!t&&this.props.onSearch(""),t!==this.state.searchTerm&&(this.hasPerformedSearch||(this.hasPerformedSearch=!0,V.default.ga.recordEvent(this.props.analyticsPrefix,"Performed Post Search")),this.setState({searchTerm:t}),this.debouncedSearch())},renderItem:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.parent||n||!(0,c.default)(this.postIds,e.parent.ID)){var o=function(){for(var n,o=arguments.length,r=Array(o),i=0;i<o;i++)r[i]=arguments[i];return(n=t.props).onChange.apply(n,[e].concat(r))},r=function(){for(var n=arguments.length,o=Array(n),r=0;r<n;r++)o[r]=arguments[r];return t.setItemRef.apply(t,[e].concat(o))},i=this.getPostChildren(e.ID);return N.default.createElement("div",{key:e.global_ID,ref:r,className:"post-selector__list-item"},N.default.createElement("label",null,N.default.createElement("input",{name:"posts",type:this.props.multiple?"checkbox":"radio",value:e.ID,onChange:o,checked:this.props.selected===e.ID,className:"post-selector__input"}),N.default.createElement("span",{className:"post-selector__label"},(0,K.decodeEntities)(e.title||this.translate("Untitled")),this.isTypeLabelsVisible()&&N.default.createElement("span",{className:"post-selector__label-type",style:{paddingRight:this.isCompact()?0:(0,A.default)()}},(0,K.decodeEntities)((0,j.default)(this.props.postTypes,[e.type,"labels","singular_name"],""))))),i.length>0&&N.default.createElement("div",{className:"post-selector__nested-list"},i.map(function(e){return t.renderItem(e,!0)})))}},renderEmptyContent:function(){var e=void 0;if(this.hasNoSearchResults()?e=N.default.createElement(H.default,{createLink:this.props.createLink,noResultsMessage:this.props.noResultsMessage}):this.hasNoPosts()&&(e=this.props.emptyMessage),e)return N.default.createElement("div",{key:"no-results",className:"post-selector__list-item is-empty"},e)},renderRow:function(e){var t=e.index,n=this.getItem(t);return n?this.renderItem(n):N.default.createElement("div",{key:"placeholder",className:"post-selector__list-item is-placeholder"},N.default.createElement("label",null,N.default.createElement("input",{type:this.props.multiple?"checkbox":"radio",disabled:!0,className:"post-selector__input"}),N.default.createElement("span",{className:"post-selector__label"},this.translate("Loading…"))))},cellRendererWrapper:function(e){var t=e.key,n=e.style,o=(0,d.default)(e,["key","style"]);return N.default.createElement("div",{key:t,style:n},this.renderRow(o))},render:function(){var e=this,t=this.props,n=t.className,o=t.siteId,r=t.queryWithVersion,s=t.suppressFirstPageLoad,l=t.posts,d=t.postTypes,u=this.state,c=u.requestedPages,p=u.searchTerm,f=this.isCompact(),m=this.isTypeLabelsVisible(),h=p.length>0||!f,g=(0,M.default)("post-selector",n,{"is-compact":f,"is-type-labels-visible":m}),y=(0,b.default)(c,function(e){return 1!==e||!s||!l;
});return N.default.createElement("div",{className:g},y.map(function(e){return N.default.createElement(ee.default,{key:"page-"+e,siteId:o,query:(0,a.default)({},r,{page:e})})}),m&&o&&!d&&N.default.createElement(X.default,{siteId:o}),h&&N.default.createElement(G.default,{searchTerm:p,onSearch:this.onSearch}),N.default.createElement("div",{className:"post-selector__results"},N.default.createElement(z.default,{key:(0,i.default)(r),disableHeight:f},function(t){var n=t.height,o=t.width;return N.default.createElement(F.default,{ref:e.setListRef,width:o,height:f?e.getCompactContainerHeight():n,onRowsRendered:e.setRequestedPages,noRowsRenderer:e.renderEmptyContent,rowCount:e.getRowCount(),estimatedRowSize:ne,rowHeight:e.getRowHeight,rowRenderer:e.cellRendererWrapper})})))}});t.default=(0,R.connect)(function(e,t){var n=t.siteId,o=t.query,r=!(0,J.isJetpackSite)(e,n)||(0,J.isJetpackMinimumVersion)(e,n,"5.0")?"1.2":void 0,i=(0,a.default)({},o,{apiVersion:r});return{posts:(0,$.getSitePostsForQueryIgnoringPage)(e,n,i),found:(0,$.getSitePostsFoundForQuery)(e,n,i),lastPage:(0,$.getSitePostsLastPageForQuery)(e,n,i),loading:(0,$.isRequestingSitePostsForQueryIgnoringPage)(e,n,i),postTypes:(0,Y.getPostTypes)(e,n),queryWithVersion:i}})(ie),e.exports=t.default},"./client/my-sites/sharing/connections/inline-connection-action.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getNamedConnectedService=void 0;var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=o(p),m=n("./node_modules/react/react.js"),h=o(m),g=n("./node_modules/react-redux/es/index.js"),y=n("./node_modules/prop-types/index.js"),v=o(y),b=n("./client/my-sites/sharing/connections/service-action.jsx"),_=o(b),x=n("./client/state/sharing/keyring/actions.js"),C=n("./client/state/sharing/keyring/selectors.js"),E=n("./client/state/analytics/actions.js"),w=n("./client/lib/sharing/index.js"),j=o(w),S=t.getNamedConnectedService=function(e,t){return(0,C.getKeyringConnections)(e).filter(function(e){return e.service===t})},T="unknown",P="not-connected",k="reconnect",I="connected",N=function(e){function t(e){(0,a.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return n.handleAction=n.onAction.bind(n),n.state={isConnecting:!1,isRefreshing:!1},n}return(0,f.default)(t,e),(0,d.default)(t,[{key:"getConnectionStatus",value:function(e,t){return t?T:e?"broken"===e.status?k:I:P}},{key:"onAction",value:function(){var e=this.props.service,t=this.getConnectionStatus(this.props.connectedService,this.state.isFetching);k===t?this.refresh(e):this.addConnection(e)}},{key:"refresh",value:function(e){this.setState({isRefreshing:!0}),this.requestAccess(e.refresh_URL),this.trackEvent(e.ID,"Clicked Connect Button")}},{key:"addConnection",value:function(e){this.setState({isConnecting:!0}),this.requestAccess(e.connect_URL),this.trackEvent(e.ID,"Clicked Reconnect Button")}},{key:"requestAccess",value:function(e){var t=this;(0,j.default)(e,function(){t.props.requestKeyringConnections()})}},{key:"trackEvent",value:function(e,t){this.props.recordGoogleEvent("Sharing",t,e)}},{key:"componentWillReceiveProps",value:function(e){e.isFetching===!0&&this.setState({isConnecting:!1,isRefreshing:!1})}},{key:"render",value:function(){var e=this.getConnectionStatus(this.props.connectedService,this.props.isFetching),t=this.state,n=t.isConnecting,o=t.isRefreshing,r=this.props.service;return h.default.createElement(_.default,{status:e,service:r,onAction:this.handleAction,isConnecting:n,isRefreshing:o,isDisconnecting:!1})}}]),t}(m.Component);N.propTypes={service:v.default.object.isRequired,isFetching:v.default.bool.isRequired,connectedService:v.default.object},t.default=(0,g.connect)(function(e,t){var n=S(e,t.serviceName);return{isFetching:(0,C.isKeyringConnectionsFetching)(e),connectedService:n.length>0?n[0]:null}},{requestKeyringConnections:x.requestKeyringConnections,recordGoogleEvent:E.recordGoogleEvent})(N)},"./client/my-sites/sharing/connections/inline-connection.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=o(p),m=n("./node_modules/react/react.js"),h=o(m),g=n("./node_modules/react-redux/es/index.js"),y=n("./node_modules/prop-types/index.js"),v=o(y),b=n("./client/state/sharing/services/selectors.js"),_=n("./client/components/data/query-keyring-services/index.jsx"),x=o(_),C=n("./client/components/data/query-publicize-connections/index.jsx"),E=o(C),w=n("./client/my-sites/sharing/connections/inline-connection-action.jsx"),j=o(w),S=function(e){function t(){return(0,a.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){var e=this.props.service;return h.default.createElement("div",null,h.default.createElement(E.default,{selectedSite:!0}),h.default.createElement(x.default,null),e&&h.default.createElement(j.default,{service:e}))}}]),t}(m.Component);S.propTypes={serviceName:v.default.string.isRequired},t.default=(0,g.connect)(function(e,t){return{service:(0,b.getKeyringServiceByName)(e,t.serviceName)}})(S),e.exports=t.default},"./client/my-sites/sharing/connections/service-action.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/lodash/identity.js"),i=o(r),s=n("./node_modules/react/react.js"),a=o(s),l=n("./node_modules/react-redux/es/index.js"),d=n("./node_modules/i18n-calypso/index.js"),u=n("./client/components/button/index.jsx"),c=o(u),p=n("./client/state/sharing/publicize/selectors.js"),f=function(e){var t=e.isConnecting,n=e.isDisconnecting,o=e.isRefreshing,r=e.onAction,i=e.removableConnections,s=e.status,l=e.translate,d=!1,u=!1,p=void 0,f="unknown"===s||n||o||t,m=function(e){e.stopPropagation(),r()};return"unknown"===s?p=l("Loading…",{context:"Sharing: Publicize status pending button label"}):n?p=l("Disconnecting…",{context:"Sharing: Publicize disconnect pending button label"}):o?(p=l("Reconnecting…",{context:"Sharing: Publicize reconnect pending button label"}),u=!0):t?p=l("Connecting…",{context:"Sharing: Publicize connect pending button label"}):"connected"===s?p=i.length>1?l("Disconnect All",{context:"Sharing: Publicize disconnect button label"}):l("Disconnect",{context:"Sharing: Publicize disconnect button label"}):"reconnect"===s?(p=l("Reconnect",{context:"Sharing: Publicize reconnect pending button label"}),u=!0):(p=l("Connect",{context:"Sharing: Publicize connect pending button label"}),d=!0),a.default.createElement(c.default,{primary:d,scary:u,compact:!0,onClick:m,disabled:f},p)};f.propTypes={isConnecting:s.PropTypes.bool,isDisconnecting:s.PropTypes.bool,isRefreshing:s.PropTypes.bool,onAction:s.PropTypes.func,removableConnections:s.PropTypes.arrayOf(s.PropTypes.object),service:s.PropTypes.object.isRequired,status:s.PropTypes.string,translate:s.PropTypes.func},f.defaultProps={isConnecting:!1,isDisconnecting:!1,isRefreshing:!1,onAction:function(){},removableConnections:[],status:"unknown",translate:i.default},t.default=(0,l.connect)(function(e,t){var n=t.service;return{removableConnections:(0,p.getRemovableConnections)(e,n.ID)}})((0,d.localize)(f)),e.exports=t.default},"./client/my-sites/upgrade-nudge/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/helpers/toConsumableArray.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/typeof.js"),a=o(s),l=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/createClass.js"),f=o(p),m=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),h=o(m),g=n("./node_modules/babel-runtime/helpers/inherits.js"),y=o(g),v=n("./node_modules/lodash/noop.js"),b=o(v),_=n("./node_modules/lodash/identity.js"),x=o(_),C=n("./node_modules/react/react.js"),E=o(C),w=n("./node_modules/prop-types/index.js"),j=o(w),S=n("./node_modules/react-redux/es/index.js"),T=n("./node_modules/classnames/index.js"),P=o(T),k=n("./node_modules/i18n-calypso/index.js"),I=n("./node_modules/gridicons/build/index.js"),N=o(I),R=n("./client/components/button/index.jsx"),D=o(R),M=n("./client/components/card/index.jsx"),O=o(M),A=n("./client/state/sites/plans/selectors.js"),L=n("./client/lib/plans/index.js"),F=n("./client/lib/products-values/index.js"),B=n("./client/lib/analytics/track-component-view/index.jsx"),z=o(B),U=n("./client/state/analytics/actions.js"),H=n("./client/state/ui/selectors.js"),W=function(e){function t(){var e,n,o,r;(0,c.default)(this,t);for(var i=arguments.length,s=Array(i),a=0;a<i;a++)s[a]=arguments[a];return n=o=(0,h.default)(this,(e=t.__proto__||(0,d.default)(t)).call.apply(e,[this].concat(s))),o.handleClick=function(){var e=o.props,t=e.event,n=e.feature,r=e.onClick,i=e.recordTracksEvent;(t||n)&&i("calypso_upgrade_nudge_cta_click",{cta_name:t,cta_feature:n,cta_size:"regular"}),r()},r=n,(0,h.default)(o,r)}return(0,y.default)(t,e),(0,f.default)(t,[{key:"shouldDisplay",value:function e(){var t=this.props,n=t.feature,o=t.jetpack,r=t.planHasFeature,e=t.shouldDisplay,i=t.site;return e?e():!(!i||"object"!==("undefined"==typeof i?"undefined":(0,a.default)(i))||"boolean"!=typeof i.jetpack)&&((!n||!r)&&(!(!n&&!(0,F.isFreePlan)(i.plan))&&(("no-adverts"!==n||!i.options.wordads)&&!(!o&&i.jetpack||o&&!i.jetpack))))}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.compact,o=e.event,r=e.feature,i=e.icon,s=e.message,a=e.site,l=e.title,d=e.translate,u=(0,P.default)(t,"upgrade-nudge"),c=this.props.href;return this.shouldDisplay()?(!c&&a&&(c=r?"/plans/"+a.slug+"?feature="+r:"/plans/"+a.slug),n?E.default.createElement(D.default,{className:u,onClick:this.handleClick,href:c},E.default.createElement(N.default,{className:"upgrade-nudge__icon",icon:i}),E.default.createElement("div",{className:"upgrade-nudge__info"},E.default.createElement("span",{className:"upgrade-nudge__title"},l||d("Upgrade to Premium")),E.default.createElement("span",{className:"upgrade-nudge__message"},s))):E.default.createElement(O.default,{compact:!0,className:u,onClick:this.handleClick,href:c},E.default.createElement(N.default,{className:"upgrade-nudge__icon",icon:i,size:18}),E.default.createElement("div",{className:"upgrade-nudge__info"},E.default.createElement("span",{className:"upgrade-nudge__title"},l||d("Upgrade to Premium")),E.default.createElement("span",{className:"upgrade-nudge__message"},s)),(o||r)&&E.default.createElement(z.default,{eventName:"calypso_upgrade_nudge_impression",eventProperties:{cta_name:o,cta_feature:r,cta_size:"regular"}}))):null}}]),t}(E.default.Component);W.propTypes={onClick:j.default.func,className:j.default.string,message:j.default.string,icon:j.default.string,event:j.default.string,href:j.default.string,jetpack:j.default.bool,compact:j.default.bool,feature:j.default.oneOf([!1].concat((0,i.default)((0,L.getValidFeatureKeys)()))),shouldDisplay:j.default.func,site:j.default.object,translate:j.default.func},W.defaultProps={onClick:b.default,message:"And get your own domain address.",icon:"star",event:null,jetpack:!1,feature:!1,compact:!1,shouldDisplay:null,site:null,translate:x.default},t.default=(0,S.connect)(function(e,t){var n=(0,H.getSelectedSiteId)(e);return{site:(0,H.getSelectedSite)(e),planHasFeature:(0,A.hasFeature)(e,n,t.feature)}},{recordTracksEvent:U.recordTracksEvent})((0,k.localize)(W)),e.exports=t.default},"./client/post-editor/controller.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){return e.params.post&&"new"!==e.params.post?parseInt(e.params.post,10):null}function i(e){return(0,f.default)(e.path,"/post")?"post":(0,f.default)(e.path,"/page")?"page":e.params.type}function s(e,t){x.default.unmountComponentAtNode(document.getElementById("secondary")),x.default.render(j.default.createElement(I.Provider,{store:e.store},j.default.createElement(G.default,{user:ne,userUtils:U.default,type:t})),document.getElementById("primary"))}function a(e){var t=e.store.getState(),n=(0,$.getSelectedSiteId)(t),o=(0,Y.getEditorPostId)(t),r=(0,Y.getEditorPath)(t,n,o,"post",e.query);return r!==e.pathname&&(e.querystring&&(r+="?"+e.querystring),k.default.redirect(r),!0)}function l(e){var t=e.text,n=e.url,o=e.title,r=e.image,i=e.embed,s=[];return r&&s.push(E.default.renderToStaticMarkup(j.default.createElement("p",null,j.default.createElement("a",{href:n},j.default.createElement("img",{src:r}))))),(0,D.isWebUri)(i)&&s.push(E.default.renderToStaticMarkup(j.default.createElement("p",null,i))),t&&s.push(E.default.renderToStaticMarkup(j.default.createElement("blockquote",null,t))),s.push(E.default.renderToStaticMarkup(j.default.createElement("p",null,T.default.translate("via {{anchor/}}",{components:{anchor:j.default.createElement("a",{href:n},o)}})))),s.join("\n\n")}function d(e,t,n){X.default.site(e).post(t).get({context:"edit"}).then(function(t){var o=(0,y.default)(t,"canonical_image","content","excerpt","featured_image","format","post_thumbnail","terms","title","type");o.tags=(0,b.default)(t.tags,"name"),o.title=(0,V.decodeEntities)(o.title),o.featured_image=(0,te.getFeaturedImageId)(t);var r={terms:o.terms,title:o.title};O.default.startEditingNew(e,{content:t.content,title:t.title,type:t.type}),n.store.dispatch((0,J.editPost)(e,null,r)),O.default.edit(o);var i=["geo_latitude","geo_longitude"],s=(0,h.default)(t.metadata,function(e,t){var n=t.key,o=t.value;return e[n]=o,e},{});O.default.updateMetadata((0,y.default)(s,i))}).catch(function(e){ee.default.handleServerAction({type:"SET_POST_LOADING_ERROR",error:e})})}var u=n("./node_modules/babel-runtime/core-js/object/assign.js"),c=o(u),p=n("./node_modules/lodash/startsWith.js"),f=o(p),m=n("./node_modules/lodash/reduce.js"),h=o(m),g=n("./node_modules/lodash/pick.js"),y=o(g),v=n("./node_modules/lodash/map.js"),b=o(v),_=n("./node_modules/react-dom/index.js"),x=o(_),C=n("./node_modules/react-dom/server.js"),E=o(C),w=n("./node_modules/react/react.js"),j=o(w),S=n("./node_modules/i18n-calypso/index.js"),T=o(S),P=n("./node_modules/page/index.js"),k=o(P),I=n("./node_modules/react-redux/es/index.js"),N=n("./node_modules/querystring-es3/index.js"),R=o(N),D=n("./node_modules/valid-url/index.js"),M=n("./client/lib/posts/actions.js"),O=o(M),A=n("./client/lib/route/index.js"),L=o(A),F=n("./client/lib/user/index.js"),B=o(F),z=n("./client/lib/user/utils.js"),U=o(z),H=n("./client/lib/analytics/index.js"),W=o(H),V=n("./client/lib/formatting/index.js"),q=n("./client/post-editor/post-editor.jsx"),G=o(q),K=n("./client/state/ui/editor/actions.js"),$=n("./client/state/ui/selectors.js"),Y=n("./client/state/ui/editor/selectors.js"),J=n("./client/state/posts/actions.js"),Z=n("./client/lib/wp/browser.js"),X=o(Z),Q=n("./client/dispatcher/index.js"),ee=o(Q),te=n("./client/lib/posts/utils.js"),ne=(0,B.default)();e.exports={post:function(e){function t(t){var n=!!e.query.copy;if(e.store.dispatch((0,K.startEditingPost)(t,n?null:u,o)),!a(e)){var r=void 0;switch(o){case"post":r="Post";break;case"page":r="Page";break;default:r="Custom Post Type"}if(p)d(t,p,e),W.default.pageView.record("/"+o,r+" > New");else if(u)O.default.startEditingExisting(t,u),W.default.pageView.record("/"+o+"/:blogid/:postid",r+" > Edit");else{var i={type:o};if(e.query.url){var s=l(e.query);(0,c.default)(i,{postFormat:"quote",title:e.query.title,content:s})}O.default.startEditingNew(t,i),W.default.pageView.record("/"+o,r+" > New")}}}function n(){var n=(0,$.getSelectedSiteId)(e.store.getState());return!!n&&(f&&f(),t(n),!0)}var o=i(e),u=r(e),p=e.query.copy,f=void 0;n()||(f=e.store.subscribe(n)),s(e,o)},exitPost:function(e,t){var n=r(e),o=(0,$.getSelectedSiteId)(e.store.getState());o&&e.store.dispatch((0,K.stopEditingPost)(o,n)),t()},pressThis:function(e,t){if(e.getSiteSelectionHeaderText=function(){return T.default.translate("Select a site to start writing")},!e.query.url)return t();var n=ne.get();if(!n.primarySiteSlug)return t();var o=L.default.addSiteFragment(e.pathname,n.primarySiteSlug),r=R.default.stringify(e.query),i=[o,r].join("?");return k.default.redirect(i),!1}}},"./client/post-editor/edit-post-status/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.EditPostStatus=void 0;var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=o(p),m=n("./node_modules/react/react.js"),h=o(m),g=n("./node_modules/prop-types/index.js"),y=o(g),v=n("./node_modules/i18n-calypso/index.js"),b=n("./node_modules/react-redux/es/index.js"),_=n("./node_modules/gridicons/build/index.js"),x=o(_),C=n("./client/components/button/index.jsx"),E=o(C),w=n("./client/components/forms/form-toggle/compact.jsx"),j=o(w),S=n("./client/post-editor/editor-revisions/index.jsx"),T=o(S),P=n("./client/lib/posts/utils.js"),k=o(P),I=n("./client/components/info-popover/index.jsx"),N=o(I),R=n("./client/lib/site/utils.js"),D=o(R),M=n("./client/lib/posts/stats.js"),O=n("./client/state/posts/actions.js"),A=n("./client/state/ui/selectors.js"),L=n("./client/state/ui/editor/selectors.js"),F=n("./client/state/posts/selectors.js"),B=n("./client/post-editor/editor-publish-date/index.jsx"),z=o(B),U=n("./client/post-editor/editor-visibility/index.jsx"),H=o(U),W=t.EditPostStatus=function(e){function t(e){(0,a.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return n.toggleStickyStatus=function(){var e=void 0,t=void 0;n.props.post.sticky?(e="advanced_sticky_disabled",t="Off"):(e="advanced_sticky_enabled",t="On"),(0,M.recordStat)(e),(0,M.recordEvent)("Changed Sticky Setting",t),n.props.editPost(n.props.siteId,n.props.postId,{sticky:!n.props.post.sticky})},n.togglePendingStatus=function(){var e="pending"===n.props.post.status;(0,M.recordStat)("status_changed"),(0,M.recordEvent)("Changed Pending Status",e?"Marked Draft":"Marked Pending"),n.props.editPost(n.props.siteId,n.props.postId,{status:e?"draft":"pending"})},n.revertToDraft=function(){n.props.onSave("draft")},n}return(0,f.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){var e=void 0,t=void 0,n=void 0,o=void 0,r=void 0,i=void 0,s=this.props,a=s.translate,l=s.isPostPrivate;this.props.post&&(i="password"===k.default.getVisibility(this.props.post),e=this.props.post.sticky,n=k.default.isPending(this.props.post),t=k.default.isPublished(this.props.savedPost),r=this.props.savedPost&&"future"===this.props.savedPost.status,o=D.default.userCan("publish_posts",this.props.site));var d=this.props.site&&this.props.site.options&&this.props.site.options.admin_url;return h.default.createElement("div",{className:"edit-post-status"},this.renderPostScheduling(),this.renderPostVisibility(),"post"===this.props.type&&!l&&!i&&h.default.createElement("label",{className:"edit-post-status__sticky"},h.default.createElement("span",{className:"edit-post-status__label-text"},a("Stick to the front page"),h.default.createElement(N.default,{position:"top right",gaEventCategory:"Editor",popoverName:"Sticky Post"},a("Sticky posts will appear at the top of the posts listing."))),h.default.createElement(j.default,{checked:e,onChange:this.toggleStickyStatus,"aria-label":a("Stick post to the front page")})),!t&&!r&&o&&h.default.createElement("label",{className:"edit-post-status__pending-review"},h.default.createElement("span",{className:"edit-post-status__label-text"},a("Pending review"),h.default.createElement(N.default,{position:"top right"},a("Flag this post to be reviewed for approval."))),h.default.createElement(j.default,{checked:n,onChange:this.togglePendingStatus,"aria-label":a("Request review for post")})),(t||r||n&&!o)&&h.default.createElement(E.default,{className:"edit-post-status__revert-to-draft",onClick:this.revertToDraft,compact:!0},h.default.createElement(x.default,{icon:"undo",size:18})," ",a("Revert to draft")),h.default.createElement(T.default,{revisions:this.props.post&&this.props.post.revisions,adminUrl:d,setNestedSidebar:this.props.setNestedSidebar,selectRevision:this.props.selectRevision}))}},{key:"renderPostScheduling",value:function(){return h.default.createElement(z.default,{post:this.props.post,setPostDate:this.props.setPostDate})}},{key:"renderPostVisibility",value:function(){if(this.props.post&&"open"!==this.props.confirmationSidebarStatus){var e=this.props.post||{},t=e.password,n=e.type,o=this.props.site&&this.props.site.is_private,r=this.props.savedPost?this.props.savedPost.status:null,i=this.props.savedPost?this.props.savedPost.password:null,s={status:this.props.status,onPrivatePublish:this.props.onPrivatePublish,isPrivateSite:o,type:n,password:t,savedStatus:r,savedPassword:i,context:"post-settings"};return h.default.createElement(H.default,s)}}}]),t}(m.Component);W.propTypes={moment:y.default.func,setPostDate:y.default.func,onSave:y.default.func,post:y.default.object,savedPost:y.default.object,site:y.default.object,translate:y.default.func,type:y.default.string,postDate:y.default.string,onPrivatePublish:y.default.func,status:y.default.string,isPostPrivate:y.default.bool,confirmationSidebarStatus:y.default.string,setNestedSidebar:y.default.func,selectRevision:y.default.func},t.default=(0,b.connect)(function(e){var t=(0,A.getSelectedSiteId)(e),n=(0,L.getEditorPostId)(e),o=(0,F.getEditedPost)(e,t,n);return{siteId:t,postId:n,post:o}},{editPost:O.editPost})((0,v.localize)(W))},"./client/post-editor/editor-action-bar/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=o(p),m=n("./node_modules/react/react.js"),h=o(m),g=n("./node_modules/prop-types/index.js"),y=o(g),v=n("./node_modules/gridicons/build/index.js"),b=o(v),_=n("./node_modules/react-redux/es/index.js"),x=n("./client/components/async-load/index.jsx"),C=o(x),E=n("./client/post-editor/editor-sticky/index.jsx"),w=o(E),j=n("./client/lib/posts/utils.js"),S=o(j),T=n("./client/components/tooltip/index.jsx"),P=o(T),k=n("./client/components/button/index.jsx"),I=o(k),N=n("./client/post-editor/editor-action-bar/view-label.jsx"),R=o(N),D=n("./client/post-editor/editor-status-label/index.jsx"),M=o(D),O=n("./client/state/ui/selectors.js"),A=n("./client/state/ui/editor/selectors.js"),L=n("./client/state/posts/selectors.js"),F=function(e){n.e("async-load-post-editor-editor-author").then(function(t){e(n("./client/post-editor/editor-author/index.jsx").__esModule?n("./client/post-editor/editor-author/index.jsx").default:n("./client/post-editor/editor-author/index.jsx"))}.bind(null,n)).catch(n.oe)},B=function(e){function t(){var e,n,o,r;(0,a.default)(this,t);for(var s=arguments.length,l=Array(s),d=0;d<s;d++)l[d]=arguments[d];return n=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.state={viewLinkTooltip:!1},r=n,(0,c.default)(o,r)}return(0,f.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){var e=this,t=this.props.site&&!this.props.site.single_user_site,n="password"===S.default.getVisibility(this.props.post),o=this.props,r=o.isPostPrivate,i=o.postAuthor;return h.default.createElement("div",{className:"editor-action-bar"},h.default.createElement("div",{className:"editor-action-bar__cell is-left"},!this.props.hasEditorNestedSidebar&&h.default.createElement(M.default,{post:this.props.savedPost,advancedStatus:!0,type:this.props.type})),h.default.createElement("div",{className:"editor-action-bar__cell is-center"},t&&h.default.createElement(C.default,{require:F,post:this.props.post,isNew:this.props.isNew,postAuthor:i})),h.default.createElement("div",{className:"editor-action-bar__cell is-right"},this.props.post&&"post"===this.props.type&&!n&&!r&&h.default.createElement(w.default,null),S.default.isPublished(this.props.savedPost)&&h.default.createElement(I.default,{href:this.props.savedPost.URL,target:"_blank",rel:"noopener noreferrer",onMouseEnter:function(){return e.setState({viewLinkTooltip:!0})},onMouseLeave:function(){return e.setState({viewLinkTooltip:!1})},ref:"viewLink",borderless:!0},h.default.createElement(b.default,{icon:"external"}),h.default.createElement(P.default,{className:"editor-action-bar__view-post-tooltip",context:this.refs&&this.refs.viewLink,isVisible:this.state.viewLinkTooltip,position:"bottom left"},h.default.createElement(R.default,null)))))}}]),t}(m.Component);B.propTypes={isNew:y.default.bool,onPrivatePublish:y.default.func,post:y.default.object,savedPost:y.default.object,site:y.default.object,type:y.default.string,isPostPrivate:y.default.bool,postAuthor:y.default.object,hasEditorNestedSidebar:y.default.bool},t.default=(0,_.connect)(function(e){var t=(0,O.getSelectedSiteId)(e),n=(0,A.getEditorPostId)(e),o=(0,L.getEditedPost)(e,t,n);return{siteId:t,postId:n,post:o}})(B),e.exports=t.default},"./client/post-editor/editor-action-bar/view-label.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=e.translate,n=e.siteId,o=e.typeSlug,r=e.type,i=void 0;return i="page"===o?t("View page"):"post"===o?t("View post"):r?(0,c.decodeEntities)(r.labels.view_item):t("View",{context:"verb"}),l.default.createElement("span",{className:"editor-action-bar__view-label"},n&&"page"!==o&&"post"!==o&&l.default.createElement(y.default,{siteId:n}),i)}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/babel-runtime/core-js/object/assign.js"),s=o(i),a=n("./node_modules/react/react.js"),l=o(a),d=n("./node_modules/react-redux/es/index.js"),u=n("./node_modules/i18n-calypso/index.js"),c=n("./client/lib/formatting/index.js"),p=n("./client/state/posts/selectors.js"),f=n("./client/state/ui/selectors.js"),m=n("./client/state/ui/editor/selectors.js"),h=n("./client/state/post-types/selectors.js"),g=n("./client/components/data/query-post-types/index.jsx"),y=o(g);r.propTypes={translate:a.PropTypes.func,siteId:a.PropTypes.number,typeSlug:a.PropTypes.string,type:a.PropTypes.object},t.default=(0,d.connect)(function(e){var t=(0,f.getSelectedSiteId)(e),n={siteId:t},o=(0,p.getEditedPost)(e,t,(0,m.getEditorPostId)(e));return o?(0,s.default)(n,{typeSlug:o.type,type:(0,h.getPostType)(e,t,o.type)}):n})((0,u.localize)(r)),e.exports=t.default},"./client/post-editor/editor-categories-tags/accordion.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.EditorCategoriesTagsAccordion=void 0;var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=o(p),m=n("./node_modules/lodash/unescape.js"),h=o(m),g=n("./node_modules/lodash/toArray.js"),y=o(g),v=n("./node_modules/lodash/get.js"),b=o(v),_=n("./node_modules/react/react.js"),x=o(_),C=n("./node_modules/react-redux/es/index.js"),E=n("./node_modules/classnames/index.js"),w=o(E),j=n("./node_modules/i18n-calypso/index.js"),S=n("./client/components/accordion/index.jsx"),T=o(S),P=n("./client/components/accordion/section.jsx"),k=o(P),I=n("./client/post-editor/editor-drawer/label.jsx"),N=o(I),R=n("./client/post-editor/editor-term-selector/index.jsx"),D=o(R),M=n("./client/post-editor/term-token-field/index.jsx"),O=o(M),A=n("./client/components/notice/index.jsx"),L=o(A),F=n("./client/components/notice/notice-action.jsx"),B=o(F),z=n("./client/lib/route/index.js"),U=n("./client/state/ui/selectors.js"),H=n("./client/state/ui/editor/selectors.js"),W=n("./client/state/posts/selectors.js"),V=n("./client/state/sites/selectors.js"),q=n("./client/state/terms/selectors.js"),G=t.EditorCategoriesTagsAccordion=function(e){function t(){return(0,a.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,d.default)(t,[{key:"renderJetpackNotice",value:function(){var e=this.props,t=e.translate,n=e.siteSlug;return x.default.createElement(L.default,{status:"is-warning",showDismiss:!1,text:t("You must update Jetpack to use this feature."),className:"editor-categories-tags__upgrade-notice"},x.default.createElement(B.default,{href:(0,z.addSiteFragment)("/plugins/jetpack",n)},t("Update Now")))}},{key:"renderCategories",value:function(){var e=this.props,t=e.translate,n=e.postType,o=e.isTermsSupported;if("page"!==n)return x.default.createElement(k.default,null,x.default.createElement(N.default,{helpText:t("Use categories to group your posts by topic."),labelText:t("Categories")}),o?x.default.createElement(D.default,{compact:!0,taxonomyName:"category"}):this.renderJetpackNotice())}},{key:"renderTags",value:function(){var e=this.props,t=e.isTermsSupported,n=e.postType,o=e.translate,r=o("page"===n?"Use tags to associate more specific keywords with your pages.":"Use tags to associate more specific keywords with your posts.");return x.default.createElement(k.default,null,x.default.createElement(N.default,{helpText:r,labelText:o("Tags")},t?x.default.createElement(O.default,{taxonomyName:"post_tag"}):this.renderJetpackNotice()))}},{key:"getCategoriesSubtitle",value:function(){var e=this.props,t=e.translate,n=e.postTerms,o=e.defaultCategory,r=(0,y.default)((0,b.default)(n,"category"));if(r.length>1)return t("%d category","%d categories",{args:[r.length],count:r.length});var i=void 0;return i=r.length>0?r[0]:o,i?(0,h.default)(i.name):void 0}},{key:"getTagsSubtitle",value:function(){var e=this.props,t=e.translate,n=e.postTerms,o=(0,y.default)((0,b.default)(n,"post_tag")),r=o.length;switch(r){case 0:return null;case 1:case 2:return o.map(function(e){return"#"+(0,h.default)(e.name||e)}).join(", ");default:return t("%d tag","%d tags",{args:[r],count:r})}}},{key:"getSubtitle",value:function(){var e=[],t=this.props,n=t.postType,o=t.siteId;if(!o)return null;if("post"===n){var r=this.getCategoriesSubtitle();r&&e.push(r)}var i=this.getTagsSubtitle();return i&&e.push(i),e.join(", ")}},{key:"getTitle",value:function(){var e=this.props,t=e.translate,n=e.postType,o=void 0;return o=t("page"===n?"Tags":"Categories & Tags")}},{key:"render",value:function(){var e=(0,w.default)("editor-drawer__accordion","editor-categories-tags__accordion",this.props.className);return x.default.createElement(T.default,{title:this.getTitle(),subtitle:this.getSubtitle(),className:e},this.renderCategories(),this.renderTags())}}]),t}(_.Component);G.propTypes={translate:_.PropTypes.func,postTerms:_.PropTypes.object,postType:_.PropTypes.string,defaultCategory:_.PropTypes.object,
isTermsSupported:_.PropTypes.bool,siteSlug:_.PropTypes.string},t.default=(0,C.connect)(function(e){var t=(0,U.getSelectedSiteId)(e),n=(0,H.getEditorPostId)(e),o=(0,V.getSiteOption)(e,t,"default_category"),r=!1!==(0,V.isJetpackMinimumVersion)(e,t,"4.1.0");return{defaultCategory:(0,q.getTerm)(e,t,"category",o),postTerms:(0,W.getEditedPostValue)(e,t,n,"terms"),postType:(0,W.getEditedPostValue)(e,t,n,"type"),siteSlug:(0,V.getSiteSlug)(e,t),siteId:t,postId:n,isTermsSupported:r}})((0,j.localize)(G))},"./client/post-editor/editor-confirmation-sidebar/header.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=o(p),m=n("./node_modules/lodash/get.js"),h=o(m),g=n("./node_modules/react/react.js"),y=o(g),v=n("./node_modules/prop-types/index.js"),b=o(v),_=n("./node_modules/react-redux/es/index.js"),x=n("./node_modules/i18n-calypso/index.js"),C=n("./client/state/ui/selectors.js"),E=n("./client/state/post-types/selectors.js"),w=n("./client/lib/posts/utils.js"),j=o(w),S=function(e){function t(){return(0,a.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,d.default)(t,[{key:"renderPublishHeader",value:function(){var e=this.props,t=e.post,n=e.postTypeLabel,o=e.translate,r=(0,h.default)(t,"type","post");switch(r){case"post":return y.default.createElement("div",{className:"editor-confirmation-sidebar__header"},o("{{strong}}Almost there!{{/strong}} You can double-check your post’s settings below. When you’re happy, use the big green button to send your post out into the world!",{comment:"This string appears as the header for the confirmation sidebar when a user publishes a post.",components:{strong:y.default.createElement("strong",null)}}));case"page":return y.default.createElement("div",{className:"editor-confirmation-sidebar__header"},o("{{strong}}Almost there!{{/strong}} You can double-check your page’s settings below. When you’re happy, use the big green button to send your page out into the world!",{comment:"This string appears as the header for the confirmation sidebar when a user publishes a page.",components:{strong:y.default.createElement("strong",null)}}));default:return y.default.createElement("div",{className:"editor-confirmation-sidebar__header"},o("{{strong}}Almost there!{{/strong}} You can double-check your settings below. When you’re happy, use the big green button to send your %(postTypeLabel)s out into the world!",{comment:"This string appears as the header for the confirmation sidebar when a user publishes a custom post type. `postTypeLabel` is the singular name of the custom post type.",args:{postTypeLabel:n},components:{strong:y.default.createElement("strong",null)}}))}}},{key:"renderScheduleHeader",value:function(){var e=this.props,t=e.post,n=e.postTypeLabel,o=e.translate,r=(0,h.default)(t,"type","post");switch(r){case"post":return y.default.createElement("div",{className:"editor-confirmation-sidebar__header"},o("{{strong}}Almost there!{{/strong}} You can double-check your post’s settings below. When you’re happy, use the big green button to schedule your post!",{comment:"This string appears as the header for the confirmation sidebar when a user schedules the publishing of a post.",components:{strong:y.default.createElement("strong",null)}}));case"page":return y.default.createElement("div",{className:"editor-confirmation-sidebar__header"},o("{{strong}}Almost there!{{/strong}} You can double-check your page’s settings below. When you’re happy, use the big green button to schedule your page!",{comment:"This string appears as the header for the confirmation sidebar when a user schedules the publishing of a page.",components:{strong:y.default.createElement("strong",null)}}));default:return y.default.createElement("div",{className:"editor-confirmation-sidebar__header"},o("{{strong}}Almost there!{{/strong}} You can double-check your settings below. When you’re happy, use the big green button to schedule your %(postTypeLabel)s!",{comment:"This string appears as the header for the confirmation sidebar when a user schedules a custom post type. `postTypeLabel` is the singular name of the custom post type.",args:{postTypeLabel:n},components:{strong:y.default.createElement("strong",null)}}))}}},{key:"render",value:function(){var e=j.default.isFutureDated(this.props.post);return e?this.renderScheduleHeader():this.renderPublishHeader()}}]),t}(g.PureComponent);S.propTypes={post:b.default.object},t.default=(0,_.connect)(function(e,t){var n=t.post,o=(0,C.getSelectedSiteId)(e),r=(0,E.getPostTypes)(e,o),i=n&&r&&r[n.type]&&(0,h.default)(r[n.type],"labels.singular_name");return{postTypeLabel:i}})((0,x.localize)(S)),e.exports=t.default},"./client/post-editor/editor-confirmation-sidebar/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=o(p),m=n("./node_modules/lodash/get.js"),h=o(m),g=n("./node_modules/react/react.js"),y=o(g),v=n("./node_modules/classnames/index.js"),b=o(v),_=n("./node_modules/react-redux/es/index.js"),x=n("./node_modules/i18n-calypso/index.js"),C=n("./node_modules/gridicons/build/index.js"),E=o(C),w=n("./client/components/button/index.jsx"),j=o(w),S=n("./client/post-editor/editor-publish-date/index.jsx"),T=o(S),P=n("./client/post-editor/editor-visibility/index.jsx"),k=o(P),I=n("./client/components/forms/form-checkbox/index.jsx"),N=o(I),R=n("./client/components/forms/form-label/index.jsx"),D=o(R),M=n("./client/post-editor/editor-confirmation-sidebar/header.jsx"),O=o(M),A=n("./client/state/posts/actions.js"),L=n("./client/state/ui/selectors.js"),F=n("./client/state/ui/editor/selectors.js"),B=n("./client/state/posts/selectors.js"),z=n("./client/post-editor/editor-publish-button/index.jsx"),U=function(e){function t(){var e,n,o,r;(0,a.default)(this,t);for(var s=arguments.length,l=Array(s),d=0;d<s;d++)l[d]=arguments[d];return n=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.getCloseOverlayHandler=function(e){return function(){return o.props.setStatus({status:"closed",context:e})}},o.closeAndPublish=function(){o.props.setStatus({status:"closed",context:"publish"}),o.props.onPublish(!0)},r=n,(0,c.default)(o,r)}return(0,f.default)(t,e),(0,d.default)(t,[{key:"getPublishButtonLabel",value:function(e){switch(e){case"update":return this.props.translate("Update");case"schedule":return this.props.translate("Schedule!");case"publish":return this.props.translate("Publish!");case"requestReview":return this.props.translate("Submit for Review")}}},{key:"renderPublishButton",value:function(){if(this.props.site&&this.props.post&&this.props.savedPost){var e=(0,z.getPublishButtonStatus)(this.props.site,this.props.post,this.props.savedPost),t=this.getPublishButtonLabel(e),n=!this.props.isPrivatePost||this.props.isPrivatePostPasswordValid;return y.default.createElement(j.default,{disabled:!n,onClick:this.closeAndPublish},t)}}},{key:"getBusyButtonLabel",value:function(e){switch(e){case"update":return this.props.translate("Updating...");case"schedule":return this.props.translate("Scheduling...");case"publish":return this.props.translate("Publishing...");case"requestReview":return this.props.translate("Submitting for Review...")}return this.props.translate("Publishing...")}},{key:"renderPrivacyControl",value:function(){if(this.props.post){var e=this.props.post||{},t=e.password,n=e.type,o=(0,h.default)(this.props.post,"status","draft"),r=(0,h.default)(this.props,"site.is_private"),i=(0,h.default)(this.props,"savedPost.status"),s=(0,h.default)(this.props,"savedPost.password"),a={onPrivatePublish:this.props.onPrivatePublish,isPrivateSite:r,type:n,password:t,status:o,savedStatus:i,savedPassword:s,context:"confirmation-sidebar"};return y.default.createElement(k.default,a)}}},{key:"renderPublishingBusyButton",value:function(){if("publishing"===this.props.status&&this.props.site&&this.props.post&&this.props.savedPost){var e=(0,z.getPublishButtonStatus)(this.props.site,this.props.post,this.props.savedPost),t=this.getBusyButtonLabel(e);return y.default.createElement(j.default,{disabled:!0,className:"editor-confirmation-sidebar__publishing-button is-busy is-primary"},t)}}},{key:"renderNoticeDisplayPreferenceCheckbox",value:function(){return y.default.createElement("div",{className:"editor-confirmation-sidebar__display-preference"},y.default.createElement(D.default,null,y.default.createElement(N.default,{onChange:this.props.handlePreferenceChange,defaultChecked:!0,className:"editor-confirmation-sidebar__display-preference-checkbox",id:"confirmation_sidebar_display_preference",name:"confirmation_sidebar_display_preference"}),y.default.createElement("span",null,this.props.translate("Show this every time I publish",{comment:"This string appears in the bottom of a publish confirmation sidebar.There is limited space. Longer strings will wrap."}))))}},{key:"render",value:function(){var e="open"===this.props.status,t="closed"!==this.props.status;return y.default.createElement("div",{className:(0,b.default)({"editor-confirmation-sidebar":!0,"is-active":t})},this.renderPublishingBusyButton(),y.default.createElement("div",{className:(0,b.default)({"editor-confirmation-sidebar__sidebar":!0,"is-active":e})},y.default.createElement("div",{className:"editor-confirmation-sidebar__ground-control"},y.default.createElement("div",{className:"editor-confirmation-sidebar__close"},y.default.createElement(j.default,{borderless:!0,onClick:this.getCloseOverlayHandler("dismiss_x"),title:this.props.translate("Close sidebar"),"aria-label":this.props.translate("Close sidebar")},y.default.createElement(E.default,{icon:"cross"}))),y.default.createElement("div",{className:"editor-confirmation-sidebar__action"},this.renderPublishButton())),y.default.createElement("div",{className:"editor-confirmation-sidebar__content-wrap"},y.default.createElement(O.default,{post:this.props.post}),y.default.createElement(T.default,{post:this.props.post,setPostDate:this.props.setPostDate}),y.default.createElement("div",{className:"editor-confirmation-sidebar__privacy-control"},this.renderPrivacyControl())),this.renderNoticeDisplayPreferenceCheckbox()))}}]),t}(y.default.Component);U.propTypes={handlePreferenceChange:y.default.PropTypes.func,onPrivatePublish:y.default.PropTypes.func,onPublish:y.default.PropTypes.func,post:y.default.PropTypes.object,savedPost:y.default.PropTypes.object,isPrivatePost:y.default.PropTypes.bool,isPrivatePostPasswordValid:y.default.PropTypes.bool,setPostDate:y.default.PropTypes.func,setStatus:y.default.PropTypes.func,site:y.default.PropTypes.object,status:y.default.PropTypes.string},t.default=(0,_.connect)(function(e){var t=(0,L.getSelectedSiteId)(e),n=(0,F.getEditorPostId)(e),o=(0,B.getEditedPost)(e,t,n),r=(0,B.isEditedPostPrivate)(e,t,n),i=(0,B.isPrivateEditedPostPasswordValid)(e,t,n);return{siteId:t,postId:n,post:o,isPrivatePost:r,isPrivatePostPasswordValid:i}},{editPost:A.editPost})((0,x.localize)(U)),e.exports=t.default},"./client/post-editor/editor-delete-post/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/react/react.js"),i=o(r),s=n("./node_modules/classnames/index.js"),a=o(s),l=n("./node_modules/gridicons/build/index.js"),d=o(l),u=n("./client/lib/posts/actions.js"),c=o(u),p=n("./client/lib/accept/index.js"),f=o(p),m=n("./client/lib/posts/utils.js"),h=o(m),g=n("./client/components/button/index.jsx"),y=o(g);t.default=i.default.createClass({displayName:"EditorDeletePost",propTypes:{site:i.default.PropTypes.object,post:i.default.PropTypes.object,onTrashingPost:i.default.PropTypes.func},getInitialState:function(){return{isTrashing:!1}},sendToTrash:function(){this.setState({isTrashing:!0});var e=function(e){e&&this.setState({isTrashing:!1}),this.props.onTrashingPost&&this.props.onTrashingPost(e)}.bind(this);h.default.userCan("delete_post",this.props.post)&&c.default.trash(this.props.post,e)},onSendToTrash:function(){var e=this,t=void 0;this.state.isTrashing||(t="page"===this.props.post.type?this.translate("Are you sure you want to trash this page?"):this.translate("Are you sure you want to trash this post?"),(0,f.default)(t,function(t){t&&e.sendToTrash()},this.translate("Move to trash"),this.translate("Back")))},render:function(){var e=this.props.post;if(!e||!e.ID||"trash"===e.status)return null;var t=(0,a.default)("editor-delete-post__button",{"is-trashing":this.state.isTrashing}),n=this.state.isTrashing?this.translate("Trashing..."):this.translate("Move to trash");return i.default.createElement("div",{className:"editor-delete-post"},i.default.createElement(y.default,{borderless:!0,className:t,onClick:this.onSendToTrash,"aria-label":n},i.default.createElement(d.default,{icon:"trash",size:18}),n))}}),e.exports=t.default},"./client/post-editor/editor-diff-viewer/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/lodash/map.js"),i=o(r),s=n("./node_modules/lodash/get.js"),a=o(s),l=n("./node_modules/react/react.js"),d=o(l),u=n("./node_modules/prop-types/index.js"),c=o(u),p=n("./node_modules/classnames/index.js"),f=o(p),m=n("./node_modules/react-redux/es/index.js"),h=n("./client/state/selectors/get-post-revision.js"),g=o(h),y=n("./client/state/selectors/get-post-revision-changes.js"),v=o(y),b=function(e){var t=e.contentChanges,n=e.revision;return d.default.createElement("div",{className:"editor-diff-viewer"},d.default.createElement("h1",{className:"editor-diff-viewer__title"},(0,a.default)(n,"title")),d.default.createElement("div",{className:"editor-diff-viewer__content"},(0,i.default)(t,function(e,t){var n=(0,f.default)({"editor-diff-viewer__additions":e.added,"editor-diff-viewer__deletions":e.removed});return d.default.createElement("span",{className:n,key:t},e.value)})))};b.propTypes={contentChanges:c.default.array.isRequired,postId:c.default.number,revision:c.default.object,selectedRevisionId:c.default.number,siteId:c.default.number},t.default=(0,m.connect)(function(e,t){var n=t.siteId,o=t.postId,r=t.selectedRevisionId;return{contentChanges:(0,v.default)(e,n,o,r),revision:(0,g.default)(e,n,o,r,"editing")}})(b),e.exports=t.default},"./client/post-editor/editor-document-head/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=e.translate,n=e.siteId,o=e.type,r=e.typeObject,i=e.newPost,a=void 0;return a="post"===o?i?t("New Post",{textOnly:!0}):t("Edit Post",{textOnly:!0}):"page"===o?i?t("New Page",{textOnly:!0}):t("Edit Page",{textOnly:!0}):i?r?r.labels.new_item:t("New",{textOnly:!0}):r?r.labels.edit_item:t("Edit",{context:"verb",textOnly:!0}),s.default.createElement("div",null,n&&"page"!==o&&"post"!==o&&s.default.createElement(p.default,{siteId:n}),s.default.createElement(u.default,{title:a}))}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/react/react.js"),s=o(i),a=n("./node_modules/react-redux/es/index.js"),l=n("./node_modules/i18n-calypso/index.js"),d=n("./client/components/data/document-head/index.jsx"),u=o(d),c=n("./client/components/data/query-post-types/index.jsx"),p=o(c),f=n("./client/state/ui/selectors.js"),m=n("./client/state/ui/editor/selectors.js"),h=n("./client/state/posts/selectors.js"),g=n("./client/state/post-types/selectors.js");r.propTypes={translate:i.PropTypes.func,siteId:i.PropTypes.number,type:i.PropTypes.string,typeObject:i.PropTypes.object,newPost:i.PropTypes.bool},t.default=(0,a.connect)(function(e){var t=(0,f.getSelectedSiteId)(e),n=(0,m.getEditorPostId)(e),o=(0,h.getEditedPostValue)(e,t,n,"type");return{siteId:t,type:o,typeObject:(0,g.getPostType)(e,t,o),newPost:(0,m.isEditorNewPost)(e)}})((0,l.localize)(r)),e.exports=t.default},"./client/post-editor/editor-drawer/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/lodash/get.js"),i=o(r),s=n("./node_modules/react/react.js"),a=o(s),l=n("./node_modules/prop-types/index.js"),d=o(l),u=n("./node_modules/react-addons-create-fragment/index.js"),c=o(u),p=n("./node_modules/react-redux/es/index.js"),f=n("./client/components/accordion/index.jsx"),m=o(f),h=n("./client/components/accordion/section.jsx"),g=o(h),y=n("./client/post-editor/editor-categories-tags/accordion.jsx"),v=o(y),b=n("./client/components/async-load/index.jsx"),_=o(b),x=n("./client/components/forms/form-textarea/index.jsx"),C=o(x),E=n("./client/post-editor/editor-more-options/slug.jsx"),w=o(E),j=n("./client/lib/post-metadata/index.js"),S=o(j),T=n("./client/components/track-input-changes/index.jsx"),P=o(T),k=n("./client/lib/posts/actions.js"),I=o(k),N=n("./client/lib/posts/stats.js"),R=n("./client/lib/products-values/index.js"),D=n("./client/components/data/query-post-types/index.jsx"),M=o(D),O=n("./client/components/data/query-site-settings/index.js"),A=o(O),L=n("./client/state/ui/selectors.js"),F=n("./client/state/ui/editor/selectors.js"),B=n("./client/state/posts/selectors.js"),z=n("./client/state/post-types/selectors.js"),U=n("./client/state/sites/selectors.js"),H=n("./client/config/index.js"),W=o(H),V=n("./client/state/selectors/are-site-permalinks-editable.js"),q=o(V),G=n("./client/post-editor/editor-drawer/taxonomies.jsx"),K=o(G),$=n("./client/post-editor/editor-drawer/page-options.jsx"),Y=o($),J=n("./client/post-editor/editor-drawer/label.jsx"),Z=o(J),X=n("./client/post-editor/editor-more-options/copy-post.jsx"),Q=o(X),ee=n("./client/post-editor/edit-post-status/index.jsx"),te=o(ee),ne={post:{thumbnail:!0,excerpt:!0,"post-formats":!0,"geo-location":!0,tags:!0,comments:!0},page:{thumbnail:!0,"page-attributes":!0,"geo-location":!0,excerpt:!0,comments:!0}},oe=function(e){n.e("async-load-post-editor-editor-post-formats-accordion").then(function(t){e(n("./client/post-editor/editor-post-formats/accordion.jsx").__esModule?n("./client/post-editor/editor-post-formats/accordion.jsx").default:n("./client/post-editor/editor-post-formats/accordion.jsx"))}.bind(null,n)).catch(n.oe)},re=function(e){n.e("async-load-post-editor-editor-sharing-accordion").then(function(t){e(n("./client/post-editor/editor-sharing/accordion.jsx").__esModule?n("./client/post-editor/editor-sharing/accordion.jsx").default:n("./client/post-editor/editor-sharing/accordion.jsx"))}.bind(null,n)).catch(n.oe)},ie=function(e){n.e("async-load-featured-image").then(function(t){e(n("./client/post-editor/editor-drawer/featured-image.jsx").__esModule?n("./client/post-editor/editor-drawer/featured-image.jsx").default:n("./client/post-editor/editor-drawer/featured-image.jsx"))}.bind(null,n)).catch(n.oe)},se=function(e){n.e("async-load-post-editor-editor-location").then(function(t){e(n("./client/post-editor/editor-location/index.jsx").__esModule?n("./client/post-editor/editor-location/index.jsx").default:n("./client/post-editor/editor-location/index.jsx"))}.bind(null,n)).catch(n.oe)},ae=function(e){n.e("async-load-post-editor-editor-discussion").then(function(t){e(n("./client/post-editor/editor-discussion/index.jsx").__esModule?n("./client/post-editor/editor-discussion/index.jsx").default:n("./client/post-editor/editor-discussion/index.jsx"))}.bind(null,n)).catch(n.oe)},le=function(e){n.e("async-load-post-editor-editor-seo-accordion").then(function(t){e(n("./client/post-editor/editor-seo-accordion/index.jsx").__esModule?n("./client/post-editor/editor-seo-accordion/index.jsx").default:n("./client/post-editor/editor-seo-accordion/index.jsx"))}.bind(null,n)).catch(n.oe)},de=a.default.createClass({displayName:"EditorDrawer",propTypes:{site:d.default.object,savedPost:d.default.object,post:d.default.object,canJetpackUseTaxonomies:d.default.bool,typeObject:d.default.object,isNew:d.default.bool,type:d.default.string,setPostDate:d.default.func,onSave:d.default.func,isPostPrivate:d.default.bool,confirmationSidebarStatus:d.default.string,setNestedSidebar:d.default.func,selectRevision:d.default.func},onExcerptChange:function(e){I.default.edit({excerpt:e.target.value})},currentPostTypeSupports:function(e){var t=this.props,n=t.typeObject,o=t.type;return n&&n.supports?!!n.supports[e]:!ne.hasOwnProperty(o)||!!ne[o][e]},recordExcerptChangeStats:function(){(0,N.recordStat)("excerpt_changed"),(0,N.recordEvent)("Changed Excerpt")},renderTaxonomies:function(){var e=this.props,t=e.type,n=e.canJetpackUseTaxonomies,o=W.default.isEnabled("manage/custom-post-types"),r=!o&&this.currentPostTypeSupports("tags"),i=void 0;("post"===t||r)&&(i=a.default.createElement(v.default,null));var s=void 0;return o&&!1!==n&&(s=a.default.createElement(K.default,null)),(0,c.default)({categories:i,taxonomies:s})},renderPostFormats:function(){if(this.props.post&&this.currentPostTypeSupports("post-formats"))return a.default.createElement(_.default,{require:oe,post:this.props.post,className:"editor-drawer__accordion"})},renderSharing:function(){return a.default.createElement(_.default,{require:re,site:this.props.site,post:this.props.post})},renderFeaturedImage:function(){if(this.currentPostTypeSupports("thumbnail"))return a.default.createElement(_.default,{require:ie,site:this.props.site,post:this.props.post})},renderExcerpt:function(){var e=void 0;if(this.currentPostTypeSupports("excerpt"))return this.props.post&&(e=this.props.post.excerpt),a.default.createElement(g.default,null,a.default.createElement(Z.default,{labelText:this.translate("Excerpt"),helpText:this.translate("Excerpts are optional hand-crafted summaries of your content.")},a.default.createElement(P.default,{onNewValue:this.recordExcerptChangeStats},a.default.createElement(C.default,{id:"excerpt",name:"excerpt",onChange:this.onExcerptChange,value:e,placeholder:this.translate("Write an excerpt…"),"aria-label":this.translate("Write an excerpt…")}))))},renderLocation:function(){if(this.props.site&&!this.props.isJetpack&&this.currentPostTypeSupports("geo-location"))return a.default.createElement(g.default,null,a.default.createElement(Z.default,{labelText:this.translate("Location")}),a.default.createElement(_.default,{require:se,coordinates:S.default.geoCoordinates(this.props.post)}))},renderDiscussion:function(){if(this.currentPostTypeSupports("comments"))return a.default.createElement(g.default,null,a.default.createElement(_.default,{require:ae,site:this.props.site,post:this.props.post,isNew:this.props.isNew}))},renderSeo:function(){var e=this.props.jetpackVersionSupportsSeo;if(this.props.site&&(!this.props.isJetpack||this.props.isSeoToolsModuleActive&&e)){var t=this.props.site.plan,n=(0,R.isBusiness)(t)||(0,R.isEnterprise)(t);if(n)return a.default.createElement(_.default,{require:le,metaDescription:S.default.metaDescription(this.props.post)})}},renderCopyPost:function(){var e=this.props.type;if("post"===e||"page"===e)return a.default.createElement(Q.default,{type:e})},renderMoreOptions:function(){var e=this.props.isPermalinkEditable;if(this.currentPostTypeSupports("excerpt")||this.currentPostTypeSupports("geo-location")||this.currentPostTypeSupports("comments")||e)return a.default.createElement(m.default,{title:this.translate("More Options"),className:"editor-drawer__more-options"},e&&a.default.createElement(w.default,null),this.renderExcerpt(),this.renderLocation(),this.renderDiscussion(),this.renderCopyPost())},renderPageOptions:function(){if(this.currentPostTypeSupports("page-attributes"))return a.default.createElement(Y.default,null)},renderStatus:function(){var e=(0,i.default)(this.props.post,"date",null),t=(0,i.default)(this.props.post,"status",null);return a.default.createElement(m.default,{title:this.translate("Status")},a.default.createElement(te.default,{savedPost:this.props.savedPost,postDate:e,type:this.props.type,onSave:this.props.onSave,onTrashingPost:this.props.onTrashingPost,onPrivatePublish:this.props.onPrivatePublish,setPostDate:this.props.setPostDate,site:this.props.site,status:t,isPostPrivate:this.props.isPostPrivate,confirmationSidebarStatus:this.props.confirmationSidebarStatus,setNestedSidebar:this.props.setNestedSidebar,selectRevision:this.props.selectRevision}))},render:function(){var e=this.props.site;return a.default.createElement("div",{className:"editor-drawer"},e&&a.default.createElement(M.default,{siteId:e.ID}),e&&a.default.createElement(A.default,{siteId:e.ID}),this.renderStatus(),this.renderTaxonomies(),this.renderFeaturedImage(),this.renderPageOptions(),this.renderSharing(),this.renderPostFormats(),this.renderSeo(),this.renderMoreOptions())}});t.default=(0,p.connect)(function(e){var t=(0,L.getSelectedSiteId)(e),n=(0,B.getEditedPostValue)(e,t,(0,F.getEditorPostId)(e),"type");return{isPermalinkEditable:(0,q.default)(e,t),canJetpackUseTaxonomies:(0,U.isJetpackMinimumVersion)(e,t,"4.1"),isJetpack:(0,U.isJetpackSite)(e,t),isSeoToolsModuleActive:(0,U.isJetpackModuleActive)(e,t,"seo-tools"),jetpackVersionSupportsSeo:(0,U.isJetpackMinimumVersion)(e,t,"4.4-beta1"),typeObject:(0,z.getPostType)(e,t,n)}},null,null,{pure:!1})(de),e.exports=t.default},"./client/post-editor/editor-drawer/label.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=e.children,n=e.labelText,o=e.helpText;return s.default.createElement("label",{className:"editor-drawer__label"},s.default.createElement("span",{className:"editor-drawer__label-text"},n,o&&s.default.createElement(l.default,{position:"top left"},o)),t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var i=n("./node_modules/react/react.js"),s=o(i),a=n("./client/components/info-popover/index.jsx"),l=o(a);r.propTypes={children:i.PropTypes.node,helpText:i.PropTypes.string,labelText:i.PropTypes.string},e.exports=t.default},"./client/post-editor/editor-drawer/page-options.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=e.translate,n=e.postType,o=e.hierarchical,r=void 0;return r=t("page"===n?"Page Attributes":"Attributes"),l.default.createElement(C.default,{title:r},o&&l.default.createElement(g.default,null),l.default.createElement(v.default,null),l.default.createElement(_.default,null))}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/lodash/get.js"),s=o(i),a=n("./node_modules/react/react.js"),l=o(a),d=n("./node_modules/react-redux/es/index.js"),u=n("./node_modules/i18n-calypso/index.js"),c=n("./client/state/ui/selectors.js"),p=n("./client/state/posts/selectors.js"),f=n("./client/state/ui/editor/selectors.js"),m=n("./client/state/post-types/selectors.js"),h=n("./client/post-editor/editor-page-parent/index.jsx"),g=o(h),y=n("./client/post-editor/editor-page-templates/index.jsx"),v=o(y),b=n("./client/post-editor/editor-page-order/index.jsx"),_=o(b),x=n("./client/components/accordion/index.jsx"),C=o(x);t.default=(0,d.connect)(function(e){var t=(0,c.getSelectedSiteId)(e),n=(0,f.getEditorPostId)(e),o=(0,p.getEditedPostValue)(e,t,n,"type"),r="page"===o||(0,s.default)((0,m.getPostType)(e,t,o),"hierarchical");return{postType:o,hierarchical:r}})((0,u.localize)(r)),e.exports=t.default},"./client/post-editor/editor-drawer/taxonomies.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){return!!(0,a.default)(["post_format","mentions","xposts"],t)||"post"===e&&(0,a.default)(["category","post_tag"],t)}function i(e){var t=e.translate,n=e.siteId,o=e.postType,i=e.isSupported,s=e.taxonomies,a=e.terms;return i?y.default.createElement("div",{className:"editor-drawer__taxonomies"},n&&o&&y.default.createElement(C.default,{siteId:n,postType:o}),(0,h.default)(s,function(e,n){var i=n.name,s=n.label,l=n.hierarchical;if(r(o,i))return e;var u=(0,d.default)(a,i),p=(0,f.default)(u),m=void 0;return m=p>2?t("%d selected","%d selected",{count:p,args:[p]}):(0,c.default)(u,function(e){return(0,_.decodeEntities)(e.name||e)}).join(", "),e.concat(y.default.createElement(k.default,{key:i,title:s,subtitle:m},l?y.default.createElement(D.default,{compact:!0,taxonomyName:i}):y.default.createElement(N.default,{taxonomyName:i})))},[])):null}Object.defineProperty(t,"__esModule",{value:!0});var s=n("./node_modules/lodash/includes.js"),a=o(s),l=n("./node_modules/lodash/get.js"),d=o(l),u=n("./node_modules/lodash/map.js"),c=o(u),p=n("./node_modules/lodash/size.js"),f=o(p),m=n("./node_modules/lodash/reduce.js"),h=o(m),g=n("./node_modules/react/react.js"),y=o(g),v=n("./node_modules/react-redux/es/index.js"),b=n("./node_modules/i18n-calypso/index.js"),_=n("./client/lib/formatting/index.js"),x=n("./client/components/data/query-taxonomies/index.jsx"),C=o(x),E=n("./client/state/ui/selectors.js"),w=n("./client/state/ui/editor/selectors.js"),j=n("./client/state/posts/selectors.js"),S=n("./client/state/post-types/taxonomies/selectors.js"),T=n("./client/state/sites/selectors.js"),P=n("./client/components/accordion/index.jsx"),k=o(P),I=n("./client/post-editor/term-token-field/index.jsx"),N=o(I),R=n("./client/post-editor/editor-term-selector/index.jsx"),D=o(R);i.propTypes={translate:g.PropTypes.func,siteId:g.PropTypes.number,postType:g.PropTypes.string,isSupported:g.PropTypes.bool,terms:g.PropTypes.oneOfType([g.PropTypes.object,g.PropTypes.array]),taxonomies:g.PropTypes.array},t.default=(0,v.connect)(function(e){var t=(0,E.getSelectedSiteId)(e),n=(0,w.getEditorPostId)(e),o=(0,j.getEditedPostValue)(e,t,n,"type"),r=!1!==(0,T.isJetpackMinimumVersion)(e,t,"4.1.0");return{siteId:t,postType:o,isSupported:r,terms:(0,j.getEditedPostValue)(e,t,n,"terms"),taxonomies:(0,S.getPostTypeTaxonomies)(e,t,o)}})((0,b.localize)(i)),e.exports=t.default},"./client/post-editor/editor-featured-image/index.jsx":function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),s=r(i),a=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),l=r(a),d=n("./node_modules/babel-runtime/helpers/createClass.js"),u=r(d),c=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),p=r(c),f=n("./node_modules/babel-runtime/helpers/inherits.js"),m=r(f),h=n("./node_modules/lodash/isNumber.js"),g=r(h),y=n("./node_modules/react/react.js"),v=r(y),b=n("./node_modules/prop-types/index.js"),_=r(b),x=n("./node_modules/classnames/index.js"),C=r(x),E=n("./node_modules/gridicons/build/index.js"),w=r(E),j=n("./node_modules/react-redux/es/index.js"),S=n("./client/components/data/media-library-selected-data/index.jsx"),T=r(S),P=n("./client/post-editor/media-modal/index.jsx"),k=r(P),I=n("./client/lib/media/actions.js"),N=r(I),R=n("./client/lib/posts/actions.js"),D=r(R),M=n("./client/lib/posts/utils.js"),O=r(M),A=n("./client/lib/posts/stats.js"),L=o(A),F=n("./client/post-editor/editor-featured-image/preview-container.jsx"),B=r(F),z=n("./client/components/button/index.jsx"),U=r(z),H=n("./client/state/selectors/get-media-item.js"),W=r(H),V=n("./client/components/data/query-media/index.jsx"),q=r(V),G=n("./node_modules/i18n-calypso/index.js"),K=n("./client/state/analytics/actions.js"),$=function(e){function t(){var e,n,o,r;(0,l.default)(this,t);
for(var i=arguments.length,a=Array(i),d=0;d<i;d++)a[d]=arguments[d];return n=o=(0,p.default)(this,(e=t.__proto__||(0,s.default)(t)).call.apply(e,[this].concat(a))),o.state={isSelecting:!1},o.showMediaModal=function(){var e=o.props,t=e.featuredImage,n=e.site;t&&N.default.setLibrarySelectedItems(n.ID,[t]),o.setState({isSelecting:!0})},o.hideMediaModal=function(){o.setState({isSelecting:!1})},o.setImage=function(e){o.hideMediaModal(),o.props.onImageSelected(),e&&(D.default.edit({featured_image:e.items[0].ID}),L.recordStat("featured_image_set"),L.recordEvent("Featured image set"),o.props.recordTracksEvent("calypso_editor_featured_image_upload",{source:"medialibrary",type:"click"}))},o.renderMediaModal=function(){if(o.props.site)return v.default.createElement(T.default,{siteId:o.props.site.ID},v.default.createElement(k.default,{visible:o.props.selecting||o.state.isSelecting,onClose:o.setImage,site:o.props.site,labels:{confirm:o.props.translate("Set Featured Image")},enabledFilters:["images"],single:!0}))},o.renderCurrentImage=function(){if(o.props.site&&o.props.post){var e=O.default.getFeaturedImageId(o.props.post);if(e)return v.default.createElement(B.default,{siteId:o.props.site.ID,itemId:e,maxWidth:o.props.maxWidth})}},r=n,(0,p.default)(o,r)}return(0,m.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this.props,t=e.site,n=e.post,o=(0,M.getFeaturedImageId)(n),r=(0,C.default)("editor-featured-image",{"is-assigned":!!O.default.getFeaturedImageId(this.props.post)});return v.default.createElement("div",{className:r},t&&o&&(0,g.default)(o)?v.default.createElement(q.default,{siteId:t.ID,mediaId:o}):null,this.renderMediaModal(),v.default.createElement(U.default,{className:"editor-featured-image__current-image",onClick:this.showMediaModal,borderless:!0,compact:!0},this.renderCurrentImage(),v.default.createElement(w.default,{icon:"pencil",className:"editor-featured-image__edit-icon"})))}}]),t}(y.Component);$.propTypes={featuredImage:_.default.object,maxWidth:_.default.number,site:_.default.object,post:_.default.object,recordTracksEvent:_.default.func,selecting:_.default.bool,translate:_.default.func,onImageSelected:_.default.func},$.defaultProps={maxWidth:450,onImageSelected:function(){}},t.default=(0,j.connect)(function(e,t){var n=t.post,o=t.site,r=o&&o.ID,i=(0,M.getFeaturedImageId)(n);return{featuredImage:(0,W.default)(e,r,i)}},{recordTracksEvent:K.recordTracksEvent})((0,G.localize)($)),e.exports=t.default},"./client/post-editor/editor-featured-image/preview-container.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/lodash/defer.js"),i=o(r),s=n("./node_modules/react/react.js"),a=o(s),l=n("./client/lib/media/actions.js"),d=o(l),u=n("./client/lib/media/store.js"),c=o(u),p=n("./client/lib/posts/actions.js"),f=o(p),m=n("./client/post-editor/editor-featured-image/preview.jsx"),h=o(m);t.default=a.default.createClass({displayName:"EditorFeaturedImagePreviewContainer",propTypes:{siteId:s.PropTypes.number.isRequired,itemId:s.PropTypes.oneOfType([s.PropTypes.number,s.PropTypes.string]).isRequired,maxWidth:s.PropTypes.number},getInitialState:function(){return{image:null}},componentDidMount:function(){this.fetchImage(),c.default.on("change",this.updateImageState)},componentDidUpdate:function(e){var t=this.props,n=t.siteId,o=t.itemId;n===e.siteId&&o===e.itemId||this.fetchImage()},componentWillUnmount:function(){c.default.off("change",this.updateImageState)},fetchImage:function(){var e=this;this.updateImageState(function(){e.state.image||(0,i.default)(function(){d.default.fetch(e.props.siteId,e.props.itemId)})})},updateImageState:function(e){var t=this,n=c.default.get(this.props.siteId,this.props.itemId);this.setState({image:n},function(){"function"==typeof e&&e()}),(0,i.default)(function(){n&&n.ID!==t.props.itemId&&f.default.edit({featured_image:n.ID})})},render:function(){return a.default.createElement(h.default,{image:this.state.image,maxWidth:this.props.maxWidth})}}),e.exports=t.default},"./client/post-editor/editor-featured-image/preview.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/lodash/some.js"),i=o(r),s=n("./node_modules/lodash/get.js"),a=o(s),l=n("./node_modules/react/react.js"),d=o(l),u=n("./node_modules/react-redux/es/index.js"),c=n("./node_modules/classnames/index.js"),p=o(c),f=n("./client/lib/media/store.js"),m=o(f),h=n("./client/lib/media/utils.js"),g=o(h),y=n("./client/components/spinner/index.jsx"),v=o(y),b=n("./client/components/spinner-line/index.jsx"),_=o(b),x=n("./client/components/image-preloader/index.jsx"),C=o(x),E=n("./client/state/ui/selectors.js"),w=d.default.createClass({displayName:"EditorFeaturedImagePreview",propTypes:{siteId:l.PropTypes.number,image:l.PropTypes.object,maxWidth:l.PropTypes.number},getInitialState:function(){return{height:null,transientSrc:null}},componentWillReceiveProps:function(e){var t=this.src();if(t&&t!==this.src(e)){var n={height:this.refs.preview.clientHeight};this.isReceivingPersistedImage(this.props,e)&&(n.transientSrc=t),this.setState(n)}},isReceivingPersistedImage:function(e,t){var n=this.props.siteId;if(n!==t.siteId)return!1;var o=this.props.image;if(!o||!o.transient||!t.image)return!1;var r=m.default.get(n,o.ID);return r&&r.ID===t.image.ID},src:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;if(e.image)return g.default.url(e.image,{maxWidth:this.props.maxWidth,size:"post-thumbnail"})},clearState:function(){(0,i.default)(this.state)&&this.setState(this.getInitialState())},render:function(){var e=this.state.height,t=(0,p.default)("editor-featured-image__preview",{"is-transient":(0,a.default)(this.props.image,"transient"),"has-assigned-height":!!e}),n=void 0;return n=this.state.transientSrc?d.default.createElement("img",{src:this.state.transientSrc}):d.default.createElement(_.default,null),d.default.createElement("div",{ref:"preview",className:t,style:{height:e}},d.default.createElement(v.default,null),d.default.createElement(C.default,{placeholder:n,src:this.src(),onLoad:this.clearState,className:"editor-featured-image__preview-image"}))}});t.default=(0,u.connect)(function(e){return{siteId:(0,E.getSelectedSiteId)(e)}})(w),e.exports=t.default},"./client/post-editor/editor-forbidden/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=e.translate,n=e.userCanEdit,o=e.siteSlug;if(!1!==n)return null;var r=[l.default.createElement(b.default,{key:"back",href:"/posts/"+o,primary:!0},t("Back to My Sites"))];return l.default.createElement(x.default,{isVisible:!0,buttons:r,className:"editor-forbidden"},l.default.createElement("h1",null,t("You can't edit this post type")),l.default.createElement("p",null,t("If you think you should have access to this post type, request that your site administrator grant you access.")))}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/lodash/get.js"),s=o(i),a=n("./node_modules/react/react.js"),l=o(a),d=n("./node_modules/react-redux/es/index.js"),u=n("./node_modules/i18n-calypso/index.js"),c=n("./client/state/selectors/can-current-user.js"),p=o(c),f=n("./client/state/ui/selectors.js"),m=n("./client/state/ui/editor/selectors.js"),h=n("./client/state/posts/selectors.js"),g=n("./client/state/post-types/selectors.js"),y=n("./client/state/sites/selectors.js"),v=n("./client/components/button/index.jsx"),b=o(v),_=n("./client/components/dialog/index.jsx"),x=o(_);r.propTypes={translate:a.PropTypes.func,userCanEdit:a.PropTypes.bool,siteSlug:a.PropTypes.string},t.default=(0,d.connect)(function(e){var t=(0,f.getSelectedSiteId)(e),n=(0,h.getEditedPostValue)(e,t,(0,m.getEditorPostId)(e),"type"),o=(0,g.getPostType)(e,t,n),r=(0,s.default)(o,["capabilities","edit_posts"],null);return{userCanEdit:(0,p.default)(e,t,r),siteSlug:(0,y.getSiteSlug)(e,t)}})((0,u.localize)(r)),e.exports=t.default},"./client/post-editor/editor-ground-control/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.EditorGroundControl=void 0;var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=o(p),m=n("./node_modules/lodash/noop.js"),h=o(m),g=n("./node_modules/lodash/identity.js"),y=o(g),v=n("./node_modules/react/react.js"),b=o(v),_=n("./node_modules/prop-types/index.js"),x=o(_),C=n("./node_modules/moment/moment.js"),E=o(C),w=n("./node_modules/page/index.js"),j=o(w),S=n("./node_modules/i18n-calypso/index.js"),T=o(S),P=n("./client/components/card/index.jsx"),k=o(P),I=n("./node_modules/gridicons/build/index.js"),N=o(I),R=n("./client/blocks/site/index.jsx"),D=o(R),M=n("./client/lib/posts/utils.js"),O=o(M),A=n("./client/lib/site/utils.js"),L=o(A),F=n("./client/lib/posts/stats.js"),B=n("./client/post-editor/editor-publish-button/index.jsx"),z=o(B),U=n("./client/components/button/index.jsx"),H=o(U),W=n("./client/post-editor/editor-post-type/index.jsx"),V=o(W),q=n("./client/post-editor/editor-sidebar/constants.js"),G=t.EditorGroundControl=function(e){function t(){var e,n,o,r;(0,a.default)(this,t);for(var s=arguments.length,l=Array(s),d=0;d<s;d++)l[d]=arguments[d];return n=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.state={showAdvanceStatus:!1,needsVerification:o.props.userUtils&&o.props.userUtils.needsVerificationForSite(o.props.site)},o.updateNeedsVerification=function(){o.setState({needsVerification:o.props.userUtils&&o.props.userUtils.needsVerificationForSite(o.props.site)})},o.toggleAdvancedStatus=function(){o.setState({showAdvanceStatus:!o.state.showAdvanceStatus})},o.onSaveButtonClick=function(){o.props.onSave();var e=O.default.isPage(o.props.page)?"Clicked Save Page Button":"Clicked Save Post Button";(0,F.recordEvent)(e),(0,F.recordStat)("save_draft_clicked")},o.onPreviewButtonClick=function(e){if(o.isPreviewEnabled()){o.props.onPreview(e);var t=O.default.isPage(o.props.page)?"Clicked Preview Page Button":"Clicked Preview Post Button";(0,F.recordEvent)(t)}},r=n,(0,c.default)(o,r)}return(0,f.default)(t,e),(0,d.default)(t,[{key:"componentDidMount",value:function(){this.props.user&&this.props.user.on("change",this.updateNeedsVerification).on("verify",this.updateNeedsVerification)}},{key:"componentWillUnmount",value:function(){this.props.user&&this.props.user.off("change",this.updateNeedsVerification).off("verify",this.updateNeedsVerification)}},{key:"componentWillReceiveProps",value:function(e){this.setState({needsVerification:e.userUtils&&e.userUtils.needsVerificationForSite(e.site)}),this.props.user&&this.props.user.off("change",this.updateNeedsVerification).off("verify",this.updateNeedsVerification),e.user&&e.user.on("change",this.updateNeedsVerification).on("verify",this.updateNeedsVerification)}},{key:"getPreviewLabel",value:function(){return O.default.isPublished(this.props.savedPost)&&this.props.site.jetpack?this.props.translate("View"):this.props.translate("Preview")}},{key:"getVerificationNoticeLabel",value:function(){var e=(0,B.getPublishButtonStatus)(this.props.site,this.props.post,this.props.savedPost),t={update:T.default.translate("To update, check your email and confirm your address."),schedule:T.default.translate("To schedule, check your email and confirm your address."),publish:T.default.translate("To publish, check your email and confirm your address."),requestReview:T.default.translate("To submit for review, check your email and confirm your address.")};return t[e]}},{key:"getSaveStatusLabel",value:function(e){return this.props.isSaving?e("Saving…"):this.props.post&&!O.default.isPublished(this.props.post)&&this.props.post.ID?e("Saved"):null}},{key:"isSaveEnabled",value:function(){return!this.props.isSaving&&!this.props.isSaveBlocked&&this.props.isDirty&&this.props.hasContent&&!!this.props.post&&!O.default.isPublished(this.props.post)}},{key:"isPreviewEnabled",value:function(){return this.props.hasContent&&!(this.props.isNew&&!this.props.isDirty)&&!this.props.isSaveBlocked}},{key:"canPublishPost",value:function(){return L.default.userCan("publish_posts",this.props.site)}},{key:"renderGroundControlActionButtons",value:function(){if("open"!==this.props.confirmationSidebarStatus)return b.default.createElement("div",{className:"editor-ground-control__action-buttons"},b.default.createElement(H.default,{borderless:!0,className:"editor-ground-control__preview-button",disabled:!this.isPreviewEnabled(),onClick:this.onPreviewButtonClick,tabIndex:4},b.default.createElement(N.default,{icon:"visible"})," ",b.default.createElement("span",{className:"editor-ground-control__button-label"},this.getPreviewLabel())),b.default.createElement(H.default,{borderless:!0,className:"editor-ground-control__toggle-sidebar",onClick:this.props.toggleSidebar},b.default.createElement(N.default,{icon:this.props.nestedSidebar===q.NESTED_SIDEBAR_REVISIONS?"history":"cog"}),b.default.createElement("span",{className:"editor-ground-control__button-label"}," ",b.default.createElement(V.default,{isSettings:!0}))),b.default.createElement("div",{className:"editor-ground-control__publish-button"},b.default.createElement(z.default,{site:this.props.site,post:this.props.post,savedPost:this.props.savedPost,onSave:this.props.onSave,onPublish:this.props.onPublish,tabIndex:5,isConfirmationSidebarEnabled:this.props.isConfirmationSidebarEnabled,isPublishing:this.props.isPublishing,isSaveBlocked:this.props.isSaveBlocked,hasContent:this.props.hasContent,needsVerification:this.state.needsVerification,busy:this.props.isPublishing||O.default.isPublished(this.props.savedPost)&&this.props.isSaving})))}},{key:"render",value:function(){return b.default.createElement(k.default,{className:"editor-ground-control"},b.default.createElement(H.default,{borderless:!0,className:"editor-ground-control__back",href:"",onClick:j.default.back.bind(j.default,this.props.allPostsUrl),"aria-label":this.props.translate("Go back")},b.default.createElement(N.default,{icon:"arrow-left"})),b.default.createElement(D.default,{compact:!0,site:this.props.site,indicator:!1,homeLink:!0,externalLink:!0}),this.state.needsVerification&&b.default.createElement("div",{className:"editor-ground-control__email-verification-notice",tabIndex:7,onClick:this.props.onMoreInfoAboutEmailVerify},b.default.createElement(N.default,{icon:"info",className:"editor-ground-control__email-verification-notice-icon"}),this.getVerificationNoticeLabel()," ",b.default.createElement("span",{className:"editor-ground-control__email-verification-notice-more"},this.props.translate("Learn More"))),b.default.createElement("div",{className:"editor-ground-control__status"},this.isSaveEnabled()&&b.default.createElement("button",{className:"editor-ground-control__save button is-link",onClick:this.onSaveButtonClick,tabIndex:3},this.props.translate("Save")),!this.isSaveEnabled()&&b.default.createElement("span",{className:"editor-ground-control__save-status","data-e2e-status":this.getSaveStatusLabel(y.default)},this.getSaveStatusLabel(this.props.translate))),this.renderGroundControlActionButtons())}}]),t}(v.PureComponent);G.propTypes={hasContent:x.default.bool,isConfirmationSidebarEnabled:x.default.bool,confirmationSidebarStatus:x.default.string,isDirty:x.default.bool,isSaveBlocked:x.default.bool,isPublishing:x.default.bool,isSaving:x.default.bool,nestedSidebar:q.NestedSidebarPropType,moment:x.default.func,onPreview:x.default.func,onPublish:x.default.func,onSave:x.default.func,onSaveDraft:x.default.func,onMoreInfoAboutEmailVerify:x.default.func,post:x.default.object,savedPost:x.default.object,setPostDate:x.default.func,site:x.default.object,user:x.default.object,userUtils:x.default.object,toggleSidebar:x.default.func,translate:x.default.func,type:x.default.string},G.defaultProps={hasContent:!1,isConfirmationSidebarEnabled:!0,isDirty:!1,isSaveBlocked:!1,isPublishing:!1,isSaving:!1,moment:E.default,onPublish:h.default,onSaveDraft:h.default,post:null,savedPost:null,site:{},translate:y.default,user:null,userUtils:null,setPostDate:h.default},t.default=(0,S.localize)(G)},"./client/post-editor/editor-html-toolbar/add-image-dialog.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.AddImageDialog=void 0;var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=o(p),m=n("./node_modules/react/react.js"),h=o(m),g=n("./node_modules/i18n-calypso/index.js"),y=n("./client/components/dialog/index.jsx"),v=o(y),b=n("./client/components/forms/form-fieldset/index.jsx"),_=o(b),x=n("./client/components/forms/form-label/index.jsx"),C=o(x),E=n("./client/components/forms/form-text-input/index.jsx"),w=o(E),j=t.AddImageDialog=function(e){function t(){var e,n,o,r;(0,a.default)(this,t);for(var s=arguments.length,l=Array(s),d=0;d<s;d++)l[d]=arguments[d];return n=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.state={imageAlt:"",imageTitle:"",imageUrl:""},o.setImageAlt=function(e){o.setState({imageAlt:e.target.value})},o.setImageTitle=function(e){o.setState({imageTitle:e.target.value})},o.setImageUrl=function(e){o.setState({imageUrl:e.target.value})},o.onCloseDialog=function(){o.setState({imageAlt:"",imageTitle:"",imageUrl:""}),o.props.onClose()},o.onInsertImage=function(){var e=o.state,t=e.imageAlt,n=e.imageTitle,r=e.imageUrl;o.props.onInsert({alt:t,src:r,title:n}),o.onCloseDialog()},r=n,(0,c.default)(o,r)}return(0,f.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){var e=this.props,t=e.shouldDisplay,n=e.translate,o=this.state,r=o.imageAlt,i=o.imageTitle,s=o.imageUrl,a=[{action:"cancel",label:n("Cancel")},{action:"add-image",isPrimary:!0,label:n("Add Image"),onClick:this.onInsertImage}];return h.default.createElement(v.default,{autoFocus:!1,isVisible:t,buttons:a,onClose:this.onCloseDialog,additionalClassNames:"editor-html-toolbar__dialog"},h.default.createElement(_.default,null,h.default.createElement(C.default,{htmlFor:"image_url"},n("URL")),h.default.createElement(w.default,{name:"image_url",onChange:this.setImageUrl,value:s})),h.default.createElement(_.default,null,h.default.createElement(C.default,{htmlFor:"image_title"},n("Title")),h.default.createElement(w.default,{name:"image_title",onChange:this.setImageTitle,value:i})),h.default.createElement(_.default,null,h.default.createElement(C.default,{htmlFor:"image_alt"},n("Alt Text")),h.default.createElement(w.default,{name:"image_alt",onChange:this.setImageAlt,value:r})))}}]),t}(m.Component);j.propTypes={onClose:m.PropTypes.func,onInsert:m.PropTypes.func,shouldDisplay:m.PropTypes.bool,translate:m.PropTypes.func},t.default=(0,g.localize)(j)},"./client/post-editor/editor-html-toolbar/add-link-dialog.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.AddLinkDialog=void 0;var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=o(p),m=n("./node_modules/react/react.js"),h=o(m),g=n("./node_modules/react-redux/es/index.js"),y=n("./node_modules/i18n-calypso/index.js"),v=n("./client/state/ui/selectors.js"),b=n("./client/components/dialog/index.jsx"),_=o(b),x=n("./client/components/forms/form-checkbox/index.jsx"),C=o(x),E=n("./client/components/forms/form-fieldset/index.jsx"),w=o(E),j=n("./client/components/forms/form-label/index.jsx"),S=o(j),T=n("./client/components/forms/form-text-input/index.jsx"),P=o(T),k=n("./client/my-sites/post-selector/index.jsx"),I=o(k),N=/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i,R=/^(https?|ftp):\/\/[A-Z0-9.-]+\.[A-Z]{2,4}[^ "]*$/i,D=/^(?:[a-z]+:|#|\?|\.|\/)/,M=t.AddLinkDialog=function(e){function t(){var e,n,o,r;(0,a.default)(this,t);for(var s=arguments.length,l=Array(s),d=0;d<s;d++)l[d]=arguments[d];return n=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.state={linkNewTab:!1,linkText:"",linkUrl:"",selectedPost:{id:null,url:null}},o.bindLinkUrlRef=function(e){o.linkUrl=e},o.setLinkUrl=function(e){var t=o.state.selectedPost;o.setState({linkUrl:e.target.value,selectedPost:t.url===e.target.value?t:{id:null,url:null}})},o.setLinkText=function(e){o.setState({linkText:e.target.value})},o.setLinkNewTab=function(e){o.setState({linkNewTab:e.target.checked})},o.onSelectPost=function(e){o.setState({linkUrl:e.URL,selectedPost:{id:e.ID,url:e.URL}})},o.onCloseDialog=function(){o.setState({linkNewTab:!1,linkText:"",linkUrl:"",selectedPost:{id:null,url:null}}),o.props.onClose()},o.onInsertLink=function(){var e=o.state,t=e.linkNewTab,n=e.linkText;o.props.onInsert({href:o.correctUrl(),target:t?"_blank":""},n),o.onCloseDialog()},r=n,(0,c.default)(o,r)}return(0,f.default)(t,e),(0,d.default)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({linkUrl:this.inferUrl(e.selectedText),linkText:e.selectedText})}},{key:"correctUrl",value:function(){var e=this.state.linkUrl.trim();return N.test(e)?"mailto:"+e:D.test(e)?e:"http://"+e}},{key:"inferUrl",value:function(e){return N.test(e)?"mailto:"+e:R.test(e)?e.replace(/&amp;|&#0?38;/gi,"&"):""}},{key:"render",value:function(){var e=this.props,t=e.shouldDisplay,n=e.siteId,o=e.translate,r=this.state,i=r.linkNewTab,s=r.linkText,a=r.linkUrl,l=r.selectedPost,d=[{action:"cancel",label:o("Cancel")},{action:"add-link",isPrimary:!0,label:o("Add Link"),onClick:this.onInsertLink}];return h.default.createElement(_.default,{autoFocus:!1,isVisible:t,buttons:d,onClose:this.onCloseDialog,additionalClassNames:"editor-html-toolbar__dialog"},h.default.createElement(w.default,null,h.default.createElement(S.default,{htmlFor:"link_url"},o("URL")),h.default.createElement(P.default,{name:"link_url",onChange:this.setLinkUrl,ref:this.bindLinkUrlRef,value:a})),h.default.createElement(w.default,null,h.default.createElement(S.default,{htmlFor:"link_text"},o("Link Text")),h.default.createElement(P.default,{name:"link_text",onChange:this.setLinkText,value:s})),h.default.createElement(w.default,null,h.default.createElement(S.default,null,h.default.createElement(C.default,{checked:i,name:"link_new_tab",onChange:this.setLinkNewTab}),h.default.createElement("span",null,o("Open link in a new window/tab")))),h.default.createElement(w.default,null,h.default.createElement(S.default,null,h.default.createElement("span",null,o("Link to existing content"))),h.default.createElement(I.default,{emptyMessage:o("No posts found"),onChange:this.onSelectPost,order:"DESC",orderBy:"date",selected:l.id,showTypeLabels:!0,siteId:n,type:"any",excludePrivateTypes:!0})))}}]),t}(m.Component);M.propTypes={onClose:m.PropTypes.func,onInsert:m.PropTypes.func,selectedText:m.PropTypes.string,shouldDisplay:m.PropTypes.bool,siteId:m.PropTypes.number,translate:m.PropTypes.func},t.default=(0,g.connect)(function(e){return{siteId:(0,v.getSelectedSiteId)(e)}})((0,y.localize)(M))},"./client/post-editor/editor-html-toolbar/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.EditorHtmlToolbar=void 0;var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=o(p),m=n("./node_modules/lodash/throttle.js"),h=o(m),g=n("./node_modules/lodash/reduce.js"),y=o(g),v=n("./node_modules/lodash/map.js"),b=o(v),_=n("./node_modules/lodash/get.js"),x=o(_),C=n("./node_modules/react/react.js"),E=o(C),w=n("./node_modules/prop-types/index.js"),j=o(w),S=n("./node_modules/react-redux/es/index.js"),T=n("./node_modules/i18n-calypso/index.js"),P=n("./node_modules/classnames/index.js"),k=o(P),I=n("./node_modules/gridicons/build/index.js"),N=o(I),R=n("./node_modules/tinymce/tinymce.js"),D=n("./client/components/tinymce/plugins/contact-form/shortcode-utils.js"),M=n("./client/components/tinymce/plugins/simple-payments/shortcode-utils.js"),O=n("./client/lib/media/actions.js"),A=o(O),L=n("./client/lib/media/library-selected-store.js"),F=o(L),B=n("./client/lib/media/utils.js"),z=o(B),U=n("./client/lib/media/validation-store.js"),H=o(U),W=n("./client/lib/posts/actions.js"),V=o(W),q=n("./client/lib/viewport/index.js"),G=n("./client/post-editor/media-modal/markup.js"),K=o(G),$=n("./client/state/ui/selectors.js"),Y=n("./client/state/ui/editor/contact-form/actions.js"),J=n("./client/post-editor/editor-html-toolbar/add-image-dialog.jsx"),Z=o(J),X=n("./client/post-editor/editor-html-toolbar/add-link-dialog.jsx"),Q=o(X),ee=n("./client/components/button/index.jsx"),te=o(ee),ne=n("./client/components/tinymce/plugins/contact-form/dialog/index.jsx"),oe=o(ne),re=n("./client/post-editor/editor-media-modal/index.jsx"),ie=o(re),se=n("./client/my-sites/media-library/drop-zone.jsx"),ae=o(se),le=n("./client/config/index.js"),de=o(le),ue=n("./client/components/tinymce/plugins/simple-payments/dialog/index.jsx"),ce=o(ue),pe=39,fe=t.EditorHtmlToolbar=function(e){function t(){var e,n,o,r;(0,a.default)(this,t);for(var s=arguments.length,l=Array(s),d=0;d<s;d++)l[d]=arguments[d];return n=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.state={contactFormDialogTab:"fields",isPinned:!1,isScrollable:!1,isScrolledFull:!1,openTags:[],selectedText:"",showContactFormDialog:!1,showImageDialog:!1,showInsertContentMenu:!1,showLinkDialog:!1,showMediaModal:!1,source:"",showSimplePaymentsDialog:!1,simplePaymentsDialogTab:"addNew"},o.bindButtonsRef=function(e){o.buttons=e},o.bindInsertContentButtonsRef=function(e){o.insertContentButtons=e},o.onWindowResize=function(){o.disablePinOnSmallScreens(),o.toggleToolbarScrollableOnResize()},o.pinToolbarOnScroll=function(){if(!(0,q.isWithinBreakpoint)("<660px")){var e=o.props.content.offsetTop,t=o.state.isPinned;t&&window.pageYOffset<e-pe?o.setState({isPinned:!1}):!t&&window.pageYOffset>e-pe&&o.setState({isPinned:!0})}},o.disablePinOnSmallScreens=function(){o.state.isPinned&&(0,q.isWithinBreakpoint)("<660px")&&o.setState({isPinned:!1})},o.toggleToolbarScrollableOnResize=function(){var e=o.buttons.scrollWidth>o.buttons.clientWidth;e!==o.state.isScrollable&&o.setState({isScrollable:e})},o.hideToolbarFadeOnFullScroll=function(e){var t=e.target,n=t.scrollLeft,r=t.scrollWidth,i=t.clientWidth,s=n>=r-i-10;s!==o.state.isScrolledFull&&o.setState({isScrolledFull:s})},o.clickOutsideInsertContentMenu=function(e){o.state.showInsertContentMenu&&!o.insertContentButtons.contains(e.target)&&o.setState({showInsertContentMenu:!1})},o.updateEditorContent=function(e,t,n){return R.Env.gecko?o.updateEditorContentFirefox(e,t,n):11===R.Env.ie?o.updateEditorContentIE11(e,t,n):o.insertEditorContent(e,t,n)},o.attributesToString=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,y.default)(e,function(e,t,n){return t?e+(" "+n+'="'+t+'"'):e},"")},o.openHtmlTag=function(e){var t=e.name,n=e.attributes,r=void 0===n?{}:n,i=e.options,s=void 0===i?{}:i;return(s.paragraph?"\n":"")+(s.indent?"\t":"")+("<"+t+o.attributesToString(r)+">")+(s.paragraph?"\n":"")},o.closeHtmlTag=function(e){var t=e.name,n=e.options,o=void 0===n?{}:n;return"</"+t+">"+(o.newLineAfter?"\n":"")+(o.paragraph?"\n\n":"")},o.onClickBold=function(){o.insertHtmlTag({name:"strong"})},o.onClickItalic=function(){o.insertHtmlTag({name:"em"})},o.onClickLink=function(e,t){t?o.insertHtmlTagWithText({name:"a",attributes:e,options:{text:t}}):(o.insertHtmlTagOpenClose({name:"a",attributes:e}),o.setCursorPosition(o.props.content.selectionEnd,-4))},o.onClickQuote=function(){o.insertHtmlTag({name:"blockquote",options:{paragraph:!0}})},o.onClickDelete=function(){var e=o.props.moment().format();o.insertHtmlTag({name:"del",attributes:{datetime:e}})},o.onClickInsert=function(){var e=o.props.moment().format();o.insertHtmlTag({name:"ins",attributes:{datetime:e}})},o.onClickImage=function(e){o.insertHtmlTagSelfClosed({name:"img",attributes:e})},o.onClickUnorderedList=function(){o.insertHtmlTag({name:"ul",options:{paragraph:!0}})},o.onClickOrderedList=function(){o.insertHtmlTag({name:"ol",options:{paragraph:!0}})},o.onClickListItem=function(){o.insertHtmlTag({name:"li",options:{indent:!0,newLineAfter:!0}})},o.onClickCode=function(){o.insertHtmlTag({name:"code"})},o.onClickMore=function(){o.insertCustomContent("<!--more-->",{paragraph:!0})},o.onClickCloseTags=function(){var e=(0,y.default)(o.state.openTags,function(e,t){return o.closeHtmlTag({name:t})+e},"");o.insertCustomContent(e),o.setState({openTags:[]})},o.onInsertMedia=function(e){o.insertCustomContent(e)},o.onInsertContactForm=function(){o.insertCustomContent((0,D.serialize)(o.props.contactForm),{paragraph:!0}),o.closeContactFormDialog()},o.openImageDialog=function(){o.setState({showImageDialog:!0})},o.closeImageDialog=function(){o.setState({showImageDialog:!1})},o.openLinkDialog=function(){var e=o.splitEditorContent(),t=e.inner;o.setState({selectedText:t,showLinkDialog:!0})},o.closeLinkDialog=function(){o.setState({showLinkDialog:!1})},o.toggleInsertContentMenu=function(){o.setState({showInsertContentMenu:!o.state.showInsertContentMenu})},o.openContactFormDialog=function(){o.setState({contactFormDialogTab:"fields",showContactFormDialog:!0,showInsertContentMenu:!1})},o.toggleContactFormDialogTab=function(){o.setState({contactFormDialogTab:"fields"===o.state.contactFormDialogTab?"settings":"fields"})},o.closeContactFormDialog=function(){o.setState({showContactFormDialog:!1})},o.openMediaModal=function(){o.setState({showInsertContentMenu:!1,showMediaModal:!0,source:""})},o.openGoogleModal=function(){o.setState({showInsertContentMenu:!1,showMediaModal:!0,source:"google_photos"})},o.closeMediaModal=function(){o.setState({showMediaModal:!1})},o.openSimplePaymentsDialog=function(){o.setState({simplePaymentsDialogTab:"addNew",showSimplePaymentsDialog:!0,showInsertContentMenu:!1})},o.closeSimplePaymentsDialog=function(){o.setState({showSimplePaymentsDialog:!1})},o.changeSimplePaymentsDialogTab=function(e){o.setState({simplePaymentsDialogTab:e})},o.insertSimplePayment=function(e){o.insertCustomContent((0,M.serialize)(e),{paragraph:!0}),o.closeSimplePaymentsDialog()},o.onFilesDrop=function(){var e=o.props.site,t=F.default.getAll(e.ID),n=1===t.length&&"image"===z.default.getMimePrefix(t[0]);n&&!H.default.hasErrors(e.ID)?(t[0].transient&&V.default.blockSave("MEDIA_MODAL_TRANSIENT_INSERT"),o.onInsertMedia(K.default.get(e,t[0])),A.default.setLibrarySelectedItems(e.ID,[])):o.openMediaModal()},o.isTagOpen=function(e){return-1!==o.state.openTags.indexOf(e)},r=n,(0,c.default)(o,r)}return(0,f.default)(t,e),(0,d.default)(t,[{key:"componentDidMount",value:function(){this.pinToolbarOnScroll=(0,h.default)(this.pinToolbarOnScroll,50),this.hideToolbarFadeOnFullScroll=(0,h.default)(this.hideToolbarFadeOnFullScroll,200),this.onWindowResize=(0,h.default)(this.onWindowResize,400),window.addEventListener("scroll",this.pinToolbarOnScroll),window.addEventListener("resize",this.onWindowResize),this.buttons.addEventListener("scroll",this.hideToolbarFadeOnFullScroll),
document.addEventListener("click",this.clickOutsideInsertContentMenu),this.toggleToolbarScrollableOnResize()}},{key:"componentWillUnmount",value:function(){this.pinToolbarOnScroll.cancel(),this.onWindowResize.cancel(),this.hideToolbarFadeOnFullScroll.cancel(),window.removeEventListener("scroll",this.pinToolbarOnScroll),window.removeEventListener("resize",this.onWindowResize),this.buttons.removeEventListener("scroll",this.hideToolbarFadeOnFullScroll),document.removeEventListener("click",this.clickOutsideInsertContentMenu)}},{key:"splitEditorContent",value:function(){var e=this.props.content,t=e.selectionEnd,n=e.selectionStart,o=e.value;return{before:o.substring(0,n),inner:o.substring(n,t),after:o.substring(t,o.length)}}},{key:"setCursorPosition",value:function(e,t){this.props.content.selectionEnd=this.props.content.selectionStart=e+t}},{key:"insertEditorContent",value:function(e,t,n){var o=this.props,r=o.content,i=o.onToolbarChangeContent;r.focus(),document.execCommand("insertText",!1,t),i(e+t+n)}},{key:"updateEditorContentFirefox",value:function(e,t,n){var o=e+t+n,r=this.props,i=r.content,s=r.content,a=s.selectionEnd,l=s.value,d=r.onToolbarChangeContent;this.props.content.value=o,i.focus(),document.execCommand("insertText",!1,t),d(o),this.setCursorPosition(a,o.length-l.length),this.props.content.focus()}},{key:"updateEditorContentIE11",value:function(e,t,n){var o=e+t+n,r=this.props,i=r.content,s=i.selectionEnd,a=i.value,l=r.onToolbarChangeContent;this.props.content.value=o,l(o),this.setCursorPosition(s,o.length-a.length)}},{key:"insertHtmlTagOpen",value:function(e){var t=this.state.openTags,n=this.splitEditorContent(),o=n.before,r=n.after;this.updateEditorContent(o,this.openHtmlTag(e),r),this.setState({openTags:t.concat(e.name)})}},{key:"insertHtmlTagClose",value:function(e){var t=this.state.openTags,n=this.splitEditorContent(),o=n.before,r=n.after;this.updateEditorContent(o,this.closeHtmlTag(e),r),this.setState({openTags:t.filter(function(t){return t!==e.name})})}},{key:"insertHtmlTagOpenClose",value:function(e){var t=this.splitEditorContent(),n=t.before,o=t.inner,r=t.after;this.updateEditorContent(n,this.openHtmlTag(e)+o+this.closeHtmlTag(e),r)}},{key:"insertHtmlTagSelfClosed",value:function(e){var t=this.splitEditorContent(),n=t.before,o=t.inner,r=t.after,i="<"+e.name+this.attributesToString(e.attributes)+" />",s=e.options&&e.options.paragraph?"\n"+i+"\n\n":i;this.updateEditorContent(n,o+s,r)}},{key:"insertHtmlTagWithText",value:function(e){var t=this.splitEditorContent(),n=t.before,o=t.after;this.updateEditorContent(n,this.openHtmlTag(e)+e.options.text+this.closeHtmlTag(e),o)}},{key:"insertCustomContent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.splitEditorContent(),o=n.before,r=n.inner,i=n.after,s=t.paragraph?"\n":"";this.updateEditorContent(o,r+s+e+s+s,i)}},{key:"insertHtmlTag",value:function(e){var t=this.props.content,n=t.selectionEnd,o=t.selectionStart;n===o?this.isTagOpen(e.name)?this.insertHtmlTagClose(e):this.insertHtmlTagOpen(e):this.insertHtmlTagOpenClose(e)}},{key:"renderExternal",value:function(){var e=this.props.translate;return de.default.isEnabled("external-media")?E.default.createElement("div",{className:"editor-html-toolbar__insert-content-dropdown-item",onClick:this.openGoogleModal},E.default.createElement(N.default,{icon:"add-image"}),E.default.createElement("span",{"data-e2e-insert-type":"google-media"},e("Add from Google"))):null}},{key:"renderSimplePaymentsButton",value:function(){var e=this.props.translate;return de.default.isEnabled("simple-payments")?E.default.createElement("div",{className:"editor-html-toolbar__insert-content-dropdown-item",onClick:this.openSimplePaymentsDialog},E.default.createElement(N.default,{icon:"money"}),E.default.createElement("span",{"data-e2e-insert-type":"payment-button"},e("Add Payment Button"))):null}},{key:"render",value:function(){var e=this,t=this.props,n=t.site,o=t.translate,r=(0,k.default)("editor-html-toolbar",{"is-pinned":this.state.isPinned,"is-scrollable":this.state.isScrollable,"is-scrolled-full":this.state.isScrolledFull}),i=(0,k.default)("editor-html-toolbar__insert-content-dropdown",{"is-visible":this.state.showInsertContentMenu}),s={strong:{label:"b",onClick:this.onClickBold},em:{label:"i",onClick:this.onClickItalic},a:{label:"link",onClick:this.openLinkDialog},blockquote:{label:"b-quote",onClick:this.onClickQuote},del:{onClick:this.onClickDelete},ins:{onClick:this.onClickInsert},img:{onClick:this.openImageDialog},ul:{onClick:this.onClickUnorderedList},ol:{onClick:this.onClickOrderedList},li:{onClick:this.onClickListItem},code:{onClick:this.onClickCode},more:{onClick:this.onClickMore},"close-tags":{disabled:!this.state.openTags.length,label:o("close tags"),onClick:this.onClickCloseTags}};return E.default.createElement("div",{className:r},E.default.createElement("div",{className:"editor-html-toolbar__wrapper"},E.default.createElement("div",{className:"editor-html-toolbar__wrapper-buttons"},E.default.createElement("div",{className:"editor-html-toolbar__buttons",ref:this.bindButtonsRef},E.default.createElement("div",{className:"editor-html-toolbar__button-insert-content",ref:this.bindInsertContentButtonsRef},E.default.createElement(te.default,{borderless:!0,className:"editor-html-toolbar__button-insert-media",compact:!0,onClick:this.openMediaModal},E.default.createElement(N.default,{icon:"add-outline"})),E.default.createElement(te.default,{borderless:!0,className:"editor-html-toolbar__button-insert-content-dropdown",compact:!0,onClick:this.toggleInsertContentMenu},E.default.createElement(N.default,{icon:this.state.showInsertContentMenu?"chevron-up":"chevron-down"}))),(0,b.default)(s,function(t,n){var o=t.disabled,r=t.label,i=t.onClick;return E.default.createElement(te.default,{borderless:!0,className:"editor-html-toolbar__button-"+n+" "+(e.isTagOpen(n)?"is-tag-open":""),compact:!0,disabled:o,key:n,onClick:i},r||n)})),E.default.createElement("div",{className:i},E.default.createElement("div",{className:"editor-html-toolbar__insert-content-dropdown-item",onClick:this.openMediaModal},E.default.createElement(N.default,{icon:"add-image"}),E.default.createElement("span",{"data-e2e-insert-type":"media"},o("Add Media"))),this.renderExternal(),E.default.createElement("div",{className:"editor-html-toolbar__insert-content-dropdown-item",onClick:this.openContactFormDialog},E.default.createElement(N.default,{icon:"mention"}),E.default.createElement("span",{"data-e2e-insert-type":"contact-form"},o("Add Contact Form"))),this.renderSimplePaymentsButton()))),E.default.createElement(Z.default,{onClose:this.closeImageDialog,onInsert:this.onClickImage,shouldDisplay:this.state.showImageDialog}),E.default.createElement(Q.default,{onClose:this.closeLinkDialog,onInsert:this.onClickLink,selectedText:this.state.selectedText,shouldDisplay:this.state.showLinkDialog}),E.default.createElement(oe.default,{activeTab:this.state.contactFormDialogTab,isEdit:!1,onChangeTabs:this.toggleContactFormDialogTab,onClose:this.closeContactFormDialog,onFieldAdd:this.props.fieldAdd,onFieldRemove:this.props.fieldRemove,onFieldUpdate:this.props.fieldUpdate,onInsert:this.onInsertContactForm,onSettingsUpdate:this.props.settingsUpdate,showDialog:this.state.showContactFormDialog}),E.default.createElement(ie.default,{onClose:this.closeMediaModal,onInsertMedia:this.onInsertMedia,visible:this.state.showMediaModal,source:this.state.source}),E.default.createElement(ae.default,{onAddMedia:this.onFilesDrop,site:n}),E.default.createElement(ce.default,{showDialog:this.state.showSimplePaymentsDialog,activeTab:this.state.simplePaymentsDialogTab,isEdit:!1,onClose:this.closeSimplePaymentsDialog,onChangeTabs:this.changeSimplePaymentsDialogTab,onInsert:this.insertSimplePayment}))}}]),t}(C.Component);fe.propTypes={contactForm:j.default.object,content:j.default.object,fieldAdd:j.default.func,fieldRemove:j.default.func,fieldUpdate:j.default.func,moment:j.default.func,onToolbarChangeContent:j.default.func,settingsUpdate:j.default.func,site:j.default.object,translate:j.default.func};var me=function(e){return{contactForm:(0,x.default)(e,"ui.editor.contactForm",{}),site:(0,$.getSelectedSite)(e)}},he={fieldAdd:Y.fieldAdd,fieldRemove:Y.fieldRemove,fieldUpdate:Y.fieldUpdate,settingsUpdate:Y.settingsUpdate};t.default=(0,S.connect)(me,he)((0,T.localize)(fe))},"./client/post-editor/editor-media-advanced/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/assign.js"),i=o(r),s=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/createClass.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),f=o(p),m=n("./node_modules/babel-runtime/helpers/inherits.js"),h=o(m),g=n("./node_modules/react/react.js"),y=o(g),v=n("./node_modules/react-dom/index.js"),b=o(v),_=n("./node_modules/react-redux/es/index.js"),x=n("./node_modules/i18n-calypso/index.js"),C=n("./client/post-editor/media-modal/markup.js"),E=o(C),w=n("./client/components/button/index.jsx"),j=o(w),S=n("./client/components/dialog/index.jsx"),T=o(S),P=n("./client/components/forms/form-fieldset/index.jsx"),k=o(P),I=n("./client/components/forms/form-label/index.jsx"),N=o(I),R=n("./client/components/forms/form-text-input/index.jsx"),D=o(R),M=n("./client/state/ui/selectors.js"),O=function(e){function t(){(0,d.default)(this,t);var e=(0,f.default)(this,(t.__proto__||(0,a.default)(t)).apply(this,arguments));return e.save=e.save.bind(e),e}return(0,h.default)(t,e),(0,c.default)(t,[{key:"save",value:function(){var e=this.props.item,t=e.media,n=e.appearance,o=E.default.get(this.props.selectedSite,(0,i.default)({},t,{alt:b.default.findDOMNode(this.refs.alt).value}),n);this.props.insertMedia(o)}},{key:"render",value:function(){var e=this.props,t=e.translate,n=e.visible,o=e.item,r=e.onClose,i=[y.default.createElement(j.default,{primary:!0,onClick:this.save},t("Save"))];return y.default.createElement(T.default,{isVisible:n,buttons:i,onClose:r},y.default.createElement("form",{onSubmit:this.save},y.default.createElement(k.default,null,y.default.createElement(N.default,null,t("Alt text"),y.default.createElement(D.default,{ref:"alt",defaultValue:o.media.alt})))))}}]),t}(g.Component);O.propTypes={translate:g.PropTypes.func,visible:g.PropTypes.bool,item:g.PropTypes.object,onClose:g.PropTypes.func,insertMedia:g.PropTypes.func},O.defaultProps={onClose:function(){},insertMedia:function(){}},t.default=(0,_.connect)(function(e){return{selectedSite:(0,M.getSelectedSite)(e)}})((0,x.localize)(O)),e.exports=t.default},"./client/post-editor/editor-media-modal/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/helpers/extends.js"),i=o(r),s=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/createClass.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),f=o(p),m=n("./node_modules/babel-runtime/helpers/inherits.js"),h=o(m),g=n("./node_modules/lodash/get.js"),y=o(g),v=n("./node_modules/lodash/map.js"),b=o(v),_=n("./node_modules/lodash/partial.js"),x=o(_),C=n("./node_modules/lodash/some.js"),E=o(C),w=n("./node_modules/react/react.js"),j=o(w),S=n("./node_modules/react-redux/es/index.js"),T=n("./client/components/data/media-library-selected-data/index.jsx"),P=o(T),k=n("./client/post-editor/media-modal/index.jsx"),I=o(k),N=n("./client/lib/posts/actions.js"),R=o(N),D=n("./client/lib/media/utils.js"),M=n("./client/post-editor/media-modal/markup.js"),O=o(M),A=n("./client/state/analytics/actions.js"),L=n("./client/state/ui/selectors.js"),F=function(e){function t(){var e,n,o,r;(0,d.default)(this,t);for(var i=arguments.length,s=Array(i),l=0;l<i;l++)s[l]=arguments[l];return n=o=(0,f.default)(this,(e=t.__proto__||(0,a.default)(t)).call.apply(e,[this].concat(s))),o.onClose=function(e){e?o.insertMedia(e):o.props.onClose()},r=n,(0,f.default)(o,r)}return(0,h.default)(t,e),(0,c.default)(t,[{key:"insertMedia",value:function(e){var t=e.type,n=e.items,o=e.settings,r=this.props.site,i=void 0,s=void 0,a=(0,x.default)(O.default.get,r);switch(t){case"gallery":i="individual"===(0,y.default)(o,"type")?(0,b.default)(o.items,a).join(""):(0,D.generateGalleryShortcode)(o),s="insert_gallery";break;case"media":default:i=(0,b.default)(n,a).join(""),s="insert_item"}(0,E.default)(n,"transient")&&R.default.blockSave("MEDIA_MODAL_TRANSIENT_INSERT"),i&&(this.props.onInsertMedia(i),s&&this.props.bumpStat("editor_media_actions",s)),this.props.onClose()}},{key:"render",value:function(){var e=this.props.site;return j.default.createElement(P.default,{siteId:(0,y.default)(e,"ID")},j.default.createElement(I.default,(0,i.default)({},this.props,{onClose:this.onClose})))}}]),t}(w.Component);F.propTypes={site:w.PropTypes.object,onInsertMedia:w.PropTypes.func,onClose:w.PropTypes.func},F.defaultProps={onInsertMedia:function(){},onClose:function(){}},t.default=(0,S.connect)(function(e){return{site:(0,L.getSelectedSite)(e)}},{bumpStat:A.bumpStat})(F),e.exports=t.default},"./client/post-editor/editor-more-options/copy-post.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=o(p),m=n("./node_modules/react/react.js"),h=o(m),g=n("./node_modules/react-redux/es/index.js"),y=n("./node_modules/i18n-calypso/index.js"),v=n("./node_modules/page/index.js"),b=o(v),_=n("./node_modules/gridicons/build/index.js"),x=o(_),C=n("./client/state/sites/selectors.js"),E=n("./client/state/ui/selectors.js"),w=n("./client/components/accordion/section.jsx"),j=o(w),S=n("./client/components/button/index.jsx"),T=o(S),P=n("./client/components/dialog/index.jsx"),k=o(P),I=n("./client/post-editor/editor-drawer/label.jsx"),N=o(I),R=n("./client/components/forms/form-section-heading/index.jsx"),D=o(R),M=n("./client/my-sites/post-selector/index.jsx"),O=o(M),A=function(e){function t(){var e,n,o,r;(0,a.default)(this,t);for(var s=arguments.length,l=Array(s),d=0;d<s;d++)l[d]=arguments[d];return n=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.state={selectedPostId:null,showDialog:!1},o.isPost=function(){return"post"===o.props.type},o.openDialog=function(e){e.preventDefault(),o.setState({showDialog:!0})},o.closeDialog=function(){o.setState({selectedPostId:null,showDialog:!1})},o.setPostToCopy=function(e){o.setState({selectedPostId:e.ID})},o.goToNewDraft=function(){var e=o.props,t=e.siteSlug,n=e.type,r=o.state.selectedPostId;""!==r&&(b.default.redirect("/"+n+"/"+t+"?copy="+r),o.closeDialog())},r=n,(0,c.default)(o,r)}return(0,f.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){var e=this.props,t=e.siteId,n=e.translate,o=e.type,r=this.state,i=r.selectedPostId,s=r.showDialog,a=[{action:"cancel",label:n("Cancel")},{action:"copy",label:n("Overwrite"),isPrimary:!0,disabled:!i,onClick:this.goToNewDraft}];return h.default.createElement(j.default,{className:"editor-more-options__copy-post"},h.default.createElement(N.default,{labelText:n(this.isPost()?"Copy Post":"Copy Page"),helpText:n(this.isPost()?"Pick a post and we'll copy the title, content, tags and categories.":"Pick a page and we'll copy the title and content.")},h.default.createElement(T.default,{borderless:!0,compact:!0,onClick:this.openDialog},h.default.createElement(x.default,{icon:"clipboard"}),n(this.isPost()?"Select a post to copy":"Select a page to copy"))),h.default.createElement(k.default,{autoFocus:!1,isVisible:s,buttons:a,onClose:this.closeDialog,additionalClassNames:"editor-more-options__copy-post-select-dialog"},h.default.createElement(D.default,null,n(this.isPost()?"Select a post to copy":"Select a page to copy")),h.default.createElement("p",null,n(this.isPost()?"Pick a post and we'll copy the title, content, tags and categories.":"Pick a page and we'll copy the title and content.")),t&&h.default.createElement(O.default,{emptyMessage:n(this.isPost()?"No posts found":"No pages found"),onChange:this.setPostToCopy,order:"DESC",orderBy:"date",selected:i,siteId:t,status:"draft,future,pending,private,publish",type:o})))}}]),t}(m.Component);A.propTypes={siteId:m.PropTypes.number,siteSlug:m.PropTypes.string,translate:m.PropTypes.func,type:m.PropTypes.oneOf(["page","post"]).isRequired},t.default=(0,g.connect)(function(e){var t=(0,E.getSelectedSiteId)(e);return{siteId:t,siteSlug:(0,C.getSiteSlug)(e,t)}})((0,y.localize)(A)),e.exports=t.default},"./client/post-editor/editor-more-options/slug.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=o(p),m=n("./node_modules/react/react.js"),h=o(m),g=n("./node_modules/i18n-calypso/index.js"),y=n("./node_modules/react-redux/es/index.js"),v=n("./client/post-editor/editor-drawer/label.jsx"),b=o(v),_=n("./client/components/accordion/section.jsx"),x=o(_),C=n("./client/post-editor/editor-slug/index.jsx"),E=o(C),w=n("./client/state/ui/selectors.js"),j=n("./client/state/ui/editor/selectors.js"),S=n("./client/state/posts/selectors.js"),T=function(e){function t(){return(0,a.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,d.default)(t,[{key:"getPopoverLabel",value:function(){var e=this.props,t=e.translate,n=e.postType;return t("page"===n?"The slug is the URL-friendly version of the page title.":"The slug is the URL-friendly version of the post title.")}},{key:"render",value:function(){var e=this.props,t=e.postType,n=e.translate;return h.default.createElement(x.default,{className:"editor-more-options__slug"},h.default.createElement(b.default,{labelText:n("Slug"),helpText:this.getPopoverLabel()},h.default.createElement(E.default,{instanceName:t+"-sidebar",className:"editor-more-options__slug-field"})))}}]),t}(m.PureComponent);T.propTypes={postType:m.PropTypes.string,translate:m.PropTypes.func},t.default=(0,y.connect)(function(e){var t=(0,w.getSelectedSiteId)(e);return{postType:(0,S.getEditedPostValue)(e,t,(0,j.getEditorPostId)(e),"type")}})((0,g.localize)(T)),e.exports=t.default},"./client/post-editor/editor-notice/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.EditorNotice=void 0;var r=n("./node_modules/babel-runtime/helpers/extends.js"),i=o(r),s=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/createClass.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),f=o(p),m=n("./node_modules/babel-runtime/helpers/inherits.js"),h=o(m),g=n("./node_modules/react/react.js"),y=o(g),v=n("./node_modules/react-redux/es/index.js"),b=n("./node_modules/i18n-calypso/index.js"),_=n("./node_modules/classnames/index.js"),x=o(_),C=n("./client/components/notice/index.jsx"),E=o(C),w=n("./client/state/ui/selectors.js"),j=n("./client/state/ui/editor/selectors.js"),S=n("./client/state/posts/selectors.js"),T=n("./client/state/post-types/selectors.js"),P=n("./client/components/data/query-post-types/index.jsx"),k=o(P),I=n("./client/state/ui/layout-focus/actions.js"),N=n("./client/lib/viewport/index.js"),R=t.EditorNotice=function(e){function t(){return(0,d.default)(this,t),(0,f.default)(this,(t.__proto__||(0,a.default)(t)).apply(this,arguments))}return(0,h.default)(t,e),(0,c.default)(t,[{key:"componentWillReceiveProps",value:function(e){(0,N.isMobile)()&&(!this.props.message&&e.message||!this.props.error&&e.error)&&this.props.setLayoutFocus("content")}},{key:"getErrorMessage",value:function(){var e=this.props,t=e.translate,n=e.error;if(n)switch(n.message){case"NO_CONTENT":return t("You haven't written anything yet!")}}},{key:"getText",value:function(e){var t=this.props,n=t.translate,o=t.type,r=t.typeObject,i=t.site;switch(e){case"warnPublishDateChange":return n("Are you sure about that? If you change the date, existing links to your post will stop working.");case"publishFailure":return n("page"===o?"Publishing of page failed.":"Publishing of post failed.");case"saveFailure":return n("Saving of draft failed.");case"trashFailure":return n("page"===o?"Trashing of page failed.":"Trashing of post failed.");case"published":return i?"page"===o?n("Page published on {{siteLink/}}! {{a}}Add another page{{/a}}",{components:{siteLink:y.default.createElement("a",{href:i.URL,target:"_blank",rel:"noopener noreferrer"},i.title),a:y.default.createElement("a",{href:"/page/"+i.slug})},comment:"Editor: Message displayed when a page is published, with a link to the site it was published on."}):n("Post published on {{siteLink/}}!",{components:{siteLink:y.default.createElement("a",{href:i.URL,target:"_blank",rel:"noopener noreferrer"},i.title)},comment:"Editor: Message displayed when a post is published, with a link to the site it was published on."}):n("page"===o?"Page published!":"Post published!");case"scheduled":return i?"page"===o?n("Page scheduled on {{siteLink/}}! {{a}}Add another page{{/a}}",{components:{siteLink:y.default.createElement("a",{href:i.URL,target:"_blank",rel:"noopener noreferrer"},i.title),a:y.default.createElement("a",{href:"/page/"+i.slug})},comment:"Editor: Message displayed when a page is scheduled, with a link to the site it was scheduled on."}):n("Post scheduled on {{siteLink/}}!",{components:{siteLink:y.default.createElement("a",{href:i.URL,target:"_blank",rel:"noopener noreferrer"},i.title)},comment:"Editor: Message displayed when a post is scheduled, with a link to the site it was scheduled on."}):n("page"===o?"Page scheduled!":"Post scheduled!");case"publishedPrivately":return n("{{strong}}Published privately.{{/strong}} Only admins and editors can view.",{components:{strong:y.default.createElement("strong",null)},comment:"Editor: Message displayed when a post is published privately."});case"view":return"page"===o?n("View Page"):"post"!==o&&r?r.labels.view_item:n("View Post");case"preview":return n("View Preview");case"updated":return i?"page"===o?n("Page updated on {{siteLink/}}! {{a}}Add another page{{/a}}",{components:{siteLink:y.default.createElement("a",{href:i.URL,target:"_blank",rel:"noopener noreferrer"},i.title),a:y.default.createElement("a",{href:"/page/"+i.slug})},comment:"Editor: Message displayed when a page is updated, with a link to the site it was updated on."}):n("Post updated on {{siteLink/}}!",{components:{siteLink:y.default.createElement("a",{href:i.URL,target:"_blank",rel:"noopener noreferrer"},i.title)},comment:"Editor: Message displayed when a post is updated, with a link to the site it was updated on."}):n("page"===o?"Page updated!":"Post updated!")}}},{key:"render",value:function(){var e=this.props,t=e.siteId,n=e.message,o=e.status,r=e.onDismissClick,s=this.getErrorMessage()||this.getText(n);return y.default.createElement("div",{className:(0,x.default)("editor-notice",{"is-global":!0})},t&&y.default.createElement(k.default,{siteId:t}),s&&y.default.createElement(E.default,(0,i.default)({status:o,text:s,onDismissClick:r},{showDismiss:!0})))}}]),t}(g.Component);R.propTypes={translate:g.PropTypes.func,siteId:g.PropTypes.number,site:g.PropTypes.object,type:g.PropTypes.string,typeObject:g.PropTypes.object,message:g.PropTypes.string,status:g.PropTypes.string,onDismissClick:g.PropTypes.func,error:g.PropTypes.object},t.default=(0,v.connect)(function(e){var t=(0,w.getSelectedSiteId)(e),n=(0,S.getEditedPost)(e,t,(0,j.getEditorPostId)(e));return n?{siteId:t,site:(0,w.getSelectedSite)(e),type:n.type,typeObject:(0,T.getPostType)(e,t,n.type)}:{}},{setLayoutFocus:I.setLayoutFocus})((0,b.localize)(R))},"./client/post-editor/editor-page-order/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=o(p),m=n("./node_modules/react/react.js"),h=o(m),g=n("./node_modules/react-redux/es/index.js"),y=n("./node_modules/i18n-calypso/index.js"),v=n("./client/components/accordion/section.jsx"),b=o(v),_=n("./client/components/forms/form-text-input/index.jsx"),x=o(_),C=n("./client/lib/posts/stats.js"),E=n("./client/state/ui/selectors.js"),w=n("./client/state/ui/editor/selectors.js"),j=n("./client/state/posts/selectors.js"),S=n("./client/state/posts/actions.js"),T=function(e){function t(){(0,a.default)(this,t);var e=(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments));return e.editMenuOrder=e.editMenuOrder.bind(e),e.statTracked=!1,e}return(0,f.default)(t,e),(0,d.default)(t,[{key:"editMenuOrder",value:function(e){var t=this.props,n=t.menuOrder,o=t.siteId,r=t.postId,i=parseInt(e.target.value,10)||0;i!==n&&(this.statTracked||(this.statTracked=!0,(0,C.recordStat)("advanced_menu_order_changed"),(0,C.recordEvent)("Changed page menu order")),this.props.editPost(o,r,{menu_order:i}))}},{key:"render",value:function(){var e=this.props,t=e.translate,n=e.menuOrder;return h.default.createElement(b.default,{className:"editor-page-order"},h.default.createElement("label",null,h.default.createElement("span",{className:"editor-page-order__label-text"},t("Order",{context:"Editor: Field label for menu order."})),h.default.createElement(x.default,{type:"number",value:n,pattern:"[0-9]*",onChange:this.editMenuOrder,onBlur:this.editMenuOrder,className:"editor-page-order__input"})))}}]),t}(m.Component);T.propTypes={siteId:m.PropTypes.number,postId:m.PropTypes.number,menuOrder:m.PropTypes.number},T.defaultProps={menuOrder:0},t.default=(0,g.connect)(function(e){var t=(0,E.getSelectedSiteId)(e),n=(0,w.getEditorPostId)(e),o=(0,j.getEditedPostValue)(e,t,n,"menu_order");return{siteId:t,postId:n,menuOrder:o}},{editPost:S.editPost})((0,y.localize)(T)),e.exports=t.default},"./client/post-editor/editor-page-parent/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=o(p),m=n("./node_modules/lodash/get.js"),h=o(m),g=n("./node_modules/react/react.js"),y=o(g),v=n("./node_modules/i18n-calypso/index.js"),b=n("./node_modules/react-redux/es/index.js"),_=n("./client/my-sites/post-selector/index.jsx"),x=o(_),C=n("./client/components/forms/form-label/index.jsx"),E=o(C),w=n("./client/components/forms/form-toggle/compact.jsx"),j=o(w),S=n("./client/components/accordion/section.jsx"),T=o(S),P=n("./client/state/ui/selectors.js"),k=n("./client/state/ui/editor/selectors.js"),I=n("./client/state/posts/selectors.js"),N=n("./client/state/posts/actions.js"),R=n("./client/state/post-types/selectors.js"),D=function(e){function t(e){(0,a.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return n.boundUpdatePageParent=n.updatePageParent.bind(n),n}return(0,f.default)(t,e),(0,d.default)(t,[{key:"updatePageParent",value:function(e){var t=this.props,n=t.siteId,o=t.postId,r=e&&e.ID?e.ID:null;this.props.editPost(n,o,{parent:r})}},{key:"render",value:function(){var e=this.props,t=e.parentId,n=e.translate,o=e.postId,r=e.siteId,i=e.postType,s=e.labels;return y.default.createElement(T.default,{className:"editor-page-parent"},y.default.createElement(E.default,null,y.default.createElement("span",{className:"editor-page-parent__label-text"},s.parent||n("Parent Page"))),y.default.createElement(E.default,{className:"editor-page-parent__top-level"},y.default.createElement("span",{className:"editor-page-parent__top-level-label"},n("Top level",{context:"Editor: Page being edited is top level i.e. has no parent"})),y.default.createElement(j.default,{checked:!t,onChange:this.boundUpdatePageParent,"aria-label":n("Toggle to set as top level")})),y.default.createElement(x.default,{type:i,siteId:r,onChange:this.boundUpdatePageParent,selected:t,excludeTree:o,emptyMessage:s.not_found||n("You have no other pages yet.")}))}}]),t}(g.Component);D.propTypes={siteId:g.PropTypes.number,postId:g.PropTypes.number,parentId:g.PropTypes.number,postType:g.PropTypes.string,translate:g.PropTypes.func,labels:g.PropTypes.object},t.default=(0,b.connect)(function(e){var t=(0,P.getSelectedSiteId)(e),n=(0,k.getEditorPostId)(e),o=(0,I.getEditedPostValue)(e,t,n,"type"),r=(0,I.getEditedPostValue)(e,t,n,"parent"),i=(0,h.default)(r,"ID",r)||0,s=(0,h.default)((0,R.getPostType)(e,t,o),"labels",{});return{siteId:t,postId:n,postType:o,parentId:i,labels:s}},{editPost:N.editPost})((0,v.localize)(D)),e.exports=t.default},"./client/post-editor/editor-page-slug/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=o(p),m=n("./node_modules/react/react.js"),h=o(m),g=n("./node_modules/gridicons/build/index.js"),y=o(g),v=n("./client/post-editor/editor-slug/index.jsx"),b=o(v),_=function(e){function t(){return(0,a.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){return h.default.createElement(b.default,{path:this.props.path,instanceName:"page-permalink"},h.default.createElement(y.default,{icon:"link"}))}}]),t}(m.PureComponent);_.propTypes={path:m.PropTypes.string},t.default=_,e.exports=t.default},"./client/post-editor/editor-page-templates/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=o(p),m=n("./node_modules/lodash/map.js"),h=o(m),g=n("./node_modules/lodash/size.js"),y=o(g),v=n("./node_modules/lodash/find.js"),b=o(v),_=n("./node_modules/react/react.js"),x=o(_),C=n("./node_modules/react-redux/es/index.js"),E=n("./node_modules/i18n-calypso/index.js"),w=n("./client/components/data/query-page-templates/index.jsx"),j=o(w),S=n("./client/components/accordion/section.jsx"),T=o(S),P=n("./client/components/select-dropdown/index.jsx"),k=o(P),I=n("./client/components/select-dropdown/item.jsx"),N=o(I),R=n("./client/post-editor/editor-drawer/label.jsx"),D=o(R),M=n("./client/state/ui/selectors.js"),O=n("./client/state/ui/editor/selectors.js"),A=n("./client/state/posts/selectors.js"),L=n("./client/state/page-templates/selectors.js"),F=n("./client/state/sites/selectors.js"),B=n("./client/state/posts/actions.js"),z=n("./client/post-editor/editor-theme-help/index.jsx"),U=o(z),H=function(e){
function t(){(0,a.default)(this,t);var e=(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments));return e.selectTemplate=e.selectTemplate.bind(e),e}return(0,f.default)(t,e),(0,d.default)(t,[{key:"selectTemplate",value:function(e){var t=this.props,n=t.siteId,o=t.postId;this.props.editPost(n,o,{page_template:e})}},{key:"getSelectedTemplateText",value:function(){var e=this.props,t=e.templates,n=e.template,o=e.translate,r=void 0;return n&&(r=(0,b.default)(t,{file:n})),r?r.label:o("Default Template")}},{key:"getTemplates",value:function(){var e=this.props,t=e.translate,n=e.templates;return[{label:t("Default Template"),file:""}].concat(n||[])}},{key:"render",value:function(){var e=this,t=this.props,n=t.postType,o=t.template,r=t.siteId,i=t.translate,s=t.postId,a=t.pageForPostsId;if("page"!==n||s===a)return null;var l=this.getTemplates();return x.default.createElement("div",null,r&&x.default.createElement(j.default,{siteId:r}),(0,y.default)(l)>1&&x.default.createElement(T.default,null,x.default.createElement(D.default,{labelText:i("Page Template")},x.default.createElement(U.default,{className:"editor-page-templates__help-link"}),x.default.createElement(k.default,{selectedText:this.getSelectedTemplateText()},(0,h.default)(l,function(t){var n=t.file,r=t.label;return x.default.createElement(N.default,{key:n,selected:n===o,onClick:function(){return e.selectTemplate(n)}},r)})))))}}]),t}(_.Component);H.propTypes={siteId:_.PropTypes.number,postId:_.PropTypes.number,postType:_.PropTypes.string,template:_.PropTypes.string,templates:_.PropTypes.array,editPost:_.PropTypes.func,pageForPostsId:_.PropTypes.number},t.default=(0,C.connect)(function(e){var t=(0,M.getSelectedSiteId)(e),n=(0,O.getEditorPostId)(e),o=(0,A.getEditedPostValue)(e,t,n,"type"),r=(0,A.getEditedPostValue)(e,t,n,"page_template"),i=(0,L.getPageTemplates)(e,t),s=(0,F.getSiteOption)(e,t,"page_for_posts");return{siteId:t,postId:n,postType:o,template:r,templates:i,pageForPostsId:s}},{editPost:B.editPost})((0,E.localize)(H)),e.exports=t.default},"./client/post-editor/editor-permalink/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/helpers/extends.js"),i=o(r),s=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/createClass.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),f=o(p),m=n("./node_modules/babel-runtime/helpers/inherits.js"),h=o(m),g=n("./node_modules/lodash/pick.js"),y=o(g),v=n("./node_modules/react/react.js"),b=o(v),_=n("./node_modules/i18n-calypso/index.js"),x=n("./node_modules/react-redux/es/index.js"),C=n("./node_modules/gridicons/build/index.js"),E=o(C),w=n("./client/post-editor/editor-slug/index.jsx"),j=o(w),S=n("./client/components/popover/index.jsx"),T=o(S),P=n("./client/components/tooltip/index.jsx"),k=o(P),I=n("./client/components/forms/clipboard-button/index.jsx"),N=o(I),R=n("./client/state/ui/selectors.js"),D=n("./client/state/ui/editor/selectors.js"),M=n("./client/state/posts/selectors.js"),O=function(e){function t(){(0,d.default)(this,t);var e=(0,f.default)(this,(t.__proto__||(0,a.default)(t)).apply(this,arguments));return e.showPopover=e.showPopover.bind(e),e.showTooltip=e.showTooltip.bind(e),e.onCopy=e.onCopy.bind(e),e.hideTooltip=e.hideTooltip.bind(e),e.closePopover=e.closePopover.bind(e),e.state={showPopover:!1,popoverVisible:!1,showCopyConfirmation:!1,tooltip:!1},e}return(0,h.default)(t,e),(0,c.default)(t,[{key:"componentDidUpdate",value:function(e,t){this.state.showPopover!==t.showPopover&&this.setState({popoverVisible:this.state.showPopover})}},{key:"componentWillUnmount",value:function(){clearTimeout(this.dismissCopyConfirmation)}},{key:"showPopover",value:function(){this.setState({showPopover:!this.state.showPopover,tooltip:!1})}},{key:"showTooltip",value:function(){this.state.showPopover||this.setState({tooltip:!0})}},{key:"onCopy",value:function(){var e=this;this.setState({showCopyConfirmation:!0}),clearTimeout(this.dismissCopyConfirmation),this.dismissCopyConfirmation=setTimeout(function(){e.setState({showCopyConfirmation:!1})},4e3)}},{key:"hideTooltip",value:function(){this.setState({tooltip:!1})}},{key:"closePopover",value:function(){this.setState({showPopover:!1})}},{key:"renderCopyButton",value:function(){if(this.state.popoverVisible){var e=this.props,t=e.path,n=e.slug,o=e.translate,r=void 0;return r=this.state.showCopyConfirmation?o("Copied!"):o("Copy",{context:"verb"}),b.default.createElement(N.default,{text:t+n,onCopy:this.onCopy,compact:!0},r)}}},{key:"render",value:function(){var e=this.props.translate,t=void 0;return t=e(this.props.isEditable?"Edit post URL":"View post URL"),b.default.createElement("div",{className:"editor-permalink",onMouseEnter:this.showTooltip,onMouseLeave:this.hideTooltip},b.default.createElement(E.default,{className:"editor-permalink__toggle",icon:"link",onClick:this.showPopover,ref:"popoverButton"}),b.default.createElement(T.default,{isVisible:this.state.showPopover,onClose:this.closePopover,position:"bottom right",context:this.refs&&this.refs.popoverButton,className:"editor-permalink__popover"},b.default.createElement(j.default,(0,i.default)({},(0,y.default)(this.props,"path","isEditable"),{onEscEnter:this.closePopover,instanceName:"post-popover"})),this.renderCopyButton()),b.default.createElement(k.default,{context:this.refs&&this.refs.popoverButton,isVisible:this.state.tooltip,position:"bottom"},t))}}]),t}(v.Component);O.propTypes={path:v.PropTypes.string,isEditable:v.PropTypes.bool,translate:v.PropTypes.func,slug:v.PropTypes.string},t.default=(0,x.connect)(function(e){var t=(0,R.getSelectedSiteId)(e),n=(0,D.getEditorPostId)(e);return{slug:(0,M.getEditedPostSlug)(e,t,n)}})((0,_.localize)(O)),e.exports=t.default},"./client/post-editor/editor-post-type-unsupported/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=e.translate,n=e.types,o=e.type,r=e.typeObject,i=e.writePostPath,a=e.siteSlug;if(!n||!o||r)return null;var d=[l.default.createElement(y.default,{href:"/posts/"+a},t("Back to My Sites"))],u=(0,s.default)(_,o),c=void 0;if(u){switch(o){case"jetpack-portfolio":c=t("Portfolios are not enabled. Open your site settings to activate them.");break;case"jetpack-testimonial":c=t("Testimonials are not enabled. Open your site settings to activate them.")}d.push(l.default.createElement(y.default,{href:"/settings/writing/"+a,primary:!0},t("Site Settings")))}else c=t("To use this post type, please check that your theme and site support it."),d.push(l.default.createElement(y.default,{href:i,primary:!0},t("Write a Blog Post")));return l.default.createElement(b.default,{isVisible:!0,buttons:d,className:"editor-post-type-unsupported"},l.default.createElement("h1",null,t("This post type is not supported")),l.default.createElement("p",null,c),l.default.createElement("p",null,t("For more information, visit our {{supportLink}}support page on custom content types{{/supportLink}}.",{components:{supportLink:l.default.createElement("a",{href:"https://support.wordpress.com/custom-post-types/"})}})))}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/lodash/includes.js"),s=o(i),a=n("./node_modules/react/react.js"),l=o(a),d=n("./node_modules/react-redux/es/index.js"),u=n("./node_modules/i18n-calypso/index.js"),c=n("./client/state/ui/selectors.js"),p=n("./client/state/ui/editor/selectors.js"),f=n("./client/state/posts/selectors.js"),m=n("./client/state/post-types/selectors.js"),h=n("./client/state/sites/selectors.js"),g=n("./client/components/button/index.jsx"),y=o(g),v=n("./client/components/dialog/index.jsx"),b=o(v),_=["jetpack-portfolio","jetpack-testimonial"];r.propTypes={translate:a.PropTypes.func,types:a.PropTypes.object,type:a.PropTypes.string,typeObject:a.PropTypes.object,writePostPath:a.PropTypes.string,siteSlug:a.PropTypes.string},t.default=(0,d.connect)(function(e){var t=(0,c.getSelectedSiteId)(e),n=(0,f.getEditedPostValue)(e,t,(0,p.getEditorPostId)(e),"type");return{type:n,types:(0,m.getPostTypes)(e,t),typeObject:(0,m.getPostType)(e,t,n),writePostPath:(0,p.getEditorNewPostPath)(e,t),siteSlug:(0,h.getSiteSlug)(e,t)}})((0,u.localize)(r)),e.exports=t.default},"./client/post-editor/editor-post-type/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=e.translate,n=e.siteId,o=e.typeSlug,r=e.type,i=e.globalId,s=e.isSettings,a=void 0;"page"===o?a=s?t("Page Settings"):t("Page",{context:"noun"}):"post"===o?a=s?t("Post Settings"):t("Post",{context:"noun"}):r?(a=s?t("%s: Settings",{args:r.labels.singular_name,comment:"type refers to a post type's singular noun"}):r.labels.singular_name,a=(0,b.decodeEntities)(a)):a=t("Loading…");var d=(0,u.default)("editor-post-type",{"is-loading":!a});return l.default.createElement("span",{className:d},n&&"page"!==o&&"post"!==o&&l.default.createElement(v.default,{siteId:n}),a," ",l.default.createElement(x.default,{globalId:i,showAll:!0,showIcon:!1}))}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/babel-runtime/core-js/object/assign.js"),s=o(i),a=n("./node_modules/react/react.js"),l=o(a),d=n("./node_modules/classnames/index.js"),u=o(d),c=n("./node_modules/react-redux/es/index.js"),p=n("./node_modules/i18n-calypso/index.js"),f=n("./client/state/posts/selectors.js"),m=n("./client/state/ui/selectors.js"),h=n("./client/state/ui/editor/selectors.js"),g=n("./client/state/post-types/selectors.js"),y=n("./client/components/data/query-post-types/index.jsx"),v=o(y),b=n("./client/lib/formatting/index.js"),_=n("./client/blocks/post-status/index.jsx"),x=o(_);r.propTypes={translate:a.PropTypes.func,siteId:a.PropTypes.number,typeSlug:a.PropTypes.string,type:a.PropTypes.object,globalId:a.PropTypes.string,isSettings:a.PropTypes.bool},t.default=(0,c.connect)(function(e){var t={},n=(0,m.getSelectedSite)(e);if(!n)return t;t.siteId=n.ID;var o=(0,f.getEditedPost)(e,n.ID,(0,h.getEditorPostId)(e));return o?(0,s.default)(t,{typeSlug:o.type,type:(0,g.getPostType)(e,n.ID,o.type),globalId:o.global_ID}):t})((0,p.localize)(r)),e.exports=t.default},"./client/post-editor/editor-preview/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var r=n("./node_modules/react/react.js"),i=o(r),s=n("./node_modules/url/url.js"),a=o(s),l=n("./node_modules/classnames/index.js"),d=o(l),u=n("./node_modules/i18n-calypso/index.js"),c=n("./client/lib/url/index.js"),p=n("./client/components/web-preview/index.jsx"),f=o(p),m=n("./client/components/web-preview/content.jsx"),h=o(m),g=i.default.createClass({displayName:"EditorPreview",_hasTouch:!1,propTypes:{showPreview:i.default.PropTypes.bool,isSaving:i.default.PropTypes.bool,isLoading:i.default.PropTypes.bool,isFullScreen:i.default.PropTypes.bool,previewUrl:i.default.PropTypes.string,editUrl:i.default.PropTypes.string,onClose:i.default.PropTypes.func,postId:i.default.PropTypes.number,revision:i.default.PropTypes.number},getInitialState:function(){return{iframeUrl:"about:blank"}},componentDidUpdate:function(e){this.didStartSaving(e,this.props)&&this.setState({iframeUrl:"about:blank"}),this.props.previewUrl&&(this.didFinishSaving(e)||this.didLoad(e)||this.didShowSavedPreviewViaTouch(e))&&this.setState({iframeUrl:this.getIframePreviewUrl()})},componentWillUnmount:function(){window.removeEventListener("keydown",this.keyDown)},didStartSaving:function(e,t){return!(!e||!t)&&(t.isSaving&&!e.isSaving)},didFinishSaving:function(e){return e.isSaving&&!this.props.isSaving},didLoad:function(e){return e&&e.isLoading&&!this.props.isLoading},didShowSavedPreviewViaTouch:function(e){return this._hasTouch&&!e.showPreview&&this.props.showPreview&&!this.props.isSaving&&!this.props.isLoading},getIframePreviewUrl:function(){var e=a.default.parse(this.props.previewUrl,!0);return e.query.preview="true",e.query.iframe="true",e.query.revision=String(this.props.revision),delete e.search,a.default.format(e)},cleanExternalUrl:function(e){return(0,c.omitUrlParams)(e,["iframe","frame-nonce"])},render:function(){var e=this.props.isFullScreen,t=(0,d.default)("editor-preview",{"is-fullscreen":e});return i.default.createElement("div",{className:t},e?i.default.createElement(h.default,{showPreview:this.props.showPreview,showEdit:!0,showExternal:!0,showUrl:!0,defaultViewportDevice:this.props.defaultViewportDevice,onClose:this.props.onClose,onEdit:this.props.onEdit,previewUrl:this.state.iframeUrl,editUrl:this.props.editUrl,externalUrl:this.cleanExternalUrl(this.props.externalUrl),loadingMessage:this.props.translate("{{strong}}One moment, please…{{/strong}} loading your new post.",{components:{strong:i.default.createElement("strong",null)}})}):i.default.createElement(f.default,{showPreview:this.props.showPreview,defaultViewportDevice:this.props.defaultViewportDevice,onClose:this.props.onClose,previewUrl:this.state.iframeUrl,externalUrl:this.cleanExternalUrl(this.props.externalUrl)}))}});e.exports=(0,u.localize)(g)},"./client/post-editor/editor-publish-button/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.EditorPublishButton=t.getPublishButtonStatus=void 0;var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=o(p),m=n("./node_modules/react/react.js"),h=o(m),g=n("./node_modules/react-redux/es/index.js"),y=n("./client/lib/posts/stats.js"),v=n("./client/lib/posts/utils.js"),b=o(v),_=n("./client/lib/site/utils.js"),x=o(_),C=n("./client/components/button/index.jsx"),E=o(C),w=n("./node_modules/i18n-calypso/index.js"),j=n("./client/state/ui/selectors.js"),S=n("./client/state/ui/editor/selectors.js"),T=n("./client/state/posts/selectors.js"),P=t.getPublishButtonStatus=function(e,t,n){return b.default.isPublished(n)&&!b.default.isBackDatedPublished(n)&&!b.default.isFutureDated(t)||n&&"future"===n.status&&b.default.isFutureDated(t)?"update":b.default.isFutureDated(t)?"schedule":x.default.userCan("publish_posts",e)?"publish":n&&"pending"===n.status?"update":"requestReview"},k=t.EditorPublishButton=function(e){function t(e){(0,a.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return n.onClick=n.onClick.bind(n),n}return(0,f.default)(t,e),(0,d.default)(t,[{key:"trackClick",value:function(){var e={update:"Clicked Update Post Button",schedule:"Clicked Schedule Post Button",requestReview:"Clicked Request-Review Post Button",publish:"Clicked Publish Post Button"},t={update:"Clicked Update Page Button",schedule:"Clicked Schedule Page Button",requestReview:"Clicked Request-Review Page Button",publish:"Clicked Publish Page Button"},n=P(this.props.site,this.props.post,this.props.savedPost),o=b.default.isPage(this.props.post)?t[n]:e[n];(0,y.recordEvent)(o),(0,y.recordEvent)("Clicked Primary Button")}},{key:"getButtonLabel",value:function(){switch(P(this.props.site,this.props.post,this.props.savedPost)){case"update":return this.props.translate("Update");case"schedule":return this.props.isConfirmationSidebarEnabled?this.props.translate("Schedule…",{comment:"Button label on the editor sidebar - a confirmation step will follow"}):this.props.translate("Schedule");case"publish":return this.props.isConfirmationSidebarEnabled?this.props.isPublishing?this.props.translate("Publishing…",{comment:"Button label on the editor sidebar while publishing is in progress"}):this.props.translate("Publish…",{comment:"Button label on the editor sidebar - a confirmation step will follow"}):this.props.translate("Publish");case"requestReview":return this.props.translate("Submit for Review")}}},{key:"onClick",value:function(){return this.trackClick(),b.default.isPublished(this.props.savedPost)&&!b.default.isBackDatedPublished(this.props.savedPost)?this.props.onSave():x.default.userCan("publish_posts",this.props.site)?this.props.onPublish():this.props.onSave("pending")}},{key:"isEnabled",value:function(){return!this.props.isPublishing&&!this.props.isSaveBlocked&&this.props.hasContent&&!this.props.needsVerification&&(!this.props.privatePost||this.props.privatePostPasswordValid)}},{key:"render",value:function(){return h.default.createElement(E.default,{className:"editor-publish-button",primary:!0,busy:this.props.busy,onClick:this.onClick,disabled:!this.isEnabled(),tabIndex:this.props.tabIndex},this.getButtonLabel())}}]),t}(m.Component);k.propTypes={site:m.PropTypes.object,post:m.PropTypes.object,savedPost:m.PropTypes.object,onSave:m.PropTypes.func,onPublish:m.PropTypes.func,tabIndex:m.PropTypes.number,isPublishing:m.PropTypes.bool,isSaveBlocked:m.PropTypes.bool,hasContent:m.PropTypes.bool,needsVerification:m.PropTypes.bool,privatePost:h.default.PropTypes.bool,privatePostPasswordValid:h.default.PropTypes.bool,busy:m.PropTypes.bool,isConfirmationSidebarEnabled:m.PropTypes.bool},t.default=(0,g.connect)(function(e){var t=(0,j.getSelectedSiteId)(e),n=(0,S.getEditorPostId)(e),o=(0,T.isEditedPostPrivate)(e,t,n),r=(0,T.isPrivateEditedPostPasswordValid)(e,t,n);return{privatePost:o,privatePostPasswordValid:r}})((0,w.localize)(k))},"./client/post-editor/editor-publish-date/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.EditorPublishDate=void 0;var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=o(p),m=n("./node_modules/lodash/intersection.js"),h=o(m),g=n("./node_modules/react/react.js"),y=o(g),v=n("./node_modules/react-dom/index.js"),b=o(v),_=n("./node_modules/react-redux/es/index.js"),x=n("./node_modules/i18n-calypso/index.js"),C=n("./node_modules/classnames/index.js"),E=o(C),w=n("./node_modules/gridicons/build/index.js"),j=o(w),S=n("./client/components/button/index.jsx"),T=o(S),P=n("./client/post-editor/editor-publish-date/post-scheduler.jsx"),k=o(P),I=n("./client/lib/posts/utils.js"),N=o(I),R=n("./client/state/ui/selectors.js"),D=t.EditorPublishDate=function(e){function t(e){(0,a.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return n.handleOutsideClick=function(e){var t=e.target.className.split(/\s/),o=(0,h.default)(t,["DayPicker-Day","date-picker__day"]).length>0,r=b.default.findDOMNode(n.refs.editorPublishDateWrapper).contains(e.target);o||r||n.setState({isOpen:!1})},n.setImmediate=function(){n.props.setPostDate(null),n.setState({isOpen:!1})},n.toggleOpenState=function(){n.setState({isOpen:!n.state.isOpen})},n.state={isOpen:!1},n}return(0,f.default)(t,e),(0,d.default)(t,[{key:"componentWillUnmount",value:function(){window.removeEventListener("click",this.handleOutsideClick)}},{key:"componentDidUpdate",value:function(){this.state.isOpen?window.addEventListener("click",this.handleOutsideClick):window.removeEventListener("click",this.handleOutsideClick)}},{key:"getHeaderDescription",value:function(){var e=N.default.isFutureDated(this.props.post),t=N.default.isBackDated(this.props.post),n=N.default.isPublished(this.props.post);return n&&e?this.props.translate("Scheduled"):e?this.props.translate("Schedule"):n?this.props.translate("Published"):t?this.props.translate("Backdate"):this.props.translate("Publish Immediately")}},{key:"renderCalendarHeader",value:function(){var e=N.default.isFutureDated(this.props.post),t=N.default.isBackDated(this.props.post),n=N.default.isPublished(this.props.post);if(!n)return e||t?y.default.createElement(T.default,{borderless:!0,className:"editor-publish-date__immediate",onClick:this.setImmediate},this.props.translate("Publish Immediately")):y.default.createElement("div",{className:"editor-publish-date__choose-header"},this.props.translate("Choose a date to schedule"))}},{key:"renderHeader",value:function(){var e=N.default.isFutureDated(this.props.post),t=N.default.isBackDated(this.props.post),n=N.default.isPublished(this.props.post),o=(0,E.default)("editor-publish-date__header",{"is-scheduled":e,"is-back-dated":t,"is-published":n}),r=this.props.post&&this.props.post.date?this.props.post.date:null;return y.default.createElement("div",{className:o,onClick:this.toggleOpenState},y.default.createElement(j.default,{icon:"calendar",size:18}),y.default.createElement("div",{className:"editor-publish-date__header-wrapper"},y.default.createElement("div",{className:"editor-publish-date__header-description"},this.getHeaderDescription()),(e||t||n)&&y.default.createElement("div",{className:"editor-publish-date__header-chrono"},this.props.moment(r).calendar())))}},{key:"renderSchedule",value:function(){var e=this.props.post&&this.props.post.date?this.props.post.date:null;return y.default.createElement("div",{className:"editor-publish-date__schedule"},this.renderCalendarHeader(),y.default.createElement(k.default,{post:this.props.post,site:this.props.site,initialDate:this.props.moment(),setPostDate:this.props.setPostDate,selectedDay:e}))}},{key:"render",value:function(){var e=(0,E.default)("editor-publish-date",{"is-open":this.state.isOpen});return y.default.createElement("div",{className:e},y.default.createElement("div",{className:"editor-publish-date__wrapper",ref:"editorPublishDateWrapper"},this.renderHeader(),this.state.isOpen&&this.renderSchedule()))}}]),t}(y.default.Component);D.propTypes={post:y.default.PropTypes.object,postDate:y.default.PropTypes.string,setPostDate:y.default.PropTypes.func},t.default=(0,_.connect)(function(e){return{site:(0,R.getSelectedSite)(e)}})((0,x.localize)(D))},"./client/post-editor/editor-publish-date/post-scheduler.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=o(p),m=n("./node_modules/lodash/get.js"),h=o(m),g=n("./node_modules/react/react.js"),y=o(g),v=n("./node_modules/prop-types/index.js"),b=o(v),_=n("./node_modules/react-redux/es/index.js"),x=n("./client/components/post-schedule/index.jsx"),C=o(x),E=n("./client/components/data/query-posts/index.jsx"),w=o(E),j=n("./client/lib/posts/utils.js"),S=o(j),T=n("./client/lib/site/utils.js"),P=o(T),k=n("./client/state/posts/selectors.js"),I=(0,_.connect)(function(e,t){var n=t.site,o=t.query;return{posts:(0,k.getSitePostsForQueryIgnoringPage)(e,(0,h.default)(n,"ID"),o)||[]}})(function(e){var t=e.onDateChange,n=e.onMonthChange,o=e.posts,r=e.selectedDay,i=e.site;return y.default.createElement(C.default,{displayInputChrono:!1,selectedDay:r,onDateChange:t,onMonthChange:n,posts:o,site:i})}),N=function(e){function t(){var e,n,o,r;(0,a.default)(this,t);for(var s=arguments.length,l=Array(s),d=0;d<s;d++)l[d]=arguments[d];return n=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.state={firstDayOfTheMonth:o.getFirstDayOfTheMonth(o.props.initialDate),lastDayOfTheMonth:o.getLastDayOfTheMonth(o.props.initialDate)},o.setCurrentMonth=function(e){o.setState({firstDayOfTheMonth:o.getFirstDayOfTheMonth(e),lastDayOfTheMonth:o.getLastDayOfTheMonth(e)})},r=n,(0,c.default)(o,r)}return(0,f.default)(t,e),(0,d.default)(t,[{key:"getFirstDayOfTheMonth",value:function(e){var t=P.default.timezone(this.props.site);return S.default.getOffsetDate(e,t).set({year:e.year(),month:e.month(),date:1,hours:0,minutes:0,seconds:0,milliseconds:0})}},{key:"getLastDayOfTheMonth",value:function(e){return this.getFirstDayOfTheMonth(e).add(1,"month").second(-1)}},{key:"render",value:function(){var e=this.props,t=e.post,n=e.setPostDate,o=e.site,r={status:"publish,future",before:this.state.lastDayOfTheMonth.format(),after:this.state.firstDayOfTheMonth.format(),number:100};return y.default.createElement("div",null,!S.default.isPage(t)&&y.default.createElement(w.default,{siteId:(0,h.default)(o,"ID"),query:r}),y.default.createElement(I,{onDateChange:n,onMonthChange:this.setCurrentMonth,query:r,selectedDay:(0,h.default)(t,"date"),site:o}))}}]),t}(g.PureComponent);N.propTypes={initialDate:b.default.object.isRequired,post:b.default.object,setPostDate:b.default.func,site:b.default.object},t.default=N,e.exports=t.default},"./client/post-editor/editor-revisions-list/header.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/react/react.js"),i=o(r),s=n("./node_modules/prop-types/index.js"),a=o(s),l=n("./node_modules/i18n-calypso/index.js"),d=n("./client/components/button/index.jsx"),u=o(d),c=function(e){var t=e.loadRevision,n=e.selectedRevisionId,o=e.translate;return i.default.createElement("div",{className:"editor-revisions-list__header"},i.default.createElement(u.default,{compact:!0,className:"editor-revisions-list__load-revision",disabled:null===n,onClick:t},o("Load revision in the editor")))};c.propTypes={loadRevision:a.default.func,selectedRevisionId:a.default.number,translate:a.default.func.isRequired},t.default=(0,l.localize)(c),e.exports=t.default},"./client/post-editor/editor-revisions-list/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=o(p),m=n("./node_modules/lodash/map.js"),h=o(m),g=n("./node_modules/react/react.js"),y=o(g),v=n("./node_modules/prop-types/index.js"),b=o(v),_=n("./node_modules/classnames/index.js"),x=o(_),C=n("./node_modules/react-redux/es/index.js"),E=n("./client/post-editor/editor-revisions-list/header.jsx"),w=o(E),j=n("./client/post-editor/editor-revisions-list/item.jsx"),S=o(j),T=n("./client/components/data/query-post-revisions/index.jsx"),P=o(T),k=n("./client/components/data/query-users/index.jsx"),I=o(k),N=n("./client/state/posts/selectors.js"),R=n("./client/state/selectors/get-post-revision.js"),D=o(R),M=n("./client/state/selectors/get-post-revisions.js"),O=o(M),A=n("./client/state/selectors/get-post-revisions-authors-id.js"),L=o(A),F=n("./client/state/ui/selectors.js"),B=n("./client/state/ui/editor/selectors.js"),z=n("./client/lib/viewport/index.js"),U=function(e){function t(){var e,n,o,r;(0,a.default)(this,t);for(var s=arguments.length,l=Array(s),d=0;d<s;d++)l[d]=arguments[d];return n=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.loadRevision=function(){o.props.loadRevision(o.props.selectedRevision)},r=n,(0,c.default)(o,r)}return(0,f.default)(t,e),(0,d.default)(t,[{key:"trySelectingRevision",value:function(){null===this.props.selectedRevisionId&&this.props.revisions.length>0&&(0,z.isWithinBreakpoint)(">660px")&&this.props.selectRevision(this.props.revisions[0].id)}},{key:"componentWillMount",value:function(){this.trySelectingRevision()}},{key:"componentDidMount",value:function(){window.scrollTo(0,0)}},{key:"componentDidUpdate",value:function(){this.trySelectingRevision()}},{key:"render",value:function(){var e=this;return y.default.createElement("div",null,y.default.createElement(P.default,{postId:this.props.postId,postType:this.props.type,siteId:this.props.siteId}),y.default.createElement(I.default,{siteId:this.props.siteId,userIds:this.props.authorsIds}),y.default.createElement(w.default,{loadRevision:this.loadRevision,selectedRevisionId:this.props.selectedRevisionId}),y.default.createElement("ul",{className:"editor-revisions-list__list"},(0,h.default)(this.props.revisions,function(t){var n=(0,x.default)("editor-revisions-list__revision",{"is-selected":t.id===e.props.selectedRevisionId});return y.default.createElement("li",{className:n,key:t.id},y.default.createElement(S.default,{revision:t,selectRevision:e.props.selectRevision}))})))}}]),t}(g.PureComponent);U.propTypes={authorsIds:b.default.array.isRequired,loadRevision:b.default.func.isRequired,postId:b.default.number,revisions:b.default.array.isRequired,selectedRevision:b.default.object,selectedRevisionId:b.default.number,selectRevision:b.default.func.isRequired,siteId:b.default.number,type:b.default.string},t.default=(0,C.connect)(function(e,t){var n=t.selectedRevisionId,o=(0,F.getSelectedSiteId)(e),r=(0,B.getEditorPostId)(e),i=(0,N.getEditedPostValue)(e,o,r,"type");return{authorsIds:(0,L.default)(e,o,r),postId:r,revisions:(0,O.default)(e,o,r,"display"),selectedRevision:(0,D.default)(e,o,r,n,"editing"),siteId:o,type:i}})(U),e.exports=t.default},"./client/post-editor/editor-revisions-list/item.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=o(p),m=n("./node_modules/lodash/isObject.js"),h=o(m),g=n("./node_modules/react/react.js"),y=o(g),v=n("./node_modules/prop-types/index.js"),b=o(v),_=n("./node_modules/i18n-calypso/index.js"),x=n("./client/reader/post-time/index.jsx"),C=o(x),E=function(e){function t(){var e,n,o,r;(0,a.default)(this,t);for(var s=arguments.length,l=Array(s),d=0;d<s;d++)l[d]=arguments[d];return n=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.selectRevision=function(){o.props.selectRevision(o.props.revision.id)},r=n,(0,c.default)(o,r)}return(0,f.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){return y.default.createElement("button",{className:"editor-revisions-list__button",onClick:this.selectRevision,type:"button"},y.default.createElement("span",{className:"editor-revisions-list__date"},y.default.createElement(C.default,{date:this.props.revision.date}))," ",y.default.createElement("span",{className:"editor-revisions-list__author"},(0,h.default)(this.props.revision.author)&&this.props.translate("by %(author)s",{args:{author:this.props.revision.author.display_name}})),y.default.createElement("div",{className:"editor-revisions-list__changes"},this.props.revision.changes.added>0&&y.default.createElement("span",{className:"editor-revisions-list__additions"},this.props.translate("%(changes)d word added","%(changes)d words added",{args:{changes:this.props.revision.changes.added},count:this.props.revision.changes.added})),this.props.revision.changes.added>0&&this.props.revision.changes.removed>0&&", ",this.props.revision.changes.removed>0&&y.default.createElement("span",{className:"editor-revisions-list__deletions"},this.props.translate("%(changes)d word removed","%(changes)d words removed",{args:{changes:this.props.revision.changes.removed},count:this.props.revision.changes.removed})),0===this.props.revision.changes.added&&0===this.props.revision.changes.removed&&y.default.createElement("span",{className:"editor-revisions-list__minor-changes"
},this.props.translate("minor changes"))))}}]),t}(g.PureComponent);E.propTypes={revision:b.default.object.isRequired,selectRevision:b.default.func.isRequired,translate:b.default.func.isRequired},t.default=(0,_.localize)(E),e.exports=t.default},"./client/post-editor/editor-revisions/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=o(p),m=n("./node_modules/react/react.js"),h=o(m),g=n("./node_modules/prop-types/index.js"),y=o(g),v=n("./node_modules/gridicons/build/index.js"),b=o(v),_=n("./node_modules/i18n-calypso/index.js"),x=n("./client/config/index.js"),C=n("./client/post-editor/editor-sidebar/constants.js"),E=function(e){function t(){var e,n,o,r;(0,a.default)(this,t);for(var s=arguments.length,l=Array(s),d=0;d<s;d++)l[d]=arguments[d];return n=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.showRevisionsNestedSidebar=function(){o.props.selectRevision(null),o.props.setNestedSidebar(C.NESTED_SIDEBAR_REVISIONS)},r=n,(0,c.default)(o,r)}return(0,f.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){var e=this.props,t=e.adminUrl,n=e.revisions,o=e.translate;if(!n||!n.length)return null;if((0,x.isEnabled)("post-editor/revisions"))return h.default.createElement("button",{className:"editor-revisions",title:o("Open list of revisions"),onClick:this.showRevisionsNestedSidebar},h.default.createElement(b.default,{icon:"history",size:18}),o("%(revisions)d revision","%(revisions)d revisions",{count:n.length,args:{revisions:n.length}}));var r=n[0],i=t+"revision.php?revision="+r;return h.default.createElement("a",{className:"editor-revisions",href:i,target:"_blank",rel:"noopener noreferrer","aria-label":o("Open list of revisions")},h.default.createElement(b.default,{icon:"history",size:18}),o("%(revisions)d revision","%(revisions)d revisions",{count:n.length,args:{revisions:n.length}}))}}]),t}(m.Component);E.propTypes={adminUrl:y.default.string,revisions:y.default.array,translate:y.default.func,setNestedSidebar:y.default.func.isRequired,selectRevision:y.default.func.isRequired},t.default=(0,_.localize)(E),e.exports=t.default},"./client/post-editor/editor-sidebar/constants.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.NestedSidebarPropType=t.NESTED_SIDEBAR_REVISIONS=t.NESTED_SIDEBAR_NONE=void 0;var r=n("./node_modules/prop-types/index.js"),i=o(r),s=t.NESTED_SIDEBAR_NONE="NESTED_SIDEBAR_NONE",a=t.NESTED_SIDEBAR_REVISIONS="NESTED_SIDEBAR_REVISIONS";t.NestedSidebarPropType=i.default.oneOf([s,a])},"./client/post-editor/editor-sidebar/header.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/react/react.js"),i=o(r),s=n("./node_modules/prop-types/index.js"),a=o(s),l=n("./node_modules/i18n-calypso/index.js"),d=n("./node_modules/gridicons/build/index.js"),u=o(d),c=n("./client/components/button/index.jsx"),p=o(c),f=n("./client/post-editor/editor-post-type/index.jsx"),m=o(f),h=n("./client/post-editor/editor-sidebar/constants.js"),g=function(e){var t=e.nestedSidebar,n=void 0===t?h.NESTED_SIDEBAR_NONE:t,o=e.toggleSidebar,r=e.translate;return i.default.createElement("div",{className:"editor-sidebar__header"},n===h.NESTED_SIDEBAR_REVISIONS&&i.default.createElement("span",null,i.default.createElement(p.default,{borderless:!0,className:"editor-sidebar__header-title",onClick:o,title:r("Close sidebar")},i.default.createElement(m.default,{isSettings:!0})),i.default.createElement("span",null,"→ ",r("Revisions"))),n===h.NESTED_SIDEBAR_NONE&&i.default.createElement(m.default,{isSettings:!0}),i.default.createElement(p.default,{compact:!0,borderless:!0,className:"editor-sidebar__back",onClick:o,title:r("Close sidebar")},i.default.createElement(u.default,{icon:"cross"})))};g.propTypes={translate:a.default.func.isRequired,toggleSidebar:a.default.func,nestedSidebar:h.NestedSidebarPropType},t.default=(0,l.localize)(g),e.exports=t.default},"./client/post-editor/editor-sidebar/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=o(p),m=n("./node_modules/react/react.js"),h=o(m),g=n("./node_modules/prop-types/index.js"),y=o(g),v=n("./node_modules/classnames/index.js"),b=o(v),_=n("./client/post-editor/editor-drawer/index.jsx"),x=o(_),C=n("./client/post-editor/editor-sidebar/header.jsx"),E=o(C),w=n("./client/layout/sidebar/footer.jsx"),j=o(w),S=n("./client/layout/sidebar/region.jsx"),T=o(S),P=n("./client/post-editor/editor-action-bar/index.jsx"),k=o(P),I=n("./client/post-editor/editor-delete-post/index.jsx"),N=o(I),R=n("./client/post-editor/editor-revisions-list/index.jsx"),D=o(R),M=n("./client/post-editor/editor-sidebar/constants.js"),O=function(e){function t(){var e,n,o,r;(0,a.default)(this,t);for(var s=arguments.length,l=Array(s),d=0;d<s;d++)l[d]=arguments[d];return n=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.headerToggleSidebar=function(){o.props.nestedSidebar===M.NESTED_SIDEBAR_NONE?o.props.toggleSidebar():o.props.setNestedSidebar(M.NESTED_SIDEBAR_NONE)},r=n,(0,c.default)(o,r)}return(0,f.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){var e=this.props,t=e.isNew,n=e.onTrashingPost,o=e.onPublish,r=e.onSave,i=e.post,s=e.savedPost,a=e.site,l=e.type,d=e.setPostDate,u=e.isPostPrivate,c=e.confirmationSidebarStatus,p=e.nestedSidebar,f=e.setNestedSidebar,m=e.loadRevision,g=e.selectedRevisionId,y=e.selectRevision,v=(0,b.default)("editor-sidebar",{"is-nested-sidebar-focused":p!==M.NESTED_SIDEBAR_NONE});return h.default.createElement("div",{className:v},h.default.createElement(E.default,{nestedSidebar:p,toggleSidebar:this.headerToggleSidebar}),h.default.createElement(k.default,{isNew:t,post:i,savedPost:s,site:a,type:l}),h.default.createElement(T.default,{className:"editor-sidebar__parent-region"},h.default.createElement(x.default,{site:a,savedPost:s,post:i,isNew:t,type:l,setPostDate:d,onPrivatePublish:o,onSave:r,isPostPrivate:u,confirmationSidebarStatus:c,setNestedSidebar:f,selectRevision:y})),h.default.createElement(T.default,{className:"editor-sidebar__nested-region"},p===M.NESTED_SIDEBAR_REVISIONS&&h.default.createElement(D.default,{loadRevision:m,selectedRevisionId:g,selectRevision:y})),h.default.createElement(j.default,null,p===M.NESTED_SIDEBAR_NONE&&h.default.createElement(N.default,{post:i,onTrashingPost:n})))}}]),t}(m.Component);O.propTypes={savedPost:y.default.object,post:y.default.object,isNew:y.default.bool,onSave:y.default.func,onPublish:y.default.func,onTrashingPost:y.default.func,site:y.default.object,type:y.default.string,toggleSidebar:y.default.func,setPostDate:y.default.func,isPostPrivate:y.default.bool,confirmationSidebarStatus:y.default.string,nestedSidebar:M.NestedSidebarPropType,setNestedSidebar:y.default.func,loadRevision:y.default.func,selectedRevisionId:y.default.number,selectRevision:y.default.func},t.default=O,e.exports=t.default},"./client/post-editor/editor-slug/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=o(p),m=n("./node_modules/react-dom/index.js"),h=o(m),g=n("./node_modules/react/react.js"),y=o(g),v=n("./node_modules/react-redux/es/index.js"),b=n("./node_modules/i18n-calypso/index.js"),_=n("./node_modules/classnames/index.js"),x=o(_),C=n("./client/components/track-input-changes/index.jsx"),E=o(C),w=n("./client/components/forms/form-text-input/index.jsx"),j=o(w),S=n("./client/lib/posts/stats.js"),T=n("./client/state/ui/selectors.js"),P=n("./client/state/ui/editor/selectors.js"),k=n("./client/state/posts/selectors.js"),I=n("./client/state/posts/actions.js"),N=function(e){function t(){(0,a.default)(this,t);var e=(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments));return e.state={isSlugFocused:!1},e.onSlugKeyDown=e.onSlugKeyDown.bind(e),e.onSlugChange=e.onSlugChange.bind(e),e.onBlur=e.onBlur.bind(e),e.onFocus=e.onFocus.bind(e),e.focusSlug=e.focusSlug.bind(e),e.recordChangeStats=e.recordChangeStats.bind(e),e.statTracked=!1,e}return(0,f.default)(t,e),(0,d.default)(t,[{key:"onSlugChange",value:function(e){var t=this.props,n=t.siteId,o=t.postId;this.props.editPost(n,o,{slug:e.target.value})}},{key:"onSlugKeyDown",value:function(e){if("Enter"===e.key||"Escape"===e.key){var t=this.props,n=t.onEscEnter,o=t.isEditable;this.setState({isSlugFocused:!1},function(){n(),o&&h.default.findDOMNode(this.refs.slugField).blur()})}}},{key:"onBlur",value:function(){this.state.isSlugFocused&&this.setState({isSlugFocused:!1})}},{key:"onFocus",value:function(){this.setState({isSlugFocused:!0})}},{key:"focusSlug",value:function(){this.props.isEditable&&h.default.findDOMNode(this.refs.slugField).focus()}},{key:"recordChangeStats",value:function(){switch(this.props.instanceName){case"post-sidebar":(0,S.recordStat)("slug-edited-post-sidebar"),(0,S.recordEvent)("Slug Edited (Post Sidebar)");break;case"post-popover":(0,S.recordStat)("slug-edited-post-popover"),(0,S.recordEvent)("Slug Edited (Post Permalink Popover)");break;case"page-sidebar":(0,S.recordStat)("slug-edited-page-sidebar"),(0,S.recordEvent)("Slug Edited (Page Sidebar)");break;case"page-permalink":(0,S.recordStat)("slug-edited-page-permalink"),(0,S.recordEvent)("Slug Edited (Page Permalink)")}}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.translate,o=e.slug,r=e.children,i=e.path,s=e.isEditable,a=(0,x.default)("editor-slug",t,{"is-focused":this.state.isSlugFocused});return y.default.createElement("div",{className:a,onClick:this.focusSlug},r,y.default.createElement("span",{className:"editor-slug__url-path",onClick:this.focusSlug},i),s&&y.default.createElement(E.default,{onNewValue:this.recordChangeStats},y.default.createElement(j.default,{ref:"slugField",value:o,onChange:this.onSlugChange,onKeyDown:this.onSlugKeyDown,onBlur:this.onBlur,onFocus:this.onFocus,"aria-label":n("Enter slug")})))}}]),t}(g.Component);N.propTypes={path:g.PropTypes.string,slug:g.PropTypes.string,onEscEnter:g.PropTypes.func,className:g.PropTypes.string,isEditable:g.PropTypes.bool,instanceName:g.PropTypes.string,translate:g.PropTypes.func,siteId:g.PropTypes.number,postId:g.PropTypes.number},N.defaultProps={onEscEnter:function(){},isEditable:!0,slug:""},t.default=(0,v.connect)(function(e){var t=(0,T.getSelectedSiteId)(e),n=(0,P.getEditorPostId)(e),o=(0,k.getEditedPostSlug)(e,t,n);return{siteId:t,postId:n,slug:o}},{editPost:I.editPost})((0,b.localize)(N)),e.exports=t.default},"./client/post-editor/editor-status-label/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/react/react.js"),i=o(r),s=n("./node_modules/react-pure-render/mixin.js"),a=o(s),l=n("./node_modules/classnames/index.js"),d=o(l),u=n("./node_modules/gridicons/build/index.js"),c=o(u),p=n("./client/lib/posts/utils.js"),f=o(p),m=n("./client/post-editor/editor-status-label/placeholder.jsx"),h=o(m);t.default=i.default.createClass({displayName:"StatusLabel",propTypes:{onClick:i.default.PropTypes.func,post:i.default.PropTypes.object,type:i.default.PropTypes.string,advancedStatus:i.default.PropTypes.bool},mixins:[a.default],getDefaultProps:function(){return{onClick:null,post:null,advancedStatus:!1,type:"post"}},getInitialState:function(){return{currentTime:Date.now()}},componentDidMount:function(){this.currentTimeTimer=setInterval(this.updateCurrentTime,6e4)},componentWillReceiveProps:function(e){e.post!==this.props.post&&this.updateCurrentTime()},componentWillUnmount:function(){clearInterval(this.currentTimeTimer)},render:function(){var e="editor-status-label";return this.props.post?(e=(0,d.default)(e,"is-"+this.props.post.status),this.props.onClick?i.default.createElement("button",{className:e,onClick:this.props.onClick,ref:"statusLabel","aria-label":this.translate("Show advanced status details"),"aria-pressed":!!this.props.advancedStatus,role:"alert","aria-live":"polite"},i.default.createElement(c.default,{icon:"cog",size:18}),this.renderLabel()):i.default.createElement("span",{className:(0,d.default)(e,"is-plain")},this.renderLabel())):i.default.createElement(h.default,{className:e})},renderLabel:function(){var e,t=this.props.post,n=this.moment(f.default.getEditedTime(t));if(!t.modified)return this.translate("New Draft");"draft"===t.status&&n.isAfter(this.state.currentTime)&&(n=this.moment(this.state.currentTime));var o=n.from(this.state.currentTime);switch(t.status){case"publish":e=this.translate("{{strong}}Published{{/strong}} %(relativeTimeFromNow)s",{args:{relativeTimeFromNow:o},components:{strong:i.default.createElement("strong",null)}});break;case"private":e=this.translate("{{strong}}Published Privately{{/strong}} %(relativeTimeFromNow)s",{args:{relativeTimeFromNow:o},components:{strong:i.default.createElement("strong",null)}});break;case"draft":e=this.translate("{{strong}}Saved{{/strong}} %(relativeTimeFromNow)s",{args:{relativeTimeFromNow:o},components:{strong:i.default.createElement("strong",null)}});break;case"pending":e=this.translate("{{strong}}Pending Review{{/strong}} %(relativeTimeFromNow)s",{args:{relativeTimeFromNow:o},components:{strong:i.default.createElement("strong",null)}});break;case"future":e=this.translate("{{strong}}Scheduled{{/strong}} %(relativeTimeFromNow)s",{args:{relativeTimeFromNow:o},components:{strong:i.default.createElement("strong",null)}});break;case"trash":e=this.translate("{{strong}}Trashed{{/strong}}",{components:{strong:i.default.createElement("strong",null)}});break;default:e=""}return e},updateCurrentTime:function(){this.setState({currentTime:Date.now()})}}),e.exports=t.default},"./client/post-editor/editor-status-label/placeholder.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=e.translate,n=e.siteId,o=e.typeSlug,r=e.type,i=e.className,s=(0,c.default)("editor-status-label__placeholder",i),a=void 0;return a="post"===o?t("Loading Post…"):"page"===o?t("Loading Page…"):r?t("Loading %(postType)s…",{args:{postType:(0,y.decodeEntities)(r.labels.singular_name)}}):t("Loading…"),l.default.createElement("button",{className:s},"post"!==o&&"page"!==o&&n&&l.default.createElement(b.default,{siteId:n}),l.default.createElement("strong",null,a))}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/babel-runtime/core-js/object/assign.js"),s=o(i),a=n("./node_modules/react/react.js"),l=o(a),d=n("./node_modules/react-redux/es/index.js"),u=n("./node_modules/classnames/index.js"),c=o(u),p=n("./node_modules/i18n-calypso/index.js"),f=n("./client/state/posts/selectors.js"),m=n("./client/state/post-types/selectors.js"),h=n("./client/state/ui/editor/selectors.js"),g=n("./client/state/ui/selectors.js"),y=n("./client/lib/formatting/index.js"),v=n("./client/components/data/query-post-types/index.jsx"),b=o(v);r.propTypes={translate:a.PropTypes.func,siteId:a.PropTypes.number,typeSlug:a.PropTypes.string,type:a.PropTypes.object,className:a.PropTypes.string},t.default=(0,d.connect)(function(e){var t=(0,g.getSelectedSiteId)(e),n={siteId:t},o=(0,f.getEditedPost)(e,t,(0,h.getEditorPostId)(e));return o?(0,s.default)(n,{typeSlug:o.type,type:(0,m.getPostType)(e,t,o.type)}):n})((0,p.localize)(r)),e.exports=t.default},"./client/post-editor/editor-sticky/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/react/react.js"),i=o(r),s=n("./node_modules/classnames/index.js"),a=o(s),l=n("./node_modules/react-redux/es/index.js"),d=n("./node_modules/gridicons/build/index.js"),u=o(d),c=n("./client/components/tooltip/index.jsx"),p=o(c),f=n("./client/components/button/index.jsx"),m=o(f),h=n("./client/lib/posts/stats.js"),g=n("./client/state/posts/actions.js"),y=n("./client/state/ui/selectors.js"),v=n("./client/state/ui/editor/selectors.js"),b=n("./client/state/posts/selectors.js"),_=i.default.createClass({displayName:"EditorSticky",propTypes:{postId:i.default.PropTypes.number,siteId:i.default.PropTypes.number,sticky:i.default.PropTypes.bool},getInitialState:function(){return{tooltip:!1}},toggleStickyStatus:function(){var e=void 0,t=void 0;this.props.sticky?(e="advanced_sticky_disabled_toolbar",t="Off"):(e="advanced_sticky_enabled_toolbar",t="On"),(0,h.recordStat)(e),(0,h.recordEvent)("Changed Sticky Setting",t),this.props.editPost(this.props.siteId,this.props.postId,{sticky:!this.props.sticky}),this.setState({tooltip:!1})},enableTooltip:function(){this.setState({tooltip:!0})},disableTooltip:function(){this.setState({tooltip:!1})},render:function(){var e=(0,a.default)("editor-sticky",{"is-sticky":this.props.sticky});return i.default.createElement(m.default,{borderless:!0,className:e,onClick:this.toggleStickyStatus,onMouseEnter:this.enableTooltip,onMouseLeave:this.disableTooltip,"aria-label":this.translate("Stick post to the front page"),ref:"stickyPostButton"},i.default.createElement(u.default,{icon:"bookmark"}),this.props.sticky&&i.default.createElement(p.default,{className:"editor-sticky__tooltip",context:this.refs&&this.refs.stickyPostButton,isVisible:this.state.tooltip,position:"bottom left"},i.default.createElement("span",null,this.translate("Marked as sticky"))))}});t.default=(0,l.connect)(function(e){var t=(0,v.getEditorPostId)(e),n=(0,y.getSelectedSiteId)(e),o=(0,b.getEditedPostValue)(e,n,t,"sticky");return{postId:t,siteId:n,sticky:o}},{editPost:g.editPost})(_),e.exports=t.default},"./client/post-editor/editor-term-selector/add-term.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=o(p),m=n("./node_modules/lodash/noop.js"),h=o(m),g=n("./node_modules/lodash/get.js"),y=o(g),v=n("./node_modules/react/react.js"),b=o(v),_=n("./node_modules/classnames/index.js"),x=o(_),C=n("./node_modules/react-redux/es/index.js"),E=n("./node_modules/gridicons/build/index.js"),w=o(E),j=n("./client/components/button/index.jsx"),S=o(j),T=n("./client/blocks/term-form-dialog/index.jsx"),P=o(T),k=n("./client/state/ui/selectors.js"),I=n("./client/state/post-types/taxonomies/selectors.js"),N=n("./client/state/terms/selectors.js"),R=function(e){function t(e){(0,a.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return n.openDialog=function(e){e.preventDefault(),n.setState({showDialog:!0})},n.closeDialog=function(){n.setState({showDialog:!1})},n.state={showDialog:!1},n}return(0,f.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){var e=this.props,t=e.labels,n=e.onSuccess,o=e.postType,r=e.terms,i=e.taxonomy,s=r?r.length:0,a=(0,x.default)("editor-term-selector__add-term",{"is-compact":s<8});return b.default.createElement("div",{className:a},b.default.createElement(S.default,{borderless:!0,compact:!0,onClick:this.openDialog},b.default.createElement(w.default,{icon:"folder"})," ",t.add_new_item),b.default.createElement(P.default,{showDialog:this.state.showDialog,onClose:this.closeDialog,postType:o,taxonomy:i,onSuccess:n}))}}]),t}(v.Component);R.propTypes={labels:v.PropTypes.object,onSuccess:v.PropTypes.func,postType:v.PropTypes.string,taxonomy:v.PropTypes.string,terms:v.PropTypes.array},R.defaultProps={onSuccess:h.default},t.default=(0,C.connect)(function(e,t){var n=t.taxonomy,o=t.postType,r=(0,k.getSelectedSiteId)(e),i=(0,I.getPostTypeTaxonomy)(e,r,o,n),s=(0,y.default)(i,"labels",{});return{terms:(0,N.getTerms)(e,r,n),labels:s}})(R),e.exports=t.default},"./client/post-editor/editor-term-selector/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/helpers/defineProperty.js"),i=o(r),s=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/createClass.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),f=o(p),m=n("./node_modules/babel-runtime/helpers/inherits.js"),h=o(m),g=n("./node_modules/lodash/toArray.js"),y=o(g),v=n("./node_modules/lodash/map.js"),b=o(v),_=n("./node_modules/lodash/findIndex.js"),x=o(_),C=n("./node_modules/lodash/cloneDeep.js"),E=o(C),w=n("./node_modules/react/react.js"),j=o(w),S=n("./node_modules/react-redux/es/index.js"),T=n("./client/blocks/term-tree-selector/index.jsx"),P=o(T),k=n("./client/post-editor/editor-term-selector/add-term.jsx"),I=o(k),N=n("./client/state/selectors/can-current-user.js"),R=o(N),D=n("./client/state/posts/actions.js"),M=n("./client/state/ui/selectors.js"),O=n("./client/state/ui/editor/selectors.js"),A=n("./client/state/posts/selectors.js"),L=function(e){function t(e){(0,d.default)(this,t);var n=(0,f.default)(this,(t.__proto__||(0,a.default)(t)).call(this,e));return n.onAddTerm=function(e){var t=n.props,o=t.postId,r=t.taxonomyName,i=t.siteId;n.props.addTermForPost(i,r,e,o)},n.boundOnTermsChange=n.onTermsChange.bind(n),n}return(0,h.default)(t,e),(0,c.default)(t,[{key:"onTermsChange",value:function(e){var t=this.props,n=t.postTerms,o=t.taxonomyName,r=t.siteId,s=t.postId,a=(0,E.default)(n)||{},l=(0,y.default)(a[o]),d=(0,x.default)(l,{ID:e.ID});d!==-1?l.splice(d,1):l.push(e),this.props.editPost(r,s,{terms:(0,i.default)({},o,l)})}},{key:"getSelectedTermIds",value:function(){var e=this.props,t=e.postTerms,n=e.taxonomyName,o=t?t[n]:[];return(0,b.default)(o,"ID")}},{key:"render",value:function(){var e=this.props,t=e.postType,n=e.siteId,o=e.taxonomyName,r=e.canEditTerms,i=e.compact;return j.default.createElement("div",null,j.default.createElement(P.default,{analyticsPrefix:"Editor",onChange:this.boundOnTermsChange,selected:this.getSelectedTermIds(),taxonomy:o,siteId:n,multiple:!0,compact:i}),r&&j.default.createElement(I.default,{taxonomy:o,postType:t,onSuccess:this.onAddTerm}))}}]),t}(w.Component);L.propTypes={siteId:w.PropTypes.number,postId:w.PropTypes.number,postTerms:w.PropTypes.object,postType:w.PropTypes.string,taxonomyName:w.PropTypes.string,canEditTerms:w.PropTypes.bool,compact:w.PropTypes.bool},t.default=(0,S.connect)(function(e){var t=(0,M.getSelectedSiteId)(e),n=(0,O.getEditorPostId)(e);return{postType:(0,A.getEditedPostValue)(e,t,(0,O.getEditorPostId)(e),"type"),postTerms:(0,A.getEditedPostValue)(e,t,n,"terms"),canEditTerms:(0,R.default)(e,t,"manage_categories"),siteId:t,postId:n}},{editPost:D.editPost,addTermForPost:D.addTermForPost})(L),e.exports=t.default},"./client/post-editor/editor-theme-help/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=o(p),m=n("./node_modules/react/react.js"),h=o(m),g=n("./node_modules/react-redux/es/index.js"),y=n("./node_modules/i18n-calypso/index.js"),v=n("./client/state/ui/selectors.js"),b=n("./client/state/sites/selectors.js"),_=n("./client/lib/posts/stats.js"),x=function(e){function t(e){(0,a.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return n.recordClick=n.recordClick.bind(n),n}return(0,f.default)(t,e),(0,d.default)(t,[{key:"recordClick",value:function(){(0,_.recordStat)("clicked_theme_help_link")}},{key:"render",value:function(){var e=this.props,t=e.translate,n=e.themeHelpPath,o=e.className;return n?h.default.createElement("a",{className:o,href:n,onClick:this.recordClick},t("Need help setting up your site?")):null}}]),t}(m.PureComponent);x.propTypes={themeHelpPath:m.PropTypes.string,classname:m.PropTypes.string},t.default=(0,g.connect)(function(e){var t=(0,v.getSelectedSiteId)(e);return{themeHelpPath:(0,b.getSiteThemeShowcasePath)(e,t)}})((0,y.localize)(x)),e.exports=t.default},"./client/post-editor/editor-title/index.jsx":function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),s=r(i),a=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),l=r(a),d=n("./node_modules/babel-runtime/helpers/createClass.js"),u=r(d),c=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),p=r(c),f=n("./node_modules/babel-runtime/helpers/inherits.js"),m=r(f),h=n("./node_modules/react/react.js"),g=r(h),y=n("./node_modules/react-redux/es/index.js"),v=n("./node_modules/react-dom/index.js"),b=r(v),_=n("./node_modules/classnames/index.js"),x=r(_),C=n("./node_modules/i18n-calypso/index.js"),E=n("./client/lib/posts/utils.js"),w=r(E),j=n("./client/post-editor/editor-permalink/index.jsx"),S=r(j),T=n("./client/components/track-input-changes/index.jsx"),P=r(T),k=n("./client/components/textarea-autosize/index.jsx"),I=r(k),N=n("./client/lib/viewport/index.js"),R=n("./client/lib/posts/stats.js"),D=o(R),M=n("./client/state/ui/selectors.js"),O=n("./client/state/selectors/are-site-permalinks-editable.js"),A=r(O),L=n("./client/state/ui/editor/selectors.js"),F=n("./client/state/posts/selectors.js"),B=n("./client/state/posts/actions.js"),z=/[\r\n]+/g,U=function(e){function t(){var e,n,o,r;(0,l.default)(this,t);for(var i=arguments.length,a=Array(i),d=0;d<i;d++)a[d]=arguments[d];return n=o=(0,p.default)(this,(e=t.__proto__||(0,s.default)(t)).call.apply(e,[this].concat(a))),o.onChange=function(e){var t=o.props,n=t.siteId,r=t.editedPostId,i=e.target.value.replace(z," ");o.props.editPost(n,r,{title:i}),o.props.onChange(i)},o.resizeAfterNewlineInput=function(e){var t=e.target.value;z.test(t)&&(e.target.value=t.replace(z," "),o.refs.titleInput.resize())},o.recordChangeStats=function(){var e=w.default.isPage(o.props.post);D.recordStat(e?"page_title_changed":"post_title_changed"),D.recordEvent(e?"Changed Page Title":"Changed Post Title")},r=n,(0,p.default)(o,r)}return(0,m.default)(t,e),(0,u.default)(t,[{key:"componentDidUpdate",value:function(e){if(!(0,N.isMobile)()){var t=this.props,n=t.isNew,o=t.siteId;if(n&&!e.isNew||n&&e.siteId!==o){var r=b.default.findDOMNode(this.refs.titleInput);r.focus()}}}},{key:"render",value:function(){var e=this.props,t=e.post,n=e.isPermalinkEditable,o=e.isNew,r=e.tabIndex,i=e.translate,s=(0,x.default)("editor-title",{"is-loading":!t});return g.default.createElement("div",{className:s},t&&t.ID&&!w.default.isPage(t)&&g.default.createElement(S.default,{path:n?w.default.getPermalinkBasePath(t):t.URL,isEditable:n}),g.default.createElement(P.default,{onNewValue:this.recordChangeStats},g.default.createElement(I.default,{tabIndex:r,className:"editor-title__input",placeholder:i("Title"),onChange:this.onChange,onInput:this.resizeAfterNewlineInput,onBlur:this.onBlur,autoFocus:o&&!(0,N.isMobile)(),value:t&&t.title?t.title:"","aria-label":i("Edit title"),ref:"titleInput",rows:"1"})))}}]),t}(h.Component);U.propTypes={editPost:h.PropTypes.func,isNew:h.PropTypes.bool,onChange:h.PropTypes.func,post:h.PropTypes.object,site:h.PropTypes.object,siteId:h.PropTypes.number,tabIndex:h.PropTypes.number,translate:h.PropTypes.func},U.defaultProps={isNew:!0,onChange:function(){}},t.default=(0,y.connect)(function(e){var t=(0,M.getSelectedSiteId)(e),n=(0,A.default)(e,t),o=(0,L.getEditorPostId)(e),r=(0,F.getEditedPost)(e,t,o),i=(0,L.isEditorNewPost)(e);return{editedPostId:o,isPermalinkEditable:n,isNew:i,post:r,siteId:t}},{editPost:B.editPost})((0,C.localize)(U)),e.exports=t.default},"./client/post-editor/editor-visibility/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/lodash/find.js"),i=o(r),s=n("./node_modules/react-dom/index.js"),a=o(s),l=n("./node_modules/react/react.js"),d=o(l),u=n("./node_modules/classnames/index.js"),c=o(u),p=n("./node_modules/gridicons/build/index.js"),f=o(p),m=n("./node_modules/react-redux/es/index.js"),h=n("./node_modules/i18n-calypso/index.js"),g=n("./client/components/forms/form-fieldset/index.jsx"),y=o(g),v=n("./client/components/forms/form-input-validation/index.jsx"),b=o(v),_=n("./client/components/forms/form-text-input/index.jsx"),x=o(_),C=n("./client/components/select-dropdown/index.jsx"),E=o(C),w=n("./client/components/select-dropdown/item.jsx"),j=o(w),S=n("./client/lib/touch-detect/index.js"),T=o(S),P=n("./client/lib/posts/actions.js"),k=o(P),I=n("./client/lib/posts/stats.js"),N=n("./client/lib/analytics/index.js"),R=n("./client/lib/accept/index.js"),D=o(R),M=n("./client/state/posts/actions.js"),O=n("./client/state/ui/selectors.js"),A=n("./client/state/ui/editor/selectors.js"),L=d.default.createClass({displayName:"EditorVisibility",showingAcceptDialog:!1,getDefaultProps:function(){return{isPrivateSite:!1}},propTypes:{context:d.default.PropTypes.string,onPrivatePublish:d.default.PropTypes.func,isPrivateSite:d.default.PropTypes.bool,type:d.default.PropTypes.string,status:d.default.PropTypes.string,password:d.default.PropTypes.string,savedStatus:d.default.PropTypes.string,savedPassword:d.default.PropTypes.string,siteId:d.default.PropTypes.number,postId:d.default.PropTypes.number},getInitialState:function(){return{passwordIsValid:!0}},componentWillReceiveProps:function(e){if(this.props.password!==e.password){var t=this.props.password+"",n=e.password+"",o=""===t&&" "===n,r=n.trim().length>0,i=o||r;this.setState({passwordIsValid:i})}},getVisibility:function(){return this.props.password?"password":"private"===this.props.status?"private":"public"},isPasswordValid:function(){if("password"!==this.getVisibility())return!0;var e=a.default.findDOMNode(this.refs.postPassword).value.trim();return e.length},updatePostStatus:function(){var e="draft"===this.props.status?"draft":"publish",t={status:e};k.default.edit(t)},updateVisibility:function(e){var t=this.props,n=t.siteId,o=t.postId,r=void 0;switch(e){case"public":r={password:""};break;case"password":r={password:this.props.savedPassword||" ",sticky:!1},this.setState({passwordIsValid:!0})}(0,I.recordStat)("visibility-set-"+e),(0,I.recordEvent)("Changed visibility",e),
N.tracks.recordEvent("calypso_editor_visibility_set",{context:this.props.context,visibility:e}),this.updatePostStatus(),r&&this.props.editPost(n,o,r)},setPostToPrivate:function(){var e=this.props,t=e.siteId,n=e.postId;k.default.edit({status:"private"}),this.props.editPost(t,n,{password:"",sticky:!1}),(0,I.recordStat)("visibility-set-private"),(0,I.recordEvent)("Changed visibility","private"),N.tracks.recordEvent("calypso_editor_visibility_set",{context:this.props.context,visibility:"private"})},onPrivatePublish:function(){var e=this;this.setPostToPrivate(),setTimeout(function(){return e.props.onPrivatePublish(!0)},0)},onSetToPrivate:function(){var e=this;if("private"===this.props.savedStatus)return void this.setPostToPrivate();this.showingAcceptDialog=!0;var t=void 0;t="page"===this.props.type?this.props.translate("Private pages are only visible to administrators and editors of this site. Would you like to privately publish this page now?"):this.props.translate("Private posts are only visible to administrators and editors of this site. Would you like to privately publish this post now?"),(0,D.default)(t,function(t){e.showingAcceptDialog=!1,t&&e.onPrivatePublish()},this.props.translate("Yes"),this.props.translate("No"))},onPasswordChange:function(e){var t=this.props,n=t.siteId,o=t.postId,r=e.target.value.trim(),i=r.length>0;this.setState({passwordIsValid:i}),i||(r=" "),this.props.editPost(n,o,{password:r})},renderPasswordInput:function(){var e=this.props.password?this.props.password.trim():null,t=!this.state.passwordIsValid,n=this.props.translate("Password is empty.",{context:"Editor: Error shown when password is empty."});return d.default.createElement("div",null,d.default.createElement(x.default,{autoFocus:!0,onKeyUp:this.onKey,onChange:this.onPasswordChange,onBlur:this.onPasswordChange,value:e,isError:t,ref:"postPassword",placeholder:this.props.translate("Create password",{context:"Editor: Create password for post"})}),t?d.default.createElement(b.default,{isError:!0,text:n}):null)},renderPrivacyDropdown:function(e){var t=this,n=[{label:this.props.translate("Public",{context:"Editor: Radio label to set post visible to public"}),icon:d.default.createElement(f.default,{icon:"globe",size:18}),value:"public",onClick:function(){t.updateVisibility("public")}},{label:this.props.translate("Private",{context:"Editor: Radio label to set post to private"}),icon:d.default.createElement(f.default,{icon:"user",size:18}),value:"private",onClick:this.onSetToPrivate},{label:this.props.translate("Password Protected",{context:"Editor: Radio label to set post to password protected"}),icon:d.default.createElement(f.default,{icon:"lock",size:18}),value:"password",onClick:function(){t.updateVisibility("password")}}],o=(0,i.default)(n,["value",e]);return d.default.createElement("div",{className:"editor-visibility__dropdown"},d.default.createElement(y.default,{className:"editor-fieldset"},d.default.createElement(E.default,{selectedText:o?o.label:this.props.translate("Select an option"),selectedIcon:o.icon},n.map(function(t){return d.default.createElement(j.default,{selected:t.value===e,key:t.value,value:t.value,onClick:t.onClick,icon:t.icon},t.label)})),"password"===e?this.renderPasswordInput():null))},render:function(){var e=this.getVisibility(),t=(0,c.default)("editor-visibility",{"is-touch":T.default.hasTouch()});return d.default.createElement("div",{className:t},this.renderPrivacyDropdown(e))}});t.default=(0,m.connect)(function(e){var t=(0,O.getSelectedSiteId)(e),n=(0,A.getEditorPostId)(e);return{siteId:t,postId:n}},{editPost:M.editPost})((0,h.localize)(L)),e.exports=t.default},"./client/post-editor/editor-word-count/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.EditorWordCount=void 0;var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=o(p),m=n("./node_modules/react/react.js"),h=o(m),g=n("./node_modules/i18n-calypso/index.js"),y=n("./client/lib/posts/post-edit-store.js"),v=o(y),b=n("./client/lib/user/index.js"),_=o(b),x=n("./client/lib/text-utils/index.js"),C=(0,_.default)(),E=t.EditorWordCount=function(e){function t(){var e,n,o,r;(0,a.default)(this,t);for(var s=arguments.length,l=Array(s),d=0;d<s;d++)l[d]=arguments[d];return n=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.state={rawContent:""},o.onRawContentChange=function(){o.setState({rawContent:v.default.getRawContent()})},o.getSelectedTextCount=function(){var e=(0,x.countWords)(o.props.selectedText);return e?o.props.translate("%(selectedText)s word selected {{span}}%(separator)s{{/span}}","%(selectedText)s words selected {{span}}%(separator)s{{/span}}",{count:e,args:{selectedText:e,separator:"/ "},components:{span:h.default.createElement("span",{className:"editor-word-count__separator"})}}):null},r=n,(0,c.default)(o,r)}return(0,f.default)(t,e),(0,d.default)(t,[{key:"componentWillMount",value:function(){v.default.on("rawContentChange",this.onRawContentChange)}},{key:"componentDidMount",value:function(){this.onRawContentChange()}},{key:"componentWillUnmount",value:function(){v.default.removeListener("rawContentChange",this.onRawContentChange)}},{key:"render",value:function(){var e=C.get(),t=e&&e.localeSlug||"en";switch(t){case"ja":case"th":case"zh-cn":case"zh-hk":case"zh-sg":case"zh-tw":return null;case"ko":return null}var n=(0,x.countWords)(this.state.rawContent);return h.default.createElement("div",{className:"editor-word-count"},h.default.createElement("span",{className:"editor-word-count__is-selected-text"},h.default.createElement("strong",null,this.getSelectedTextCount())),this.props.translate("%d word","%d words",{count:n,args:[n]}))}}]),t}(m.PureComponent);E.propTypes={selectedText:h.default.PropTypes.string},t.default=(0,g.localize)(E)},"./client/post-editor/index.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var r=n("./client/config/index.js"),i=o(r),s=n("./node_modules/page/index.js"),a=n("./client/my-sites/controller.js"),l=n("./client/post-editor/controller.js");e.exports=function(){s("/post",l.pressThis,a.siteSelection,a.sites),s("/post/new",function(){return s.redirect("/post")}),s("/post/:site?/:post?",a.siteSelection,l.post),s.exit("/post/:site?/:post?",l.exitPost),s("/page",a.siteSelection,a.sites),s("/page/new",function(){return s.redirect("/page")}),s("/page/:site?/:post?",a.siteSelection,l.post),s.exit("/page/:site?/:post?",l.exitPost),i.default.isEnabled("manage/custom-post-types")&&(s("/edit/:type",a.siteSelection,a.sites),s("/edit/:type/new",function(e){return s.redirect("/edit/"+e.params.type)}),s("/edit/:type/:site?/:post?",a.siteSelection,l.post),s.exit("/edit/:type/:site?/:post?",l.exitPost))}},"./client/post-editor/invalid-url-dialog.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/lodash/startsWith.js"),i=o(r),s=n("./node_modules/lodash/noop.js"),a=o(s),l=n("./node_modules/react/react.js"),d=o(l),u=n("./node_modules/page/index.js"),c=o(u),p=n("./client/components/dialog/index.jsx"),f=o(p),m=n("./client/components/forms/form-button/index.jsx"),h=o(m),g=n("./client/lib/route/path.js");t.default=d.default.createClass({displayName:"EditorTrashedDialog",getInitialState:function(){return{isPage:this.isPage()}},isPage:function(){return(0,i.default)(c.default.current,"/page/")},getDefaultProps:function(){return{onClose:a.default,onSave:a.default}},propTypes:{onClose:d.default.PropTypes.func,onSave:d.default.PropTypes.func},getDialogButtons:function(){var e=this.state.isPage?this.translate("New Page"):this.translate("New Post");return[d.default.createElement(h.default,{key:"startNewPage",isPrimary:!0,onClick:this.startNewPage},e),d.default.createElement(h.default,{key:"back",isPrimary:!1,onClick:this.props.onClose},this.translate("Close"))]},startNewPage:function(){var e=(0,g.getSiteFragment)(c.default.current),t=this.state.isPage?"/page/":"/post/";(0,c.default)(t+e)},getStrings:function(e){return e?{dialogTitle:this.translate("Invalid Page Address"),dialogContent:this.translate("This page cannot be found. Check the web address or start a new page.")}:{dialogTitle:this.translate("Invalid Post Address"),dialogContent:this.translate("This post cannot be found. Check the web address or start a new post.")}},render:function(){var e=this.getStrings(this.state.isPage);return d.default.createElement(f.default,{isVisible:!0,buttons:this.getDialogButtons()},d.default.createElement("h1",null,e.dialogTitle),d.default.createElement("p",null,e.dialogContent))}}),e.exports=t.default},"./client/post-editor/media-modal/detail/detail-fields.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/helpers/defineProperty.js"),i=o(r),s=n("./node_modules/babel-runtime/core-js/object/assign.js"),a=o(s),l=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/createClass.js"),f=o(p),m=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),h=o(m),g=n("./node_modules/babel-runtime/helpers/inherits.js"),y=o(g),v=n("./node_modules/lodash/get.js"),b=o(v),_=n("./node_modules/lodash/debounce.js"),x=o(_),C=n("./node_modules/react-dom/index.js"),E=o(C),w=n("./node_modules/react/react.js"),j=o(w),S=n("./node_modules/i18n-calypso/index.js"),T=n("./client/lib/analytics/index.js"),P=o(T),k=n("./client/lib/media/utils.js"),I=o(k),N=n("./client/lib/media/actions.js"),R=o(N),D=n("./client/components/clipboard-button-input/index.jsx"),M=o(D),O=n("./client/components/forms/form-textarea/index.jsx"),A=o(O),L=n("./client/components/forms/form-text-input/index.jsx"),F=o(L),B=n("./client/components/track-input-changes/index.jsx"),z=o(B),U=n("./client/post-editor/media-modal/fieldset.jsx"),H=o(U),W=function(e){function t(){(0,c.default)(this,t);var e=(0,h.default)(this,(t.__proto__||(0,d.default)(t)).apply(this,arguments));return e.bumpTitleStat=function(){P.default.ga.recordEvent("Media","Changed Item Title"),P.default.mc.bumpStat("calypso_media_edit_details","title")},e.bumpAltStat=function(){P.default.ga.recordEvent("Media","Changed Image Alt"),P.default.mc.bumpStat("calypso_media_edit_details","alt")},e.bumpCaptionStat=function(){P.default.ga.recordEvent("Media","Changed Item Caption"),P.default.mc.bumpStat("calypso_media_edit_details","caption")},e.bumpDescriptionStat=function(){P.default.ga.recordEvent("Media","Changed Item Description"),P.default.mc.bumpStat("calypso_media_edit_details","description")},e.setFieldValue=function(t){var n=t.target,o=(0,a.default)({ID:e.props.item.ID},(0,b.default)(e.state,"modifiedItem",{}),(0,i.default)({},n.name,n.value));e.setState({modifiedItem:o}),e.persistChange()},e.scrollToShowVisibleDropdown=function(e){e.open&&"scrollIntoView"in window.Element.prototype&&E.default.findDOMNode(e.target).scrollIntoView()},e.persistChange=(0,x.default)(e.persistChange,1e3),e}return(0,y.default)(t,e),(0,f.default)(t,[{key:"componentWillReceiveProps",value:function(e){this.props.item&&e.item&&e.item.ID!==this.props.item.ID&&(this.setState({modifiedItem:null}),this.persistChange.cancel())}},{key:"isMimePrefix",value:function(e){return I.default.getMimePrefix(this.props.item)===e}},{key:"persistChange",value:function(){this.props.site&&this.state.modifiedItem&&R.default.update(this.props.site.ID,this.state.modifiedItem)}},{key:"getItemValue",value:function(e){var t=(0,b.default)(this.state,["modifiedItem",e],null);return null!==t?t:this.props.item?this.props.item[e]:void 0}},{key:"renderImageAltText",value:function(){return this.isMimePrefix("image")?j.default.createElement(H.default,{legend:this.props.translate("Alt text")},j.default.createElement(z.default,{onNewValue:this.bumpAltStat},j.default.createElement(F.default,{name:"alt",value:this.getItemValue("alt"),onChange:this.setFieldValue}))):null}},{key:"render",value:function(){var e=this.props.translate;return j.default.createElement("div",{className:"editor-media-modal-detail__fields"},j.default.createElement(H.default,{legend:e("Title")},j.default.createElement(z.default,{onNewValue:this.bumpTitleStat},j.default.createElement(F.default,{name:"title",value:this.getItemValue("title"),onChange:this.setFieldValue}))),j.default.createElement(H.default,{legend:e("Caption")},j.default.createElement(z.default,{onNewValue:this.bumpCaptionStat},j.default.createElement(A.default,{name:"caption",value:this.getItemValue("caption"),onChange:this.setFieldValue}))),this.renderImageAltText(),j.default.createElement(H.default,{legend:e("Description")},j.default.createElement(z.default,{onNewValue:this.bumpDescriptionStat},j.default.createElement(A.default,{name:"description",value:this.getItemValue("description"),onChange:this.setFieldValue}))),j.default.createElement(H.default,{legend:e("URL")},j.default.createElement(M.default,{value:I.default.url(this.props.item)})))}}]),t}(w.Component);W.propTypes={site:w.PropTypes.object,item:w.PropTypes.object},t.default=(0,S.localize)(W),e.exports=t.default},"./client/post-editor/media-modal/detail/detail-file-info.jsx":function(e,t,n){"use strict";var o=n("./node_modules/react/react.js"),r=n("./node_modules/react-addons-create-fragment/index.js"),i=n("./node_modules/classnames/index.js"),s=n("./client/lib/media/utils.js");e.exports=o.createClass({displayName:"EditorMediaModalDetailFileInfo",propTypes:{item:o.PropTypes.object},getItemValue:function(e){var t=void 0;if(!this.props.item)return this.translate("Loading…");switch(e){case"extension":t=(this.props.item[e]||"").toUpperCase();break;case"dimensions":t=r({width:o.createElement("abbr",{title:this.translate("Width in pixels")},this.props.item.width),separator:" ✕ ",height:o.createElement("abbr",{title:this.translate("Height in pixels")},this.props.item.height)});break;case"date":t=this.moment(this.props.item[e]).format("D MMMM YYYY");break;case"length":t=s.playtime(this.props.item[e]);break;default:t=this.props.item[e]}return t},renderDimensions:function(){if(this.props.item&&(this.props.item.width||this.props.item.height))return o.createElement("tr",null,o.createElement("th",null,this.translate("Dimensions")),o.createElement("td",null,this.getItemValue("dimensions")))},renderDuration:function(){if(this.props.item&&this.props.item.length)return o.createElement("tr",null,o.createElement("th",null,this.translate("Duration")),o.createElement("td",null,this.getItemValue("length")))},render:function(){var e=i("editor-media-modal-detail__file-info",{"is-loading":!this.props.item});return o.createElement("table",{className:e},o.createElement("tbody",null,o.createElement("tr",null,o.createElement("th",null,this.translate("File Name")),o.createElement("td",{title:this.getItemValue("file")},o.createElement("span",null,this.getItemValue("file")))),o.createElement("tr",null,o.createElement("th",null,this.translate("File Type")),o.createElement("td",null,this.getItemValue("extension"))),this.renderDimensions(),this.renderDuration(),o.createElement("tr",null,o.createElement("th",null,this.translate("Upload Date")),o.createElement("td",null,this.getItemValue("date")))))}})},"./client/post-editor/media-modal/detail/detail-item.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=o(p),m=n("./node_modules/lodash/noop.js"),h=o(m),g=n("./node_modules/lodash/includes.js"),y=o(g),v=n("./node_modules/lodash/get.js"),b=o(v),_=n("./node_modules/lodash/flowRight.js"),x=o(_),C=n("./node_modules/react/react.js"),E=o(C),w=n("./node_modules/react-redux/es/index.js"),j=n("./node_modules/classnames/index.js"),S=o(j),T=n("./node_modules/i18n-calypso/index.js"),P=n("./node_modules/url/url.js"),k=o(P),I=n("./node_modules/gridicons/build/index.js"),N=o(I),R=n("./client/post-editor/media-modal/detail/detail-fields.jsx"),D=o(R),M=n("./client/post-editor/media-modal/detail/detail-file-info.jsx"),O=o(M),A=n("./client/post-editor/media-modal/detail/detail-preview-image.jsx"),L=o(A),F=n("./client/post-editor/media-modal/detail/detail-preview-video.jsx"),B=o(F),z=n("./client/post-editor/media-modal/detail/detail-preview-audio.jsx"),U=o(z),H=n("./client/post-editor/media-modal/detail/detail-preview-document.jsx"),W=o(H),V=n("./client/components/button/index.jsx"),q=o(V),G=n("./client/components/data/query-jetpack-modules/index.jsx"),K=o(G),$=n("./client/lib/site/utils.js"),Y=n("./client/lib/version-compare/index.js"),J=o(Y),Z=n("./client/lib/media/utils.js"),X=o(Z),Q=n("./client/config/index.js"),ee=o(Q),te=n("./client/state/ui/selectors.js"),ne=n("./client/state/sites/selectors.js"),oe=n("./client/state/selectors/is-private-site.js"),re=o(oe),ie=function(e,t){return!!e&&(!!ee.default.isEnabled("post-editor/image-editor")&&(!(0,b.default)(t,"is_private")&&(!(0,b.default)(t,"jetpack",!1)||!(0,J.default)((0,b.default)(t,"options.jetpack_version","0.0"),"4.7-alpha","<"))))},se=function(e){function t(){var e,n,o,r;(0,a.default)(this,t);for(var s=arguments.length,l=Array(s),d=0;d<s;d++)l[d]=arguments[d];return n=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.handleOnRestoreClick=function(){var e=o.props,t=e.site,n=e.item,r=e.onRestore;r(t&&t.ID,n)},r=n,(0,c.default)(o,r)}return(0,f.default)(t,e),(0,d.default)(t,[{key:"enableVideoEditing",value:function(e){var t=this.props,n=t.isJetpack,o=t.isVideoPressEnabled,r=t.isVideoPressModuleActive;if(!X.default.isVideoPressItem(e))return!1;if(n){if(!r)return!1}else if(!o)return!1;return!0}},{key:"renderEditButton",value:function(){var e=this.props,t=e.item,n=e.onEdit,o=e.site,r=e.translate;if(!(0,$.userCan)("upload_files",o))return null;if(this.props.isPrivateSite)return null;var i=X.default.getMimePrefix(t);if(!(0,y.default)(["image","video"],i))return null;var s=r("video"===i?"Edit Thumbnail":"Edit Image");return E.default.createElement(q.default,{className:"editor-media-modal-detail__edit",onClick:n,disabled:(0,Z.isItemBeingUploaded)(t)},E.default.createElement(N.default,{icon:"pencil",size:36})," ",s)}},{key:"renderRestoreButton",value:function(){var e=this.props,t=e.item,n=e.translate,o=k.default.parse(t.guid),r=k.default.parse(t.URL);return o.pathname!==r.pathname&&E.default.createElement(q.default,{className:(0,S.default)("editor-media-modal-detail__restore"),onClick:this.handleOnRestoreClick,disabled:(0,Z.isItemBeingUploaded)(t)},E.default.createElement(N.default,{icon:"refresh",size:36}),n("Restore Original"))}},{key:"renderMediaEditorButtons",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"is-desktop";if(!e)return null;var n=X.default.getMimePrefix(e);return"video"===n?this.renderVideoEditorButtons(e,t):this.renderImageEditorButtons(t)}},{key:"renderImageEditorButtons",value:function(e){var t=this.props.site;if(!ie(t))return null;var n=(0,S.default)("editor-media-modal-detail__edition-bar",e);return E.default.createElement("div",{className:n},this.renderRestoreButton(e),this.renderEditButton())}},{key:"renderVideoEditorButtons",value:function(e,t){if(!this.enableVideoEditing(e))return null;var n=(0,S.default)("editor-media-modal-detail__edition-bar",t);return E.default.createElement("div",{className:n},this.renderEditButton())}},{key:"renderFields",value:function(){var e=this.props,t=e.site,n=e.item;return(0,$.userCan)("upload_files",t)?E.default.createElement(D.default,{site:t,item:n}):null}},{key:"renderPreviousItemButton",value:function(){var e=this.props,t=e.hasPreviousItem,n=e.onShowPreviousItem,o=e.translate;return t?E.default.createElement("button",{onClick:n,className:"editor-media-modal-detail__previous"},E.default.createElement(N.default,{icon:"chevron-left",size:36}),E.default.createElement("span",{className:"screen-reader-text"},o("Previous"))):null}},{key:"renderNextItemButton",value:function(){var e=this.props,t=e.hasNextItem,n=e.onShowNextItem,o=e.translate;return t?E.default.createElement("button",{onClick:n,className:"editor-media-modal-detail__next"},E.default.createElement(N.default,{icon:"chevron-right",size:36}),E.default.createElement("span",{className:"screen-reader-text"},o("Next"))):null}},{key:"renderItem",value:function(){var e=this.props,t=e.item,n=e.site;if(!t)return null;var o=X.default.getMimePrefix(t),r=void 0;switch(o){case"image":r=L.default;break;case"video":r=B.default;break;case"audio":r=U.default;break;default:r=W.default}return E.default.createElement(r,{className:"editor-media-modal-detail__preview",site:n,item:t})}},{key:"render",value:function(){var e=this.props,t=e.isJetpack,n=e.item,o=e.siteId,r=(0,S.default)("editor-media-modal-detail__item",{"is-loading":!n});return E.default.createElement("figure",{className:r},E.default.createElement("div",{className:"editor-media-modal-detail__content editor-media-modal__content"},E.default.createElement("div",{className:"editor-media-modal-detail__preview-wrapper"},this.renderItem(),this.renderMediaEditorButtons(n),this.renderPreviousItemButton(),this.renderNextItemButton()),E.default.createElement("div",{className:"editor-media-modal-detail__sidebar"},t&&E.default.createElement(K.default,{siteId:o}),this.renderMediaEditorButtons(n,"is-mobile"),this.renderFields(),E.default.createElement(O.default,{item:n}))))}}]),t}(C.Component);se.propTypes={site:C.PropTypes.object,item:C.PropTypes.object,hasPreviousItem:C.PropTypes.bool,hasNextItem:C.PropTypes.bool,onShowPreviousItem:C.PropTypes.func,onShowNextItem:C.PropTypes.func,onEdit:C.PropTypes.func,onRestore:C.PropTypes.func},se.defaultProps={hasPreviousItem:!1,hasNextItem:!1,onShowPreviousItem:h.default,onShowNextItem:h.default,onEdit:h.default,onRestore:h.default};var ae=(0,w.connect)(function(e){var t=(0,te.getSelectedSiteId)(e);return{isJetpack:(0,ne.isJetpackSite)(e,t),isVideoPressEnabled:(0,ne.getSiteOption)(e,t,"videopress_enabled"),isVideoPressModuleActive:(0,ne.isJetpackModuleActive)(e,t,"videopress"),isPrivateSite:(0,re.default)(e,t),siteId:t}});t.default=(0,x.default)(ae,T.localize)(se),e.exports=t.default},"./client/post-editor/media-modal/detail/detail-preview-audio.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var r=n("./node_modules/react/react.js"),i=o(r),s=n("./node_modules/classnames/index.js"),a=o(s),l=n("./client/lib/media/utils.js"),d=o(l);e.exports=i.default.createClass({displayName:"EditorMediaModalDetailPreviewAudio",propTypes:{className:i.default.PropTypes.string,item:i.default.PropTypes.object.isRequired},render:function(){var e=(0,a.default)(this.props.className,"is-audio");return i.default.createElement("audio",{src:d.default.url(this.props.item),controls:!0,className:e})}})},"./client/post-editor/media-modal/detail/detail-preview-document.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/react/react.js"),i=o(r),s=n("./node_modules/gridicons/build/index.js"),a=o(s),l=n("./node_modules/classnames/index.js"),d=o(l);t.default=i.default.createClass({displayName:"EditorMediaModalDetailPreviewDocument",propTypes:{className:i.default.PropTypes.string},render:function(){var e=(0,d.default)(this.props.className,"is-document");return i.default.createElement("div",{className:e},i.default.createElement(a.default,{icon:"pages",size:120}))}}),e.exports=t.default},"./client/post-editor/media-modal/detail/detail-preview-image.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=o(p),m=n("./node_modules/lodash/noop.js"),h=o(m),g=n("./node_modules/react/react.js"),y=o(g),v=n("./node_modules/classnames/index.js"),b=o(v),_=n("./client/components/image-preloader/index.jsx"),x=o(_),C=n("./client/components/spinner/index.jsx"),E=o(C),w=n("./client/lib/media/utils.js"),j=function(e){function t(e){(0,a.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return n.onImagePreloaderLoad=n.onImagePreloaderLoad.bind(n),n.state={loading:!1},n}return(0,f.default)(t,e),(0,d.default)(t,[{key:"componentWillReceiveProps",value:function(e){return this.props.item.URL===e.item.URL?null:void this.setState({loading:!0})}},{key:"onImagePreloaderLoad",value:function(){this.setState({loading:!1}),this.props.onLoad()}},{key:"render",value:function(){var e=(0,w.url)(this.props.item,{photon:this.props.site&&!this.props.site.is_private}),t=(0,w.isItemBeingUploaded)(this.props.item),n=this.state.loading,o=/^blob/.test(e),r=(0,b.default)(this.props.className,"is-image",{"is-uploading":t},{"is-loading":n},{"is-blob":o}),i=(0,b.default)(this.props.className,"is-image","is-fake",{"is-uploading":t},{"is-loading":n},{"is-blob":o});return y.default.createElement("div",null,y.default.createElement("img",{src:e,width:this.props.item.width,height:this.props.item.height,alt:this.props.item.alt||this.props.item.title,className:i}),y.default.createElement(x.default,{src:e,width:this.props.item.width,height:this.props.item.height,onLoad:this.onImagePreloaderLoad,placeholder:y.default.createElement("span",null),alt:this.props.item.alt||this.props.item.title,className:r}),(t||n)&&y.default.createElement(E.default,null))}}]),t}(g.Component);j.propTypes={className:g.PropTypes.string,item:g.PropTypes.object.isRequired,site:g.PropTypes.object},j.defaultProps={onLoad:h.default},t.default=j,e.exports=t.default},"./client/post-editor/media-modal/detail/detail-preview-video.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var r=n("./node_modules/react/react.js"),i=o(r),s=n("./node_modules/classnames/index.js"),a=o(s),l=n("./client/lib/media/utils.js"),d=n("./client/post-editor/media-modal/detail/detail-preview-videopress.jsx");e.exports=i.default.createClass({displayName:"EditorMediaModalDetailPreviewVideo",propTypes:{className:i.default.PropTypes.string,item:i.default.PropTypes.object.isRequired},render:function(){if(l.isVideoPressItem(this.props.item))return i.default.createElement(d,this.props);var e=(0,a.default)(this.props.className,"is-video");return i.default.createElement("video",{src:l.url(this.props.item),controls:!0,className:e})}})},"./client/post-editor/media-modal/detail/detail-preview-videopress.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=o(p),m=n("./node_modules/lodash/noop.js"),h=o(m),g=n("./node_modules/lodash/invoke.js"),y=o(g),v=n("./node_modules/lodash/get.js"),b=o(v),_=n("./node_modules/react/react.js"),x=o(_),C=n("./node_modules/classnames/index.js"),E=o(C),w=n("./node_modules/debug/browser.js"),j=o(w),S=n("./client/lib/load-script/index.js"),T=(0,j.default)("calypso:post-editor:videopress"),P="https://wordpress.com/wp-content/plugins/video/assets/js/next/videopress.js",k=function(e){function t(){var e,n,o,r;(0,a.default)(this,t);for(var s=arguments.length,l=Array(s),d=0;d<s;d++)l[d]=arguments[d];return n=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.setVideoInstance=function(e){return o.video=e},o.onScriptLoaded=function(e){var t=o.props,n=t.isPlaying,r=t.item,i=t.onScriptLoadError;if(e)return T("Script"+(0,b.default)(e,"src","")+" failed to load."),void i();var s=r.height,a=void 0===s?480:s,l=r.videopress_guid,d=r.width,u=void 0===d?854:d;l&&"undefined"!=typeof window&&window.videopress&&(o.player=window.videopress(l,o.video,{autoPlay:n,height:a,width:u}))},o.receiveMessage=function(e){if(!e.origin||e.origin===location.origin){var t=e.data;t&&"videopress_loading_state"===t.event&&"state"in t&&"converting"in t&&("loaded"!==t.state||t.converting||o.props.onVideoLoaded())}},r=n,(0,c.default)(o,r)}return(0,f.default)(t,e),(0,d.default)(t,[{key:"componentDidMount",value:function(){this.loadInitializeScript(),window.addEventListener("message",this.receiveMessage,!1)}},{key:"componentWillUnmount",value:function(){(0,S.removeScriptCallback)(P,this.onScriptLoaded),this.destroy()}},{key:"componentWillReceiveProps",value:function(e){this.props.isPlaying&&!e.isPlaying?this.pause():!this.props.isPlaying&&e.isPlaying&&this.play()}},{key:"componentDidUpdate",value:function(e){this.props.item.videopress_guid!==e.item.videopress_guid&&(this.destroy(),this.loadInitializeScript())}},{key:"shouldComponentUpdate",value:function(e){return this.props.item.videopress_guid!==e.item.videopress_guid}},{key:"loadInitializeScript",value:function(){(0,S.loadScript)(P,this.onScriptLoaded)}},{key:"destroy",value:function(){if(window.removeEventListener("message",this.receiveMessage),this.player)for((0,y.default)(this,"player.destroy");this.video.firstChild;)this.video.removeChild(this.video.firstChild)}},{key:"play",value:function(){var e=(0,b.default)(this,"player.state");e&&(0,y.default)(this,"player.state.play")}},{key:"pause",value:function(){var e=(0,b.default)(this,"player.state");if(e){(0,y.default)(this,"player.state.pause");var t=(0,y.default)(this,"player.state.videoAt");t&&this.props.onPause(t)}}},{key:"render",value:function(){var e=(0,E.default)(this.props.className,"is-video");return x.default.createElement("div",{className:e,ref:this.setVideoInstance})}}]),t}(_.Component);k.propTypes={className:_.PropTypes.string,isPlaying:_.PropTypes.bool,item:_.PropTypes.object.isRequired,onPause:_.PropTypes.func,onScriptLoadError:_.PropTypes.func,onVideoLoaded:_.PropTypes.func},k.defaultProps={isPlaying:!1,onPause:h.default,onScriptLoadError:h.default,onVideoLoaded:h.default},t.default=k,e.exports=t.default},"./client/post-editor/media-modal/detail/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.EditorMediaModalDetail=void 0;var r=n("./node_modules/lodash/partial.js"),i=o(r),s=n("./node_modules/lodash/noop.js"),a=o(s),l=n("./node_modules/react/react.js"),d=o(l),u=n("./node_modules/react-redux/es/index.js"),c=n("./client/state/ui/media-modal/constants.js"),p=n("./client/state/ui/editor/actions.js"),f=n("./client/post-editor/media-modal/detail/detail-item.jsx"),m=n("./client/lib/media/utils.js"),h=n("./client/components/header-cake/index.jsx"),g=n("./client/post-editor/media-modal/preload-image.js"),y=t.EditorMediaModalDetail=d.default.createClass({displayName:"EditorMediaModalDetail",propTypes:{site:d.default.PropTypes.object,items:d.default.PropTypes.array,selectedIndex:d.default.PropTypes.number,
onSelectedIndexChange:d.default.PropTypes.func,onReturnToList:d.default.PropTypes.func,onEdit:d.default.PropTypes.func,onRestore:d.default.PropTypes.func},getDefaultProps:function(){return{selectedIndex:0,onSelectedIndexChange:a.default}},componentDidMount:function(){this.preloadImages()},componentDidUpdate:function(){this.preloadImages()},preloadImages:function(){m.filterItemsByMimePrefix(this.props.items,"image").forEach(function(e){var t=m.url(e,{photon:this.props.site&&!this.props.site.is_private});g(t)},this)},incrementIndex:function(e){this.props.onSelectedIndexChange(this.props.selectedIndex+e)},render:function(){var e=this.props,t=e.items,n=e.selectedIndex,o=e.site,r=e.onEditImageItem,i=e.onEditVideoItem,s=e.onRestoreItem,a=e.onReturnToList,l=t[n],u=m.getMimePrefix(l);return d.default.createElement("div",{className:"editor-media-modal-detail"},d.default.createElement(h,{onClick:a,backText:this.translate("Media Library")}),d.default.createElement(f,{site:o,item:l,hasPreviousItem:n-1>=0,hasNextItem:n+1<t.length,onShowPreviousItem:this.incrementIndex.bind(this,-1),onShowNextItem:this.incrementIndex.bind(this,1),onRestore:s,onEdit:"video"===u?i:r}))}});t.default=(0,u.connect)(null,{onReturnToList:(0,i.default)(p.setEditorMediaModalView,c.ModalViews.LIST),onEditImageItem:(0,i.default)(p.setEditorMediaModalView,c.ModalViews.IMAGE_EDITOR),onEditVideoItem:(0,i.default)(p.setEditorMediaModalView,c.ModalViews.VIDEO_EDITOR)})(y)},"./client/post-editor/media-modal/fieldset.jsx":function(e,t,n){"use strict";var o=n("./node_modules/react/react.js"),r=n("./node_modules/classnames/index.js");e.exports=o.createClass({displayName:"EditorMediaModalFieldset",propTypes:{legend:o.PropTypes.oneOfType([o.PropTypes.string,o.PropTypes.element]).isRequired},render:function(){return o.createElement("fieldset",{className:r("editor-media-modal__fieldset",this.props.className)},o.createElement("legend",{className:"editor-media-modal__fieldset-legend"},this.props.legend),this.props.children)}})},"./client/post-editor/media-modal/gallery-help.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/react/react.js"),i=o(r),s=n("./node_modules/react-pure-render/mixin.js"),a=o(s),l=n("./node_modules/react-redux/es/index.js"),d=n("./node_modules/redux/lib/index.js"),u=n("./node_modules/gridicons/build/index.js"),c=o(u),p=n("./client/lib/viewport/index.js"),f=n("./client/components/popover/index.jsx"),m=o(f),h=n("./client/components/forms/form-checkbox/index.jsx"),g=o(h),y=n("./client/components/button/index.jsx"),v=o(y),b=n("./client/state/preferences/actions.js"),_=n("./client/state/preferences/selectors.js"),x=n("./client/state/ui/selectors.js"),C=n("./client/components/data/query-preferences/index.jsx"),E=o(C),w=i.default.createClass({displayName:"EditorMediaModalGalleryHelp",mixins:[a.default],propTypes:{onDismiss:r.PropTypes.func,sectionName:r.PropTypes.string},getInitialState:function(){return{isDismissed:!1,rememberDismiss:!0}},getDefaultProps:function(){return{onDismiss:function(){}}},setRenderContext:function(e){e&&this.setState({renderContext:e})},toggleRememberDismiss:function(){var e=this;setTimeout(function(){e.setState({rememberDismiss:!e.state.rememberDismiss})},0)},dismiss:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.remember;this.setState({isDismissed:!0}),this.props.onDismiss({remember:t})},renderPopover:function(){var e=this,t=this.state,n=t.renderContext,o=t.isDismissed;if(n&&!o)return i.default.createElement(m.default,{onClose:function(){return e.dismiss()},context:n,position:"bottom",isVisible:!(0,p.isMobile)(),className:"popover__gallery-help is-dialog-visible"},i.default.createElement("div",{className:"editor-media-modal__gallery-help-content"},i.default.createElement("div",{className:"editor-media-modal__gallery-help-instruction"},i.default.createElement("span",{className:"editor-media-modal__gallery-help-icon"},i.default.createElement(c.default,{icon:"image-multiple",size:20})),i.default.createElement("span",{className:"editor-media-modal__gallery-help-text"},this.translate("Select more than one image to create a gallery."))),i.default.createElement("div",{className:"editor-media-modal__gallery-help-actions"},i.default.createElement("label",{className:"editor-media-modal__gallery-help-remember-dismiss"},i.default.createElement(g.default,{checked:this.state.rememberDismiss,onChange:this.toggleRememberDismiss}),i.default.createElement("span",null,this.translate("Don't show again"))),i.default.createElement(v.default,{onClick:function(){return e.dismiss({remember:e.state.rememberDismiss})},compact:!0},this.translate("Got it",{context:"Button label",comment:"User clicks this to confirm that he has understood the text"})))))},render:function(){return"post-editor"!==this.props.sectionName?null:this.props.isMediaModalGalleryInstructionsDismissed?null:i.default.createElement("div",{ref:this.setRenderContext,className:"editor-media-modal__gallery-help"},i.default.createElement(E.default,null),this.renderPopover())}});t.default=(0,l.connect)(function(e){return{sectionName:(0,x.getSectionName)(e),isMediaModalGalleryInstructionsDismissed:(0,_.getPreference)(e,"mediaModalGalleryInstructionsDismissed")||(0,_.getPreference)(e,"mediaModalGalleryInstructionsDismissedForSession")}},function(e){return(0,d.bindActionCreators)({onDismiss:function(e){return e.remember?(0,b.savePreference)("mediaModalGalleryInstructionsDismissed",!0):(0,b.setPreference)("mediaModalGalleryInstructionsDismissedForSession",!0)}},e)})(w),e.exports=t.default},"./client/post-editor/media-modal/gallery/caption.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/assign.js"),i=o(r),s=n("./node_modules/react/react.js"),a=o(s),l=n("./client/lib/media/actions.js"),d=o(l),u=n("./client/components/forms/form-text-input/index.jsx"),c=o(u);t.default=a.default.createClass({displayName:"EditorMediaModalGalleryCaption",propTypes:{siteId:s.PropTypes.number,item:s.PropTypes.object},getInitialState:function(){return{caption:null}},getValue:function(){return null!==this.state.caption?this.state.caption:this.props.item?this.props.item.caption:void 0},setCaption:function(e){this.setState({caption:e.target.value})},saveCaption:function(){var e=this.props,t=e.siteId,n=e.item;if(t&&n){var o=this.getValue();n&&o===n.caption||d.default.update(t,(0,i.default)({},n,{caption:o}))}},render:function(){return a.default.createElement(c.default,{value:this.getValue(),placeholder:this.translate("Caption this image…"),onChange:this.setCaption,onBlur:this.saveCaption,onMouseDown:function(e){return e.stopPropagation()},className:"editor-media-modal-gallery__caption"})}}),e.exports=t.default},"./client/post-editor/media-modal/gallery/drop-zone.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/lodash/isEqual.js"),i=o(r),s=n("./node_modules/react/react.js"),a=o(s),l=n("./client/my-sites/media-library/drop-zone.jsx"),d=o(l),u=n("./client/lib/media/library-selected-store.js"),c=o(u),p=n("./client/lib/media/actions.js"),f=o(p),m=n("./client/lib/media/utils.js"),h=o(m);t.default=a.default.createClass({displayName:"EditorMediaModalGalleryDropZone",propTypes:{site:s.PropTypes.object,onInvalidItemAdded:s.PropTypes.func},getDefaultProps:function(){return{onInvalidItemAdded:function(){}}},filterDroppedImagesSelected:function(){var e=this.props.site;if(e){var t=c.default.getAll(e.ID),n=h.default.filterItemsByMimePrefix(t,"image");(0,i.default)(t,n)||(f.default.setLibrarySelectedItems(e.ID,n),this.props.onInvalidItemAdded())}},render:function(){return a.default.createElement(d.default,{site:this.props.site,onAddMedia:this.filterDroppedImagesSelected,fullScreen:!1})}}),e.exports=t.default},"./client/post-editor/media-modal/gallery/edit-item.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/react/react.js"),i=o(r),s=n("./client/lib/site/utils.js"),a=n("./client/my-sites/media-library/list-item.jsx"),l=o(a),d=n("./client/post-editor/media-modal/gallery/caption.jsx"),u=o(d),c=n("./client/post-editor/media-modal/gallery/remove-button.jsx"),p=o(c);t.default=i.default.createClass({displayName:"EditorMediaModalGalleryEditItem",propTypes:{site:r.PropTypes.object,item:r.PropTypes.object,showRemoveButton:r.PropTypes.bool},getDefaultProps:function(){return{showRemoveButton:!0}},renderCaption:function(){var e=this.props,t=e.site,n=e.item;if((0,s.userCan)("upload_files",t))return i.default.createElement(u.default,{siteId:t.ID,item:n})},render:function(){var e=this.props,t=e.site,n=e.item,o=e.showRemoveButton;return i.default.createElement("div",{className:"editor-media-modal-gallery__edit-item"},i.default.createElement(l.default,{media:n,scale:1,photon:!1}),this.renderCaption(),o&&i.default.createElement(p.default,{siteId:t.ID,itemId:n.ID}))}}),e.exports=t.default},"./client/post-editor/media-modal/gallery/edit.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/helpers/defineProperty.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/toConsumableArray.js"),a=o(s),l=n("./node_modules/babel-runtime/core-js/object/freeze.js"),d=o(l),u=n("./node_modules/lodash/sortBy.js"),c=o(u),p=n("./node_modules/lodash/reverse.js"),f=o(p),m=n("./node_modules/lodash/noop.js"),h=o(m),g=n("./node_modules/lodash/map.js"),y=o(g),v=n("./node_modules/react/react.js"),b=o(v),_=n("./node_modules/i18n-calypso/index.js"),x=n("./client/components/ellipsis-menu/index.jsx"),C=o(x),E=n("./client/components/popover/menu-item.jsx"),w=o(E),j=n("./client/components/forms/sortable-list/index.jsx"),S=o(j),T=n("./client/post-editor/media-modal/gallery/edit-item.jsx"),P=o(T),k=b.default.createClass({displayName:"EditorMediaModalGalleryEdit",propTypes:{site:b.default.PropTypes.object,settings:v.PropTypes.object,onUpdateSetting:v.PropTypes.func},getDefaultProps:function(){return{settings:(0,d.default)({}),onUpdateSetting:h.default}},onOrderChanged:function(e){var t=[];this.props.settings.items.forEach(function(n,o){t[e[o]]=n}),this.props.onUpdateSetting({items:t,orderBy:null})},render:function(){var e,t=this.props,n=t.onUpdateSetting,o=t.site,r=t.settings,s=t.translate;if(!o||!r.items)return null;var l=(e={},(0,i.default)(e,s("Reverse order"),(0,f.default)([].concat((0,a.default)(r.items)))),(0,i.default)(e,s("Order alphabetically"),(0,c.default)(r.items,"title")),(0,i.default)(e,s("Order chronologically"),(0,c.default)(r.items,"date")),e);return b.default.createElement("div",null,b.default.createElement(C.default,{popoverClassName:"gallery__order-popover",position:"bottom right"},(0,y.default)(l,function(e,t){var o=function(){return n({items:e})};return b.default.createElement(w.default,{key:t,onClick:o},t)})),b.default.createElement(S.default,{onChange:this.onOrderChanged},r.items.map(function(e){return b.default.createElement(P.default,{key:e.ID,site:o,item:e,showRemoveButton:r.items.length>1})})))}});t.default=(0,_.localize)(k),e.exports=t.default},"./client/post-editor/media-modal/gallery/fields.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.EditorMediaModalGalleryFields=void 0;var r=n("./node_modules/babel-runtime/core-js/object/keys.js"),i=o(r),s=n("./node_modules/babel-runtime/core-js/object/freeze.js"),a=o(s),l=n("./node_modules/lodash/times.js"),d=o(l),u=n("./node_modules/lodash/noop.js"),c=o(u),p=n("./node_modules/lodash/includes.js"),f=o(p),m=n("./node_modules/lodash/fromPairs.js"),h=o(m),g=n("./node_modules/lodash/assign.js"),y=o(g),v=n("./node_modules/react/react.js"),b=o(v),_=n("./node_modules/i18n-calypso/index.js"),x=n("./client/post-editor/media-modal/fieldset.jsx"),C=o(x),E=n("./client/components/select-dropdown/index.jsx"),w=o(E),j=n("./client/components/select-dropdown/item.jsx"),S=o(j),T=n("./client/components/forms/form-checkbox/index.jsx"),P=o(T),k=n("./client/lib/media/constants.js"),I=n("./client/lib/site/utils.js"),N=t.EditorMediaModalGalleryFields=b.default.createClass({displayName:"EditorMediaModalGalleryFields",propTypes:{site:v.PropTypes.object,settings:v.PropTypes.object,onUpdateSetting:v.PropTypes.func,numberOfItems:v.PropTypes.number},getDefaultProps:function(){return{settings:(0,a.default)({}),onUpdateSetting:c.default,numberOfItems:0}},getTypeOptions:function(){var e=this.props.site,t={individual:this.props.translate("Individual Images"),default:this.props.translate("Thumbnail Grid")};return!e||e.jetpack&&!(0,I.isModuleActive)(e,"tiled-gallery")||(0,y.default)(t,{rectangular:this.props.translate("Tiled Mosaic"),square:this.props.translate("Square Tiles"),circle:this.props.translate("Circles"),columns:this.props.translate("Tiled Columns")}),!e||e.jetpack&&!(0,I.isModuleActive)(e,"shortcodes")||(0,y.default)(t,{slideshow:this.props.translate("Slideshow")}),t},getLinkOptions:function(){return"individual"===this.props.settings.type?{}:{"":this.props.translate("Attachment Page"),file:this.props.translate("Media File"),none:this.props.translate("None")}},getSizeOptions:function(){return(0,f.default)(k.GallerySizeableTypes,this.props.settings.type)?{thumbnail:this.props.translate("Thumbnail"),medium:this.props.translate("Medium"),large:this.props.translate("Large"),full:this.props.translate("Full Size")}:{}},getColumnOptions:function(){var e=Math.min(this.props.numberOfItems,9);return(0,h.default)((0,d.default)(e,function(e){return[e+1,(e+1).toString()]}))},updateRandomOrder:function(e){this.props.onUpdateSetting("orderBy",e.target.checked?"rand":null)},renderDropdown:function(e,t,n){var o=this.props,r=o.settings,s=o.onUpdateSetting;if((0,i.default)(t).length)return b.default.createElement(C.default,{legend:e,className:"for-setting-"+n},b.default.createElement(w.default,{selectedText:t[r[n]]},(0,i.default)(t).map(function(e){var o=t[e];return b.default.createElement(S.default,{key:"value-"+e,selected:e===r[n],onClick:function(){return s(n,isFinite(parseInt(e))?+e:e)}},o)})))},renderColumnsOption:function(){if((0,f.default)(k.GalleryColumnedTypes,this.props.settings.type))return this.renderDropdown(this.props.translate("Columns"),this.getColumnOptions(),"columns")},renderRandomOption:function(){var e=this.props.settings;if("individual"!==e.type)return b.default.createElement(C.default,{legend:this.props.translate("Random Order")},b.default.createElement(P.default,{onChange:this.updateRandomOrder,checked:"rand"===e.orderBy}))},render:function(){var e=this.getTypeOptions(),t=this.getLinkOptions(),n=this.getSizeOptions();return b.default.createElement("div",{className:"editor-media-modal-gallery__fields"},this.renderDropdown(this.props.translate("Layout"),e,"type"),this.renderColumnsOption(),this.renderRandomOption(),this.renderDropdown(this.props.translate("Link To"),t,"link"),this.renderDropdown(this.props.translate("Size"),n,"size"))}});t.default=(0,_.localize)(N)},"./client/post-editor/media-modal/gallery/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/helpers/defineProperty.js"),i=o(r),s=n("./node_modules/lodash/partial.js"),a=o(s),l=n("./node_modules/lodash/isEqual.js"),d=o(l),u=n("./node_modules/lodash/some.js"),c=o(u),p=n("./node_modules/lodash/omitBy.js"),f=o(p),m=n("./node_modules/lodash/assign.js"),h=o(m),g=n("./node_modules/lodash/noop.js"),y=o(g),v=n("./node_modules/react/react.js"),b=o(v),_=n("./node_modules/react-redux/es/index.js"),x=n("./client/components/header-cake/index.jsx"),C=o(x),E=n("./client/lib/media/store.js"),w=o(E),j=n("./client/post-editor/media-modal/gallery/drop-zone.jsx"),S=o(j),T=n("./client/post-editor/media-modal/gallery/fields.jsx"),P=o(T),k=n("./client/post-editor/media-modal/gallery/preview.jsx"),I=o(k),N=n("./client/lib/media/constants.js"),R=n("./client/state/ui/media-modal/constants.js"),D=n("./client/state/ui/editor/actions.js"),M=n("./client/lib/site/utils.js"),O=b.default.createClass({displayName:"EditorMediaModalGallery",propTypes:{site:b.default.PropTypes.object,items:b.default.PropTypes.array,settings:b.default.PropTypes.object,onUpdateSettings:b.default.PropTypes.func,onReturnToList:b.default.PropTypes.func},getInitialState:function(){return{invalidItemDropped:!1}},getDefaultProps:function(){return{onUpdateSettings:y.default}},componentWillMount:function(){this.props.settings?(this.maybeUpdateColumnsSetting(),this.reconcileSettingsItems(this.props.settings,this.props.items)):this.setDefaultSettings()},componentDidUpdate:function(e){this.props.settings&&(this.maybeUpdateColumnsSetting(),(0,d.default)(e.items,this.props.items)||this.reconcileSettingsItems(this.props.settings,this.props.items))},reconcileSettingsItems:function(e,t){var n=this,o=e.items.filter(function(e){return(0,c.default)(t,{ID:e.ID})}).concat(t.filter(function(t){return!(0,c.default)(e.items,{ID:t.ID})})).map(function(e){return w.default.get(n.props.site.ID,e.ID)});(0,d.default)(o,e.items)||this.updateSetting("items",o)},maybeUpdateColumnsSetting:function(){this.props.items.length<this.props.settings.columns&&this.updateSetting("columns",this.props.items.length)},setDefaultSettings:function(){var e=this.props,t=e.site,n=e.settings,o=e.items,r=e.onUpdateSettings;if(!n){var i=(0,h.default)({},N.GalleryDefaultAttrs,{items:o});!t||t.jetpack&&!(0,M.isModuleActive)(t,"tiled-gallery")||(i.type="rectangular"),r(i)}},updateSetting:function(e,t){"string"==typeof e&&(e=(0,i.default)({},e,t));var n=(0,h.default)({},this.props.settings,e);n=(0,f.default)(n,function(e){return null===e}),this.props.onUpdateSettings(n)},render:function(){var e=this,t=this.props,n=t.site,o=t.items,r=t.settings;return b.default.createElement("div",{className:"editor-media-modal-gallery"},b.default.createElement(S.default,{site:n,onInvalidItemAdded:function(){return e.setState({invalidItemDropped:!0})}}),b.default.createElement(C.default,{onClick:this.props.onReturnToList,backText:this.translate("Media Library")}),b.default.createElement("div",{className:"editor-media-modal-gallery__content editor-media-modal__content"},b.default.createElement(I.default,{site:n,items:o,settings:r,onUpdateSetting:this.updateSetting,invalidItemDropped:this.state.invalidItemDropped,onDismissInvalidItemDropped:function(){return e.setState({invalidItemDropped:!1})}}),b.default.createElement("div",{className:"editor-media-modal-gallery__sidebar"},b.default.createElement(P.default,{site:n,settings:r,onUpdateSetting:this.updateSetting,numberOfItems:o.length}))))}});t.default=(0,_.connect)(null,{onReturnToList:(0,a.default)(D.setEditorMediaModalView,R.ModalViews.LIST)})(O),e.exports=t.default},"./client/post-editor/media-modal/gallery/preview-individual.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/react/react.js"),i=o(r),s=n("./node_modules/react-redux/es/index.js"),a=n("./client/post-editor/media-modal/markup.js"),l=o(a),d=n("./client/state/ui/selectors.js"),u=i.default.createClass({displayName:"EditorMediaModalGalleryPreviewIndividual",propTypes:{items:r.PropTypes.arrayOf(r.PropTypes.object),site:r.PropTypes.object},render:function(){var e=this,t=this.props.items.map(function(t){var n=l.default.caption(e.props.site,t);return null===n?i.default.createElement("div",{key:t.ID,dangerouslySetInnerHTML:{__html:l.default.get(e.props.site,t)}}):i.default.cloneElement(n,{key:t.ID})});return i.default.createElement("div",{className:"editor-media-modal-gallery__preview-individual"},i.default.createElement("div",{className:"editor-media-modal-gallery__preview-individual-content"},t))}});t.default=(0,s.connect)(function(e){return{site:(0,d.getSelectedSite)(e)}})(u),e.exports=t.default},"./client/post-editor/media-modal/gallery/preview-shortcode.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/lodash/some.js"),i=o(r),s=n("./node_modules/react/react.js"),a=o(s),l=n("./node_modules/classnames/index.js"),d=o(l),u=n("./client/lib/media/utils.js"),c=n("./client/components/gallery-shortcode/index.jsx"),p=o(c);t.default=a.default.createClass({displayName:"EditorMediaModalGalleryPreviewShortcode",propTypes:{siteId:s.PropTypes.number,settings:s.PropTypes.object},getInitialState:function(){return{isLoading:!0,shortcode:(0,u.generateGalleryShortcode)(this.props.settings)}},componentWillReceiveProps:function(e){var t=(0,u.generateGalleryShortcode)(e.settings);this.state.shortcode!==t&&this.setState({isLoading:!0,shortcode:t})},setLoaded:function(){this.isMounted()&&this.setState({isLoading:!1})},render:function(){var e=this.props,t=e.siteId,n=e.settings,o=this.state,r=o.isLoading,s=o.shortcode,l=(0,d.default)("editor-media-modal-gallery__preview-shortcode",{"is-loading":r||(0,i.default)(n.items,"transient")});return a.default.createElement("div",{className:l},a.default.createElement(p.default,{siteId:t,onLoad:this.setLoaded},s))}}),e.exports=t.default},"./client/post-editor/media-modal/gallery/preview.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/freeze.js"),i=o(r),s=n("./node_modules/react/react.js"),a=o(s),l=n("./client/components/notice/index.jsx"),d=o(l),u=n("./client/components/segmented-control/index.jsx"),c=o(u),p=n("./client/components/segmented-control/item.jsx"),f=o(p),m=n("./client/post-editor/media-modal/gallery/edit.jsx"),h=o(m),g=n("./client/post-editor/media-modal/gallery/preview-shortcode.jsx"),y=o(g),v=n("./client/post-editor/media-modal/gallery/preview-individual.jsx"),b=o(v);t.default=a.default.createClass({displayName:"EditorMediaModalGalleryPreview",propTypes:{site:s.PropTypes.object,settings:s.PropTypes.object,onUpdateSetting:s.PropTypes.func,invalidItemDropped:s.PropTypes.bool,onDismissInvalidItemDropped:s.PropTypes.func},getInitialState:function(){return{isEditing:!1}},getDefaultProps:function(){return{settings:(0,i.default)({}),onUpdateSetting:function(){},invalidItemDropped:!1,onDismissInvalidItemDropped:function(){}}},renderPreviewModeToggle:function(){var e=this;return a.default.createElement(c.default,{className:"editor-media-modal-gallery__preview-toggle",compact:!0},a.default.createElement(f.default,{selected:!this.state.isEditing,onClick:function(){return e.setState({isEditing:!1})}},this.translate("Preview")),a.default.createElement(f.default,{selected:this.state.isEditing,onClick:function(){return e.setState({isEditing:!0})}},this.translate("Edit")))},renderPreview:function(){var e=this.props,t=e.site,n=e.settings,o=e.onUpdateSetting;if(t&&n.items)return this.state.isEditing?a.default.createElement(h.default,{site:t,settings:n,onUpdateSetting:o}):"individual"===n.type?a.default.createElement(b.default,{items:n.items}):a.default.createElement(y.default,{siteId:t.ID,settings:n})},render:function(){return a.default.createElement("div",{className:"editor-media-modal-gallery__preview"},this.props.invalidItemDropped&&a.default.createElement(d.default,{status:"is-warning",onDismissClick:this.props.onDismissInvalidItemDropped,isCompact:!0},this.translate("Galleries can only include images. All other uploads will be added to your media library.")),a.default.createElement("div",{className:"editor-media-modal-gallery__preview-wrapper"},this.renderPreview()),this.renderPreviewModeToggle())}}),e.exports=t.default},"./client/post-editor/media-modal/gallery/remove-button.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/lodash/reject.js"),i=o(r),s=n("./node_modules/react/react.js"),a=o(s),l=n("./node_modules/react-pure-render/mixin.js"),d=o(l),u=n("./node_modules/gridicons/build/index.js"),c=o(u),p=n("./client/lib/media/actions.js"),f=o(p),m=n("./client/lib/media/library-selected-store.js"),h=o(m);t.default=a.default.createClass({displayName:"EditorMediaModalGalleryRemoveButton",mixins:[d.default],propTypes:{siteId:s.PropTypes.number,itemId:s.PropTypes.number},remove:function(){var e=this.props,t=e.siteId,n=e.itemId;if(t&&n){var o=h.default.getAll(t),r=(0,i.default)(o,function(e){return e.ID===n});f.default.setLibrarySelectedItems(t,r)}},render:function(){return a.default.createElement("button",{onClick:this.remove,onMouseDown:function(e){return e.stopPropagation()},className:"editor-media-modal-gallery__remove"},a.default.createElement("span",{className:"screen-reader-text"},this.translate("Remove")),a.default.createElement(c.default,{icon:"cross"}))}}),e.exports=t.default},"./client/post-editor/media-modal/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){return!n(t)||(0,M.default)(t,function(t){return de.default.isItemBeingUploaded(t)&&("image"!==de.default.getMimePrefix(t)||!de.default.isTransientPreviewable(t)||e===be.ModalViews.GALLERY)})}Object.defineProperty(t,"__esModule",{value:!0}),t.EditorMediaModal=void 0;var i=n("./node_modules/babel-runtime/core-js/object/freeze.js"),s=o(i),a=n("./node_modules/babel-runtime/helpers/extends.js"),l=o(a),d=n("./node_modules/babel-runtime/core-js/object/assign.js"),u=o(d),c=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),p=o(c),f=n("./node_modules/babel-runtime/helpers/toConsumableArray.js"),m=o(f),h=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),g=o(h),y=n("./node_modules/babel-runtime/helpers/createClass.js"),v=o(y),b=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),_=o(b),x=n("./node_modules/babel-runtime/helpers/inherits.js"),C=o(x),E=n("./node_modules/lodash/uniqueId.js"),w=o(E),j=n("./node_modules/lodash/includes.js"),S=o(j),T=n("./node_modules/lodash/identity.js"),P=o(T),k=n("./node_modules/lodash/isEmpty.js"),I=o(k),N=n("./node_modules/lodash/values.js"),R=o(N),D=n("./node_modules/lodash/some.js"),M=o(D),O=n("./node_modules/lodash/partial.js"),A=o(O),L=n("./node_modules/lodash/flow.js"),F=o(L),B=n("./node_modules/lodash/map.js"),z=o(B),U=n("./node_modules/lodash/noop.js"),H=o(U),W=n("./node_modules/lodash/head.js"),V=o(W),q=n("./node_modules/lodash/findIndex.js"),G=o(q),K=n("./node_modules/react/react.js"),$=o(K),Y=n("./node_modules/prop-types/index.js"),J=o(Y),Z=n("./node_modules/i18n-calypso/index.js"),X=n("./node_modules/react-redux/es/index.js"),Q=n("./client/my-sites/media-library/index.jsx"),ee=o(Q),te=n("./client/lib/analytics/index.js"),ne=o(te),oe=n("./client/lib/posts/stats.js"),re=n("./client/post-editor/media-modal/gallery/index.jsx"),ie=o(re),se=n("./client/lib/media/actions.js"),ae=o(se),le=n("./client/lib/media/utils.js"),de=o(le),ue=n("./client/components/dialog/index.jsx"),ce=o(ue),pe=n("./client/lib/accept/index.js"),fe=o(pe),me=n("./client/state/ui/media-modal/selectors.js"),he=n("./client/state/sites/selectors.js"),ge=n("./client/state/ui/editor/selectors.js"),ye=n("./client/state/ui/media-modal/actions.js"),ve=n("./client/state/ui/editor/actions.js"),be=n("./client/state/ui/media-modal/constants.js"),_e=n("./client/state/media/actions.js"),xe=n("./client/blocks/image-editor/index.jsx"),Ce=o(xe),Ee=n("./client/blocks/video-editor/index.jsx"),we=o(Ee),je=n("./client/post-editor/media-modal/detail/index.jsx"),Se=o(je),Te=n("./client/state/analytics/actions.js"),Pe=t.EditorMediaModal=function(e){function t(e){var n;(0,g.default)(this,t);var o=(0,_.default)(this,(n=t.__proto__||(0,p.default)(t)).call.apply(n,[this].concat((0,m.default)(e))));return o.confirmSelection=function(){var e=o.props,t=e.view,n=e.mediaLibrarySelectedItems;if(!r(t,n,o.props.isParentReady))if(n.length&&""!==o.state.source){var i=n.map(function(e){return(0,u.default)({},e,{ID:(0,w.default)("media-"),transient:!0})});1===i.length&&"image"===de.default.getMimePrefix(i[0])?(o.copyExternal(i,o.state.source),o.props.onClose({type:"media",items:i})):o.copyExternalAfterLoadingWordPressLibrary(i,o.state.source)}else{var s=n.length?{type:be.ModalViews.GALLERY===t?"gallery":"media",items:n,settings:o.state.gallerySettings}:void 0;o.props.onClose(s)}},o.setDetailSelectedIndex=function(e){o.setState({detailSelectedIndex:e})},o.confirmDeleteMedia=function(e){var t=o.props,n=t.site,r=t.mediaLibrarySelectedItems;if(n&&e){var i=r;be.ModalViews.DETAIL===o.props.view&&(i=i[o.getDetailSelectedIndex()],o.setNextAvailableDetailView()),ae.default.delete(n.ID,i),ne.default.mc.bumpStat("editor_media_actions","delete_media"),o.props.deleteMedia(n.ID,(0,z.default)(i,"ID"))}},o.deleteMedia=function(){var e=o.props,t=e.view,n=e.mediaLibrarySelectedItems,r=e.translate,i=void 0;i=be.ModalViews.DETAIL===t?1:n.length;var s=r("Are you sure you want to delete this item? Deleted media will no longer appear anywhere on your website, including all posts, pages, and widgets. This cannot be undone.","Are you sure you want to delete these items? Deleted media will no longer appear anywhere on your website, including all posts, pages, and widgets. This cannot be undone.",{count:i});(0,fe.default)(s,o.confirmDeleteMedia,r("Delete"),null,{isScary:!0})},o.onAddMedia=function(){(0,oe.recordStat)("media_explorer_upload"),(0,oe.recordEvent)("Upload Media")},o.onAddAndEditImage=function(){ae.default.setLibrarySelectedItems(o.props.site.ID,[]),o.props.setView(be.ModalViews.IMAGE_EDITOR)},o.restoreOriginalMedia=function(e,t){e&&t&&ae.default.update(e,{ID:t.ID,media_url:t.guid},!0)},o.onImageEditorDone=function(e,t,n){if(e)return void o.onImageEditorCancel(n);var r=n.fileName,i=n.site,s=n.ID,a=n.resetAllImageEditorState,l=n.width,d=n.height,c=de.default.getMimeType(r),p=(0,u.default)({ID:s,media:{fileName:r,fileContents:t,mimeType:c}},l&&{width:l},d&&{height:d});ae.default.update(i.ID,p,!0),a(),o.props.setView(be.ModalViews.DETAIL)},o.handleUpdatePoster=function(e){var t=e.ID,n=e.posterUrl,r=o.props.site,i=(n||"").split("?")[0];r&&ae.default.edit(r.ID,{ID:t,thumbnails:{fmt_hd:i,fmt_dvd:i,fmt_std:i}}),o.props.setView(be.ModalViews.DETAIL)},o.handleCancel=function(){var e=o.props.mediaLibrarySelectedItems,t=e[o.getDetailSelectedIndex()];return t?void o.props.setView(be.ModalViews.DETAIL):void o.props.setView(be.ModalViews.LIST)},o.onImageEditorCancel=function(e){var t=e.resetAllImageEditorState;o.handleCancel(),t()},o.onFilterChange=function(e){e!==o.state.filter&&ne.default.mc.bumpStat("editor_media_actions","filter_"+(e||"all")),o.setState({filter:e})},o.onScaleChange=function(){o.statsTracking.scale||(ne.default.mc.bumpStat("editor_media_actions","scale"),o.statsTracking.scale=!0)},o.onSearch=function(e){o.setState({search:e||void 0}),o.statsTracking.search||(ne.default.mc.bumpStat("editor_media_actions","search"),o.statsTracking.search=!0)},o.onSourceChange=function(e){ae.default.sourceChanged(o.props.site.ID),o.setState({source:e,search:void 0})},o.onClose=function(){o.props.onClose()},o.editItem=function(e){var t=o.props,n=t.site,r=t.mediaLibrarySelectedItems,i=t.single;if(n){var s=r;s.some(function(t){return t.ID===e.ID})||(s=i?[e]:s.concat(e),ae.default.setLibrarySelectedItems(n.ID,s)),o.setDetailSelectedIndex((0,G.default)(s,{ID:e.ID})),ne.default.mc.bumpStat("editor_media_actions","edit_button_contextual"),ne.default.ga.recordEvent("Media","Clicked Contextual Edit Button"),o.props.setView(be.ModalViews.DETAIL)}},o.updateSettings=function(e){o.setState({gallerySettings:e})},o.state=o.getDefaultState(e),o}return(0,C.default)(t,e),(0,v.default)(t,[{key:"componentWillReceiveProps",
value:function(e){e.site&&this.props.visible&&!e.visible&&ae.default.setLibrarySelectedItems(e.site.ID,[]),this.props.visible!==e.visible&&(e.visible?(this.setState(this.getDefaultState(e)),e.source&&this.state.source!==e.source&&e.site&&ae.default.sourceChanged(e.site.ID)):this.props.resetView())}},{key:"componentDidMount",value:function(){this.statsTracking={}}},{key:"componentWillMount",value:function(){var e=this.props,t=e.view,n=e.mediaLibrarySelectedItems,o=e.site;(0,I.default)(n)||t!==be.ModalViews.LIST||ae.default.setLibrarySelectedItems(o.ID,[])}},{key:"componentWillUnmount",value:function(){this.props.resetView(),ae.default.setLibrarySelectedItems(this.props.site.ID,[])}},{key:"getDefaultState",value:function(e){return{filter:"",detailSelectedIndex:0,source:e.source?e.source:"",gallerySettings:e.initialGallerySettings}}},{key:"copyExternalAfterLoadingWordPressLibrary",value:function(e,t){var n=this.props.site;ae.default.sourceChanged(n.ID),this.setState({source:"",search:void 0},function(){ae.default.addExternal(n.ID,e,t)})}},{key:"copyExternal",value:function(e,t){var n=this.props.site;ae.default.addExternal(n.ID,e,t)}},{key:"setNextAvailableDetailView",value:function(){1===this.props.mediaLibrarySelectedItems.length?this.props.setView(be.ModalViews.LIST):this.getDetailSelectedIndex()===this.props.mediaLibrarySelectedItems.length-1&&this.setDetailSelectedIndex(Math.max(this.getDetailSelectedIndex()-1,0))}},{key:"getDetailSelectedIndex",value:function(){var e=this.props.mediaLibrarySelectedItems,t=this.state.detailSelectedIndex;return t>=e.length?0:t}},{key:"getFirstEnabledFilter",value:function(){if(this.props.enabledFilters)return(0,V.default)(this.props.enabledFilters)}},{key:"getModalButtons",value:function(){var e=this;if(!(0,S.default)([be.ModalViews.IMAGE_EDITOR,be.ModalViews.VIDEO_EDITOR],this.props.view)){var t=this.props.mediaLibrarySelectedItems,n=r(this.props.view,t,this.props.isParentReady),o=[{action:"cancel",label:this.props.translate("Cancel")}],i=function(){var n=e.props.translate("Insert");return(t.length>1||1===t.length&&"image"!==de.default.getMimePrefix(t[0]))&&(n=e.props.translate("Copy to media library")),n};return""!==this.state.source?o.push({action:"confirm",label:this.props.labels.confirm||i(),isPrimary:!0,disabled:n||0===t.length,onClick:this.confirmSelection}):be.ModalViews.GALLERY!==this.props.view&&t.length>1&&!(0,M.default)(t,function(e){return"image"!==de.default.getMimePrefix(e)})?o.push({action:"confirm",label:this.props.translate("Continue"),isPrimary:!0,disabled:n||!this.props.site,onClick:(0,A.default)(this.props.setView,be.ModalViews.GALLERY)}):o.push({action:"confirm",label:this.props.labels.confirm||this.props.translate("Insert"),isPrimary:!0,disabled:n||0===t.length,onClick:this.confirmSelection}),o}}},{key:"shouldClose",value:function(){return!(0,S.default)([be.ModalViews.IMAGE_EDITOR,be.ModalViews.VIDEO_EDITOR],this.props.view)}},{key:"renderContent",value:function(){var e=void 0;switch(this.props.view){case be.ModalViews.DETAIL:e=$.default.createElement(Se.default,{site:this.props.site,items:this.props.mediaLibrarySelectedItems,selectedIndex:this.getDetailSelectedIndex(),onRestoreItem:this.restoreOriginalMedia,onSelectedIndexChange:this.setDetailSelectedIndex});break;case be.ModalViews.GALLERY:e=$.default.createElement(ie.default,{site:this.props.site,items:this.props.mediaLibrarySelectedItems,settings:this.state.gallerySettings,onUpdateSettings:this.updateSettings});break;case be.ModalViews.IMAGE_EDITOR:case be.ModalViews.VIDEO_EDITOR:var t=this.props,n=t.site,o=t.imageEditorProps,r=t.mediaLibrarySelectedItems,i=this.getDetailSelectedIndex(),s=r?r[i]:null;e=be.ModalViews.IMAGE_EDITOR===this.props.view?$.default.createElement(Ce.default,(0,l.default)({siteId:n&&n.ID,media:s,onDone:this.onImageEditorDone,onCancel:this.onImageEditorCancel},o)):$.default.createElement(we.default,{media:s,onCancel:this.handleCancel,onUpdatePoster:this.handleUpdatePoster});break;default:e=$.default.createElement(ee.default,{site:this.props.site,filter:this.state.filter||this.props.defaultFilter||this.getFirstEnabledFilter(),enabledFilters:this.props.enabledFilters,search:this.state.search,source:this.state.source,onAddMedia:this.onAddMedia,onAddAndEditImage:this.onAddAndEditImage,onFilterChange:this.onFilterChange,onScaleChange:this.onScaleChange,onSourceChange:this.onSourceChange,onSearch:this.onSearch,onEditItem:this.editItem,fullScreenDropZone:!1,single:this.props.single,onDeleteItem:this.deleteMedia,onViewDetails:this.props.onViewDetails,mediaLibrarySelectedItems:this.props.mediaLibrarySelectedItems,postId:this.props.postId,scrollable:!0})}return e}},{key:"render",value:function(){return $.default.createElement(ce.default,{isVisible:this.props.visible,buttons:this.getModalButtons(),onClose:this.onClose,additionalClassNames:"editor-media-modal",shouldCloseOnOverlayClick:this.shouldClose()},this.renderContent())}}]),t}(K.Component);Pe.propTypes={visible:J.default.bool,mediaLibrarySelectedItems:J.default.arrayOf(J.default.object),onClose:J.default.func,isParentReady:J.default.func,site:J.default.object,siteId:J.default.number,labels:J.default.object,single:J.default.bool,defaultFilter:J.default.string,enabledFilters:J.default.arrayOf(J.default.string),view:J.default.oneOf((0,R.default)(be.ModalViews)),setView:J.default.func,resetView:J.default.func,postId:J.default.number},Pe.defaultProps={visible:!1,mediaLibrarySelectedItems:(0,s.default)([]),onClose:H.default,isParentReady:function(){return!0},labels:(0,s.default)({}),setView:H.default,resetView:H.default,translate:P.default,view:be.ModalViews.LIST,imageEditorProps:{},deleteMedia:function(){}},t.default=(0,X.connect)(function(e,t){var n=t.site,o=t.siteId;return{view:(0,me.getMediaModalView)(e),site:n||(0,he.getSite)(e,o),postId:(0,ge.getEditorPostId)(e)}},{setView:ve.setEditorMediaModalView,resetView:ye.resetMediaModalView,deleteMedia:_e.deleteMedia,onViewDetails:(0,F.default)((0,Te.withAnalytics)((0,Te.bumpStat)("editor_media_actions","edit_button_dialog")),(0,Te.withAnalytics)((0,Te.recordGoogleEvent)("Media","Clicked Dialog Edit Button")),(0,A.default)(ve.setEditorMediaModalView,be.ModalViews.DETAIL))})((0,Z.localize)(Pe))},"./client/post-editor/media-modal/markup.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var r,i=n("./node_modules/lodash/assign.js"),s=o(i),a=n("./node_modules/react-dom/server.js"),l=n("./node_modules/react/react.js"),d=n("./node_modules/classnames/index.js"),u=n("./client/lib/shortcode/index.js"),c=n("./client/lib/media/utils.js"),p=n("./client/lib/media-serialization/index.js");r={get:function(e,t,n){var o;return!t||t.hasOwnProperty("status")?"":(o=c.getMimePrefix(t),o&&"function"==typeof r.mimeTypes[o]?r.mimeTypes[o](e,t,n):r.link(t))},link:function(e){var t=l.createElement("a",{href:e.URL,title:e.title},e.title);return a.renderToStaticMarkup(t)},caption:function e(t,n){var o,i,s,e,a;return"string"!=typeof n&&(n=r.get(t,n)),o=u.parse(n),o&&o.content?(i=o.content.match(/((?:<a [^>]+>)?<img [^>]+>(?:<\/a>)?)([\s\S]*)/i),i&&(s=i[1].trim(),e=i[2].trim()),a=o.attrs.named.width,a||(a=p.deserialize(s).width),l.createElement("dl",{className:d("wp-caption",o.attrs.named.align,o.attrs.named.classes),style:{width:a}},l.createElement("dt",{className:"wp-caption-dt",dangerouslySetInnerHTML:{__html:s}}),l.createElement("dd",{className:"wp-caption-dd"},e))):null},mimeTypes:{image:function(e,t,n){n=(0,s.default)({size:"full",align:"none",forceResize:!1},n);var o=void 0,r=void 0;if("full"===n.size)o=t.width,r=t.height;else{var i=c.getThumbnailSizeDimensions(n.size,e),p=Math.min(i.width/t.width||1/0,i.height/t.height||1/0);o=Math.round(t.width*p),r=Math.round(t.height*p)}var f=void 0;f=n.forceResize||e&&!e.jetpack&&o&&o!==t.width?{maxWidth:o}:{size:n.size};var m=l.createElement("img",{src:c.url(t,f),alt:t.alt||t.title,width:isFinite(o)?o:null,height:isFinite(r)?r:null,className:d("align"+n.align,"size-"+n.size,"wp-image-"+t.ID),"data-istransient":t.transient?"istransient":null}),h=a.renderToStaticMarkup(m);return t.caption&&o&&(h=u.stringify({tag:"caption",attrs:{id:"attachment_"+t.ID,width:o},content:[h,t.caption].join(" ")})),h},audio:function(e,t){return u.stringify({tag:"audio",attrs:{src:t.URL}})},video:function(e,t){return c.isVideoPressItem(t)?u.stringify({tag:"wpvideo",attrs:[t.videopress_guid],type:"single"}):u.stringify({tag:"video",attrs:{src:t.URL,height:t.height,width:t.width}})}}},e.exports=r},"./client/post-editor/media-modal/preload-image.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var r=n("./node_modules/lodash/memoize.js"),i=o(r);e.exports=(0,i.default)(function(e){(new window.Image).src=e})},"./client/post-editor/media-modal/secondary-actions.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/assign.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/extends.js"),a=o(s),l=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/createClass.js"),f=o(p),m=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),h=o(m),g=n("./node_modules/babel-runtime/helpers/inherits.js"),y=o(g),v=n("./node_modules/lodash/pick.js"),b=o(v),_=n("./node_modules/lodash/partial.js"),x=o(_),C=n("./node_modules/lodash/flow.js"),E=o(C),w=n("./node_modules/lodash/every.js"),j=o(w),S=n("./node_modules/lodash/some.js"),T=o(S),P=n("./node_modules/lodash/noop.js"),k=o(P),I=n("./node_modules/lodash/values.js"),N=o(I),R=n("./node_modules/react/react.js"),D=o(R),M=n("./node_modules/react-redux/es/index.js"),O=n("./node_modules/classnames/index.js"),A=o(O),L=n("./node_modules/gridicons/build/index.js"),F=o(L),B=n("./node_modules/i18n-calypso/index.js"),z=n("./client/lib/media/utils.js"),U=n("./client/state/current-user/selectors.js"),H=n("./client/state/sites/selectors.js"),W=n("./client/state/ui/media-modal/selectors.js"),V=n("./client/state/ui/editor/actions.js"),q=n("./client/state/ui/media-modal/constants.js"),G=n("./client/state/analytics/actions.js"),K=n("./client/components/button/index.jsx"),$=o(K),Y=function(e){function t(){return(0,c.default)(this,t),(0,h.default)(this,(t.__proto__||(0,d.default)(t)).apply(this,arguments))}return(0,y.default)(t,e),(0,f.default)(t,[{key:"getButtons",value:function(){var e=this.props,t=e.disabled,n=e.selectedItems,o=e.site,r=e.translate,i=e.user,s=e.view,a=e.onDelete,l=e.onViewDetails,d=[];q.ModalViews.LIST===s&&n.length&&d.push({key:"edit",text:r("Edit"),disabled:t,primary:!0,onClick:l});var u=n.length&&(0,j.default)(n,function(e){return(0,z.canUserDeleteItem)(e,i,o)});if(q.ModalViews.GALLERY!==s&&u){var c=t||(0,T.default)(n,"transient");d.push({key:"delete",icon:"trash",className:"editor-media-modal__delete",disabled:c,onClick:c?k.default:a})}return d}},{key:"render",value:function(){return D.default.createElement("div",null,this.getButtons().map(function(e){return D.default.createElement($.default,(0,a.default)({className:(0,A.default)("editor-media-modal__secondary-action",e.className),icon:!!e.icon,compact:!0},(0,b.default)(e,["key","disabled","onClick","primary"])),e.icon&&D.default.createElement(F.default,{icon:e.icon}),e.text&&e.text)}))}}]),t}(R.Component);Y.propTypes={user:R.PropTypes.object,site:R.PropTypes.object,selectedItems:R.PropTypes.array,view:D.default.PropTypes.oneOf((0,N.default)(q.ModalViews)),disabled:R.PropTypes.bool,onDelete:R.PropTypes.func,onViewDetails:R.PropTypes.func},Y.defaultProps={disabled:!1,onDelete:k.default},t.default=(0,M.connect)(function(e,t){return{view:(0,W.getMediaModalView)(e),user:(0,U.getCurrentUser)(e),siteSlug:t.site?(0,H.getSiteSlug)(e,t.site.ID):""}},{onViewDetails:(0,E.default)((0,G.withAnalytics)((0,G.bumpStat)("editor_media_actions","edit_button_dialog")),(0,G.withAnalytics)((0,G.recordGoogleEvent)("Media","Clicked Dialog Edit Button")),(0,x.default)(V.setEditorMediaModalView,q.ModalViews.DETAIL))},function(e,t,n){return(0,i.default)({},n,e,t,(0,b.default)(n,["onViewDetails","view"]))})((0,B.localize)(Y)),e.exports=t.default},"./client/post-editor/post-editor.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.PostEditor=void 0;var r=n("./node_modules/babel-runtime/helpers/extends.js"),i=o(r),s=n("./node_modules/lodash/get.js"),a=o(s),l=n("./node_modules/lodash/throttle.js"),d=o(l),u=n("./node_modules/lodash/debounce.js"),c=o(u),p=n("./node_modules/react/react.js"),f=o(p),m=n("./node_modules/react-dom/index.js"),h=o(m),g=n("./node_modules/page/index.js"),y=o(g),v=n("./node_modules/prop-types/index.js"),b=o(v),_=n("./node_modules/react-redux/es/index.js"),x=n("./node_modules/redux/lib/index.js"),C=n("./node_modules/i18n-calypso/index.js"),E=n("./node_modules/classnames/index.js"),w=o(E),j=n("./node_modules/tinymce/tinymce.js"),S=o(j),T=n("./node_modules/uuid/uuid.js"),P=n("./client/lib/posts/actions.js"),k=o(P),I=n("./client/lib/route/index.js"),N=o(I),R=n("./client/lib/posts/post-edit-store.js"),D=o(R),M=n("./client/post-editor/editor-action-bar/index.jsx"),O=o(M),A=n("./client/post-editor/editor-featured-image/index.jsx"),L=o(A),F=n("./client/post-editor/editor-title/index.jsx"),B=o(F),z=n("./client/post-editor/editor-page-slug/index.jsx"),U=o(z),H=n("./client/components/tinymce/index.jsx"),W=o(H),V=n("./client/components/segmented-control/index.jsx"),q=o(V),G=n("./client/components/segmented-control/item.jsx"),K=o(G),$=n("./client/post-editor/invalid-url-dialog.jsx"),Y=o($),J=n("./client/post-editor/restore-post-dialog.jsx"),Z=o(J),X=n("./client/components/email-verification/email-verification-dialog/index.jsx"),Q=o(X),ee=n("./client/lib/posts/utils.js"),te=o(ee),ne=n("./client/post-editor/editor-preview/index.jsx"),oe=o(ne),re=n("./client/lib/posts/stats.js"),ie=n("./client/lib/analytics/index.js"),se=o(ie),ae=n("./client/state/ui/selectors.js"),le=n("./client/state/ui/editor/actions.js"),de=n("./client/state/ui/editor/last-draft/actions.js"),ue=n("./client/state/ui/editor/selectors.js"),ce=n("./client/state/posts/actions.js"),pe=n("./client/state/posts/selectors.js"),fe=n("./client/state/current-user/selectors.js"),me=n("./client/state/selectors/has-broken-site-user-connection.js"),he=o(me),ge=n("./client/post-editor/editor-confirmation-sidebar/index.jsx"),ye=o(ge),ve=n("./client/post-editor/editor-document-head/index.jsx"),be=o(ve),_e=n("./client/post-editor/editor-post-type-unsupported/index.jsx"),xe=o(_e),Ce=n("./client/post-editor/editor-forbidden/index.jsx"),Ee=o(Ce),we=n("./client/post-editor/editor-notice/index.jsx"),je=o(we),Se=n("./client/post-editor/editor-word-count/index.jsx"),Te=o(Se),Pe=n("./client/state/preferences/actions.js"),ke=n("./client/state/preferences/selectors.js"),Ie=n("./client/components/data/query-preferences/index.jsx"),Ne=o(Ie),Re=n("./client/state/ui/layout-focus/actions.js"),De=n("./client/state/ui/layout-focus/selectors.js"),Me=n("./client/lib/protect-form/index.jsx"),Oe=n("./client/post-editor/editor-sidebar/index.jsx"),Ae=o(Oe),Le=n("./client/blocks/site/index.jsx"),Fe=o(Le),Be=n("./client/post-editor/editor-status-label/index.jsx"),ze=o(Be),Ue=n("./client/state/selectors/edited-post-has-content.js"),He=o(Ue),We=n("./client/post-editor/editor-ground-control/index.jsx"),Ve=o(We),qe=n("./client/lib/viewport/index.js"),Ge=n("./client/state/sites/selectors.js"),Ke=n("./client/post-editor/editor-diff-viewer/index.jsx"),$e=o(Ke),Ye=n("./client/post-editor/editor-sidebar/constants.js"),Je=n("./client/lib/formatting/index.js"),Ze=t.PostEditor=f.default.createClass({displayName:"PostEditor",propTypes:{siteId:b.default.number,preferences:b.default.object,setEditorModePreference:b.default.func,setEditorSidebar:b.default.func,setLayoutFocus:b.default.func.isRequired,editorModePreference:b.default.string,editorSidebarPreference:b.default.string,user:b.default.object,userUtils:b.default.object,editPath:b.default.string,markChanged:b.default.func.isRequired,markSaved:b.default.func.isRequired,translate:b.default.func.isRequired,hasBrokenPublicizeConnection:b.default.bool,editPost:b.default.func},_previewWindow:null,getInitialState:function(){return(0,i.default)({},this.getPostEditState(),{confirmationSidebar:"closed",confirmationSidebarPreference:!0,isSaving:!1,isPublishing:!1,notice:null,selectedText:null,showVerifyEmailDialog:!1,showAutosaveDialog:!0,isLoadingRevision:!1,isTitleFocused:!1,showPreview:!1,isPostPublishPreview:!1,previewAction:null,nestedSidebar:Ye.NESTED_SIDEBAR_NONE,selectedRevisionId:null})},getPostEditState:function(){return{savedPost:D.default.getSavedPost(),loadingError:D.default.getLoadingError(),isDirty:D.default.isDirty(),isSaveBlocked:D.default.isSaveBlocked(),hasContent:D.default.hasContent(),previewUrl:D.default.getPreviewUrl(),post:D.default.get(),isNew:D.default.isNew(),isAutosaving:D.default.isAutosaving(),isLoading:D.default.isLoading()}},componentWillMount:function(){D.default.on("change",this.onEditedPostChange),this.debouncedSaveRawContent=(0,c.default)(this.saveRawContent,200),this.throttledAutosave=(0,d.default)(this.autosave,2e4),this.debouncedAutosave=(0,c.default)(this.throttledAutosave,3e3),this.switchEditorVisualMode=this.switchEditorMode.bind(this,"tinymce"),this.switchEditorHtmlMode=this.switchEditorMode.bind(this,"html"),this.debouncedCopySelectedText=(0,c.default)(this.copySelectedText,200),this.onPreviewClick=this.onPreview.bind(this,"preview"),this.onViewClick=this.onPreview.bind(this,"view"),this.useDefaultSidebarFocus(),se.default.mc.bumpStat("calypso_default_sidebar_mode",this.props.editorSidebarPreference),this.setState({isEditorInitialized:!1})},componentDidUpdate:function(e,t){t.nestedSidebar!==Ye.NESTED_SIDEBAR_NONE&&this.state.nestedSidebar===Ye.NESTED_SIDEBAR_NONE&&(window.scrollTo(0,1),window.scrollTo(0,0))},componentWillUpdate:function(e,t){var n=t.isNew,o=t.savedPost;!n&&o&&o!==this.state.savedPost&&e.receivePost(o),t.isDirty||e.dirty?this.props.markChanged():this.props.markSaved()},componentDidMount:function(){this.state.post&&this.state.post.content&&this.editor.setEditorContent(this.state.post.content,{initial:!0})},componentWillUnmount:function(){D.default.removeListener("change",this.onEditedPostChange),k.default.stopEditing(),this.debouncedAutosave.cancel(),this.throttledAutosave.cancel(),this.debouncedSaveRawContent.cancel(),this.debouncedCopySelectedText.cancel(),this._previewWindow=null,clearTimeout(this._switchEditorTimeout)},componentWillReceiveProps:function(e){var t=this.props,n=t.siteId,o=t.postId;e.siteId===n&&e.postId!==o&&y.default.replace(e.editPath,null,!1,!1),(e.siteId!==n||e.siteId===n&&e.postId!==o)&&this.useDefaultSidebarFocus(e)},storeEditor:function(e){this.editor=e},useDefaultSidebarFocus:function(e){var t=e||this.props;(0,qe.isWithinBreakpoint)(">660px")&&("open"===t.editorSidebarPreference||t.hasBrokenPublicizeConnection)&&this.props.setLayoutFocus("sidebar")},hideNotice:function(){this.setState({notice:null})},getLayout:function(){return this.props.setLayoutFocus("content")},setConfirmationSidebar:function(e){var t=e.status,n=e.context,o=void 0===n?null:n,r=["closed","open","publishing"],i=r.indexOf(t)>-1?t:"closed",s="open"===this.props.editorSidebarPreference?"sidebar":"content";switch(this.setState({confirmationSidebar:i}),i){case"closed":this.props.setLayoutFocus(s),se.default.tracks.recordEvent("calypso_editor_confirmation_sidebar_close",{context:o});break;case"open":this.props.setLayoutFocus("editor-confirmation-sidebar"),se.default.tracks.recordEvent("calypso_editor_confirmation_sidebar_open")}},copySelectedText:function(){var e=S.default.activeEditor.selection.getContent()||null;this.state.selectedText!==e&&this.setState({selectedText:e||null})},handleConfirmationSidebarPreferenceChange:function(e){this.setState({confirmationSidebarPreference:e.target.checked})},toggleSidebar:function(){"sidebar"===this.props.layoutFocus?(this.props.setEditorSidebar("closed"),this.props.setLayoutFocus("content"),(0,re.recordStat)("close-sidebar"),(0,re.recordEvent)("Sidebar Toggle","close")):(this.props.setEditorSidebar("open"),this.props.setLayoutFocus("sidebar"),(0,re.recordStat)("open-sidebar"),(0,re.recordEvent)("Sidebar Toggle","open"))},setNestedSidebar:function(e){this.setState({nestedSidebar:e})},selectRevision:function(e){this.setState({selectedRevisionId:e}),null!==e&&(0,qe.isWithinBreakpoint)("<660px")&&this.props.setLayoutFocus("content")},loadRevision:function(e){this.setNestedSidebar(Ye.NESTED_SIDEBAR_NONE),this.setState({selectedRevisionId:null}),this.restoreRevision({content:e.content,excerpt:e.excerpt,title:e.title}),(0,qe.isWithinBreakpoint)("<660px")&&this.props.setLayoutFocus("content")},render:function(){var e=this.props.selectedSite||void 0,t=this.getEditorMode(),n=this.state.loadingError,o=e?e.URL+"/":null,r=void 0,s=void 0,l=void 0;this.state.post&&(r=te.default.isPage(this.state.post),s="trash"===this.state.post.status,l=(0,a.default)(this.state.post.meta,["data","autosave"]));var d=(0,w.default)("post-editor",{"is-loading":!this.state.isEditorInitialized});return f.default.createElement("div",{className:d},f.default.createElement(Ne.default,null),f.default.createElement(ye.default,{handlePreferenceChange:this.handleConfirmationSidebarPreferenceChange,onPrivatePublish:this.onPublish,onPublish:this.onPublish,post:this.state.post,savedPost:this.state.savedPost,setPostDate:this.setPostDate,setStatus:this.setConfirmationSidebar,site:e,status:this.state.confirmationSidebar}),f.default.createElement(be.default,null),f.default.createElement(xe.default,null),f.default.createElement(Ee.default,null),f.default.createElement("div",{className:"post-editor__inner"},f.default.createElement(Ve.default,{setPostDate:this.setPostDate,hasContent:this.state.hasContent,isConfirmationSidebarEnabled:this.props.isConfirmationSidebarEnabled,confirmationSidebarStatus:this.state.confirmationSidebar,isDirty:this.state.isDirty||this.props.dirty,isSaveBlocked:this.isSaveBlocked(),isPublishing:this.state.isPublishing,isSaving:this.state.isSaving,onPreview:this.onPreviewClick,onPublish:this.onPublish,onSave:this.onSave,onSaveDraft:this.props.onSaveDraft,post:this.state.post,savedPost:this.state.savedPost,site:e,user:this.props.user,userUtils:this.props.userUtils,toggleSidebar:this.toggleSidebar,type:this.props.type,onMoreInfoAboutEmailVerify:this.onMoreInfoAboutEmailVerify,allPostsUrl:this.getAllPostsUrl(),nestedSidebar:this.state.nestedSidebar}),f.default.createElement("div",{className:"post-editor__content"},f.default.createElement("div",{className:"post-editor__content-editor"},f.default.createElement(O.default,{isNew:this.state.isNew,onPrivatePublish:this.onPublish,savedPost:this.state.savedPost,site:e,type:this.props.type,isPostPrivate:te.default.isPrivate(this.state.post),postAuthor:this.state.post?this.state.post.author:null,hasEditorNestedSidebar:this.state.nestedSidebar!==Ye.NESTED_SIDEBAR_NONE}),f.default.createElement("div",{className:"post-editor__site"},f.default.createElement(Fe.default,{compact:!0,site:e,indicator:!1,homeLink:!0,externalLink:!0}),f.default.createElement(ze.default,{post:this.state.savedPost,type:this.props.type})),f.default.createElement("div",{className:(0,w.default)("post-editor__inner-content",{"is-shown":this.state.nestedSidebar===Ye.NESTED_SIDEBAR_NONE})},f.default.createElement(L.default,{site:e,post:this.state.post,maxWidth:1462}),f.default.createElement("div",{className:"post-editor__header"},f.default.createElement(B.default,{onChange:this.onEditorTitleChange,tabIndex:1}),this.state.post&&r&&e?f.default.createElement(U.default,{path:this.state.post.URL&&this.state.post.URL!==o?te.default.getPagePath(this.state.post):o}):null,f.default.createElement(q.default,{className:"post-editor__switch-mode",compact:!0},f.default.createElement(K.default,{selected:"tinymce"===t,onClick:this.switchEditorVisualMode,title:this.props.translate("Edit with a visual editor")},this.props.translate("Visual",{context:"Editor writing mode"})),f.default.createElement(K.default,{selected:"html"===t,onClick:this.switchEditorHtmlMode,title:this.props.translate("Edit the raw HTML code")},"HTML"))),f.default.createElement("hr",{className:"post-editor__header-divider"}),f.default.createElement(W.default,{ref:this.storeEditor,mode:t,tabIndex:2,isNew:this.state.isNew,onSetContent:this.debouncedSaveRawContent,onInit:this.onEditorInitialized,onChange:this.onEditorContentChange,onKeyUp:this.onEditorKeyUp,onFocus:this.onEditorFocus,onMouseUp:this.copySelectedText,onBlur:this.copySelectedText,onTextEditorChange:this.onEditorTextContentChange}),f.default.createElement(Te.default,{selectedText:this.state.selectedText})),this.state.nestedSidebar===Ye.NESTED_SIDEBAR_REVISIONS&&f.default.createElement($e.default,{siteId:e.ID,postId:this.state.post.ID,selectedRevisionId:this.state.selectedRevisionId}))),f.default.createElement(Ae.default,{toggleSidebar:this.toggleSidebar,savedPost:this.state.savedPost,post:this.state.post,isNew:this.state.isNew,onPublish:this.onPublish,onTrashingPost:this.onTrashingPost,site:e,type:this.props.type,setPostDate:this.setPostDate,onSave:this.onSave,isPostPrivate:te.default.isPrivate(this.state.post),confirmationSidebarStatus:this.state.confirmationSidebar,setNestedSidebar:this.setNestedSidebar,nestedSidebar:this.state.nestedSidebar,loadRevision:this.loadRevision,selectedRevisionId:this.state.selectedRevisionId,selectRevision:this.selectRevision}),this.props.isSitePreviewable?f.default.createElement(oe.default,{showPreview:this.state.showPreview,onClose:this.onPreviewClose,onEdit:this.onPreviewEdit,isSaving:this.state.isSaving||this.state.isAutosaving,isLoading:this.state.isLoading,isFullScreen:this.state.isPostPublishPreview,previewUrl:this.getPreviewUrl(),externalUrl:this.getExternalUrl(),editUrl:this.props.editPath,defaultViewportDevice:this.state.isPostPublishPreview?"computer":"tablet",revision:(0,a.default)(this.state,"post.revisions.length",0)}):null,f.default.createElement(je.default,(0,i.default)({},this.state.notice,{onDismissClick:this.hideNotice,onViewClick:this.onPreview}))),s?f.default.createElement(Z.default,{onClose:this.onClose,onRestore:this.onSaveTrashed}):null,this.state.showVerifyEmailDialog?f.default.createElement(Q.default,{onClose:this.closeVerifyEmailDialog}):null,n?f.default.createElement(Y.default,{post:this.state.post,onClose:this.onClose}):null,l&&this.state.showAutosaveDialog?f.default.createElement(Z.default,{onRestore:this.restoreAutosave,onClose:this.closeAutosaveDialog,isAutosave:!0}):null)},restoreAutosave:function(){this.setState({showAutosaveDialog:!1}),this.restoreRevision((0,a.default)(this.state,"post.meta.data.autosave"))},restoreRevision:function(e){this.setState({isLoadingRevision:!0}),k.default.edit({content:e.content,excerpt:e.excerpt,title:e.title}),this.props.editPost(this.props.siteId,this.props.postId,{title:e.title})},closeAutosaveDialog:function(){this.setState({showAutosaveDialog:!1})},closeVerifyEmailDialog:function(){this.setState({showVerifyEmailDialog:!1})},onEditedPostChange:function(){var e,t,n,o=this,r=this.state.isLoading&&!D.default.isLoading(),i=D.default.getLoadingError();i?this.setState({loadingError:i}):D.default.isNew()&&!this.state.isNew||D.default.isLoading()?this.setState(this.getInitialState(),function(){return o.editor&&o.editor.setEditorContent("")}):this.state.isNew&&this.state.hasContent&&!this.state.isDirty?this.setState(this.getInitialState(),function(){return o.editor&&o.editor.setEditorContent(o.state.post.content)}):(e=this.getPostEditState(),t=e.post,n=this.props.selectedSite,r&&n&&"page"===this.props.type!==te.default.isPage(t)&&y.default.redirect(te.default.getEditURL(t,n)),this.setState(e,function(){this.editor&&(r||this.state.isLoadingRevision)&&this.editor.setEditorContent(this.state.post.content,{initial:!0}),this.state.isLoadingRevision&&this.setState({isLoadingRevision:!1})}))},isSaveBlocked:function(){return this.state.isSaveBlocked||!this.state.isEditorInitialized},onEditorInitialized:function(){this.setState({isEditorInitialized:!0})},onEditorTitleChange:function(){"open"===this.state.confirmationSidebar&&this.setConfirmationSidebar({status:"closed",context:"content_edit"}),this.debouncedAutosave()},onEditorContentChange:function(){this.debouncedSaveRawContent(),this.debouncedAutosave()},onEditorTextContentChange:function(){"open"===this.state.confirmationSidebar&&this.setConfirmationSidebar({status:"closed",context:"content_edit"}),this.debouncedSaveRawContent(),this.debouncedAutosave()},onEditorKeyUp:function(){"open"===this.state.confirmationSidebar&&this.setConfirmationSidebar({status:"closed",context:"content_edit"}),this.debouncedCopySelectedText(),this.debouncedSaveRawContent()},onEditorFocus:function(){h.default.findDOMNode(this.editor).click()},saveRawContent:function(){k.default.editRawContent(this.editor.getContent({format:"raw"}))},autosave:function(){var e;if(this.state.isSaving!==!0&&!this.isSaveBlocked()){this.saveRawContent();var t=(0,i.default)({},this.props.edits,{content:this.editor.getContent()});k.default.edit(t),D.default.isDirty()&&D.default.hasContent()&&this.state.post&&(te.default.isPublished(this.state.savedPost)||te.default.isPublished(this.state.post)?e=function(){}:(this.setState({isSaving:!0}),e=function(e){e&&"NO_CHANGE"!==e.message?this.onSaveDraftFailure(e):this.onSaveDraftSuccess()}.bind(this)),k.default.autosave(e))}},onClose:function(){y.default.back(this.getAllPostsUrl())},getAllPostsUrl:function(){var e=this.props,t=e.type,n=e.selectedSite,o=n,r=void 0;switch(t){case"page":r="/pages";break;case"post":r="/posts";break;default:r="/types/"+t}return"post"!==t||!o||o.jetpack||o.single_user_site||(r+="/my"),o&&(r=N.default.addSiteFragment(r,o.slug)),r},onMoreInfoAboutEmailVerify:function(){this.setState({showVerifyEmailDialog:!0})},onTrashingPost:function(e){var t=te.default.isPage(this.state.post);e?this.setState({notice:{status:"is-error",message:"trashFailure"}}):((0,re.recordStat)(t?"page_trashed":"post_trashed"),(0,re.recordEvent)(t?"Clicked Trash Page Button":"Clicked Trash Post Button"),this.props.markSaved(),this.onClose())},onSaveTrashed:function(e,t){this.onSave(e,t)},onSave:function(e,t){var n=(0,i.default)({},this.props.edits);e&&(n.status=e),!te.default.isPublished(this.state.savedPost)&&(!e&&te.default.isPublished(this.state.post)||te.default.isPublished(n))||(n.content=this.editor.getContent(),k.default.saveEdited(n,{isConfirmationSidebarEnabled:this.props.isConfirmationSidebarEnabled},function(e){e&&"NO_CHANGE"!==e.message?this.onSaveDraftFailure(e):this.onSaveDraftSuccess(),"function"==typeof t&&t(e)}.bind(this)),this.setState({isSaving:!0}))},getPreviewUrl:function(){var e=this.state,t=e.post,n=e.previewAction,o=e.previewUrl;return"view"===n&&t?t.URL:o},getExternalUrl:function(){var e=this.state.post;return e?e.URL:this.getPreviewUrl()},onPreview:function(e,t){var n,o="draft";return this.state.previewAction!==e&&this.setState({previewAction:e}),!this.props.isSitePreviewable||t.metaKey||t.ctrlKey?(this._previewWindow&&!this._previewWindow.closed||(this._previewWindow=window.open("about:blank","WordPress.com Post Preview")),this.state.savedPost&&this.state.savedPost.status&&(o=this.state.savedPost.status),n=function(){this._previewWindow?(this._previewWindow.location=this.getPreviewUrl(),this._previewWindow.focus()):this._previewWindow=window.open(this.getPreviewUrl(),"WordPress.com Post Preview")}.bind(this),void("publish"===o?(k.default.edit({content:this.editor.getContent()}),k.default.autosave(n)):this.onSave(null,n))):this.iframePreview()},iframePreview:function(){this.state.isDirty||this.props.dirty?(this.autosave(),setTimeout(function(){this.setState({showPreview:!0})}.bind(this),150)):this.setState({showPreview:!0
})},onPreviewClose:function(){this.state.isPostPublishPreview?y.default.back(this.getAllPostsUrl()):this.setState({showPreview:!1,isPostPublishPreview:!1,previewAction:null})},onPreviewEdit:function(){return this.setState({showPreview:!1,isPostPublishPreview:!1,previewAction:null}),!1},onSaveDraftFailure:function(e){this.onSaveFailure(e,"saveFailure")},onSaveDraftSuccess:function(){var e=this.state.post;te.default.isPublished(e)?this.onSaveSuccess("updated"):this.onSaveSuccess()},onPublish:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=(0,i.default)({},this.props.edits,{status:"publish"});return this.props.isConfirmationSidebarEnabled&&!1===e?void this.setConfirmationSidebar({status:"open"}):(this.props.isConfirmationSidebarEnabled&&"open"===this.state.confirmationSidebar&&this.setConfirmationSidebar({status:"publishing"}),te.default.isPrivate(this.state.post)?t.status="private":te.default.isFutureDated(this.state.post)&&(t.status="future"),t.content=this.editor.getContent(),k.default.saveEdited(t,{isConfirmationSidebarEnabled:this.props.isConfirmationSidebarEnabled},function(e){e&&"NO_CHANGE"!==e.message?this.onPublishFailure(e):this.onPublishSuccess()}.bind(this)),void this.setState({isSaving:!0,isPublishing:!0}))},onPublishFailure:function(e){this.onSaveFailure(e,"publishFailure"),this.props.isConfirmationSidebarEnabled&&this.setConfirmationSidebar({status:"closed",context:"publish_failure"})},onPublishSuccess:function(){var e=this.state.savedPost,t=void 0;t=te.default.isPrivate(e)?"publishedPrivately":te.default.isFutureDated(e)?"scheduled":"published",this.state.confirmationSidebarPreference||this.props.saveConfirmationSidebarPreference(this.props.siteId,!1),this.props.isConfirmationSidebarEnabled&&this.setConfirmationSidebar({status:"closed",context:"publish_success"}),this.onSaveSuccess(t)},onSaveFailure:function(e,t){this.setState({isSaving:!1,isPublishing:!1,notice:{status:"is-error",error:e,message:t}}),window.scrollTo(0,0)},setPostDate:function(e){var t=this.props,n=t.siteId,o=t.postId,r=e?e.format():null;k.default.edit({date:r}),n&&o&&this.props.editPost(n,o,{date:r}),se.default.tracks.recordEvent("calypso_editor_publish_date_change",{context:"open"===this.state.confirmationSidebar?"confirmation-sidebar":"post-settings"}),this.checkForDateChange(r)},checkForDateChange:function(e){var t=this.state.savedPost;if(t){var n=this.moment(e),o=this.moment(t.date),r=!(n.get("date")===o.get("date")&&n.get("month")===o.get("month")&&n.get("year")===o.get("year")),i=!!n.diff(o)&&!!r;"post"===t.type&&te.default.isPublished(t)&&i?this.warnPublishDateChange():this.warnPublishDateChange({clearWarning:!0})}},warnPublishDateChange:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.clearWarning,n=void 0!==t&&t;return n?void("warnPublishDateChange"===(0,a.default)(this.state,"notice.message")&&this.hideNotice()):void this.setState({notice:{status:"is-warning",message:"warnPublishDateChange"}})},onSaveSuccess:function(e){var t=D.default.get(),n="private"!==t.status||"closed"!==this.state.confirmationSidebar;"draft"===t.status?this.props.setEditorLastDraft(t.site_ID,t.ID):this.props.resetEditorLastDraft(),this.props.savePostSuccess(t.site_ID,this.props.postId,t,{}),this.props.receivePost(t);var o={isSaving:!1,isPublishing:!1};e?(o.notice={status:"is-success",message:e},window.scrollTo(0,0),this.props.isSitePreviewable&&n&&(this.setState({isPostPublishPreview:!0}),this.iframePreview())):o.notice=null,this.setState(o)},getEditorMode:function(){var e="tinymce";return this.props.editorModePreference&&(e=this.props.editorModePreference,this.recordedDefaultEditorMode||(se.default.mc.bumpStat("calypso_default_editor_mode",e),this.recordedDefaultEditorMode=!0)),e},getContainingTagInfo:function(e,t){var n=e.lastIndexOf("<",t),o=e.lastIndexOf(">",t);if(n>o){var r=e.substr(n),i=r.match(/<\s*(\/)?(\w+)/);if(!i)return null;var s=i[2],a=r.indexOf(">"),l=!!i[1];return{ltPos:n,gtPos:n+a+1,tagType:s,isClosingTag:l}}return null},getCursorMarkerSpan:function(e){var t=e?e:"start";return'<span\n\t\t\t\tdata-mce-type="bookmark"\n\t\t\t\tid="mce_SELREST_'+t+'"\n\t\t\t\tdata-mce-style="overflow:hidden;line-height:0"\n\t\t\t\tstyle="overflow:hidden;line-height:0"\n\t\t\t>&#65279;</span>'},addHTMLBookmarkInTextAreaContent:function(){var e=this.editor._editor.getElement(),t=e.selectionStart,n=e.selectionEnd,o=this.getContainingTagInfo(e.value,t);o&&(t=o.ltPos);var r=this.getContainingTagInfo(e.value,n);r&&(n=r.gtPos);var i=t!==n?"range":"single",s=null;if("range"===i){var a=this.getCursorMarkerSpan("end");s=[e.value.slice(t,n),a].join("")}e.value=[e.value.slice(0,t),this.getCursorMarkerSpan("start"),s,e.value.slice(n)].join(""),this.editor.onTextAreaChange({target:{value:e.value}})},focusHTMLBookmarkInVisualEditor:function(e){var t=e.target.getDoc().getElementById("mce_SELREST_start"),n=e.target.getDoc().getElementById("mce_SELREST_end");if(t){if(e.target.focus(),n){var o=document.createRange();o.setStart(t,0),o.setEnd(n,0),e.target.selection.setRng(o),n.parentNode.removeChild(n)}else e.target.selection.select(t);t.parentNode.removeChild(t),e.target.off("SetContent",this.focusHTMLBookmarkInVisualEditor)}},findBookmarkedPosition:function(e){var t=e.getWin(),n=t.getSelection();if(!(n.rangeCount<=0)){var o="SELRES_"+(0,T.v4)(),r=document.createElement("span");r.className="mce_SELRES_start",r.style.display="inline-block",r.style.width=0,r.style.overflow="hidden",r.style.lineHeight="0px",r.innerHTML=o;var i=document.createElement("span");i.className="mce_SELRES_end",i.style.display="inline-block",i.style.width=0,i.style.overflow="hidden",i.style.lineHeight="0px",i.innerHTML=o;var s=n.getRangeAt(0),a=s.startContainer,l=s.startOffset,d=s.cloneRange();d.collapse(!1),d.insertNode(i),d.setStart(a,l),d.collapse(!0),d.insertNode(r),s.setStartAfter(r),s.setEndBefore(i),n.removeAllRanges(),n.addRange(s);var u=(0,Je.removep)(e.getContent()),c=new RegExp('<span[^>]*\\s*class="mce_SELRES_start"[^>]+>\\s*'+o+"[^<]*<\\/span>"),p=new RegExp('<span[^>]*\\s*class="mce_SELRES_end"[^>]+>\\s*'+o+"[^<]*<\\/span>"),f=u.match(c),m=u.match(p);return f?{start:f.index,end:m?m.index-f[0].length:null}:null}},switchEditorMode:function(e){var t=this.editor.getContent();if("html"===e){var n=this.findBookmarkedPosition(this.editor._editor);this.editor.setEditorContent(t),this.state.selectedText&&this.copySelectedText(),this.editor.setSelection(n)}else"tinymce"===e&&(this.addHTMLBookmarkInTextAreaContent(),this.editor._editor.on("SetContent",this.focusHTMLBookmarkInVisualEditor));this.props.setEditorModePreference(e),this._switchEditorTimeout=setTimeout(function(){k.default.edit({content:t}),"html"===e?k.default.editRawContent(t):this.saveRawContent()}.bind(this),0)}});t.default=(0,_.connect)(function(e){var t=(0,ae.getSelectedSiteId)(e),n=(0,ue.getEditorPostId)(e),o=(0,fe.getCurrentUserId)(e);return{siteId:t,postId:n,selectedSite:(0,ae.getSelectedSite)(e),editorModePreference:(0,ke.getPreference)(e,"editor-mode"),editorSidebarPreference:(0,ke.getPreference)(e,"editor-sidebar")||"open",editPath:(0,ue.getEditorPath)(e,t,n),edits:(0,pe.getPostEdits)(e,t,n),dirty:(0,pe.isEditedPostDirty)(e,t,n),hasContent:(0,He.default)(e,t,n),layoutFocus:(0,De.getCurrentLayoutFocus)(e),hasBrokenPublicizeConnection:(0,he.default)(e,t,o),isSitePreviewable:(0,Ge.isSitePreviewable)(e,t),isConfirmationSidebarEnabled:(0,ue.isConfirmationSidebarEnabled)(e,t)}},function(e){return(0,x.bindActionCreators)({setEditorLastDraft:de.setEditorLastDraft,resetEditorLastDraft:de.resetEditorLastDraft,receivePost:ce.receivePost,editPost:ce.editPost,savePostSuccess:ce.savePostSuccess,setEditorModePreference:Pe.savePreference.bind(null,"editor-mode"),setEditorSidebar:Pe.savePreference.bind(null,"editor-sidebar"),setLayoutFocus:Re.setLayoutFocus,saveConfirmationSidebarPreference:le.saveConfirmationSidebarPreference},e)},null,{pure:!1})((0,Me.protectForm)((0,C.localize)(Ze)))},"./client/post-editor/restore-post-dialog.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=o(p),m=n("./node_modules/lodash/get.js"),h=o(m),g=n("./node_modules/lodash/noop.js"),y=o(g),v=n("./node_modules/react/react.js"),b=o(v),_=n("./node_modules/react-redux/es/index.js"),x=n("./node_modules/i18n-calypso/index.js"),C=n("./client/components/dialog/index.jsx"),E=o(C),w=n("./client/components/forms/form-button/index.jsx"),j=o(w),S=n("./client/state/ui/selectors.js"),T=n("./client/state/ui/editor/selectors.js"),P=n("./client/state/posts/selectors.js"),k=function(e){function t(){var e,n,o,r;(0,a.default)(this,t);for(var s=arguments.length,l=Array(s),d=0;d<s;d++)l[d]=arguments[d];return n=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.restorePost=function(){var e=o.props,t=e.isAutosave,n=e.userCanDeletePost,r=e.onRestore;t?r():n&&r("draft")},o.getStrings=function(){var e=o.props,t=e.isAutosave,n=e.postType,r=e.translate,i="page"===n;return t?i?{dialogTitle:r("Saved Draft"),dialogContent:r("A more recent revision of this page exists. Restore?")}:{dialogTitle:r("Saved Draft"),dialogContent:r("A more recent revision of this post exists. Restore?")}:i?{dialogTitle:r("Deleted Page"),dialogContent:r("This page has been sent to the trash. Restore it to continue writing.")}:{dialogTitle:r("Deleted Post"),dialogContent:r("This post has been sent to the trash. Restore it to continue writing.")}},r=n,(0,c.default)(o,r)}return(0,f.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){var e=this.props,t=e.onClose,n=e.translate,o=this.getStrings(),r=[b.default.createElement(j.default,{key:"restore",isPrimary:!0,onClick:this.restorePost},n("Restore")),b.default.createElement(j.default,{key:"back",isPrimary:!1,onClick:t},n("Don't restore"))];return b.default.createElement(E.default,{isVisible:!0,buttons:r},b.default.createElement("h1",null,o.dialogTitle),b.default.createElement("p",null,o.dialogContent))}}]),t}(v.Component);k.propTypes={translate:v.PropTypes.func,onClose:v.PropTypes.func,onRestore:v.PropTypes.func,isAutosave:v.PropTypes.bool,postType:v.PropTypes.string,userCanDeletePost:v.PropTypes.bool},k.defaultProps={onClose:y.default,onRestore:y.default,isAutosave:!1},t.default=(0,_.connect)(function(e){var t=(0,S.getSelectedSiteId)(e),n=(0,T.getEditorPostId)(e),o=(0,P.getEditedPostValue)(e,t,n,"capabilities");return{postType:(0,P.getEditedPostValue)(e,t,n,"type"),userCanDeletePost:(0,h.default)(o,"delete_post")}})((0,x.localize)(k)),e.exports=t.default},"./client/post-editor/term-token-field/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/keys.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/defineProperty.js"),a=o(s),l=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),d=o(l),u=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/createClass.js"),f=o(p),m=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),h=o(m),g=n("./node_modules/babel-runtime/helpers/inherits.js"),y=o(g),v=n("./node_modules/lodash/map.js"),b=o(v),_=n("./node_modules/react/react.js"),x=o(_),C=n("./node_modules/react-redux/es/index.js"),E=n("./node_modules/debug/browser.js"),w=o(E),j=n("./client/state/ui/selectors.js"),S=n("./client/state/terms/selectors.js"),T=n("./client/state/ui/editor/selectors.js"),P=n("./client/state/posts/selectors.js"),k=n("./client/state/post-types/taxonomies/selectors.js"),I=n("./client/state/posts/actions.js"),N=n("./client/components/token-field/index.jsx"),R=o(N),D=n("./client/lib/formatting/index.js"),M=n("./client/lib/posts/stats.js"),O=n("./client/components/data/query-terms/index.jsx"),A=o(O),L=(0,w.default)("calypso:post-editor:editor-terms"),F={number:1e3,order_by:"count",order:"DESC"},B=20,z=function(e){function t(){return(0,c.default)(this,t),(0,h.default)(this,(t.__proto__||(0,d.default)(t)).apply(this,arguments))}return(0,y.default)(t,e),(0,f.default)(t,[{key:"componentWillMount",value:function(){this.boundOnTermsChange=this.onTermsChange.bind(this)}},{key:"onTermsChange",value:function(e){L("onTermsChange",e,this);var t=void 0,n=void 0;e.length>this.getPostTerms().length?(t="term_added",n="Added Term"):(t="term_removed",n="Removed Term"),(0,M.recordStat)(t),(0,M.recordEvent)("Changed Terms",n);var o=this.props,r=o.siteId,i=o.postId,s=o.taxonomyName;this.props.editPost(r,i,{terms:(0,a.default)({},s,e)})}},{key:"getPostTerms",value:function(){var e=this.props,t=e.postTerms,n=e.taxonomyName;return t&&t[n]?Array.isArray(t[n])?t[n]:(0,i.default)(t[n]):[]}},{key:"render",value:function(){var e=(0,b.default)(this.props.terms,"name");return x.default.createElement("div",null,x.default.createElement(A.default,{siteId:this.props.siteId,taxonomy:this.props.taxonomyName,query:F}),x.default.createElement(R.default,{value:this.getPostTerms(),displayTransform:D.decodeEntities,suggestions:e,onChange:this.boundOnTermsChange,maxSuggestions:B}))}}]),t}(x.default.Component);z.propTypes={siteId:x.default.PropTypes.number,postId:x.default.PropTypes.number,postTerms:x.default.PropTypes.object,taxonomyName:x.default.PropTypes.string,taxonomyLabel:x.default.PropTypes.string,terms:x.default.PropTypes.arrayOf(x.default.PropTypes.object),editPost:x.default.PropTypes.func},t.default=(0,C.connect)(function(e,t){var n=(0,j.getSelectedSiteId)(e),o=(0,T.getEditorPostId)(e),r=(0,P.getEditedPostValue)(e,n,o,"type"),i=(0,k.getPostTypeTaxonomy)(e,n,r,t.taxonomyName);return{siteId:n,postId:o,taxonomyLabel:i&&i.label,terms:(0,S.getTerms)(e,n,t.taxonomyName),postTerms:(0,P.getEditedPostValue)(e,n,o,"terms")}},{editPost:I.editPost})(z),e.exports=t.default},"./client/state/current-user/email-verification/actions.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetVerifyEmailState=t.verifyEmail=void 0;var o=n("./client/state/action-types.js");t.verifyEmail=function(){return{type:o.EMAIL_VERIFY_REQUEST}},t.resetVerifyEmailState=function(){return{type:o.EMAIL_VERIFY_STATE_RESET}}},"./client/state/jetpack/modules/actions.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){return{type:c.JETPACK_MODULES_RECEIVE,siteId:e,modules:t}}Object.defineProperty(t,"__esModule",{value:!0}),t.fetchModuleList=t.deactivateModule=t.activateModule=void 0;var i=n("./node_modules/babel-runtime/helpers/extends.js"),s=o(i),a=n("./node_modules/lodash/mapValues.js"),l=o(a),d=n("./node_modules/lodash/omit.js"),u=o(d);t.receiveJetpackModules=r;var c=n("./client/state/action-types.js"),p=n("./client/lib/wp/browser.js"),f=o(p);t.activateModule=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(o){return o({type:c.JETPACK_MODULE_ACTIVATE,siteId:e,moduleSlug:t,silent:n}),f.default.undocumented().jetpackModuleActivate(e,t).then(function(){o({type:c.JETPACK_MODULE_ACTIVATE_SUCCESS,siteId:e,moduleSlug:t,silent:n})}).catch(function(r){o({type:c.JETPACK_MODULE_ACTIVATE_FAILURE,siteId:e,moduleSlug:t,silent:n,error:r.message})})}},t.deactivateModule=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(o){return o({type:c.JETPACK_MODULE_DEACTIVATE,siteId:e,moduleSlug:t,silent:n}),f.default.undocumented().jetpackModuleDeactivate(e,t).then(function(){o({type:c.JETPACK_MODULE_DEACTIVATE_SUCCESS,siteId:e,moduleSlug:t,silent:n})}).catch(function(r){o({type:c.JETPACK_MODULE_DEACTIVATE_FAILURE,siteId:e,moduleSlug:t,silent:n,error:r.message})})}},t.fetchModuleList=function(e){return function(t){return t({type:c.JETPACK_MODULES_REQUEST,siteId:e}),f.default.undocumented().getJetpackModules(e).then(function(n){var o=n.data,i=(0,l.default)(o,function(e){return(0,s.default)({active:e.activated},(0,u.default)(e,"activated"))});t(r(e,i)),t({type:c.JETPACK_MODULES_REQUEST_SUCCESS,siteId:e})}).catch(function(n){t({type:c.JETPACK_MODULES_REQUEST_FAILURE,siteId:e,error:n.message})})}}},"./client/state/page-templates/actions.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){return{type:l.PAGE_TEMPLATES_RECEIVE,siteId:e,templates:t}}function i(e){return function(t){return t({type:l.PAGE_TEMPLATES_REQUEST,siteId:e}),a.default.site(e).pageTemplates().then(function(n){var o=n.templates;t(r(e,o)),t({type:l.PAGE_TEMPLATES_REQUEST_SUCCESS,siteId:e})}).catch(function(n){t({type:l.PAGE_TEMPLATES_REQUEST_FAILURE,siteId:e,error:n})})}}Object.defineProperty(t,"__esModule",{value:!0}),t.receivePageTemplates=r,t.requestPageTemplates=i;var s=n("./client/lib/wp/browser.js"),a=o(s),l=n("./client/state/action-types.js")},"./client/state/page-templates/selectors.js":function(e,t,n){"use strict";function o(e,t){return!!e.pageTemplates.requesting[t]}function r(e,t){return e.pageTemplates.items[t]||null}Object.defineProperty(t,"__esModule",{value:!0}),t.isRequestingPageTemplates=o,t.getPageTemplates=r},"./client/state/post-types/taxonomies/actions.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){return{type:l.POST_TYPES_TAXONOMIES_RECEIVE,siteId:e,postType:t,taxonomies:n}}function i(e,t){return function(n){return n({type:l.POST_TYPES_TAXONOMIES_REQUEST,siteId:e,postType:t}),a.default.site(e).postType(t).taxonomiesList().then(function(o){var i=o.taxonomies;n(r(e,t,i)),n({type:l.POST_TYPES_TAXONOMIES_REQUEST_SUCCESS,siteId:e,postType:t})}).catch(function(o){n({type:l.POST_TYPES_TAXONOMIES_REQUEST_FAILURE,siteId:e,postType:t,error:o})})}}Object.defineProperty(t,"__esModule",{value:!0}),t.receivePostTypeTaxonomies=r,t.requestPostTypeTaxonomies=i;var s=n("./client/lib/wp/browser.js"),a=o(s),l=n("./client/state/action-types.js")},"./client/state/post-types/taxonomies/selectors.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){return(0,u.default)(e.postTypes.taxonomies.requesting,[t,n],!1)}function i(e,t,n){var o=(0,u.default)(e.postTypes.taxonomies.items,[t,n]);return o?(0,l.default)(o):null}function s(e,t,n,o){var r=i(e,t,n);return r?(0,p.default)(r,{name:o})||null:null}Object.defineProperty(t,"__esModule",{value:!0});var a=n("./node_modules/lodash/values.js"),l=o(a),d=n("./node_modules/lodash/get.js"),u=o(d),c=n("./node_modules/lodash/find.js"),p=o(c);t.isRequestingPostTypeTaxonomies=r,t.getPostTypeTaxonomies=i,t.getPostTypeTaxonomy=s},"./client/state/sharing/keyring/actions.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(){return function(e){return e({type:c.KEYRING_CONNECTIONS_REQUEST}),u.default.undocumented().mekeyringConnections().then(function(t){var n=t.connections;e({type:c.KEYRING_CONNECTIONS_RECEIVE,connections:n}),e({type:c.KEYRING_CONNECTIONS_REQUEST_SUCCESS})}).catch(function(t){return e({type:c.KEYRING_CONNECTIONS_REQUEST_FAILURE,error:t})})}}function i(e){return{type:c.KEYRING_CONNECTION_DELETE,connection:e}}function s(e){return function(t){return u.default.undocumented().deletekeyringConnection(e.ID).then(function(){return t(i(e))}).catch(function(n){n&&404===n.statusCode&&t(i(e)),t({type:c.KEYRING_CONNECTION_DELETE_FAILURE,error:(0,l.default)({},n,{label:e.label})})})}}Object.defineProperty(t,"__esModule",{value:!0});var a=n("./node_modules/babel-runtime/helpers/extends.js"),l=o(a);t.requestKeyringConnections=r,t.deleteKeyringConnection=i,t.deleteStoredKeyringConnection=s;var d=n("./client/lib/wp/browser.js"),u=o(d),c=n("./client/state/action-types.js")},"./client/state/sharing/keyring/selectors.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){return(0,u.default)(e.sharing.keyring.items)}function i(e,t){return e.sharing.keyring.items[t]||null}function s(e,t){return(0,p.default)(r(e),{service:t})}function a(e,t){return(0,p.default)(e.sharing.keyring.items,function(e){return e.shared||e.keyring_connection_user_ID===t})}function l(e){return e.sharing.keyring.isFetching}Object.defineProperty(t,"__esModule",{value:!0});var d=n("./node_modules/lodash/values.js"),u=o(d),c=n("./node_modules/lodash/filter.js"),p=o(c);t.getKeyringConnections=r,t.getKeyringConnectionById=i,t.getKeyringConnectionsByName=s,t.getUserConnections=a,t.isKeyringConnectionsFetching=l},"./client/state/sharing/publicize/actions.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){return{type:_.PUBLICIZE_SHARE_DISMISS,siteId:e,postId:t}}function i(e,t,n,o){return function(r){return r({type:_.PUBLICIZE_SHARE,siteId:e,postId:t,skippedConnections:n,message:o}),new y.default(function(i){b.default.undocumented().publicizePost(e,t,o,n,function(n,o){r(n||!o.results?{type:_.PUBLICIZE_SHARE_FAILURE,siteId:e,postId:t,error:n}:{type:_.PUBLICIZE_SHARE_SUCCESS,siteId:e,postId:t}),i()})})}}function s(e){return function(t){return t({type:_.PUBLICIZE_CONNECTIONS_REQUEST,siteId:e}),b.default.undocumented().siteConnections(e).then(function(n){t(f(e,n)),t({type:_.PUBLICIZE_CONNECTIONS_REQUEST_SUCCESS,siteId:e})}).catch(function(n){return t({type:_.PUBLICIZE_CONNECTIONS_REQUEST_FAILURE,siteId:e,error:n})})}}function a(e,t){return function(n){return n({type:_.PUBLICIZE_CONNECTION_REQUEST,connectionId:t,siteId:e}),b.default.undocumented().site(e).getConnection(t).then(function(o){n({type:_.PUBLICIZE_CONNECTION_RECEIVE,connection:o,siteId:e}),n({type:_.PUBLICIZE_CONNECTION_REQUEST_SUCCESS,connectionId:t,siteId:e})}).catch(function(o){return n({type:_.PUBLICIZE_CONNECTION_REQUEST_FAILURE,connectionId:t,error:o,siteId:e})})}}function l(e,t,n){return function(o){return b.default.undocumented().createConnection(t,e,n,{shared:!1}).then(function(e){return o({type:_.PUBLICIZE_CONNECTION_CREATE,connection:e})}).catch(function(e){return o(c(e))})}}function d(e,t){return function(n){return b.default.undocumented().updateConnection(e.site_ID,e.ID,t).then(function(e){return n({type:_.PUBLICIZE_CONNECTION_UPDATE,connection:e})}).catch(function(t){return n({type:_.PUBLICIZE_CONNECTION_UPDATE_FAILURE,error:(0,h.default)({},t,{label:e.label})})})}}function u(e){return function(t){return b.default.undocumented().deleteSiteConnection(e.site_ID,e.ID).then(function(){return t(p(e))}).catch(function(n){n&&404===n.statusCode&&t(p(e)),t({type:_.PUBLICIZE_CONNECTION_DELETE_FAILURE,error:(0,h.default)({},n,{label:e.label})})})}}function c(e){return{type:_.PUBLICIZE_CONNECTION_CREATE_FAILURE,error:e}}function p(e){return{type:_.PUBLICIZE_CONNECTION_DELETE,connection:e}}function f(e,t){return{type:_.PUBLICIZE_CONNECTIONS_RECEIVE,siteId:e,data:t}}Object.defineProperty(t,"__esModule",{value:!0});var m=n("./node_modules/babel-runtime/helpers/extends.js"),h=o(m),g=n("./node_modules/babel-runtime/core-js/promise.js"),y=o(g);t.dismissShareConfirmation=r,t.sharePost=i,t.fetchConnections=s,t.fetchConnection=a,t.createSiteConnection=l,t.updateSiteConnection=d,t.deleteSiteConnection=u,t.failCreateConnection=c,t.deleteConnection=p,t.receiveConnections=f;var v=n("./client/lib/wp/browser.js"),b=o(v),_=n("./client/state/action-types.js")},"./client/state/sharing/services/actions.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(){return function(e){return e({type:a.KEYRING_SERVICES_REQUEST}),s.default.undocumented().metaKeyring().then(function(t){e({type:a.KEYRING_SERVICES_RECEIVE,services:t.services}),e({type:a.KEYRING_SERVICES_REQUEST_SUCCESS})}).catch(function(t){return e({type:a.KEYRING_SERVICES_REQUEST_FAILURE,error:t})})}}Object.defineProperty(t,"__esModule",{value:!0}),t.requestKeyringServices=r;var i=n("./client/lib/wp/browser.js"),s=o(i),a=n("./client/state/action-types.js")},"./client/state/sharing/services/selectors.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){return e.sharing.services.items}function i(e,t){return(0,u.default)(r(e),{type:t})}function s(e,t){var n=r(e);return!!n[t]&&n[t]}function a(e,t,n){var o=i(e,n);return t?o.filter(function(n){return!((0,f.isJetpackSite)(e,t)&&!n.jetpack_support)&&(!((0,f.isJetpackSite)(e,t)&&n.jetpack_module_required&&!(0,f.isJetpackModuleActive)(e,t,n.jetpack_module_required))&&(!("eventbrite"===n.ID&&!(0,p.default)(e,t,"manage_options"))&&!("publicize"===n.type&&!(0,p.default)(e,t,"publish_posts"))))}):o}function l(e){return e.sharing.services.isFetching}Object.defineProperty(t,"__esModule",{value:!0});var d=n("./node_modules/lodash/filter.js"),u=o(d);t.getKeyringServices=r,t.getKeyringServicesByType=i,t.getKeyringServiceByName=s,t.getEligibleKeyringServices=a,t.isKeyringServicesFetching=l;var c=n("./client/state/selectors/can-current-user.js"),p=o(c),f=n("./client/state/sites/selectors.js")},"./client/state/site-settings/actions.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){return{type:p.SITE_SETTINGS_RECEIVE,siteId:e,settings:t}}function i(e,t){return{type:p.SITE_SETTINGS_UPDATE,siteId:e,settings:t}}function s(e){return function(t){return t({type:p.SITE_SETTINGS_REQUEST,siteId:e}),c.default.undocumented().settings(e).then(function(n){var o=n.name,i=n.description,s=n.settings,a=(0,d.default)({},(0,f.normalizeSettings)(s),{blogname:o,blogdescription:i});t(r(e,a)),t({type:p.SITE_SETTINGS_REQUEST_SUCCESS,siteId:e})}).catch(function(n){t({type:p.SITE_SETTINGS_REQUEST_FAILURE,siteId:e,error:n})})}}function a(e,t){return function(n){return n({type:p.SITE_SETTINGS_SAVE,siteId:e}),c.default.undocumented().settings(e,"post",t).then(function(t){var o=t.updated;n(i(e,(0,f.normalizeSettings)(o))),n({type:p.SITE_SETTINGS_SAVE_SUCCESS,siteId:e})}).catch(function(t){n({type:p.SITE_SETTINGS_SAVE_FAILURE,siteId:e,error:t})})}}Object.defineProperty(t,"__esModule",{value:!0});var l=n("./node_modules/babel-runtime/helpers/extends.js"),d=o(l);t.receiveSiteSettings=r,t.updateSiteSettings=i,t.requestSiteSettings=s,t.saveSiteSettings=a;var u=n("./client/lib/wp/browser.js"),c=o(u),p=n("./client/state/action-types.js"),f=n("./client/state/site-settings/utils.js")},"./client/state/site-settings/utils.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){return(0,s.default)(e).reduce(function(t,n){switch(n){case"default_category":t[n]=parseInt(e[n]);break;default:t[n]=e[n]}return t},{})}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/babel-runtime/core-js/object/keys.js"),s=o(i);t.normalizeSettings=r},"./client/state/sites/media-storage/actions.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){return{type:l.SITE_MEDIA_STORAGE_RECEIVE,mediaStorage:e,siteId:t}}function i(e){return function(t){return t({type:l.SITE_MEDIA_STORAGE_REQUEST,siteId:e}),a.default.undocumented().site(e).mediaStorage().then(function(n){t(r(n,e)),t({type:l.SITE_MEDIA_STORAGE_REQUEST_SUCCESS,siteId:e})}).catch(function(n){t({type:l.SITE_MEDIA_STORAGE_REQUEST_FAILURE,siteId:e,error:n})})}}Object.defineProperty(t,"__esModule",{value:!0}),t.receiveMediaStorage=r,t.requestMediaStorage=i;var s=n("./client/lib/wp/browser.js"),a=o(s),l=n("./client/state/action-types.js")},"./client/state/terms/actions.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){return function(o){var r=(0,v.default)("temporary");return o(a(e,t,(0,g.default)({},n,{ID:r}))),w.default.site(e).taxonomy(t).term().add(n).then(function(n){return o(a(e,t,n)),n},function(){return m.default.resolve()}).then(function(n){return o(d(e,t,r)),n})}}function i(e,t,n,o,r){return function(i,s){return w.default.site(e).taxonomy(t).term(o).update(r).then(function(o){var r=s(),a=(0,C.default)((0,I.getTerms)(r,e,t),{parent:n}).map(function(e){return(0,g.default)({},e,{parent:o.ID})});i(d(e,t,n)),i(l(e,t,a.concat([o])));var u=(0,P.getSitePostsByTerm)(r,e,t,n);u.forEach(function(r){var s=(0,C.default)(r.terms[t],function(e){return e.ID!==n});s.push(o),i((0,S.editPost)(e,r.ID,{terms:(0,p.default)({},t,s)}))});var c=(0,k.getSiteSettings)(r,e);return"category"===t&&(0,_.default)(c,["default_category"])===n&&o.ID!==n&&i((0,T.updateSiteSettings)(e,{default_category:o.ID})),o})}}function s(e,t,n,o){return function(r,i){return w.default.site(e).taxonomy(t).term(o).delete().then(function(){var o=i(),s=(0,I.getTerm)(o,e,t,n),u=(0,_.default)(s,"post_count",0),c=(0,C.default)((0,I.getTerms)(o,e,t),function(e){return e.parent===n}).map(function(e){return(0,g.default)({},e,{parent:s.parent})});c.length&&r(l(e,t,c));var f=(0,P.getSitePostsByTerm)(o,e,t,n);if(f.forEach(function(o){var i=(0,C.default)(o.terms[t],function(e){return e.ID!==n});r((0,S.editPost)(e,o.ID,{terms:(0,p.default)({},t,i)}))}),"category"===t&&u>0){var m=(0,k.getSiteSettings)(o,e),h=(0,I.getTerm)(o,e,t,(0,_.default)(m,["default_category"]));h&&r(a(e,t,(0,g.default)({},h,{post_count:h.post_count+u})))}r(d(e,t,n))})}}function a(e,t,n){return l(e,t,[n])}function l(e,t,n,o,r){return{type:j.TERMS_RECEIVE,siteId:e,taxonomy:t,terms:n,query:o,found:r}}function d(e,t,n){return{type:j.TERM_REMOVE,siteId:e,taxonomy:t,termId:n}}function u(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(o){return o({type:j.TERMS_REQUEST,siteId:e,taxonomy:t,query:n}),w.default.site(e).taxonomy(t).termsList(n).then(function(r){o({type:j.TERMS_REQUEST_SUCCESS,siteId:e,taxonomy:t,query:n}),o(l(e,t,r.terms,n,r.found))}).catch(function(r){o({type:j.TERMS_REQUEST_FAILURE,siteId:e,taxonomy:t,query:n,error:r})})}}Object.defineProperty(t,"__esModule",{value:!0});var c=n("./node_modules/babel-runtime/helpers/defineProperty.js"),p=o(c),f=n("./node_modules/babel-runtime/core-js/promise.js"),m=o(f),h=n("./node_modules/babel-runtime/helpers/extends.js"),g=o(h),y=n("./node_modules/lodash/uniqueId.js"),v=o(y),b=n("./node_modules/lodash/get.js"),_=o(b),x=n("./node_modules/lodash/filter.js"),C=o(x);t.addTerm=r,t.updateTerm=i,t.deleteTerm=s,t.receiveTerm=a,t.receiveTerms=l,t.removeTerm=d,t.requestSiteTerms=u;var E=n("./client/lib/wp/browser.js"),w=o(E),j=n("./client/state/action-types.js"),S=n("./client/state/posts/actions.js"),T=n("./client/state/site-settings/actions.js"),P=n("./client/state/posts/selectors.js"),k=n("./client/state/site-settings/selectors.js"),I=n("./client/state/terms/selectors.js")},"./client/state/terms/selectors.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n,o){var r=(0,v.getSerializedTermsQuery)(o);return!!(0,h.default)(e.terms.queryRequests,[t,n,r])}function i(e,t,n,o){var i=s(e,t,n,o);return null!==i&&(0,f.default)(1,i+1).some(function(i){var s=(0,c.default)({},o,{page:i});return r(e,t,n,s)})}function s(e,t,n,o){var r=(0,h.default)(e.terms.queries,[t,n]);if(!r)return null;var i=r.getNumberOfPages(o);return null===i?null:Math.max(i,1)}function a(e,t,n){var o=(0,h.default)(e.terms.queries,[t,n]);return o?o.getItems():null}function l(e,t,n,o){var r=(0,h.default)(e.terms.queries,[t,n]);if(!r)return null;var i=r.getItem(o);return i?i:null}function d(e,t,n,o){var r=(0,h.default)(e.terms.queries,[t,n]);return r?r.getFound(o):null}Object.defineProperty(t,"__esModule",{value:!0}),t.getTermsForQueryIgnoringPage=t.getTermsForQuery=void 0;var u=n("./node_modules/babel-runtime/helpers/extends.js"),c=o(u),p=n("./node_modules/lodash/range.js"),f=o(p),m=n("./node_modules/lodash/get.js"),h=o(m);t.isRequestingTermsForQuery=r,t.isRequestingTermsForQueryIgnoringPage=i,t.getTermsLastPageForQuery=s,t.getTerms=a,t.getTerm=l,t.countFoundTermsForQuery=d;var g=n("./client/lib/create-selector/index.js"),y=o(g),v=n("./client/state/terms/utils.js");
t.getTermsForQuery=(0,y.default)(function(e,t,n,o){var r=(0,h.default)(e.terms.queries,[t,n]);return r?r.getItems(o):null},function(e,t,n){return(0,h.default)(e.terms.queries,[t,n])},function(e,t,n,o){var r=(0,v.getSerializedTermsQuery)(o);return[t,n,r].join()}),t.getTermsForQueryIgnoringPage=(0,y.default)(function(e,t,n,o){var r=(0,h.default)(e.terms.queries,[t,n]);return r?r.getItemsIgnoringPage(o):null},function(e,t,n){return(0,h.default)(e.terms.queries,[t,n])},function(e,t,n,o){var r=(0,v.getSerializedTermsQueryWithoutPage)(o);return[t,n,r].join()})},"./client/state/ui/drop-zone/actions.js":function(e,t,n){"use strict";function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return{type:i.DROPZONE_SHOW,dropZoneName:e}}function r(e){return{type:i.DROPZONE_HIDE,dropZoneName:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.showDropZone=o,t.hideDropZone=r;var i=n("./client/state/action-types.js")},"./client/state/ui/editor/actions.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"post";return{type:g.EDITOR_START,siteId:e,postId:t,postType:n}}function i(e,t){return{type:g.EDITOR_STOP,siteId:e,postId:t}}function s(e){return{type:g.EDITOR_PASTE_EVENT,source:e}}function a(e){var t=(0,v.setMediaModalView)(e),n=C[e];return n?(0,b.withAnalytics)((0,b.bumpStat)("editor_media_actions",n),t):t}function l(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return function(n,o){var r=(0,x.getPreference)(o(),"editorConfirmationDisabledSites");n(t?(0,_.savePreference)("editorConfirmationDisabledSites",(0,h.default)(r,function(t){return e!==t})):(0,_.savePreference)("editorConfirmationDisabledSites",[].concat((0,c.default)(r),[e]))),n((0,b.recordTracksEvent)(t?"calypso_publish_confirmation_preference_enable":"calypso_publish_confirmation_preference_disable")),n((0,b.bumpStat)("calypso_publish_confirmation",t?"enabled":"disabled"))}}Object.defineProperty(t,"__esModule",{value:!0}),t.MODAL_VIEW_STATS=void 0;var d,u=n("./node_modules/babel-runtime/helpers/toConsumableArray.js"),c=o(u),p=n("./node_modules/babel-runtime/helpers/defineProperty.js"),f=o(p),m=n("./node_modules/lodash/filter.js"),h=o(m);t.startEditingPost=r,t.stopEditingPost=i,t.pasteEvent=s,t.setEditorMediaModalView=a,t.saveConfirmationSidebarPreference=l;var g=n("./client/state/action-types.js"),y=n("./client/state/ui/media-modal/constants.js"),v=n("./client/state/ui/media-modal/actions.js"),b=n("./client/state/analytics/actions.js"),_=n("./client/state/preferences/actions.js"),x=n("./client/state/preferences/selectors.js"),C=t.MODAL_VIEW_STATS=(d={},(0,f.default)(d,y.ModalViews.LIST,"view_list"),(0,f.default)(d,y.ModalViews.DETAIL,"view_detail"),(0,f.default)(d,y.ModalViews.GALLERY,"view_gallery"),(0,f.default)(d,y.ModalViews.IMAGE_EDITOR,"view_edit"),(0,f.default)(d,y.ModalViews.VIDEO_EDITOR,"view_edit"),d)},"./client/state/ui/editor/contact-form/actions.js":function(e,t,n){"use strict";function o(){return{type:d.EDITOR_CONTACT_FORM_CLEAR}}function r(e){return{type:d.EDITOR_CONTACT_FORM_LOAD,contactForm:e}}function i(){return{type:d.EDITOR_CONTACT_FORM_FIELD_ADD}}function s(e){return{type:d.EDITOR_CONTACT_FORM_FIELD_REMOVE,index:e}}function a(e,t){return{type:d.EDITOR_CONTACT_FORM_FIELD_UPDATE,index:e,field:t}}function l(e){return{type:d.EDITOR_CONTACT_FORM_SETTINGS_UPDATE,settings:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.formClear=o,t.formLoad=r,t.fieldAdd=i,t.fieldRemove=s,t.fieldUpdate=a,t.settingsUpdate=l;var d=n("./client/state/action-types.js")},"./client/state/ui/editor/image-editor/actions.js":function(e,t,n){"use strict";function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:m.IMAGE_EDITOR_STATE_RESET,additionalData:e}}function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:m.IMAGE_EDITOR_STATE_RESET_ALL,additionalData:e}}function i(){return{type:m.IMAGE_EDITOR_ROTATE_COUNTERCLOCKWISE}}function s(){return{type:m.IMAGE_EDITOR_FLIP}}function a(e){return{type:m.IMAGE_EDITOR_SET_ASPECT_RATIO,ratio:e}}function l(e){return{type:m.IMAGE_EDITOR_SET_DEFAULT_ASPECT_RATIO,ratio:e}}function d(e,t,n,o){return{type:m.IMAGE_EDITOR_SET_FILE_INFO,src:e,fileName:t,mimeType:n,title:o}}function u(e,t,n,o){return{type:m.IMAGE_EDITOR_SET_CROP_BOUNDS,topBound:e,leftBound:t,bottomBound:n,rightBound:o}}function c(e,t,n,o){return{type:m.IMAGE_EDITOR_COMPUTED_CROP,topRatio:e,leftRatio:t,widthRatio:n,heightRatio:o}}function p(e,t,n,o){return{type:m.IMAGE_EDITOR_CROP,topRatio:e,leftRatio:t,widthRatio:n,heightRatio:o}}function f(e,t){return{type:m.IMAGE_EDITOR_IMAGE_HAS_LOADED,width:e,height:t}}Object.defineProperty(t,"__esModule",{value:!0}),t.resetImageEditorState=o,t.resetAllImageEditorState=r,t.imageEditorRotateCounterclockwise=i,t.imageEditorFlip=s,t.setImageEditorAspectRatio=a,t.setImageEditorDefaultAspectRatio=l,t.setImageEditorFileInfo=d,t.setImageEditorCropBounds=u,t.imageEditorComputedCrop=c,t.imageEditorCrop=p,t.setImageEditorImageHasLoaded=f;var m=n("./client/state/action-types.js")},"./client/state/ui/editor/image-editor/selectors.js":function(e,t,n){"use strict";function o(e){return e.ui.editor.imageEditor.transform}function r(e){return e.ui.editor.imageEditor.fileInfo}function i(e){return e.ui.editor.imageEditor.hasChanges}function s(e){return!e.ui.editor.imageEditor.imageIsLoading}function a(e){return e.ui.editor.imageEditor.cropBounds}function l(e){return e.ui.editor.imageEditor.crop}function d(e){return e.ui.editor.imageEditor.aspectRatio}Object.defineProperty(t,"__esModule",{value:!0}),t.getImageEditorTransform=o,t.getImageEditorFileInfo=r,t.imageEditorHasChanges=i,t.isImageEditorImageLoaded=s,t.getImageEditorCropBounds=a,t.getImageEditorCrop=l,t.getImageEditorAspectRatio=d},"./client/state/ui/media-modal/actions.js":function(e,t,n){"use strict";function o(e){return{type:i.MEDIA_MODAL_VIEW_SET,view:e}}function r(){return o(null)}Object.defineProperty(t,"__esModule",{value:!0}),t.setMediaModalView=o,t.resetMediaModalView=r;var i=n("./client/state/action-types.js")},"./client/state/ui/media-modal/constants.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.ModalViews={LIST:"LIST",DETAIL:"DETAIL",GALLERY:"GALLERY",IMAGE_EDITOR:"IMAGE_EDITOR",VIDEO_EDITOR:"VIDEO_EDITOR"}},"./client/state/ui/media-modal/selectors.js":function(e,t,n){"use strict";function o(e){return e.ui.mediaModal.view}Object.defineProperty(t,"__esModule",{value:!0}),t.getMediaModalView=o},"./client/state/users/suggestions/actions.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){return{type:l.USER_SUGGESTIONS_RECEIVE,suggestions:t,siteId:e}}function i(e){return function(t){return t({type:l.USER_SUGGESTIONS_REQUEST,siteId:e}),a.default.users().suggest({site_id:e}).then(function(n){t(r(e,n.suggestions)),t({type:l.USER_SUGGESTIONS_REQUEST_SUCCESS,siteId:e,data:n})}).catch(function(n){return t({type:l.USER_SUGGESTIONS_REQUEST_FAILURE,siteId:e,error:n})})}}Object.defineProperty(t,"__esModule",{value:!0}),t.receiveUserSuggestions=r,t.requestUserSuggestions=i;var s=n("./client/lib/wp/browser.js"),a=o(s),l=n("./client/state/action-types.js")},"./client/state/users/suggestions/selectors.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){return(0,a.default)(e.users.suggestions.requesting,[t],!1)}function i(e,t){return(0,a.default)(e.users.suggestions.items,[t],[])}Object.defineProperty(t,"__esModule",{value:!0});var s=n("./node_modules/lodash/get.js"),a=o(s);t.isRequestingUserSuggestions=r,t.getUserSuggestions=i},"./node_modules/autosize/dist/autosize.js":function(e,t,n){var o,r,i;!function(n,s){r=[t,e],o=s,i="function"==typeof o?o.apply(t,r):o,!(void 0!==i&&(e.exports=i))}(this,function(e,t){"use strict";function n(e){function t(){var t=window.getComputedStyle(e,null);f=t.overflowY,"vertical"===t.resize?e.style.resize="none":"both"===t.resize&&(e.style.resize="horizontal"),p="content-box"===t.boxSizing?-(parseFloat(t.paddingTop)+parseFloat(t.paddingBottom)):parseFloat(t.borderTopWidth)+parseFloat(t.borderBottomWidth),isNaN(p)&&(p=0),r()}function n(t){var n=e.style.width;e.style.width="0px",e.offsetWidth,e.style.width=n,f=t,c&&(e.style.overflowY=t),o()}function o(){var t=window.pageYOffset,n=document.body.scrollTop,o=e.style.height;e.style.height="auto";var r=e.scrollHeight+p;return 0===e.scrollHeight?void(e.style.height=o):(e.style.height=r+"px",m=e.clientWidth,document.documentElement.scrollTop=t,void(document.body.scrollTop=n))}function r(){var t=e.style.height;o();var r=window.getComputedStyle(e,null);if(r.height!==e.style.height?"visible"!==f&&n("visible"):"hidden"!==f&&n("hidden"),t!==e.style.height){var i=s("autosize:resized");e.dispatchEvent(i)}}var a=void 0===arguments[1]?{}:arguments[1],l=a.setOverflowX,d=void 0===l||l,u=a.setOverflowY,c=void 0===u||u;if(e&&e.nodeName&&"TEXTAREA"===e.nodeName&&!i.has(e)){var p=null,f=null,m=e.clientWidth,h=function(){e.clientWidth!==m&&r()},g=function(t){window.removeEventListener("resize",h,!1),e.removeEventListener("input",r,!1),e.removeEventListener("keyup",r,!1),e.removeEventListener("autosize:destroy",g,!1),e.removeEventListener("autosize:update",r,!1),i.delete(e),Object.keys(t).forEach(function(n){e.style[n]=t[n]})}.bind(e,{height:e.style.height,resize:e.style.resize,overflowY:e.style.overflowY,overflowX:e.style.overflowX,wordWrap:e.style.wordWrap});e.addEventListener("autosize:destroy",g,!1),"onpropertychange"in e&&"oninput"in e&&e.addEventListener("keyup",r,!1),window.addEventListener("resize",h,!1),e.addEventListener("input",r,!1),e.addEventListener("autosize:update",r,!1),i.add(e),d&&(e.style.overflowX="hidden",e.style.wordWrap="break-word"),t()}}function o(e){if(e&&e.nodeName&&"TEXTAREA"===e.nodeName){var t=s("autosize:destroy");e.dispatchEvent(t)}}function r(e){if(e&&e.nodeName&&"TEXTAREA"===e.nodeName){var t=s("autosize:update");e.dispatchEvent(t)}}var i="function"==typeof Set?new Set:function(){var e=[];return{has:function(t){return Boolean(e.indexOf(t)>-1)},add:function(t){e.push(t)},delete:function(t){e.splice(e.indexOf(t),1)}}}(),s=function(e){return new Event(e)};try{new Event("test")}catch(e){s=function(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!1),t}}var a=null;"undefined"==typeof window||"function"!=typeof window.getComputedStyle?(a=function(e){return e},a.destroy=function(e){return e},a.update=function(e){return e}):(a=function(e,t){return e&&Array.prototype.forEach.call(e.length?e:[e],function(e){return n(e,t)}),e},a.destroy=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],o),e},a.update=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],r),e}),t.exports=a})},"./node_modules/babel-runtime/core-js/math/trunc.js":function(e,t,n){e.exports={default:n("./node_modules/core-js/library/fn/math/trunc.js"),__esModule:!0}},"./node_modules/chrono-node/src/chrono.js":function(e,t,n){var o=t.options=n("./node_modules/chrono-node/src/options.js");t.parser=n("./node_modules/chrono-node/src/parsers/parser.js"),t.refiner=n("./node_modules/chrono-node/src/refiners/refiner.js"),t.Parser=t.parser.Parser,t.Refiner=t.refiner.Refiner,t.Filter=t.refiner.Filter,t.ParsedResult=n("./node_modules/chrono-node/src/result.js").ParsedResult,t.ParsedComponents=n("./node_modules/chrono-node/src/result.js").ParsedComponents;var r=function(e){e=e||t.options.casualOption(),this.option=e,this.parsers=new Object(e.parsers),this.refiners=new Object(e.refiners)};r.prototype.parse=function(e,t,n){t=t||new Date,n=n||{};var o=[];return this.parsers.forEach(function(r){var i=r.execute(e,t,n);o=o.concat(i)}),o.sort(function(e,t){return e.index-t.index}),this.refiners.forEach(function(t){o=t.refine(e,o,n)}),o},r.prototype.parseDate=function(e,t,n){var o=this.parse(e,t,n);return o.length>0?o[0].start.date():null},t.Chrono=r,t.strict=new r(o.strictOption()),t.casual=new r(o.casualOption()),t.en=new r(o.mergeOptions([o.en.casual,o.commonPostProcessing])),t.de=new r(o.mergeOptions([o.de.casual,o.en,o.commonPostProcessing])),t.es=new r(o.mergeOptions([o.es.casual,o.en,o.commonPostProcessing])),t.fr=new r(o.mergeOptions([o.fr.casual,o.en,o.commonPostProcessing])),t.ja=new r(o.mergeOptions([o.ja.casual,o.en,o.commonPostProcessing])),t.parse=function(){return t.casual.parse.apply(t.casual,arguments)},t.parseDate=function(){return t.casual.parseDate.apply(t.casual,arguments)}},"./node_modules/chrono-node/src/options.js":function(e,t,n){var o=n("./node_modules/chrono-node/src/parsers/parser.js"),r=n("./node_modules/chrono-node/src/refiners/refiner.js");t.mergeOptions=function(e){var t={},n={parsers:[],refiners:[]};return e.forEach(function(e){e.call&&(e=e.call()),e.parsers&&e.parsers.forEach(function(e){t[e.constructor]||(n.parsers.push(e),t[e.constructor]=!0)}),e.refiners&&e.refiners.forEach(function(e){t[e.constructor]||(n.refiners.push(e),t[e.constructor]=!0)})}),n},t.commonPostProcessing=function(){return{refiners:[new r.ExtractTimezoneOffsetRefiner,new r.ExtractTimezoneAbbrRefiner,new r.UnlikelyFormatFilter]}},t.strictOption=function(){return t.mergeOptions([t.en(!0),t.de(!0),t.es(!0),t.fr(!0),t.ja(!0),t.zh,t.commonPostProcessing])},t.casualOption=function(){return t.mergeOptions([t.en.casual,t.de(!0),t.es.casual,t.fr.casual,t.ja.casual,t.zh,t.commonPostProcessing])},t.de=function(e){return{parsers:[new o.DEDeadlineFormatParser(e),new o.DEMonthNameLittleEndianParser(e),new o.DEMonthNameParser(e),new o.DESlashDateFormatParser(e),new o.DETimeAgoFormatParser(e),new o.DETimeExpressionParser(e)],refiners:[new r.OverlapRemovalRefiner,new r.ForwardDateRefiner,new r.DEMergeDateTimeRefiner,new r.DEMergeDateRangeRefiner]}},t.de.casual=function(){var e=t.de(!1);return e.parsers.unshift(new o.DECasualDateParser),e.parsers.unshift(new o.DEWeekdayParser),e},t.en=function(e){return{parsers:[new o.ENISOFormatParser(e),new o.ENDeadlineFormatParser(e),new o.ENMonthNameLittleEndianParser(e),new o.ENMonthNameMiddleEndianParser(e),new o.ENMonthNameParser(e),new o.ENSlashDateFormatParser(e),new o.ENSlashDateFormatStartWithYearParser(e),new o.ENSlashMonthFormatParser(e),new o.ENTimeAgoFormatParser(e),new o.ENTimeExpressionParser(e)],refiners:[new r.OverlapRemovalRefiner,new r.ForwardDateRefiner,new r.ENMergeDateTimeRefiner,new r.ENMergeDateRangeRefiner,new r.ENPrioritizeSpecificDateRefiner]}},t.en.casual=function(){var e=t.en(!1);return e.parsers.unshift(new o.ENCasualDateParser),e.parsers.unshift(new o.ENCasualTimeParser),e.parsers.unshift(new o.ENWeekdayParser),e.parsers.unshift(new o.ENRelativeDateFormatParser),e},t.ja=function(){return{parsers:[new o.JPStandardParser],refiners:[new r.OverlapRemovalRefiner,new r.ForwardDateRefiner,new r.JPMergeDateRangeRefiner]}},t.ja.casual=function(){var e=t.ja();return e.parsers.unshift(new o.JPCasualDateParser),e},t.es=function(e){return{parsers:[new o.ESTimeAgoFormatParser(e),new o.ESDeadlineFormatParser(e),new o.ESTimeExpressionParser(e),new o.ESMonthNameLittleEndianParser(e),new o.ESSlashDateFormatParser(e)],refiners:[new r.OverlapRemovalRefiner,new r.ForwardDateRefiner]}},t.es.casual=function(){var e=t.es(!1);return e.parsers.unshift(new o.ESCasualDateParser),e.parsers.unshift(new o.ESWeekdayParser),e},t.fr=function(e){return{parsers:[new o.FRDeadlineFormatParser(e),new o.FRMonthNameLittleEndianParser(e),new o.FRSlashDateFormatParser(e),new o.FRTimeAgoFormatParser(e),new o.FRTimeExpressionParser(e)],refiners:[new r.OverlapRemovalRefiner,new r.ForwardDateRefiner,new r.FRMergeDateRangeRefiner,new r.FRMergeDateTimeRefiner]}},t.fr.casual=function(){var e=t.fr(!1);return e.parsers.unshift(new o.FRCasualDateParser),e.parsers.unshift(new o.FRWeekdayParser),e},t.zh=function(){return{parsers:[new o.ZHHantDateParser,new o.ZHHantWeekdayParser,new o.ZHHantTimeExpressionParser,new o.ZHHantCasualDateParser,new o.ZHHantDeadlineFormatParser],refiners:[new r.OverlapRemovalRefiner,new r.ForwardDateRefiner]}}},"./node_modules/chrono-node/src/parsers/DE/DECasualDateParser.js":function(e,t,n){var o=n("./node_modules/moment/moment.js"),r=n("./node_modules/chrono-node/src/parsers/parser.js").Parser,i=n("./node_modules/chrono-node/src/result.js").ParsedResult,s=new RegExp("(\\W|^)(jetzt|(?:heute|diesen)\\s*(morgen|vormittag|mittag|nachmittag|abend)|(?:heute|diese)\\s*nacht|heute|(?:(?:ü|ue)ber)?morgen(?:\\s*(morgen|vormittag|mittag|nachmittag|abend|nacht))?|(?:vor)?gestern(?:\\s*(morgen|vormittag|mittag|nachmittag|abend|nacht))?|letzte\\s*nacht)(?=\\W|$)","i");t.Parser=function(){r.apply(this,arguments),this.pattern=function(){return s},this.extract=function(e,t,n,r){var e=n[0].substr(n[1].length),s=n.index+n[1].length,a=new i({index:s,text:e,ref:t}),l=o(t),d=l.clone(),u=e.toLowerCase();/(?:heute|diese)\s*nacht/.test(u)?(a.start.imply("hour",22),a.start.imply("meridiem",1)):/^(?:ü|ue)bermorgen/.test(u)?d.add(l.hour()>1?2:1,"day"):/^morgen/.test(u)?l.hour()>1&&d.add(1,"day"):/^gestern/.test(u)?d.add(-1,"day"):/^vorgestern/.test(u)?d.add(-2,"day"):/letzte\s*nacht/.test(u)?(a.start.imply("hour",0),l.hour()>6&&d.add(-1,"day")):"jetzt"===u&&(a.start.imply("hour",l.hour()),a.start.imply("minute",l.minute()),a.start.imply("second",l.second()),a.start.imply("millisecond",l.millisecond()));var c=n[3]||n[4]||n[5];if(c)switch(c.toLowerCase()){case"morgen":a.start.imply("hour",6);break;case"vormittag":a.start.imply("hour",9);break;case"mittag":a.start.imply("hour",12);break;case"nachmittag":a.start.imply("hour",15),a.start.imply("meridiem",1);break;case"abend":a.start.imply("hour",18),a.start.imply("meridiem",1);break;case"nacht":a.start.imply("hour",0)}return a.start.assign("day",d.date()),a.start.assign("month",d.month()+1),a.start.assign("year",d.year()),a.tags.DECasualDateParser=!0,a}}},"./node_modules/chrono-node/src/parsers/DE/DEDeadlineFormatParser.js":function(e,t,n){var o=n("./node_modules/moment/moment.js"),r=n("./node_modules/chrono-node/src/parsers/parser.js").Parser,i=n("./node_modules/chrono-node/src/result.js").ParsedResult,s=n("./node_modules/chrono-node/src/utils/DE.js"),a=new RegExp("(\\W|^)(in|nach)\\s*("+s.INTEGER_WORDS_PATTERN+"|[0-9]+|einigen|eine[rm]\\s*halben|eine[rm])\\s*(sekunden?|min(?:ute)?n?|stunden?|tag(?:en)?|wochen?|monat(?:en)?|jahr(?:en)?)\\s*(?=\\W|$)","i"),l=new RegExp("(\\W|^)(in|nach)\\s*("+s.INTEGER_WORDS_PATTERN+"|[0-9]+|eine(?:r|m)?)\\s*(sekunden?|minuten?|stunden?|tag(?:en)?)\\s*(?=\\W|$)","i");t.Parser=function(){r.apply(this,arguments),this.pattern=function(){return this.isStrictMode()?l:a},this.extract=function(e,t,n,r){var a=n.index+n[1].length,e=n[0];e=n[0].substr(n[1].length,n[0].length-n[1].length);var l=new i({index:a,text:e,ref:t}),d=n[3].toLowerCase();d=void 0!==s.INTEGER_WORDS[d]?s.INTEGER_WORDS[d]:"einer"===d||"einem"===d?1:"einigen"===d?3:/halben/.test(d)?.5:parseInt(d);var u=o(t);return/tag|woche|monat|jahr/i.test(n[4])?(/tag/i.test(n[4])?u.add(d,"d"):/woche/i.test(n[4])?u.add(7*d,"d"):/monat/i.test(n[4])?u.add(d,"month"):/jahr/i.test(n[4])&&u.add(d,"year"),l.start.assign("year",u.year()),l.start.assign("month",u.month()+1),l.start.assign("day",u.date()),l):(/stunde/i.test(n[4])?u.add(d,"hour"):/min/i.test(n[4])?u.add(d,"minute"):/sekunde/i.test(n[4])&&u.add(d,"second"),l.start.imply("year",u.year()),l.start.imply("month",u.month()+1),l.start.imply("day",u.date()),l.start.assign("hour",u.hour()),l.start.assign("minute",u.minute()),l.start.assign("second",u.second()),l.tags.DEDeadlineFormatParser=!0,l)}}},"./node_modules/chrono-node/src/parsers/DE/DEMonthNameLittleEndianParser.js":function(e,t,n){var o=n("./node_modules/moment/moment.js"),r=n("./node_modules/chrono-node/src/parsers/parser.js").Parser,i=n("./node_modules/chrono-node/src/result.js").ParsedResult,s=n("./node_modules/chrono-node/src/utils/DE.js"),a=new RegExp("(\\W|^)(?:am\\s*?)?(?:(Sonntag|Montag|Dienstag|Mittwoch|Donnerstag|Freitag|Samstag|So|Mo|Di|Mi|Do|Fr|Sa)\\s*,?\\s*)?(?:den\\s*)?([0-9]{1,2})\\.(?:\\s*(?:bis(?:\\s*(?:am|zum))?|\\-|\\–|\\s)\\s*([0-9]{1,2})\\.)?\\s*(Jan(?:uar|\\.)?|Feb(?:ruar|\\.)?|Mär(?:z|\\.)?|Maerz|Mrz\\.?|Apr(?:il|\\.)?|Mai|Jun(?:i|\\.)?|Jul(?:i|\\.)?|Aug(?:ust|\\.)?|Sep(?:t|t\\.|tember|\\.)?|Okt(?:ober|\\.)?|Nov(?:ember|\\.)?|Dez(?:ember|\\.)?)(?:,?\\s*([0-9]{1,4}(?![^\\s]\\d))(\\s*[vn]\\.?\\s*C(?:hr)?\\.?)?)?(?=\\W|$)","i"),l=2,d=3,u=4,c=5,p=6,f=7;t.Parser=function(){r.apply(this,arguments),this.pattern=function(){return a},this.extract=function(e,t,n,r){var a=new i({text:n[0].substr(n[1].length,n[0].length-n[1].length),index:n.index+n[1].length,ref:t}),m=n[c];m=s.MONTH_OFFSET[m.toLowerCase()];var h=n[d];h=parseInt(h);var g=null;if(n[p]&&(g=n[p],g=parseInt(g),n[f]?/v/i.test(n[f])&&(g=-g):g<100&&(g+=2e3)),g)a.start.assign("day",h),a.start.assign("month",m),a.start.assign("year",g);else{var y=o(t);y.month(m-1),y.date(h),y.year(o(t).year());var v=y.clone().add(1,"y"),b=y.clone().add(-1,"y");Math.abs(v.diff(o(t)))<Math.abs(y.diff(o(t)))?y=v:Math.abs(b.diff(o(t)))<Math.abs(y.diff(o(t)))&&(y=b),a.start.assign("day",h),a.start.assign("month",m),a.start.imply("year",y.year())}if(n[l]){var _=n[l];_=s.WEEKDAY_OFFSET[_.toLowerCase()],a.start.assign("weekday",_)}return n[u]&&(a.end=a.start.clone(),a.end.assign("day",parseInt(n[u]))),a.tags.DEMonthNameLittleEndianParser=!0,a}}},"./node_modules/chrono-node/src/parsers/DE/DEMonthNameParser.js":function(e,t,n){var o=n("./node_modules/moment/moment.js"),r=n("./node_modules/chrono-node/src/parsers/parser.js").Parser,i=n("./node_modules/chrono-node/src/result.js").ParsedResult,s=n("./node_modules/chrono-node/src/utils/DE.js"),a=new RegExp("(^|\\D\\s+|[^\\w\\s])(Jan\\.?|Januar|Feb\\.?|Februar|Mär\\.?|M(?:ä|ae)rz|Mrz\\.?|Apr\\.?|April|Mai\\.?|Jun\\.?|Juni|Jul\\.?|Juli|Aug\\.?|August|Sep\\.?|Sept\\.?|September|Okt\\.?|Oktober|Nov\\.?|November|Dez\\.?|Dezember)\\s*(?:,?\\s*(?:([0-9]{4})(\\s*[vn]\\.?\\s*C(?:hr)?\\.?)?|([0-9]{1,4})\\s*([vn]\\.?\\s*C(?:hr)?\\.?)))?(?=[^\\s\\w]|$)","i"),l=2,d=3,u=4,c=5,p=6;t.Parser=function(){r.apply(this,arguments),this.pattern=function(){return a},this.extract=function(e,t,n,r){var a=new i({text:n[0].substr(n[1].length,n[0].length-n[1].length),index:n.index+n[1].length,ref:t}),f=n[l];f=s.MONTH_OFFSET[f.toLowerCase()];var m=1,h=null;if((n[d]||n[c])&&(h=n[d]||n[c],h=parseInt(h),n[u]||n[p]?/v/i.test(n[u]||n[p])&&(h=-h):h<100&&(h+=2e3)),h)a.start.imply("day",m),a.start.assign("month",f),a.start.assign("year",h);else{var g=o(t);g.month(f-1),g.date(m);var y=g.clone().add(1,"y"),v=g.clone().add(-1,"y");Math.abs(y.diff(o(t)))<Math.abs(g.diff(o(t)))?g=y:Math.abs(v.diff(o(t)))<Math.abs(g.diff(o(t)))&&(g=v),a.start.imply("day",m),a.start.assign("month",f),a.start.imply("year",g.year())}return a.tags.DEMonthNameParser=!0,a}}},"./node_modules/chrono-node/src/parsers/DE/DESlashDateFormatParser.js":function(e,t,n){var o=n("./node_modules/moment/moment.js"),r=n("./node_modules/chrono-node/src/parsers/parser.js").Parser,i=n("./node_modules/chrono-node/src/result.js").ParsedResult,s=new RegExp("(\\W|^)(?:(?:am\\s*?)?((?:sonntag|so|montag|mo|dienstag|di|mittwoch|mi|donnerstag|do|freitag|fr|samstag|sa))\\s*\\,?\\s*(?:den\\s*)?)?([0-3]{0,1}[0-9]{1})[\\/\\.\\-]([0-3]{0,1}[0-9]{1})(?:[\\/\\.\\-]([0-9]{4}s*,?s*|[0-9]{2}s*,?s*))?(\\W|$)","i"),a={sonntag:0,so:0,montag:1,mo:1,dienstag:2,di:2,mittwoch:3,mi:3,donnerstag:4,do:4,freitag:5,fr:5,samstag:6,sa:6},l=1,d=6,u=2,c=3,p=4,f=5;t.Parser=function(e){r.apply(this,arguments),this.pattern=function(){return s},this.extract=function(e,t,n,r){if("/"==n[l]||"/"==n[d])return void(n.index+=n[0].length);var s=n.index+n[l].length,e=n[0].substr(n[l].length,n[0].length-n[d].length),m=new i({text:e,index:s,ref:t});if(!e.match(/^\d\.\d$/)&&!e.match(/^\d\.\d{1,2}\.\d{1,2}$/)&&(n[f]||!(n[0].indexOf("/")<0))){var h=n[f]||o(t).year()+"",g=n[p],y=n[c];return g=parseInt(g),y=parseInt(y),h=parseInt(h),g<1||g>12?null:y<1||y>31?null:(h<100&&(h+=h>50?1900:2e3),m.start.assign("day",y),m.start.assign("month",g),m.start.assign("year",h),n[u]&&m.start.assign("weekday",a[n[u].toLowerCase()]),m.tags.DESlashDateFormatParser=!0,m)}}}},"./node_modules/chrono-node/src/parsers/DE/DETimeAgoFormatParser.js":function(e,t,n){var o=n("./node_modules/moment/moment.js"),r=n("./node_modules/chrono-node/src/parsers/parser.js").Parser,i=n("./node_modules/chrono-node/src/result.js").ParsedResult,s=n("./node_modules/chrono-node/src/utils/DE.js"),a=new RegExp("(\\W|^)vor\\s*("+s.INTEGER_WORDS_PATTERN+"|[0-9]+|einigen|eine[rm]\\s*halben|eine[rm])\\s*(sekunden?|min(?:ute)?n?|stunden?|wochen?|tag(?:en)?|monat(?:en)?|jahr(?:en)?)\\s*(?=(?:\\W|$))","i"),l=new RegExp("(\\W|^)vor\\s*([0-9]+|eine(?:r|m))\\s*(sekunden?|minuten?|stunden?|tag(?:en)?)(?=(?:\\W|$))","i");t.Parser=function(){r.apply(this,arguments),this.pattern=function(){return this.isStrictMode()?l:a},this.extract=function(e,t,n,r){if(n.index>0&&e[n.index-1].match(/\w/))return null;var e=n[0];e=n[0].substr(n[1].length,n[0].length-n[1].length),index=n.index+n[1].length;var a=new i({index:index,text:e,ref:t}),l=n[2].toLowerCase();l=void 0!==s.INTEGER_WORDS[l]?s.INTEGER_WORDS[l]:"einer"===l||"einem"===l?1:"einigen"===l?3:/halben/.test(l)?.5:parseInt(l);var d=o(t);return/stunde|min|sekunde/i.test(n[3])?(/stunde/i.test(n[3])?d.add(-l,"hour"):/min/i.test(n[3])?d.add(-l,"minute"):/sekunde/i.test(n[3])&&d.add(-l,"second"),a.start.imply("day",d.date()),a.start.imply("month",d.month()+1),a.start.imply("year",d.year()),a.start.assign("hour",d.hour()),a.start.assign("minute",d.minute()),a.start.assign("second",d.second()),a.tags.DETimeAgoFormatParser=!0,a):/woche/i.test(n[3])?(d.add(-l,"week"),a.start.imply("day",d.date()),a.start.imply("month",d.month()+1),a.start.imply("year",d.year()),a.start.imply("weekday",d.day()),a):(/tag/i.test(n[3])&&d.add(-l,"d"),/monat/i.test(n[3])&&d.add(-l,"month"),/jahr/i.test(n[3])&&d.add(-l,"year"),a.start.assign("day",d.date()),a.start.assign("month",d.month()+1),a.start.assign("year",d.year()),a)}}},"./node_modules/chrono-node/src/parsers/DE/DETimeExpressionParser.js":function(e,t,n){var o=n("./node_modules/moment/moment.js"),r=n("./node_modules/chrono-node/src/parsers/parser.js").Parser,i=n("./node_modules/chrono-node/src/result.js").ParsedResult,s=n("./node_modules/chrono-node/src/result.js").ParsedComponents,a=new RegExp("(^|\\s|T)(?:(?:um|von)\\s*)?(\\d{1,4}|mittags?|mitternachts?)(?:(?:\\.|\\:|\\：)(\\d{1,2})(?:(?:\\:|\\：)(\\d{2}))?)?(?:\\s*uhr)?(?:\\s*(morgens|vormittags|mittags|nachmittags|abends|nachts))?(?=\\W|$)","i"),l=new RegExp("^\\s*(\\-|\\–|\\~|\\〜|bis|\\?)\\s*(\\d{1,4})(?:(?:\\.|\\:|\\：)(\\d{1,2})(?:(?:\\.|\\:|\\：)(\\d{1,2}))?)?(?:\\s*(morgens|vormittags|mittags|nachmittags|abends|nachts))?(?=\\W|$)","i"),d=2,u=3,c=4,p=5;t.Parser=function(){r.apply(this,arguments),this.pattern=function(){return a},this.extract=function(e,t,n,r){if(n.index>0&&e[n.index-1].match(/\w/))return null;var a=o(t),f=new i;f.ref=t,f.index=n.index+n[1].length,f.text=n[0].substring(n[1].length),f.tags.DETimeExpressionParser=!0,f.start.imply("day",a.date()),f.start.imply("month",a.month()+1),f.start.imply("year",a.year());var m=0,h=0,g=-1;if(null!=n[c]){var y=parseInt(n[c]);if(y>=60)return null;f.start.assign("second",y)}if(/mittags?/i.test(n[d])?(g=1,m=12):/mitternachts?/i.test(n[d])?(g=0,m=0):m=parseInt(n[d]),null!=n[u]?h=parseInt(n[u]):m>100&&(h=m%100,m=parseInt(m/100)),h>=60)return null;if(m>24)return null;if(m>=12&&(g=1),null!=n[p]){if(m>12)return null;var v=n[p][0].toLowerCase();"morgens"===v||"vormittags"===v?(g=0,12==m&&(m=0)):(g=1,12!=m&&(m+=12))}if(f.start.assign("hour",m),f.start.assign("minute",h),g>=0?f.start.assign("meridiem",g):m<12?f.start.imply("meridiem",0):f.start.imply("meridiem",1),n=l.exec(e.substring(f.index+f.text.length)),!n)return f.text.match(/^\d+$/)?null:f;if(n[0].match(/^\s*(\+|\-)\s*\d{3,4}$/))return f;null==f.end&&(f.end=new s(null,f.start.date()));var m=0,h=0,g=-1;if(null!=n[c]){var y=parseInt(n[c]);if(y>=60)return null;f.end.assign("second",y)}if(m=parseInt(n[2]),null!=n[u]){if(h=parseInt(n[u]),h>=60)return f}else m>100&&(h=m%100,m=parseInt(m/100));if(h>=60)return null;if(m>24)return null;if(m>=12&&(g=1),null!=n[p]){if(m>12)return null;var v=n[p][0].toLowerCase();"morgens"===v||"vormittags"===v?(g=0,12==m&&(m=0,f.end.isCertain("day")||f.end.imply("day",f.end.get("day")+1))):(g=1,12!=m&&(m+=12)),f.start.isCertain("meridiem")||(0==g?(f.start.imply("meridiem",0),12==f.start.get("hour")&&f.start.assign("hour",0)):(f.start.imply("meridiem",1),12!=f.start.get("hour")&&f.start.assign("hour",f.start.get("hour")+12)))}if(f.text=f.text+n[0],f.end.assign("hour",m),f.end.assign("minute",h),g>=0)f.end.assign("meridiem",g);else{var b=f.start.isCertain("meridiem")&&1==f.start.get("meridiem");b&&f.start.get("hour")>m?f.end.imply("meridiem",0):m>12&&f.end.imply("meridiem",1)}return f.end.date().getTime()<f.start.date().getTime()&&f.end.imply("day",f.end.get("day")+1),f}}},"./node_modules/chrono-node/src/parsers/DE/DEWeekdayParser.js":function(e,t,n){var o=n("./node_modules/moment/moment.js"),r=n("./node_modules/chrono-node/src/parsers/parser.js").Parser,i=n("./node_modules/chrono-node/src/result.js").ParsedResult,s={sonntag:0,so:0,montag:1,mo:1,dienstag:2,di:2,mittwoch:3,mi:3,donnerstag:4,do:4,freitag:5,fr:5,samstag:6,sa:6},a=new RegExp("(\\W|^)(?:(?:\\,|\\(|\\（)\\s*)?(?:a[mn]\\s*?)?(?:(diese[mn]|letzte[mn]|n(?:ä|ae)chste[mn])\\s*)?("+Object.keys(s).join("|")+")(?:\\s*(?:\\,|\\)|\\）))?(?:\\s*(diese|letzte|n(?:ä|ae)chste)\\s*woche)?(?=\\W|$)","i"),l=2,d=3,u=4;t.Parser=function(){r.apply(this,arguments),this.pattern=function(){return a},this.extract=function(e,t,n,r){var a=n.index+n[1].length,e=n[0].substr(n[1].length,n[0].length-n[1].length),c=new i({index:a,text:e,ref:t}),p=n[d].toLowerCase(),f=s[p];if(void 0===f)return null;var m=o(t),h=n[l],g=n[u],y=m.day(),v=h||g;return v=v||"",v=v.toLowerCase(),/letzte/.test(v)?m.day(f-7):/n(?:ä|ae)chste/.test(v)?m.day(f+7):/diese/.test(v)?r.forwardDatesOnly&&y>f?m.day(f+7):m.day(f):r.forwardDatesOnly&&y>f?m.day(f+7):!r.forwardDatesOnly&&Math.abs(f-7-y)<Math.abs(f-y)?m.day(f-7):!r.forwardDatesOnly&&Math.abs(f+7-y)<Math.abs(f-y)?m.day(f+7):m.day(f),c.start.assign("weekday",f),c.start.imply("day",m.date()),c.start.imply("month",m.month()+1),c.start.imply("year",m.year()),c}}},"./node_modules/chrono-node/src/parsers/EN/ENCasualDateParser.js":function(e,t,n){var o=n("./node_modules/moment/moment.js"),r=n("./node_modules/chrono-node/src/parsers/parser.js").Parser,i=n("./node_modules/chrono-node/src/result.js").ParsedResult,s=/(\W|^)(now|today|tonight|last\s*night|(?:tomorrow|tmr|yesterday)\s*|tomorrow|tmr|yesterday)(?=\W|$)/i;t.Parser=function(){r.apply(this,arguments),this.pattern=function(){return s},this.extract=function(e,t,n,r){var e=n[0].substr(n[1].length),s=n.index+n[1].length,a=new i({index:s,text:e,ref:t}),l=o(t),d=l.clone(),u=e.toLowerCase();return"tonight"==u?(a.start.imply("hour",22),a.start.imply("meridiem",1)):/^tomorrow|^tmr/.test(u)?l.hour()>1&&d.add(1,"day"):/^yesterday/.test(u)?d.add(-1,"day"):u.match(/last\s*night/)?(a.start.imply("hour",0),l.hour()>6&&d.add(-1,"day")):u.match("now")&&(a.start.imply("hour",l.hour()),a.start.imply("minute",l.minute()),a.start.imply("second",l.second()),a.start.imply("millisecond",l.millisecond())),a.start.assign("day",d.date()),a.start.assign("month",d.month()+1),a.start.assign("year",d.year()),a.tags.ENCasualDateParser=!0,a}}},"./node_modules/chrono-node/src/parsers/EN/ENCasualTimeParser.js":function(e,t,n){var o=(n("./node_modules/moment/moment.js"),n("./node_modules/chrono-node/src/parsers/parser.js").Parser),r=n("./node_modules/chrono-node/src/result.js").ParsedResult,i=/(\W|^)((this)?\s*(morning|afternoon|evening|noon))/i,s=4;t.Parser=function(){o.apply(this,arguments),this.pattern=function(){return i},this.extract=function(e,t,n,o){var e=n[0].substr(n[1].length),i=n.index+n[1].length,a=new r({index:i,text:e,ref:t});return n[s]||(s=3),"afternoon"==n[s]?a.start.imply("hour",o.afternoon?o.afternoon:15):"evening"==n[s]?a.start.imply("hour",o.evening?o.evening:18):"morning"==n[s]?a.start.imply("hour",o.morning?o.morning:6):"noon"==n[s]&&a.start.imply("hour",o.noon?o.noon:12),
a.tags.ENCasualTimeParser=!0,a}}},"./node_modules/chrono-node/src/parsers/EN/ENDeadlineFormatParser.js":function(e,t,n){var o=n("./node_modules/moment/moment.js"),r=n("./node_modules/chrono-node/src/parsers/parser.js").Parser,i=n("./node_modules/chrono-node/src/result.js").ParsedResult,s=n("./node_modules/chrono-node/src/utils/EN.js"),a=new RegExp("(\\W|^)(within|in)\\s*("+s.INTEGER_WORDS_PATTERN+"|[0-9]+|an?(?:\\s*few)?|half(?:\\s*an?)?)\\s*(seconds?|min(?:ute)?s?|hours?|days?|weeks?|months?|years?)\\s*(?=\\W|$)","i"),l=new RegExp("(\\W|^)(within|in)\\s*("+s.INTEGER_WORDS_PATTERN+"|[0-9]+|an?)\\s*(seconds?|minutes?|hours?|days?)\\s*(?=\\W|$)","i");t.Parser=function(){r.apply(this,arguments),this.pattern=function(){return this.isStrictMode()?l:a},this.extract=function(e,t,n,r){var a=n.index+n[1].length,e=n[0];e=n[0].substr(n[1].length,n[0].length-n[1].length);var l=new i({index:a,text:e,ref:t}),d=n[3].toLowerCase();d=void 0!==s.INTEGER_WORDS[d]?s.INTEGER_WORDS[d]:"a"===d||"an"===d?1:d.match(/few/i)?3:d.match(/half/i)?.5:parseInt(d);var u=o(t);return n[4].match(/day|week|month|year/i)?(n[4].match(/day/i)?u.add(d,"d"):n[4].match(/week/i)?u.add(7*d,"d"):n[4].match(/month/i)?u.add(d,"month"):n[4].match(/year/i)&&u.add(d,"year"),l.start.assign("year",u.year()),l.start.assign("month",u.month()+1),l.start.assign("day",u.date()),l):(n[4].match(/hour/i)?u.add(d,"hour"):n[4].match(/min/i)?u.add(d,"minute"):n[4].match(/second/i)&&u.add(d,"second"),l.start.imply("year",u.year()),l.start.imply("month",u.month()+1),l.start.imply("day",u.date()),l.start.assign("hour",u.hour()),l.start.assign("minute",u.minute()),l.start.assign("second",u.second()),l.tags.ENDeadlineFormatParser=!0,l)}}},"./node_modules/chrono-node/src/parsers/EN/ENISOFormatParser.js":function(e,t,n){var o=n("./node_modules/moment/moment.js"),r=n("./node_modules/chrono-node/src/parsers/parser.js").Parser,i=n("./node_modules/chrono-node/src/result.js").ParsedResult,s=new RegExp("(\\W|^)([0-9]{4})\\-([0-9]{1,2})\\-([0-9]{1,2})(?:T([0-9]{1,2}):([0-9]{1,2})(?::([0-9]{1,2})(?:\\.(\\d{1,4}))?)?(?:Z|([+-]\\d{2}):?(\\d{2})?)?)?(?=\\W|$)","i"),a=2,l=3,d=4,u=5,c=6,p=7,f=8,m=9,h=10;t.Parser=function(){r.apply(this,arguments),this.pattern=function(){return s},this.extract=function(e,t,n,r){var e=n[0].substr(n[1].length),s=n.index+n[1].length,g=new i({text:e,index:s,ref:t});if(g.start.assign("year",parseInt(n[a])),g.start.assign("month",parseInt(n[l])),g.start.assign("day",parseInt(n[d])),o(g.start.get("month"))>12||o(g.start.get("month"))<1||o(g.start.get("day"))>31||o(g.start.get("day"))<1)return null;if(null!=n[u])if(g.start.assign("hour",parseInt(n[u])),g.start.assign("minute",parseInt(n[c])),null!=n[p]&&g.start.assign("second",parseInt(n[p])),null!=n[f]&&g.start.assign("millisecond",parseInt(n[f])),null==n[m])g.start.assign("timezoneOffset",0);else{var y=0,v=parseInt(n[m]);null!=n[h]&&(y=parseInt(n[h]));var b=60*v;b<0?b-=y:b+=y,g.start.assign("timezoneOffset",b)}return g.tags.ENISOFormatParser=!0,g}}},"./node_modules/chrono-node/src/parsers/EN/ENMonthNameLittleEndianParser.js":function(e,t,n){var o=n("./node_modules/moment/moment.js"),r=n("./node_modules/chrono-node/src/parsers/parser.js").Parser,i=n("./node_modules/chrono-node/src/result.js").ParsedResult,s=n("./node_modules/chrono-node/src/utils/EN.js"),a=new RegExp("(\\W|^)(?:on\\s*?)?(?:(Sunday|Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sun|Mon|Tue|Wed|Thu|Fri|Sat)\\s*,?\\s*)?(([0-9]{1,2})(?:st|nd|rd|th)?|"+s.ORDINAL_WORDS_PATTERN+")(?:\\s*(?:to|\\-|\\–|until|through|till|\\s)\\s*(([0-9]{1,2})(?:st|nd|rd|th)?|"+s.ORDINAL_WORDS_PATTERN+"))?\\s*(?:of)?\\s*(Jan(?:uary|\\.)?|Feb(?:ruary|\\.)?|Mar(?:ch|\\.)?|Apr(?:il|\\.)?|May|Jun(?:e|\\.)?|Jul(?:y|\\.)?|Aug(?:ust|\\.)?|Sep(?:tember|\\.)?|Oct(?:ober|\\.)?|Nov(?:ember|\\.)?|Dec(?:ember|\\.)?)(?:,?\\s*([0-9]{1,4}(?![^\\s]\\d))(\\s*(?:BE|AD|BC))?)?(?=\\W|$)","i"),l=2,d=3,u=4,c=5,p=6,f=7,m=8,h=9;t.Parser=function(){r.apply(this,arguments),this.pattern=function(){return a},this.extract=function(e,t,n,r){var a=new i({text:n[0].substr(n[1].length,n[0].length-n[1].length),index:n.index+n[1].length,ref:t}),g=n[f];g=s.MONTH_OFFSET[g.toLowerCase()];var y=n[u]?parseInt(n[u]):s.ORDINAL_WORDS[n[d].trim().replace("-"," ").toLowerCase()],v=null;if(n[m])if(v=n[m],v=parseInt(v),n[h])/BE/i.test(n[h])?v-=543:/BC/i.test(n[h])&&(v=-v);else{if(v<10)return null;v<100&&(v+=2e3)}if(v)a.start.assign("day",y),a.start.assign("month",g),a.start.assign("year",v);else{var b=o(t);b.month(g-1),b.date(y),b.year(o(t).year());var _=b.clone().add(1,"y"),x=b.clone().add(-1,"y");Math.abs(_.diff(o(t)))<Math.abs(b.diff(o(t)))?b=_:Math.abs(x.diff(o(t)))<Math.abs(b.diff(o(t)))&&(b=x),a.start.assign("day",y),a.start.assign("month",g),a.start.imply("year",b.year())}if(n[l]){var C=n[l];C=s.WEEKDAY_OFFSET[C.toLowerCase()],a.start.assign("weekday",C)}if(n[c]){var E=n[p]?parseInt(n[p]):s.ORDINAL_WORDS[n[c].trim().replace("-"," ").toLowerCase()];a.end=a.start.clone(),a.end.assign("day",E)}return a.tags.ENMonthNameLittleEndianParser=!0,a}}},"./node_modules/chrono-node/src/parsers/EN/ENMonthNameMiddleEndianParser.js":function(e,t,n){var o=n("./node_modules/moment/moment.js"),r=n("./node_modules/chrono-node/src/parsers/parser.js").Parser,i=n("./node_modules/chrono-node/src/result.js").ParsedResult,s=n("./node_modules/chrono-node/src/utils/EN.js"),a=new RegExp("(\\W|^)(?:(?:on\\s*?)?(Sunday|Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sun\\.?|Mon\\.?|Tue\\.?|Wed\\.?|Thu\\.?|Fri\\.?|Sat\\.?)\\s*,?\\s*)?(Jan\\.?|January|Feb\\.?|February|Mar\\.?|March|Apr\\.?|April|May\\.?|Jun\\.?|June|Jul\\.?|July|Aug\\.?|August|Sep\\.?|Sept\\.?|September|Oct\\.?|October|Nov\\.?|November|Dec\\.?|December)\\s*(([0-9]{1,2})(?:st|nd|rd|th)?|"+s.ORDINAL_WORDS_PATTERN+")\\s*(?:(?:to|\\-)\\s*(([0-9]{1,2})(?:st|nd|rd|th)?| "+s.ORDINAL_WORDS_PATTERN+")\\s*)?(?:\\s*,?\\s*(?:([0-9]{4})\\s*(BE|AD|BC)?|([0-9]{1,4})\\s*(AD|BC))\\s*)?(?=\\W|$)(?!\\:\\d)","i"),l=2,d=3,u=4,c=5,p=6,f=7,m=8,h=9,g=10,y=11;t.Parser=function(){r.apply(this,arguments),this.pattern=function(){return a},this.extract=function(e,t,n,r){var a=new i({text:n[0].substr(n[1].length,n[0].length-n[1].length),index:n.index+n[1].length,ref:t}),v=n[d];v=s.MONTH_OFFSET[v.toLowerCase()];var b=n[c]?parseInt(n[c]):s.ORDINAL_WORDS[n[u].trim().replace("-"," ").toLowerCase()],_=null;if(n[m]||n[g]){_=n[m]||n[g],_=parseInt(_);var x=n[h]||n[y];x?/BE/i.test(x)?_-=543:/BC/i.test(x)&&(_=-_):_<100&&(_+=2e3)}if(_)a.start.assign("day",b),a.start.assign("month",v),a.start.assign("year",_);else{var C=o(t);C.month(v-1),C.date(b);var E=C.clone().add(1,"y"),w=C.clone().add(-1,"y");Math.abs(E.diff(o(t)))<Math.abs(C.diff(o(t)))?C=E:Math.abs(w.diff(o(t)))<Math.abs(C.diff(o(t)))&&(C=w),a.start.assign("day",b),a.start.assign("month",v),a.start.imply("year",C.year())}if(n[l]){var j=n[l];j=s.WEEKDAY_OFFSET[j.toLowerCase()],a.start.assign("weekday",j)}if(n[p]){var S=n[f]?S=parseInt(n[f]):s.ORDINAL_WORDS[n[p].replace("-"," ").trim().toLowerCase()];a.end=a.start.clone(),a.end.assign("day",S)}return a.tags.ENMonthNameMiddleEndianParser=!0,a}}},"./node_modules/chrono-node/src/parsers/EN/ENMonthNameParser.js":function(e,t,n){var o=n("./node_modules/moment/moment.js"),r=n("./node_modules/chrono-node/src/parsers/parser.js").Parser,i=n("./node_modules/chrono-node/src/result.js").ParsedResult,s=n("./node_modules/chrono-node/src/utils/EN.js"),a=new RegExp("(^|\\D\\s+|[^\\w\\s])(Jan\\.?|January|Feb\\.?|February|Mar\\.?|March|Apr\\.?|April|May\\.?|Jun\\.?|June|Jul\\.?|July|Aug\\.?|August|Sep\\.?|Sept\\.?|September|Oct\\.?|October|Nov\\.?|November|Dec\\.?|December)\\s*(?:[,-]?\\s*([0-9]{4})(\\s*BE|AD|BC)?)?(?=[^\\s\\w]|\\s+[^0-9]|\\s+$|$)","i"),l=2,d=3,u=4;t.Parser=function(){r.apply(this,arguments),this.pattern=function(){return a},this.extract=function(e,t,n,r){var a=new i({text:n[0].substr(n[1].length,n[0].length-n[1].length),index:n.index+n[1].length,ref:t}),c=n[l];c=s.MONTH_OFFSET[c.toLowerCase()];var p=1,f=null;if(n[d]&&(f=n[d],f=parseInt(f),n[u]?n[u].match(/BE/)?f-=543:n[u].match(/BC/)&&(f=-f):f<100&&(f+=2e3)),f)a.start.imply("day",p),a.start.assign("month",c),a.start.assign("year",f);else{var m=o(t);m.month(c-1),m.date(p);var h=m.clone().add(1,"y"),g=m.clone().add(-1,"y");Math.abs(h.diff(o(t)))<Math.abs(m.diff(o(t)))?m=h:Math.abs(g.diff(o(t)))<Math.abs(m.diff(o(t)))&&(m=g),a.start.imply("day",p),a.start.assign("month",c),a.start.imply("year",m.year())}return a.tags.ENMonthNameParser=!0,a}}},"./node_modules/chrono-node/src/parsers/EN/ENRelativeDateFormatParser.js":function(e,t,n){var o=n("./node_modules/moment/moment.js"),r=n("./node_modules/chrono-node/src/parsers/parser.js").Parser,i=n("./node_modules/chrono-node/src/result.js").ParsedResult,s=n("./node_modules/chrono-node/src/utils/EN.js"),a=new RegExp("(\\W|^)(next|last|past)\\s*("+s.INTEGER_WORDS_PATTERN+"|[0-9]+|few|half(?:\\s*an?)?)?\\s*(seconds?|min(?:ute)?s?|hours?|days?|weeks?|months?|years?)(?=\\s*)(?=\\W|$)","i"),l=2,d=3,u=4;t.Parser=function(){r.apply(this,arguments),this.pattern=function(){return a},this.extract=function(e,t,n,r){var a=n.index+n[1].length,c=n[l].toLowerCase().match(/^next/)?1:-1,e=n[0];e=n[0].substr(n[1].length,n[0].length-n[1].length);var p=new i({index:a,text:e,ref:t});p.tags.ENRelativeDateFormatParser=!0;var f=void 0===n[d]?"":n[3].toLowerCase();f=void 0!==s.INTEGER_WORDS[f]?s.INTEGER_WORDS[f]:""===f?1:f.match(/few/i)?3:f.match(/half/i)?.5:parseInt(f),f*=c;var m=o(t);return n[u].match(/day|week|month|year/i)?(n[u].match(/day/i)?(m.add(f,"d"),p.start.assign("year",m.year()),p.start.assign("month",m.month()+1),p.start.assign("day",m.date())):n[u].match(/week/i)?(m.add(7*f,"d"),p.start.imply("day",m.date()),p.start.imply("month",m.month()+1),p.start.imply("year",m.year())):n[u].match(/month/i)?(m.add(f,"month"),p.start.imply("day",m.date()),p.start.assign("year",m.year()),p.start.assign("month",m.month()+1)):n[u].match(/year/i)&&(m.add(f,"year"),p.start.imply("day",m.date()),p.start.imply("month",m.month()+1),p.start.assign("year",m.year())),p):(n[u].match(/hour/i)?(m.add(f,"hour"),p.start.imply("minute",m.minute()),p.start.imply("second",m.second())):n[u].match(/min/i)?(m.add(f,"minute"),p.start.assign("minute",m.minute()),p.start.imply("second",m.second())):n[u].match(/second/i)&&(m.add(f,"second"),p.start.assign("second",m.second()),p.start.assign("minute",m.minute())),p.start.assign("hour",m.hour()),p.start.assign("year",m.year()),p.start.assign("month",m.month()+1),p.start.assign("day",m.date()),p)}}},"./node_modules/chrono-node/src/parsers/EN/ENSlashDateFormatParser.js":function(e,t,n){var o=n("./node_modules/moment/moment.js"),r=n("./node_modules/chrono-node/src/parsers/parser.js").Parser,i=n("./node_modules/chrono-node/src/result.js").ParsedResult,s=new RegExp("(\\W|^)(?:(?:on\\s*?)?((?:sun|mon|tues?|wed(?:nes)?|thu(?:rs?)?|fri|sat(?:ur)?)(?:day)?)\\s*\\,?\\s*)?([0-3]{0,1}[0-9]{1})[\\/\\.\\-]([0-3]{0,1}[0-9]{1})(?:[\\/\\.\\-]([0-9]{4}s*,?s*|[0-9]{2}s*,?s*))?(\\W|$)","i"),a={sunday:0,sun:0,monday:1,mon:1,tuesday:2,wednesday:3,wed:3,thursday:4,thur:4,friday:5,fri:5,saturday:6,sat:6},l=1,d=6,u=2,c=3,p=4,f=5;t.Parser=function(e){r.apply(this,arguments),this.pattern=function(){return s},this.extract=function(e,t,n,r){if("/"==n[l]||"/"==n[d])return void(n.index+=n[0].length);var s=n.index+n[l].length,e=n[0].substr(n[l].length,n[0].length-n[d].length),m=new i({text:e,index:s,ref:t});if(!e.match(/^\d\.\d$/)&&!e.match(/^\d\.\d{1,2}\.\d{1,2}$/)&&(n[f]||!(n[0].indexOf("/")<0))){var h=n[f]||o(t).year()+"",g=n[c],y=n[p];if(g=parseInt(g),y=parseInt(y),h=parseInt(h),(g<1||g>12)&&g>12){if(!(y>=1&&y<=12&&g>=13&&g<=31))return null;var v=g;g=y,y=v}return y<1||y>31?null:(h<100&&(h+=h>50?1900:2e3),m.start.assign("day",y),m.start.assign("month",g),m.start.assign("year",h),n[u]&&m.start.assign("weekday",a[n[u].toLowerCase()]),m.tags.ENSlashDateFormatParser=!0,m)}}}},"./node_modules/chrono-node/src/parsers/EN/ENSlashDateFormatStartWithYearParser.js":function(e,t,n){var o=n("./node_modules/moment/moment.js"),r=n("./node_modules/chrono-node/src/parsers/parser.js").Parser,i=n("./node_modules/chrono-node/src/result.js").ParsedResult,s=new RegExp("(\\W|^)([0-9]{4})[\\-\\.\\/]([0-9]{1,2})[\\-\\.\\/]([0-9]{1,2})(?=\\W|$)","i"),a=2,l=3,d=4;t.Parser=function(){r.apply(this,arguments),this.pattern=function(){return s},this.extract=function(e,t,n,r){var e=n[0].substr(n[1].length),s=n.index+n[1].length,u=new i({text:e,index:s,ref:t});return u.start.assign("year",parseInt(n[a])),u.start.assign("month",parseInt(n[l])),u.start.assign("day",parseInt(n[d])),o(u.start.get("month"))>12||o(u.start.get("month"))<1||o(u.start.get("day"))>31||o(u.start.get("day"))<1?null:(u.tags.ENDateFormatParser=!0,u)}}},"./node_modules/chrono-node/src/parsers/EN/ENSlashMonthFormatParser.js":function(e,t,n){var o=(n("./node_modules/moment/moment.js"),n("./node_modules/chrono-node/src/parsers/parser.js").Parser),r=n("./node_modules/chrono-node/src/result.js").ParsedResult,i=new RegExp("(^|[^\\d/]\\s+|[^\\w\\s])([0-9]|0[1-9]|1[012])/([0-9]{4})([^\\d/]|$)","i"),s=1,a=4,l=2,d=3;t.Parser=function(e){o.apply(this,arguments),this.pattern=function(){return i},this.extract=function(e,t,n,o){var i=n.index+n[s].length,e=n[0].substr(n[s].length,n[0].length-(1+n[a].length)).trim(),u=new r({text:e,index:i,ref:t}),c=n[d],p=n[l],f=1;return p=parseInt(p),c=parseInt(c),u.start.imply("day",f),u.start.assign("month",p),u.start.assign("year",c),u.tags.ENSlashMonthFormatParser=!0,u}}},"./node_modules/chrono-node/src/parsers/EN/ENTimeAgoFormatParser.js":function(e,t,n){var o=n("./node_modules/moment/moment.js"),r=n("./node_modules/chrono-node/src/parsers/parser.js").Parser,i=n("./node_modules/chrono-node/src/result.js").ParsedResult,s=n("./node_modules/chrono-node/src/utils/EN.js"),a=new RegExp("(\\W|^)(?:within\\s*)?("+s.INTEGER_WORDS_PATTERN+"|[0-9]+|an?(?:\\s*few)?|half(?:\\s*an?)?)\\s*(seconds?|min(?:ute)?s?|hours?|weeks?|days?|months?|years?)\\s*(?:ago|before|earlier)(?=(?:\\W|$))","i"),l=new RegExp("(\\W|^)(?:within\\s*)?([0-9]+|an?)\\s*(seconds?|minutes?|hours?|days?)\\s*ago(?=(?:\\W|$))","i");t.Parser=function(){r.apply(this,arguments),this.pattern=function(){return this.isStrictMode()?l:a},this.extract=function(e,t,n,r){if(n.index>0&&e[n.index-1].match(/\w/))return null;var e=n[0];e=n[0].substr(n[1].length,n[0].length-n[1].length),index=n.index+n[1].length;var a=new i({index:index,text:e,ref:t}),l=n[2].toLowerCase();l=void 0!==s.INTEGER_WORDS[l]?s.INTEGER_WORDS[l]:"a"===l||"an"===l?1:l.match(/few/)?3:l.match(/half/)?.5:parseInt(l);var d=o(t);return n[3].match(/hour|min|second/i)?(n[3].match(/hour/i)?d.add(-l,"hour"):n[3].match(/min/i)?d.add(-l,"minute"):n[3].match(/second/i)&&d.add(-l,"second"),a.start.imply("day",d.date()),a.start.imply("month",d.month()+1),a.start.imply("year",d.year()),a.start.assign("hour",d.hour()),a.start.assign("minute",d.minute()),a.start.assign("second",d.second()),a.tags.ENTimeAgoFormatParser=!0,a):n[3].match(/week/i)?(d.add(-l,"week"),a.start.imply("day",d.date()),a.start.imply("month",d.month()+1),a.start.imply("year",d.year()),a.start.imply("weekday",d.day()),a):(n[3].match(/day/i)&&d.add(-l,"d"),n[3].match(/month/i)&&d.add(-l,"month"),n[3].match(/year/i)&&d.add(-l,"year"),a.start.assign("day",d.date()),a.start.assign("month",d.month()+1),a.start.assign("year",d.year()),a)}}},"./node_modules/chrono-node/src/parsers/EN/ENTimeExpressionParser.js":function(e,t,n){var o=n("./node_modules/moment/moment.js"),r=n("./node_modules/chrono-node/src/parsers/parser.js").Parser,i=n("./node_modules/chrono-node/src/result.js").ParsedResult,s=n("./node_modules/chrono-node/src/result.js").ParsedComponents,a=new RegExp("(^|\\s|T)(?:(?:at|from)\\s*)?(\\d{1,4}|noon|midnight)(?:(?:\\.|\\:|\\：)(\\d{1,2})(?:(?:\\:|\\：)(\\d{2}))?)?(?:\\s*(A\\.M\\.|P\\.M\\.|AM?|PM?))?(?=\\W|$)","i"),l=new RegExp("^\\s*(\\-|\\–|\\~|\\〜|to|\\?)\\s*(\\d{1,4})(?:(?:\\.|\\:|\\：)(\\d{1,2})(?:(?:\\.|\\:|\\：)(\\d{1,2}))?)?(?:\\s*(A\\.M\\.|P\\.M\\.|AM?|PM?))?(?=\\W|$)","i"),d=2,u=3,c=4,p=5;t.Parser=function(){r.apply(this,arguments),this.pattern=function(){return a},this.extract=function(e,t,n,r){if(n.index>0&&e[n.index-1].match(/\w/))return null;var a=o(t),f=new i;f.ref=t,f.index=n.index+n[1].length,f.text=n[0].substring(n[1].length),f.tags.ENTimeExpressionParser=!0,f.start.imply("day",a.date()),f.start.imply("month",a.month()+1),f.start.imply("year",a.year());var m=0,h=0,g=-1;if(null!=n[c]){var y=parseInt(n[c]);if(y>=60)return null;f.start.assign("second",y)}if("noon"==n[d].toLowerCase()?(g=1,m=12):"midnight"==n[d].toLowerCase()?(g=0,m=0):m=parseInt(n[d]),null!=n[u]?h=parseInt(n[u]):m>100&&(h=m%100,m=parseInt(m/100)),h>=60)return null;if(m>24)return null;if(m>=12&&(g=1),null!=n[p]){if(m>12)return null;var v=n[p][0].toLowerCase();"a"==v&&(g=0,12==m&&(m=0)),"p"==v&&(g=1,12!=m&&(m+=12))}if(f.start.assign("hour",m),f.start.assign("minute",h),g>=0?f.start.assign("meridiem",g):m<12?f.start.imply("meridiem",0):f.start.imply("meridiem",1),n=l.exec(e.substring(f.index+f.text.length)),!n)return f.text.match(/^\d+$/)?null:f;if(n[0].match(/^\s*(\+|\-)\s*\d{3,4}$/))return f;null==f.end&&(f.end=new s(null,f.start.date()));var m=0,h=0,g=-1;if(null!=n[c]){var y=parseInt(n[c]);if(y>=60)return null;f.end.assign("second",y)}if(m=parseInt(n[2]),null!=n[u]){if(h=parseInt(n[u]),h>=60)return f}else m>100&&(h=m%100,m=parseInt(m/100));if(h>=60)return null;if(m>24)return null;if(m>=12&&(g=1),null!=n[p]){if(m>12)return null;var v=n[p][0].toLowerCase();"a"==v&&(g=0,12==m&&(m=0,f.end.isCertain("day")||f.end.imply("day",f.end.get("day")+1))),"p"==v&&(g=1,12!=m&&(m+=12)),f.start.isCertain("meridiem")||(0==g?(f.start.imply("meridiem",0),12==f.start.get("hour")&&f.start.assign("hour",0)):(f.start.imply("meridiem",1),12!=f.start.get("hour")&&f.start.assign("hour",f.start.get("hour")+12)))}if(f.text=f.text+n[0],f.end.assign("hour",m),f.end.assign("minute",h),g>=0)f.end.assign("meridiem",g);else{var b=f.start.isCertain("meridiem")&&1==f.start.get("meridiem");b&&f.start.get("hour")>m?f.end.imply("meridiem",0):m>12&&f.end.imply("meridiem",1)}return f.end.date().getTime()<f.start.date().getTime()&&f.end.imply("day",f.end.get("day")+1),f}}},"./node_modules/chrono-node/src/parsers/EN/ENWeekdayParser.js":function(e,t,n){var o=n("./node_modules/moment/moment.js"),r=n("./node_modules/chrono-node/src/parsers/parser.js").Parser,i=n("./node_modules/chrono-node/src/result.js").ParsedResult,s={sunday:0,sun:0,monday:1,mon:1,tuesday:2,tues:2,tue:2,wednesday:3,wed:3,thursday:4,thurs:4,thur:4,thu:4,friday:5,fri:5,saturday:6,sat:6},a=new RegExp("(\\W|^)(?:(?:\\,|\\(|\\（)\\s*)?(?:on\\s*?)?(?:(this|last|past|next)\\s*)?("+Object.keys(s).join("|")+")(?:\\s*(?:\\,|\\)|\\）))?(?:\\s*(this|last|past|next)\\s*week)?(?=\\W|$)","i"),l=2,d=3,u=4;t.updateParsedComponent=function(e,t,n,r){var i=o(t),s=!1,a=i.day();return"last"==r||"past"==r?(i.day(n-7),s=!0):"next"==r?(i.day(n+7),s=!0):"this"==r?i.day(n):Math.abs(n-7-a)<Math.abs(n-a)?i.day(n-7):Math.abs(n+7-a)<Math.abs(n-a)?i.day(n+7):i.day(n),e.start.assign("weekday",n),s?(e.start.assign("day",i.date()),e.start.assign("month",i.month()+1),e.start.assign("year",i.year())):(e.start.imply("day",i.date()),e.start.imply("month",i.month()+1),e.start.imply("year",i.year())),e},t.Parser=function(){r.apply(this,arguments),this.pattern=function(){return a},this.extract=function(e,n,o,r){var a=o.index+o[1].length,e=o[0].substr(o[1].length,o[0].length-o[1].length),c=new i({index:a,text:e,ref:n}),p=o[d].toLowerCase(),f=s[p];if(void 0===f)return null;var m=o[l],h=o[u],g=m||h;return g=g||"",g=g.toLowerCase(),t.updateParsedComponent(c,n,f,g),c.tags.ENWeekdayParser=!0,c}}},"./node_modules/chrono-node/src/parsers/ES/ESCasualDateParser.js":function(e,t,n){var o=n("./node_modules/moment/moment.js"),r=n("./node_modules/chrono-node/src/parsers/parser.js").Parser,i=n("./node_modules/chrono-node/src/result.js").ParsedResult,s=/(\W|^)(ahora|esta\s*(mañana|tarde|noche)|(ayer|mañana)\s*por\s*la\s*(mañana|tarde|noche)|hoy|mañana|ayer|anoche)(?=\W|$)/i;t.Parser=function(){r.apply(this,arguments),this.pattern=function(){return s},this.extract=function(e,t,n,r){var e=n[0].substr(n[1].length),s=n.index+n[1].length,a=new i({index:s,text:e,ref:t}),l=o(t),d=l.clone(),u=e.toLowerCase().replace(/\s+/g," ");if("mañana"==u)l.hour()>1&&d.add(1,"day");else if("ayer"==u)d.add(-1,"day");else if("anoche"==u)a.start.imply("hour",0),l.hour()>6&&d.add(-1,"day");else if(u.match("esta")){var c=n[3].toLowerCase();"tarde"==c?a.start.imply("hour",18):"mañana"==c?a.start.imply("hour",6):"noche"==c&&(a.start.imply("hour",22),a.start.imply("meridiem",1))}else if(u.match(/por\s*la/)){var p=n[4].toLowerCase();"ayer"===p?d.add(-1,"day"):"mañana"===p&&d.add(1,"day");var c=n[5].toLowerCase();"tarde"==c?a.start.imply("hour",18):"mañana"==c?a.start.imply("hour",9):"noche"==c&&(a.start.imply("hour",22),a.start.imply("meridiem",1))}else u.match("ahora")&&(a.start.imply("hour",l.hour()),a.start.imply("minute",l.minute()),a.start.imply("second",l.second()),a.start.imply("millisecond",l.millisecond()));return a.start.assign("day",d.date()),a.start.assign("month",d.month()+1),a.start.assign("year",d.year()),a.tags.ESCasualDateParser=!0,a}}},"./node_modules/chrono-node/src/parsers/ES/ESDeadlineFormatParser.js":function(e,t,n){var o=n("./node_modules/moment/moment.js"),r=n("./node_modules/chrono-node/src/parsers/parser.js").Parser,i=n("./node_modules/chrono-node/src/result.js").ParsedResult,s=/(\W|^)(dentro\s*de|en)\s*([0-9]+|medi[oa]|una?)\s*(minutos?|horas?|d[ií]as?)\s*(?=(?:\W|$))/i;t.Parser=function(){r.apply(this,arguments),this.pattern=function(){return s},this.extract=function(e,t,n,r){var s=n.index+n[1].length,e=n[0];e=n[0].substr(n[1].length,n[0].length-n[1].length);var a=new i({index:s,text:e,ref:t}),l=parseInt(n[3]);isNaN(l)&&(l=n[3].match(/medi/)?.5:1);var d=o(t);return n[4].match(/d[ií]a/)?(d.add(l,"d"),a.start.assign("year",d.year()),a.start.assign("month",d.month()+1),a.start.assign("day",d.date()),a):(n[4].match(/hora/)?d.add(l,"hour"):n[4].match(/minuto/)&&d.add(l,"minute"),a.start.imply("year",d.year()),a.start.imply("month",d.month()+1),a.start.imply("day",d.date()),a.start.assign("hour",d.hour()),a.start.assign("minute",d.minute()),a.tags.ESDeadlineFormatParser=!0,a)}}},"./node_modules/chrono-node/src/parsers/ES/ESMonthNameLittleEndianParser.js":function(e,t,n){var o=n("./node_modules/moment/moment.js"),r=n("./node_modules/chrono-node/src/parsers/parser.js").Parser,i=n("./node_modules/chrono-node/src/result.js").ParsedResult,s=n("./node_modules/chrono-node/src/utils/ES.js"),a=(s.WEEKDAY_OFFSET,new RegExp("(\\W|^)(?:(Domingo|Lunes|Martes|Miércoles|Miercoles|Jueves|Viernes|Sábado|Sabado|Dom|Lun|Mar|Mie|Jue|Vie|Sab)\\s*,?\\s*)?([0-9]{1,2})(?:º|ª|°)?(?:\\s*(?:desde|de|\\-|\\–|al?|hasta|\\s)\\s*([0-9]{1,2})(?:º|ª|°)?)?\\s*(?:de)?\\s*(Ene(?:ro|\\.)?|Feb(?:rero|\\.)?|Mar(?:zo|\\.)?|Abr(?:il|\\.)?|May(?:o|\\.)?|Jun(?:io|\\.)?|Jul(?:io|\\.)?|Ago(?:sto|\\.)?|Sep(?:tiembre|\\.)?|Oct(?:ubre|\\.)?|Nov(?:iembre|\\.)?|Dic(?:iembre|\\.)?)(?:\\s*(?:del?)?(\\s*[0-9]{1,4}(?![^\\s]\\d))(\\s*[ad]\\.?\\s*c\\.?|a\\.?\\s*d\\.?)?)?(?=\\W|$)","i")),l=2,d=3,u=4,c=5,p=6,f=7;t.Parser=function(){r.apply(this,arguments),this.pattern=function(){return a},this.extract=function(e,t,n,r){var a=new i({text:n[0].substr(n[1].length,n[0].length-n[1].length),index:n.index+n[1].length,ref:t}),m=n[c];m=s.MONTH_OFFSET[m.toLowerCase()];var h=n[d];h=parseInt(h);var g=null;if(n[p]&&(g=n[p],g=parseInt(g),n[f]?/a\.?\s*c\.?/i.test(n[f])&&(g=-g):g<100&&(g+=2e3)),g)a.start.assign("day",h),a.start.assign("month",m),a.start.assign("year",g);else{var y=o(t);y.month(m-1),y.date(h),y.year(o(t).year());var v=y.clone().add(1,"y"),b=y.clone().add(-1,"y");Math.abs(v.diff(o(t)))<Math.abs(y.diff(o(t)))?y=v:Math.abs(b.diff(o(t)))<Math.abs(y.diff(o(t)))&&(y=b),a.start.assign("day",h),a.start.assign("month",m),a.start.imply("year",y.year())}if(n[l]){var _=n[l];_=s.WEEKDAY_OFFSET[_.toLowerCase()],a.start.assign("weekday",_)}return n[u]&&(a.end=a.start.clone(),a.end.assign("day",parseInt(n[u]))),a.tags.ESMonthNameLittleEndianParser=!0,a}}},"./node_modules/chrono-node/src/parsers/ES/ESSlashDateFormatParser.js":function(e,t,n){var o=n("./node_modules/moment/moment.js"),r=n("./node_modules/chrono-node/src/parsers/parser.js").Parser,i=n("./node_modules/chrono-node/src/result.js").ParsedResult,s=new RegExp("(\\W|^)(?:((?:domingo|dom|lunes|lun|martes|mar|mi[ée]rcoles|mie|jueves|jue|viernes|vie|s[áa]bado|sab))\\s*\\,?\\s*)?([0-1]{0,1}[0-9]{1})[\\/\\.\\-]([0-3]{0,1}[0-9]{1})(?:[\\/\\.\\-]([0-9]{4}s*,?s*|[0-9]{2}s*,?s*))?(\\W|$)","i"),a={domingo:0,dom:0,lunes:1,lun:1,martes:2,mar:2,miercoles:3,"miércoles":3,mie:3,jueves:4,jue:4,viernes:5,vier:5,"sábado":6,sabado:6,sab:6},l=1,d=6,u=2,c=4,p=3,f=5;t.Parser=function(e){r.apply(this,arguments),this.pattern=function(){return s},this.extract=function(e,t,n,r){if("/"==n[l]||"/"==n[d])return void(n.index+=n[0].length);var s=n.index+n[l].length,e=n[0].substr(n[l].length,n[0].length-n[d].length),m=new i({text:e,index:s,ref:t});if(!e.match(/^\d\.\d$/)&&!e.match(/^\d\.\d{1,2}\.\d{1,2}$/)&&(n[f]||!(n[0].indexOf("/")<0))){var h=n[f]||o(t).year()+"",g=n[c],y=n[p];if(g=parseInt(g),y=parseInt(y),h=parseInt(h),(g<1||g>12)&&g>12){if(!(y>=1&&y<=12&&g>=13&&g<=31))return null;var v=g;g=y,y=v}return y<1||y>31?null:(h<100&&(h+=h>50?1900:2e3),m.start.assign("day",y),m.start.assign("month",g),m.start.assign("year",h),n[u]&&m.start.assign("weekday",a[n[u].toLowerCase()]),m.tags.ESSlashDateFormatParser=!0,m)}}}},"./node_modules/chrono-node/src/parsers/ES/ESTimeAgoFormatParser.js":function(e,t,n){var o=n("./node_modules/moment/moment.js"),r=n("./node_modules/chrono-node/src/parsers/parser.js").Parser,i=n("./node_modules/chrono-node/src/result.js").ParsedResult,s=/(\W|^)hace\s*([0-9]+|medi[oa]|una?)\s*(minutos?|horas?|semanas?|d[ií]as?|mes(es)?|años?)(?=(?:\W|$))/i;t.Parser=function(){r.apply(this,arguments),this.pattern=function(){return s},this.extract=function(e,t,n,r){if(n.index>0&&e[n.index-1].match(/\w/))return null;var e=n[0];e=n[0].substr(n[1].length,n[0].length-n[1].length),index=n.index+n[1].length;var s=new i({index:index,text:e,ref:t}),a=parseInt(n[2]);isNaN(a)&&(a=n[2].match(/medi/)?.5:1);var l=o(t);return n[3].match(/hora/)||n[3].match(/minuto/)?(n[3].match(/hora/)?l.add(-a,"hour"):n[3].match(/minuto/)&&l.add(-a,"minute"),s.start.imply("day",l.date()),s.start.imply("month",l.month()+1),s.start.imply("year",l.year()),s.start.assign("hour",l.hour()),s.start.assign("minute",l.minute()),s.tags.ESTimeAgoFormatParser=!0,s):n[3].match(/semana/)?(l.add(-a,"week"),s.start.imply("day",l.date()),s.start.imply("month",l.month()+1),s.start.imply("year",l.year()),s.start.imply("weekday",l.day()),s):(n[3].match(/d[ií]a/)&&l.add(-a,"d"),n[3].match(/mes/)&&l.add(-a,"month"),n[3].match(/año/)&&l.add(-a,"year"),s.start.assign("day",l.date()),s.start.assign("month",l.month()+1),s.start.assign("year",l.year()),s)}}},"./node_modules/chrono-node/src/parsers/ES/ESTimeExpressionParser.js":function(e,t,n){var o=n("./node_modules/moment/moment.js"),r=n("./node_modules/chrono-node/src/parsers/parser.js").Parser,i=n("./node_modules/chrono-node/src/result.js").ParsedResult,s=n("./node_modules/chrono-node/src/result.js").ParsedComponents,a=new RegExp("(^|\\s|T)(?:(?:a las?|al?|desde|de)\\s*)?(\\d{1,4}|mediod[ií]a|medianoche)(?:(?:\\.|\\:|\\：)(\\d{1,2})(?:(?:\\:|\\：)(\\d{2}))?)?(?:\\s*(A\\.M\\.|P\\.M\\.|AM?|PM?))?(?=\\W|$)","i"),l=new RegExp("^\\s*(\\-|\\–|\\~|\\〜|a(?:s*las)?|\\?)\\s*(\\d{1,4})(?:(?:\\.|\\:|\\：)(\\d{1,2})(?:(?:\\.|\\:|\\：)(\\d{1,2}))?)?(?:\\s*(A\\.M\\.|P\\.M\\.|AM?|PM?))?(?=\\W|$)","i"),d=2,u=3,c=4,p=5;t.Parser=function(){r.apply(this,arguments),this.pattern=function(){return a},this.extract=function(e,t,n,r){if(n.index>0&&e[n.index-1].match(/\w/))return null;var a=o(t),f=new i;f.ref=t,f.index=n.index+n[1].length,f.text=n[0].substring(n[1].length),f.tags.ESTimeExpressionParser=!0,f.start.imply("day",a.date()),f.start.imply("month",a.month()+1),f.start.imply("year",a.year());var m=0,h=0,g=-1;if(null!=n[c]){var y=parseInt(n[c]);if(y>=60)return null;f.start.assign("second",y)}if(n[d].toLowerCase().match(/mediod/)?(g=1,m=12):"medianoche"==n[d].toLowerCase()?(g=0,m=0):m=parseInt(n[d]),null!=n[u]?h=parseInt(n[u]):m>100&&(h=m%100,m=parseInt(m/100)),h>=60)return null;if(m>24)return null;if(m>=12&&(g=1),null!=n[p]){if(m>12)return null;var v=n[p][0].toLowerCase();"a"==v&&(g=0,12==m&&(m=0)),"p"==v&&(g=1,12!=m&&(m+=12))}if(f.start.assign("hour",m),f.start.assign("minute",h),g>=0&&f.start.assign("meridiem",g),n=l.exec(e.substring(f.index+f.text.length)),!n)return f.text.match(/^\d+$/)?null:f;if(n[0].match(/^\s*(\+|\-)\s*\d{3,4}$/))return f;null==f.end&&(f.end=new s(null,f.start.date()));var m=0,h=0,g=-1;if(null!=n[c]){var y=parseInt(n[c]);if(y>=60)return null;f.end.assign("second",y)}if(m=parseInt(n[2]),null!=n[u]){if(h=parseInt(n[u]),h>=60)return f}else m>100&&(h=m%100,m=parseInt(m/100));if(h>=60)return null;if(m>24)return null;if(m>=12&&(g=1),null!=n[p]){if(m>12)return null;"a"==n[p][0].toLowerCase()&&(g=0,12==m&&(m=0,f.end.isCertain("day")||f.end.imply("day",f.end.get("day")+1))),"p"==n[p][0].toLowerCase()&&(g=1,12!=m&&(m+=12)),f.start.isCertain("meridiem")||(0==g?(f.start.imply("meridiem",0),12==f.start.get("hour")&&f.start.assign("hour",0)):(f.start.imply("meridiem",1),12!=f.start.get("hour")&&f.start.assign("hour",f.start.get("hour")+12)))}else m>=12&&(g=1);return f.text=f.text+n[0],f.end.assign("hour",m),f.end.assign("minute",h),g>=0&&f.end.assign("meridiem",g),f.end.date().getTime()<f.start.date().getTime()&&f.end.imply("day",f.end.get("day")+1),f}}},"./node_modules/chrono-node/src/parsers/ES/ESWeekdayParser.js":function(e,t,n){var o=(n("./node_modules/moment/moment.js"),n("./node_modules/chrono-node/src/parsers/parser.js").Parser),r=n("./node_modules/chrono-node/src/result.js").ParsedResult,i=n("./node_modules/chrono-node/src/parsers/EN/ENWeekdayParser.js").updateParsedComponent,s={domingo:0,dom:0,lunes:1,lun:1,martes:2,mar:2,miercoles:3,"miércoles":3,mie:3,jueves:4,jue:4,viernes:5,vier:5,sabado:6,"sábado":6,sab:6},a=new RegExp("(\\W|^)(?:(?:\\,|\\(|\\（)\\s*)?(?:(este|pasado|pr[oó]ximo)\\s*)?("+Object.keys(s).join("|")+")(?:\\s*(?:\\,|\\)|\\）))?(?:\\s*(este|pasado|pr[óo]ximo)\\s*week)?(?=\\W|$)","i"),l=2,d=3,u=4;t.Parser=function(){o.apply(this,arguments),this.pattern=function(){return a},this.extract=function(e,t,n,o){var a=n.index+n[1].length,e=n[0].substr(n[1].length,n[0].length-n[1].length),c=new r({index:a,text:e,ref:t}),p=n[d].toLowerCase(),f=s[p];if(void 0===f)return null;var m=null,h=n[l],g=n[u];if(h||g){var y=h||g;y=y.toLowerCase(),"pasado"==y?m="this":"próximo"==y||"proximo"==y?m="next":"este"==y&&(m="this")}return i(c,t,f,m),c.tags.ESWeekdayParser=!0,c}}},"./node_modules/chrono-node/src/parsers/FR/FRCasualDateParser.js":function(e,t,n){var o=n("./node_modules/moment/moment.js"),r=n("./node_modules/chrono-node/src/parsers/parser.js").Parser,i=n("./node_modules/chrono-node/src/result.js").ParsedResult,s=/(\W|^)(maintenant|aujourd'hui|ajd|cette\s*nuit|la\s*veille|(demain|hier)(\s*(matin|soir|aprem|après-midi))?|ce\s*(matin|soir)|cet\s*(après-midi|aprem))(?=\W|$)/i;t.Parser=function(){r.apply(this,arguments),this.pattern=function(){return s},this.extract=function(e,t,n,r){var e=n[0].substr(n[1].length),s=n.index+n[1].length,a=new i({index:s,text:e,ref:t}),l=o(t),d=l.clone(),u=e.toLowerCase();return u.match(/demain/)&&l.hour()>1&&d.add(1,"day"),u.match(/hier/)&&d.add(-1,"day"),u.match(/cette\s*nuit/)?(a.start.imply("hour",22),a.start.imply("meridiem",1)):u.match(/la\s*veille/)?(a.start.imply("hour",0),l.hour()>6&&d.add(-1,"day")):u.match(/(après-midi|aprem)/)?a.start.imply("hour",14):u.match(/(soir)/)?a.start.imply("hour",18):u.match(/matin/)?a.start.imply("hour",8):u.match("maintenant")&&(a.start.imply("hour",l.hour()),a.start.imply("minute",l.minute()),a.start.imply("second",l.second()),a.start.imply("millisecond",l.millisecond())),a.start.assign("day",d.date()),a.start.assign("month",d.month()+1),a.start.assign("year",d.year()),
a.tags.FRCasualDateParser=!0,a}}},"./node_modules/chrono-node/src/parsers/FR/FRDeadlineFormatParser.js":function(e,t,n){var o=n("./node_modules/moment/moment.js"),r=n("./node_modules/chrono-node/src/parsers/parser.js").Parser,i=n("./node_modules/chrono-node/src/result.js").ParsedResult,s=n("./node_modules/chrono-node/src/utils/FR.js"),a=new RegExp("(\\W|^)(dans|en)\\s*("+s.INTEGER_WORDS_PATTERN+"|[0-9]+|une?|(?:\\s*quelques)?|demi(?:\\s*|-?)?)\\s*(secondes?|min(?:ute)?s?|heures?|jours?|semaines?|mois|années?)\\s*(?=\\W|$)","i"),l=new RegExp("(\\W|^)(dans|en)\\s*("+s.INTEGER_WORDS_PATTERN+"|[0-9]+|un?)\\s*(secondes?|minutes?|heures?|jours?)\\s*(?=\\W|$)","i");t.Parser=function(){r.apply(this,arguments),this.pattern=function(){return this.isStrictMode()?l:a},this.extract=function(e,t,n,r){var a=n.index+n[1].length,e=n[0];e=n[0].substr(n[1].length,n[0].length-n[1].length);var l=new i({index:a,text:e,ref:t}),d=n[3];d=void 0!==s.INTEGER_WORDS[d]?s.INTEGER_WORDS[d]:"un"===d||"une"===d?1:d.match(/quelques?/i)?3:d.match(/demi-?/i)?.5:parseInt(d);var u=o(t);return n[4].match(/jour|semaine|mois|année/i)?(n[4].match(/jour/)?u.add(d,"d"):n[4].match(/semaine/i)?u.add(7*d,"d"):n[4].match(/mois/i)?u.add(d,"month"):n[4].match(/année/i)&&u.add(d,"year"),l.start.assign("year",u.year()),l.start.assign("month",u.month()+1),l.start.assign("day",u.date()),l):(n[4].match(/heure/i)?u.add(d,"hour"):n[4].match(/min/i)?u.add(d,"minutes"):n[4].match(/secondes/i)&&u.add(d,"second"),l.start.imply("year",u.year()),l.start.imply("month",u.month()+1),l.start.imply("day",u.date()),l.start.assign("hour",u.hour()),l.start.assign("minute",u.minute()),l.start.assign("second",u.second()),l.tags.FRDeadlineFormatParser=!0,l)}}},"./node_modules/chrono-node/src/parsers/FR/FRMonthNameLittleEndianParser.js":function(e,t,n){var o=n("./node_modules/moment/moment.js"),r=n("./node_modules/chrono-node/src/parsers/parser.js").Parser,i=n("./node_modules/chrono-node/src/result.js").ParsedResult,s=n("./node_modules/chrono-node/src/utils/FR.js"),a=(s.WEEKDAY_OFFSET,new RegExp("(\\W|^)(?:(Dimanche|Lundi|Mardi|mercredi|Jeudi|Vendredi|Samedi|Dim|Lun|Mar|Mer|Jeu|Ven|Sam)\\s*,?\\s*)?([0-9]{1,2}|1er)(?:\\s*(?:au|\\-|\\–|jusqu'au?|\\s)\\s*([0-9]{1,2})(?:er)?)?\\s*(?:de)?\\s*(Jan(?:vier|\\.)?|Fév(?:rier|\\.)?|Mars|Avr(?:il|\\.)?|Mai|Juin|Juil(?:let|\\.)?|Ao[uû]t|Sept(?:embre|\\.)?|Oct(?:obre|\\.)?|Nov(?:embre|\\.)?|déc(?:embre|\\.)?)(?:\\s*(\\s*[0-9]{1,4}(?![^\\s]\\d))(?:\\s*(AC|[ap]\\.?\\s*c(?:h(?:r)?)?\\.?\\s*n\\.?))?)?(?=\\W|$)","i")),l=2,d=3,u=4,c=5,p=6,f=7;t.Parser=function(){r.apply(this,arguments),this.pattern=function(){return a},this.extract=function(e,t,n,r){var a=new i({text:n[0].substr(n[1].length,n[0].length-n[1].length),index:n.index+n[1].length,ref:t}),m=n[c];m=s.MONTH_OFFSET[m.toLowerCase()];var h=n[d];h=parseInt(h);var g=null;if(n[p]&&(g=n[p],g=parseInt(g),n[f]?/a/i.test(n[f])&&(g=-g):g<100&&(g+=2e3)),g)a.start.assign("day",h),a.start.assign("month",m),a.start.assign("year",g);else{var y=o(t);y.month(m-1),y.date(h),y.year(o(t).year());var v=y.clone().add(1,"y"),b=y.clone().add(-1,"y");Math.abs(v.diff(o(t)))<Math.abs(y.diff(o(t)))?y=v:Math.abs(b.diff(o(t)))<Math.abs(y.diff(o(t)))&&(y=b),a.start.assign("day",h),a.start.assign("month",m),a.start.imply("year",y.year())}if(n[l]){var _=n[l];_=s.WEEKDAY_OFFSET[_.toLowerCase()],a.start.assign("weekday",_)}return n[u]&&(a.end=a.start.clone(),a.end.assign("day",parseInt(n[u]))),a.tags.FRMonthNameLittleEndianParser=!0,a}}},"./node_modules/chrono-node/src/parsers/FR/FRSlashDateFormatParser.js":function(e,t,n){var o=n("./node_modules/moment/moment.js"),r=n("./node_modules/chrono-node/src/parsers/parser.js").Parser,i=n("./node_modules/chrono-node/src/result.js").ParsedResult,s=new RegExp("(\\W|^)(?:((?:dimanche|dim|lundi|lun|mardi|mar|mercredi|mer|jeudi|jeu|vendredi|ven|samedi|sam|le))\\s*\\,?\\s*)?([0-3]{0,1}[0-9]{1})[\\/\\.\\-]([0-3]{0,1}[0-9]{1})(?:[\\/\\.\\-]([0-9]{4}s*,?s*|[0-9]{2}s*,?s*))?(\\W|$)","i"),a={dimanche:0,dim:0,lundi:1,lun:1,mardi:2,mar:2,mercredi:3,mer:3,jeudi:4,jeu:4,vendredi:5,ven:5,samedi:6,sam:6},l=1,d=6,u=2,c=3,p=4,f=5;t.Parser=function(e){r.apply(this,arguments),this.pattern=function(){return s},this.extract=function(e,t,n,r){if("/"==n[l]||"/"==n[d])return void(n.index+=n[0].length);var s=n.index+n[l].length,e=n[0].substr(n[l].length,n[0].length-n[d].length),m=new i({text:e,index:s,ref:t});if(!e.match(/^\d\.\d$/)&&!e.match(/^\d\.\d{1,2}\.\d{1,2}$/)&&(n[f]||!(n[0].indexOf("/")<0))){var h=n[f]||o(t).year()+"",g=n[p],y=n[c];if(y=parseInt(y),g=parseInt(g),h=parseInt(h),(g<1||g>12)&&g>12){if(!(y>=1&&y<=12&&g>=13&&g<=31))return null;var v=g;g=y,y=v}return y<1||y>31?null:(h<100&&(h+=h>50?1900:2e3),m.start.assign("day",y),m.start.assign("month",g),m.start.assign("year",h),n[u]&&m.start.assign("weekday",a[n[u].toLowerCase()]),m.tags.FRSlashDateFormatParser=!0,m)}}}},"./node_modules/chrono-node/src/parsers/FR/FRTimeAgoFormatParser.js":function(e,t,n){var o=n("./node_modules/moment/moment.js"),r=n("./node_modules/chrono-node/src/parsers/parser.js").Parser,i=n("./node_modules/chrono-node/src/result.js").ParsedResult,s=/(\W|^)il y a\s*([0-9]+|une?)\s*(minutes?|heures?|semaines?|jours?|mois|années?|ans?)(?=(?:\W|$))/i;t.Parser=function(){r.apply(this,arguments),this.pattern=function(){return s},this.extract=function(e,t,n,r){if(n.index>0&&e[n.index-1].match(/\w/))return null;var e=n[0];e=n[0].substr(n[1].length,n[0].length-n[1].length),index=n.index+n[1].length;var s=new i({index:index,text:e,ref:t});s.tags.FRTimeAgoFormatParser=!0;var a=parseInt(n[2]);isNaN(a)&&(a=n[2].match(/demi/)?.5:1);var l=o(t);return n[3].match(/heure/)||n[3].match(/minute/)?(n[3].match(/heure/)?l.add(-a,"hour"):n[3].match(/minute/)&&l.add(-a,"minute"),s.start.imply("day",l.date()),s.start.imply("month",l.month()+1),s.start.imply("year",l.year()),s.start.assign("hour",l.hour()),s.start.assign("minute",l.minute()),s):n[3].match(/semaine/)?(l.add(-a,"week"),s.start.imply("day",l.date()),s.start.imply("month",l.month()+1),s.start.imply("year",l.year()),s.start.imply("weekday",l.day()),s):(n[3].match(/jour/)&&l.add(-a,"d"),n[3].match(/mois/)&&l.add(-a,"month"),n[3].match(/années?|ans?/)&&l.add(-a,"year"),s.start.assign("day",l.date()),s.start.assign("month",l.month()+1),s.start.assign("year",l.year()),s)}}},"./node_modules/chrono-node/src/parsers/FR/FRTimeExpressionParser.js":function(e,t,n){var o=n("./node_modules/moment/moment.js"),r=n("./node_modules/chrono-node/src/parsers/parser.js").Parser,i=n("./node_modules/chrono-node/src/result.js").ParsedResult,s=n("./node_modules/chrono-node/src/result.js").ParsedComponents,a=new RegExp("(^|\\s|T)(?:(?:[àa])\\s*)?(\\d{1,2}(?:h)?|midi|minuit)(?:(?:\\.|\\:|\\：|h)(\\d{1,2})(?:m)?(?:(?:\\:|\\：|m)(\\d{0,2})(?:s)?)?)?(?:\\s*(A\\.M\\.|P\\.M\\.|AM?|PM?))?(?=\\W|$)","i"),l=new RegExp("^\\s*(\\-|\\–|\\~|\\〜|[àa]|\\?)\\s*(\\d{1,2}(?:h)?)(?:(?:\\.|\\:|\\：|h)(\\d{1,2})(?:m)?(?:(?:\\.|\\:|\\：|m)(\\d{1,2})(?:s)?)?)?(?:\\s*(A\\.M\\.|P\\.M\\.|AM?|PM?))?(?=\\W|$)","i"),d=2,u=3,c=4,p=5;t.Parser=function(){r.apply(this,arguments),this.pattern=function(){return a},this.extract=function(e,t,n,r){if(n.index>0&&e[n.index-1].match(/\w/))return null;var a=o(t),f=new i;f.ref=t,f.index=n.index+n[1].length,f.text=n[0].substring(n[1].length),f.tags.FRTimeExpressionParser=!0,f.start.imply("day",a.date()),f.start.imply("month",a.month()+1),f.start.imply("year",a.year());var m=0,h=0,g=-1;if(null!=n[c]){var y=parseInt(n[c]);if(y>=60)return null;f.start.assign("second",y)}if("midi"==n[d].toLowerCase()?(g=1,m=12):"minuit"==n[d].toLowerCase()?(g=0,m=0):m=parseInt(n[d]),null!=n[u]?h=parseInt(n[u]):m>100&&(h=m%100,m=parseInt(m/100)),h>=60)return null;if(m>24)return null;if(m>=12&&(g=1),null!=n[p]){if(m>12)return null;var v=n[p][0].toLowerCase();"a"==v&&(g=0,12==m&&(m=0)),"p"==v&&(g=1,12!=m&&(m+=12))}if(f.start.assign("hour",m),f.start.assign("minute",h),g>=0&&f.start.assign("meridiem",g),n=l.exec(e.substring(f.index+f.text.length)),!n)return f.text.match(/^\d+$/)?null:f;if(n[0].match(/^\s*(\+|\-)\s*\d{3,4}$/))return f;null==f.end&&(f.end=new s(null,f.start.date()));var m=0,h=0,g=-1;if(null!=n[c]){var y=parseInt(n[c]);if(y>=60)return null;f.end.assign("second",y)}if(m=parseInt(n[2]),null!=n[u]){if(h=parseInt(n[u]),h>=60)return f}else m>100&&(h=m%100,m=parseInt(m/100));if(h>=60)return null;if(m>24)return null;if(m>=12&&(g=1),null!=n[p]){if(m>12)return null;"a"==n[p][0].toLowerCase()&&(g=0,12==m&&(m=0,f.end.isCertain("day")||f.end.imply("day",f.end.get("day")+1))),"p"==n[p][0].toLowerCase()&&(g=1,12!=m&&(m+=12)),f.start.isCertain("meridiem")||(0==g?(f.start.imply("meridiem",0),12==f.start.get("hour")&&f.start.assign("hour",0)):(f.start.imply("meridiem",1),12!=f.start.get("hour")&&f.start.assign("hour",f.start.get("hour")+12)))}else m>=12&&(g=1);return f.text=f.text+n[0],f.end.assign("hour",m),f.end.assign("minute",h),g>=0&&f.end.assign("meridiem",g),f.end.date().getTime()<f.start.date().getTime()&&f.end.imply("day",f.end.get("day")+1),f}}},"./node_modules/chrono-node/src/parsers/FR/FRWeekdayParser.js":function(e,t,n){var o=(n("./node_modules/moment/moment.js"),n("./node_modules/chrono-node/src/parsers/parser.js").Parser),r=n("./node_modules/chrono-node/src/result.js").ParsedResult,i=n("./node_modules/chrono-node/src/parsers/EN/ENWeekdayParser.js").updateParsedComponent,s={dimanche:0,dim:0,lundi:1,lun:1,mardi:2,mar:2,mercredi:3,mer:3,jeudi:4,jeu:4,vendredi:5,ven:5,samedi:6,sam:6},a=new RegExp("(\\s|^)(?:(?:\\,|\\(|\\（)\\s*)?(?:(ce)\\s*)?("+Object.keys(s).join("|")+")(?:\\s*(?:\\,|\\)|\\）))?(?:\\s*(dernier|prochain)\\s*)?(?=\\W|$)","i"),l=2,d=3,u=4;t.Parser=function(){o.apply(this,arguments),this.pattern=function(){return a},this.extract=function(e,t,n,o){var a=n.index+n[1].length,e=n[0].substr(n[1].length,n[0].length-n[1].length),c=new r({index:a,text:e,ref:t}),p=n[d].toLowerCase(),f=s[p];if(void 0===f)return null;var m=null,h=n[l],g=n[u];if(h||g){var y=h||g;y=y.toLowerCase(),"dernier"==y?m="last":"prochain"==y?m="next":"ce"==y&&(m="this")}return i(c,t,f,m),c.tags.FRWeekdayParser=!0,c}}},"./node_modules/chrono-node/src/parsers/JP/JPCasualDateParser.js":function(e,t,n){var o=n("./node_modules/moment/moment.js"),r=n("./node_modules/chrono-node/src/parsers/parser.js").Parser,i=n("./node_modules/chrono-node/src/result.js").ParsedResult,s=/今日|当日|昨日|明日|今夜|今夕|今晩|今朝/i;t.Parser=function(){r.apply(this,arguments),this.pattern=function(){return s},this.extract=function(e,t,n,r){var s=n.index,e=n[0],a=new i({index:s,text:e,ref:t}),l=o(t),d=l.clone();return"今夜"==e||"今夕"==e||"今晩"==e?(a.start.imply("hour",22),a.start.imply("meridiem",1)):"明日"==e?l.hour()>4&&d.add(1,"day"):"昨日"==e?d.add(-1,"day"):e.match("今朝")&&(a.start.imply("hour",6),a.start.imply("meridiem",0)),a.start.assign("day",d.date()),a.start.assign("month",d.month()+1),a.start.assign("year",d.year()),a.tags.JPCasualDateParser=!0,a}}},"./node_modules/chrono-node/src/parsers/JP/JPStandardParser.js":function(e,t,n){var o=n("./node_modules/moment/moment.js"),r=n("./node_modules/chrono-node/src/parsers/parser.js").Parser,i=n("./node_modules/chrono-node/src/result.js").ParsedResult,s=n("./node_modules/chrono-node/src/utils/JP.js"),a=/(?:(同|((昭和|平成)?([0-9０-９]{2,4})))年\s*)?([0-9０-９]{1,2})月\s*([0-9０-９]{1,2})日/i,l=2,d=3,u=4,c=5,p=6;t.Parser=function(){r.apply(this,arguments),this.pattern=function(){return a},this.extract=function(e,t,n,r){var a=o(t),f=new i({text:n[0],index:n.index,ref:t}),m=n[c];m=s.toHankaku(m),m=parseInt(m);var h=n[p];if(h=s.toHankaku(h),h=parseInt(h),a.set("date",h),a.set("month",m-1),f.start.assign("day",a.date()),f.start.assign("month",a.month()+1),n[l])if(n[l].match("同年"))f.start.assign("year",a.year());else{var g=n[u];g=s.toHankaku(g),g=parseInt(g),"平成"==n[d]?g+=1988:"昭和"==n[d]&&(g+=1925),f.start.assign("year",g)}else{a.year(o(t).year());var y=a.clone().add(1,"y"),v=a.clone().add(-1,"y");Math.abs(y.diff(o(t)))<Math.abs(a.diff(o(t)))?a=y:Math.abs(v.diff(o(t)))<Math.abs(a.diff(o(t)))&&(a=v),f.start.assign("day",a.date()),f.start.assign("month",a.month()+1),f.start.imply("year",a.year())}return f.tags.JPStandardParser=!0,f}}},"./node_modules/chrono-node/src/parsers/ZH-Hant/ZHHantCasualDateParser.js":function(e,t,n){var o=n("./node_modules/moment/moment.js"),r=n("./node_modules/chrono-node/src/parsers/parser.js").Parser,i=n("./node_modules/chrono-node/src/result.js").ParsedResult,s=new RegExp("(而家|立(?:刻|即)|即刻)|(今|明|聽|昨|尋|琴)(早|朝|晚)|(上(?:午|晝)|朝(?:早)|早(?:上)|下(?:午|晝)|晏(?:晝)|晚(?:上)|夜(?:晚)?|中(?:午)|凌(?:晨))|(今|明|聽|昨|尋|琴)(?:日|天)(?:[\\s|,|，]*)(?:(上(?:午|晝)|朝(?:早)|早(?:上)|下(?:午|晝)|晏(?:晝)|晚(?:上)|夜(?:晚)?|中(?:午)|凌(?:晨)))?","i"),a=1,l=2,d=3,u=4,c=5,p=6;t.Parser=function(){r.apply(this,arguments),this.pattern=function(){return s},this.extract=function(e,t,n,r){e=n[0];var s=n.index,f=new i({index:s,text:e,ref:t}),m=o(t),h=m.clone();if(n[a])f.start.imply("hour",m.hour()),f.start.imply("minute",m.minute()),f.start.imply("second",m.second()),f.start.imply("millisecond",m.millisecond());else if(n[l]){var g=n[l],y=n[d];"明"==g||"聽"==g?m.hour()>1&&h.add(1,"day"):"昨"!=g&&"尋"!=g&&"琴"!=g||h.add(-1,"day"),"早"==y||"朝"==y?f.start.imply("hour",6):"晚"==y&&(f.start.imply("hour",22),f.start.imply("meridiem",1))}else if(n[u]){var v=n[u],b=v[0];"早"==b||"朝"==b||"上"==b?f.start.imply("hour",6):"下"==b||"晏"==b?(f.start.imply("hour",15),f.start.imply("meridiem",1)):"中"==b?(f.start.imply("hour",12),f.start.imply("meridiem",1)):"夜"==b||"晚"==b?(f.start.imply("hour",22),f.start.imply("meridiem",1)):"凌"==b&&f.start.imply("hour",0)}else if(n[c]){var _=n[c];"明"==_||"聽"==_?m.hour()>1&&h.add(1,"day"):"昨"!=_&&"尋"!=_&&"琴"!=_||h.add(-1,"day");var x=n[p];if(x){var C=x[0];"早"==C||"朝"==C||"上"==C?f.start.imply("hour",6):"下"==C||"晏"==C?(f.start.imply("hour",15),f.start.imply("meridiem",1)):"中"==C?(f.start.imply("hour",12),f.start.imply("meridiem",1)):"夜"==C||"晚"==C?(f.start.imply("hour",22),f.start.imply("meridiem",1)):"凌"==C&&f.start.imply("hour",0)}}return f.start.assign("day",h.date()),f.start.assign("month",h.month()+1),f.start.assign("year",h.year()),f.tags.ZHHantCasualDateParser=!0,f}}},"./node_modules/chrono-node/src/parsers/ZH-Hant/ZHHantDateParser.js":function(e,t,n){var o=n("./node_modules/moment/moment.js"),r=n("./node_modules/chrono-node/src/parsers/parser.js").Parser,i=n("./node_modules/chrono-node/src/result.js").ParsedResult,s=n("./node_modules/chrono-node/src/utils/ZH-Hant.js"),a=new RegExp("(\\d{2,4}|["+Object.keys(s.NUMBER).join("")+"]{2,4})?(?:\\s*)(?:年)?(?:[\\s|,|，]*)(\\d{1,2}|["+Object.keys(s.NUMBER).join("")+"]{1,2})(?:\\s*)(?:月)(?:\\s*)(\\d{1,2}|["+Object.keys(s.NUMBER).join("")+"]{1,2})?(?:\\s*)(?:日|號)?"),l=1,d=2,u=3;t.Parser=function(){r.apply(this,arguments),this.pattern=function(){return a},this.extract=function(e,t,n,r){var a=o(t),c=new i({text:n[0],index:n.index,ref:t}),p=parseInt(n[d]);if(isNaN(p)&&(p=s.zhStringToNumber(n[d])),c.start.assign("month",p),n[u]){var f=parseInt(n[u]);isNaN(f)&&(f=s.zhStringToNumber(n[u])),c.start.assign("day",f)}else c.start.imply("day",a.date());if(n[l]){var m=parseInt(n[l]);isNaN(m)&&(m=s.zhStringToYear(n[l])),c.start.assign("year",m)}else c.start.imply("year",a.year());return c.tags.ZHHantDateParser=!0,c}}},"./node_modules/chrono-node/src/parsers/ZH-Hant/ZHHantDeadlineFormatParser.js":function(e,t,n){var o=n("./node_modules/moment/moment.js"),r=n("./node_modules/chrono-node/src/parsers/parser.js").Parser,i=n("./node_modules/chrono-node/src/result.js").ParsedResult,s=n("./node_modules/chrono-node/src/utils/ZH-Hant.js"),a=new RegExp("(\\d+|["+Object.keys(s.NUMBER).join("")+"]+|半|幾)(?:\\s*)(?:個)?(秒(?:鐘)?|分鐘|小時|鐘|日|天|星期|禮拜|月|年)(?:(?:之|過)?後|(?:之)?內)","i"),l=1,d=2;t.Parser=function(){r.apply(this,arguments),this.pattern=function(){return a},this.extract=function(e,t,n,r){var a=n.index;e=n[0];var u=new i({index:a,text:e,ref:t}),c=parseInt(n[l]);if(isNaN(c)&&(c=s.zhStringToNumber(n[l])),isNaN(c)){var p=n[l];if("幾"===p)c=3;else{if("半"!==p)return null;c=.5}}var f=o(t),m=n[d],h=m[0];return h.match(/[日天星禮月年]/)?("日"==h||"天"==h?f.add(c,"d"):"星"==h||"禮"==h?f.add(7*c,"d"):"月"==h?f.add(c,"month"):"年"==h&&f.add(c,"year"),u.start.assign("year",f.year()),u.start.assign("month",f.month()+1),u.start.assign("day",f.date()),u):("秒"==h?f.add(c,"second"):"分"==h?f.add(c,"minute"):"小"!=h&&"鐘"!=h||f.add(c,"hour"),u.start.imply("year",f.year()),u.start.imply("month",f.month()+1),u.start.imply("day",f.date()),u.start.assign("hour",f.hour()),u.start.assign("minute",f.minute()),u.start.assign("second",f.second()),u.tags.ZHHantDeadlineFormatParser=!0,u)}}},"./node_modules/chrono-node/src/parsers/ZH-Hant/ZHHantTimeExpressionParser.js":function(e,t,n){var o=n("./node_modules/moment/moment.js"),r=n("./node_modules/chrono-node/src/parsers/parser.js").Parser,i=n("./node_modules/chrono-node/src/result.js").ParsedResult,s=n("./node_modules/chrono-node/src/result.js").ParsedComponents,a=n("./node_modules/chrono-node/src/utils/ZH-Hant.js"),l="(?:由|從|自)?(?:(今|明|聽|昨|尋|琴)(早|朝|晚)|(上(?:午|晝)|朝(?:早)|早(?:上)|下(?:午|晝)|晏(?:晝)|晚(?:上)|夜(?:晚)?|中(?:午)|凌(?:晨))|(今|明|聽|昨|尋|琴)(?:日|天)(?:[\\s,，]*)(?:(上(?:午|晝)|朝(?:早)|早(?:上)|下(?:午|晝)|晏(?:晝)|晚(?:上)|夜(?:晚)?|中(?:午)|凌(?:晨)))?)?(?:[\\s,，]*)(?:(\\d+|["+Object.keys(a.NUMBER).join("")+"]+)(?:\\s*)(?:點|時|:|：)(?:\\s*)(\\d+|半|正|整|["+Object.keys(a.NUMBER).join("")+"]+)?(?:\\s*)(?:分|:|：)?(?:\\s*)(\\d+|["+Object.keys(a.NUMBER).join("")+"]+)?(?:\\s*)(?:秒)?)(?:\\s*(A.M.|P.M.|AM?|PM?))?",d="(?:\\s*(?:到|至|\\-|\\–|\\~|\\〜)\\s*)(?:(今|明|聽|昨|尋|琴)(早|朝|晚)|(上(?:午|晝)|朝(?:早)|早(?:上)|下(?:午|晝)|晏(?:晝)|晚(?:上)|夜(?:晚)?|中(?:午)|凌(?:晨))|(今|明|聽|昨|尋|琴)(?:日|天)(?:[\\s,，]*)(?:(上(?:午|晝)|朝(?:早)|早(?:上)|下(?:午|晝)|晏(?:晝)|晚(?:上)|夜(?:晚)?|中(?:午)|凌(?:晨)))?)?(?:[\\s,，]*)(?:(\\d+|["+Object.keys(a.NUMBER).join("")+"]+)(?:\\s*)(?:點|時|:|：)(?:\\s*)(\\d+|半|正|整|["+Object.keys(a.NUMBER).join("")+"]+)?(?:\\s*)(?:分|:|：)?(?:\\s*)(\\d+|["+Object.keys(a.NUMBER).join("")+"]+)?(?:\\s*)(?:秒)?)(?:\\s*(A.M.|P.M.|AM?|PM?))?",u=new RegExp(l,"i"),c=new RegExp(d,"i"),p=1,f=2,m=3,h=4,g=5,y=6,v=7,b=8,_=9;t.Parser=function(){r.apply(this,arguments),this.pattern=function(){return u},this.extract=function(e,t,n,r){if(n.index>0&&e[n.index-1].match(/\w/))return null;var l=o(t),d=new i;d.ref=t,d.index=n.index,d.text=n[0],d.tags.ZHTimeExpressionParser=!0;var u=l.clone();if(n[p]){var x=n[p];"明"==x||"聽"==x?l.hour()>1&&u.add(1,"day"):"昨"!=x&&"尋"!=x&&"琴"!=x||u.add(-1,"day"),d.start.assign("day",u.date()),d.start.assign("month",u.month()+1),d.start.assign("year",u.year())}else if(n[h]){var C=n[h];"明"==C||"聽"==C?u.add(1,"day"):"昨"!=C&&"尋"!=C&&"琴"!=C||u.add(-1,"day"),d.start.assign("day",u.date()),d.start.assign("month",u.month()+1),d.start.assign("year",u.year())}else d.start.imply("day",u.date()),d.start.imply("month",u.month()+1),d.start.imply("year",u.year());var E=0,w=0,j=-1;if(n[b]){var S=parseInt(n[b]);if(isNaN(S)&&(S=a.zhStringToNumber(n[b])),S>=60)return null;d.start.assign("second",S)}if(E=parseInt(n[y]),isNaN(E)&&(E=a.zhStringToNumber(n[y])),n[v]?"半"==n[v]?w=30:"正"==n[v]||"整"==n[v]?w=0:(w=parseInt(n[v]),isNaN(w)&&(w=a.zhStringToNumber(n[v]))):E>100&&(w=E%100,E=parseInt(E/100)),w>=60)return null;if(E>24)return null;if(E>=12&&(j=1),n[_]){if(E>12)return null;var T=n[_][0].toLowerCase();"a"==T&&(j=0,12==E&&(E=0)),"p"==T&&(j=1,12!=E&&(E+=12))}else if(n[f]){var P=n[f],k=P[0];"朝"==k||"早"==k?(j=0,12==E&&(E=0)):"晚"==k&&(j=1,12!=E&&(E+=12))}else if(n[m]){var I=n[m],N=I[0];"上"==N||"朝"==N||"早"==N||"凌"==N?(j=0,12==E&&(E=0)):"下"!=N&&"晏"!=N&&"晚"!=N||(j=1,12!=E&&(E+=12))}else if(n[g]){var R=n[g],D=R[0];"上"==D||"朝"==D||"早"==D||"凌"==D?(j=0,12==E&&(E=0)):"下"!=D&&"晏"!=D&&"晚"!=D||(j=1,12!=E&&(E+=12))}if(d.start.assign("hour",E),d.start.assign("minute",w),j>=0?d.start.assign("meridiem",j):E<12?d.start.imply("meridiem",0):d.start.imply("meridiem",1),n=c.exec(e.substring(d.index+d.text.length)),!n)return d.text.match(/^\d+$/)?null:d;var M=u.clone();if(d.end=new s(null,null),n[p]){var x=n[p];"明"==x||"聽"==x?l.hour()>1&&M.add(1,"day"):"昨"!=x&&"尋"!=x&&"琴"!=x||M.add(-1,"day"),d.end.assign("day",M.date()),d.end.assign("month",M.month()+1),d.end.assign("year",M.year())}else if(n[h]){var C=n[h];"明"==C||"聽"==C?M.add(1,"day"):"昨"!=C&&"尋"!=C&&"琴"!=C||M.add(-1,"day"),d.end.assign("day",M.date()),d.end.assign("month",M.month()+1),d.end.assign("year",M.year())}else d.end.imply("day",M.date()),d.end.imply("month",M.month()+1),d.end.imply("year",M.year());if(E=0,w=0,j=-1,n[b]){var S=parseInt(n[b]);if(isNaN(S)&&(S=a.zhStringToNumber(n[b])),S>=60)return null;d.end.assign("second",S)}if(E=parseInt(n[y]),isNaN(E)&&(E=a.zhStringToNumber(n[y])),n[v]?"半"==n[v]?w=30:"正"==n[v]||"整"==n[v]?w=0:(w=parseInt(n[v]),isNaN(w)&&(w=a.zhStringToNumber(n[v]))):E>100&&(w=E%100,E=parseInt(E/100)),w>=60)return null;if(E>24)return null;if(E>=12&&(j=1),n[_]){if(E>12)return null;var T=n[_][0].toLowerCase();"a"==T&&(j=0,12==E&&(E=0)),"p"==T&&(j=1,12!=E&&(E+=12)),d.start.isCertain("meridiem")||(0==j?(d.start.imply("meridiem",0),12==d.start.get("hour")&&d.start.assign("hour",0)):(d.start.imply("meridiem",1),12!=d.start.get("hour")&&d.start.assign("hour",d.start.get("hour")+12)))}else if(n[f]){var P=n[f],k=P[0];"朝"==k||"早"==k?(j=0,12==E&&(E=0)):"晚"==k&&(j=1,12!=E&&(E+=12))}else if(n[m]){var I=n[m],N=I[0];"上"==N||"朝"==N||"早"==N||"凌"==N?(j=0,12==E&&(E=0)):"下"!=N&&"晏"!=N&&"晚"!=N||(j=1,12!=E&&(E+=12))}else if(n[g]){var R=n[g],D=R[0];"上"==D||"朝"==D||"早"==D||"凌"==D?(j=0,12==E&&(E=0)):"下"!=D&&"晏"!=D&&"晚"!=D||(j=1,12!=E&&(E+=12))}if(d.text=d.text+n[0],d.end.assign("hour",E),d.end.assign("minute",w),j>=0)d.end.assign("meridiem",j);else{var O=d.start.isCertain("meridiem")&&1==d.start.get("meridiem");O&&d.start.get("hour")>E?d.end.imply("meridiem",0):E>12&&d.end.imply("meridiem",1)}return d.end.date().getTime()<d.start.date().getTime()&&d.end.imply("day",d.end.get("day")+1),d}}},"./node_modules/chrono-node/src/parsers/ZH-Hant/ZHHantWeekdayParser.js":function(e,t,n){var o=(n("./node_modules/moment/moment.js"),n("./node_modules/chrono-node/src/parsers/parser.js").Parser),r=n("./node_modules/chrono-node/src/result.js").ParsedResult,i=n("./node_modules/chrono-node/src/parsers/EN/ENWeekdayParser.js").updateParsedComponent,s=n("./node_modules/chrono-node/src/utils/ZH-Hant.js"),a=new RegExp("(上|今|下|這|呢)?(?:個)?(?:星期|禮拜)("+Object.keys(s.WEEKDAY_OFFSET).join("|")+")"),l=1,d=2;t.Parser=function(){o.apply(this,arguments),this.pattern=function(){return a},this.extract=function(e,t,n,o){var a=n.index;e=n[0];var u=new r({index:a,text:e,ref:t}),c=n[d],p=s.WEEKDAY_OFFSET[c];if(void 0===p)return null;var f=null,m=n[l];return"上"==m?f="last":"下"==m?f="next":"今"!=m&&"這"!=m&&"呢"!=m||(f="this"),i(u,t,p,f),u.tags.ZHHantWeekdayParser=!0,u}}},"./node_modules/chrono-node/src/parsers/parser.js":function(e,t,n){function o(e){this.isStrictMode=function(){return 1==e},this.pattern=function(){return/./i},this.extract=function(e,t,n,o){return null},this.execute=function(e,t,n){for(var o=[],r=this.pattern(),i=e,s=r.exec(i);s;){s.index+=e.length-i.length;var a=this.extract(e,t,s,n);a?(i=e.substring(a.index+a.text.length),this.isStrictMode()&&!a.hasPossibleDates()||o.push(a)):i=e.substring(s.index+1),s=r.exec(i)}return this.refiners&&this.refiners.forEach(function(){o=refiner.refine(o,e,options)}),o}}t.Parser=o,t.ENISOFormatParser=n("./node_modules/chrono-node/src/parsers/EN/ENISOFormatParser.js").Parser,t.ENDeadlineFormatParser=n("./node_modules/chrono-node/src/parsers/EN/ENDeadlineFormatParser.js").Parser,t.ENRelativeDateFormatParser=n("./node_modules/chrono-node/src/parsers/EN/ENRelativeDateFormatParser.js").Parser,t.ENMonthNameLittleEndianParser=n("./node_modules/chrono-node/src/parsers/EN/ENMonthNameLittleEndianParser.js").Parser,t.ENMonthNameMiddleEndianParser=n("./node_modules/chrono-node/src/parsers/EN/ENMonthNameMiddleEndianParser.js").Parser,t.ENMonthNameParser=n("./node_modules/chrono-node/src/parsers/EN/ENMonthNameParser.js").Parser,t.ENSlashDateFormatParser=n("./node_modules/chrono-node/src/parsers/EN/ENSlashDateFormatParser.js").Parser,t.ENSlashDateFormatStartWithYearParser=n("./node_modules/chrono-node/src/parsers/EN/ENSlashDateFormatStartWithYearParser.js").Parser,t.ENSlashMonthFormatParser=n("./node_modules/chrono-node/src/parsers/EN/ENSlashMonthFormatParser.js").Parser,t.ENTimeAgoFormatParser=n("./node_modules/chrono-node/src/parsers/EN/ENTimeAgoFormatParser.js").Parser,t.ENTimeExpressionParser=n("./node_modules/chrono-node/src/parsers/EN/ENTimeExpressionParser.js").Parser,t.ENWeekdayParser=n("./node_modules/chrono-node/src/parsers/EN/ENWeekdayParser.js").Parser,t.ENCasualDateParser=n("./node_modules/chrono-node/src/parsers/EN/ENCasualDateParser.js").Parser,t.ENCasualTimeParser=n("./node_modules/chrono-node/src/parsers/EN/ENCasualTimeParser.js").Parser,t.JPStandardParser=n("./node_modules/chrono-node/src/parsers/JP/JPStandardParser.js").Parser,t.JPCasualDateParser=n("./node_modules/chrono-node/src/parsers/JP/JPCasualDateParser.js").Parser,t.ESCasualDateParser=n("./node_modules/chrono-node/src/parsers/ES/ESCasualDateParser.js").Parser,t.ESDeadlineFormatParser=n("./node_modules/chrono-node/src/parsers/ES/ESDeadlineFormatParser.js").Parser,t.ESTimeAgoFormatParser=n("./node_modules/chrono-node/src/parsers/ES/ESTimeAgoFormatParser.js").Parser,t.ESTimeExpressionParser=n("./node_modules/chrono-node/src/parsers/ES/ESTimeExpressionParser.js").Parser,t.ESWeekdayParser=n("./node_modules/chrono-node/src/parsers/ES/ESWeekdayParser.js").Parser,t.ESMonthNameLittleEndianParser=n("./node_modules/chrono-node/src/parsers/ES/ESMonthNameLittleEndianParser.js").Parser,t.ESSlashDateFormatParser=n("./node_modules/chrono-node/src/parsers/ES/ESSlashDateFormatParser.js").Parser,t.FRCasualDateParser=n("./node_modules/chrono-node/src/parsers/FR/FRCasualDateParser.js").Parser,t.FRDeadlineFormatParser=n("./node_modules/chrono-node/src/parsers/FR/FRDeadlineFormatParser.js").Parser,t.FRMonthNameLittleEndianParser=n("./node_modules/chrono-node/src/parsers/FR/FRMonthNameLittleEndianParser.js").Parser,t.FRSlashDateFormatParser=n("./node_modules/chrono-node/src/parsers/FR/FRSlashDateFormatParser.js").Parser,t.FRTimeAgoFormatParser=n("./node_modules/chrono-node/src/parsers/FR/FRTimeAgoFormatParser.js").Parser,t.FRTimeExpressionParser=n("./node_modules/chrono-node/src/parsers/FR/FRTimeExpressionParser.js").Parser,t.FRWeekdayParser=n("./node_modules/chrono-node/src/parsers/FR/FRWeekdayParser.js").Parser,t.ZHHantDateParser=n("./node_modules/chrono-node/src/parsers/ZH-Hant/ZHHantDateParser.js").Parser,t.ZHHantWeekdayParser=n("./node_modules/chrono-node/src/parsers/ZH-Hant/ZHHantWeekdayParser.js").Parser,t.ZHHantTimeExpressionParser=n("./node_modules/chrono-node/src/parsers/ZH-Hant/ZHHantTimeExpressionParser.js").Parser,t.ZHHantCasualDateParser=n("./node_modules/chrono-node/src/parsers/ZH-Hant/ZHHantCasualDateParser.js").Parser,t.ZHHantDeadlineFormatParser=n("./node_modules/chrono-node/src/parsers/ZH-Hant/ZHHantDeadlineFormatParser.js").Parser,t.DEDeadlineFormatParser=n("./node_modules/chrono-node/src/parsers/DE/DEDeadlineFormatParser.js").Parser,t.DEMonthNameLittleEndianParser=n("./node_modules/chrono-node/src/parsers/DE/DEMonthNameLittleEndianParser.js").Parser,t.DEMonthNameParser=n("./node_modules/chrono-node/src/parsers/DE/DEMonthNameParser.js").Parser,t.DESlashDateFormatParser=n("./node_modules/chrono-node/src/parsers/DE/DESlashDateFormatParser.js").Parser,t.DETimeAgoFormatParser=n("./node_modules/chrono-node/src/parsers/DE/DETimeAgoFormatParser.js").Parser,t.DETimeExpressionParser=n("./node_modules/chrono-node/src/parsers/DE/DETimeExpressionParser.js").Parser,t.DEWeekdayParser=n("./node_modules/chrono-node/src/parsers/DE/DEWeekdayParser.js").Parser,t.DECasualDateParser=n("./node_modules/chrono-node/src/parsers/DE/DECasualDateParser.js").Parser},"./node_modules/chrono-node/src/refiners/DE/DEMergeDateRangeRefiner.js":function(e,t,n){var o=n("./node_modules/chrono-node/src/refiners/EN/ENMergeDateRangeRefiner.js").Refiner;t.Refiner=function(){o.call(this),this.pattern=function(){return/^\s*(bis(?:\s*(?:am|zum))?|\-)\s*$/i}}},"./node_modules/chrono-node/src/refiners/DE/DEMergeDateTimeRefiner.js":function(e,t,n){function o(e){return!e.start.isCertain("hour")}function r(e){return!e.start.isCertain("month")&&!e.start.isCertain("weekday")}function i(e,t,n){var o=e.substring(t.index+t.text.length,n.index);return o.match(l)}function s(e,t,n){var o=t.start,r=n.start,i=o.clone();if(i.assign("hour",r.get("hour")),i.assign("minute",r.get("minute")),i.assign("second",r.get("second")),r.isCertain("meridiem")?i.assign("meridiem",r.get("meridiem")):void 0!==r.get("meridiem")&&void 0===i.get("meridiem")&&i.imply("meridiem",r.get("meridiem")),1==i.get("meridiem")&&i.get("hour")<12&&i.assign("hour",i.get("hour")+12),null!=t.end||null!=n.end){var s=null==t.end?t.start:t.end,a=null==n.end?n.start:n.end,l=s.clone();l.assign("hour",a.get("hour")),l.assign("minute",a.get("minute")),l.assign("second",a.get("second")),a.isCertain("meridiem")?l.assign("meridiem",a.get("meridiem")):null!=r.get("meridiem")&&l.imply("meridiem",a.get("meridiem")),null==t.end&&l.date().getTime()<i.date().getTime()&&(l.isCertain("day")?l.assign("day",l.get("day")+1):l.imply("day",l.get("day")+1)),t.end=l}t.start=i;var d=Math.min(t.index,n.index),u=Math.max(t.index+t.text.length,n.index+n.text.length);t.index=d,t.text=e.substring(d,u);for(var c in n.tags)t.tags[c]=!0;return t.tags.DEMergeDateAndTimeRefiner=!0,t}var a=(n("./node_modules/chrono-node/src/result.js").ParsedComponents,n("./node_modules/chrono-node/src/refiners/refiner.js").Refiner),l=new RegExp("^\\s*(T|um|am|,|-)?\\s*$");t.Refiner=function(){a.call(this),this.refine=function(e,t,n){if(t.length<2)return t;for(var a=[],l=null,d=null,u=1;u<t.length;u++)l=t[u],d=t[u-1],o(d)&&r(l)&&i(e,d,l)?(d=s(e,d,l),l=null,u+=1):o(l)&&r(d)&&i(e,d,l)&&(d=s(e,l,d),l=null,u+=1),a.push(d);return null!=l&&a.push(l),a}}},"./node_modules/chrono-node/src/refiners/EN/ENMergeDateRangeRefiner.js":function(e,t,n){var o=n("./node_modules/chrono-node/src/refiners/refiner.js").Refiner;t.Refiner=function(){o.call(this),this.pattern=function(){return/^\s*(to|\-)\s*$/i},this.refine=function(e,t,n){if(t.length<2)return t;for(var o=[],r=null,i=null,s=1;s<t.length;s++)r=t[s],i=t[s-1],i.end||r.end||!this.isAbleToMerge(e,i,r)||(i=this.mergeResult(e,i,r),r=null,s+=1),o.push(i);return null!=r&&o.push(r),o},this.isAbleToMerge=function(e,t,n){var o=t.index+t.text.length,r=n.index,i=e.substring(o,r);return i.match(this.pattern())},this.isWeekdayResult=function(e){return e.start.isCertain("weekday")&&!e.start.isCertain("day")},this.mergeResult=function(e,t,n){if(!this.isWeekdayResult(t)&&!this.isWeekdayResult(n)){for(var o in n.start.knownValues)t.start.isCertain(o)||t.start.assign(o,n.start.get(o));for(var o in t.start.knownValues)n.start.isCertain(o)||n.start.assign(o,t.start.get(o))}if(t.start.date().getTime()>n.start.date().getTime()){var r=n;n=t,t=r}t.end=n.start;for(var i in n.tags)t.tags[i]=!0;var s=Math.min(t.index,n.index),a=Math.max(t.index+t.text.length,n.index+n.text.length);return t.index=s,t.text=e.substring(s,a),t.tags[this.constructor.name]=!0,t}}},"./node_modules/chrono-node/src/refiners/EN/ENMergeDateTimeRefiner.js":function(e,t,n){function o(e){return!e.start.isCertain("hour")}function r(e){return!e.start.isCertain("month")&&!e.start.isCertain("weekday")}function i(e,t,n){var o=e.substring(t.index+t.text.length,n.index);return o.match(l)}function s(e,t,n){var o=t.start,r=n.start,i=o.clone();if(i.assign("hour",r.get("hour")),i.assign("minute",r.get("minute")),i.assign("second",r.get("second")),r.isCertain("meridiem")?i.assign("meridiem",r.get("meridiem")):void 0!==r.get("meridiem")&&void 0===i.get("meridiem")&&i.imply("meridiem",r.get("meridiem")),1==i.get("meridiem")&&i.get("hour")<12&&i.assign("hour",i.get("hour")+12),null!=t.end||null!=n.end){var s=null==t.end?t.start:t.end,a=null==n.end?n.start:n.end,l=s.clone();l.assign("hour",a.get("hour")),l.assign("minute",a.get("minute")),l.assign("second",a.get("second")),a.isCertain("meridiem")?l.assign("meridiem",a.get("meridiem")):null!=r.get("meridiem")&&l.imply("meridiem",a.get("meridiem")),null==t.end&&l.date().getTime()<i.date().getTime()&&(l.isCertain("day")?l.assign("day",l.get("day")+1):l.imply("day",l.get("day")+1)),
t.end=l}t.start=i;var d=Math.min(t.index,n.index),u=Math.max(t.index+t.text.length,n.index+n.text.length);t.index=d,t.text=e.substring(d,u);for(var c in n.tags)t.tags[c]=!0;return t.tags.ENMergeDateAndTimeRefiner=!0,t}var a=(n("./node_modules/chrono-node/src/result.js").ParsedComponents,n("./node_modules/chrono-node/src/refiners/refiner.js").Refiner),l=new RegExp("^\\s*(T|at|after|before|on|of|,|-)?\\s*$");t.Refiner=function(){a.call(this),this.refine=function(e,t,n){if(t.length<2)return t;for(var a=[],l=null,d=null,u=1;u<t.length;u++)l=t[u],d=t[u-1],o(d)&&r(l)&&i(e,d,l)?(d=s(e,d,l),l=null,u+=1):o(l)&&r(d)&&i(e,d,l)&&(d=s(e,l,d),l=null,u+=1),a.push(d);return null!=l&&a.push(l),a}}},"./node_modules/chrono-node/src/refiners/EN/ENPrioritizeSpecificDateRefiner.js":function(e,t,n){function o(e,t){var n=!1;return e.start.isCertain("year")&&(t.start.isCertain("year")?e.start.isCertain("month")&&(t.start.isCertain("month")?e.start.isCertain("day")&&!t.start.isCertain("day")&&(n=!0):n=!0):n=!0),n}function r(e,t,n){var o=e.substring(t.index+t.text.length,n.index),r=t.tags.ENRelativeDateFormatParser||n.tags.ENRelativeDateFormatParser,i=!t.start.isCertain("day")&&!t.start.isCertain("month")&&!t.start.isCertain("year");return t.start.isCertain("year")&&n.start.isCertain("year")&&(i=t.start.get("year")===n.start.get("year")),t.start.isCertain("month")&&n.start.isCertain("month")&&(i=t.start.get("month")===n.start.get("month")&&i),r&&o.match(a)&&i}function i(e,t,n){var o=(t.start,n.start,Math.min(t.index,n.index)),r=Math.max(t.index+t.text.length,n.index+n.text.length);t.index=o,t.text=e.substring(o,r);for(var i in n.tags)t.tags[i]=!0;return t.tags.ENPrioritizeSpecificDateRefiner=!0,t}var s=(n("./node_modules/chrono-node/src/result.js").ParsedComponents,n("./node_modules/chrono-node/src/refiners/refiner.js").Refiner),a=new RegExp("^\\s*(at|after|before|on|,|-|\\(|\\))?\\s*$");t.Refiner=function(){s.call(this),this.refine=function(e,t,n){if(t.length<2)return t;for(var s=[],a=null,l=null,d=1;d<t.length;d++)a=t[d],l=t[d-1],o(l,a)&&r(e,l,a)?(l=i(e,l,a),a=null,d+=1):o(a,l)&&r(e,l,a)&&(l=i(e,a,l),a=null,d+=1),s.push(l);return null!=a&&s.push(a),s}}},"./node_modules/chrono-node/src/refiners/ExtractTimezoneAbbrRefiner.js":function(e,t,n){var o=n("./node_modules/chrono-node/src/refiners/refiner.js").Refiner,r={},i=new RegExp("^\\s*\\(?([A-Z]{2,4})\\)?(?=\\W|$)","i");t.Refiner=function(){o.call(this),this.refine=function(e,t,n){return t.forEach(function(t){if(t.tags.ENTimeExpressionParser||t.tags.ZHTimeExpressionParser||t.tags.FRTimeExpressionParser||t.tags.DETimeExpressionParser){var n=i.exec(e.substring(t.index+t.text.length));if(n){var o=n[1].toUpperCase();if(void 0===r[o])return;var s=r[o];t.start.isCertain("timezoneOffset")||t.start.assign("timezoneOffset",s),null==t.end||t.end.isCertain("timezoneOffset")||t.end.assign("timezoneOffset",s),t.text+=n[0],t.tags.ExtractTimezoneAbbrRefiner=!0}}}),t}},r={ACDT:630,ACST:570,ADT:-180,AEDT:660,AEST:600,AFT:270,AKDT:-480,AKST:-540,ALMT:360,AMST:-180,AMT:-240,ANAST:720,ANAT:720,AQTT:300,ART:-180,AST:-240,AWDT:540,AWST:480,AZOST:0,AZOT:-60,AZST:300,AZT:240,BNT:480,BOT:-240,BRST:-120,BRT:-180,BST:60,BTT:360,CAST:480,CAT:120,CCT:390,CDT:-300,CEST:120,CET:60,CHADT:825,CHAST:765,CKT:-600,CLST:-180,CLT:-240,COT:-300,CST:-360,CVT:-60,CXT:420,ChST:600,DAVT:420,EASST:-300,EAST:-360,EAT:180,ECT:-300,EDT:-240,EEST:180,EET:120,EGST:0,EGT:-60,EST:-300,ET:-300,FJST:780,FJT:720,FKST:-180,FKT:-240,FNT:-120,GALT:-360,GAMT:-540,GET:240,GFT:-180,GILT:720,GMT:0,GST:240,GYT:-240,HAA:-180,HAC:-300,HADT:-540,HAE:-240,HAP:-420,HAR:-360,HAST:-600,HAT:-90,HAY:-480,HKT:480,HLV:-210,HNA:-240,HNC:-360,HNE:-300,HNP:-480,HNR:-420,HNT:-150,HNY:-540,HOVT:420,ICT:420,IDT:180,IOT:360,IRDT:270,IRKST:540,IRKT:540,IRST:210,IST:60,JST:540,KGT:360,KRAST:480,KRAT:480,KST:540,KUYT:240,LHDT:660,LHST:630,LINT:840,MAGST:720,MAGT:720,MART:-510,MAWT:300,MDT:-360,MESZ:120,MEZ:60,MHT:720,MMT:390,MSD:240,MSK:240,MST:-420,MUT:240,MVT:300,MYT:480,NCT:660,NDT:-90,NFT:690,NOVST:420,NOVT:360,NPT:345,NST:-150,NUT:-660,NZDT:780,NZST:720,OMSST:420,OMST:420,PDT:-420,PET:-300,PETST:720,PETT:720,PGT:600,PHOT:780,PHT:480,PKT:300,PMDT:-120,PMST:-180,PONT:660,PST:-480,PT:-480,PWT:540,PYST:-180,PYT:-240,RET:240,SAMT:240,SAST:120,SBT:660,SCT:240,SGT:480,SRT:-180,SST:-660,TAHT:-600,TFT:300,TJT:300,TKT:780,TLT:540,TMT:300,TVT:720,ULAT:480,UTC:0,UYST:-120,UYT:-180,UZT:300,VET:-210,VLAST:660,VLAT:660,VUT:660,WAST:120,WAT:60,WEST:60,WESZ:60,WET:0,WEZ:0,WFT:720,WGST:-120,WGT:-180,WIB:420,WIT:540,WITA:480,WST:780,WT:0,YAKST:600,YAKT:600,YAPT:600,YEKST:360,YEKT:360}},"./node_modules/chrono-node/src/refiners/ExtractTimezoneOffsetRefiner.js":function(e,t,n){var o=n("./node_modules/chrono-node/src/refiners/refiner.js").Refiner,r=new RegExp("^\\s*(GMT|UTC)?(\\+|\\-)(\\d{1,2}):?(\\d{2})","i"),i=2,s=3,a=4;t.Refiner=function(){o.call(this),this.refine=function(e,t,n){return t.forEach(function(t){if(!t.start.isCertain("timezoneOffset")){var n=r.exec(e.substring(t.index+t.text.length));if(n){var o=parseInt(n[s]),l=parseInt(n[a]),d=60*o+l;"-"===n[i]&&(d=-d),null!=t.end&&t.end.assign("timezoneOffset",d),t.start.assign("timezoneOffset",d),t.text+=n[0],t.tags.ExtractTimezoneOffsetRefiner=!0}}}),t}}},"./node_modules/chrono-node/src/refiners/FR/FRMergeDateRangeRefiner.js":function(e,t,n){var o=n("./node_modules/chrono-node/src/refiners/refiner.js").Refiner;t.Refiner=function(){o.call(this),this.pattern=function(){return/^\s*(à|a|\-)\s*$/i},this.refine=function(e,t,n){if(t.length<2)return t;for(var o=[],r=null,i=null,s=1;s<t.length;s++)r=t[s],i=t[s-1],i.end||r.end||!this.isAbleToMerge(e,i,r)||(i=this.mergeResult(e,i,r),r=null,s+=1),o.push(i);return null!=r&&o.push(r),o},this.isAbleToMerge=function(e,t,n){var o=t.index+t.text.length,r=n.index,i=e.substring(o,r);return i.match(this.pattern())},this.isWeekdayResult=function(e){return e.start.isCertain("weekday")&&!e.start.isCertain("day")},this.mergeResult=function(e,t,n){if(!this.isWeekdayResult(t)&&!this.isWeekdayResult(n)){for(var o in n.start.knownValues)t.start.isCertain(o)||t.start.assign(o,n.start.get(o));for(var o in t.start.knownValues)n.start.isCertain(o)||n.start.assign(o,t.start.get(o))}if(t.start.date().getTime()>n.start.date()){var r=n;n=t,t=r}t.end=n.start;for(var i in n.tags)t.tags[i]=!0;var s=Math.min(t.index,n.index),a=Math.max(t.index+t.text.length,n.index+n.text.length);return t.index=s,t.text=e.substring(s,a),t.tags[this.constructor.name]=!0,t}}},"./node_modules/chrono-node/src/refiners/FR/FRMergeDateTimeRefiner.js":function(e,t,n){function o(e){return!e.start.isCertain("hour")||e.tags.FRCasualDateParser}function r(e){return!e.start.isCertain("month")&&!e.start.isCertain("weekday")}function i(e,t,n){var o=e.substring(t.index+t.text.length,n.index);return o.match(l)}function s(e,t,n){var o=t.start,r=n.start,i=o.clone();if(i.assign("hour",r.get("hour")),i.assign("minute",r.get("minute")),i.assign("second",r.get("second")),r.isCertain("meridiem")?i.assign("meridiem",r.get("meridiem")):void 0!==r.get("meridiem")&&void 0===i.get("meridiem")&&i.imply("meridiem",r.get("meridiem")),1==i.get("meridiem")&&i.get("hour")<12&&i.assign("hour",i.get("hour")+12),null!=t.end||null!=n.end){var s=null==t.end?t.start:t.end,a=null==n.end?n.start:n.end,l=s.clone();l.assign("hour",a.get("hour")),l.assign("minute",a.get("minute")),l.assign("second",a.get("second")),a.isCertain("meridiem")?l.assign("meridiem",a.get("meridiem")):null!=r.get("meridiem")&&l.imply("meridiem",a.get("meridiem")),null==t.end&&l.date().getTime()<i.date().getTime()&&(l.isCertain("day")?l.assign("day",l.get("day")+1):l.imply("day",l.get("day")+1)),t.end=l}t.start=i;var d=Math.min(t.index,n.index),u=Math.max(t.index+t.text.length,n.index+n.text.length);t.index=d,t.text=e.substring(d,u);for(var c in n.tags)t.tags[c]=!0;return t.tags.FRMergeDateAndTimeRefiner=!0,t}var a=(n("./node_modules/chrono-node/src/result.js").ParsedComponents,n("./node_modules/chrono-node/src/refiners/refiner.js").Refiner),l=new RegExp("^\\s*(T|à|a|vers|de|,|-)?\\s*$");t.Refiner=function(){a.call(this),this.refine=function(e,t,n){if(t.length<2)return t;for(var a=[],l=null,d=null,u=1;u<t.length;u++)l=t[u],d=t[u-1],o(d)&&r(l)&&i(e,d,l)?(d=s(e,d,l),l=null,u+=1):o(l)&&r(d)&&i(e,d,l)&&(d=s(e,l,d),l=null,u+=1),a.push(d);return null!=l&&a.push(l),a}}},"./node_modules/chrono-node/src/refiners/ForwardDateRefiner.js":function(e,t,n){var o=n("./node_modules/moment/moment.js"),r=n("./node_modules/chrono-node/src/refiners/refiner.js").Refiner;t.Refiner=function(){r.call(this),this.refine=function(e,t,n){return n.forwardDate||n.forwardDatesOnly?(t.forEach(function(e){var t=o(e.ref);if(e.start.isCertain("day")&&e.start.isCertain("month")&&!e.start.isCertain("year")&&t.isAfter(e.start.moment())){for(var n=0;n<3&&t.isAfter(e.start.moment());n++)e.start.imply("year",e.start.get("year")+1),e.end&&!e.end.isCertain("year")&&e.end.imply("year",e.end.get("year")+1);e.tags.ExtractTimezoneOffsetRefiner=!0}e.start.isCertain("day")||e.start.isCertain("month")||e.start.isCertain("year")||!e.start.isCertain("weekday")||!t.isAfter(e.start.moment())||(t.day()>e.start.get("weekday")?t.day(e.start.get("weekday")+7):t.day(e.start.get("weekday")),e.start.imply("day",t.date()),e.start.imply("month",t.month()+1),e.start.imply("year",t.year()),e.tags.ExtractTimezoneOffsetRefiner=!0)}),t):t}}},"./node_modules/chrono-node/src/refiners/JP/JPMergeDateRangeRefiner.js":function(e,t,n){var o=n("./node_modules/chrono-node/src/refiners/EN/ENMergeDateRangeRefiner.js").Refiner;t.Refiner=function(){o.call(this),this.pattern=function(){return/^\s*(から|ー)\s*$/i}}},"./node_modules/chrono-node/src/refiners/OverlapRemovalRefiner.js":function(e,t,n){var o=n("./node_modules/chrono-node/src/refiners/refiner.js").Refiner;t.Refiner=function(){o.call(this),this.refine=function(e,t,n){if(t.length<2)return t;for(var o=[],r=t[0],i=1;i<t.length;i++){var s=t[i];s.index<r.index+r.text.length?s.text.length>r.text.length&&(r=s):(o.push(r),r=s)}return null!=r&&o.push(r),o}}},"./node_modules/chrono-node/src/refiners/UnlikelyFormatFilter.js":function(e,t,n){var o=n("./node_modules/chrono-node/src/refiners/refiner.js").Filter;t.Refiner=function(){o.call(this),this.isValid=function(e,t,n){return!t.text.replace(" ","").match(/^\d*(\.\d*)?$/)}}},"./node_modules/chrono-node/src/refiners/refiner.js":function(e,t,n){t.Refiner=function(){this.refine=function(e,t,n){return t}},t.Filter=function(){t.Refiner.call(this),this.isValid=function(e,t,n){return!0},this.refine=function(e,t,n){for(var o=[],r=0;r<t.length;r++){var i=t[r];this.isValid(e,i,n)&&o.push(i)}return o}},t.OverlapRemovalRefiner=n("./node_modules/chrono-node/src/refiners/OverlapRemovalRefiner.js").Refiner,t.ExtractTimezoneOffsetRefiner=n("./node_modules/chrono-node/src/refiners/ExtractTimezoneOffsetRefiner.js").Refiner,t.ExtractTimezoneAbbrRefiner=n("./node_modules/chrono-node/src/refiners/ExtractTimezoneAbbrRefiner.js").Refiner,t.ForwardDateRefiner=n("./node_modules/chrono-node/src/refiners/ForwardDateRefiner.js").Refiner,t.UnlikelyFormatFilter=n("./node_modules/chrono-node/src/refiners/UnlikelyFormatFilter.js").Refiner,t.ENMergeDateTimeRefiner=n("./node_modules/chrono-node/src/refiners/EN/ENMergeDateTimeRefiner.js").Refiner,t.ENMergeDateRangeRefiner=n("./node_modules/chrono-node/src/refiners/EN/ENMergeDateRangeRefiner.js").Refiner,t.ENPrioritizeSpecificDateRefiner=n("./node_modules/chrono-node/src/refiners/EN/ENPrioritizeSpecificDateRefiner.js").Refiner,t.JPMergeDateRangeRefiner=n("./node_modules/chrono-node/src/refiners/JP/JPMergeDateRangeRefiner.js").Refiner,t.FRMergeDateRangeRefiner=n("./node_modules/chrono-node/src/refiners/FR/FRMergeDateRangeRefiner.js").Refiner,t.FRMergeDateTimeRefiner=n("./node_modules/chrono-node/src/refiners/FR/FRMergeDateTimeRefiner.js").Refiner,t.DEMergeDateRangeRefiner=n("./node_modules/chrono-node/src/refiners/DE/DEMergeDateRangeRefiner.js").Refiner,t.DEMergeDateTimeRefiner=n("./node_modules/chrono-node/src/refiners/DE/DEMergeDateTimeRefiner.js").Refiner},"./node_modules/chrono-node/src/result.js":function(e,t,n){function o(e){e=e||{},this.ref=e.ref,this.index=e.index,this.text=e.text,this.tags=e.tags||{},this.start=new r(e.start,e.ref),e.end&&(this.end=new r(e.end,e.ref))}function r(e,t){if(this.knownValues={},this.impliedValues={},e)for(key in e)this.knownValues[key]=e[key];t&&(t=i(t),this.imply("day",t.date()),this.imply("month",t.month()+1),this.imply("year",t.year())),this.imply("hour",12),this.imply("minute",0),this.imply("second",0),this.imply("millisecond",0)}var i=n("./node_modules/moment/moment.js");o.prototype.clone=function(){var e=new o(this);e.tags=JSON.parse(JSON.stringify(this.tags)),e.start=this.start.clone(),this.end&&(e.end=this.end.clone())},o.prototype.hasPossibleDates=function(){return this.start.isPossibleDate()&&(!this.end||this.end.isPossibleDate())},r.prototype.clone=function(){var e=new r;return e.knownValues=JSON.parse(JSON.stringify(this.knownValues)),e.impliedValues=JSON.parse(JSON.stringify(this.impliedValues)),e},r.prototype.get=function(e,t){return e in this.knownValues?this.knownValues[e]:e in this.impliedValues?this.impliedValues[e]:void 0},r.prototype.assign=function(e,t){this.knownValues[e]=t,delete this.impliedValues[e]},r.prototype.imply=function(e,t){e in this.knownValues||(this.impliedValues[e]=t)},r.prototype.isCertain=function(e){return e in this.knownValues},r.prototype.isPossibleDate=function(){var e=this.moment();return this.isCertain("timezoneOffset")&&e.utcOffset(this.get("timezoneOffset")),e.get("year")==this.get("year")&&(e.get("month")==this.get("month")-1&&(e.get("date")==this.get("day")&&(e.get("hour")==this.get("hour")&&e.get("minute")==this.get("minute"))))},r.prototype.date=function(){var e=this.moment();return e.toDate()},r.prototype.moment=function(){var e=i();e.set("year",this.get("year")),e.set("month",this.get("month")-1),e.set("date",this.get("day")),e.set("hour",this.get("hour")),e.set("minute",this.get("minute")),e.set("second",this.get("second")),e.set("millisecond",this.get("millisecond"));var t=e.utcOffset(),n=this.isCertain("timezoneOffset")?this.get("timezoneOffset"):t,o=n-t;return e.add(-o,"minutes"),e},t.ParsedComponents=r,t.ParsedResult=o},"./node_modules/chrono-node/src/utils/DE.js":function(e,t){t.WEEKDAY_OFFSET={sonntag:0,so:0,montag:1,mo:1,dienstag:2,di:2,mittwoch:3,mi:3,donnerstag:4,do:4,freitag:5,fr:5,samstag:6,sa:6},t.MONTH_OFFSET={januar:1,jan:1,"jan.":1,februar:2,feb:2,"feb.":2,"märz":3,maerz:3,"mär":3,"mär.":3,mrz:3,"mrz.":3,april:4,apr:4,"apr.":4,mai:5,juni:6,jun:6,"jun.":6,juli:7,jul:7,"jul.":7,august:8,aug:8,"aug.":8,september:9,sep:9,"sep.":9,sept:9,"sept.":9,oktober:10,okt:10,"okt.":10,november:11,nov:11,"nov.":11,dezember:12,dez:12,"dez.":12},t.INTEGER_WORDS_PATTERN="(?:eins|zwei|drei|vier|fünf|fuenf|sechs|sieben|acht|neun|zehn|elf|zwölf|zwoelf)",t.INTEGER_WORDS={eins:1,zwei:2,drei:3,vier:4,"fünf":5,fuenf:5,sechs:6,sieben:7,acht:8,neun:9,zehn:10,elf:11,"zwölf":12,zwoelf:12}},"./node_modules/chrono-node/src/utils/EN.js":function(e,t){t.WEEKDAY_OFFSET={sunday:0,sun:0,monday:1,mon:1,tuesday:2,tue:2,wednesday:3,wed:3,thursday:4,thur:4,thu:4,friday:5,fri:5,saturday:6,sat:6},t.MONTH_OFFSET={january:1,jan:1,"jan.":1,february:2,feb:2,"feb.":2,march:3,mar:3,"mar.":3,april:4,apr:4,"apr.":4,may:5,june:6,jun:6,"jun.":6,july:7,jul:7,"jul.":7,august:8,aug:8,"aug.":8,september:9,sep:9,"sep.":9,sept:9,"sept.":9,october:10,oct:10,"oct.":10,november:11,nov:11,"nov.":11,december:12,dec:12,"dec.":12},t.INTEGER_WORDS={one:1,two:2,three:3,four:4,five:5,six:6,seven:7,eight:8,nine:9,ten:10,eleven:11,twelve:12},t.INTEGER_WORDS_PATTERN="(?:"+Object.keys(t.INTEGER_WORDS).join("|")+")",t.ORDINAL_WORDS={first:1,second:2,third:3,fourth:4,fifth:5,sixth:6,seventh:7,eighth:8,ninth:9,tenth:10,eleventh:11,twelfth:12,thirteenth:13,fourteenth:14,fifteenth:15,sixteenth:16,seventeenth:17,eighteenth:18,nineteenth:19,twentieth:20,"twenty first":21,"twenty second":22,"twenty third":23,"twenty fourth":24,"twenty fifth":25,"twenty sixth":26,"twenty seventh":27,"twenty eighth":28,"twenty ninth":29,thirtieth:30,"thirty first":31},t.ORDINAL_WORDS_PATTERN="(?:"+Object.keys(t.ORDINAL_WORDS).join("|").replace(/ /g,"[ -]")+")"},"./node_modules/chrono-node/src/utils/ES.js":function(e,t){t.WEEKDAY_OFFSET={domingo:0,dom:0,lunes:1,lun:1,martes:2,mar:2,"miércoles":3,miercoles:3,mie:3,jueves:4,jue:4,viernes:5,vie:5,"sábado":6,sabado:6,sab:6},t.MONTH_OFFSET={enero:1,ene:1,"ene.":1,febrero:2,feb:2,"feb.":2,marzo:3,mar:3,"mar.":3,abril:4,abr:4,"abr.":4,mayo:5,may:5,"may.":5,junio:6,jun:6,"jun.":6,julio:7,jul:7,"jul.":7,agosto:8,ago:8,"ago.":8,septiembre:9,sep:9,sept:9,"sep.":9,"sept.":9,octubre:10,oct:10,"oct.":10,noviembre:11,nov:11,"nov.":11,diciembre:12,dic:12,"dic.":12}},"./node_modules/chrono-node/src/utils/FR.js":function(e,t){t.WEEKDAY_OFFSET={dimanche:0,dim:0,lundi:1,lun:1,mardi:2,mar:2,mercredi:3,mer:3,jeudi:4,jeu:4,vendredi:5,ven:5,samedi:6,sam:6},t.MONTH_OFFSET={janvier:1,jan:1,"jan.":1,"février":2,"fév":2,"fév.":2,mars:3,mar:3,"mar.":3,avril:4,avr:4,"avr.":4,mai:5,juin:6,jun:6,juillet:7,jul:7,"jul.":7,"août":8,aout:8,septembre:9,sep:9,"sep.":9,sept:9,"sept.":9,octobre:10,oct:10,"oct.":10,novembre:11,nov:11,"nov.":11,"décembre":12,dec:12,"dec.":12},t.INTEGER_WORDS_PATTERN="(?:un|deux|trois|quatre|cinq|six|sept|huit|neuf|dix|onze|douze|treize)",t.INTEGER_WORDS={un:1,deux:2,trois:3,quatre:4,cinq:5,six:6,sept:7,huit:8,neuf:9,dix:10,onze:11,douze:12,treize:13}},"./node_modules/chrono-node/src/utils/JP.js":function(e,t){t.toHankaku=function(e,t){function n(t){return e(t).replace(/\u2019/g,"'").replace(/\u201D/g,'"').replace(/\u3000/g," ").replace(/\uFFE5/g,"¥").replace(/[\uFF01\uFF03-\uFF06\uFF08\uFF09\uFF0C-\uFF19\uFF1C-\uFF1F\uFF21-\uFF3B\uFF3D\uFF3F\uFF41-\uFF5B\uFF5D\uFF5E]/g,o)}function o(e){return t(e.charCodeAt(0)-65248)}return n}(String,String.fromCharCode),t.toZenkaku=function(e,t){function n(t){return e(t).replace(/\u0020/g,"　").replace(/\u0022/g,"”").replace(/\u0027/g,"’").replace(/\u00A5/g,"￥").replace(/[!#-&(),-9\u003C-?A-[\u005D_a-{}~]/g,o)}function o(e){return t(e.charCodeAt(0)+65248)}return n}(String,String.fromCharCode)},"./node_modules/chrono-node/src/utils/ZH-Hant.js":function(e,t){var n={"零":0,"一":1,"二":2,"兩":2,"三":3,"四":4,"五":5,"六":6,"七":7,"八":8,"九":9,"十":10,"廿":20,"卅":30},o={"天":0,"日":0,"一":1,"二":2,"三":3,"四":4,"五":5,"六":6};t.NUMBER=n,t.WEEKDAY_OFFSET=o,t.zhStringToNumber=function(e){for(var t=0,o=0;o<e.length;o++){var r=e[o];"十"===r?t=0===t?n[r]:t*n[r]:t+=n[r]}return t},t.zhStringToYear=function(e){for(var t="",o=0;o<e.length;o++){var r=e[o];t+=n[r]}return parseInt(t)}},"./node_modules/component-file-picker/index.js":function(e,t,n){function o(e,t){function n(e){t(s.files,e,s),r.unbind(s,"change",n),a=!1}"function"==typeof e&&(t=e,e={}),e=e||{},s.multiple=!!e.multiple,s.webkitdirectory=s.mozdirectory=s.directory=!!e.directory,null==e.accept?delete s.accept:e.accept.join?s.accept=e.accept.join(","):e.accept&&(s.accept=e.accept),a&&r.unbind(s,"change",a),r.bind(s,"change",n),a=n,i.reset(),s.click()}var r=n("./node_modules/component-event/index.js");e.exports=o;var i=document.createElement("form");i.innerHTML='<input type="file" style="top: -1000px; position: absolute" aria-hidden="true">',document.body.appendChild(i);var s=i.childNodes[0],a=!1},"./node_modules/core-js/library/fn/math/trunc.js":function(e,t,n){n("./node_modules/core-js/library/modules/es6.math.trunc.js"),e.exports=n("./node_modules/core-js/library/modules/_core.js").Math.trunc},"./node_modules/core-js/library/modules/es6.math.trunc.js":function(e,t,n){var o=n("./node_modules/core-js/library/modules/_export.js");o(o.S,"Math",{trunc:function(e){return(e>0?Math.floor:Math.ceil)(e)}})},"./node_modules/create-react-class/factory.js":function(e,t,n){"use strict";function o(e){return e}function r(e,t,n){function r(e,t){var n=v.hasOwnProperty(t)?v[t]:null;C.hasOwnProperty(t)&&l("OVERRIDE_BASE"===n,"ReactClassInterface: You are attempting to override `%s` from your class specification. Ensure that your method names do not overlap with React methods.",t),e&&l("DEFINE_MANY"===n||"DEFINE_MANY_MERGED"===n,"ReactClassInterface: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",t)}function i(e,n){if(n){l("function"!=typeof n,"ReactClass: You're attempting to use a component class or function as a mixin. Instead, just use a regular object."),l(!t(n),"ReactClass: You're attempting to use a component as a mixin. Instead, just use a regular object.");var o=e.prototype,i=o.__reactAutoBindPairs;n.hasOwnProperty(d)&&b.mixins(e,n.mixins);for(var s in n)if(n.hasOwnProperty(s)&&s!==d){var a=n[s],u=o.hasOwnProperty(s);if(r(u,s),b.hasOwnProperty(s))b[s](e,a);else{var c=v.hasOwnProperty(s),m="function"==typeof a,h=m&&!c&&!u&&n.autobind!==!1;if(h)i.push(s,a),o[s]=a;else if(u){var g=v[s];l(c&&("DEFINE_MANY_MERGED"===g||"DEFINE_MANY"===g),"ReactClass: Unexpected spec policy %s for key %s when mixing in component specs.",g,s),"DEFINE_MANY_MERGED"===g?o[s]=p(o[s],a):"DEFINE_MANY"===g&&(o[s]=f(o[s],a))}else o[s]=a}}}else;}function u(e,t){if(t)for(var n in t){var o=t[n];if(t.hasOwnProperty(n)){var r=n in b;l(!r,'ReactClass: You are attempting to define a reserved property, `%s`, that shouldn\'t be on the "statics" key. Define it as an instance property instead; it will still be accessible on the constructor.',n);var i=n in e;l(!i,"ReactClass: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",n),e[n]=o}}}function c(e,t){l(e&&t&&"object"==typeof e&&"object"==typeof t,"mergeIntoWithNoDuplicateKeys(): Cannot merge non-objects.");for(var n in t)t.hasOwnProperty(n)&&(l(void 0===e[n],"mergeIntoWithNoDuplicateKeys(): Tried to merge two objects with the same key: `%s`. This conflict may be due to a mixin; in particular, this may be caused by two getInitialState() or getDefaultProps() methods returning objects with clashing keys.",n),e[n]=t[n]);return e}function p(e,t){return function(){var n=e.apply(this,arguments),o=t.apply(this,arguments);if(null==n)return o;if(null==o)return n;var r={};return c(r,n),c(r,o),r}}function f(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function m(e,t){var n=t.bind(e);return n}function h(e){for(var t=e.__reactAutoBindPairs,n=0;n<t.length;n+=2){var o=t[n],r=t[n+1];e[o]=m(e,r)}}function g(e){var t=o(function(e,o,r){this.__reactAutoBindPairs.length&&h(this),this.props=e,this.context=o,this.refs=a,this.updater=r||n,this.state=null;var i=this.getInitialState?this.getInitialState():null;l("object"==typeof i&&!Array.isArray(i),"%s.getInitialState(): must return an object or null",t.displayName||"ReactCompositeComponent"),this.state=i});t.prototype=new E,t.prototype.constructor=t,t.prototype.__reactAutoBindPairs=[],y.forEach(i.bind(null,t)),i(t,_),i(t,e),i(t,x),t.getDefaultProps&&(t.defaultProps=t.getDefaultProps()),l(t.prototype.render,"createClass(...): Class specification must implement a `render` method.");for(var r in v)t.prototype[r]||(t.prototype[r]=null);return t}var y=[],v={mixins:"DEFINE_MANY",statics:"DEFINE_MANY",propTypes:"DEFINE_MANY",contextTypes:"DEFINE_MANY",childContextTypes:"DEFINE_MANY",getDefaultProps:"DEFINE_MANY_MERGED",getInitialState:"DEFINE_MANY_MERGED",getChildContext:"DEFINE_MANY_MERGED",render:"DEFINE_ONCE",componentWillMount:"DEFINE_MANY",componentDidMount:"DEFINE_MANY",componentWillReceiveProps:"DEFINE_MANY",shouldComponentUpdate:"DEFINE_ONCE",componentWillUpdate:"DEFINE_MANY",componentDidUpdate:"DEFINE_MANY",componentWillUnmount:"DEFINE_MANY",updateComponent:"OVERRIDE_BASE"},b={displayName:function(e,t){e.displayName=t},mixins:function(e,t){if(t)for(var n=0;n<t.length;n++)i(e,t[n])},childContextTypes:function(e,t){e.childContextTypes=s({},e.childContextTypes,t)},contextTypes:function(e,t){e.contextTypes=s({},e.contextTypes,t)},getDefaultProps:function(e,t){e.getDefaultProps?e.getDefaultProps=p(e.getDefaultProps,t):e.getDefaultProps=t},propTypes:function(e,t){e.propTypes=s({},e.propTypes,t)},statics:function(e,t){u(e,t)},autobind:function(){}},_={componentDidMount:function(){this.__isMounted=!0}},x={componentWillUnmount:function(){this.__isMounted=!1}},C={replaceState:function(e,t){this.updater.enqueueReplaceState(this,e,t)},isMounted:function(){return!!this.__isMounted}},E=function(){};return s(E.prototype,e.prototype,C),g}var i,s=n("./node_modules/object-assign/index.js"),a=n("./node_modules/fbjs/lib/emptyObject.js"),l=n("./node_modules/fbjs/lib/invariant.js"),d="mixins";i={},e.exports=r},"./node_modules/create-react-class/index.js":function(e,t,n){"use strict";var o=n("./node_modules/react/react.js"),r=n("./node_modules/create-react-class/factory.js");if("undefined"==typeof o)throw Error("create-react-class could not find the React object. If you are using script tags, make sure that React is being loaded before create-react-class.");var i=(new o.Component).updater;e.exports=r(o.Component,o.isValidElement,i)},"./node_modules/dom-helpers/util/inDOM.js":function(e,t,n){"use strict";e.exports=!("undefined"==typeof window||!window.document||!window.document.createElement)},"./node_modules/dom-helpers/util/scrollbarSize.js":function(e,t,n){"use strict";var o,r=n("./node_modules/dom-helpers/util/inDOM.js");e.exports=function(e){if((!o||e)&&r){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),o=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return o}},"./node_modules/email-validator/index.js":function(e,t,n){"use strict";function o(e){if(e.length>254)return!1;var t=r.test(e);if(!t)return!1;var n=e.split("@");if(n[0].length>64)return!1;var o=n[1].split(".");return!o.some(function(e){return e.length>63})}var r=/^[-!#$%&'*+\/0-9=?A-Z^_a-z{|}~](\.?[-!#$%&'*+\/0-9=?A-Z^_a-z`{|}~])*@[a-zA-Z0-9](-?[a-zA-Z0-9])*(\.[a-zA-Z](-?[a-zA-Z0-9])*)+$/;t.validate=o},"./node_modules/fbemitter/index.js":function(e,t,n){var o={EventEmitter:n("./node_modules/fbemitter/lib/BaseEventEmitter.js"),EmitterSubscription:n("./node_modules/fbemitter/lib/EmitterSubscription.js")};e.exports=o},"./node_modules/fbemitter/lib/BaseEventEmitter.js":function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=n("./node_modules/fbemitter/lib/EmitterSubscription.js"),i=n("./node_modules/fbemitter/lib/EventSubscriptionVendor.js"),s=n("./node_modules/fbjs/lib/emptyFunction.js"),a=n("./node_modules/fbjs/lib/invariant.js"),l=function(){function e(){o(this,e),this._subscriber=new i,this._currentSubscription=null}return e.prototype.addListener=function(e,t,n){return this._subscriber.addSubscription(e,new r(this._subscriber,t,n))},e.prototype.once=function(e,t,n){var o=this;return this.addListener(e,function(){o.removeCurrentListener(),t.apply(n,arguments)})},e.prototype.removeAllListeners=function(e){this._subscriber.removeAllSubscriptions(e)},e.prototype.removeCurrentListener=function(){this._currentSubscription?void 0:a(!1),this._subscriber.removeSubscription(this._currentSubscription)},e.prototype.listeners=function(e){var t=this._subscriber.getSubscriptionsForType(e);return t?t.filter(s.thatReturnsTrue).map(function(e){return e.listener}):[]},e.prototype.emit=function(e){var t=this._subscriber.getSubscriptionsForType(e);if(t){for(var n=Object.keys(t),o=0;o<n.length;o++){var r=n[o],i=t[r];i&&(this._currentSubscription=i,this.__emitToSubscription.apply(this,[i].concat(Array.prototype.slice.call(arguments))))}this._currentSubscription=null}},e.prototype.__emitToSubscription=function(e,t){var n=Array.prototype.slice.call(arguments,2);e.listener.apply(e.context,n)},e}();e.exports=l},"./node_modules/fbemitter/lib/EmitterSubscription.js":function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n("./node_modules/fbemitter/lib/EventSubscription.js"),s=function(e){function t(n,r,i){o(this,t),e.call(this,n),this.listener=r,this.context=i}return r(t,e),t}(i);e.exports=s},"./node_modules/fbemitter/lib/EventSubscription.js":function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(t){o(this,e),this.subscriber=t}return e.prototype.remove=function(){this.subscriber&&(this.subscriber.removeSubscription(this),this.subscriber=null)},e}();e.exports=r},"./node_modules/fbemitter/lib/EventSubscriptionVendor.js":function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=n("./node_modules/fbjs/lib/invariant.js"),i=function(){function e(){o(this,e),this._subscriptionsForType={},this._currentSubscription=null}return e.prototype.addSubscription=function(e,t){t.subscriber!==this?r(!1):void 0,this._subscriptionsForType[e]||(this._subscriptionsForType[e]=[]);var n=this._subscriptionsForType[e].length;return this._subscriptionsForType[e].push(t),t.eventType=e,t.key=n,t},e.prototype.removeAllSubscriptions=function(e){void 0===e?this._subscriptionsForType={}:delete this._subscriptionsForType[e]},e.prototype.removeSubscription=function(e){var t=e.eventType,n=e.key,o=this._subscriptionsForType[t];o&&delete o[n]},e.prototype.getSubscriptionsForType=function(e){return this._subscriptionsForType[e]},e}();e.exports=i},"./node_modules/filesize/lib/filesize.js":function(e,t,n){"use strict";(function(t){!function(t){function n(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=[],i=0,s=void 0,a=void 0,l=void 0,d=void 0,u=void 0,c=void 0,p=void 0,f=void 0,m=void 0,h=void 0,g=void 0;if(isNaN(e))throw new Error("Invalid arguments");return l=t.bits===!0,m=t.unix===!0,a=t.base||2,f=void 0!==t.round?t.round:m?1:2,h=void 0!==t.spacer?t.spacer:m?"":" ",g=t.symbols||t.suffixes||{},p=t.output||"string",s=void 0!==t.exponent?t.exponent:-1,c=Number(e),u=c<0,d=a>2?1e3:1024,u&&(c=-c),0===c?(n[0]=0,n[1]=m?"":l?"b":"B"):((s===-1||isNaN(s))&&(s=Math.floor(Math.log(c)/Math.log(d)),s<0&&(s=0)),s>8&&(s=8),i=2===a?c/Math.pow(2,10*s):c/Math.pow(1e3,s),l&&(i=8*i,i>d&&s<8&&(i/=d,s++)),n[0]=Number(i.toFixed(s>0?f:0)),n[1]=10===a&&1===s?l?"kb":"kB":r[l?"bits":"bytes"][s],m&&(n[1]=n[1].charAt(0),o.test(n[1])&&(n[0]=Math.floor(n[0]),n[1]=""))),u&&(n[0]=-n[0]),n[1]=g[n[1]]||n[1],"array"===p?n:"exponent"===p?s:"object"===p?{value:n[0],suffix:n[1],symbol:n[1]}:n.join(h)}var o=/^(b|B)$/,r={bits:["b","Kb","Mb","Gb","Tb","Pb","Eb","Zb","Yb"],bytes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]};e.exports=n}("undefined"!=typeof window?window:t)}).call(t,n("./node_modules/webpack/buildin/global.js"))},"./node_modules/flux/lib/FluxContainer.js":function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){a(e);var n=l({},p,t||{}),i=function(t){function i(r){o(this,i),t.call(this,r),this.state=n.withProps?e.calculateState(null,r):e.calculateState(null,void 0)}return r(i,t),i.prototype.componentDidMount=function(){var o=this;t.prototype.componentDidMount&&t.prototype.componentDidMount.call(this);var r=e.getStores(),i=!1,s=function(){i=!0};this._fluxContainerSubscriptions=r.map(function(e){return e.addListener(s)});var a=function(){i&&o.setState(function(t){return n.withProps?e.calculateState(t,o.props):e.calculateState(t,void 0);
}),i=!1};this._fluxContainerStoreGroup=new d(r,a)},i.prototype.componentWillReceiveProps=function(o,r){t.prototype.componentWillReceiveProps&&t.prototype.componentWillReceiveProps.call(this,o,r),n.withProps&&(n.pure&&c(this.props,o)||this.setState(function(t){return e.calculateState(t,o)}))},i.prototype.componentWillUnmount=function(){t.prototype.componentWillUnmount&&t.prototype.componentWillUnmount.call(this),this._fluxContainerStoreGroup.release();for(var e=this._fluxContainerSubscriptions,n=Array.isArray(e),o=0,e=n?e:e[Symbol.iterator]();;){var r;if(n){if(o>=e.length)break;r=e[o++]}else{if(o=e.next(),o.done)break;r=o.value}var i=r;i.remove()}this._fluxContainerSubscriptions=[]},i}(e),u=n.pure?s(i):i,f=e.displayName||e.name;return u.displayName="FluxContainer("+f+")",u}function s(e){var t=function(e){function t(){o(this,t),e.apply(this,arguments)}return r(t,e),t.prototype.shouldComponentUpdate=function(e,t){return!c(this.props,e)||!c(this.state,t)},t}(e);return t}function a(e){e.getStores?void 0:u(!1),e.calculateState?void 0:u(!1)}var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},d=n("./node_modules/flux/lib/FluxStoreGroup.js"),u=n("./node_modules/flux/node_modules/fbjs/lib/invariant.js"),c=n("./node_modules/flux/node_modules/fbjs/lib/shallowEqual.js"),p={pure:!0,withProps:!1};e.exports={create:i}},"./node_modules/flux/lib/FluxMapStore.js":function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n("./node_modules/flux/lib/FluxReduceStore.js"),s=n("./node_modules/immutable/dist/immutable.js"),a=n("./node_modules/flux/node_modules/fbjs/lib/invariant.js"),l=function(e){function t(){o(this,t),e.apply(this,arguments)}return r(t,e),t.prototype.getInitialState=function(){return s.Map()},t.prototype.at=function(e){return this.has(e)?void 0:a(!1),this.get(e)},t.prototype.has=function(e){return this.getState().has(e)},t.prototype.get=function(e){return this.getState().get(e)},t.prototype.getAll=function(e,t){var n=this,o=s.Set(e),r=t||s.Map();return r.withMutations(function(e){for(var t=r,i=Array.isArray(t),s=0,t=i?t:t[Symbol.iterator]();;){var a;if(i){if(s>=t.length)break;a=t[s++]}else{if(s=t.next(),s.done)break;a=s.value}var l=a,d=l[0];o.has(d)&&n.has(d)||e.delete(d)}for(var u=o,c=Array.isArray(u),p=0,u=c?u:u[Symbol.iterator]();;){var f;if(c){if(p>=u.length)break;f=u[p++]}else{if(p=u.next(),p.done)break;f=p.value}var m=f;n.has(m)&&e.set(m,n.at(m))}})},t}(i);e.exports=l},"./node_modules/flux/lib/FluxMixinLegacy.js":function(e,t,n){"use strict";function o(e){return{getInitialState:function(){return r(this),this.constructor.calculateState(null)},componentDidMount:function(){var t=this,n=!1,o=function(){n=!0};this._fluxMixinSubscriptions=e.map(function(e){return e.addListener(o)});var r=function(){n&&t.setState(function(e){return t.constructor.calculateState(t.state)}),n=!1};this._fluxMixinStoreGroup=new i(e,r)},componentWillUnmount:function(){this._fluxMixinStoreGroup.release();for(var e=this._fluxMixinSubscriptions,t=Array.isArray(e),n=0,e=t?e:e[Symbol.iterator]();;){var o;if(t){if(n>=e.length)break;o=e[n++]}else{if(n=e.next(),n.done)break;o=n.value}var r=o;r.remove()}this._fluxMixinSubscriptions=[]}}}function r(e){e.constructor.calculateState?void 0:s(!1)}var i=n("./node_modules/flux/lib/FluxStoreGroup.js"),s=n("./node_modules/flux/node_modules/fbjs/lib/invariant.js");e.exports=o},"./node_modules/flux/lib/FluxReduceStore.js":function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n("./node_modules/flux/lib/FluxStore.js"),s=n("./node_modules/flux/lib/abstractMethod.js"),a=n("./node_modules/flux/node_modules/fbjs/lib/invariant.js"),l=function(e){function t(n){o(this,t),e.call(this,n),this._state=this.getInitialState()}return r(t,e),t.prototype.getState=function(){return this._state},t.prototype.getInitialState=function(){return s("FluxReduceStore","getInitialState")},t.prototype.reduce=function(e,t){return s("FluxReduceStore","reduce")},t.prototype.areEqual=function(e,t){return e===t},t.prototype.__invokeOnDispatch=function(e){this.__changed=!1;var t=this._state,n=this.reduce(t,e);void 0===n?a(!1):void 0,this.areEqual(t,n)||(this._state=n,this.__emitChange()),this.__changed&&this.__emitter.emit(this.__changeEvent)},t}(i);e.exports=l},"./node_modules/flux/lib/FluxStore.js":function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=n("./node_modules/fbemitter/index.js"),i=r.EventEmitter,s=n("./node_modules/flux/node_modules/fbjs/lib/invariant.js"),a=function(){function e(t){var n=this;o(this,e),this.__className=this.constructor.name,this.__changed=!1,this.__changeEvent="change",this.__dispatcher=t,this.__emitter=new i,this._dispatchToken=t.register(function(e){n.__invokeOnDispatch(e)})}return e.prototype.addListener=function(e){return this.__emitter.addListener(this.__changeEvent,e)},e.prototype.getDispatcher=function(){return this.__dispatcher},e.prototype.getDispatchToken=function(){return this._dispatchToken},e.prototype.hasChanged=function(){return this.__dispatcher.isDispatching()?void 0:s(!1),this.__changed},e.prototype.__emitChange=function(){this.__dispatcher.isDispatching()?void 0:s(!1),this.__changed=!0},e.prototype.__invokeOnDispatch=function(e){this.__changed=!1,this.__onDispatch(e),this.__changed&&this.__emitter.emit(this.__changeEvent)},e.prototype.__onDispatch=function(e){s(!1)},e}();e.exports=a},"./node_modules/flux/lib/FluxStoreGroup.js":function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e){e&&e.length?void 0:i(!1);var t=e[0].getDispatcher();return t}var i=n("./node_modules/flux/node_modules/fbjs/lib/invariant.js"),s=function(){function e(t,n){var i=this;o(this,e),this._dispatcher=r(t);var s=t.map(function(e){return e.getDispatchToken()});this._dispatchToken=this._dispatcher.register(function(e){i._dispatcher.waitFor(s),n()})}return e.prototype.release=function(){this._dispatcher.unregister(this._dispatchToken)},e}();e.exports=s},"./node_modules/flux/lib/abstractMethod.js":function(e,t,n){"use strict";function o(e,t){r(!1)}var r=n("./node_modules/flux/node_modules/fbjs/lib/invariant.js");e.exports=o},"./node_modules/flux/node_modules/fbjs/lib/shallowEqual.js":function(e,t,n){"use strict";function o(e,t){if(e===t)return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),o=Object.keys(t);if(n.length!==o.length)return!1;for(var i=r.bind(t),s=0;s<n.length;s++)if(!i(n[s])||e[n[s]]!==t[n[s]])return!1;return!0}var r=Object.prototype.hasOwnProperty;e.exports=o},"./node_modules/flux/utils.js":function(e,t,n){e.exports.Container=n("./node_modules/flux/lib/FluxContainer.js"),e.exports.MapStore=n("./node_modules/flux/lib/FluxMapStore.js"),e.exports.Mixin=n("./node_modules/flux/lib/FluxMixinLegacy.js"),e.exports.ReduceStore=n("./node_modules/flux/lib/FluxReduceStore.js"),e.exports.Store=n("./node_modules/flux/lib/FluxStore.js")},"./node_modules/lodash/_baseRepeat.js":function(e,t){function n(e,t){var n="";if(!e||t<1||t>o)return n;do t%2&&(n+=e),t=r(t/2),t&&(e+=e);while(t);return n}var o=9007199254740991,r=Math.floor;e.exports=n},"./node_modules/lodash/_createPadding.js":function(e,t,n){function o(e,t){t=void 0===t?" ":i(t);var n=t.length;if(n<2)return n?r(t,e):t;var o=r(t,u(e/l(t)));return a(t)?s(d(o),0,e).join(""):o.slice(0,e)}var r=n("./node_modules/lodash/_baseRepeat.js"),i=n("./node_modules/lodash/_baseToString.js"),s=n("./node_modules/lodash/_castSlice.js"),a=n("./node_modules/lodash/_hasUnicode.js"),l=n("./node_modules/lodash/_stringSize.js"),d=n("./node_modules/lodash/_stringToArray.js"),u=Math.ceil;e.exports=o},"./node_modules/lodash/_unescapeHtmlChar.js":function(e,t,n){var o=n("./node_modules/lodash/_basePropertyOf.js"),r={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},i=o(r);e.exports=i},"./node_modules/lodash/bind.js":function(e,t,n){var o=n("./node_modules/lodash/_baseRest.js"),r=n("./node_modules/lodash/_createWrap.js"),i=n("./node_modules/lodash/_getHolder.js"),s=n("./node_modules/lodash/_replaceHolders.js"),a=1,l=32,d=o(function(e,t,n){var o=a;if(n.length){var u=s(n,i(d));o|=l}return r(e,o,t,n,u)});d.placeholder={},e.exports=d},"./node_modules/lodash/indexOf.js":function(e,t,n){function o(e,t,n){var o=e?e.length:0;if(!o)return-1;var a=null==n?0:i(n);return a<0&&(a=s(o+a,0)),r(e,t,a)}var r=n("./node_modules/lodash/_baseIndexOf.js"),i=n("./node_modules/lodash/toInteger.js"),s=Math.max;e.exports=o},"./node_modules/lodash/padEnd.js":function(e,t,n){function o(e,t,n){e=a(e),t=s(t);var o=t?i(e):0;return t&&o<t?e+r(t-o,n):e}var r=n("./node_modules/lodash/_createPadding.js"),i=n("./node_modules/lodash/_stringSize.js"),s=n("./node_modules/lodash/toInteger.js"),a=n("./node_modules/lodash/toString.js");e.exports=o},"./node_modules/lodash/reverse.js":function(e,t){function n(e){return e?r.call(e):e}var o=Array.prototype,r=o.reverse;e.exports=n},"./node_modules/lodash/slice.js":function(e,t,n){function o(e,t,n){var o=e?e.length:0;return o?(n&&"number"!=typeof n&&i(e,t,n)?(t=0,n=o):(t=null==t?0:s(t),n=void 0===n?o:s(n)),r(e,t,n)):[]}var r=n("./node_modules/lodash/_baseSlice.js"),i=n("./node_modules/lodash/_isIterateeCall.js"),s=n("./node_modules/lodash/toInteger.js");e.exports=o},"./node_modules/lodash/transform.js":function(e,t,n){function o(e,t,n){var o=d(e)||p(e);if(t=a(t,4),null==n)if(o||c(e)){var f=e.constructor;n=o?d(e)?new f:[]:u(f)?i(l(e)):{}}else n={};return(o?r:s)(e,function(e,o,r){return t(n,e,o,r)}),n}var r=n("./node_modules/lodash/_arrayEach.js"),i=n("./node_modules/lodash/_baseCreate.js"),s=n("./node_modules/lodash/_baseForOwn.js"),a=n("./node_modules/lodash/_baseIteratee.js"),l=n("./node_modules/lodash/_getPrototype.js"),d=n("./node_modules/lodash/isArray.js"),u=n("./node_modules/lodash/isFunction.js"),c=n("./node_modules/lodash/isObject.js"),p=n("./node_modules/lodash/isTypedArray.js");e.exports=o},"./node_modules/lodash/trimEnd.js":function(e,t,n){function o(e,t,n){if(e=l(e),e&&(n||void 0===t))return e.replace(d,"");if(!e||!(t=r(t)))return e;var o=a(e),u=s(o,a(t))+1;return i(o,0,u).join("")}var r=n("./node_modules/lodash/_baseToString.js"),i=n("./node_modules/lodash/_castSlice.js"),s=n("./node_modules/lodash/_charsEndIndex.js"),a=n("./node_modules/lodash/_stringToArray.js"),l=n("./node_modules/lodash/toString.js"),d=/\s+$/;e.exports=o},"./node_modules/lodash/unescape.js":function(e,t,n){function o(e){return e=r(e),e&&a.test(e)?e.replace(s,i):e}var r=n("./node_modules/lodash/toString.js"),i=n("./node_modules/lodash/_unescapeHtmlChar.js"),s=/&(?:amp|lt|gt|quot|#39|#96);/g,a=RegExp(s.source);e.exports=o},"./node_modules/react-day-picker/DayPicker.js":function(e,t,n){var o=n("./node_modules/react-day-picker/lib/src/DayPicker.js"),r=n("./node_modules/react-day-picker/lib/src/DateUtils.js"),i=n("./node_modules/react-day-picker/lib/src/LocaleUtils.js"),s=n("./node_modules/react-day-picker/lib/src/ModifiersUtils.js"),a=n("./node_modules/react-day-picker/lib/src/Weekday.js"),l=n("./node_modules/react-day-picker/lib/src/Navbar.js"),d=n("./node_modules/react-day-picker/lib/src/PropTypes.js");e.exports=o.default||o,e.exports.DateUtils=r.default||r,e.exports.LocaleUtils=i.default||i,e.exports.ModifiersUtils=s.default||s,e.exports.WeekdayPropTypes=a.WeekdayPropTypes,e.exports.NavbarPropTypes=l.NavbarPropTypes,e.exports.PropTypes=d},"./node_modules/react-day-picker/lib/src/Caption.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=n("./node_modules/react/react.js"),d=o(l),u=n("./node_modules/react-day-picker/lib/src/PropTypes.js"),c=o(u),p=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),a(t,[{key:"shouldComponentUpdate",value:function(e){return e.locale!==this.props.locale||e.classNames!==this.props.classNames||e.date.getMonth()!==this.props.date.getMonth()||e.date.getFullYear()!==this.props.date.getFullYear()}},{key:"render",value:function(){var e=this.props,t=e.classNames,n=e.date,o=e.months,r=e.locale,i=e.localeUtils,s=e.onClick;return d.default.createElement("div",{className:t.caption,role:"heading"},d.default.createElement("div",{onClick:s},o?o[n.getMonth()]+" "+n.getFullYear():i.formatMonthTitle(n,r)))}}]),t}(l.Component);p.propTypes={date:c.default.instanceOf(Date),months:c.default.arrayOf(c.default.string),locale:c.default.string,localeUtils:c.default.localeUtils,onClick:c.default.func,classNames:c.default.shape({caption:c.default.string.isRequired}).isRequired},t.default=p},"./node_modules/react-day-picker/lib/src/DateUtils.js":function(e,t,n){"use strict";function o(e){return new Date(e.getTime())}function r(e,t){var n=o(e);return n.setMonth(e.getMonth()+t),n}function i(e,t){return!(!e||!t)&&(e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear())}function s(e,t){var n=o(e).setHours(0,0,0,0),r=o(t).setHours(0,0,0,0);return n<r}function a(e,t){var n=o(e).setHours(0,0,0,0),r=o(t).setHours(0,0,0,0);return n>r}function l(e){var t=new Date;return t.setHours(0,0,0,0),s(e,t)}function d(e){var t=new Date((new Date).getTime()+864e5);return t.setHours(0,0,0,0),e>=t}function u(e,t,n){var r=o(e);return r.setHours(0,0,0,0),a(r,t)&&s(r,n)||a(r,n)&&s(r,t)}function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{from:null,to:null},n=t.from,o=t.to;return n?n&&o&&i(n,o)&&i(e,n)?(n=null,o=null):o&&s(e,n)?n=e:o&&i(e,o)?(n=e,o=e):(o=e,s(o,n)&&(o=n,n=e)):n=e,{from:n,to:o}}function p(e,t){var n=t.from,o=t.to;return n&&i(e,n)||o&&i(e,o)||n&&o&&u(e,n,o)}function f(e){var t=o(e);return t.setHours(0,0,0),t.setDate(t.getDate()+4-(t.getDay()||7)),Math.ceil(((t-new Date(t.getFullYear(),0,1))/864e5+1)/7)}Object.defineProperty(t,"__esModule",{value:!0}),t.clone=o,t.addMonths=r,t.isSameDay=i,t.isDayBefore=s,t.isDayAfter=a,t.isPastDay=l,t.isFutureDay=d,t.isDayBetween=u,t.addDayToRange=c,t.isDayInRange=p,t.getWeekNumber=f,t.default={addDayToRange:c,addMonths:r,clone:o,getWeekNumber:f,isDayAfter:a,isDayBefore:s,isDayBetween:u,isDayInRange:p,isFutureDay:d,isPastDay:l,isSameDay:i}},"./node_modules/react-day-picker/lib/src/Day.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t,n){if(e)return function(o){o.persist(),e(t,n,o)}}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),d=n("./node_modules/react/react.js"),u=o(d),c=n("./node_modules/object-assign/index.js"),p=o(c),f=n("./node_modules/react-day-picker/lib/src/classNames.js"),m=o(f),h=n("./node_modules/react-day-picker/lib/src/PropTypes.js"),g=o(h),y=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"shouldComponentUpdate",value:function(e){var t=Object.keys(this.props.modifiers).sort(),n=Object.keys(e.modifiers).sort();return t.join()!==n.join()}},{key:"render",value:function(){var e=this.props,t=e.classNames,n=e.modifiersStyles,o=e.day,r=e.tabIndex,i=e.empty,s=e.modifiers,l=e.onMouseEnter,d=e.onMouseLeave,c=e.onClick,f=e.onKeyDown,h=e.onTouchStart,g=e.onTouchEnd,y=e.onFocus,v=e.ariaLabel,b=e.ariaDisabled,_=e.ariaSelected,x=e.children,C=t.day;C+=t!==m.default?" "+Object.keys(s).join(" "):Object.keys(s).map(function(e){return" "+C+"--"+e}).join("");var E=void 0;return n&&Object.keys(s).filter(function(e){return!!n[e]}).forEach(function(e){E=(0,p.default)({},E,n[e])}),i?u.default.createElement("div",{"aria-disabled":!0,className:C,style:E}):u.default.createElement("div",{className:C,tabIndex:r,style:E,role:"gridcell","aria-label":v,"aria-disabled":b,"aria-selected":_,onClick:a(c,o,s),onKeyDown:a(f,o,s),onMouseEnter:a(l,o,s),onMouseLeave:a(d,o,s),onTouchEnd:a(g,o,s),onTouchStart:a(h,o,s),onFocus:a(y,o,s)},x)}}]),t}(d.Component);y.propTypes={classNames:g.default.shape({day:g.default.string.isRequired}).isRequired,day:g.default.instanceOf(Date).isRequired,children:g.default.node.isRequired,ariaDisabled:g.default.bool,ariaLabel:g.default.string,ariaSelected:g.default.bool,empty:g.default.bool,modifiers:g.default.object,modifiersStyles:g.default.object,onClick:g.default.func,onKeyDown:g.default.func,onMouseEnter:g.default.func,onMouseLeave:g.default.func,onTouchEnd:g.default.func,onTouchStart:g.default.func,onFocus:g.default.func,tabIndex:g.default.number},y.defaultProps={tabIndex:-1},y.defaultProps={modifiers:{},empty:!1},t.default=y},"./node_modules/react-day-picker/lib/src/DayPicker.js":function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var n={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),c=n("./node_modules/react/react.js"),p=r(c),f=n("./node_modules/react-day-picker/lib/src/Caption.js"),m=r(f),h=n("./node_modules/react-day-picker/lib/src/Navbar.js"),g=r(h),y=n("./node_modules/react-day-picker/lib/src/Month.js"),v=r(y),b=n("./node_modules/react-day-picker/lib/src/Weekday.js"),_=r(b),x=n("./node_modules/react-day-picker/lib/src/Helpers.js"),C=o(x),E=n("./node_modules/react-day-picker/lib/src/DateUtils.js"),w=o(E),j=n("./node_modules/react-day-picker/lib/src/LocaleUtils.js"),S=o(j),T=n("./node_modules/react-day-picker/lib/src/classNames.js"),P=r(T),k=n("./node_modules/react-day-picker/lib/src/keys.js"),I=r(k),N=n("./node_modules/react-day-picker/lib/src/PropTypes.js"),R=r(N),D=function(e){function t(e){s(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return M.call(n),n.state=n.getStateFromProps(e),n}return l(t,e),u(t,[{key:"componentWillReceiveProps",value:function(e){this.props.month!==e.month&&this.setState(this.getStateFromProps(e))}},{key:"getNextNavigableMonth",value:function(){return w.addMonths(this.state.currentMonth,this.props.numberOfMonths)}},{key:"getPreviousNavigableMonth",value:function(){return w.addMonths(this.state.currentMonth,-1)}},{key:"allowPreviousMonth",value:function(){var e=w.addMonths(this.state.currentMonth,-1);return this.allowMonth(e)}},{key:"allowNextMonth",value:function(){var e=w.addMonths(this.state.currentMonth,this.props.numberOfMonths);return this.allowMonth(e)}},{key:"allowMonth",value:function(e){var t=this.props,n=t.fromMonth,o=t.toMonth,r=t.canChangeMonth;return!(!r||n&&C.getMonthsDiff(n,e)<0||o&&C.getMonthsDiff(o,e)>0)}},{key:"allowYearChange",value:function(){return this.props.canChangeMonth}},{key:"showMonth",value:function(e,t){var n=this;this.allowMonth(e)&&this.setState({currentMonth:C.startOfMonth(e)},function(){t&&t(),n.props.onMonthChange&&n.props.onMonthChange(n.state.currentMonth)})}},{key:"showNextYear",value:function(){if(this.allowYearChange()){var e=w.addMonths(this.state.currentMonth,12);this.showMonth(e)}}},{key:"showPreviousYear",value:function(){if(this.allowYearChange()){var e=w.addMonths(this.state.currentMonth,-12);this.showMonth(e)}}},{key:"focusFirstDayOfMonth",value:function(){C.getDayNodes(this.dayPicker,this.props.classNames)[0].focus()}},{key:"focusLastDayOfMonth",value:function(){var e=C.getDayNodes(this.dayPicker,this.props.classNames);e[e.length-1].focus()}},{key:"focusPreviousDay",value:function(e){var t=this,n=C.getDayNodes(this.dayPicker,this.props.classNames),o=C.nodeListToArray(n).indexOf(e);0===o?this.showPreviousMonth(function(){return t.focusLastDayOfMonth()}):n[o-1].focus()}},{key:"focusNextDay",value:function(e){var t=this,n=C.getDayNodes(this.dayPicker,this.props.classNames),o=C.nodeListToArray(n).indexOf(e);o===n.length-1?this.showNextMonth(function(){return t.focusFirstDayOfMonth()}):n[o+1].focus()}},{key:"focusNextWeek",value:function(e){var t=this,n=C.getDayNodes(this.dayPicker,this.props.classNames),o=C.nodeListToArray(n).indexOf(e),r=o>n.length-8;r?this.showNextMonth(function(){var e=n.length-o,r=7-e;C.getDayNodes(t.dayPicker,t.props.classNames)[r].focus()}):n[o+7].focus()}},{key:"focusPreviousWeek",value:function(e){var t=this,n=C.getDayNodes(this.dayPicker,this.props.classNames),o=C.nodeListToArray(n).indexOf(e),r=o<=6;r?this.showPreviousMonth(function(){var e=C.getDayNodes(t.dayPicker,t.props.classNames),n=e.length-7,r=n+o;e[r].focus()}):n[o-7].focus()}},{key:"handleOutsideDayClick",value:function(e){var t=this.state.currentMonth,n=this.props.numberOfMonths,o=C.getMonthsDiff(t,e);o>0&&o>=n?this.showNextMonth():o<0&&this.showPreviousMonth()}},{key:"renderNavbar",value:function(){var e=this.props,t=e.labels,n=e.locale,o=e.localeUtils,r=e.canChangeMonth,s=e.navbarElement,a=i(e,["labels","locale","localeUtils","canChangeMonth","navbarElement"]);if(!r)return null;var l={classNames:this.props.classNames,className:this.props.classNames.navBar,nextMonth:this.getNextNavigableMonth(),previousMonth:this.getPreviousNavigableMonth(),showPreviousButton:this.allowPreviousMonth(),showNextButton:this.allowNextMonth(),onNextClick:this.showNextMonth,onPreviousClick:this.showPreviousMonth,dir:a.dir,labels:t,locale:n,localeUtils:o};return p.default.isValidElement(s)?p.default.cloneElement(s,l):p.default.createElement(s,l)}},{key:"renderMonths",value:function(){for(var e=[],t=C.getFirstDayOfWeekFromProps(this.props),n=0;n<this.props.numberOfMonths;n+=1){var o=w.addMonths(this.state.currentMonth,n);e.push(p.default.createElement(v.default,d({key:n},this.props,{month:o,footer:this.props.todayButton&&this.renderTodayButton(),firstDayOfWeek:t,onDayKeyDown:this.handleDayKeyDown,onDayClick:this.handleDayClick})))}return this.props.reverseMonths&&e.reverse(),e}},{key:"renderTodayButton",value:function(){return p.default.createElement("button",{tabIndex:0,className:this.props.classNames.todayButton,"aria-label":this.props.todayButton,onClick:this.handleTodayButtonClick},this.props.todayButton)}},{key:"render",value:function(){var e=this,t=this.props.classNames.container;return this.props.onDayClick||(t=t+" "+this.props.classNames.interactionDisabled),this.props.className&&(t=t+" "+this.props.className),p.default.createElement("div",d({},this.props.containerProps,{className:t,ref:function(t){return e.dayPicker=t},role:"application",lang:this.props.locale}),p.default.createElement("div",{className:P.default.wrapper,tabIndex:this.props.canChangeMonth&&this.props.tabIndex,onKeyDown:this.handleKeyDown,onFocus:this.props.onFocus,onBlur:this.props.onBlur},this.renderNavbar(),this.renderMonths()))}}]),t}(c.Component);D.VERSION="6.0.2",D.propTypes={initialMonth:R.default.instanceOf(Date),month:R.default.instanceOf(Date),numberOfMonths:R.default.number,fromMonth:R.default.instanceOf(Date),toMonth:R.default.instanceOf(Date),canChangeMonth:R.default.bool,reverseMonths:R.default.bool,pagedNavigation:R.default.bool,todayButton:R.default.string,showWeekNumbers:R.default.bool,selectedDays:R.default.oneOfType([N.ModifierPropType,R.default.arrayOf(N.ModifierPropType)]),disabledDays:R.default.oneOfType([N.ModifierPropType,R.default.arrayOf(N.ModifierPropType)]),modifiers:R.default.object,modifiersStyles:R.default.object,dir:R.default.string,firstDayOfWeek:R.default.oneOf([0,1,2,3,4,5,6]),labels:R.default.shape({nextMonth:R.default.string.isRequired,previousMonth:R.default.string.isRequired}).isRequired,locale:R.default.string,localeUtils:R.default.localeUtils,months:R.default.arrayOf(R.default.string),weekdaysLong:R.default.arrayOf(R.default.string),weekdaysShort:R.default.arrayOf(R.default.string),enableOutsideDays:R.default.bool,fixedWeeks:R.default.bool,classNames:R.default.shape({body:R.default.string,container:R.default.string,day:R.default.string.isRequired,disabled:R.default.string.isRequired,footer:R.default.string,interactionDisabled:R.default.string,month:R.default.string,navBar:R.default.string,outside:R.default.string.isRequired,selected:R.default.string.isRequired,today:R.default.string.isRequired,todayButton:R.default.string,week:R.default.string}),className:R.default.string,containerProps:R.default.object,tabIndex:R.default.number,renderDay:R.default.func,weekdayElement:R.default.oneOfType([R.default.element,R.default.func,R.default.instanceOf(c.Component)]),navbarElement:R.default.oneOfType([R.default.element,R.default.func,R.default.instanceOf(c.Component)]),captionElement:R.default.oneOfType([R.default.element,R.default.func,R.default.instanceOf(c.Component)]),onBlur:R.default.func,onFocus:R.default.func,onKeyDown:R.default.func,onDayClick:R.default.func,onDayKeyDown:R.default.func,onDayMouseEnter:R.default.func,onDayMouseLeave:R.default.func,onDayTouchStart:R.default.func,onDayTouchEnd:R.default.func,onDayFocus:R.default.func,onMonthChange:R.default.func,onCaptionClick:R.default.func,onWeekClick:R.default.func},D.defaultProps={classNames:P.default,tabIndex:0,initialMonth:new Date,numberOfMonths:1,labels:{previousMonth:"Previous Month",nextMonth:"Next Month"},locale:"en",localeUtils:S,enableOutsideDays:!1,fixedWeeks:!1,canChangeMonth:!0,reverseMonths:!1,pagedNavigation:!1,showWeekNumbers:!1,renderDay:function(e){return e.getDate()},weekdayElement:p.default.createElement(_.default,null),navbarElement:p.default.createElement(g.default,{classNames:P.default}),captionElement:p.default.createElement(m.default,{classNames:P.default})};var M=function(){var e=this;this.getStateFromProps=function(e){var t=C.startOfMonth(e.month||e.initialMonth),n=t;if(e.pagedNavigation&&e.numberOfMonths>1&&e.fromMonth){var o=C.getMonthsDiff(e.fromMonth,n);n=w.addMonths(e.fromMonth,Math.floor(o/e.numberOfMonths)*e.numberOfMonths)}return{currentMonth:n}},this.dayPicker=null,this.showNextMonth=function(t){if(e.allowNextMonth()){var n=e.props.pagedNavigation?e.props.numberOfMonths:1,o=w.addMonths(e.state.currentMonth,n);e.showMonth(o,t)}},this.showPreviousMonth=function(t){if(e.allowPreviousMonth()){var n=e.props.pagedNavigation?e.props.numberOfMonths:1,o=w.addMonths(e.state.currentMonth,-n);e.showMonth(o,t)}},this.handleKeyDown=function(t){switch(t.persist(),t.keyCode){case I.default.LEFT:e.showPreviousMonth();break;case I.default.RIGHT:e.showNextMonth();break;case I.default.UP:e.showPreviousYear();break;case I.default.DOWN:e.showNextYear()}e.props.onKeyDown&&e.props.onKeyDown(t)},this.handleDayKeyDown=function(t,n,o){switch(o.persist(),o.keyCode){case I.default.LEFT:C.cancelEvent(o),e.focusPreviousDay(o.target);break;case I.default.RIGHT:C.cancelEvent(o),e.focusNextDay(o.target);break;case I.default.UP:C.cancelEvent(o),e.focusPreviousWeek(o.target);break;case I.default.DOWN:C.cancelEvent(o),e.focusNextWeek(o.target);break;case I.default.ENTER:case I.default.SPACE:C.cancelEvent(o),e.props.onDayClick&&e.handleDayClick(t,n,o)}e.props.onDayKeyDown&&e.props.onDayKeyDown(t,n,o)},this.handleDayClick=function(t,n,o){o.persist(),n.outside&&e.handleOutsideDayClick(t),e.props.onDayClick&&e.props.onDayClick(t,n,o)},this.handleTodayButtonClick=function(t){e.showMonth(new Date),t.target.blur()}};t.default=D},"./node_modules/react-day-picker/lib/src/Helpers.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){e.preventDefault(),e.stopPropagation()}function i(e){return new Date(e.getFullYear(),e.getMonth(),1,12)}function s(e){var t=i(e);return t.setMonth(t.getMonth()+1),t.setDate(t.getDate()-1),t.getDate()}function a(e){var t=h({},e.modifiers);return e.selectedDays&&(t[e.classNames.selected]=e.selectedDays),e.disabledDays&&(t[e.classNames.disabled]=e.disabledDays),t}function l(e){var t=e.firstDayOfWeek,n=e.locale,o=void 0===n?"en":n,r=e.localeUtils,i=void 0===r?{}:r;return isNaN(t)?i.getFirstDayOfWeek?i.getFirstDayOfWeek(o):0:t}function d(e){return!!(e&&e.from&&e.to)}function u(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())}function c(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,y.getFirstDayOfWeek)(),n=arguments[2],o=s(e),r=[],i=[],a=[],l=1;l<=o;l+=1)r.push(new Date(e.getFullYear(),e.getMonth(),l,12));r.forEach(function(e){i.length>0&&e.getDay()===t&&(a.push(i),i=[]),i.push(e),r.indexOf(e)===r.length-1&&a.push(i)});for(var d=a[0],u=7-d.length;u>0;u-=1){var c=(0,g.clone)(d[0]);c.setDate(d[0].getDate()-1),d.unshift(c)}for(var p=a[a.length-1],f=p.length;f<7;f+=1){var m=(0,g.clone)(p[p.length-1]);m.setDate(p[p.length-1].getDate()+1),p.push(m)}if(n&&a.length<6)for(var h=void 0,v=a.length;v<6;v+=1){h=a[a.length-1];for(var b=h[h.length-1],_=[],x=0;x<7;x+=1){var C=(0,g.clone)(b);C.setDate(b.getDate()+x+1),_.push(C)}a.push(_);
}return a}function p(e){var t=(0,g.clone)(e);return t.setDate(1),t.setHours(12,0,0,0),t}function f(e,t){var n=void 0;n=t===b.default?t.day+"--"+t.outside:""+t.outside;var o=t.day.replace(/ /g,"."),r=n.replace(/ /g,"."),i="."+o+":not(."+r+")";return e.querySelectorAll(i)}function m(e){return Array.prototype.slice.call(e,0)}Object.defineProperty(t,"__esModule",{value:!0});var h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};t.cancelEvent=r,t.getFirstDayOfMonth=i,t.getDaysInMonth=s,t.getModifiersFromProps=a,t.getFirstDayOfWeekFromProps=l,t.isRangeOfDates=d,t.getMonthsDiff=u,t.getWeekArray=c,t.startOfMonth=p,t.getDayNodes=f,t.nodeListToArray=m;var g=n("./node_modules/react-day-picker/lib/src/DateUtils.js"),y=n("./node_modules/react-day-picker/lib/src/LocaleUtils.js"),v=n("./node_modules/react-day-picker/lib/src/classNames.js"),b=o(v)},"./node_modules/react-day-picker/lib/src/LocaleUtils.js":function(e,t,n){"use strict";function o(e){return e.toDateString()}function r(e){return c[e.getMonth()]+" "+e.getFullYear()}function i(e){return u[e]}function s(e){return d[e]}function a(){return 0}function l(){return c}Object.defineProperty(t,"__esModule",{value:!0}),t.formatDay=o,t.formatMonthTitle=r,t.formatWeekdayShort=i,t.formatWeekdayLong=s,t.getFirstDayOfWeek=a,t.getMonths=l;var d=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],u=["Su","Mo","Tu","We","Th","Fr","Sa"],c=["January","February","March","April","May","June","July","August","September","October","November","December"];t.default={formatDay:o,formatMonthTitle:r,formatWeekdayShort:i,formatWeekdayLong:s,getFirstDayOfWeek:a,getMonths:l}},"./node_modules/react-day-picker/lib/src/ModifiersUtils.js":function(e,t,n){"use strict";function o(e,t){if(!t)return!1;var n=Array.isArray(t)?t:[t];return n.some(function(t){return!!t&&(t instanceof Date?(0,i.isSameDay)(e,t):(0,s.isRangeOfDates)(t)?(0,i.isDayInRange)(e,t):t.after&&t.before?(0,i.isDayAfter)(e,t.after)&&(0,i.isDayBefore)(e,t.before):t.after?(0,i.isDayAfter)(e,t.after):t.before?(0,i.isDayBefore)(e,t.before):t.daysOfWeek?t.daysOfWeek.some(function(t){return e.getDay()===t}):"function"==typeof t&&t(e))})}function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(t).reduce(function(n,r){var i=t[r];return o(e,i)&&n.push(r),n},[])}Object.defineProperty(t,"__esModule",{value:!0}),t.dayMatchesModifier=o,t.getModifiersForDay=r;var i=n("./node_modules/react-day-picker/lib/src/DateUtils.js"),s=n("./node_modules/react-day-picker/lib/src/Helpers.js");t.default={dayMatchesModifier:o,getModifiersForDay:r}},"./node_modules/react-day-picker/lib/src/Month.js":function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),d=n("./node_modules/react/react.js"),u=r(d),c=n("./node_modules/react-day-picker/lib/src/PropTypes.js"),p=r(c),f=n("./node_modules/react-day-picker/lib/src/Weekdays.js"),m=r(f),h=n("./node_modules/react-day-picker/lib/src/Day.js"),g=r(h),y=n("./node_modules/react-day-picker/lib/src/ModifiersUtils.js"),v=o(y),b=n("./node_modules/react-day-picker/lib/src/Helpers.js"),_=o(b),x=n("./node_modules/react-day-picker/lib/src/DateUtils.js"),C=o(x),E=function(e){function t(){var e,n,o,r;i(this,t);for(var a=arguments.length,l=Array(a),d=0;d<a;d++)l[d]=arguments[d];return n=o=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),o.renderDay=function(e){var t=o.props.month.getMonth(),n=_.getModifiersFromProps(o.props),r=v.getModifiersForDay(e,n);C.isSameDay(e,new Date)&&!Object.prototype.hasOwnProperty.call(n,o.props.classNames.today)&&r.push(o.props.classNames.today),e.getMonth()!==t&&r.push(o.props.classNames.outside);var i=e.getMonth()!==t,s=-1;o.props.onDayClick&&!i&&1===e.getDate()&&(s=o.props.tabIndex);var a=""+e.getFullYear()+e.getMonth()+e.getDate(),l={};return r.forEach(function(e){l[e]=!0}),u.default.createElement(g.default,{key:""+(i?"outside-":"")+a,classNames:o.props.classNames,day:e,modifiers:l,modifiersStyles:o.props.modifiersStyles,empty:i&&!o.props.enableOutsideDays&&!o.props.fixedWeeks,tabIndex:s,ariaLabel:o.props.localeUtils.formatDay(e,o.props.locale),ariaDisabled:i||r.indexOf("disabled")>-1,ariaSelected:r.indexOf("selected")>-1,onClick:o.props.onDayClick,onFocus:o.props.onDayFocus,onKeyDown:o.props.onDayKeyDown,onMouseEnter:o.props.onDayMouseEnter,onMouseLeave:o.props.onDayMouseLeave,onTouchEnd:o.props.onDayTouchEnd,onTouchStart:o.props.onDayTouchStart},o.props.renderDay(e,l))},r=n,s(o,r)}return a(t,e),l(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.classNames,o=t.month,r=t.months,i=t.fixedWeeks,s=t.captionElement,a=t.weekdayElement,l=t.locale,d=t.localeUtils,c=t.weekdaysLong,p=t.weekdaysShort,f=t.firstDayOfWeek,h=t.onCaptionClick,g=t.footer,y=t.showWeekNumbers,v=t.onWeekClick,b={date:o,classNames:n,months:r,localeUtils:d,locale:l,onClick:h?function(e){return h(o,e)}:void 0},x=u.default.isValidElement(s)?u.default.cloneElement(s,b):u.default.createElement(s,b),E=_.getWeekArray(o,f,i);return u.default.createElement("div",{className:n.month,role:"grid"},x,u.default.createElement(m.default,{classNames:n,weekdaysShort:p,weekdaysLong:c,firstDayOfWeek:f,showWeekNumbers:y,locale:l,localeUtils:d,weekdayElement:a}),u.default.createElement("div",{className:n.body,role:"rowgroup"},E.map(function(t){var o=void 0;return y&&(o=C.getWeekNumber(t[0])),u.default.createElement("div",{key:t[0].getTime(),className:n.week,role:"row"},y&&u.default.createElement("div",{className:n.weekNumber,tabIndex:0,role:"gridcell",onClick:function(e){return v(o,t,e)}},o),t.map(e.renderDay))})),g&&u.default.createElement("div",{className:n.footer},g))}}]),t}(d.Component);E.propTypes={classNames:p.default.shape({body:p.default.string.isRequired,month:p.default.string.isRequired,outside:p.default.string.isRequired,today:p.default.string.isRequired,week:p.default.string.isRequired}).isRequired,tabIndex:p.default.number,month:p.default.instanceOf(Date).isRequired,months:p.default.arrayOf(p.default.string),modifiersStyles:p.default.object,enableOutsideDays:p.default.bool,renderDay:p.default.func.isRequired,captionElement:p.default.oneOfType([p.default.element,p.default.func,p.default.instanceOf(u.default.Component)]).isRequired,weekdayElement:p.default.oneOfType([p.default.element,p.default.func,p.default.instanceOf(u.default.Component)]),footer:p.default.node,fixedWeeks:p.default.bool,showWeekNumbers:p.default.bool,locale:p.default.string.isRequired,localeUtils:p.default.localeUtils.isRequired,weekdaysLong:p.default.arrayOf(p.default.string),weekdaysShort:p.default.arrayOf(p.default.string),firstDayOfWeek:p.default.number.isRequired,onCaptionClick:p.default.func,onDayClick:p.default.func,onDayFocus:p.default.func,onDayKeyDown:p.default.func,onDayMouseEnter:p.default.func,onDayMouseLeave:p.default.func,onDayTouchEnd:p.default.func,onDayTouchStart:p.default.func,onWeekClick:p.default.func},t.default=E},"./node_modules/react-day-picker/lib/src/Navbar.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.NavbarPropTypes=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=n("./node_modules/react/react.js"),d=o(l),u=n("./node_modules/react-day-picker/lib/src/PropTypes.js"),c=o(u),p=n("./node_modules/react-day-picker/lib/src/classNames.js"),f=o(p),m=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),a(t,[{key:"shouldComponentUpdate",value:function(e){return e.labels!==this.props.labels||this.props.showPreviousButton!==e.showPreviousButton||this.props.showNextButton!==e.showNextButton}},{key:"render",value:function(){var e=this.props,t=e.classNames,n=e.className,o=e.showPreviousButton,r=e.showNextButton,i=e.onPreviousClick,s=e.onNextClick,a=e.labels,l=e.dir,u="rtl"===l?s:i,c="rtl"===l?i:s,p=d.default.createElement("span",{tabIndex:"0",role:"button","aria-label":a.previousMonth,key:"previous",className:o?t.navButtonPrev:t.navButtonPrev+" "+t.navButtonInteractionDisabled,onClick:o?function(){return u()}:void 0}),f=d.default.createElement("span",{tabIndex:"0",role:"button","aria-label":a.nextMonth,key:"right",className:r?t.navButtonNext:t.navButtonNext+" "+t.navButtonInteractionDisabled,onClick:r?function(){return c()}:void 0});return d.default.createElement("div",{className:n||t.navBar},"rtl"===l?[f,p]:[p,f])}}]),t}(l.Component);m.defaultProps={classNames:f.default,dir:"ltr",labels:{previousMonth:"Previous Month",nextMonth:"Next Month"},showPreviousButton:!0,showNextButton:!0},t.default=m;var h=t.NavbarPropTypes={classNames:c.default.shape({navBar:c.default.string.isRequired,navButtonPrev:c.default.string.isRequired,navButtonNext:c.default.string.isRequired}),className:c.default.string,showPreviousButton:c.default.bool,showNextButton:c.default.bool,onPreviousClick:c.default.func,onNextClick:c.default.func,dir:c.default.string,labels:c.default.shape({previousMonth:c.default.string.isRequired,nextMonth:c.default.string.isRequired})};m.propTypes=h},"./node_modules/react-day-picker/lib/src/PropTypes.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ModifierPropType=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},i=n("./node_modules/prop-types/index.js"),s=o(i),a=r({localeUtils:s.default.shape({formatMonthTitle:s.default.func,formatWeekdayShort:s.default.func,formatWeekdayLong:s.default.func,getFirstDayOfWeek:s.default.func}),range:s.default.shape({from:s.default.instanceOf(Date),to:s.default.instanceOf(Date)}),after:s.default.shape({after:s.default.instanceOf(Date)}),before:s.default.shape({before:s.default.instanceOf(Date)})},s.default);t.ModifierPropType=s.default.oneOfType([a.after,a.before,a.range,s.default.func,s.default.array]);t.default=a},"./node_modules/react-day-picker/lib/src/Weekday.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.WeekdayPropTypes=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=n("./node_modules/react/react.js"),d=o(l),u=n("./node_modules/react-day-picker/lib/src/PropTypes.js"),c=o(u),p=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),a(t,[{key:"render",value:function(){var e=this.props,t=e.weekday,n=e.className,o=e.weekdaysLong,r=e.weekdaysShort,i=e.localeUtils,s=e.locale,a=void 0;a=o?o[t]:i.formatWeekdayLong(t,s);var l=void 0;return l=r?r[t]:i.formatWeekdayShort(t,s),d.default.createElement("div",{className:n,role:"columnheader"},d.default.createElement("abbr",{title:a},l))}}]),t}(l.PureComponent);t.default=p;var f=t.WeekdayPropTypes={weekday:c.default.number,className:c.default.string,locale:c.default.string,localeUtils:c.default.localeUtils,weekdaysLong:c.default.arrayOf(c.default.string),weekdaysShort:c.default.arrayOf(c.default.string)};p.propTypes=f},"./node_modules/react-day-picker/lib/src/Weekdays.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=n("./node_modules/react/react.js"),d=o(l),u=n("./node_modules/react-day-picker/lib/src/PropTypes.js"),c=o(u),p=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),a(t,[{key:"render",value:function(){for(var e=this.props,t=e.classNames,n=e.firstDayOfWeek,o=e.showWeekNumbers,r=e.weekdaysLong,i=e.weekdaysShort,s=e.locale,a=e.localeUtils,l=e.weekdayElement,u=[],c=0;c<7;c+=1){var p=(c+n)%7,f={key:c,className:t.weekday,weekday:p,weekdaysLong:r,weekdaysShort:i,localeUtils:a,locale:s},m=d.default.isValidElement(l)?d.default.cloneElement(l,f):d.default.createElement(l,f);u.push(m)}return d.default.createElement("div",{className:t.weekdays,role:"rowgroup"},d.default.createElement("div",{className:t.weekdaysRow,role:"row"},o&&d.default.createElement("div",{className:t.weekday}),u))}}]),t}(l.PureComponent);p.propTypes={classNames:c.default.shape({weekday:c.default.string.isRequired,weekdays:c.default.string.isRequired,weekdaysRow:c.default.string.isRequired}).isRequired,firstDayOfWeek:c.default.number.isRequired,weekdaysLong:c.default.arrayOf(c.default.string),weekdaysShort:c.default.arrayOf(c.default.string),showWeekNumbers:c.default.bool,locale:c.default.string.isRequired,localeUtils:c.default.localeUtils.isRequired,weekdayElement:c.default.oneOfType([c.default.element,c.default.func,c.default.instanceOf(d.default.Component)])},t.default=p},"./node_modules/react-day-picker/lib/src/classNames.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={container:"DayPicker",wrapper:"DayPicker-wrapper",interactionDisabled:"DayPicker--interactionDisabled",month:"DayPicker-Month",navBar:"DayPicker-NavBar",navButtonPrev:"DayPicker-NavButton DayPicker-NavButton--prev",navButtonNext:"DayPicker-NavButton DayPicker-NavButton--next",navButtonInteractionDisabled:"DayPicker-NavButton--interactionDisabled",caption:"DayPicker-Caption",weekdays:"DayPicker-Weekdays",weekdaysRow:"DayPicker-WeekdaysRow",weekday:"DayPicker-Weekday",body:"DayPicker-Body",week:"DayPicker-Week",weekNumber:"DayPicker-WeekNumber",day:"DayPicker-Day",footer:"DayPicker-Footer",todayButton:"DayPicker-TodayButton",today:"today",selected:"selected",disabled:"disabled",outside:"outside"}},"./node_modules/react-day-picker/lib/src/keys.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={LEFT:37,UP:38,RIGHT:39,DOWN:40,ENTER:13,SPACE:32,ESC:27}},"./node_modules/react-pure-render/component.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)}t.__esModule=!0;var s=n("./node_modules/react-pure-render/function.js"),a=o(s),l=n("./node_modules/react/react.js"),d=function(e){function t(){r(this,t),null!=e&&e.apply(this,arguments)}return i(t,e),t}(l.Component);t.default=d,d.prototype.shouldComponentUpdate=a.default,e.exports=t.default},"./node_modules/react-virtualized/dist/commonjs/AutoSizer/AutoSizer.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=n("./node_modules/react/react.js"),d=o(l),u=n("./node_modules/react-virtualized/dist/commonjs/vendor/detectElementResize.js"),c=o(u),p=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={height:0,width:0},n._onResize=n._onResize.bind(n),n._setRef=n._setRef.bind(n),n}return s(t,e),a(t,[{key:"componentDidMount",value:function(){this._parentNode=this._autoSizer.parentNode,this._detectElementResize=(0,c.default)(),this._detectElementResize.addResizeListener(this._parentNode,this._onResize),this._onResize()}},{key:"componentWillUnmount",value:function(){this._detectElementResize&&this._detectElementResize.removeResizeListener(this._parentNode,this._onResize)}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.disableHeight,o=e.disableWidth,r=this.state,i=r.height,s=r.width,a={overflow:"visible"};return n||(a.height=0),o||(a.width=0),d.default.createElement("div",{ref:this._setRef,style:a},t({height:i,width:s}))}},{key:"_onResize",value:function(){var e=this.props,t=e.disableHeight,n=e.disableWidth,o=e.onResize,r=this._parentNode.offsetHeight||0,i=this._parentNode.offsetWidth||0,s=window.getComputedStyle(this._parentNode)||{},a=parseInt(s.paddingLeft,10)||0,l=parseInt(s.paddingRight,10)||0,d=parseInt(s.paddingTop,10)||0,u=parseInt(s.paddingBottom,10)||0,c=r-d-u,p=i-a-l;(!t&&this.state.height!==c||!n&&this.state.width!==p)&&(this.setState({height:r-d-u,width:i-a-l}),o({height:r,width:i}))}},{key:"_setRef",value:function(e){this._autoSizer=e}}]),t}(l.PureComponent);p.defaultProps={onResize:function(){}},t.default=p},"./node_modules/react-virtualized/dist/commonjs/AutoSizer/index.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.AutoSizer=t.default=void 0;var r=n("./node_modules/react-virtualized/dist/commonjs/AutoSizer/AutoSizer.js"),i=o(r);t.default=i.default,t.AutoSizer=i.default},"./node_modules/react-virtualized/dist/commonjs/Grid/Grid.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_SCROLLING_RESET_TIME_INTERVAL=void 0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),d=n("./node_modules/react/react.js"),u=o(d),c=n("./node_modules/react-virtualized/node_modules/classnames/index.js"),p=o(c),f=n("./node_modules/react-virtualized/dist/commonjs/Grid/utils/calculateSizeAndPositionDataAndUpdateScrollOffset.js"),m=o(f),h=n("./node_modules/react-virtualized/dist/commonjs/Grid/utils/ScalingCellSizeAndPositionManager.js"),g=o(h),y=n("./node_modules/react-virtualized/dist/commonjs/utils/createCallbackMemoizer.js"),v=o(y),b=n("./node_modules/react-virtualized/dist/commonjs/Grid/utils/defaultOverscanIndicesGetter.js"),_=o(b),x=n("./node_modules/react-virtualized/dist/commonjs/Grid/utils/updateScrollIndexHelper.js"),C=o(x),E=n("./node_modules/react-virtualized/dist/commonjs/Grid/defaultCellRangeRenderer.js"),w=o(E),j=n("./node_modules/dom-helpers/util/scrollbarSize.js"),S=o(j),T=t.DEFAULT_SCROLLING_RESET_TIME_INTERVAL=150,P={OBSERVED:"observed",REQUESTED:"requested"},k=function(e){function t(e,n){r(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));o.state={isScrolling:!1,scrollDirectionHorizontal:b.SCROLL_DIRECTION_FORWARD,scrollDirectionVertical:b.SCROLL_DIRECTION_FORWARD,scrollLeft:0,scrollTop:0},o._onGridRenderedMemoizer=(0,v.default)(),o._onScrollMemoizer=(0,v.default)(!1),o._debounceScrollEndedCallback=o._debounceScrollEndedCallback.bind(o),o._invokeOnGridRenderedHelper=o._invokeOnGridRenderedHelper.bind(o),o._onScroll=o._onScroll.bind(o),o._setScrollingContainerRef=o._setScrollingContainerRef.bind(o),o._updateScrollLeftForScrollToColumn=o._updateScrollLeftForScrollToColumn.bind(o),o._updateScrollTopForScrollToRow=o._updateScrollTopForScrollToRow.bind(o),o._columnWidthGetter=o._wrapSizeGetter(e.columnWidth),o._rowHeightGetter=o._wrapSizeGetter(e.rowHeight),o._deferredInvalidateColumnIndex=null,o._deferredInvalidateRowIndex=null,o._recomputeScrollLeftFlag=!1,o._recomputeScrollTopFlag=!1;var s=e.deferredMeasurementCache,a="undefined"!=typeof s;return o._columnSizeAndPositionManager=new g.default({batchAllCells:a&&!s.hasFixedHeight(),cellCount:e.columnCount,cellSizeGetter:function(e){return o._columnWidthGetter(e)},estimatedCellSize:o._getEstimatedColumnSize(e)}),o._rowSizeAndPositionManager=new g.default({batchAllCells:a&&!s.hasFixedWidth(),cellCount:e.rowCount,cellSizeGetter:function(e){return o._rowHeightGetter(e)},estimatedCellSize:o._getEstimatedRowSize(e)}),o._cellCache={},o._styleCache={},o}return s(t,e),l(t,[{key:"invalidateCellSizeAfterRender",value:function(e){var t=e.columnIndex,n=e.rowIndex;this._deferredInvalidateColumnIndex="number"==typeof this._deferredInvalidateColumnIndex?Math.min(this._deferredInvalidateColumnIndex,t):t,this._deferredInvalidateRowIndex="number"==typeof this._deferredInvalidateRowIndex?Math.min(this._deferredInvalidateRowIndex,n):n}},{key:"measureAllCells",value:function(){var e=this.props,t=e.columnCount,n=e.rowCount;this._columnSizeAndPositionManager.getSizeAndPositionOfCell(t-1),this._rowSizeAndPositionManager.getSizeAndPositionOfCell(n-1)}},{key:"recomputeGridSize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.columnIndex,n=void 0===t?0:t,o=e.rowIndex,r=void 0===o?0:o,i=this.props,s=i.scrollToColumn,a=i.scrollToRow;this._columnSizeAndPositionManager.resetCell(n),this._rowSizeAndPositionManager.resetCell(r),this._recomputeScrollLeftFlag=s>=0&&n<=s,this._recomputeScrollTopFlag=a>=0&&r<=a,this._cellCache={},this._styleCache={},this.forceUpdate()}},{key:"scrollToCell",value:function(e){var t=e.columnIndex,n=e.rowIndex,o=this.props.columnCount,r=this.props;o>1&&this._updateScrollLeftForScrollToColumn(a({},r,{scrollToColumn:t})),this._updateScrollTopForScrollToRow(a({},r,{scrollToRow:n}))}},{key:"componentDidMount",value:function(){var e=this.props,t=e.getScrollbarSize,n=e.scrollLeft,o=e.scrollToColumn,r=e.scrollTop,i=e.scrollToRow;this._handleInvalidatedGridSize(),this._scrollbarSizeMeasured||(this._scrollbarSize=t(),this._scrollbarSizeMeasured=!0,this.setState({})),(n>=0||r>=0)&&this._setScrollPosition({scrollLeft:n,scrollTop:r}),(o>=0||i>=0)&&(this._updateScrollLeftForScrollToColumn(),this._updateScrollTopForScrollToRow()),this._invokeOnGridRenderedHelper(),this._invokeOnScrollMemoizer({scrollLeft:n||0,scrollTop:r||0,totalColumnsWidth:this._columnSizeAndPositionManager.getTotalSize(),totalRowsHeight:this._rowSizeAndPositionManager.getTotalSize()})}},{key:"componentDidUpdate",value:function(e,t){var n=this,o=this.props,r=o.autoHeight,i=o.columnCount,s=o.height,a=o.rowCount,l=o.scrollToAlignment,d=o.scrollToColumn,u=o.scrollToRow,c=o.width,p=this.state,f=p.scrollLeft,m=p.scrollPositionChangeReason,h=p.scrollTop;this._handleInvalidatedGridSize();var g=i>0&&0===e.columnCount||a>0&&0===e.rowCount;if(m===P.REQUESTED&&(f>=0&&(f!==t.scrollLeft&&f!==this._scrollingContainer.scrollLeft||g)&&(this._scrollingContainer.scrollLeft=f),!r&&h>=0&&(h!==t.scrollTop&&h!==this._scrollingContainer.scrollTop||g)&&(this._scrollingContainer.scrollTop=h)),this._recomputeScrollLeftFlag?(this._recomputeScrollLeftFlag=!1,this._updateScrollLeftForScrollToColumn(this.props)):(0,C.default)({cellSizeAndPositionManager:this._columnSizeAndPositionManager,previousCellsCount:e.columnCount,previousCellSize:e.columnWidth,previousScrollToAlignment:e.scrollToAlignment,previousScrollToIndex:e.scrollToColumn,previousSize:e.width,scrollOffset:f,scrollToAlignment:l,scrollToIndex:d,size:c,updateScrollIndexCallback:function(e){return n._updateScrollLeftForScrollToColumn(n.props)}}),this._recomputeScrollTopFlag?(this._recomputeScrollTopFlag=!1,this._updateScrollTopForScrollToRow(this.props)):(0,C.default)({cellSizeAndPositionManager:this._rowSizeAndPositionManager,previousCellsCount:e.rowCount,previousCellSize:e.rowHeight,previousScrollToAlignment:e.scrollToAlignment,previousScrollToIndex:e.scrollToRow,previousSize:e.height,scrollOffset:h,scrollToAlignment:l,scrollToIndex:u,size:s,updateScrollIndexCallback:function(e){return n._updateScrollTopForScrollToRow(n.props)}}),this._invokeOnGridRenderedHelper(),f!==t.scrollLeft||h!==t.scrollTop){var y=this._rowSizeAndPositionManager.getTotalSize(),v=this._columnSizeAndPositionManager.getTotalSize();this._invokeOnScrollMemoizer({scrollLeft:f,scrollTop:h,totalColumnsWidth:v,totalRowsHeight:y})}}},{key:"componentWillMount",value:function(){var e=this.props.getScrollbarSize;this._scrollbarSize=e(),void 0===this._scrollbarSize?(this._scrollbarSizeMeasured=!1,this._scrollbarSize=0):this._scrollbarSizeMeasured=!0,this._calculateChildrenToRender()}},{key:"componentWillUnmount",value:function(){this._disablePointerEventsTimeoutId&&clearTimeout(this._disablePointerEventsTimeoutId)}},{key:"componentWillReceiveProps",value:function(e){var t=this,n=this.state,o=n.scrollLeft,r=n.scrollTop;if(0===e.columnCount&&0!==o||0===e.rowCount&&0!==r)this._setScrollPosition({scrollLeft:0,scrollTop:0});else if(e.scrollLeft!==this.props.scrollLeft||e.scrollTop!==this.props.scrollTop){var i={};null!=e.scrollLeft&&(i.scrollLeft=e.scrollLeft),null!=e.scrollTop&&(i.scrollTop=e.scrollTop),this._setScrollPosition(i)}e.columnWidth===this.props.columnWidth&&e.rowHeight===this.props.rowHeight||(this._styleCache={}),this._columnWidthGetter=this._wrapSizeGetter(e.columnWidth),this._rowHeightGetter=this._wrapSizeGetter(e.rowHeight),this._columnSizeAndPositionManager.configure({cellCount:e.columnCount,estimatedCellSize:this._getEstimatedColumnSize(e)}),this._rowSizeAndPositionManager.configure({cellCount:e.rowCount,estimatedCellSize:this._getEstimatedRowSize(e)});var s=this.props,a=s.columnCount,l=s.rowCount;0!==a&&0!==l||(a=0,l=0),(0,m.default)({cellCount:a,cellSize:this.props.columnWidth,computeMetadataCallback:function(){return t._columnSizeAndPositionManager.resetCell(0)},computeMetadataCallbackProps:e,nextCellsCount:e.columnCount,nextCellSize:e.columnWidth,nextScrollToIndex:e.scrollToColumn,scrollToIndex:this.props.scrollToColumn,updateScrollOffsetForScrollToIndex:function(){return t._updateScrollLeftForScrollToColumn(e,t.state)}}),(0,m.default)({cellCount:l,cellSize:this.props.rowHeight,computeMetadataCallback:function(){return t._rowSizeAndPositionManager.resetCell(0)},computeMetadataCallbackProps:e,nextCellsCount:e.rowCount,nextCellSize:e.rowHeight,nextScrollToIndex:e.scrollToRow,scrollToIndex:this.props.scrollToRow,updateScrollOffsetForScrollToIndex:function(){return t._updateScrollTopForScrollToRow(e,t.state)}})}},{key:"componentWillUpdate",value:function(e,t){this._calculateChildrenToRender(e,t)}},{key:"render",value:function(){var e=this.props,t=e.autoContainerWidth,n=e.autoHeight,o=e.className,r=e.containerStyle,i=e.height,s=e.id,l=e.noContentRenderer,d=e.role,c=e.style,f=e.tabIndex,m=e.width,h=this.state.isScrolling,g={boxSizing:"border-box",direction:"ltr",height:n?"auto":i,position:"relative",width:m,WebkitOverflowScrolling:"touch",willChange:"transform"},y=this._columnSizeAndPositionManager.getTotalSize(),v=this._rowSizeAndPositionManager.getTotalSize(),b=v>i?this._scrollbarSize:0,_=y>m?this._scrollbarSize:0;g.overflowX=y+b<=m?"hidden":"auto",g.overflowY=v+_<=i?"hidden":"auto";var x=this._childrenToDisplay,C=0===x.length&&i>0&&m>0;return u.default.createElement("div",{ref:this._setScrollingContainerRef,"aria-label":this.props["aria-label"],className:(0,p.default)("ReactVirtualized__Grid",o),id:s,onScroll:this._onScroll,role:d,style:a({},g,c),tabIndex:f},x.length>0&&u.default.createElement("div",{className:"ReactVirtualized__Grid__innerScrollContainer",style:a({width:t?"auto":y,height:v,maxWidth:y,maxHeight:v,overflow:"hidden",pointerEvents:h?"none":"",position:"relative"},r)},x),C&&l())}},{key:"_calculateChildrenToRender",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state,n=e.cellRenderer,o=e.cellRangeRenderer,r=e.columnCount,i=e.deferredMeasurementCache,s=e.height,a=e.overscanColumnCount,l=e.overscanIndicesGetter,d=e.overscanRowCount,u=e.rowCount,c=e.width,p=t.isScrolling,f=t.scrollDirectionHorizontal,m=t.scrollDirectionVertical,h=t.scrollLeft,g=t.scrollTop;
if(this._childrenToDisplay=[],s>0&&c>0){var y=this._columnSizeAndPositionManager.getVisibleCellRange({containerSize:c,offset:h}),v=this._rowSizeAndPositionManager.getVisibleCellRange({containerSize:s,offset:g}),b=this._columnSizeAndPositionManager.getOffsetAdjustment({containerSize:c,offset:h}),_=this._rowSizeAndPositionManager.getOffsetAdjustment({containerSize:s,offset:g});this._renderedColumnStartIndex=y.start,this._renderedColumnStopIndex=y.stop,this._renderedRowStartIndex=v.start,this._renderedRowStopIndex=v.stop;var x=l({direction:"horizontal",cellCount:r,overscanCellsCount:a,scrollDirection:f,startIndex:this._renderedColumnStartIndex,stopIndex:this._renderedColumnStopIndex}),C=l({direction:"vertical",cellCount:u,overscanCellsCount:d,scrollDirection:m,startIndex:this._renderedRowStartIndex,stopIndex:this._renderedRowStopIndex});this._columnStartIndex=x.overscanStartIndex,this._columnStopIndex=x.overscanStopIndex,this._rowStartIndex=C.overscanStartIndex,this._rowStopIndex=C.overscanStopIndex,this._childrenToDisplay=o({cellCache:this._cellCache,cellRenderer:n,columnSizeAndPositionManager:this._columnSizeAndPositionManager,columnStartIndex:this._columnStartIndex,columnStopIndex:this._columnStopIndex,deferredMeasurementCache:i,horizontalOffsetAdjustment:b,isScrolling:p,parent:this,rowSizeAndPositionManager:this._rowSizeAndPositionManager,rowStartIndex:this._rowStartIndex,rowStopIndex:this._rowStopIndex,scrollLeft:h,scrollTop:g,styleCache:this._styleCache,verticalOffsetAdjustment:_,visibleColumnIndices:y,visibleRowIndices:v})}}},{key:"_debounceScrollEnded",value:function(){var e=this.props.scrollingResetTimeInterval;this._disablePointerEventsTimeoutId&&clearTimeout(this._disablePointerEventsTimeoutId),this._disablePointerEventsTimeoutId=setTimeout(this._debounceScrollEndedCallback,e)}},{key:"_debounceScrollEndedCallback",value:function(){this._disablePointerEventsTimeoutId=null;var e=this._styleCache;this._cellCache={},this._styleCache={};for(var t=this._rowStartIndex;t<=this._rowStopIndex;t++)for(var n=this._columnStartIndex;n<=this._columnStopIndex;n++){var o=t+"-"+n;this._styleCache[o]=e[o]}this.setState({isScrolling:!1})}},{key:"_getEstimatedColumnSize",value:function(e){return"number"==typeof e.columnWidth?e.columnWidth:e.estimatedColumnSize}},{key:"_getEstimatedRowSize",value:function(e){return"number"==typeof e.rowHeight?e.rowHeight:e.estimatedRowSize}},{key:"_handleInvalidatedGridSize",value:function(){if("number"==typeof this._deferredInvalidateColumnIndex){var e=this._deferredInvalidateColumnIndex,t=this._deferredInvalidateRowIndex;this._deferredInvalidateColumnIndex=null,this._deferredInvalidateRowIndex=null,this.recomputeGridSize({columnIndex:e,rowIndex:t})}}},{key:"_invokeOnGridRenderedHelper",value:function(){var e=this.props.onSectionRendered;this._onGridRenderedMemoizer({callback:e,indices:{columnOverscanStartIndex:this._columnStartIndex,columnOverscanStopIndex:this._columnStopIndex,columnStartIndex:this._renderedColumnStartIndex,columnStopIndex:this._renderedColumnStopIndex,rowOverscanStartIndex:this._rowStartIndex,rowOverscanStopIndex:this._rowStopIndex,rowStartIndex:this._renderedRowStartIndex,rowStopIndex:this._renderedRowStopIndex}})}},{key:"_invokeOnScrollMemoizer",value:function(e){var t=this,n=e.scrollLeft,o=e.scrollTop,r=e.totalColumnsWidth,i=e.totalRowsHeight;this._onScrollMemoizer({callback:function(e){var n=e.scrollLeft,o=e.scrollTop,s=t.props,a=s.height,l=s.onScroll,d=s.width;l({clientHeight:a,clientWidth:d,scrollHeight:i,scrollLeft:n,scrollTop:o,scrollWidth:r})},indices:{scrollLeft:n,scrollTop:o}})}},{key:"_setScrollingContainerRef",value:function(e){this._scrollingContainer=e}},{key:"_setScrollPosition",value:function(e){var t=e.scrollLeft,n=e.scrollTop,o={scrollPositionChangeReason:P.REQUESTED};t>=0&&(o.scrollDirectionHorizontal=t>this.state.scrollLeft?b.SCROLL_DIRECTION_FORWARD:b.SCROLL_DIRECTION_BACKWARD,o.scrollLeft=t),n>=0&&(o.scrollDirectionVertical=n>this.state.scrollTop?b.SCROLL_DIRECTION_FORWARD:b.SCROLL_DIRECTION_BACKWARD,o.scrollTop=n),(t>=0&&t!==this.state.scrollLeft||n>=0&&n!==this.state.scrollTop)&&this.setState(o)}},{key:"_wrapPropertyGetter",value:function(e){return"function"==typeof e?e:function(){return e}}},{key:"_wrapSizeGetter",value:function(e){return this._wrapPropertyGetter(e)}},{key:"_updateScrollLeftForScrollToColumn",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state,n=e.columnCount,o=e.height,r=e.scrollToAlignment,i=e.scrollToColumn,s=e.width,a=t.scrollLeft;if(i>=0&&n>0){var l=Math.max(0,Math.min(n-1,i)),d=this._rowSizeAndPositionManager.getTotalSize(),u=d>o?this._scrollbarSize:0,c=this._columnSizeAndPositionManager.getUpdatedOffsetForIndex({align:r,containerSize:s-u,currentOffset:a,targetIndex:l});a!==c&&this._setScrollPosition({scrollLeft:c})}}},{key:"_updateScrollTopForScrollToRow",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state,n=e.height,o=e.rowCount,r=e.scrollToAlignment,i=e.scrollToRow,s=e.width,a=t.scrollTop;if(i>=0&&o>0){var l=Math.max(0,Math.min(o-1,i)),d=this._columnSizeAndPositionManager.getTotalSize(),u=d>s?this._scrollbarSize:0,c=this._rowSizeAndPositionManager.getUpdatedOffsetForIndex({align:r,containerSize:n-u,currentOffset:a,targetIndex:l});a!==c&&this._setScrollPosition({scrollTop:c})}}},{key:"_onScroll",value:function(e){if(e.target===this._scrollingContainer){var t=this.props,n=t.autoHeight,o=t.height,r=t.width,i=e.target,s=i.scrollLeft,a=i.scrollTop,l=this._scrollbarSize,d=this._rowSizeAndPositionManager.getTotalSize(),u=this._columnSizeAndPositionManager.getTotalSize(),c=Math.min(Math.max(0,u-r+l),s),p=Math.min(Math.max(0,d-o+l),a);if(s===c&&a===p){if(this._debounceScrollEnded(),this.state.scrollLeft!==c||this.state.scrollTop!==p){var f=c>this.state.scrollLeft?b.SCROLL_DIRECTION_FORWARD:b.SCROLL_DIRECTION_BACKWARD,m=p>this.state.scrollTop?b.SCROLL_DIRECTION_FORWARD:b.SCROLL_DIRECTION_BACKWARD,h={isScrolling:!0,scrollDirectionHorizontal:f,scrollDirectionVertical:m,scrollLeft:c,scrollPositionChangeReason:P.OBSERVED};n||(h.scrollTop=p),this.setState(h)}this._invokeOnScrollMemoizer({scrollLeft:c,scrollTop:p,totalColumnsWidth:u,totalRowsHeight:d})}}}}]),t}(d.PureComponent);k.defaultProps={"aria-label":"grid",cellRangeRenderer:w.default,estimatedColumnSize:100,estimatedRowSize:30,getScrollbarSize:S.default,noContentRenderer:function(){return null},onScroll:function(){return null},onSectionRendered:function(){return null},overscanColumnCount:0,overscanIndicesGetter:_.default,overscanRowCount:10,role:"grid",scrollingResetTimeInterval:T,scrollToAlignment:"auto",scrollToColumn:-1,scrollToRow:-1,style:{},tabIndex:0},t.default=k},"./node_modules/react-virtualized/dist/commonjs/Grid/defaultCellRangeRenderer.js":function(e,t,n){"use strict";function o(e){for(var t=e.cellCache,n=e.cellRenderer,o=e.columnSizeAndPositionManager,r=e.columnStartIndex,i=e.columnStopIndex,s=e.deferredMeasurementCache,a=e.horizontalOffsetAdjustment,l=e.isScrolling,d=e.parent,u=e.rowSizeAndPositionManager,c=e.rowStartIndex,p=e.rowStopIndex,f=(e.scrollLeft,e.scrollTop,e.styleCache),m=e.verticalOffsetAdjustment,h=e.visibleColumnIndices,g=e.visibleRowIndices,y="undefined"!=typeof s,v=[],b=o.areOffsetsAdjusted()||u.areOffsetsAdjusted(),_=!l||!b,x=c;x<=p;x++)for(var C=u.getSizeAndPositionOfCell(x),E=r;E<=i;E++){var w=o.getSizeAndPositionOfCell(E),j=E>=h.start&&E<=h.stop&&x>=g.start&&x<=g.stop,S=x+"-"+E,T=void 0;_&&f[S]?T=f[S]:y&&!s.has(x,E)?T={height:"auto",left:0,position:"absolute",top:0,width:"auto"}:(T={height:C.size,left:w.offset+a,position:"absolute",top:C.offset+m,width:w.size},f[S]=T);var P={columnIndex:E,isScrolling:l,isVisible:j,key:S,parent:d,rowIndex:x,style:T},k=void 0;!l||a||m?k=n(P):(t[S]||(t[S]=n(P)),k=t[S]),null!=k&&k!==!1&&v.push(k)}return v}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o},"./node_modules/react-virtualized/dist/commonjs/Grid/index.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.defaultCellRangeRenderer=t.Grid=t.default=void 0;var r=n("./node_modules/react-virtualized/dist/commonjs/Grid/Grid.js"),i=o(r),s=n("./node_modules/react-virtualized/dist/commonjs/Grid/defaultCellRangeRenderer.js"),a=o(s);t.default=i.default,t.Grid=i.default,t.defaultCellRangeRenderer=a.default},"./node_modules/react-virtualized/dist/commonjs/Grid/utils/CellSizeAndPositionManager.js":function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=function(){function e(t){var n=t.batchAllCells,r=void 0!==n&&n,i=t.cellCount,s=t.cellSizeGetter,a=t.estimatedCellSize;o(this,e),this._batchAllCells=r,this._cellSizeGetter=s,this._cellCount=i,this._estimatedCellSize=a,this._cellSizeAndPositionData={},this._lastMeasuredIndex=-1,this._lastBatchedIndex=-1}return r(e,[{key:"areOffsetsAdjusted",value:function(){return!1}},{key:"configure",value:function(e){var t=e.cellCount,n=e.estimatedCellSize;this._cellCount=t,this._estimatedCellSize=n}},{key:"getCellCount",value:function(){return this._cellCount}},{key:"getEstimatedCellSize",value:function(){return this._estimatedCellSize}},{key:"getLastMeasuredIndex",value:function(){return this._lastMeasuredIndex}},{key:"getOffsetAdjustment",value:function(e){e.containerSize,e.offset;return 0}},{key:"getSizeAndPositionOfCell",value:function(e){if(e<0||e>=this._cellCount)throw Error("Requested index "+e+" is outside of range 0.."+this._cellCount);if(e>this._lastMeasuredIndex)for(var t=this.getSizeAndPositionOfLastMeasuredCell(),n=t.offset+t.size,o=this._lastMeasuredIndex+1;o<=e;o++){var r=this._cellSizeGetter({index:o});if(void 0===r||isNaN(r))throw Error("Invalid size returned for cell "+o+" of value "+r);null===r?(this._cellSizeAndPositionData[o]={offset:n,size:0},this._lastBatchedIndex=e):(this._cellSizeAndPositionData[o]={offset:n,size:r},n+=r,this._lastMeasuredIndex=e)}return this._cellSizeAndPositionData[e]}},{key:"getSizeAndPositionOfLastMeasuredCell",value:function(){return this._lastMeasuredIndex>=0?this._cellSizeAndPositionData[this._lastMeasuredIndex]:{offset:0,size:0}}},{key:"getTotalSize",value:function(){var e=this.getSizeAndPositionOfLastMeasuredCell();return e.offset+e.size+(this._cellCount-this._lastMeasuredIndex-1)*this._estimatedCellSize}},{key:"getUpdatedOffsetForIndex",value:function(e){var t=e.align,n=void 0===t?"auto":t,o=e.containerSize,r=e.currentOffset,i=e.targetIndex;if(o<=0)return 0;var s=this.getSizeAndPositionOfCell(i),a=s.offset,l=a-o+s.size,d=void 0;switch(n){case"start":d=a;break;case"end":d=l;break;case"center":d=a-(o-s.size)/2;break;default:d=Math.max(l,Math.min(a,r))}var u=this.getTotalSize();return Math.max(0,Math.min(u-o,d))}},{key:"getVisibleCellRange",value:function(e){if(this._batchAllCells)return{start:0,stop:this._cellCount-1};var t=e.containerSize,n=e.offset,o=this.getTotalSize();if(0===o)return{};var r=n+t,i=this._findNearestCell(n),s=this.getSizeAndPositionOfCell(i);n=s.offset+s.size;for(var a=i;n<r&&a<this._cellCount-1;)a++,n+=this.getSizeAndPositionOfCell(a).size;return{start:i,stop:a}}},{key:"resetCell",value:function(e){this._lastMeasuredIndex=Math.min(this._lastMeasuredIndex,e-1)}},{key:"_binarySearch",value:function(e){for(var t=e.high,n=e.low,o=e.offset,r=void 0,i=void 0;n<=t;){if(r=n+Math.floor((t-n)/2),i=this.getSizeAndPositionOfCell(r).offset,i===o)return r;i<o?n=r+1:i>o&&(t=r-1)}if(n>0)return n-1}},{key:"_exponentialSearch",value:function(e){for(var t=e.index,n=e.offset,o=1;t<this._cellCount&&this.getSizeAndPositionOfCell(t).offset<n;)t+=o,o*=2;return this._binarySearch({high:Math.min(t,this._cellCount-1),low:Math.floor(t/2),offset:n})}},{key:"_findNearestCell",value:function(e){if(isNaN(e))throw Error("Invalid offset "+e+" specified");e=Math.max(0,e);var t=this.getSizeAndPositionOfLastMeasuredCell(),n=Math.max(0,this._lastMeasuredIndex);return t.offset>=e?this._binarySearch({high:n,low:0,offset:e}):this._exponentialSearch({index:n,offset:e})}}]),e}();t.default=i},"./node_modules/react-virtualized/dist/commonjs/Grid/utils/ScalingCellSizeAndPositionManager.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var n={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_MAX_SCROLL_SIZE=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=n("./node_modules/react-virtualized/dist/commonjs/Grid/utils/CellSizeAndPositionManager.js"),l=o(a),d=t.DEFAULT_MAX_SCROLL_SIZE=15e5,u=function(){function e(t){var n=t.maxScrollSize,o=void 0===n?d:n,s=r(t,["maxScrollSize"]);i(this,e),this._cellSizeAndPositionManager=new l.default(s),this._maxScrollSize=o}return s(e,[{key:"areOffsetsAdjusted",value:function(){return this._cellSizeAndPositionManager.getTotalSize()>this._maxScrollSize}},{key:"configure",value:function(e){this._cellSizeAndPositionManager.configure(e)}},{key:"getCellCount",value:function(){return this._cellSizeAndPositionManager.getCellCount()}},{key:"getEstimatedCellSize",value:function(){return this._cellSizeAndPositionManager.getEstimatedCellSize()}},{key:"getLastMeasuredIndex",value:function(){return this._cellSizeAndPositionManager.getLastMeasuredIndex()}},{key:"getOffsetAdjustment",value:function(e){var t=e.containerSize,n=e.offset,o=this._cellSizeAndPositionManager.getTotalSize(),r=this.getTotalSize(),i=this._getOffsetPercentage({containerSize:t,offset:n,totalSize:r});return Math.round(i*(r-o))}},{key:"getSizeAndPositionOfCell",value:function(e){return this._cellSizeAndPositionManager.getSizeAndPositionOfCell(e)}},{key:"getSizeAndPositionOfLastMeasuredCell",value:function(){return this._cellSizeAndPositionManager.getSizeAndPositionOfLastMeasuredCell()}},{key:"getTotalSize",value:function(){return Math.min(this._maxScrollSize,this._cellSizeAndPositionManager.getTotalSize())}},{key:"getUpdatedOffsetForIndex",value:function(e){var t=e.align,n=void 0===t?"auto":t,o=e.containerSize,r=e.currentOffset,i=e.targetIndex,s=e.totalSize;r=this._safeOffsetToOffset({containerSize:o,offset:r});var a=this._cellSizeAndPositionManager.getUpdatedOffsetForIndex({align:n,containerSize:o,currentOffset:r,targetIndex:i,totalSize:s});return this._offsetToSafeOffset({containerSize:o,offset:a})}},{key:"getVisibleCellRange",value:function(e){var t=e.containerSize,n=e.offset;return n=this._safeOffsetToOffset({containerSize:t,offset:n}),this._cellSizeAndPositionManager.getVisibleCellRange({containerSize:t,offset:n})}},{key:"resetCell",value:function(e){this._cellSizeAndPositionManager.resetCell(e)}},{key:"_getOffsetPercentage",value:function(e){var t=e.containerSize,n=e.offset,o=e.totalSize;return o<=t?0:n/(o-t)}},{key:"_offsetToSafeOffset",value:function(e){var t=e.containerSize,n=e.offset,o=this._cellSizeAndPositionManager.getTotalSize(),r=this.getTotalSize();if(o===r)return n;var i=this._getOffsetPercentage({containerSize:t,offset:n,totalSize:o});return Math.round(i*(r-t))}},{key:"_safeOffsetToOffset",value:function(e){var t=e.containerSize,n=e.offset,o=this._cellSizeAndPositionManager.getTotalSize(),r=this.getTotalSize();if(o===r)return n;var i=this._getOffsetPercentage({containerSize:t,offset:n,totalSize:r});return Math.round(i*(o-t))}}]),e}();t.default=u},"./node_modules/react-virtualized/dist/commonjs/Grid/utils/calculateSizeAndPositionDataAndUpdateScrollOffset.js":function(e,t,n){"use strict";function o(e){var t=e.cellCount,n=e.cellSize,o=e.computeMetadataCallback,r=e.computeMetadataCallbackProps,i=e.nextCellsCount,s=e.nextCellSize,a=e.nextScrollToIndex,l=e.scrollToIndex,d=e.updateScrollOffsetForScrollToIndex;t===i&&("number"!=typeof n&&"number"!=typeof s||n===s)||(o(r),l>=0&&l===a&&d())}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o},"./node_modules/react-virtualized/dist/commonjs/Grid/utils/defaultOverscanIndicesGetter.js":function(e,t,n){"use strict";function o(e){var t=(e.direction,e.cellCount),n=e.overscanCellsCount,o=e.scrollDirection,s=e.startIndex,a=e.stopIndex,l=void 0,d=void 0;switch(o){case i:l=s,d=a+n;break;case r:l=s-n,d=a}return{overscanStartIndex:Math.max(0,l),overscanStopIndex:Math.min(t-1,d)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var r=t.SCROLL_DIRECTION_BACKWARD=-1,i=t.SCROLL_DIRECTION_FORWARD=1;t.SCROLL_DIRECTION_HORIZONTAL="horizontal",t.SCROLL_DIRECTION_VERTICAL="vertical"},"./node_modules/react-virtualized/dist/commonjs/Grid/utils/updateScrollIndexHelper.js":function(e,t,n){"use strict";function o(e){var t=e.cellSize,n=e.cellSizeAndPositionManager,o=e.previousCellsCount,r=e.previousCellSize,i=e.previousScrollToAlignment,s=e.previousScrollToIndex,a=e.previousSize,l=e.scrollOffset,d=e.scrollToAlignment,u=e.scrollToIndex,c=e.size,p=e.updateScrollIndexCallback,f=n.getCellCount(),m=u>=0&&u<f,h=c!==a||!r||"number"==typeof t&&t!==r;m&&(h||d!==i||u!==s)?p(u):!m&&f>0&&(c<a||f<o)&&l>n.getTotalSize()-c&&p(f-1)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o},"./node_modules/react-virtualized/dist/commonjs/List/List.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var n={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},d=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=n("./node_modules/react-virtualized/dist/commonjs/Grid/index.js"),c=o(u),p=n("./node_modules/react/react.js"),f=o(p),m=n("./node_modules/react-virtualized/node_modules/classnames/index.js"),h=o(m),g=function(e){function t(e,n){i(this,t);var o=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return o._cellRenderer=o._cellRenderer.bind(o),o._onScroll=o._onScroll.bind(o),o._onSectionRendered=o._onSectionRendered.bind(o),o._setRef=o._setRef.bind(o),o}return a(t,e),d(t,[{key:"forceUpdateGrid",value:function(){this.Grid.forceUpdate()}},{key:"measureAllRows",value:function(){this.Grid.measureAllCells()}},{key:"recomputeRowHeights",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.Grid.recomputeGridSize({rowIndex:e})}},{key:"scrollToRow",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.Grid.scrollToCell({columnIndex:0,rowIndex:e})}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.noRowsRenderer,o=e.scrollToIndex,r=e.width,i=(0,h.default)("ReactVirtualized__List",t);return f.default.createElement(c.default,l({},this.props,{autoContainerWidth:!0,cellRenderer:this._cellRenderer,className:i,columnWidth:r,columnCount:1,noContentRenderer:n,onScroll:this._onScroll,onSectionRendered:this._onSectionRendered,ref:this._setRef,scrollToRow:o}))}},{key:"_cellRenderer",value:function(e){var t=e.rowIndex,n=e.style,o=r(e,["rowIndex","style"]),i=this.props.rowRenderer,s=Object.getOwnPropertyDescriptor(n,"width"),a=s.writable;return a&&(n.width="100%"),i(l({index:t,style:n},o))}},{key:"_setRef",value:function(e){this.Grid=e}},{key:"_onScroll",value:function(e){var t=e.clientHeight,n=e.scrollHeight,o=e.scrollTop,r=this.props.onScroll;r({clientHeight:t,scrollHeight:n,scrollTop:o})}},{key:"_onSectionRendered",value:function(e){var t=e.rowOverscanStartIndex,n=e.rowOverscanStopIndex,o=e.rowStartIndex,r=e.rowStopIndex,i=this.props.onRowsRendered;i({overscanStartIndex:t,overscanStopIndex:n,startIndex:o,stopIndex:r})}}]),t}(p.PureComponent);g.defaultProps={estimatedRowSize:30,noRowsRenderer:function(){return null},onRowsRendered:function(){return null},onScroll:function(){return null},overscanRowCount:10,scrollToAlignment:"auto",scrollToIndex:-1,style:{}},t.default=g},"./node_modules/react-virtualized/dist/commonjs/List/index.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.List=t.default=void 0;var r=n("./node_modules/react-virtualized/dist/commonjs/List/List.js"),i=o(r);t.default=i.default,t.List=i.default},"./node_modules/react-virtualized/dist/commonjs/utils/createCallbackMemoizer.js":function(e,t,n){"use strict";function o(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t={};return function(n){var o=n.callback,r=n.indices,i=Object.keys(r),s=!e||i.every(function(e){var t=r[e];return Array.isArray(t)?t.length>0:t>=0}),a=i.length!==Object.keys(t).length||i.some(function(e){var n=t[e],o=r[e];return Array.isArray(o)?n.join(",")!==o.join(","):n!==o});t=r,s&&a&&o(r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o},"./node_modules/react-virtualized/dist/commonjs/vendor/detectElementResize.js":function(e,t,n){"use strict";function o(){var e;e="undefined"!=typeof window?window:"undefined"!=typeof self?self:this;var t="undefined"!=typeof document&&document.attachEvent;if(!t){var n=function(){var t=e.requestAnimationFrame||e.mozRequestAnimationFrame||e.webkitRequestAnimationFrame||function(t){return e.setTimeout(t,20)};return function(e){return t(e)}}(),o=function(){var t=e.cancelAnimationFrame||e.mozCancelAnimationFrame||e.webkitCancelAnimationFrame||e.clearTimeout;return function(e){return t(e)}}(),r=function(e){var t=e.__resizeTriggers__,n=t.firstElementChild,o=t.lastElementChild,r=n.firstElementChild;o.scrollLeft=o.scrollWidth,o.scrollTop=o.scrollHeight,r.style.width=n.offsetWidth+1+"px",r.style.height=n.offsetHeight+1+"px",n.scrollLeft=n.scrollWidth,n.scrollTop=n.scrollHeight},i=function(e){return e.offsetWidth!=e.__resizeLast__.width||e.offsetHeight!=e.__resizeLast__.height},s=function(e){if(!(e.target.className.indexOf("contract-trigger")<0&&e.target.className.indexOf("expand-trigger")<0)){var t=this;r(this),this.__resizeRAF__&&o(this.__resizeRAF__),this.__resizeRAF__=n(function(){i(t)&&(t.__resizeLast__.width=t.offsetWidth,t.__resizeLast__.height=t.offsetHeight,t.__resizeListeners__.forEach(function(n){n.call(t,e)}))})}},a=!1,l="animation",d="",u="animationstart",c="Webkit Moz O ms".split(" "),p="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),f="",m=document.createElement("fakeelement");if(void 0!==m.style.animationName&&(a=!0),a===!1)for(var h=0;h<c.length;h++)if(void 0!==m.style[c[h]+"AnimationName"]){f=c[h],l=f+"Animation",d="-"+f.toLowerCase()+"-",u=p[h],a=!0;break}var g="resizeanim",y="@"+d+"keyframes "+g+" { from { opacity: 0; } to { opacity: 0; } } ",v=d+"animation: 1ms "+g+"; "}var b=function(){if(!document.getElementById("detectElementResize")){var e=(y?y:"")+".resize-triggers { "+(v?v:"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; z-index: -1; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.id="detectElementResize",n.type="text/css",n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e)),t.appendChild(n)}},_=function(n,o){if(t)n.attachEvent("onresize",o);else{if(!n.__resizeTriggers__){var i=e.getComputedStyle(n);i&&"static"==i.position&&(n.style.position="relative"),b(),n.__resizeLast__={},n.__resizeListeners__=[],(n.__resizeTriggers__=document.createElement("div")).className="resize-triggers",n.__resizeTriggers__.innerHTML='<div class="expand-trigger"><div></div></div><div class="contract-trigger"></div>',n.appendChild(n.__resizeTriggers__),r(n),n.addEventListener("scroll",s,!0),u&&(n.__resizeTriggers__.__animationListener__=function(e){e.animationName==g&&r(n)},n.__resizeTriggers__.addEventListener(u,n.__resizeTriggers__.__animationListener__))}n.__resizeListeners__.push(o)}},x=function(e,n){if(t)e.detachEvent("onresize",n);else if(e.__resizeListeners__.splice(e.__resizeListeners__.indexOf(n),1),!e.__resizeListeners__.length){e.removeEventListener("scroll",s,!0),e.__resizeTriggers__.__animationListener__&&(e.__resizeTriggers__.removeEventListener(u,e.__resizeTriggers__.__animationListener__),e.__resizeTriggers__.__animationListener__=null);try{e.__resizeTriggers__=!e.removeChild(e.__resizeTriggers__)}catch(e){}}};return{addResizeListener:_,removeResizeListener:x}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o},"./node_modules/react-virtualized/node_modules/classnames/index.js":function(e,t,n){var o,r;!function(){"use strict";function n(){for(var e=[],t=0;t<arguments.length;t++){var o=arguments[t];if(o){var r=typeof o;if("string"===r||"number"===r)e.push(o);else if(Array.isArray(o))e.push(n.apply(null,o));else if("object"===r)for(var s in o)i.call(o,s)&&o[s]&&e.push(s)}}return e.join(" ")}var i={}.hasOwnProperty;"undefined"!=typeof e&&e.exports?e.exports=n:(o=[],r=function(){return n}.apply(t,o),!(void 0!==r&&(e.exports=r)))}()},"./node_modules/tinymce/plugins/colorpicker/plugin.js":function(e,t){(function(){!function(){var e={},t=function(t){for(var n=e[t],r=n.deps,i=n.defn,s=r.length,a=new Array(s),l=0;l<s;++l)a[l]=o(r[l]);var d=i.apply(null,a);if(void 0===d)throw"module ["+t+"] returned undefined";n.instance=d},n=function(t,n,o){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===o)throw"no definition function for "+t;e[t]={deps:n,defn:o,instance:void 0}},o=function(n){var o=e[n];if(void 0===o)throw"module ["+n+"] was undefined";return void 0===o.instance&&t(n),o.instance},r=function(e,t){for(var n=e.length,r=new Array(n),i=0;i<n;++i)r.push(o(e[i]));t.apply(null,t)},i={};i.bolt={module:{api:{define:n,require:r,demand:o}}};var s=n,a=function(e,t){s(e,[],function(){return t})};a("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),s("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")}),s("tinymce.core.util.Color",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Color")}),s("tinymce.plugins.colorpicker.Plugin",["tinymce.core.PluginManager","tinymce.core.util.Color"],function(e,t){return e.add("colorpicker",function(e){function n(n,o){function r(e){var n=new t(e),o=n.toRgb();s.fromJSON({r:o.r,g:o.g,b:o.b,hex:n.toHex().substr(1)}),i(n.toHex())}function i(e){s.find("#preview")[0].getEl().style.background=e}var s=e.windowManager.open({title:"Color",items:{type:"container",layout:"flex",direction:"row",align:"stretch",padding:5,spacing:10,items:[{type:"colorpicker",value:o,onchange:function(){var e=this.rgb();s&&(s.find("#r").value(e.r),s.find("#g").value(e.g),s.find("#b").value(e.b),s.find("#hex").value(this.value().substr(1)),i(this.value()))}},{type:"form",padding:0,labelGap:5,defaults:{type:"textbox",size:7,value:"0",flex:1,spellcheck:!1,onchange:function(){var e,t,n=s.find("colorpicker")[0];return e=this.name(),t=this.value(),"hex"==e?(t="#"+t,r(t),void n.value(t)):(t={r:s.find("#r").value(),g:s.find("#g").value(),b:s.find("#b").value()},n.value(t),void r(t))}},items:[{name:"r",label:"R",autofocus:1},{name:"g",label:"G"},{name:"b",label:"B"},{name:"hex",label:"#",value:"000000"},{name:"preview",type:"container",border:1}]}]},onSubmit:function(){n("#"+this.toJSON().hex)}});r(o)}e.settings.color_picker_callback||(e.settings.color_picker_callback=n)}),function(){}}),o("tinymce.plugins.colorpicker.Plugin")()}()}).call(window)},"./node_modules/tinymce/plugins/directionality/plugin.js":function(e,t){(function(){!function(){var e={},t=function(t){for(var n=e[t],r=n.deps,i=n.defn,s=r.length,a=new Array(s),l=0;l<s;++l)a[l]=o(r[l]);var d=i.apply(null,a);if(void 0===d)throw"module ["+t+"] returned undefined";n.instance=d},n=function(t,n,o){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===o)throw"no definition function for "+t;e[t]={deps:n,defn:o,instance:void 0}},o=function(n){var o=e[n];if(void 0===o)throw"module ["+n+"] was undefined";return void 0===o.instance&&t(n),o.instance},r=function(e,t){for(var n=e.length,r=new Array(n),i=0;i<n;++i)r.push(o(e[i]));t.apply(null,t)},i={};i.bolt={module:{api:{define:n,require:r,demand:o}}};var s=n,a=function(e,t){s(e,[],function(){return t})};a("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),s("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")}),s("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Tools")}),s("tinymce.plugins.directionality.Plugin",["tinymce.core.PluginManager","tinymce.core.util.Tools"],function(e,t){return e.add("directionality",function(e){function n(n){var o,r=e.dom,i=e.selection.getSelectedBlocks();i.length&&(o=r.getAttrib(i[0],"dir"),t.each(i,function(e){r.getParent(e.parentNode,"*[dir='"+n+"']",r.getRoot())||(o!=n?r.setAttrib(e,"dir",n):r.setAttrib(e,"dir",null))}),e.nodeChanged())}function o(e){var n=[];return t.each("h1 h2 h3 h4 h5 h6 div p".split(" "),function(t){n.push(t+"[dir="+e+"]")}),n.join(",")}e.addCommand("mceDirectionLTR",function(){n("ltr")}),e.addCommand("mceDirectionRTL",function(){n("rtl")}),e.addButton("ltr",{title:"Left to right",cmd:"mceDirectionLTR",stateSelector:o("ltr")}),e.addButton("rtl",{title:"Right to left",cmd:"mceDirectionRTL",stateSelector:o("rtl")})}),function(){}}),o("tinymce.plugins.directionality.Plugin")()}()}).call(window)},"./node_modules/tinymce/plugins/hr/plugin.js":function(e,t){(function(){!function(){var e={},t=function(t){for(var n=e[t],r=n.deps,i=n.defn,s=r.length,a=new Array(s),l=0;l<s;++l)a[l]=o(r[l]);var d=i.apply(null,a);if(void 0===d)throw"module ["+t+"] returned undefined";n.instance=d},n=function(t,n,o){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===o)throw"no definition function for "+t;e[t]={deps:n,defn:o,instance:void 0}},o=function(n){var o=e[n];if(void 0===o)throw"module ["+n+"] was undefined";return void 0===o.instance&&t(n),o.instance},r=function(e,t){for(var n=e.length,r=new Array(n),i=0;i<n;++i)r.push(o(e[i]));t.apply(null,t)},i={};i.bolt={module:{api:{define:n,require:r,demand:o}}};var s=n,a=function(e,t){s(e,[],function(){return t})};a("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),s("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){
return e("tinymce.PluginManager")}),s("tinymce.plugins.hr.Plugin",["tinymce.core.PluginManager"],function(e){return e.add("hr",function(e){e.addCommand("InsertHorizontalRule",function(){e.execCommand("mceInsertContent",!1,"<hr />")}),e.addButton("hr",{icon:"hr",tooltip:"Horizontal line",cmd:"InsertHorizontalRule"}),e.addMenuItem("hr",{icon:"hr",text:"Horizontal line",cmd:"InsertHorizontalRule",context:"insert"})}),function(){}}),o("tinymce.plugins.hr.Plugin")()}()}).call(window)},"./node_modules/tinymce/plugins/lists/plugin.js":function(e,t){(function(){!function(){var e={},t=function(t){for(var n=e[t],r=n.deps,i=n.defn,s=r.length,a=new Array(s),l=0;l<s;++l)a[l]=o(r[l]);var d=i.apply(null,a);if(void 0===d)throw"module ["+t+"] returned undefined";n.instance=d},n=function(t,n,o){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===o)throw"no definition function for "+t;e[t]={deps:n,defn:o,instance:void 0}},o=function(n){var o=e[n];if(void 0===o)throw"module ["+n+"] was undefined";return void 0===o.instance&&t(n),o.instance},r=function(e,t){for(var n=e.length,r=new Array(n),i=0;i<n;++i)r.push(o(e[i]));t.apply(null,t)},i={};i.bolt={module:{api:{define:n,require:r,demand:o}}};var s=n,a=function(e,t){s(e,[],function(){return t})};a("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),s("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")}),s("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Tools")}),s("tinymce.core.util.VK",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.VK")}),s("tinymce.core.dom.DOMUtils",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.dom.DOMUtils")}),s("tinymce.plugins.lists.core.NodeType",[],function(){var e=function(e){return e&&3===e.nodeType},t=function(e){return e&&/^(OL|UL|DL)$/.test(e.nodeName)},n=function(e){return e&&/^(LI|DT|DD)$/.test(e.nodeName)},o=function(e){return e&&"BR"===e.nodeName},r=function(e){return e.parentNode.firstChild===e},i=function(e){return e.parentNode.lastChild===e},s=function(e,t){return t&&!!e.schema.getTextBlockElements()[t.nodeName]},a=function(e,t){return!!o(t)&&!(!e.isBlock(t.nextSibling)||o(t.previousSibling))},l=function(e,t,n){var o=e.isEmpty(t);return!(n&&e.select("span[data-mce-type=bookmark]",t).length>0)&&o},d=function(e,t){return e.isChildOf(t,e.getRoot())};return{isTextNode:e,isListNode:t,isListItemNode:n,isBr:o,isFirstChild:r,isLastChild:i,isTextBlock:s,isBogusBr:a,isEmpty:l,isChildOfBody:d}}),s("tinymce.core.dom.RangeUtils",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.dom.RangeUtils")}),s("tinymce.plugins.lists.core.Range",["tinymce.core.dom.RangeUtils","tinymce.plugins.lists.core.NodeType"],function(e,t){var n=function(n,o){var r=e.getNode(n,o);if(t.isListItemNode(n)&&t.isTextNode(r)){var i=o>=n.childNodes.length?r.data.length:0;return{container:r,offset:i}}return{container:n,offset:o}},o=function(e){var t=e.cloneRange(),o=n(e.startContainer,e.startOffset);t.setStart(o.container,o.offset);var r=n(e.endContainer,e.endOffset);return t.setEnd(r.container,r.offset),t};return{getNormalizedEndPoint:n,normalizeRange:o}}),s("tinymce.plugins.lists.core.Bookmark",["tinymce.core.dom.DOMUtils","tinymce.plugins.lists.core.NodeType","tinymce.plugins.lists.core.Range"],function(e,t,n){var o=e.DOM,r=function(e){var t={},n=function(n){var r,i,s;i=e[n?"startContainer":"endContainer"],s=e[n?"startOffset":"endOffset"],1===i.nodeType&&(r=o.create("span",{"data-mce-type":"bookmark"}),i.hasChildNodes()?(s=Math.min(s,i.childNodes.length-1),n?i.insertBefore(r,i.childNodes[s]):o.insertAfter(r,i.childNodes[s])):i.appendChild(r),i=r,s=0),t[n?"startContainer":"endContainer"]=i,t[n?"startOffset":"endOffset"]=s};return n(!0),e.collapsed||n(),t},i=function(e){function t(t){var n,r,i,s=function(e){for(var t=e.parentNode.firstChild,n=0;t;){if(t===e)return n;1===t.nodeType&&"bookmark"===t.getAttribute("data-mce-type")||n++,t=t.nextSibling}return-1};n=i=e[t?"startContainer":"endContainer"],r=e[t?"startOffset":"endOffset"],n&&(1===n.nodeType&&(r=s(n),n=n.parentNode,o.remove(i)),e[t?"startContainer":"endContainer"]=n,e[t?"startOffset":"endOffset"]=r)}t(!0),t();var r=o.createRng();return r.setStart(e.startContainer,e.startOffset),e.endContainer&&r.setEnd(e.endContainer,e.endOffset),n.normalizeRange(r)};return{createBookmark:r,resolveBookmark:i}}),s("tinymce.plugins.lists.core.Selection",["tinymce.core.util.Tools","tinymce.plugins.lists.core.NodeType"],function(e,t){var n=function(n){return e.grep(n.selection.getSelectedBlocks(),function(e){return t.isListItemNode(e)})};return{getSelectedListItems:n}}),s("tinymce.plugins.lists.actions.Indent",["tinymce.core.dom.DOMUtils","tinymce.plugins.lists.core.Bookmark","tinymce.plugins.lists.core.NodeType","tinymce.plugins.lists.core.Selection"],function(e,t,n,o){var r=e.DOM,i=function(e,t){var o;if(n.isListNode(e)){for(;o=e.firstChild;)t.appendChild(o);r.remove(e)}},s=function(e){var t,o,s;return"DT"===e.nodeName?(r.rename(e,"DD"),!0):(t=e.previousSibling,t&&n.isListNode(t)?(t.appendChild(e),!0):t&&"LI"===t.nodeName&&n.isListNode(t.lastChild)?(t.lastChild.appendChild(e),i(e.lastChild,t.lastChild),!0):(t=e.nextSibling,t&&n.isListNode(t)?(t.insertBefore(e,t.firstChild),!0):(t=e.previousSibling,!(!t||"LI"!==t.nodeName)&&(o=r.create(e.parentNode.nodeName),s=r.getStyle(e.parentNode,"listStyleType"),s&&r.setStyle(o,"listStyleType",s),t.appendChild(o),o.appendChild(e),i(e.lastChild,o),!0))))},a=function(e){var n=o.getSelectedListItems(e);if(n.length){for(var r=t.createBookmark(e.selection.getRng(!0)),i=0;i<n.length&&(s(n[i])||0!==i);i++);return e.selection.setRng(t.resolveBookmark(r)),e.nodeChanged(),!0}};return{indentSelection:a}}),s("tinymce.plugins.lists.core.NormalizeLists",["tinymce.core.dom.DOMUtils","tinymce.core.util.Tools","tinymce.plugins.lists.core.NodeType"],function(e,t,n){var o=e.DOM,r=function(e,t){var r,i=t.parentNode;"LI"===i.nodeName&&i.firstChild===t&&(r=i.previousSibling,r&&"LI"===r.nodeName?(r.appendChild(t),n.isEmpty(e,i)&&o.remove(i)):o.setStyle(i,"listStyleType","none")),n.isListNode(i)&&(r=i.previousSibling,r&&"LI"===r.nodeName&&r.appendChild(t))},i=function(e,n){t.each(t.grep(e.select("ol,ul",n)),function(t){r(e,t)})};return{normalizeList:r,normalizeLists:i}}),s("tinymce.core.Env",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.Env")}),s("tinymce.plugins.lists.core.TextBlock",["tinymce.core.dom.DOMUtils","tinymce.core.Env"],function(e,t){var n=e.DOM,o=function(e,o,r){var i,s,a,l=n.createFragment(),d=e.schema.getBlockElements();if(e.settings.forced_root_block&&(r=r||e.settings.forced_root_block),r&&(s=n.create(r),s.tagName===e.settings.forced_root_block&&n.setAttribs(s,e.settings.forced_root_block_attrs),l.appendChild(s)),o)for(;i=o.firstChild;){var u=i.nodeName;a||"SPAN"===u&&"bookmark"===i.getAttribute("data-mce-type")||(a=!0),d[u]?(l.appendChild(i),s=null):r?(s||(s=n.create(r),l.appendChild(s)),s.appendChild(i)):l.appendChild(i)}return e.settings.forced_root_block?a||t.ie&&!(t.ie>10)||s.appendChild(n.create("br",{"data-mce-bogus":"1"})):l.appendChild(n.create("br")),l};return{createNewTextBlock:o}}),s("tinymce.plugins.lists.core.SplitList",["tinymce.core.dom.DOMUtils","tinymce.plugins.lists.core.NodeType","tinymce.plugins.lists.core.TextBlock","tinymce.core.util.Tools"],function(e,t,n,o){var r=e.DOM,i=function(e,i,s,a){var l,d,u,c,p=function(e){o.each(u,function(t){e.parentNode.insertBefore(t,s.parentNode)}),r.remove(e)};for(u=r.select('span[data-mce-type="bookmark"]',i),a=a||n.createNewTextBlock(e,s),l=r.createRng(),l.setStartAfter(s),l.setEndAfter(i),d=l.extractContents(),c=d.firstChild;c;c=c.firstChild)if("LI"===c.nodeName&&e.dom.isEmpty(c)){r.remove(c);break}e.dom.isEmpty(d)||r.insertAfter(d,i),r.insertAfter(a,i),t.isEmpty(e.dom,s.parentNode)&&p(s.parentNode),r.remove(s),t.isEmpty(e.dom,i)&&r.remove(i)};return{splitList:i}}),s("tinymce.plugins.lists.actions.Outdent",["tinymce.core.dom.DOMUtils","tinymce.plugins.lists.core.Bookmark","tinymce.plugins.lists.core.NodeType","tinymce.plugins.lists.core.NormalizeLists","tinymce.plugins.lists.core.Selection","tinymce.plugins.lists.core.SplitList","tinymce.plugins.lists.core.TextBlock"],function(e,t,n,o,r,i,s){var a=e.DOM,l=function(e,t){n.isEmpty(e,t)&&a.remove(t)},d=function(e,t){var r,d=t.parentNode,u=d.parentNode;return d===e.getBody()||("DD"===t.nodeName?(a.rename(t,"DT"),!0):n.isFirstChild(t)&&n.isLastChild(t)?("LI"===u.nodeName?(a.insertAfter(t,u),l(e.dom,u),a.remove(d)):n.isListNode(u)?a.remove(d,!0):(u.insertBefore(s.createNewTextBlock(e,t),d),a.remove(d)),!0):n.isFirstChild(t)?("LI"===u.nodeName?(a.insertAfter(t,u),t.appendChild(d),l(e.dom,u)):n.isListNode(u)?u.insertBefore(t,d):(u.insertBefore(s.createNewTextBlock(e,t),d),a.remove(t)),!0):n.isLastChild(t)?("LI"===u.nodeName?a.insertAfter(t,u):n.isListNode(u)?a.insertAfter(t,d):(a.insertAfter(s.createNewTextBlock(e,t),d),a.remove(t)),!0):("LI"===u.nodeName?(d=u,r=s.createNewTextBlock(e,t,"LI")):r=n.isListNode(u)?s.createNewTextBlock(e,t,"LI"):s.createNewTextBlock(e,t),i.splitList(e,d,t,r),o.normalizeLists(e.dom,d.parentNode),!0))},u=function(e){var n=r.getSelectedListItems(e);if(n.length){var o,i,s=t.createBookmark(e.selection.getRng(!0)),a=e.getBody();for(o=n.length;o--;)for(var l=n[o].parentNode;l&&l!==a;){for(i=n.length;i--;)if(n[i]===l){n.splice(o,1);break}l=l.parentNode}for(o=0;o<n.length&&(d(e,n[o])||0!==o);o++);return e.selection.setRng(t.resolveBookmark(s)),e.nodeChanged(),!0}};return{outdent:d,outdentSelection:u}}),s("tinymce.core.dom.BookmarkManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.dom.BookmarkManager")}),s("tinymce.plugins.lists.actions.ToggleList",["tinymce.core.dom.BookmarkManager","tinymce.core.util.Tools","tinymce.plugins.lists.actions.Outdent","tinymce.plugins.lists.core.Bookmark","tinymce.plugins.lists.core.NodeType","tinymce.plugins.lists.core.NormalizeLists","tinymce.plugins.lists.core.Selection","tinymce.plugins.lists.core.SplitList"],function(e,t,n,o,r,i,s,a){var l=function(e,t,n){var o=n["list-style-type"]?n["list-style-type"]:null;e.setStyle(t,"list-style-type",o)},d=function(e,n){t.each(n,function(t,n){e.setAttribute(n,t)})},u=function(e,n,o){d(n,o["list-attributes"]),t.each(e.select("li",n),function(e){d(e,o["list-item-attributes"])})},c=function(e,t,n){l(e,t,n),u(e,t,n)},p=function(e,t,n){var o,i,s=e.getBody();for(o=t[n?"startContainer":"endContainer"],i=t[n?"startOffset":"endOffset"],1===o.nodeType&&(o=o.childNodes[Math.min(i,o.childNodes.length-1)]||o);o.parentNode!==s;){if(r.isTextBlock(e,o))return o;if(/^(TD|TH)$/.test(o.parentNode.nodeName))return o;o=o.parentNode}return o},f=function(n,o){for(var i,s=[],a=n.getBody(),l=n.dom,d=p(n,o,!0),u=p(n,o,!1),c=[],f=d;f&&(c.push(f),f!==u);f=f.nextSibling);return t.each(c,function(t){if(r.isTextBlock(n,t))return s.push(t),void(i=null);if(l.isBlock(t)||r.isBr(t))return r.isBr(t)&&l.remove(t),void(i=null);var o=t.nextSibling;return e.isBookmarkNode(t)&&(r.isTextBlock(n,o)||!o&&t.parentNode===a)?void(i=null):(i||(i=l.create("p"),t.parentNode.insertBefore(i,t),s.push(i)),void i.appendChild(t))}),s},m=function(e,n,i){var s,a=e.selection.getRng(!0),l="LI",d=e.dom;i=i?i:{},"false"!==d.getContentEditable(e.selection.getNode())&&(n=n.toUpperCase(),"DL"===n&&(l="DT"),s=o.createBookmark(a),t.each(f(e,a),function(t){var o,s,a=function(e){var t=d.getStyle(e,"list-style-type"),n=i?i["list-style-type"]:"";return n=null===n?"":n,t===n};s=t.previousSibling,s&&r.isListNode(s)&&s.nodeName===n&&a(s)?(o=s,t=d.rename(t,l),s.appendChild(t)):(o=d.create(n),t.parentNode.insertBefore(o,t),o.appendChild(t),t=d.rename(t,l)),c(d,o,i),_(e.dom,o)}),e.selection.setRng(o.resolveBookmark(s)))},h=function(e){var l=o.createBookmark(e.selection.getRng(!0)),d=e.getBody(),u=s.getSelectedListItems(e),c=t.grep(u,function(t){return e.dom.isEmpty(t)});u=t.grep(u,function(t){return!e.dom.isEmpty(t)}),t.each(c,function(t){if(r.isEmpty(e.dom,t))return void n.outdent(e,t)}),t.each(u,function(t){var n,o;if(t.parentNode!==e.getBody()){for(n=t;n&&n!==d;n=n.parentNode)r.isListNode(n)&&(o=n);a.splitList(e,o,t),i.normalizeLists(e.dom,o.parentNode)}}),e.selection.setRng(o.resolveBookmark(l))},g=function(e,t){return e&&t&&r.isListNode(e)&&e.nodeName===t.nodeName},y=function(e,t,n){var o=e.getStyle(t,"list-style-type",!0),r=e.getStyle(n,"list-style-type",!0);return o===r},v=function(e,t){return e.className===t.className},b=function(e,t,n){return g(t,n)&&y(e,t,n)&&v(t,n)},_=function(e,t){var n,o;if(n=t.nextSibling,b(e,t,n)){for(;o=n.firstChild;)t.appendChild(o);e.remove(n)}if(n=t.previousSibling,b(e,t,n)){for(;o=n.lastChild;)t.insertBefore(o,t.firstChild);e.remove(n)}},x=function(e,t,n){var r=e.dom.getParent(e.selection.getStart(),"OL,UL,DL");if(n=n?n:{},r!==e.getBody())if(r)if(r.nodeName===t)h(e,t);else{var i=o.createBookmark(e.selection.getRng(!0));c(e.dom,r,n),_(e.dom,e.dom.rename(r,t)),e.selection.setRng(o.resolveBookmark(i))}else m(e,t,n)};return{toggleList:x,removeList:h,mergeWithAdjacentLists:_}}),s("tinymce.core.dom.TreeWalker",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.dom.TreeWalker")}),s("tinymce.plugins.lists.core.Delete",["tinymce.core.dom.RangeUtils","tinymce.core.dom.TreeWalker","tinymce.core.util.VK","tinymce.plugins.lists.actions.ToggleList","tinymce.plugins.lists.core.Bookmark","tinymce.plugins.lists.core.NodeType","tinymce.plugins.lists.core.NormalizeLists","tinymce.plugins.lists.core.Range","tinymce.plugins.lists.core.Selection"],function(e,t,n,o,r,i,s,a,l){var d=function(n,o,r){var s,a,l=o.startContainer,d=o.startOffset;if(3===l.nodeType&&(r?d<l.data.length:d>0))return l;for(s=n.schema.getNonEmptyElements(),1===l.nodeType&&(l=e.getNode(l,d)),a=new t(l,n.getBody()),r&&i.isBogusBr(n.dom,l)&&a.next();l=a[r?"next":"prev2"]();){if("LI"===l.nodeName&&!l.hasChildNodes())return l;if(s[l.nodeName])return l;if(3===l.nodeType&&l.data.length>0)return l}},u=function(e,t,n){var o,r,s=t.parentNode;if(i.isChildOfBody(e,t)&&i.isChildOfBody(e,n)){if(i.isListNode(n.lastChild)&&(r=n.lastChild),s===n.lastChild&&i.isBr(s.previousSibling)&&e.remove(s.previousSibling),o=n.lastChild,o&&i.isBr(o)&&t.hasChildNodes()&&e.remove(o),i.isEmpty(e,n,!0)&&e.$(n).empty(),!i.isEmpty(e,t,!0))for(;o=t.firstChild;)n.appendChild(o);r&&n.appendChild(r),e.remove(t),i.isEmpty(e,s)&&s!==e.getRoot()&&e.remove(s)}},c=function(e,t){var n,s,l,c=e.dom,p=e.selection,f=c.getParent(p.getStart(),"LI");if(f){if(n=f.parentNode,n===e.getBody()&&i.isEmpty(c,n))return!0;if(s=a.normalizeRange(p.getRng(!0)),l=c.getParent(d(e,s,t),"LI"),l&&l!==f){var m=r.createBookmark(s);return t?u(c,l,f):u(c,f,l),e.selection.setRng(r.resolveBookmark(m)),!0}if(!l&&!t&&o.removeList(e,n.nodeName))return!0}return!1},p=function(e,t){var n=e.dom,r=n.getParent(e.selection.getStart(),n.isBlock);if(r&&n.isEmpty(r)){var i=a.normalizeRange(e.selection.getRng(!0)),s=n.getParent(d(e,i,t),"LI");if(s)return e.undoManager.transact(function(){n.remove(r),o.mergeWithAdjacentLists(n,s.parentNode),e.selection.select(s,!0),e.selection.collapse(t)}),!0}return!1},f=function(e,t){return c(e,t)||p(e,t)},m=function(e){var t=e.dom.getParent(e.selection.getStart(),"LI,DT,DD");return!!(t||l.getSelectedListItems(e).length>0)&&(e.undoManager.transact(function(){e.execCommand("Delete"),s.normalizeLists(e.dom,e.getBody())}),!0)},h=function(e,t){return e.selection.isCollapsed()?f(e,t):m(e)},g=function(e){e.on("keydown",function(t){t.keyCode===n.BACKSPACE?h(e,!1)&&t.preventDefault():t.keyCode===n.DELETE&&h(e,!0)&&t.preventDefault()})};return{setup:g,backspaceDelete:h}}),s("tinymce.plugins.lists.Plugin",["tinymce.core.PluginManager","tinymce.core.util.Tools","tinymce.core.util.VK","tinymce.plugins.lists.actions.Indent","tinymce.plugins.lists.actions.Outdent","tinymce.plugins.lists.actions.ToggleList","tinymce.plugins.lists.core.Delete","tinymce.plugins.lists.core.NodeType"],function(e,t,n,o,r,i,s,a){var l=function(e,t){return function(){var n=e.dom.getParent(e.selection.getStart(),"UL,OL,DL");return n&&n.nodeName===t}},d=function(e){e.on("BeforeExecCommand",function(t){var n,i=t.command.toLowerCase();if("indent"===i?o.indentSelection(e)&&(n=!0):"outdent"===i&&r.outdentSelection(e)&&(n=!0),n)return e.fire("ExecCommand",{command:t.command}),t.preventDefault(),!0}),e.addCommand("InsertUnorderedList",function(t,n){i.toggleList(e,"UL",n)}),e.addCommand("InsertOrderedList",function(t,n){i.toggleList(e,"OL",n)}),e.addCommand("InsertDefinitionList",function(t,n){i.toggleList(e,"DL",n)})},u=function(e){e.addQueryStateHandler("InsertUnorderedList",l(e,"UL")),e.addQueryStateHandler("InsertOrderedList",l(e,"OL")),e.addQueryStateHandler("InsertDefinitionList",l(e,"DL"))},c=function(e){e.on("keydown",function(t){9!==t.keyCode||n.metaKeyPressed(t)||e.dom.getParent(e.selection.getStart(),"LI,DT,DD")&&(t.preventDefault(),t.shiftKey?r.outdentSelection(e):o.indentSelection(e))})},p=function(e){var n=function(n){return function(){var o=this;e.on("NodeChange",function(e){var r=t.grep(e.parents,a.isListNode);o.active(r.length>0&&r[0].nodeName===n)})}},o=function(e,n){var o=e.settings.plugins?e.settings.plugins:"";return t.inArray(o.split(/[ ,]/),n)!==-1};o(e,"advlist")||(e.addButton("numlist",{title:"Numbered list",cmd:"InsertOrderedList",onPostRender:n("OL")}),e.addButton("bullist",{title:"Bullet list",cmd:"InsertUnorderedList",onPostRender:n("UL")})),e.addButton("indent",{icon:"indent",title:"Increase indent",cmd:"Indent",onPostRender:function(t){var n=t.control;e.on("nodechange",function(){for(var t=e.selection.getSelectedBlocks(),o=!1,r=0,i=t.length;!o&&r<i;r++){var s=t[r].nodeName;o="LI"===s&&a.isFirstChild(t[r])||"UL"===s||"OL"===s||"DD"===s}n.disabled(o)})}})};return e.add("lists",function(e){return p(e),s.setup(e),e.on("init",function(){d(e),u(e),e.getParam("lists_indent_on_tab",!0)&&c(e)}),{backspaceDelete:function(t){s.backspaceDelete(e,t)}}}),function(){}}),o("tinymce.plugins.lists.Plugin")()}()}).call(window)},"./node_modules/tinymce/plugins/media/plugin.js":function(e,t){(function(){!function(){var e={},t=function(t){for(var n=e[t],r=n.deps,i=n.defn,s=r.length,a=new Array(s),l=0;l<s;++l)a[l]=o(r[l]);var d=i.apply(null,a);if(void 0===d)throw"module ["+t+"] returned undefined";n.instance=d},n=function(t,n,o){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===o)throw"no definition function for "+t;e[t]={deps:n,defn:o,instance:void 0}},o=function(n){var o=e[n];if(void 0===o)throw"module ["+n+"] was undefined";return void 0===o.instance&&t(n),o.instance},r=function(e,t){for(var n=e.length,r=new Array(n),i=0;i<n;++i)r.push(o(e[i]));t.apply(null,t)},i={};i.bolt={module:{api:{define:n,require:r,demand:o}}};var s=n,a=function(e,t){s(e,[],function(){return t})};a("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),s("tinymce.core.html.Node",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.html.Node")}),s("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")}),s("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Tools")}),s("tinymce.core.html.Writer",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.html.Writer")}),s("tinymce.core.html.SaxParser",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.html.SaxParser")}),s("tinymce.core.html.Schema",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.html.Schema")}),s("tinymce.plugins.media.core.Sanitize",["tinymce.core.util.Tools","tinymce.core.html.Writer","tinymce.core.html.SaxParser","tinymce.core.html.Schema"],function(e,t,n,o){var r=function(e,r){if(e.settings.media_filter_html===!1)return r;var i,s=new t;return new n({validate:!1,allow_conditional_comments:!1,special:"script,noscript",comment:function(e){s.comment(e)},cdata:function(e){s.cdata(e)},text:function(e,t){s.text(e,t)},start:function(t,n,o){if(i=!0,"script"!==t&&"noscript"!==t){for(var r=0;r<n.length;r++){if(0===n[r].name.indexOf("on"))return;"style"===n[r].name&&(n[r].value=e.dom.serializeStyle(e.dom.parseStyle(n[r].value),t))}s.start(t,n,o),i=!1}},end:function(e){i||s.end(e)}},new o({})).parse(r),s.getContent()};return{sanitize:r}}),s("tinymce.plugins.media.core.VideoScript",[],function(){var e=function(e,t){if(e)for(var n=0;n<e.length;n++)if(t.indexOf(e[n].filter)!==-1)return e[n]};return{getVideoScriptMatch:e}}),s("tinymce.core.Env",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.Env")}),s("tinymce.plugins.media.core.Nodes",["tinymce.plugins.media.core.Sanitize","tinymce.plugins.media.core.VideoScript","tinymce.core.html.Node","tinymce.core.Env"],function(e,t,n,o){var r=function(e,t){var r,i=t.name;return r=new n("img",1),r.shortEnded=!0,s(e,t,r),r.attr({width:t.attr("width")||"300",height:t.attr("height")||("audio"===i?"30":"150"),style:t.attr("style"),src:o.transparentSrc,"data-mce-object":i,class:"mce-object mce-object-"+i}),r},i=function(e,t){var o,r,i,a=t.name;return o=new n("span",1),o.attr({contentEditable:"false",style:t.attr("style"),"data-mce-object":a,class:"mce-preview-object mce-object-"+a}),s(e,t,o),r=new n(a,1),r.attr({src:t.attr("src"),allowfullscreen:t.attr("allowfullscreen"),width:t.attr("width")||"300",height:t.attr("height")||("audio"===a?"30":"150"),frameborder:"0"}),i=new n("span",1),i.attr("class","mce-shim"),o.append(r),o.append(i),o},s=function(t,n,o){var r,i,s,a,l;for(s=n.attributes,a=s.length;a--;)r=s[a].name,i=s[a].value,"width"!==r&&"height"!==r&&"style"!==r&&("data"!==r&&"src"!==r||(i=t.convertURL(i,r)),o.attr("data-mce-p-"+r,i));l=n.firstChild&&n.firstChild.value,l&&(o.attr("data-mce-html",escape(e.sanitize(t,l))),o.firstChild=null)},a=function(e){for(;e=e.parent;)if(e.attr("data-ephox-embed-iri"))return!0;return!1},l=function(e){return function(n){for(var s,l,d=n.length;d--;)s=n[d],s.parent&&(s.parent.attr("data-mce-object")||("script"!==s.name||(l=t.getVideoScriptMatch(e.settings.media_scripts,s.attr("src"))))&&(l&&(l.width&&s.attr("width",l.width.toString()),l.height&&s.attr("height",l.height.toString())),"iframe"===s.name&&e.settings.media_live_embeds!==!1&&o.ceFalse?a(s)||s.replace(i(e,s)):a(s)||s.replace(r(e,s))))}};return{createPreviewIframeNode:i,createPlaceholderNode:r,placeHolderConverter:l}}),s("tinymce.core.dom.DOMUtils",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.dom.DOMUtils")}),s("tinymce.plugins.media.core.Size",[],function(){var e=function(e){return e.replace(/px$/,"")},t=function(e){return/^[0-9.]+$/.test(e)?e+"px":e},n=function(t){return function(n){return n?e(n.style[t]):""}},o=function(e){return function(n,o){n&&(n.style[e]=t(o))}};return{getMaxWidth:n("maxWidth"),getMaxHeight:n("maxHeight"),setMaxWidth:o("maxWidth"),setMaxHeight:o("maxHeight")}}),s("tinymce.plugins.media.core.UpdateHtml",["tinymce.core.html.Writer","tinymce.core.html.SaxParser","tinymce.core.html.Schema","tinymce.core.dom.DOMUtils","tinymce.plugins.media.core.Size"],function(e,t,n,o,r){var i=o.DOM,s=function(e,t){var n,o,r,i;for(n in t)if(r=""+t[n],e.map[n])for(o=e.length;o--;)i=e[o],i.name===n&&(r?(e.map[n]=r,i.value=r):(delete e.map[n],e.splice(o,1)));else r&&(e.push({name:n,value:r}),e.map[n]=r)},a=function(n){var o=new e,r=new t(o);return r.parse(n),o.getContent()},l=function(o,r,i){var a,l=new e,d=0;return new t({validate:!1,allow_conditional_comments:!0,special:"script,noscript",comment:function(e){l.comment(e)},cdata:function(e){l.cdata(e)},text:function(e,t){l.text(e,t)},start:function(e,t,n){switch(e){case"video":case"object":case"embed":case"img":case"iframe":void 0!==r.height&&void 0!==r.width&&s(t,{width:r.width,height:r.height})}if(i)switch(e){case"video":s(t,{poster:r.poster,src:""}),r.source2&&s(t,{src:""});break;case"iframe":s(t,{src:r.source1});break;case"source":if(d++,d<=2&&(s(t,{src:r["source"+d],type:r["source"+d+"mime"]}),!r["source"+d]))return;break;case"img":if(!r.poster)return;a=!0}l.start(e,t,n)},end:function(e){if("video"===e&&i)for(var t=1;t<=2;t++)if(r["source"+t]){var n=[];n.map={},d<t&&(s(n,{src:r["source"+t],type:r["source"+t+"mime"]}),l.start("source",n,!0))}if(r.poster&&"object"===e&&i&&!a){var o=[];o.map={},s(o,{src:r.poster,width:r.width,height:r.height}),l.start("img",o,!0)}l.end(e)}},new n({})).parse(o),l.getContent()},d=function(e){var t=i.createFragment(e);return""!==i.getAttrib(t.firstChild,"data-ephox-embed-iri")},u=function(e,t){var n=i.createFragment(e),o=n.firstChild;return r.setMaxWidth(o,t.width),r.setMaxHeight(o,t.height),a(o.outerHTML)},c=function(e,t,n){return d(e)?u(e,t):l(e,t,n)};return{updateHtml:c}}),s("tinymce.core.util.Delay",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Delay")}),s("tinymce.plugins.media.core.HtmlToData",["tinymce.core.util.Tools","tinymce.core.html.SaxParser","tinymce.core.html.Schema","tinymce.core.dom.DOMUtils","tinymce.plugins.media.core.VideoScript","tinymce.plugins.media.core.Size"],function(e,t,n,o,r,i){var s=o.DOM,a=function(e){return s.getAttrib(e,"data-ephox-embed-iri")},l=function(e){var t=s.createFragment(e);return""!==a(t.firstChild)},d=function(n,o){var i={};return new t({validate:!1,allow_conditional_comments:!0,special:"script,noscript",start:function(t,o){if(i.source1||"param"!==t||(i.source1=o.map.movie),"iframe"!==t&&"object"!==t&&"embed"!==t&&"video"!==t&&"audio"!==t||(i.type||(i.type=t),i=e.extend(o.map,i)),"script"===t){var s=r.getVideoScriptMatch(n,o.map.src);if(!s)return;i={type:"script",source1:o.map.src,width:s.width,height:s.height}}"source"===t&&(i.source1?i.source2||(i.source2=o.map.src):i.source1=o.map.src),"img"!==t||i.poster||(i.poster=o.map.src)}}).parse(o),i.source1=i.source1||i.src||i.data,i.source2=i.source2||"",i.poster=i.poster||"",i},u=function(e){var t=s.createFragment(e),n=t.firstChild;return{type:"ephox-embed-iri",source1:a(n),source2:"",poster:"",width:i.getMaxWidth(n),height:i.getMaxHeight(n)}},c=function(e,t){return l(t)?u(t):d(e,t)};return{htmlToData:c}}),s("tinymce.plugins.media.core.Mime",[],function(){var e=function(e){var t={mp3:"audio/mpeg",wav:"audio/wav",mp4:"video/mp4",webm:"video/webm",ogg:"video/ogg",swf:"application/x-shockwave-flash"},n=e.toLowerCase().split(".").pop(),o=t[n];return o?o:""};return{guess:e}}),s("tinymce.plugins.media.core.UrlPatterns",[],function(){var e=[{regex:/youtu\.be\/([\w\-.]+)/,type:"iframe",w:560,h:314,url:"//www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/youtube\.com(.+)v=([^&]+)/,type:"iframe",w:560,h:314,url:"//www.youtube.com/embed/$2",allowFullscreen:!0},{regex:/youtube.com\/embed\/([a-z0-9\-_]+(?:\?.+)?)/i,type:"iframe",w:560,h:314,url:"//www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/vimeo\.com\/([0-9]+)/,type:"iframe",w:425,h:350,url:"//player.vimeo.com/video/$1?title=0&byline=0&portrait=0&color=8dc7dc",allowfullscreen:!0},{regex:/vimeo\.com\/(.*)\/([0-9]+)/,type:"iframe",w:425,h:350,url:"//player.vimeo.com/video/$2?title=0&amp;byline=0",allowfullscreen:!0},{regex:/maps\.google\.([a-z]{2,3})\/maps\/(.+)msid=(.+)/,type:"iframe",w:425,h:350,url:'//maps.google.com/maps/ms?msid=$2&output=embed"',allowFullscreen:!1},{regex:/dailymotion\.com\/video\/([^_]+)/,type:"iframe",w:480,h:270,url:"//www.dailymotion.com/embed/video/$1",allowFullscreen:!0}];return{urlPatterns:e}}),s("tinymce.plugins.media.core.DataToHtml",["tinymce.plugins.media.core.Mime","tinymce.plugins.media.core.HtmlToData","tinymce.plugins.media.core.UrlPatterns","tinymce.plugins.media.core.VideoScript","tinymce.plugins.media.core.UpdateHtml","tinymce.core.util.Tools"],function(e,t,n,o,r,i){var s=function(s,a){var l="",d=i.extend({},a);if(!d.source1&&(i.extend(d,t.htmlToData(s.settings.media_scripts,d.embed)),!d.source1))return"";if(d.source2||(d.source2=""),d.poster||(d.poster=""),d.source1=s.convertURL(d.source1,"source"),d.source2=s.convertURL(d.source2,"source"),d.source1mime=e.guess(d.source1),d.source2mime=e.guess(d.source2),d.poster=s.convertURL(d.poster,"poster"),i.each(n.urlPatterns,function(e){var t,n,o=e.regex.exec(d.source1);if(o){for(n=e.url,t=0;o[t];t++)n=n.replace("$"+t,function(){return o[t]});d.source1=n,d.type=e.type,d.allowFullscreen=e.allowFullscreen,d.width=d.width||e.w,d.height=d.height||e.h}}),d.embed)l=r.updateHtml(d.embed,d,!0);else{var u=o.getVideoScriptMatch(s.settings.media_scripts,d.source1);if(u&&(d.type="script",d.width=u.width,d.height=u.height),d.width=d.width||300,d.height=d.height||150,i.each(d,function(e,t){d[t]=s.dom.encode(e)}),"iframe"===d.type){var c=d.allowFullscreen?' allowFullscreen="1"':"";l+='<iframe src="'+d.source1+'" width="'+d.width+'" height="'+d.height+'"'+c+"></iframe>"}else"application/x-shockwave-flash"===d.source1mime?(l+='<object data="'+d.source1+'" width="'+d.width+'" height="'+d.height+'" type="application/x-shockwave-flash">',d.poster&&(l+='<img src="'+d.poster+'" width="'+d.width+'" height="'+d.height+'" />'),l+="</object>"):d.source1mime.indexOf("audio")!==-1?s.settings.audio_template_callback?l=s.settings.audio_template_callback(d):l+='<audio controls="controls" src="'+d.source1+'">'+(d.source2?'\n<source src="'+d.source2+'"'+(d.source2mime?' type="'+d.source2mime+'"':"")+" />\n":"")+"</audio>":"script"===d.type?l+='<script src="'+d.source1+'"></script>':l=s.settings.video_template_callback?s.settings.video_template_callback(d):'<video width="'+d.width+'" height="'+d.height+'"'+(d.poster?' poster="'+d.poster+'"':"")+' controls="controls">\n<source src="'+d.source1+'"'+(d.source1mime?' type="'+d.source1mime+'"':"")+" />\n"+(d.source2?'<source src="'+d.source2+'"'+(d.source2mime?' type="'+d.source2mime+'"':"")+" />\n":"")+"</video>"}return l};return{dataToHtml:s}}),s("tinymce.core.util.Promise",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Promise")}),s("tinymce.plugins.media.core.Service",["tinymce.plugins.media.core.DataToHtml","tinymce.core.util.Promise"],function(e,t){var n=function(e,n,o){var r={};return new t(function(t,i){var s=function(o){return o.html&&(r[e.source1]=o),t({url:e.source1,html:o.html?o.html:n(e)})};r[e.source1]?s(r[e.source1]):o({url:e.source1},s,i)})},o=function(e,n){return new t(function(t){t({html:n(e),url:e.source1})})},r=function(t){return function(n){return e.dataToHtml(t,n)}},i=function(e,t){var i=e.settings.media_url_resolver;return i?n(t,r(e),i):o(t,r(e))};return{getEmbedHtml:i}}),s("tinymce.plugins.media.ui.SizeManager",[],function(){var e=function(e,t){e.state.set("oldVal",e.value()),t.state.set("oldVal",t.value())},t=function(e,t){var n=e.find("#width")[0],o=e.find("#height")[0],r=e.find("#constrain")[0];n&&o&&r&&t(n,o,r.checked())},n=function(t,n,o){var r=t.state.get("oldVal"),i=n.state.get("oldVal"),s=t.value(),a=n.value();o&&r&&i&&s&&a&&(s!==r?(a=Math.round(s/r*a),isNaN(a)||n.value(a)):(s=Math.round(a/i*s),isNaN(s)||t.value(s))),e(t,n)},o=function(n){t(n,e)},r=function(e){t(e,n)},i=function(e){var t=function(){e(function(e){r(e)})};return{type:"container",label:"Dimensions",layout:"flex",align:"center",spacing:5,items:[{name:"width",type:"textbox",maxLength:5,size:5,onchange:t,ariaLabel:"Width"},{type:"label",text:"x"},{name:"height",type:"textbox",maxLength:5,size:5,onchange:t,ariaLabel:"Height"},{name:"constrain",type:"checkbox",checked:!0,text:"Constrain proportions"}]}};return{createUi:i,syncSize:o,updateSize:r}}),s("tinymce.plugins.media.ui.Dialog",["tinymce.core.util.Delay","tinymce.plugins.media.core.HtmlToData","tinymce.plugins.media.core.UpdateHtml","tinymce.plugins.media.core.Service","tinymce.plugins.media.core.Size","tinymce.core.util.Tools","tinymce.core.Env","tinymce.plugins.media.ui.SizeManager"],function(e,t,n,o,r,i,s,a){var l=s.ie&&s.ie<=8?"onChange":"onInput",d=function(e){return function(t){var n=t&&t.msg?"Media embed handler error: "+t.msg:"Media embed handler threw unknown error.";e.notificationManager.open({type:"error",text:n})}},u=function(e){
var n=e.selection.getNode(),o=n.getAttribute("data-ephox-embed-iri");return o?{source1:o,"data-ephox-embed-iri":o,width:r.getMaxWidth(n),height:r.getMaxHeight(n)}:n.getAttribute("data-mce-object")?t.htmlToData(e.settings.media_scripts,e.serializer.serialize(n,{selection:!0})):{}},c=function(e){var t=e.selection.getNode();if(t.getAttribute("data-mce-object")||t.getAttribute("data-ephox-embed-iri"))return e.selection.getContent()},p=function(e,n){return function(o){var r=o.html,s=e.find("#embed")[0],l=i.extend(t.htmlToData(n.settings.media_scripts,r),{source1:o.url});e.fromJSON(l),s&&(s.value(r),a.updateSize(e))}},f=function(e,t){var n,o,r=e.dom.select("img[data-mce-object]");for(n=0;n<t.length;n++)for(o=r.length-1;o>=0;o--)t[n]===r[o]&&r.splice(o,1);e.selection.select(r[0])},m=function(e,t){var n=e.dom.select("img[data-mce-object]");e.insertContent(t),f(e,n),e.nodeChanged()},h=function(e,t){var r=e.toJSON();r.embed=n.updateHtml(r.embed,r),r.embed?m(t,r.embed):o.getEmbedHtml(t,r).then(function(e){m(t,e.html)}).catch(d(t))},g=function(e,t){i.each(t,function(t,n){e.find("#"+n).value(t)})},y=function(e){var r,s,f=[{name:"source1",type:"filepicker",filetype:"media",size:40,autofocus:!0,label:"Source",onpaste:function(){setTimeout(function(){o.getEmbedHtml(e,r.toJSON()).then(p(r,e)).catch(d(e))},1)},onchange:function(t){o.getEmbedHtml(e,r.toJSON()).then(p(r,e)).catch(d(e)),g(r,t.meta)},onbeforecall:function(e){e.meta=r.toJSON()}}],m=[],y=function(e){e(r),s=r.toJSON(),r.find("#embed").value(n.updateHtml(s.embed,s))};if(e.settings.media_alt_source!==!1&&m.push({name:"source2",type:"filepicker",filetype:"media",size:40,label:"Alternative source"}),e.settings.media_poster!==!1&&m.push({name:"poster",type:"filepicker",filetype:"image",size:40,label:"Poster"}),e.settings.media_dimensions!==!1){var v=a.createUi(y);f.push(v)}s=u(e);var b={id:"mcemediasource",type:"textbox",flex:1,name:"embed",value:c(e),multiline:!0,rows:5,label:"Source"},_=function(){s=i.extend({},t.htmlToData(e.settings.media_scripts,this.value())),this.parent().parent().fromJSON(s)};b[l]=_,r=e.windowManager.open({title:"Insert/edit media",data:s,bodyType:"tabpanel",body:[{title:"General",type:"form",items:f},{title:"Embed",type:"container",layout:"flex",direction:"column",align:"stretch",padding:10,spacing:10,items:[{type:"label",text:"Paste your embed code below:",forId:"mcemediasource"},b]},{title:"Advanced",type:"form",items:m}],onSubmit:function(){a.updateSize(r),h(r,e)}}),a.syncSize(r)};return{showDialog:y}}),s("tinymce.plugins.media.Plugin",["tinymce.core.html.Node","tinymce.core.PluginManager","tinymce.core.util.Tools","tinymce.plugins.media.core.Nodes","tinymce.plugins.media.core.Sanitize","tinymce.plugins.media.core.UpdateHtml","tinymce.plugins.media.ui.Dialog"],function(e,t,n,o,r,i,s){var a=function(t){t.on("ResolveName",function(e){var t;1===e.target.nodeType&&(t=e.target.getAttribute("data-mce-object"))&&(e.name=t)}),t.on("preInit",function(){var i=t.schema.getSpecialElements();n.each("video audio iframe object".split(" "),function(e){i[e]=new RegExp("</"+e+"[^>]*>","gi")});var s=t.schema.getBoolAttrs();n.each("webkitallowfullscreen mozallowfullscreen allowfullscreen".split(" "),function(e){s[e]={}}),t.parser.addNodeFilter("iframe,video,audio,object,embed,script",o.placeHolderConverter(t)),t.serializer.addAttributeFilter("data-mce-object",function(n,o){for(var i,s,a,l,d,u,c,p,f=n.length;f--;)if(i=n[f],i.parent){for(c=i.attr(o),s=new e(c,1),"audio"!==c&&"script"!==c&&(p=i.attr("class"),p&&p.indexOf("mce-preview-object")!==-1?s.attr({width:i.firstChild.attr("width"),height:i.firstChild.attr("height")}):s.attr({width:i.attr("width"),height:i.attr("height")})),s.attr({style:i.attr("style")}),l=i.attributes,a=l.length;a--;){var m=l[a].name;0===m.indexOf("data-mce-p-")&&s.attr(m.substr(11),l[a].value)}"script"===c&&s.attr("type","text/javascript"),d=i.attr("data-mce-html"),d&&(u=new e("#text",3),u.raw=!0,u.value=r.sanitize(t,unescape(d)),s.append(u)),i.replace(s)}})}),t.on("click keyup",function(){var e=t.selection.getNode();e&&t.dom.hasClass(e,"mce-preview-object")&&t.dom.getAttrib(e,"data-mce-selected")&&e.setAttribute("data-mce-selected","2")}),t.on("ObjectSelected",function(e){var t=e.target.getAttribute("data-mce-object");"audio"!==t&&"script"!==t||e.preventDefault()}),t.on("objectResized",function(e){var t,n=e.target;n.getAttribute("data-mce-object")&&(t=n.getAttribute("data-mce-html"),t&&(t=unescape(t),n.setAttribute("data-mce-html",escape(i.updateHtml(t,{width:e.width,height:e.height})))))}),this.showDialog=function(){s.showDialog(t)},t.addButton("media",{tooltip:"Insert/edit media",onclick:this.showDialog,stateSelector:["img[data-mce-object]","span[data-mce-object]","div[data-ephox-embed-iri]"]}),t.addMenuItem("media",{icon:"media",text:"Media",onclick:this.showDialog,context:"insert",prependToContext:!0}),t.on("setContent",function(){t.$("span.mce-preview-object").each(function(e,n){var o=t.$(n);0===o.find("span.mce-shim",n).length&&o.append('<span class="mce-shim"></span>')})}),t.addCommand("mceMedia",this.showDialog)};return t.add("media",a),function(){}}),o("tinymce.plugins.media.Plugin")()}()}).call(window)},"./node_modules/tinymce/plugins/paste/plugin.js":function(e,t){(function(){!function(){var e={},t=function(t){for(var n=e[t],r=n.deps,i=n.defn,s=r.length,a=new Array(s),l=0;l<s;++l)a[l]=o(r[l]);var d=i.apply(null,a);if(void 0===d)throw"module ["+t+"] returned undefined";n.instance=d},n=function(t,n,o){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===o)throw"no definition function for "+t;e[t]={deps:n,defn:o,instance:void 0}},o=function(n){var o=e[n];if(void 0===o)throw"module ["+n+"] was undefined";return void 0===o.instance&&t(n),o.instance},r=function(e,t){for(var n=e.length,r=new Array(n),i=0;i<n;++i)r.push(o(e[i]));t.apply(null,t)},i={};i.bolt={module:{api:{define:n,require:r,demand:o}}};var s=n,a=function(e,t){s(e,[],function(){return t})};a("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),s("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")}),s("tinymce.core.dom.RangeUtils",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.dom.RangeUtils")}),s("tinymce.core.Env",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.Env")}),s("tinymce.core.util.Delay",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Delay")}),s("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Tools")}),s("tinymce.core.util.VK",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.VK")}),s("tinymce.plugins.paste.core.InternalHtml",[],function(){var e="x-tinymce/html",t="<!-- "+e+" -->",n=function(e){return t+e},o=function(e){return e.replace(t,"")},r=function(e){return e.indexOf(t)!==-1};return{mark:n,unmark:o,isMarked:r,internalHtmlMime:function(){return e}}}),s("tinymce.core.html.DomParser",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.html.DomParser")}),s("tinymce.core.html.Schema",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.html.Schema")}),s("tinymce.plugins.paste.core.Utils",["tinymce.core.util.Tools","tinymce.core.html.DomParser","tinymce.core.html.Schema"],function(e,t,n){function o(t,n){return e.each(n,function(e){t=e.constructor==RegExp?t.replace(e,""):t.replace(e[0],e[1])}),t}function r(r){function i(e){var t=e.name,n=e;if("br"===t)return void(l+="\n");if(d[t]&&(l+=" "),u[t])return void(l+=" ");if(3==e.type&&(l+=e.value),!e.shortEnded&&(e=e.firstChild))do i(e);while(e=e.next);c[t]&&n.next&&(l+="\n","p"==t&&(l+="\n"))}var s=new n,a=new t({},s),l="",d=s.getShortEndedElements(),u=e.makeMap("script noscript style textarea video audio iframe object"," "),c=s.getBlockElements();return r=o(r,[/<!\[[^\]]+\]>/g]),i(a.parse(r)),l}function i(e){function t(e,t,n){return t||n?" ":" "}return e=o(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,t],/<br class="Apple-interchange-newline">/g,/<br>$/i])}function s(e){var t=0;return function(){return e+t++}}var a=function(){return navigator.userAgent.indexOf(" Edge/")!==-1};return{filter:o,innerText:r,trimHtml:i,createIdGenerator:s,isMsEdge:a}}),s("tinymce.plugins.paste.core.CutCopy",["tinymce.core.Env","tinymce.plugins.paste.core.InternalHtml","tinymce.plugins.paste.core.Utils"],function(e,t,n){var o=function(){},r=function(t){return e.iOS===!1&&void 0!==t&&"function"==typeof t.setData&&n.isMsEdge()!==!0},i=function(e,n,o){if(!r(e))return!1;try{return e.clearData(),e.setData("text/html",n),e.setData("text/plain",o),e.setData(t.internalHtmlMime(),n),!0}catch(e){return!1}},s=function(e,t,n,o){i(e.clipboardData,t.html,t.text)?(e.preventDefault(),o()):n(t.html,o)},a=function(e){return function(n,o){var r=t.mark(n),i=e.dom.create("div",{contenteditable:"false"}),s=e.dom.create("div",{contenteditable:"true"},r);e.dom.setStyles(i,{position:"fixed",left:"-3000px",width:"1000px",overflow:"hidden"}),i.appendChild(s),e.dom.add(e.getBody(),i);var a=e.selection.getRng();s.focus();var l=e.dom.createRng();l.selectNodeContents(s),e.selection.setRng(l),setTimeout(function(){i.parentNode.removeChild(i),e.selection.setRng(a),o()},0)}},l=function(e){return{html:e.selection.getContent({contextual:!0}),text:e.selection.getContent({format:"text"})}},d=function(e){return function(t){e.selection.isCollapsed()===!1&&s(t,l(e),a(e),function(){e.execCommand("Delete")})}},u=function(e){return function(t){e.selection.isCollapsed()===!1&&s(t,l(e),a(e),o)}},c=function(e){e.on("cut",d(e)),e.on("copy",u(e))};return{register:c}}),s("tinymce.core.html.Entities",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.html.Entities")}),s("tinymce.plugins.paste.core.Newlines",["tinymce.core.html.Entities"],function(e){var t=function(e){return!/<(?:(?!\/?(?:div|p|br))[^>]*|(?:div|p|br)\s+\w[^>]+)>/.test(e)},n=function(e){return e.replace(/\r?\n/g,"<br>")},o=function(t,n){var o,r=[],i="<"+t;if("object"==typeof n){for(o in n)n.hasOwnProperty(o)&&r.push(o+'="'+e.encodeAllRaw(n[o])+'"');r.length&&(i+=" "+r.join(" "))}return i+">"},r=function(e,t,n){var r,i,s,a=e.split(/\r?\n/),l=0,d=a.length,u=[],c=[],p=o(t,n),f="</"+t+">";if(1===a.length)return e;for(;l<d;l++)r=l===d-1,i=!r&&!a[l+1],s=!a[l]&&!u.length,u.push(a[l]?a[l]:"&nbsp;"),(r||i||s)&&(c.push(u.join("<br>")),u=[]),i&&l++;return 1===c.length?c[0]:p+c.join(f+p)+f},i=function(e,t,o){return t?r(e,t,o):n(e)};return{isPlainText:t,convert:i,toBRs:n,toBlockElements:r}}),s("tinymce.plugins.paste.core.SmartPaste",["tinymce.core.util.Tools"],function(e){var t=function(e){return/^https?:\/\/[\w\?\-\/+=.&%@~#]+$/i.test(e)},n=function(e){return t(e)&&/.(gif|jpe?g|png)$/.test(e)},o=function(e,t,n){return e.undoManager.extra(function(){n(e,t)},function(){e.insertContent('<img src="'+t+'">')}),!0},r=function(e,t,n){return e.undoManager.extra(function(){n(e,t)},function(){e.execCommand("mceInsertLink",!1,t)}),!0},i=function(e,n,o){return!(e.selection.isCollapsed()!==!1||!t(n))&&r(e,n,o)},s=function(e,t,r){return!!n(t)&&o(e,t,r)},a=function(e,t){return e.insertContent(t,{merge:e.settings.paste_merge_formats!==!1,paste:!0}),!0},l=function(t,n){e.each([i,s,a],function(e){return e(t,n,a)!==!0})},d=function(e,t){e.settings.smart_paste===!1?a(e,t):l(e,t)};return{isImageUrl:n,isAbsoluteUrl:t,insertContent:d}}),s("tinymce.plugins.paste.core.Clipboard",["tinymce.core.dom.RangeUtils","tinymce.core.Env","tinymce.core.util.Delay","tinymce.core.util.Tools","tinymce.core.util.VK","tinymce.plugins.paste.core.CutCopy","tinymce.plugins.paste.core.InternalHtml","tinymce.plugins.paste.core.Newlines","tinymce.plugins.paste.core.SmartPaste","tinymce.plugins.paste.core.Utils"],function(e,t,n,o,r,i,s,a,l,d){return function(i){function u(e,t){var n,o,r=i.dom;if(o=t||s.isMarked(e),e=s.unmark(e),n=i.fire("BeforePastePreProcess",{content:e,internal:o}),n=i.fire("PastePreProcess",n),e=n.content,!n.isDefaultPrevented()){if(i.hasEventListeners("PastePostProcess")&&!n.isDefaultPrevented()){var a=r.add(i.getBody(),"div",{style:"display:none"},e);n=i.fire("PastePostProcess",{node:a,internal:o}),r.remove(a),e=n.node.innerHTML}n.isDefaultPrevented()||l.insertContent(i,e)}}function c(e){e=i.dom.encode(e).replace(/\r\n/g,"\n"),e=a.convert(e,i.settings.forced_root_block,i.settings.forced_root_block_attrs),u(e,!1)}function p(){function e(e){var t,n,r,i=e.startContainer;if(t=e.getClientRects(),t.length)return t[0];if(e.collapsed&&1==i.nodeType){for(r=i.childNodes[P.startOffset];r&&3==r.nodeType&&!r.data.length;)r=r.nextSibling;if(r)return"BR"==r.tagName&&(n=o.doc.createTextNode("\ufeff"),r.parentNode.insertBefore(n,r),e=o.createRng(),e.setStartBefore(n),e.setEndAfter(n),t=e.getClientRects(),o.remove(n)),t.length?t[0]:void 0}}var n,o=i.dom,r=i.getBody(),s=i.dom.getViewPort(i.getWin()),a=s.y,l=20;if(P=i.selection.getRng(),i.inline&&(n=i.selection.getScrollContainer(),n&&n.scrollTop>0&&(a=n.scrollTop)),P.getClientRects){var d=e(P);if(d)l=a+(d.top-o.getPos(r).y);else{l=a;var u=P.startContainer;u&&(3==u.nodeType&&u.parentNode!=r&&(u=u.parentNode),1==u.nodeType&&(l=o.getPos(u,n||r).y))}}T=o.add(i.getBody(),"div",{id:"mcepastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: absolute; top: "+l+"px;width: 10px; height: 10px; overflow: hidden; opacity: 0"},D),(t.ie||t.gecko)&&o.setStyle(T,"left","rtl"==o.getStyle(r,"direction",!0)?65535:-65535),o.bind(T,"beforedeactivate focusin focusout",function(e){e.stopPropagation()}),T.focus(),i.selection.select(T,!0)}function f(){if(T){for(var e;e=i.dom.get("mcepastebin");)i.dom.remove(e),i.dom.unbind(e);P&&i.selection.setRng(P)}T=P=null}function m(){var e,t,n,o,r="";for(e=i.dom.select("div[id=mcepastebin]"),t=0;t<e.length;t++)n=e[t],n.firstChild&&"mcepastebin"==n.firstChild.id&&(n=n.firstChild),o=n.innerHTML,r!=D&&(r+=o);return r}function h(e){var t={};if(e){if(e.getData){var n=e.getData("Text");n&&n.length>0&&n.indexOf(M)==-1&&(t["text/plain"]=n)}if(e.types)for(var o=0;o<e.types.length;o++){var r=e.types[o];t[r]=e.getData(r)}}return t}function g(e){var t=h(e.clipboardData||i.getDoc().dataTransfer);return d.isMsEdge()?o.extend(t,{"text/html":""}):t}function y(e){return w(e,"text/html")||w(e,"text/plain")}function v(e){var t;return t=e.indexOf(","),t!==-1?e.substr(t+1):null}function b(e,t){return!e.images_dataimg_filter||e.images_dataimg_filter(t)}function _(e,t,n){e&&(i.selection.setRng(e),e=null);var o=t.result,r=v(o),s=new Image;if(s.src=o,b(i.settings,s)){var a,l,d=i.editorUpload.blobCache;l=d.findFirst(function(e){return e.base64()===r}),l?a=l:(a=d.create(O(),n,r),d.add(a)),u('<img src="'+a.blobUri()+'">',!1)}else u('<img src="'+o+'">',!1)}function x(e,t){function n(n){var o,r,i,s=!1;if(n)for(o=0;o<n.length;o++)if(r=n[o],/^image\/(jpeg|png|gif|bmp)$/.test(r.type)){var a=r.getAsFile?r.getAsFile():r;i=new FileReader,i.onload=_.bind(null,t,i,a),i.readAsDataURL(a),e.preventDefault(),s=!0}return s}var o=e.clipboardData||e.dataTransfer;if(i.settings.paste_data_images&&o)return n(o.items)||n(o.files)}function C(e){var t=e.clipboardData;return navigator.userAgent.indexOf("Android")!=-1&&t&&t.items&&0===t.items.length}function E(t){return e.getCaretRangeFromPoint(t.clientX,t.clientY,i.getDoc())}function w(e,t){return t in e&&e[t].length>0}function j(e){return r.metaKeyPressed(e)&&86==e.keyCode||e.shiftKey&&45==e.keyCode}function S(){function e(e,t,n,o){var r,s;return w(e,"text/html")?r=e["text/html"]:(r=m(),r==D&&(n=!0)),r=d.trimHtml(r),T&&T.firstChild&&"mcepastebin"===T.firstChild.id&&(n=!0),f(),s=o===!1&&a.isPlainText(r),r.length&&!s||(n=!0),n&&(r=w(e,"text/plain")&&s?e["text/plain"]:d.innerText(r)),r==D?void(t||i.windowManager.alert("Please use Ctrl+V/Cmd+V keyboard shortcuts to paste contents.")):void(n?c(r):u(r,o))}function o(e){var t=e["text/plain"];return!!t&&0===t.indexOf("file://")}i.on("keydown",function(e){function n(e){j(e)&&!e.isDefaultPrevented()&&f()}if(j(e)&&!e.isDefaultPrevented()){if(k=e.shiftKey&&86==e.keyCode,k&&t.webkit&&navigator.userAgent.indexOf("Version/")!=-1)return;if(e.stopImmediatePropagation(),N=(new Date).getTime(),t.ie&&k)return e.preventDefault(),void i.fire("paste",{ieFake:!0});f(),p(),i.once("keyup",n),i.once("paste",function(){i.off("keyup",n)})}});var r=function(){return P||i.selection.getRng()};i.on("paste",function(o){var a=(new Date).getTime(),l=g(o),d=(new Date).getTime()-a,u=(new Date).getTime()-N-d<1e3,c="text"==I.pasteFormat||k,h=w(l,s.internalHtmlMime());return k=!1,o.isDefaultPrevented()||C(o)?void f():!y(l)&&x(o,r())?void f():(u||o.preventDefault(),!t.ie||u&&!o.ieFake||w(l,"text/html")||(p(),i.dom.bind(T,"paste",function(e){e.stopPropagation()}),i.getDoc().execCommand("Paste",!1,null),l["text/html"]=m()),void(w(l,"text/html")?(o.preventDefault(),e(l,u,c,h)):n.setEditorTimeout(i,function(){e(l,u,c,h)},0)))}),i.on("dragstart dragend",function(e){R="dragstart"==e.type}),i.on("drop",function(e){var t,r;if(r=E(e),!e.isDefaultPrevented()&&!R){t=h(e.dataTransfer);var a=w(t,s.internalHtmlMime());if((y(t)&&!o(t)||!x(e,r))&&r&&i.settings.paste_filter_drop!==!1){var l=t["mce-internal"]||t["text/html"]||t["text/plain"];l&&(e.preventDefault(),n.setEditorTimeout(i,function(){i.undoManager.transact(function(){t["mce-internal"]&&i.execCommand("Delete"),i.selection.setRng(r),l=d.trimHtml(l),t["text/html"]?u(l,a):c(l)})}))}}}),i.on("dragover dragend",function(e){i.settings.paste_data_images&&e.preventDefault()})}var T,P,k,I=this,N=0,R=!1,D="%MCEPASTEBIN%",M="data:text/mce-internal,",O=d.createIdGenerator("mceclip");I.pasteHtml=u,I.pasteText=c,I.pasteImageData=x,i.on("preInit",function(){S(),i.parser.addNodeFilter("img",function(e,n,o){function r(e){return e.data&&e.data.paste===!0}function s(e){e.attr("data-mce-object")||u===t.transparentSrc||e.remove()}function a(e){return 0===e.indexOf("webkit-fake-url")}function l(e){return 0===e.indexOf("data:")}if(!i.settings.paste_data_images&&r(o))for(var d=e.length;d--;){var u=e[d].attributes.map.src;u&&(a(u)?s(e[d]):!i.settings.allow_html_data_urls&&l(u)&&s(e[d]))}})})}}),s("tinymce.core.html.Serializer",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.html.Serializer")}),s("tinymce.core.html.Node",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.html.Node")}),s("tinymce.plugins.paste.core.WordFilter",["tinymce.core.util.Tools","tinymce.core.html.DomParser","tinymce.core.html.Schema","tinymce.core.html.Serializer","tinymce.core.html.Node","tinymce.plugins.paste.core.Utils"],function(e,t,n,o,r,i){function s(e){return/<font face="Times New Roman"|class="?Mso|style="[^"]*\bmso-|style='[^'']*\bmso-|w:WordDocument/i.test(e)||/class="OutlineElement/.test(e)||/id="?docs\-internal\-guid\-/.test(e)}function a(t){var n,o;return o=[/^[IVXLMCD]{1,2}\.[ \u00a0]/,/^[ivxlmcd]{1,2}\.[ \u00a0]/,/^[a-z]{1,2}[\.\)][ \u00a0]/,/^[A-Z]{1,2}[\.\)][ \u00a0]/,/^[0-9]+\.[ \u00a0]/,/^[\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]+\.[ \u00a0]/,/^[\u58f1\u5f10\u53c2\u56db\u4f0d\u516d\u4e03\u516b\u4e5d\u62fe]+\.[ \u00a0]/],t=t.replace(/^[\u00a0 ]+/,""),e.each(o,function(e){if(e.test(t))return n=!0,!1}),n}function l(e){return/^[\s\u00a0]*[\u2022\u00b7\u00a7\u25CF]\s*/.test(e)}function d(d){var u=d.settings;d.on("BeforePastePreProcess",function(c){function p(e){function t(e){var n="";if(3===e.type)return e.value;if(e=e.firstChild)do n+=t(e);while(e=e.next);return n}function n(e,t){if(3===e.type&&t.test(e.value))return e.value=e.value.replace(t,""),!1;if(e=e.firstChild)do if(!n(e,t))return!1;while(e=e.next);return!0}function o(e){if(e._listIgnore)return void e.remove();if(e=e.firstChild)do o(e);while(e=e.next)}function i(e,t,i){var a=e._listLevel||u;a!=u&&(a<u?s&&(s=s.parent.parent):(d=s,s=null)),s&&s.name==t?s.append(e):(d=d||s,s=new r(t,1),i>1&&s.attr("start",""+i),e.wrap(s)),e.name="li",a>u&&d&&d.lastChild.append(s),u=a,o(e),n(e,/^\u00a0+/),n(e,/^\s*([\u2022\u00b7\u00a7\u25CF]|\w+\.)/),n(e,/^\u00a0+/)}for(var s,d,u=1,c=[],p=e.firstChild;"undefined"!=typeof p&&null!==p;)if(c.push(p),p=p.walk(),null!==p)for(;"undefined"!=typeof p&&p.parent!==e;)p=p.walk();for(var f=0;f<c.length;f++)if(e=c[f],"p"==e.name&&e.firstChild){var m=t(e);if(l(m)){i(e,"ul");continue}if(a(m)){var h=/([0-9]+)\./.exec(m),g=1;h&&(g=parseInt(h[1],10)),i(e,"ol",g);continue}if(e._listLevel){i(e,"ul",1);continue}s=null}else d=s,s=null}function f(t,n){var o,i={},s=d.dom.parseStyle(n);return e.each(s,function(e,r){switch(r){case"mso-list":o=/\w+ \w+([0-9]+)/i.exec(n),o&&(t._listLevel=parseInt(o[1],10)),/Ignore/i.test(e)&&t.firstChild&&(t._listIgnore=!0,t.firstChild._listIgnore=!0);break;case"horiz-align":r="text-align";break;case"vert-align":r="vertical-align";break;case"font-color":case"mso-foreground":r="color";break;case"mso-background":case"mso-highlight":r="background";break;case"font-weight":case"font-style":return void("normal"!=e&&(i[r]=e));case"mso-element":if(/^(comment|comment-list)$/i.test(e))return void t.remove()}return 0===r.indexOf("mso-comment")?void t.remove():void(0!==r.indexOf("mso-")&&("all"==m||h&&h[r])&&(i[r]=e))}),/(bold)/i.test(i["font-weight"])&&(delete i["font-weight"],t.wrap(new r("b",1))),/(italic)/i.test(i["font-style"])&&(delete i["font-style"],t.wrap(new r("i",1))),i=d.dom.serializeStyle(i,t.name),i?i:null}var m,h,g=c.content;if(g=g.replace(/<b[^>]+id="?docs-internal-[^>]*>/gi,""),g=g.replace(/<br class="?Apple-interchange-newline"?>/gi,""),m=u.paste_retain_style_properties,m&&(h=e.makeMap(m.split(/[, ]/))),u.paste_enable_default_filters!==!1&&s(c.content)){c.wordContent=!0,g=i.filter(g,[/<!--[\s\S]+?-->/gi,/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|img|meta|link|style|\w:\w+)(?=[\s\/>]))[^>]*>/gi,[/<(\/?)s>/gi,"<$1strike>"],[/&nbsp;/gi," "],[/<span\s+style\s*=\s*"\s*mso-spacerun\s*:\s*yes\s*;?\s*"\s*>([\s\u00a0]*)<\/span>/gi,function(e,t){return t.length>0?t.replace(/./," ").slice(Math.floor(t.length/2)).split("").join(" "):""}]]);var y=u.paste_word_valid_elements;y||(y="-strong/b,-em/i,-u,-span,-p,-ol,-ul,-li,-h1,-h2,-h3,-h4,-h5,-h6,-p/div,-a[href|name],sub,sup,strike,br,del,table[width],tr,td[colspan|rowspan|width],th[colspan|rowspan|width],thead,tfoot,tbody");var v=new n({valid_elements:y,valid_children:"-li[p]"});e.each(v.elements,function(e){e.attributes.class||(e.attributes.class={},e.attributesOrder.push("class")),e.attributes.style||(e.attributes.style={},e.attributesOrder.push("style"))});var b=new t({},v);b.addAttributeFilter("style",function(e){for(var t,n=e.length;n--;)t=e[n],t.attr("style",f(t,t.attr("style"))),"span"==t.name&&t.parent&&!t.attributes.length&&t.unwrap()}),b.addAttributeFilter("class",function(e){for(var t,n,o=e.length;o--;)t=e[o],n=t.attr("class"),/^(MsoCommentReference|MsoCommentText|msoDel)$/i.test(n)&&t.remove(),t.attr("class",null)}),b.addNodeFilter("del",function(e){for(var t=e.length;t--;)e[t].remove()}),b.addNodeFilter("a",function(e){for(var t,n,o,r=e.length;r--;)if(t=e[r],n=t.attr("href"),o=t.attr("name"),n&&n.indexOf("#_msocom_")!=-1)t.remove();else if(n&&0===n.indexOf("file://")&&(n=n.split("#")[1],n&&(n="#"+n)),n||o){if(o&&!/^_?(?:toc|edn|ftn)/i.test(o)){t.unwrap();continue}t.attr({href:n,name:o})}else t.unwrap()});var _=b.parse(g);u.paste_convert_word_fake_lists!==!1&&p(_),c.content=new o({validate:u.validate},v).serialize(_)}})}return d.isWordContent=s,d}),s("tinymce.plugins.paste.core.Quirks",["tinymce.core.Env","tinymce.core.util.Tools","tinymce.plugins.paste.core.WordFilter","tinymce.plugins.paste.core.Utils"],function(e,t,n,o){"use strict";return function(r){function i(e){r.on("BeforePastePreProcess",function(t){t.content=e(t.content)})}function s(e){r.on("PastePostProcess",function(t){e(t.node)})}function a(e){if(!n.isWordContent(e))return e;var i=[];t.each(r.schema.getBlockElements(),function(e,t){i.push(t)});var s=new RegExp("(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*(<\\/?("+i.join("|")+")[^>]*>)(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*","g");return e=o.filter(e,[[s,"$1"]]),e=o.filter(e,[[/<br><br>/g,"<BR><BR>"],[/<br>/g," "],[/<BR><BR>/g,"<br>"]])}function l(e){if(n.isWordContent(e))return e;var t=r.settings.paste_webkit_styles;if(r.settings.paste_remove_styles_if_webkit===!1||"all"==t)return e;if(t&&(t=t.split(/[, ]/)),t){var o=r.dom,i=r.selection.getNode();e=e.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,function(e,n,r,s){var a=o.parseStyle(o.decode(r),"span"),l={};if("none"===t)return n+s;for(var d=0;d<t.length;d++){var u=a[t[d]],c=o.getStyle(i,t[d],!0);/color/.test(t[d])&&(u=o.toHex(u),c=o.toHex(c)),c!=u&&(l[t[d]]=u)}return l=o.serializeStyle(l,"span"),l?n+' style="'+l+'"'+s:n+s})}else e=e.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return e=e.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,function(e,t,n,o){return t+' style="'+n+'"'+o})}function d(e){r.$("a",e).find("font,u").each(function(e,t){r.dom.remove(t,!0)})}e.webkit&&i(l),e.ie&&(i(a),s(d))}}),s("tinymce.plugins.paste.Plugin",["tinymce.core.PluginManager","tinymce.plugins.paste.core.Clipboard","tinymce.plugins.paste.core.CutCopy","tinymce.plugins.paste.core.Quirks","tinymce.plugins.paste.core.WordFilter"],function(e,t,n,o,r){var i;return e.add("paste",function(s){function a(){return i||s.settings.paste_plaintext_inform===!1}function l(){if("text"==u.pasteFormat)u.pasteFormat="html",s.fire("PastePlainTextToggle",{state:!1});else if(u.pasteFormat="text",s.fire("PastePlainTextToggle",{state:!0}),!a()){var e=s.translate("Paste is now in plain text mode. Contents will now be pasted as plain text until you toggle this option off.");s.notificationManager.open({text:e,type:"info"}),i=!0}s.focus()}function d(){var e=this;e.active("text"===u.pasteFormat),s.on("PastePlainTextToggle",function(t){e.active(t.state)})}var u,c=this,p=s.settings;return/(^|[ ,])powerpaste([, ]|$)/.test(p.plugins)&&e.get("powerpaste")?void("undefined"!=typeof console&&console.log&&console.log("PowerPaste is incompatible with Paste plugin! Remove 'paste' from the 'plugins' option.")):(c.clipboard=u=new t(s),c.quirks=new o(s),c.wordFilter=new r(s),s.settings.paste_as_text&&(c.clipboard.pasteFormat="text"),p.paste_preprocess&&s.on("PastePreProcess",function(e){p.paste_preprocess.call(c,c,e)}),p.paste_postprocess&&s.on("PastePostProcess",function(e){p.paste_postprocess.call(c,c,e)}),s.addCommand("mceInsertClipboardContent",function(e,t){t.content&&c.clipboard.pasteHtml(t.content,t.internal),t.text&&c.clipboard.pasteText(t.text)}),s.settings.paste_block_drop&&s.on("dragend dragover draggesture dragdrop drop drag",function(e){e.preventDefault(),e.stopPropagation()}),s.settings.paste_data_images||s.on("drop",function(e){var t=e.dataTransfer;t&&t.files&&t.files.length>0&&e.preventDefault()}),s.addCommand("mceTogglePlainTextPaste",l),s.addButton("pastetext",{icon:"pastetext",tooltip:"Paste as text",onclick:l,onPostRender:d}),s.addMenuItem("pastetext",{text:"Paste as text",selectable:!0,active:u.pasteFormat,onclick:l,onPostRender:d}),void n.register(s))}),function(){}}),o("tinymce.plugins.paste.Plugin")()}()}).call(window)},"./node_modules/tinymce/plugins/tabfocus/plugin.js":function(e,t){(function(){!function(){var e={},t=function(t){for(var n=e[t],r=n.deps,i=n.defn,s=r.length,a=new Array(s),l=0;l<s;++l)a[l]=o(r[l]);var d=i.apply(null,a);if(void 0===d)throw"module ["+t+"] returned undefined";n.instance=d},n=function(t,n,o){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===o)throw"no definition function for "+t;e[t]={deps:n,defn:o,instance:void 0}},o=function(n){var o=e[n];if(void 0===o)throw"module ["+n+"] was undefined";return void 0===o.instance&&t(n),o.instance},r=function(e,t){for(var n=e.length,r=new Array(n),i=0;i<n;++i)r.push(o(e[i]));t.apply(null,t)},i={};i.bolt={module:{api:{define:n,require:r,demand:o}}};var s=n,a=function(e,t){s(e,[],function(){return t})};a("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),s("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")}),s("tinymce.core.dom.DOMUtils",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.dom.DOMUtils")}),s("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Tools")}),s("tinymce.core.EditorManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.EditorManager")}),s("tinymce.core.util.Delay",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Delay")}),s("tinymce.core.Env",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.Env")}),s("tinymce.plugins.tabfocus.Plugin",["tinymce.core.PluginManager","tinymce.core.dom.DOMUtils","tinymce.core.util.Tools","tinymce.core.EditorManager","tinymce.core.util.Delay","tinymce.core.Env"],function(e,t,n,o,r,i){return e.add("tabfocus",function(e){function s(e){9!==e.keyCode||e.ctrlKey||e.altKey||e.metaKey||e.preventDefault()}function a(t){function s(r){function i(e){return"BODY"===e.nodeName||"hidden"!=e.type&&"none"!=e.style.display&&"hidden"!=e.style.visibility&&i(e.parentNode)}function s(e){return/INPUT|TEXTAREA|BUTTON/.test(e.tagName)&&o.get(t.id)&&e.tabIndex!=-1&&i(e)}if(d=l.select(":input:enabled,*[tabindex]:not(iframe)"),n.each(d,function(t,n){if(t.id==e.id)return a=n,!1}),r>0){for(c=a+1;c<d.length;c++)if(s(d[c]))return d[c]}else for(c=a-1;c>=0;c--)if(s(d[c]))return d[c];return null}var a,d,u,c;if(!(9!==t.keyCode||t.ctrlKey||t.altKey||t.metaKey||t.isDefaultPrevented())&&(u=n.explode(e.getParam("tab_focus",e.getParam("tabfocus_elements",":prev,:next"))),1==u.length&&(u[1]=u[0],u[0]=":prev"),d=t.shiftKey?":prev"==u[0]?s(-1):l.get(u[0]):":next"==u[1]?s(1):l.get(u[1]))){var p=o.get(d.id||d.name);d.id&&p?p.focus():r.setTimeout(function(){i.webkit||window.focus(),d.focus()},10),t.preventDefault()}}var l=t.DOM;e.on("init",function(){e.inline&&l.setAttrib(e.getBody(),"tabIndex",null),e.on("keyup",s),i.gecko?e.on("keypress keydown",a):e.on("keydown",a)})}),function(){}}),o("tinymce.plugins.tabfocus.Plugin")()}()}).call(window)},"./node_modules/tinymce/plugins/textcolor/plugin.js":function(e,t){(function(){!function(){var e={},t=function(t){for(var n=e[t],r=n.deps,i=n.defn,s=r.length,a=new Array(s),l=0;l<s;++l)a[l]=o(r[l]);var d=i.apply(null,a);if(void 0===d)throw"module ["+t+"] returned undefined";n.instance=d},n=function(t,n,o){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===o)throw"no definition function for "+t;e[t]={deps:n,defn:o,instance:void 0}},o=function(n){var o=e[n];if(void 0===o)throw"module ["+n+"] was undefined";return void 0===o.instance&&t(n),o.instance},r=function(e,t){for(var n=e.length,r=new Array(n),i=0;i<n;++i)r.push(o(e[i]));t.apply(null,t)},i={};i.bolt={module:{api:{define:n,require:r,demand:o}}};var s=n,a=function(e,t){s(e,[],function(){return t})};a("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),s("tinymce.core.dom.DOMUtils",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.dom.DOMUtils")}),s("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")}),s("tinymce.core.util.I18n",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.I18n")}),s("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Tools")}),s("tinymce.plugins.textcolor.Plugin",["tinymce.core.dom.DOMUtils","tinymce.core.PluginManager","tinymce.core.util.I18n","tinymce.core.util.Tools"],function(e,t,n,o){var r=n.translate;return t.add("textcolor",function(t){function n(e){var n;return t.dom.getParents(t.selection.getStart(),function(t){var o;(o=t.style["forecolor"==e?"color":"background-color"])&&(n=o)}),n}function i(e){var n,o,r=[];for(o=["000000","Black","993300","Burnt orange","333300","Dark olive","003300","Dark green","003366","Dark azure","000080","Navy Blue","333399","Indigo","333333","Very dark gray","800000","Maroon","FF6600","Orange","808000","Olive","008000","Green","008080","Teal","0000FF","Blue","666699","Grayish blue","808080","Gray","FF0000","Red","FF9900","Amber","99CC00","Yellow green","339966","Sea green","33CCCC","Turquoise","3366FF","Royal blue","800080","Purple","999999","Medium gray","FF00FF","Magenta","FFCC00","Gold","FFFF00","Yellow","00FF00","Lime","00FFFF","Aqua","00CCFF","Sky blue","993366","Red violet","FFFFFF","White","FF99CC","Pink","FFCC99","Peach","FFFF99","Light yellow","CCFFCC","Pale green","CCFFFF","Pale cyan","99CCFF","Light sky blue","CC99FF","Plum"],
o=t.settings.textcolor_map||o,o=t.settings[e+"_map"]||o,n=0;n<o.length;n+=2)r.push({text:o[n+1],color:"#"+o[n]});return r}function s(){function e(e,t){var n="transparent"==e;return'<td class="mce-grid-cell'+(n?" mce-colorbtn-trans":"")+'"><div id="'+h+"-"+g++ +'" data-mce-color="'+(e?e:"")+'" role="option" tabIndex="-1" style="'+(e?"background-color: "+e:"")+'" title="'+r(t)+'">'+(n?"&#215;":"")+"</div></td>"}var n,o,s,a,l,d,u,f,m=this,h=m._id,g=0;for(f=m.settings.origin,n=i(f),n.push({text:r("No color"),color:"transparent"}),s='<table class="mce-grid mce-grid-border mce-colorbutton-grid" role="list" cellspacing="0"><tbody>',a=n.length-1,d=0;d<p[f];d++){for(s+="<tr>",l=0;l<c[f];l++)u=d*c[f]+l,u>a?s+="<td></td>":(o=n[u],s+=e(o.color,o.text));s+="</tr>"}if(t.settings.color_picker_callback){for(s+='<tr><td colspan="'+c[f]+'" class="mce-custom-color-btn"><div id="'+h+'-c" class="mce-widget mce-btn mce-btn-small mce-btn-flat" role="button" tabindex="-1" aria-labelledby="'+h+'-c" style="width: 100%"><button type="button" role="presentation" tabindex="-1">'+r("Custom...")+"</button></div></td></tr>",s+="<tr>",l=0;l<c[f];l++)s+=e("","Custom color");s+="</tr>"}return s+="</tbody></table>"}function a(e,n){t.undoManager.transact(function(){t.focus(),t.formatter.apply(e,{value:n}),t.nodeChanged()})}function l(e){t.undoManager.transact(function(){t.focus(),t.formatter.remove(e,{value:null},null,!0),t.nodeChanged()})}function d(r){function i(e){f.hidePanel(),f.color(e),a(f.settings.format,e)}function s(){f.hidePanel(),f.resetColor(),l(f.settings.format)}function d(e,t){e.style.background=t,e.setAttribute("data-mce-color",t)}var u,p,f=this.parent();p=f.settings.origin,e.DOM.getParent(r.target,".mce-custom-color-btn")&&(f.hidePanel(),t.settings.color_picker_callback.call(t,function(e){var t,n,r,s=f.panel.getEl().getElementsByTagName("table")[0];for(t=o.map(s.rows[s.rows.length-1].childNodes,function(e){return e.firstChild}),r=0;r<t.length&&(n=t[r],n.getAttribute("data-mce-color"));r++);if(r==c[p])for(r=0;r<c[p]-1;r++)d(t[r],t[r+1].getAttribute("data-mce-color"));d(n,e),i(e)},n(f.settings.format))),u=r.target.getAttribute("data-mce-color"),u?(this.lastId&&document.getElementById(this.lastId).setAttribute("aria-selected",!1),r.target.setAttribute("aria-selected",!0),this.lastId=r.target.id,"transparent"==u?s():i(u)):null!==u&&f.hidePanel()}function u(){var e=this;e._color?a(e.settings.format,e._color):l(e.settings.format)}var c,p;p={forecolor:t.settings.forecolor_rows||t.settings.textcolor_rows||5,backcolor:t.settings.backcolor_rows||t.settings.textcolor_rows||5},c={forecolor:t.settings.forecolor_cols||t.settings.textcolor_cols||8,backcolor:t.settings.backcolor_cols||t.settings.textcolor_cols||8},t.addButton("forecolor",{type:"colorbutton",tooltip:"Text color",format:"forecolor",panel:{origin:"forecolor",role:"application",ariaRemember:!0,html:s,onclick:d},onclick:u}),t.addButton("backcolor",{type:"colorbutton",tooltip:"Background color",format:"hilitecolor",panel:{origin:"backcolor",role:"application",ariaRemember:!0,html:s,onclick:d},onclick:u})}),function(){}}),o("tinymce.plugins.textcolor.Plugin")()}()}).call(window)},"./node_modules/tinymce/themes/modern/theme.js":function(e,t){(function(){!function(){var e={},t=function(t){for(var n=e[t],r=n.deps,i=n.defn,s=r.length,a=new Array(s),l=0;l<s;++l)a[l]=o(r[l]);var d=i.apply(null,a);if(void 0===d)throw"module ["+t+"] returned undefined";n.instance=d},n=function(t,n,o){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===o)throw"no definition function for "+t;e[t]={deps:n,defn:o,instance:void 0}},o=function(n){var o=e[n];if(void 0===o)throw"module ["+n+"] was undefined";return void 0===o.instance&&t(n),o.instance},r=function(e,t){for(var n=e.length,r=new Array(n),i=0;i<n;++i)r.push(o(e[i]));t.apply(null,t)},i={};i.bolt={module:{api:{define:n,require:r,demand:o}}};var s=n,a=function(e,t){s(e,[],function(){return t})};a("global!window",window),a("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),s("tinymce.core.AddOnManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.AddOnManager")}),s("tinymce.core.EditorManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.EditorManager")}),s("tinymce.core.Env",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.Env")}),s("tinymce.core.ui.Api",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.ui.Api")}),s("tinymce.core.dom.DOMUtils",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.dom.DOMUtils")}),s("tinymce.core.ui.Factory",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.ui.Factory")}),s("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Tools")}),s("tinymce.themes.modern.ui.A11y",[],function(){var e=function(e,t){return function(){var n=e.find(t)[0];n&&n.focus(!0)}},t=function(t,n){t.shortcuts.add("Alt+F9","",e(n,"menubar")),t.shortcuts.add("Alt+F10,F10","",e(n,"toolbar")),t.shortcuts.add("Alt+F11","",e(n,"elementpath")),n.on("cancel",function(){t.focus()})};return{addKeys:t}}),s("tinymce.themes.modern.ui.Branding",["tinymce.core.dom.DOMUtils"],function(e){var t=e.DOM,n=function(e,n,o){return function(){var r=e.getContentAreaContainer().querySelector("iframe").offsetWidth,i=Math.max(r-e.getDoc().documentElement.offsetWidth,0);t.setStyle(n,"right",i+"px"),o?t.setStyle(n,"top","-16px"):t.setStyle(n,"bottom","1px")}},o=function(e){return function(){t.hide(e)}},r=function(e,t,o){n(e,t,o)(),e.on("NodeChange ResizeEditor",n(e,t,o))},i=function(e,t,n){n.appendChild(t),r(e,t,!0)},s=function(e,t){e.getContainer().appendChild(t),r(e,t,!1)},a=function(e){e.on("SkinLoaded",function(){var n=t.create("div",{class:"mce-branding-powered-by"}),r=e.getContainer().querySelector(".mce-statusbar");r?i(e,n,r):s(e,n),t.bind(n,"click",o(n))})},l=function(e){e.settings.branding!==!1&&a(e)};return{setup:l}}),s("tinymce.core.util.Delay",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Delay")}),s("tinymce.core.geom.Rect",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.geom.Rect")}),s("tinymce.themes.modern.ui.Toolbar",["tinymce.core.util.Tools","tinymce.core.ui.Factory"],function(e,t){var n="undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image",o=function(n,o,r){var i,s=[];if(o)return e.each(o.split(/[ ,]/),function(e){var o,a=function(){var t=n.selection;e.settings.stateSelector&&t.selectorChanged(e.settings.stateSelector,function(t){e.active(t)},!0),e.settings.disabledStateSelector&&t.selectorChanged(e.settings.disabledStateSelector,function(t){e.disabled(t)})};"|"==e?i=null:(i||(i={type:"buttongroup",items:[]},s.push(i)),n.buttons[e]&&(o=e,e=n.buttons[o],"function"==typeof e&&(e=e()),e.type=e.type||"button",e.size=r,e=t.create(e),i.items.push(e),n.initialized?a():n.on("init",a)))}),{type:"toolbar",layout:"flow",items:s}},r=function(t,r){var i=[],s=t.settings,a=function(e){if(e)return i.push(o(t,e,r)),!0};if(e.isArray(s.toolbar)){if(0===s.toolbar.length)return;e.each(s.toolbar,function(e,t){s["toolbar"+(t+1)]=e}),delete s.toolbar}for(var l=1;l<10&&a(s["toolbar"+l]);l++);if(i.length||s.toolbar===!1||a(s.toolbar||n),i.length)return{type:"panel",layout:"stack",classes:"toolbar-grp",ariaRoot:!0,ariaRemember:!0,items:i}};return{createToolbar:o,createToolbars:r}}),s("tinymce.themes.modern.ui.ContextToolbars",["tinymce.core.dom.DOMUtils","tinymce.core.util.Tools","tinymce.core.util.Delay","tinymce.core.ui.Factory","tinymce.core.geom.Rect","tinymce.themes.modern.ui.Toolbar"],function(e,t,n,o,r,i){var s=e.DOM,a=function(e){return{left:e.x,top:e.y,width:e.w,height:e.h,right:e.x+e.w,bottom:e.y+e.h}},l=function(e){t.each(e.contextToolbars,function(e){e.panel&&e.panel.hide()})},d=function(e,t){e.moveTo(t.left,t.top)},u=function(e,n,o){n=n?n.substr(0,2):"",t.each({t:"down",b:"up"},function(t,r){e.classes.toggle("arrow-"+t,o(r,n.substr(0,1)))}),t.each({l:"left",r:"right"},function(t,r){e.classes.toggle("arrow-"+t,o(r,n.substr(1,1)))})},c=function(e,t,n,o,r,i){return i=a({x:t,y:n,w:i.w,h:i.h}),e&&(i=e({elementRect:a(o),contentAreaRect:a(r),panelRect:i})),i},p=function(e){var a,p=e.settings,f=function(){return e.contextToolbars||[]},m=function(t){var n,o,r;return n=s.getPos(e.getContentAreaContainer()),o=e.dom.getRect(t),r=e.dom.getRoot(),"BODY"===r.nodeName&&(o.x-=r.ownerDocument.documentElement.scrollLeft||r.scrollLeft,o.y-=r.ownerDocument.documentElement.scrollTop||r.scrollTop),o.x+=n.x,o.y+=n.y,o},h=function(t,n){var o,i,a,f,h,g,y,v,b=p.inline_toolbar_position_handler;if(!e.removed){if(!t||!t.toolbar.panel)return void l(e);y=["bc-tc","tc-bc","tl-bl","bl-tl","tr-br","br-tr"],h=t.toolbar.panel,n&&h.show(),a=m(t.element),i=s.getRect(h.getEl()),f=s.getRect(e.getContentAreaContainer()||e.getBody()),v=25,"inline"!==s.getStyle(t.element,"display",!0)&&(a.w=t.element.clientWidth,a.h=t.element.clientHeight),e.inline||(f.w=e.getDoc().documentElement.offsetWidth),e.selection.controlSelection.isResizable(t.element)&&a.w<v&&(a=r.inflate(a,0,8)),o=r.findBestRelativePosition(i,a,f,y),a=r.clamp(a,f),o?(g=r.relativePosition(i,a,o),d(h,c(b,g.x,g.y,a,f,i))):(f.h+=i.h,a=r.intersect(f,a),a?(o=r.findBestRelativePosition(i,a,f,["bc-tc","bl-tl","br-tr"]),o?(g=r.relativePosition(i,a,o),d(h,c(b,g.x,g.y,a,f,i))):d(h,c(b,a.x,a.y,a,f,i))):h.hide()),u(h,o,function(e,t){return e===t})}},g=function(t){return function(){var o=function(){e.selection&&h(_(e.selection.getNode()),t)};n.requestAnimationFrame(o)}},y=function(){a||(a=e.selection.getScrollContainer()||e.getWin(),s.bind(a,"scroll",g(!0)),e.on("remove",function(){s.unbind(a,"scroll")}))},v=function(t){var n;return t.toolbar.panel?(t.toolbar.panel.show(),void h(t)):(y(),n=o.create({type:"floatpanel",role:"dialog",classes:"tinymce tinymce-inline arrow",ariaLabel:"Inline toolbar",layout:"flex",direction:"column",align:"stretch",autohide:!1,autofix:!0,fixed:!0,border:1,items:i.createToolbar(e,t.toolbar.items),oncancel:function(){e.focus()}}),t.toolbar.panel=n,n.renderTo(document.body).reflow(),void h(t))},b=function(){t.each(f(),function(e){e.panel&&e.panel.hide()})},_=function(t){var n,o,r,i=f();for(r=e.$(t).parents().add(t),n=r.length-1;n>=0;n--)for(o=i.length-1;o>=0;o--)if(i[o].predicate(r[n]))return{toolbar:i[o],element:r[n]};return null};e.on("click keyup setContent ObjectResized",function(t){("setcontent"!==t.type||t.selection)&&n.setEditorTimeout(e,function(){var t;t=_(e.selection.getNode()),t?(b(),v(t)):b()})}),e.on("blur hide contextmenu",b),e.on("ObjectResizeStart",function(){var t=_(e.selection.getNode());t&&t.toolbar.panel&&t.toolbar.panel.hide()}),e.on("ResizeEditor ResizeWindow",g(!0)),e.on("nodeChange",g(!1)),e.on("remove",function(){t.each(f(),function(e){e.panel&&e.panel.remove()}),e.contextToolbars={}}),e.shortcuts.add("ctrl+shift+e > ctrl+shift+p","",function(){var t=_(e.selection.getNode());t&&t.toolbar.panel&&t.toolbar.panel.items()[0].focus()})};return{addContextualToolbars:p}}),s("tinymce.themes.modern.ui.Menubar",["tinymce.core.util.Tools"],function(e){var t={file:{title:"File",items:"newdocument"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall"},insert:{title:"Insert",items:"|"},view:{title:"View",items:"visualaid |"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript | formats | removeformat"},table:{title:"Table"},tools:{title:"Tools"}},n=function(e,t){var n;return"|"==t?{text:"|"}:n=e[t]},o=function(o,r,i){var s,a,l,d,u;if(u=e.makeMap((r.removed_menuitems||"").split(/[ ,]/)),r.menu?(a=r.menu[i],d=!0):a=t[i],a){s={text:a.title},l=[],e.each((a.items||"").split(/[ ,]/),function(e){var t=n(o,e);t&&!u[e]&&l.push(n(o,e))}),d||e.each(o,function(e){e.context==i&&("before"==e.separator&&l.push({text:"|"}),e.prependToContext?l.unshift(e):l.push(e),"after"==e.separator&&l.push({text:"|"}))});for(var c=0;c<l.length;c++)"|"==l[c].text&&(0!==c&&c!=l.length-1||l.splice(c,1));if(s.menu=l,!s.menu.length)return null}return s},r=function(e){var n,r=[],i=e.settings,s=[];if(i.menu)for(n in i.menu)s.push(n);else for(n in t)s.push(n);for(var a="string"==typeof i.menubar?i.menubar.split(/[ ,]/):s,l=0;l<a.length;l++){var d=a[l];d=o(e.menuItems,e.settings,d),d&&r.push(d)}return r};return{createMenuButtons:r}}),s("tinymce.themes.modern.ui.Resize",["tinymce.core.dom.DOMUtils"],function(e){var t=e.DOM,n=function(e){return{width:e.clientWidth,height:e.clientHeight}},o=function(e,o,r){var i,s,a,l,d=e.settings;i=e.getContainer(),s=e.getContentAreaContainer().firstChild,a=n(i),l=n(s),null!==o&&(o=Math.max(d.min_width||100,o),o=Math.min(d.max_width||65535,o),t.setStyle(i,"width",o+(a.width-l.width)),t.setStyle(s,"width",o)),r=Math.max(d.min_height||100,r),r=Math.min(d.max_height||65535,r),t.setStyle(s,"height",r),e.fire("ResizeEditor")},r=function(e,t,n){var r=e.getContentAreaContainer();o(e,r.clientWidth+t,r.clientHeight+n)};return{resizeTo:o,resizeBy:r}}),s("tinymce.themes.modern.ui.Sidebar",["tinymce.core.util.Tools","tinymce.core.ui.Factory","tinymce.core.Env"],function(e,t,n){var o=function(e){return{element:function(){return e}}},r=function(e,t,n){var r=e.settings[n];r&&r(o(t.getEl("body")))},i=function(t,n,o){e.each(o,function(e){var o=n.items().filter("#"+e.name)[0];o&&o.visible()&&e.name!==t&&(r(e,o,"onhide"),o.visible(!1))})},s=function(e){e.items().each(function(e){e.active(!1)})},a=function(t,n){return e.grep(t,function(e){return e.name===n})[0]},l=function(e,n,o){return function(l){var d=l.control,u=d.parents().filter("panel")[0],c=u.find("#"+n)[0],p=a(o,n);i(n,u,o),s(d.parent()),c&&c.visible()?(r(p,c,"onhide"),c.hide(),d.active(!1)):(c?(c.show(),r(p,c,"onshow")):(c=t.create({type:"container",name:n,layout:"stack",classes:"sidebar-panel",html:""}),u.prepend(c),r(p,c,"onrender"),r(p,c,"onshow")),d.active(!0)),e.fire("ResizeEditor")}},d=function(){return!n.ie||n.ie>=11},u=function(e){return!(!d()||!e.sidebars)&&e.sidebars.length>0},c=function(t){var n=e.map(t.sidebars,function(e){var n=e.settings;return{type:"button",icon:n.icon,image:n.image,tooltip:n.tooltip,onclick:l(t,e.name,t.sidebars)}});return{type:"panel",name:"sidebar",layout:"stack",classes:"sidebar",items:[{type:"toolbar",layout:"stack",classes:"sidebar-toolbar",items:n}]}};return{hasSidebar:u,createSidebar:c}}),s("tinymce.themes.modern.ui.SkinLoaded",[],function(){var e=function(e){var t=function(){e._skinLoaded=!0,e.fire("SkinLoaded")};return function(){e.initialized?t():e.on("init",t)}};return{fireSkinLoaded:e}}),s("tinymce.themes.modern.modes.Iframe",["tinymce.core.dom.DOMUtils","tinymce.core.ui.Factory","tinymce.core.util.Tools","tinymce.themes.modern.ui.A11y","tinymce.themes.modern.ui.Branding","tinymce.themes.modern.ui.ContextToolbars","tinymce.themes.modern.ui.Menubar","tinymce.themes.modern.ui.Resize","tinymce.themes.modern.ui.Sidebar","tinymce.themes.modern.ui.SkinLoaded","tinymce.themes.modern.ui.Toolbar"],function(e,t,n,o,r,i,s,a,l,d,u){var c=e.DOM,p=function(e){return function(t){e.find("*").disabled("readonly"===t.mode)}},f=function(e){return{type:"panel",name:"iframe",layout:"stack",classes:"edit-area",border:e,html:""}},m=function(e){return{type:"panel",layout:"stack",classes:"edit-aria-container",border:"1 0 0 0",items:[f("0"),l.createSidebar(e)]}},h=function(e,n,h){var g,y,v,b=e.settings;return h.skinUiCss&&c.styleSheetLoader.load(h.skinUiCss,d.fireSkinLoaded(e)),g=n.panel=t.create({type:"panel",role:"application",classes:"tinymce",style:"visibility: hidden",layout:"stack",border:1,items:[b.menubar===!1?null:{type:"menubar",border:"0 0 1 0",items:s.createMenuButtons(e)},u.createToolbars(e,b.toolbar_items_size),l.hasSidebar(e)?m(e):f("1 0 0 0")]}),b.resize!==!1&&(y={type:"resizehandle",direction:b.resize,onResizeStart:function(){var t=e.getContentAreaContainer().firstChild;v={width:t.clientWidth,height:t.clientHeight}},onResize:function(t){"both"===b.resize?a.resizeTo(e,v.width+t.deltaX,v.height+t.deltaY):a.resizeTo(e,null,v.height+t.deltaY)}}),b.statusbar!==!1&&g.add({type:"panel",name:"statusbar",classes:"statusbar",layout:"flow",border:"1 0 0 0",ariaRoot:!0,items:[{type:"elementpath",editor:e},y]}),e.fire("BeforeRenderUI"),e.on("SwitchMode",p(g)),g.renderBefore(h.targetNode).reflow(),b.readonly&&e.setMode("readonly"),h.width&&c.setStyle(g.getEl(),"width",h.width),e.on("remove",function(){g.remove(),g=null}),o.addKeys(e,g),i.addContextualToolbars(e),r.setup(e),{iframeContainer:g.find("#iframe")[0].getEl(),editorContainer:g.getEl()}};return{render:h}}),s("tinymce.core.ui.FloatPanel",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.ui.FloatPanel")}),s("tinymce.themes.modern.modes.Inline",["tinymce.core.util.Tools","tinymce.core.ui.Factory","tinymce.core.dom.DOMUtils","tinymce.core.ui.FloatPanel","tinymce.themes.modern.ui.Toolbar","tinymce.themes.modern.ui.Menubar","tinymce.themes.modern.ui.ContextToolbars","tinymce.themes.modern.ui.A11y","tinymce.themes.modern.ui.SkinLoaded"],function(e,t,n,o,r,i,s,a,l){var d=function(e,d,u){var c,p,f=e.settings,m=n.DOM;f.fixed_toolbar_container&&(p=m.select(f.fixed_toolbar_container)[0]);var h=function(){if(c&&c.moveRel&&c.visible()&&!c._fixed){var t=e.selection.getScrollContainer(),n=e.getBody(),o=0,r=0;if(t){var i=m.getPos(n),s=m.getPos(t);o=Math.max(0,s.x-i.x),r=Math.max(0,s.y-i.y)}c.fixed(!1).moveRel(n,e.rtl?["tr-br","br-tr"]:["tl-bl","bl-tl","tr-br"]).moveBy(o,r)}},g=function(){c&&(c.show(),h(),m.addClass(e.getBody(),"mce-edit-focus"))},y=function(){c&&(c.hide(),o.hideAll(),m.removeClass(e.getBody(),"mce-edit-focus"))},v=function(){return c?void(c.visible()||g()):(c=d.panel=t.create({type:p?"panel":"floatpanel",role:"application",classes:"tinymce tinymce-inline",layout:"flex",direction:"column",align:"stretch",autohide:!1,autofix:!0,fixed:!!p,border:1,items:[f.menubar===!1?null:{type:"menubar",border:"0 0 1 0",items:i.createMenuButtons(e)},r.createToolbars(e,f.toolbar_items_size)]}),e.fire("BeforeRenderUI"),c.renderTo(p||document.body).reflow(),a.addKeys(e,c),g(),s.addContextualToolbars(e),e.on("nodeChange",h),e.on("activate",g),e.on("deactivate",y),void e.nodeChanged())};return f.content_editable=!0,e.on("focus",function(){u.skinUiCss?m.styleSheetLoader.load(u.skinUiCss,v,v):v()}),e.on("blur hide",y),e.on("remove",function(){c&&(c.remove(),c=null)}),u.skinUiCss&&m.styleSheetLoader.load(u.skinUiCss,l.fireSkinLoaded(e)),{}};return{render:d}}),s("tinymce.core.ui.Throbber",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.ui.Throbber")}),s("tinymce.themes.modern.ui.ProgressState",["tinymce.core.ui.Throbber"],function(e){var t=function(t,n){var o;t.on("ProgressState",function(t){o=o||new e(n.panel.getEl("body")),t.state?o.show(t.time):o.hide()})};return{setup:t}}),s("tinymce.themes.modern.Theme",["global!window","tinymce.core.AddOnManager","tinymce.core.EditorManager","tinymce.core.Env","tinymce.core.ui.Api","tinymce.themes.modern.modes.Iframe","tinymce.themes.modern.modes.Inline","tinymce.themes.modern.ui.ProgressState","tinymce.themes.modern.ui.Resize"],function(e,t,n,o,r,i,s,a,l){var d=t.ThemeManager;r.appendTo(e.tinymce?e.tinymce:{});var u=function(e,t,o){var r=e.settings,l=r.skin!==!1&&(r.skin||"lightgray");if(l){var d=r.skin_url;d=d?e.documentBaseURI.toAbsolute(d):n.baseURL+"/skins/"+l,o.skinUiCss=d+"/skin.min.css",e.contentCSS.push(d+"/content"+(e.inline?".inline":"")+".min.css")}return a.setup(e,t),r.inline?s.render(e,t,o):i.render(e,t,o)};return d.add("modern",function(e){return{renderUI:function(t){return u(e,this,t)},resizeTo:function(t,n){return l.resizeTo(e,t,n)},resizeBy:function(t,n){return l.resizeBy(e,t,n)}}}),function(){}}),o("tinymce.themes.modern.Theme")()}()}).call(window)},"./node_modules/tinymce/tinymce.js":function(e,t,n){(function(n){(function(){!function(){var t={},o=function(e){for(var n=t[e],o=n.deps,r=n.defn,s=o.length,a=new Array(s),l=0;l<s;++l)a[l]=i(o[l]);var d=r.apply(null,a);if(void 0===d)throw"module ["+e+"] returned undefined";n.instance=d},r=function(e,n,o){if("string"!=typeof e)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+e;if(void 0===o)throw"no definition function for "+e;t[e]={deps:n,defn:o,instance:void 0}},i=function(e){var n=t[e];if(void 0===n)throw"module ["+e+"] was undefined";return void 0===n.instance&&o(e),n.instance},s=function(e,t){for(var n=e.length,o=new Array(n),r=0;r<n;++r)o.push(i(e[r]));t.apply(null,t)},a={};a.bolt={module:{api:{define:r,require:s,demand:i}}};var l=r,d=function(e,t){l(e,[],function(){return t})};l("tinymce.core.geom.Rect",[],function(){"use strict";function e(e,t,n){var o,r,s,a,l,u;return o=t.x,r=t.y,s=e.w,a=e.h,l=t.w,u=t.h,n=(n||"").split(""),"b"===n[0]&&(r+=u),"r"===n[1]&&(o+=l),"c"===n[0]&&(r+=d(u/2)),"c"===n[1]&&(o+=d(l/2)),"b"===n[3]&&(r-=a),"r"===n[4]&&(o-=s),"c"===n[3]&&(r-=d(a/2)),"c"===n[4]&&(o-=d(s/2)),i(o,r,s,a)}function t(t,n,o,r){var i,s;for(s=0;s<r.length;s++)if(i=e(t,n,r[s]),i.x>=o.x&&i.x+i.w<=o.w+o.x&&i.y>=o.y&&i.y+i.h<=o.h+o.y)return r[s];return null}function n(e,t,n){return i(e.x-t,e.y-n,e.w+2*t,e.h+2*n)}function o(e,t){var n,o,r,s;return n=l(e.x,t.x),o=l(e.y,t.y),r=a(e.x+e.w,t.x+t.w),s=a(e.y+e.h,t.y+t.h),r-n<0||s-o<0?null:i(n,o,r-n,s-o)}function r(e,t,n){var o,r,s,a,d,u,c,p,f,m;return d=e.x,u=e.y,c=e.x+e.w,p=e.y+e.h,f=t.x+t.w,m=t.y+t.h,o=l(0,t.x-d),r=l(0,t.y-u),s=l(0,c-f),a=l(0,p-m),d+=o,u+=r,n&&(c+=o,p+=r,d-=s,u-=a),c-=s,p-=a,i(d,u,c-d,p-u)}function i(e,t,n,o){return{x:e,y:t,w:n,h:o}}function s(e){return i(e.left,e.top,e.width,e.height)}var a=Math.min,l=Math.max,d=Math.round;return{inflate:n,relativePosition:e,findBestRelativePosition:t,intersect:o,clamp:r,create:i,fromClientRect:s}}),l("tinymce.core.util.Promise",[],function(){function e(e,t){return function(){e.apply(t,arguments)}}function t(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],l(t,e(r,this),e(i,this))}function o(e){var t=this;return null===this._state?void this._deferreds.push(e):void d(function(){var n=t._state?e.onFulfilled:e.onRejected;if(null===n)return void(t._state?e.resolve:e.reject)(t._value);var o;try{o=n(t._value)}catch(t){return void e.reject(t)}e.resolve(o)})}function r(t){try{if(t===this)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if("function"==typeof n)return void l(e(n,t),e(r,this),e(i,this))}this._state=!0,this._value=t,s.call(this)}catch(e){i.call(this,e)}}function i(e){this._state=!1,this._value=e,s.call(this)}function s(){for(var e=0,t=this._deferreds.length;e<t;e++)o.call(this,this._deferreds[e]);this._deferreds=null}function a(e,t,n,o){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=o}function l(e,t,n){var o=!1;try{e(function(e){o||(o=!0,t(e))},function(e){o||(o=!0,n(e))})}catch(e){if(o)return;o=!0,n(e)}}if(window.Promise)return window.Promise;var d=t.immediateFn||"function"==typeof n&&n||function(e){setTimeout(e,1)},u=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};return t.prototype.catch=function(e){return this.then(null,e)},t.prototype.then=function(e,n){var r=this;return new t(function(t,i){o.call(r,new a(e,n,t,i))})},t.all=function(){var e=Array.prototype.slice.call(1===arguments.length&&u(arguments[0])?arguments[0]:arguments);return new t(function(t,n){function o(i,s){try{if(s&&("object"==typeof s||"function"==typeof s)){var a=s.then;if("function"==typeof a)return void a.call(s,function(e){o(i,e)},n)}e[i]=s,0===--r&&t(e)}catch(e){n(e)}}if(0===e.length)return t([]);for(var r=e.length,i=0;i<e.length;i++)o(i,e[i])})},t.resolve=function(e){return e&&"object"==typeof e&&e.constructor===t?e:new t(function(t){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.race=function(e){return new t(function(t,n){for(var o=0,r=e.length;o<r;o++)e[o].then(t,n)})},t}),l("tinymce.core.util.Delay",["tinymce.core.util.Promise"],function(e){function t(e,t){function n(e){window.setTimeout(e,0)}var o,r=window.requestAnimationFrame,i=["ms","moz","webkit"];for(o=0;o<i.length&&!r;o++)r=window[i[o]+"RequestAnimationFrame"];r||(r=n),r(e,t)}function n(e,t){return"number"!=typeof t&&(t=0),setTimeout(e,t)}function o(e,t){return"number"!=typeof t&&(t=1),setInterval(e,t)}function r(e){return clearTimeout(e)}function i(e){return clearInterval(e)}function s(e,t){var o,r;return r=function(){var r=arguments;clearTimeout(o),o=n(function(){e.apply(this,r)},t)},r.stop=function(){clearTimeout(o)},r}var a;return{requestAnimationFrame:function(n,o){return a?void a.then(n):void(a=new e(function(e){o||(o=document.body),t(e,o)}).then(n))},setTimeout:n,setInterval:o,setEditorTimeout:function(e,t,o){return n(function(){e.removed||t()},o)},setEditorInterval:function(e,t,n){var r;return r=o(function(){e.removed?clearInterval(r):t()},n)},debounce:s,throttle:s,clearInterval:i,clearTimeout:r}}),l("tinymce.core.Env",[],function(){function e(e){return"matchMedia"in window&&matchMedia(e).matches}var t,n,o,r,i,s,a,l,d,u,c,p,f,m=navigator,h=m.userAgent;t=window.opera&&window.opera.buildNumber,d=/Android/.test(h),n=/WebKit/.test(h),o=!n&&!t&&/MSIE/gi.test(h)&&/Explorer/gi.test(m.appName),o=o&&/MSIE (\w+)\./.exec(h)[1],r=h.indexOf("Trident/")!=-1&&(h.indexOf("rv:")!=-1||m.appName.indexOf("Netscape")!=-1)&&11,i=h.indexOf("Edge/")!=-1&&!o&&!r&&12,o=o||r||i,s=!n&&!r&&/Gecko/.test(h),a=h.indexOf("Mac")!=-1,l=/(iPad|iPhone)/.test(h),u="FormData"in window&&"FileReader"in window&&"URL"in window&&!!URL.createObjectURL,c=e("only screen and (max-device-width: 480px)")&&(d||l),p=e("only screen and (min-width: 800px)")&&(d||l),f=h.indexOf("Windows Phone")!=-1,i&&(n=!1);var g=!l||u||h.match(/AppleWebKit\/(\d*)/)[1]>=534;return{opera:t,webkit:n,ie:o,gecko:s,mac:a,iOS:l,android:d,contentEditable:g,transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",caretAfter:8!=o,range:window.getSelection&&"Range"in window,documentMode:o&&!i?document.documentMode||7:10,fileApi:u,ceFalse:o===!1||o>8,canHaveCSP:o===!1||o>11,desktop:!c&&!p,windowsPhone:f}}),l("tinymce.core.dom.EventUtils",["tinymce.core.util.Delay","tinymce.core.Env"],function(e,t){"use strict";function n(e,t,n,o){e.addEventListener?e.addEventListener(t,n,o||!1):e.attachEvent&&e.attachEvent("on"+t,n)}function o(e,t,n,o){e.removeEventListener?e.removeEventListener(t,n,o||!1):e.detachEvent&&e.detachEvent("on"+t,n)}function r(e,t){var n,o=t;return n=e.path,n&&n.length>0&&(o=n[0]),e.deepPath&&(n=e.deepPath(),n&&n.length>0&&(o=n[0])),o}function i(e,n){var o,i,s=n||{};for(o in e)u[o]||(s[o]=e[o]);if(s.target||(s.target=s.srcElement||document),t.experimentalShadowDom&&(s.target=r(e,s.target)),e&&d.test(e.type)&&e.pageX===i&&e.clientX!==i){var a=s.target.ownerDocument||document,l=a.documentElement,m=a.body;s.pageX=e.clientX+(l&&l.scrollLeft||m&&m.scrollLeft||0)-(l&&l.clientLeft||m&&m.clientLeft||0),s.pageY=e.clientY+(l&&l.scrollTop||m&&m.scrollTop||0)-(l&&l.clientTop||m&&m.clientTop||0)}return s.preventDefault=function(){s.isDefaultPrevented=f,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},s.stopPropagation=function(){s.isPropagationStopped=f,e&&(e.stopPropagation?e.stopPropagation():e.cancelBubble=!0)},s.stopImmediatePropagation=function(){s.isImmediatePropagationStopped=f,s.stopPropagation()},c(s)===!1&&(s.isDefaultPrevented=p,s.isPropagationStopped=p,s.isImmediatePropagationStopped=p),"undefined"==typeof s.metaKey&&(s.metaKey=!1),s}function s(r,i,s){function a(){return"complete"===c.readyState||"interactive"===c.readyState&&c.body}function l(){s.domLoaded||(s.domLoaded=!0,i(p))}function d(){a()&&(o(c,"readystatechange",d),l())}function u(){try{c.documentElement.doScroll("left")}catch(t){return void e.setTimeout(u)}l()}var c=r.document,p={type:"ready"};return s.domLoaded?void i(p):(!c.addEventListener||t.ie&&t.ie<11?(n(c,"readystatechange",d),c.documentElement.doScroll&&r.self===r.top&&u()):a()?l():n(r,"DOMContentLoaded",l),void n(r,"load",l))}function a(){function e(e,t){var n,o,r,i,s=p[t];if(n=s&&s[e.type])for(o=0,r=n.length;o<r;o++)if(i=n[o],i&&i.func.call(i.scope,e)===!1&&e.preventDefault(),e.isImmediatePropagationStopped())return}var t,r,a,d,u,c=this,p={};r=l+(+new Date).toString(32),d="onmouseenter"in document.documentElement,a="onfocusin"in document.documentElement,u={mouseenter:"mouseover",mouseleave:"mouseout"},t=1,c.domLoaded=!1,c.events=p,c.bind=function(o,l,f,m){function h(t){e(i(t||E.event),g)}var g,y,v,b,_,x,C,E=window;if(o&&3!==o.nodeType&&8!==o.nodeType){for(o[r]?g=o[r]:(g=t++,o[r]=g,p[g]={}),m=m||o,l=l.split(" "),v=l.length;v--;)b=l[v],x=h,_=C=!1,"DOMContentLoaded"===b&&(b="ready"),c.domLoaded&&"ready"===b&&"complete"==o.readyState?f.call(m,i({type:b})):(d||(_=u[b],_&&(x=function(t){var n,o;if(n=t.currentTarget,o=t.relatedTarget,o&&n.contains)o=n.contains(o);else for(;o&&o!==n;)o=o.parentNode;o||(t=i(t||E.event),t.type="mouseout"===t.type?"mouseleave":"mouseenter",t.target=n,e(t,g))})),a||"focusin"!==b&&"focusout"!==b||(C=!0,_="focusin"===b?"focus":"blur",x=function(t){t=i(t||E.event),t.type="focus"===t.type?"focusin":"focusout",e(t,g)}),y=p[g][b],y?"ready"===b&&c.domLoaded?f({type:b}):y.push({func:f,scope:m}):(p[g][b]=y=[{func:f,scope:m}],y.fakeName=_,y.capture=C,y.nativeHandler=x,"ready"===b?s(o,x,c):n(o,_||b,x,C)));return o=y=0,f}},c.unbind=function(e,t,n){var i,s,a,l,d,u;if(!e||3===e.nodeType||8===e.nodeType)return c;if(i=e[r]){if(u=p[i],t){for(t=t.split(" "),a=t.length;a--;)if(d=t[a],s=u[d]){if(n)for(l=s.length;l--;)if(s[l].func===n){var f=s.nativeHandler,m=s.fakeName,h=s.capture;s=s.slice(0,l).concat(s.slice(l+1)),s.nativeHandler=f,s.fakeName=m,s.capture=h,u[d]=s}n&&0!==s.length||(delete u[d],o(e,s.fakeName||d,s.nativeHandler,s.capture))}}else{for(d in u)s=u[d],o(e,s.fakeName||d,s.nativeHandler,s.capture);u={}}for(d in u)return c;delete p[i];try{delete e[r]}catch(t){e[r]=null}}return c},c.fire=function(t,n,o){var s;if(!t||3===t.nodeType||8===t.nodeType)return c;o=i(null,o),o.type=n,o.target=t;do s=t[r],s&&e(o,s),t=t.parentNode||t.ownerDocument||t.defaultView||t.parentWindow;while(t&&!o.isPropagationStopped());return c},c.clean=function(e){var t,n,o=c.unbind;if(!e||3===e.nodeType||8===e.nodeType)return c;if(e[r]&&o(e),e.getElementsByTagName||(e=e.document),e&&e.getElementsByTagName)for(o(e),n=e.getElementsByTagName("*"),t=n.length;t--;)e=n[t],e[r]&&o(e);return c},c.destroy=function(){p={}},c.cancel=function(e){return e&&(e.preventDefault(),e.stopImmediatePropagation()),!1}}var l="mce-data-",d=/^(?:mouse|contextmenu)|click/,u={keyLocation:1,layerX:1,layerY:1,returnValue:1,webkitMovementX:1,webkitMovementY:1,keyIdentifier:1},c=function(e){return e.isDefaultPrevented===f||e.isDefaultPrevented===p},p=function(){return!1},f=function(){return!0};return a.Event=new a,a.Event.bind(window,"ready",function(){}),a}),l("tinymce.core.dom.Sizzle",[],function(){function e(e,t,n,o){var r,i,s,a,l,u,p,f,m,h;if((t?t.ownerDocument||t:B)!==N&&I(t),t=t||N,n=n||[],!e||"string"!=typeof e)return n;if(1!==(a=t.nodeType)&&9!==a)return[];if(D&&!o){if(r=ge.exec(e))if(s=r[1]){if(9===a){if(i=t.getElementById(s),!i||!i.parentNode)return n;if(i.id===s)return n.push(i),n}else if(t.ownerDocument&&(i=t.ownerDocument.getElementById(s))&&L(t,i)&&i.id===s)return n.push(i),n}else{if(r[2])return X.apply(n,t.getElementsByTagName(e)),n;if((s=r[3])&&_.getElementsByClassName)return X.apply(n,t.getElementsByClassName(s)),n}if(_.qsa&&(!M||!M.test(e))){if(f=p=F,m=t,h=9===a&&e,1===a&&"object"!==t.nodeName.toLowerCase()){for(u=w(e),(p=t.getAttribute("id"))?f=p.replace(ve,"\\$&"):t.setAttribute("id",f),f="[id='"+f+"'] ",l=u.length;l--;)u[l]=f+c(u[l]);m=ye.test(e)&&d(t.parentNode)||t,h=u.join(",")}if(h)try{return X.apply(n,m.querySelectorAll(h)),n}catch(e){}finally{p||t.removeAttribute("id")}}}return S(e.replace(se,"$1"),t,n,o);
}function t(){function e(n,o){return t.push(n+" ")>x.cacheLength&&delete e[t.shift()],e[n+" "]=o}var t=[];return e}function n(e){return e[F]=!0,e}function o(e){var t=N.createElement("div");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function r(e,t){for(var n=e.split("|"),o=e.length;o--;)x.attrHandle[n[o]]=t}function i(e,t){var n=t&&e,o=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||K)-(~e.sourceIndex||K);if(o)return o;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function s(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function a(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function l(e){return n(function(t){return t=+t,n(function(n,o){for(var r,i=e([],n.length,t),s=i.length;s--;)n[r=i[s]]&&(n[r]=!(o[r]=n[r]))})})}function d(e){return e&&typeof e.getElementsByTagName!==G&&e}function u(){}function c(e){for(var t=0,n=e.length,o="";t<n;t++)o+=e[t].value;return o}function p(e,t,n){var o=t.dir,r=n&&"parentNode"===o,i=U++;return t.first?function(t,n,i){for(;t=t[o];)if(1===t.nodeType||r)return e(t,n,i)}:function(t,n,s){var a,l,d=[z,i];if(s){for(;t=t[o];)if((1===t.nodeType||r)&&e(t,n,s))return!0}else for(;t=t[o];)if(1===t.nodeType||r){if(l=t[F]||(t[F]={}),(a=l[o])&&a[0]===z&&a[1]===i)return d[2]=a[2];if(l[o]=d,d[2]=e(t,n,s))return!0}}}function f(e){return e.length>1?function(t,n,o){for(var r=e.length;r--;)if(!e[r](t,n,o))return!1;return!0}:e[0]}function m(t,n,o){for(var r=0,i=n.length;r<i;r++)e(t,n[r],o);return o}function h(e,t,n,o,r){for(var i,s=[],a=0,l=e.length,d=null!=t;a<l;a++)(i=e[a])&&(n&&!n(i,o,r)||(s.push(i),d&&t.push(a)));return s}function g(e,t,o,r,i,s){return r&&!r[F]&&(r=g(r)),i&&!i[F]&&(i=g(i,s)),n(function(n,s,a,l){var d,u,c,p=[],f=[],g=s.length,y=n||m(t||"*",a.nodeType?[a]:a,[]),v=!e||!n&&t?y:h(y,p,e,a,l),b=o?i||(n?e:g||r)?[]:s:v;if(o&&o(v,b,a,l),r)for(d=h(b,f),r(d,[],a,l),u=d.length;u--;)(c=d[u])&&(b[f[u]]=!(v[f[u]]=c));if(n){if(i||e){if(i){for(d=[],u=b.length;u--;)(c=b[u])&&d.push(v[u]=c);i(null,b=[],d,l)}for(u=b.length;u--;)(c=b[u])&&(d=i?ee.call(n,c):p[u])>-1&&(n[d]=!(s[d]=c))}}else b=h(b===s?b.splice(g,b.length):b),i?i(null,s,b,l):X.apply(s,b)})}function y(e){for(var t,n,o,r=e.length,i=x.relative[e[0].type],s=i||x.relative[" "],a=i?1:0,l=p(function(e){return e===t},s,!0),d=p(function(e){return ee.call(t,e)>-1},s,!0),u=[function(e,n,o){return!i&&(o||n!==T)||((t=n).nodeType?l(e,n,o):d(e,n,o))}];a<r;a++)if(n=x.relative[e[a].type])u=[p(f(u),n)];else{if(n=x.filter[e[a].type].apply(null,e[a].matches),n[F]){for(o=++a;o<r&&!x.relative[e[o].type];o++);return g(a>1&&f(u),a>1&&c(e.slice(0,a-1).concat({value:" "===e[a-2].type?"*":""})).replace(se,"$1"),n,a<o&&y(e.slice(a,o)),o<r&&y(e=e.slice(o)),o<r&&c(e))}u.push(n)}return f(u)}function v(t,o){var r=o.length>0,i=t.length>0,s=function(n,s,a,l,d){var u,c,p,f=0,m="0",g=n&&[],y=[],v=T,b=n||i&&x.find.TAG("*",d),_=z+=null==v?1:Math.random()||.1,C=b.length;for(d&&(T=s!==N&&s);m!==C&&null!=(u=b[m]);m++){if(i&&u){for(c=0;p=t[c++];)if(p(u,s,a)){l.push(u);break}d&&(z=_)}r&&((u=!p&&u)&&f--,n&&g.push(u))}if(f+=m,r&&m!==f){for(c=0;p=o[c++];)p(g,y,s,a);if(n){if(f>0)for(;m--;)g[m]||y[m]||(y[m]=J.call(l));y=h(y)}X.apply(l,y),d&&!n&&y.length>0&&f+o.length>1&&e.uniqueSort(l)}return d&&(z=_,T=v),g};return r?n(s):s}var b,_,x,C,E,w,j,S,T,P,k,I,N,R,D,M,O,A,L,F="sizzle"+-new Date,B=window.document,z=0,U=0,H=t(),W=t(),V=t(),q=function(e,t){return e===t&&(k=!0),0},G="undefined",K=1<<31,$={}.hasOwnProperty,Y=[],J=Y.pop,Z=Y.push,X=Y.push,Q=Y.slice,ee=Y.indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(this[t]===e)return t;return-1},te="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ne="[\\x20\\t\\r\\n\\f]",oe="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",re="\\["+ne+"*("+oe+")(?:"+ne+"*([*^$|!~]?=)"+ne+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+oe+"))|)"+ne+"*\\]",ie=":("+oe+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+re+")*)|.*)\\)|)",se=new RegExp("^"+ne+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ne+"+$","g"),ae=new RegExp("^"+ne+"*,"+ne+"*"),le=new RegExp("^"+ne+"*([>+~]|"+ne+")"+ne+"*"),de=new RegExp("="+ne+"*([^\\]'\"]*?)"+ne+"*\\]","g"),ue=new RegExp(ie),ce=new RegExp("^"+oe+"$"),pe={ID:new RegExp("^#("+oe+")"),CLASS:new RegExp("^\\.("+oe+")"),TAG:new RegExp("^("+oe+"|[*])"),ATTR:new RegExp("^"+re),PSEUDO:new RegExp("^"+ie),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ne+"*(even|odd|(([+-]|)(\\d*)n|)"+ne+"*(?:([+-]|)"+ne+"*(\\d+)|))"+ne+"*\\)|)","i"),bool:new RegExp("^(?:"+te+")$","i"),needsContext:new RegExp("^"+ne+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ne+"*((?:-\\d)?\\d*)"+ne+"*\\)|)(?=[^-]|$)","i")},fe=/^(?:input|select|textarea|button)$/i,me=/^h\d$/i,he=/^[^{]+\{\s*\[native \w/,ge=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ye=/[+~]/,ve=/'|\\/g,be=new RegExp("\\\\([\\da-f]{1,6}"+ne+"?|("+ne+")|.)","ig"),_e=function(e,t,n){var o="0x"+t-65536;return o!==o||n?t:o<0?String.fromCharCode(o+65536):String.fromCharCode(o>>10|55296,1023&o|56320)};try{X.apply(Y=Q.call(B.childNodes),B.childNodes),Y[B.childNodes.length].nodeType}catch(e){X={apply:Y.length?function(e,t){Z.apply(e,Q.call(t))}:function(e,t){for(var n=e.length,o=0;e[n++]=t[o++];);e.length=n-1}}}_=e.support={},E=e.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},I=e.setDocument=function(e){function t(e){try{return e.top}catch(e){}return null}var n,r=e?e.ownerDocument||e:B,s=r.defaultView;return r!==N&&9===r.nodeType&&r.documentElement?(N=r,R=r.documentElement,D=!E(r),s&&s!==t(s)&&(s.addEventListener?s.addEventListener("unload",function(){I()},!1):s.attachEvent&&s.attachEvent("onunload",function(){I()})),_.attributes=o(function(e){return e.className="i",!e.getAttribute("className")}),_.getElementsByTagName=o(function(e){return e.appendChild(r.createComment("")),!e.getElementsByTagName("*").length}),_.getElementsByClassName=he.test(r.getElementsByClassName),_.getById=o(function(e){return R.appendChild(e).id=F,!r.getElementsByName||!r.getElementsByName(F).length}),_.getById?(x.find.ID=function(e,t){if(typeof t.getElementById!==G&&D){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},x.filter.ID=function(e){var t=e.replace(be,_e);return function(e){return e.getAttribute("id")===t}}):(delete x.find.ID,x.filter.ID=function(e){var t=e.replace(be,_e);return function(e){var n=typeof e.getAttributeNode!==G&&e.getAttributeNode("id");return n&&n.value===t}}),x.find.TAG=_.getElementsByTagName?function(e,t){if(typeof t.getElementsByTagName!==G)return t.getElementsByTagName(e)}:function(e,t){var n,o=[],r=0,i=t.getElementsByTagName(e);if("*"===e){for(;n=i[r++];)1===n.nodeType&&o.push(n);return o}return i},x.find.CLASS=_.getElementsByClassName&&function(e,t){if(D)return t.getElementsByClassName(e)},O=[],M=[],(_.qsa=he.test(r.querySelectorAll))&&(o(function(e){e.innerHTML="<select msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&M.push("[*^$]="+ne+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||M.push("\\["+ne+"*(?:value|"+te+")"),e.querySelectorAll(":checked").length||M.push(":checked")}),o(function(e){var t=r.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&M.push("name"+ne+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||M.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),M.push(",.*:")})),(_.matchesSelector=he.test(A=R.matches||R.webkitMatchesSelector||R.mozMatchesSelector||R.oMatchesSelector||R.msMatchesSelector))&&o(function(e){_.disconnectedMatch=A.call(e,"div"),A.call(e,"[s!='']:x"),O.push("!=",ie)}),M=M.length&&new RegExp(M.join("|")),O=O.length&&new RegExp(O.join("|")),n=he.test(R.compareDocumentPosition),L=n||he.test(R.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,o=t&&t.parentNode;return e===o||!(!o||1!==o.nodeType||!(n.contains?n.contains(o):e.compareDocumentPosition&&16&e.compareDocumentPosition(o)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},q=n?function(e,t){if(e===t)return k=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n?n:(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&n||!_.sortDetached&&t.compareDocumentPosition(e)===n?e===r||e.ownerDocument===B&&L(B,e)?-1:t===r||t.ownerDocument===B&&L(B,t)?1:P?ee.call(P,e)-ee.call(P,t):0:4&n?-1:1)}:function(e,t){if(e===t)return k=!0,0;var n,o=0,s=e.parentNode,a=t.parentNode,l=[e],d=[t];if(!s||!a)return e===r?-1:t===r?1:s?-1:a?1:P?ee.call(P,e)-ee.call(P,t):0;if(s===a)return i(e,t);for(n=e;n=n.parentNode;)l.unshift(n);for(n=t;n=n.parentNode;)d.unshift(n);for(;l[o]===d[o];)o++;return o?i(l[o],d[o]):l[o]===B?-1:d[o]===B?1:0},r):N},e.matches=function(t,n){return e(t,null,null,n)},e.matchesSelector=function(t,n){if((t.ownerDocument||t)!==N&&I(t),n=n.replace(de,"='$1']"),_.matchesSelector&&D&&(!O||!O.test(n))&&(!M||!M.test(n)))try{var o=A.call(t,n);if(o||_.disconnectedMatch||t.document&&11!==t.document.nodeType)return o}catch(e){}return e(n,N,null,[t]).length>0},e.contains=function(e,t){return(e.ownerDocument||e)!==N&&I(e),L(e,t)},e.attr=function(e,t){(e.ownerDocument||e)!==N&&I(e);var n=x.attrHandle[t.toLowerCase()],o=n&&$.call(x.attrHandle,t.toLowerCase())?n(e,t,!D):void 0;return void 0!==o?o:_.attributes||!D?e.getAttribute(t):(o=e.getAttributeNode(t))&&o.specified?o.value:null},e.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},e.uniqueSort=function(e){var t,n=[],o=0,r=0;if(k=!_.detectDuplicates,P=!_.sortStable&&e.slice(0),e.sort(q),k){for(;t=e[r++];)t===e[r]&&(o=n.push(r));for(;o--;)e.splice(n[o],1)}return P=null,e},C=e.getText=function(e){var t,n="",o=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=C(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[o++];)n+=C(t);return n},x=e.selectors={cacheLength:50,createPseudo:n,match:pe,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(be,_e),e[3]=(e[3]||e[4]||e[5]||"").replace(be,_e),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||e.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&e.error(t[0]),t},PSEUDO:function(e){var t,n=!e[6]&&e[2];return pe.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&ue.test(n)&&(t=w(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(be,_e).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=H[e+" "];return t||(t=new RegExp("(^|"+ne+")"+e+"("+ne+"|$)"))&&H(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==G&&e.getAttribute("class")||"")})},ATTR:function(t,n,o){return function(r){var i=e.attr(r,t);return null==i?"!="===n:!n||(i+="","="===n?i===o:"!="===n?i!==o:"^="===n?o&&0===i.indexOf(o):"*="===n?o&&i.indexOf(o)>-1:"$="===n?o&&i.slice(-o.length)===o:"~="===n?(" "+i+" ").indexOf(o)>-1:"|="===n&&(i===o||i.slice(0,o.length+1)===o+"-"))}},CHILD:function(e,t,n,o,r){var i="nth"!==e.slice(0,3),s="last"!==e.slice(-4),a="of-type"===t;return 1===o&&0===r?function(e){return!!e.parentNode}:function(t,n,l){var d,u,c,p,f,m,h=i!==s?"nextSibling":"previousSibling",g=t.parentNode,y=a&&t.nodeName.toLowerCase(),v=!l&&!a;if(g){if(i){for(;h;){for(c=t;c=c[h];)if(a?c.nodeName.toLowerCase()===y:1===c.nodeType)return!1;m=h="only"===e&&!m&&"nextSibling"}return!0}if(m=[s?g.firstChild:g.lastChild],s&&v){for(u=g[F]||(g[F]={}),d=u[e]||[],f=d[0]===z&&d[1],p=d[0]===z&&d[2],c=f&&g.childNodes[f];c=++f&&c&&c[h]||(p=f=0)||m.pop();)if(1===c.nodeType&&++p&&c===t){u[e]=[z,f,p];break}}else if(v&&(d=(t[F]||(t[F]={}))[e])&&d[0]===z)p=d[1];else for(;(c=++f&&c&&c[h]||(p=f=0)||m.pop())&&((a?c.nodeName.toLowerCase()!==y:1!==c.nodeType)||!++p||(v&&((c[F]||(c[F]={}))[e]=[z,p]),c!==t)););return p-=r,p===o||p%o===0&&p/o>=0}}},PSEUDO:function(t,o){var r,i=x.pseudos[t]||x.setFilters[t.toLowerCase()]||e.error("unsupported pseudo: "+t);return i[F]?i(o):i.length>1?(r=[t,t,"",o],x.setFilters.hasOwnProperty(t.toLowerCase())?n(function(e,t){for(var n,r=i(e,o),s=r.length;s--;)n=ee.call(e,r[s]),e[n]=!(t[n]=r[s])}):function(e){return i(e,0,r)}):i}},pseudos:{not:n(function(e){var t=[],o=[],r=j(e.replace(se,"$1"));return r[F]?n(function(e,t,n,o){for(var i,s=r(e,null,o,[]),a=e.length;a--;)(i=s[a])&&(e[a]=!(t[a]=i))}):function(e,n,i){return t[0]=e,r(t,null,i,o),!o.pop()}}),has:n(function(t){return function(n){return e(t,n).length>0}}),contains:n(function(e){return e=e.replace(be,_e),function(t){return(t.textContent||t.innerText||C(t)).indexOf(e)>-1}}),lang:n(function(t){return ce.test(t||"")||e.error("unsupported lang: "+t),t=t.replace(be,_e).toLowerCase(),function(e){var n;do if(n=D?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return n=n.toLowerCase(),n===t||0===n.indexOf(t+"-");while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=window.location&&window.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===R},focus:function(e){return e===N.activeElement&&(!N.hasFocus||N.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!x.pseudos.empty(e)},header:function(e){return me.test(e.nodeName)},input:function(e){return fe.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:l(function(){return[0]}),last:l(function(e,t){return[t-1]}),eq:l(function(e,t,n){return[n<0?n+t:n]}),even:l(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:l(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:l(function(e,t,n){for(var o=n<0?n+t:n;--o>=0;)e.push(o);return e}),gt:l(function(e,t,n){for(var o=n<0?n+t:n;++o<t;)e.push(o);return e})}},x.pseudos.nth=x.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})x.pseudos[b]=s(b);for(b in{submit:!0,reset:!0})x.pseudos[b]=a(b);return u.prototype=x.filters=x.pseudos,x.setFilters=new u,w=e.tokenize=function(t,n){var o,r,i,s,a,l,d,u=W[t+" "];if(u)return n?0:u.slice(0);for(a=t,l=[],d=x.preFilter;a;){o&&!(r=ae.exec(a))||(r&&(a=a.slice(r[0].length)||a),l.push(i=[])),o=!1,(r=le.exec(a))&&(o=r.shift(),i.push({value:o,type:r[0].replace(se," ")}),a=a.slice(o.length));for(s in x.filter)!(r=pe[s].exec(a))||d[s]&&!(r=d[s](r))||(o=r.shift(),i.push({value:o,type:s,matches:r}),a=a.slice(o.length));if(!o)break}return n?a.length:a?e.error(t):W(t,l).slice(0)},j=e.compile=function(e,t){var n,o=[],r=[],i=V[e+" "];if(!i){for(t||(t=w(e)),n=t.length;n--;)i=y(t[n]),i[F]?o.push(i):r.push(i);i=V(e,v(r,o)),i.selector=e}return i},S=e.select=function(e,t,n,o){var r,i,s,a,l,u="function"==typeof e&&e,p=!o&&w(e=u.selector||e);if(n=n||[],1===p.length){if(i=p[0]=p[0].slice(0),i.length>2&&"ID"===(s=i[0]).type&&_.getById&&9===t.nodeType&&D&&x.relative[i[1].type]){if(t=(x.find.ID(s.matches[0].replace(be,_e),t)||[])[0],!t)return n;u&&(t=t.parentNode),e=e.slice(i.shift().value.length)}for(r=pe.needsContext.test(e)?0:i.length;r--&&(s=i[r],!x.relative[a=s.type]);)if((l=x.find[a])&&(o=l(s.matches[0].replace(be,_e),ye.test(i[0].type)&&d(t.parentNode)||t))){if(i.splice(r,1),e=o.length&&c(i),!e)return X.apply(n,o),n;break}}return(u||j(e,p))(o,t,!D,n,ye.test(e)&&d(t.parentNode)||t),n},_.sortStable=F.split("").sort(q).join("")===F,_.detectDuplicates=!!k,I(),_.sortDetached=o(function(e){return 1&e.compareDocumentPosition(N.createElement("div"))}),o(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||r("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),_.attributes&&o(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||r("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),o(function(e){return null==e.getAttribute("disabled")})||r(te,function(e,t,n){var o;if(!n)return e[t]===!0?t.toLowerCase():(o=e.getAttributeNode(t))&&o.specified?o.value:null}),e}),l("tinymce.core.util.Arr",[],function(){function e(e){var t,n,o=e;if(!d(e))for(o=[],t=0,n=e.length;t<n;t++)o[t]=e[t];return o}function t(e,t,n){var o,r;if(!e)return 0;if(n=n||e,void 0!==e.length){for(o=0,r=e.length;o<r;o++)if(t.call(n,e[o],o,e)===!1)return 0}else for(o in e)if(e.hasOwnProperty(o)&&t.call(n,e[o],o,e)===!1)return 0;return 1}function n(e,n){var o=[];return t(e,function(t,r){o.push(n(t,r,e))}),o}function o(e,n){var o=[];return t(e,function(t,r){n&&!n(t,r,e)||o.push(t)}),o}function r(e,t){var n,o;if(e)for(n=0,o=e.length;n<o;n++)if(e[n]===t)return n;return-1}function i(e,t,n,o){var r=0;for(arguments.length<3&&(n=e[0]);r<e.length;r++)n=t.call(o,n,e[r],r);return n}function s(e,t,n){var o,r;for(o=0,r=e.length;o<r;o++)if(t.call(n,e[o],o,e))return o;return-1}function a(e,t,n){var o=s(e,t,n);if(o!==-1)return e[o]}function l(e){return e[e.length-1]}var d=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};return{isArray:d,toArray:e,each:t,map:n,filter:o,indexOf:r,reduce:i,findIndex:s,find:a,last:l}}),l("tinymce.core.util.Tools",["tinymce.core.Env","tinymce.core.util.Arr"],function(e,t){function n(e){return null===e||void 0===e?"":(""+e).replace(f,"")}function o(e,n){return n?!("array"!=n||!t.isArray(e))||typeof e==n:void 0!==e}function r(e,t,n){var o;for(e=e||[],t=t||",","string"==typeof e&&(e=e.split(t)),n=n||{},o=e.length;o--;)n[e[o]]={};return n}function i(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function s(e,t,n){var o,r,i,s,a,l=this,d=0;if(e=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(e),i=e[3].match(/(^|\.)(\w+)$/i)[2],r=l.createNS(e[3].replace(/\.\w+$/,""),n),!r[i]){if("static"==e[2])return r[i]=t,void(this.onCreate&&this.onCreate(e[2],e[3],r[i]));t[i]||(t[i]=function(){},d=1),r[i]=t[i],l.extend(r[i].prototype,t),e[5]&&(o=l.resolve(e[5]).prototype,s=e[5].match(/\.(\w+)$/i)[1],a=r[i],d?r[i]=function(){return o[s].apply(this,arguments)}:r[i]=function(){return this.parent=o[s],a.apply(this,arguments)},r[i].prototype[i]=r[i],l.each(o,function(e,t){r[i].prototype[t]=o[t]}),l.each(t,function(e,t){o[t]?r[i].prototype[t]=function(){return this.parent=o[t],e.apply(this,arguments)}:t!=i&&(r[i].prototype[t]=e)})),l.each(t.static,function(e,t){r[i][t]=e})}}function a(e,t){var n,o,r,i,s=arguments;for(n=1,o=s.length;n<o;n++){t=s[n];for(r in t)t.hasOwnProperty(r)&&(i=t[r],void 0!==i&&(e[r]=i))}return e}function l(e,n,o,r){r=r||this,e&&(o&&(e=e[o]),t.each(e,function(e,t){return n.call(r,e,t,o)!==!1&&void l(e,n,o,r)}))}function d(e,t){var n,o;for(t=t||window,e=e.split("."),n=0;n<e.length;n++)o=e[n],t[o]||(t[o]={}),t=t[o];return t}function u(e,t){var n,o;for(t=t||window,e=e.split("."),n=0,o=e.length;n<o&&(t=t[e[n]],t);n++);return t}function c(e,r){return!e||o(e,"array")?e:t.map(e.split(r||","),n)}function p(t){var n=e.cacheSuffix;return n&&(t+=(t.indexOf("?")===-1?"?":"&")+n),t}var f=/^\s*|\s*$/g;return{trim:n,isArray:t.isArray,is:o,toArray:t.toArray,makeMap:r,each:t.each,map:t.map,grep:t.filter,inArray:t.indexOf,hasOwn:i,extend:a,create:s,walk:l,createNS:d,resolve:u,explode:c,_addCacheSuffix:p}}),l("tinymce.core.dom.DomQuery",["tinymce.core.dom.EventUtils","tinymce.core.dom.Sizzle","tinymce.core.util.Tools","tinymce.core.Env"],function(e,t,n,o){function r(e){return"undefined"!=typeof e}function i(e){return"string"==typeof e}function s(e){return e&&e==e.window}function a(e,t){var n,o,r;for(t=t||C,r=t.createElement("div"),n=t.createDocumentFragment(),r.innerHTML=e;o=r.firstChild;)n.appendChild(o);return n}function l(e,t,n,o){var r;if(i(t))t=a(t,g(e[0]));else if(t.length&&!t.nodeType){if(t=c.makeArray(t),o)for(r=t.length-1;r>=0;r--)l(e,t[r],n,o);else for(r=0;r<t.length;r++)l(e,t[r],n,o);return e}if(t.nodeType)for(r=e.length;r--;)n.call(e[r],t);return e}function d(e,t){return e&&t&&(" "+e.className+" ").indexOf(" "+t+" ")!==-1}function u(e,t,n){var o,r;return t=c(t)[0],e.each(function(){var e=this;n&&o==e.parentNode?r.appendChild(e):(o=e.parentNode,r=t.cloneNode(!1),e.parentNode.insertBefore(r,e),r.appendChild(e))}),e}function c(e,t){return new c.fn.init(e,t)}function p(e,t){var n;if(t.indexOf)return t.indexOf(e);for(n=t.length;n--;)if(t[n]===e)return n;return-1}function f(e){return null===e||e===x?"":(""+e).replace(M,"")}function m(e,t){var n,o,r,i,s;if(e)if(n=e.length,n===i){for(o in e)if(e.hasOwnProperty(o)&&(s=e[o],t.call(s,o,s)===!1))break}else for(r=0;r<n&&(s=e[r],t.call(s,r,s)!==!1);r++);return e}function h(e,t){var n=[];return m(e,function(e,o){t(o,e)&&n.push(o)}),n}function g(e){return e?9==e.nodeType?e:e.ownerDocument:C}function y(e,t,n){var o=[],r=e[t];for("string"!=typeof n&&n instanceof c&&(n=n[0]);r&&9!==r.nodeType;){if(void 0!==n){if(r===n)break;if("string"==typeof n&&c(r).is(n))break}1===r.nodeType&&o.push(r),r=r[t]}return o}function v(e,t,n,o){var r=[];for(o instanceof c&&(o=o[0]);e;e=e[t])if(!n||e.nodeType===n){if(void 0!==o){if(e===o)break;if("string"==typeof o&&c(e).is(o))break}r.push(e)}return r}function b(e,t,n){for(e=e[t];e;e=e[t])if(e.nodeType==n)return e;return null}function _(e,t,n){m(n,function(n,o){e[n]=e[n]||{},e[n][t]=o})}var x,C=document,E=Array.prototype.push,w=Array.prototype.slice,j=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,S=e.Event,T=n.makeMap("children,contents,next,prev"),P=n.makeMap("fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom"," "),k=n.makeMap("checked compact declare defer disabled ismap multiple nohref noshade nowrap readonly selected"," "),I={for:"htmlFor",class:"className",readonly:"readOnly"},N={float:"cssFloat"},R={},D={},M=/^\s*|\s*$/g;return c.fn=c.prototype={constructor:c,selector:"",context:null,length:0,init:function(e,t){var n,o,r=this;if(!e)return r;if(e.nodeType)return r.context=r[0]=e,r.length=1,r;if(t&&t.nodeType)r.context=t;else{if(t)return c(e).attr(t);r.context=t=document}if(i(e)){if(r.selector=e,n="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:j.exec(e),!n)return c(t).find(e);if(n[1])for(o=a(e,g(t)).firstChild;o;)E.call(r,o),o=o.nextSibling;else{if(o=g(t).getElementById(n[2]),!o)return r;if(o.id!==n[2])return r.find(e);r.length=1,r[0]=o}}else this.add(e,!1);return r},toArray:function(){return n.toArray(this)},add:function(e,t){var n,o,r=this;if(i(e))return r.add(c(e));if(t!==!1)for(n=c.unique(r.toArray().concat(c.makeArray(e))),r.length=n.length,o=0;o<n.length;o++)r[o]=n[o];else E.apply(r,c.makeArray(e));return r},attr:function(e,t){var n,o=this;if("object"==typeof e)m(e,function(e,t){o.attr(e,t)});else{if(!r(t)){if(o[0]&&1===o[0].nodeType){if(n=R[e],n&&n.get)return n.get(o[0],e);if(k[e])return o.prop(e)?e:x;t=o[0].getAttribute(e,2),null===t&&(t=x)}return t}this.each(function(){var n;if(1===this.nodeType){if(n=R[e],n&&n.set)return void n.set(this,t);null===t?this.removeAttribute(e,2):this.setAttribute(e,t,2)}})}return o},removeAttr:function(e){return this.attr(e,null)},prop:function(e,t){var n=this;if(e=I[e]||e,"object"==typeof e)m(e,function(e,t){n.prop(e,t)});else{if(!r(t))return n[0]&&n[0].nodeType&&e in n[0]?n[0][e]:t;this.each(function(){1==this.nodeType&&(this[e]=t)})}return n},css:function(e,t){function n(e){return e.replace(/-(\D)/g,function(e,t){return t.toUpperCase()})}function o(e){return e.replace(/[A-Z]/g,function(e){return"-"+e})}var i,s,a=this;if("object"==typeof e)m(e,function(e,t){a.css(e,t)});else if(r(t))e=n(e),"number"!=typeof t||P[e]||(t+="px"),a.each(function(){var n=this.style;if(s=D[e],s&&s.set)return void s.set(this,t);try{this.style[N[e]||e]=t}catch(e){}null!==t&&""!==t||(n.removeProperty?n.removeProperty(o(e)):n.removeAttribute(e))});else{if(i=a[0],s=D[e],s&&s.get)return s.get(i);if(i.ownerDocument.defaultView)try{return i.ownerDocument.defaultView.getComputedStyle(i,null).getPropertyValue(o(e))}catch(e){return x}else if(i.currentStyle)return i.currentStyle[n(e)]}return a},remove:function(){for(var e,t=this,n=this.length;n--;)e=t[n],S.clean(e),e.parentNode&&e.parentNode.removeChild(e);return this},empty:function(){for(var e,t=this,n=this.length;n--;)for(e=t[n];e.firstChild;)e.removeChild(e.firstChild);return this},html:function(e){var t,n=this;if(r(e)){t=n.length;try{for(;t--;)n[t].innerHTML=e}catch(o){c(n[t]).empty().append(e)}return n}return n[0]?n[0].innerHTML:""},text:function(e){var t,n=this;if(r(e)){for(t=n.length;t--;)"innerText"in n[t]?n[t].innerText=e:n[0].textContent=e;return n}return n[0]?n[0].innerText||n[0].textContent:""},append:function(){return l(this,arguments,function(e){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.appendChild(e)})},prepend:function(){return l(this,arguments,function(e){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.insertBefore(e,this.firstChild)},!0)},before:function(){var e=this;return e[0]&&e[0].parentNode?l(e,arguments,function(e){this.parentNode.insertBefore(e,this)}):e},after:function(){var e=this;return e[0]&&e[0].parentNode?l(e,arguments,function(e){this.parentNode.insertBefore(e,this.nextSibling)},!0):e},appendTo:function(e){return c(e).append(this),this},prependTo:function(e){return c(e).prepend(this),this},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){return u(this,e)},wrapAll:function(e){return u(this,e,!0)},wrapInner:function(e){return this.each(function(){c(this).contents().wrapAll(e)}),this},unwrap:function(){return this.parent().each(function(){c(this).replaceWith(this.childNodes)})},clone:function(){var e=[];return this.each(function(){e.push(this.cloneNode(!0))}),c(e)},addClass:function(e){return this.toggleClass(e,!0)},removeClass:function(e){return this.toggleClass(e,!1)},toggleClass:function(e,t){var n=this;return"string"!=typeof e?n:(e.indexOf(" ")!==-1?m(e.split(" "),function(){n.toggleClass(this,t)}):n.each(function(n,o){var r,i;i=d(o,e),i!==t&&(r=o.className,i?o.className=f((" "+r+" ").replace(" "+e+" "," ")):o.className+=r?" "+e:e)}),n)},hasClass:function(e){return d(this[0],e)},each:function(e){return m(this,e)},on:function(e,t){return this.each(function(){S.bind(this,e,t)})},off:function(e,t){return this.each(function(){S.unbind(this,e,t)})},trigger:function(e){return this.each(function(){"object"==typeof e?S.fire(this,e.type,e):S.fire(this,e)})},show:function(){return this.css("display","")},hide:function(){return this.css("display","none")},slice:function(){return new c(w.apply(this,arguments))},eq:function(e){return e===-1?this.slice(e):this.slice(e,+e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},find:function(e){var t,n,o=[];for(t=0,n=this.length;t<n;t++)c.find(e,this[t],o);return c(o)},filter:function(e){return c("function"==typeof e?h(this.toArray(),function(t,n){return e(n,t)}):c.filter(e,this.toArray()))},closest:function(e){var t=[];return e instanceof c&&(e=e[0]),this.each(function(n,o){for(;o;){if("string"==typeof e&&c(o).is(e)){t.push(o);break}if(o==e){t.push(o);break}o=o.parentNode}}),c(t)},offset:function(e){var t,n,o,r,i=0,s=0;return e?this.css(e):(t=this[0],t&&(n=t.ownerDocument,o=n.documentElement,t.getBoundingClientRect&&(r=t.getBoundingClientRect(),i=r.left+(o.scrollLeft||n.body.scrollLeft)-o.clientLeft,s=r.top+(o.scrollTop||n.body.scrollTop)-o.clientTop)),{left:i,top:s})},push:E,sort:[].sort,splice:[].splice},n.extend(c,{extend:n.extend,makeArray:function(e){return s(e)||e.nodeType?[e]:n.toArray(e)},inArray:p,isArray:n.isArray,each:m,trim:f,grep:h,find:t,expr:t.selectors,unique:t.uniqueSort,text:t.getText,contains:t.contains,filter:function(e,t,n){var o=t.length;for(n&&(e=":not("+e+")");o--;)1!=t[o].nodeType&&t.splice(o,1);return t=1===t.length?c.find.matchesSelector(t[0],e)?[t[0]]:[]:c.find.matches(e,t)}}),m({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return y(e,"parentNode")},next:function(e){return b(e,"nextSibling",1)},prev:function(e){return b(e,"previousSibling",1)},children:function(e){return v(e.firstChild,"nextSibling",1)},contents:function(e){return n.toArray(("iframe"===e.nodeName?e.contentDocument||e.contentWindow.document:e).childNodes)}},function(e,t){c.fn[e]=function(n){var o=this,r=[];return o.each(function(){var e=t.call(r,this,n,r);e&&(c.isArray(e)?r.push.apply(r,e):r.push(e))}),this.length>1&&(T[e]||(r=c.unique(r)),0===e.indexOf("parents")&&(r=r.reverse())),r=c(r),n?r.filter(n):r}}),m({parentsUntil:function(e,t){return y(e,"parentNode",t)},nextUntil:function(e,t){return v(e,"nextSibling",1,t).slice(1)},prevUntil:function(e,t){return v(e,"previousSibling",1,t).slice(1)}},function(e,t){c.fn[e]=function(n,o){var r=this,i=[];return r.each(function(){var e=t.call(i,this,n,i);e&&(c.isArray(e)?i.push.apply(i,e):i.push(e))}),this.length>1&&(i=c.unique(i),0!==e.indexOf("parents")&&"prevUntil"!==e||(i=i.reverse())),i=c(i),o?i.filter(o):i}}),c.fn.is=function(e){return!!e&&this.filter(e).length>0},c.fn.init.prototype=c.fn,c.overrideDefaults=function(e){function t(o,r){return n=n||e(),0===arguments.length&&(o=n.element),r||(r=n.context),new t.fn.init(o,r)}var n;return c.extend(t,this),t},o.ie&&o.ie<8&&(_(R,"get",{maxlength:function(e){var t=e.maxLength;return 2147483647===t?x:t},size:function(e){var t=e.size;return 20===t?x:t},class:function(e){return e.className},style:function(e){var t=e.style.cssText;return 0===t.length?x:t}}),_(R,"set",{class:function(e,t){e.className=t},style:function(e,t){e.style.cssText=t}})),o.ie&&o.ie<9&&(N.float="styleFloat",_(D,"set",{opacity:function(e,t){var n=e.style;null===t||""===t?n.removeAttribute("filter"):(n.zoom=1,n.filter="alpha(opacity="+100*t+")")}})),c.attrHooks=R,c.cssHooks=D,c}),l("tinymce.core.html.Styles",[],function(){return function(e,t){function n(e,t,n,o){function r(e){return e=parseInt(e,10).toString(16),e.length>1?e:"0"+e}return"#"+r(t)+r(n)+r(o)}var o,r,i,s,a=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,l=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,d=/\s*([^:]+):\s*([^;]+);?/g,u=/\s+$/,c={},p="\ufeff";for(e=e||{},t&&(i=t.getValidStyles(),s=t.getInvalidStyles()),r=("\\\" \\' \\; \\: ; : "+p).split(" "),o=0;o<r.length;o++)c[r[o]]=p+o,c[p+o]=r[o];return{toHex:function(e){return e.replace(a,n)},parse:function(t){function r(e,t,n){var r,i,s,a;if(r=C[e+"-top"+t],r&&(i=C[e+"-right"+t],i&&(s=C[e+"-bottom"+t],s&&(a=C[e+"-left"+t])))){var l=[r,i,s,a];for(o=l.length-1;o--&&l[o]===l[o+1];);o>-1&&n||(C[e+t]=o==-1?l[0]:l.join(" "),delete C[e+"-top"+t],delete C[e+"-right"+t],delete C[e+"-bottom"+t],delete C[e+"-left"+t])}}function i(e){var t,n=C[e];if(n){for(n=n.split(" "),t=n.length;t--;)if(n[t]!==n[0])return!1;return C[e]=n[0],!0}}function s(e,t,n,o){i(t)&&i(n)&&i(o)&&(C[e]=C[t]+" "+C[n]+" "+C[o],delete C[t],delete C[n],delete C[o])}function f(e){return x=!0,c[e]}function m(e,t){return x&&(e=e.replace(/\uFEFF[0-9]/g,function(e){return c[e]})),t||(e=e.replace(/\\([\'\";:])/g,"$1")),e}function h(e){return String.fromCharCode(parseInt(e.slice(1),16))}function g(e){return e.replace(/\\[0-9a-f]+/gi,h);
}function y(t,n,o,r,i,s){if(i=i||s)return i=m(i),"'"+i.replace(/\'/g,"\\'")+"'";if(n=m(n||o||r),!e.allow_script_urls){var a=n.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(a))return"";if(!e.allow_svg_data_urls&&/^data:image\/svg/i.test(a))return""}return E&&(n=E.call(w,n,"style")),"url('"+n.replace(/\'/g,"\\'")+"')"}var v,b,_,x,C={},E=e.url_converter,w=e.url_converter_scope||this;if(t){for(t=t.replace(/[\u0000-\u001F]/g,""),t=t.replace(/\\[\"\';:\uFEFF]/g,f).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(e){return e.replace(/[;:]/g,f)});v=d.exec(t);)if(d.lastIndex=v.index+v[0].length,b=v[1].replace(u,"").toLowerCase(),_=v[2].replace(u,""),b&&_){if(b=g(b),_=g(_),b.indexOf(p)!==-1||b.indexOf('"')!==-1)continue;if(!e.allow_script_urls&&("behavior"==b||/expression\s*\(|\/\*|\*\//.test(_)))continue;"font-weight"===b&&"700"===_?_="bold":"color"!==b&&"background-color"!==b||(_=_.toLowerCase()),_=_.replace(a,n),_=_.replace(l,y),C[b]=x?m(_,!0):_}r("border","",!0),r("border","-width"),r("border","-color"),r("border","-style"),r("padding",""),r("margin",""),s("border","border-width","border-style","border-color"),"medium none"===C.border&&delete C.border,"none"===C["border-image"]&&delete C["border-image"]}return C},serialize:function(e,t){function n(t){var n,o,r,s;if(n=i[t])for(o=0,r=n.length;o<r;o++)t=n[o],s=e[t],s&&(l+=(l.length>0?" ":"")+t+": "+s+";")}function o(e,t){var n;return n=s["*"],(!n||!n[e])&&(n=s[t],!n||!n[e])}var r,a,l="";if(t&&i)n("*"),n(t);else for(r in e)a=e[r],!a||s&&!o(r,t)||(l+=(l.length>0?" ":"")+r+": "+a+";");return l}}}}),l("tinymce.core.dom.TreeWalker",[],function(){return function(e,t){function n(e,n,o,r){var i,s;if(e){if(!r&&e[n])return e[n];if(e!=t){if(i=e[o])return i;for(s=e.parentNode;s&&s!=t;s=s.parentNode)if(i=s[o])return i}}}function o(e,n,o,r){var i,s,a;if(e){if(i=e[o],t&&i===t)return;if(i){if(!r)for(a=i[n];a;a=a[n])if(!a[n])return a;return i}if(s=e.parentNode,s&&s!==t)return s}}var r=e;this.current=function(){return r},this.next=function(e){return r=n(r,"firstChild","nextSibling",e)},this.prev=function(e){return r=n(r,"lastChild","previousSibling",e)},this.prev2=function(e){return r=o(r,"lastChild","previousSibling",e)}}}),l("tinymce.core.html.Entities",["tinymce.core.util.Tools"],function(e){function t(e){var t;return t=document.createElement("div"),t.innerHTML=e,t.textContent||t.innerText||e}function n(e,t){var n,o,i,s={};if(e){for(e=e.split(","),t=t||10,n=0;n<e.length;n+=2)o=String.fromCharCode(parseInt(e[n],t)),r[o]||(i="&"+e[n+1]+";",s[o]=i,s[i]=o);return s}}var o,r,i,s=e.makeMap,a=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,l=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,d=/[<>&\"\']/g,u=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,c={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"};r={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},i={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},o=n("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32);var p={encodeRaw:function(e,t){return e.replace(t?a:l,function(e){return r[e]||e})},encodeAllRaw:function(e){return(""+e).replace(d,function(e){return r[e]||e})},encodeNumeric:function(e,t){return e.replace(t?a:l,function(e){return e.length>1?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":r[e]||"&#"+e.charCodeAt(0)+";"})},encodeNamed:function(e,t,n){return n=n||o,e.replace(t?a:l,function(e){return r[e]||n[e]||e})},getEncodeFunc:function(e,t){function i(e,n){return e.replace(n?a:l,function(e){return void 0!==r[e]?r[e]:void 0!==t[e]?t[e]:e.length>1?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":"&#"+e.charCodeAt(0)+";"})}function d(e,n){return p.encodeNamed(e,n,t)}return t=n(t)||o,e=s(e.replace(/\+/g,",")),e.named&&e.numeric?i:e.named?t?d:p.encodeNamed:e.numeric?p.encodeNumeric:p.encodeRaw},decode:function(e){return e.replace(u,function(e,n){return n?(n="x"===n.charAt(0).toLowerCase()?parseInt(n.substr(1),16):parseInt(n,10),n>65535?(n-=65536,String.fromCharCode(55296+(n>>10),56320+(1023&n))):c[n]||String.fromCharCode(n)):i[e]||o[e]||t(e)})}};return p}),l("tinymce.core.dom.Range",["tinymce.core.util.Tools"],function(e){function t(n){function o(){return O.createDocumentFragment()}function r(e,t){E(B,e,t)}function i(e,t){E(z,e,t)}function s(e){r(e.parentNode,G(e))}function a(e){r(e.parentNode,G(e)+1)}function l(e){i(e.parentNode,G(e))}function d(e){i(e.parentNode,G(e)+1)}function u(e){e?(M[W]=M[H],M[V]=M[U]):(M[H]=M[W],M[U]=M[V]),M.collapsed=B}function c(e){s(e),d(e)}function p(e){r(e,0),i(e,1===e.nodeType?e.childNodes.length:e.nodeValue.length)}function f(e,t){var n=M[H],o=M[U],r=M[W],i=M[V],s=t.startContainer,a=t.startOffset,l=t.endContainer,d=t.endOffset;return 0===e?C(n,o,s,a):1===e?C(r,i,s,a):2===e?C(r,i,l,d):3===e?C(n,o,l,d):void 0}function m(){w(F)}function h(){return w(A)}function g(){return w(L)}function y(e){var t,o,r=this[H],i=this[U];3!==r.nodeType&&4!==r.nodeType||!r.nodeValue?(r.childNodes.length>0&&(o=r.childNodes[i]),o?r.insertBefore(e,o):3==r.nodeType?n.insertAfter(e,r):r.appendChild(e)):i?i>=r.nodeValue.length?n.insertAfter(e,r):(t=r.splitText(i),r.parentNode.insertBefore(e,t)):r.parentNode.insertBefore(e,r)}function v(e){var t=M.extractContents();M.insertNode(e),e.appendChild(t),M.selectNode(e)}function b(){return q(new t(n),{startContainer:M[H],startOffset:M[U],endContainer:M[W],endOffset:M[V],collapsed:M.collapsed,commonAncestorContainer:M.commonAncestorContainer})}function _(e,t){var n;if(3==e.nodeType)return e;if(t<0)return e;for(n=e.firstChild;n&&t>0;)--t,n=n.nextSibling;return n?n:e}function x(){return M[H]==M[W]&&M[U]==M[V]}function C(e,t,o,r){var i,s,a,l,d,u;if(e==o)return t==r?0:t<r?-1:1;for(i=o;i&&i.parentNode!=e;)i=i.parentNode;if(i){for(s=0,a=e.firstChild;a!=i&&s<t;)s++,a=a.nextSibling;return t<=s?-1:1}for(i=e;i&&i.parentNode!=o;)i=i.parentNode;if(i){for(s=0,a=o.firstChild;a!=i&&s<r;)s++,a=a.nextSibling;return s<r?-1:1}for(l=n.findCommonAncestor(e,o),d=e;d&&d.parentNode!=l;)d=d.parentNode;for(d||(d=l),u=o;u&&u.parentNode!=l;)u=u.parentNode;if(u||(u=l),d==u)return 0;for(a=l.firstChild;a;){if(a==d)return-1;if(a==u)return 1;a=a.nextSibling}}function E(e,t,o){var r,i;for(e?(M[H]=t,M[U]=o):(M[W]=t,M[V]=o),r=M[W];r.parentNode;)r=r.parentNode;for(i=M[H];i.parentNode;)i=i.parentNode;i==r?C(M[H],M[U],M[W],M[V])>0&&M.collapse(e):M.collapse(e),M.collapsed=x(),M.commonAncestorContainer=n.findCommonAncestor(M[H],M[W])}function w(e){var t,n,o,r,i,s,a,l=0,d=0;if(M[H]==M[W])return j(e);for(t=M[W],n=t.parentNode;n;t=n,n=n.parentNode){if(n==M[H])return S(t,e);++l}for(t=M[H],n=t.parentNode;n;t=n,n=n.parentNode){if(n==M[W])return T(t,e);++d}for(o=d-l,r=M[H];o>0;)r=r.parentNode,o--;for(i=M[W];o<0;)i=i.parentNode,o++;for(s=r.parentNode,a=i.parentNode;s!=a;s=s.parentNode,a=a.parentNode)r=s,i=a;return P(r,i,e)}function j(e){var t,n,r,i,s,a,l,d,u;if(e!=F&&(t=o()),M[U]==M[V])return t;if(3==M[H].nodeType){if(n=M[H].nodeValue,r=n.substring(M[U],M[V]),e!=L&&(i=M[H],d=M[U],u=M[V]-M[U],0===d&&u>=i.nodeValue.length-1?i.parentNode.removeChild(i):i.deleteData(d,u),M.collapse(B)),e==F)return;return r.length>0&&t.appendChild(O.createTextNode(r)),t}for(i=_(M[H],M[U]),s=M[V]-M[U];i&&s>0;)a=i.nextSibling,l=R(i,e),t&&t.appendChild(l),--s,i=a;return e!=L&&M.collapse(B),t}function S(e,t){var n,r,i,s,a,l;if(t!=F&&(n=o()),r=k(e,t),n&&n.appendChild(r),i=G(e),s=i-M[U],s<=0)return t!=L&&(M.setEndBefore(e),M.collapse(z)),n;for(r=e.previousSibling;s>0;)a=r.previousSibling,l=R(r,t),n&&n.insertBefore(l,n.firstChild),--s,r=a;return t!=L&&(M.setEndBefore(e),M.collapse(z)),n}function T(e,t){var n,r,i,s,a,l;for(t!=F&&(n=o()),i=I(e,t),n&&n.appendChild(i),r=G(e),++r,s=M[V]-r,i=e.nextSibling;i&&s>0;)a=i.nextSibling,l=R(i,t),n&&n.appendChild(l),--s,i=a;return t!=L&&(M.setStartAfter(e),M.collapse(B)),n}function P(e,t,n){var r,i,s,a,l,d,u;for(n!=F&&(i=o()),r=I(e,n),i&&i.appendChild(r),s=G(e),a=G(t),++s,l=a-s,d=e.nextSibling;l>0;)u=d.nextSibling,r=R(d,n),i&&i.appendChild(r),d=u,--l;return r=k(t,n),i&&i.appendChild(r),n!=L&&(M.setStartAfter(e),M.collapse(B)),i}function k(e,t){var n,o,r,i,s,a=_(M[W],M[V]-1),l=a!=M[W];if(a==e)return N(a,l,z,t);for(n=a.parentNode,o=N(n,z,z,t);n;){for(;a;)r=a.previousSibling,i=N(a,l,z,t),t!=F&&o.insertBefore(i,o.firstChild),l=B,a=r;if(n==e)return o;a=n.previousSibling,n=n.parentNode,s=N(n,z,z,t),t!=F&&s.appendChild(o),o=s}}function I(e,t){var n,o,r,i,s,a=_(M[H],M[U]),l=a!=M[H];if(a==e)return N(a,l,B,t);for(n=a.parentNode,o=N(n,z,B,t);n;){for(;a;)r=a.nextSibling,i=N(a,l,B,t),t!=F&&o.appendChild(i),l=B,a=r;if(n==e)return o;a=n.nextSibling,n=n.parentNode,s=N(n,z,B,t),t!=F&&s.appendChild(o),o=s}}function N(e,t,o,r){var i,s,a,l,d;if(t)return R(e,r);if(3==e.nodeType){if(i=e.nodeValue,o?(l=M[U],s=i.substring(l),a=i.substring(0,l)):(l=M[V],s=i.substring(0,l),a=i.substring(l)),r!=L&&(e.nodeValue=a),r==F)return;return d=n.clone(e,z),d.nodeValue=s,d}if(r!=F)return n.clone(e,z)}function R(e,t){return t!=F?t==L?n.clone(e,B):e:void e.parentNode.removeChild(e)}function D(){return n.create("body",null,g()).outerText}var M=this,O=n.doc,A=0,L=1,F=2,B=!0,z=!1,U="startOffset",H="startContainer",W="endContainer",V="endOffset",q=e.extend,G=n.nodeIndex;return q(M,{startContainer:O,startOffset:0,endContainer:O,endOffset:0,collapsed:B,commonAncestorContainer:O,START_TO_START:0,START_TO_END:1,END_TO_END:2,END_TO_START:3,setStart:r,setEnd:i,setStartBefore:s,setStartAfter:a,setEndBefore:l,setEndAfter:d,collapse:u,selectNode:c,selectNodeContents:p,compareBoundaryPoints:f,deleteContents:m,extractContents:h,cloneContents:g,insertNode:y,surroundContents:v,cloneRange:b,toStringIE:D}),M}return t.prototype.toString=function(){return this.toStringIE()},t}),d("global!Array",Array),d("global!Error",Error),l("ephox.katamari.api.Fun",["global!Array","global!Error"],function(e,t){var n=function(){},o=function(e,t){return function(){return e(t.apply(null,arguments))}},r=function(e){return function(){return e}},i=function(e){return e},s=function(e,t){return e===t},a=function(t){for(var n=new e(arguments.length-1),o=1;o<arguments.length;o++)n[o-1]=arguments[o];return function(){for(var o=new e(arguments.length),r=0;r<o.length;r++)o[r]=arguments[r];var i=n.concat(o);return t.apply(null,i)}},l=function(e){return function(){return!e.apply(null,arguments)}},d=function(e){return function(){throw new t(e)}},u=function(e){return e()},c=function(e){e()},p=r(!1),f=r(!0);return{noop:n,compose:o,constant:r,identity:i,tripleEquals:s,curry:a,not:l,die:d,apply:u,call:c,never:p,always:f}}),d("global!Object",Object),l("ephox.katamari.api.Option",["ephox.katamari.api.Fun","global!Object"],function(e,t){var n=e.never,o=e.always,r=function(){return i},i=function(){var i=function(e){return e.isNone()},s=function(e){return e()},a=function(e){return e},l=function(){},d={fold:function(e,t){return e()},is:n,isSome:n,isNone:o,getOr:a,getOrThunk:s,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},or:a,orThunk:s,map:r,ap:r,each:l,bind:r,flatten:r,exists:n,forall:o,filter:r,equals:i,equals_:i,toArray:function(){return[]},toString:e.constant("none()")};return t.freeze&&t.freeze(d),d}(),s=function(e){var t=function(){return e},a=function(){return u},l=function(t){return s(t(e))},d=function(t){return t(e)},u={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:o,isNone:n,getOr:t,getOrThunk:t,getOrDie:t,or:a,orThunk:a,map:l,ap:function(t){return t.fold(r,function(t){return s(t(e))})},each:function(t){t(e)},bind:d,flatten:t,exists:d,forall:d,filter:function(t){return t(e)?u:i},equals:function(t){return t.is(e)},equals_:function(t,o){return t.fold(n,function(t){return o(e,t)})},toArray:function(){return[e]},toString:function(){return"some("+e+")"}};return u},a=function(e){return null===e||void 0===e?i:s(e)};return{some:s,none:r,from:a}}),d("global!String",String),l("ephox.katamari.api.Arr",["ephox.katamari.api.Option","global!Array","global!Error","global!String"],function(e,t,n,o){var r=function(){var e=t.prototype.indexOf,n=function(t,n){return e.call(t,n)},o=function(e,t){return _(e,t)};return void 0===e?o:n}(),i=function(t,n){var o=r(t,n);return o===-1?e.none():e.some(o)},s=function(e,t){return r(e,t)>-1},a=function(e,t){return b(e,t).isSome()},l=function(e,t){for(var n=[],o=0;o<e;o++)n.push(t(o));return n},d=function(e,t){for(var n=[],o=0;o<e.length;o+=t){var r=e.slice(o,o+t);n.push(r)}return n},u=function(e,n){for(var o=e.length,r=new t(o),i=0;i<o;i++){var s=e[i];r[i]=n(s,i,e)}return r},c=function(e,t){for(var n=0,o=e.length;n<o;n++){var r=e[n];t(r,n,e)}},p=function(e,t){for(var n=e.length-1;n>=0;n--){var o=e[n];t(o,n,e)}},f=function(e,t){for(var n=[],o=[],r=0,i=e.length;r<i;r++){var s=e[r],a=t(s,r,e)?n:o;a.push(s)}return{pass:n,fail:o}},m=function(e,t){for(var n=[],o=0,r=e.length;o<r;o++){var i=e[o];t(i,o,e)&&n.push(i)}return n},h=function(e,t){if(0===e.length)return[];for(var n=t(e[0]),o=[],r=[],i=0,s=e.length;i<s;i++){var a=e[i],l=t(a);l!==n&&(o.push(r),r=[]),n=l,r.push(a)}return 0!==r.length&&o.push(r),o},g=function(e,t,n){return p(e,function(e){n=t(n,e)}),n},y=function(e,t,n){return c(e,function(e){n=t(n,e)}),n},v=function(t,n){for(var o=0,r=t.length;o<r;o++){var i=t[o];if(n(i,o,t))return e.some(i)}return e.none()},b=function(t,n){for(var o=0,r=t.length;o<r;o++){var i=t[o];if(n(i,o,t))return e.some(o)}return e.none()},_=function(e,t){for(var n=0,o=e.length;n<o;++n)if(e[n]===t)return n;return-1},x=t.prototype.push,C=function(e){for(var o=[],r=0,i=e.length;r<i;++r){if(!t.prototype.isPrototypeOf(e[r]))throw new n("Arr.flatten item "+r+" was not an array, input: "+e);x.apply(o,e[r])}return o},E=function(e,t){var n=u(e,t);return C(n)},w=function(e,t){for(var n=0,o=e.length;n<o;++n){var r=e[n];if(t(r,n,e)!==!0)return!1}return!0},j=function(e,t){return e.length===t.length&&w(e,function(e,n){return e===t[n]})},S=t.prototype.slice,T=function(e){var t=S.call(e,0);return t.reverse(),t},P=function(e,t){return m(e,function(e){return!s(t,e)})},k=function(e,t){for(var n={},r=0,i=e.length;r<i;r++){var s=e[r];n[o(s)]=t(s,r)}return n},I=function(e){return[e]},N=function(e,t){var n=S.call(e,0);return n.sort(t),n};return{map:u,each:c,eachr:p,partition:f,filter:m,groupBy:h,indexOf:i,foldr:g,foldl:y,find:v,findIndex:b,flatten:C,bind:E,forall:w,exists:a,contains:s,equal:j,reverse:T,chunk:d,difference:P,mapToObject:k,pure:I,sort:N,range:l}}),d("global!setTimeout",setTimeout),l("ephox.katamari.api.LazyValue",["ephox.katamari.api.Arr","ephox.katamari.api.Option","global!setTimeout"],function(e,t,n){var o=function(r){var i=t.none(),s=[],a=function(e){return o(function(t){l(function(n){t(e(n))})})},l=function(e){u()?p(e):s.push(e)},d=function(e){i=t.some(e),c(s),s=[]},u=function(){return i.isSome()},c=function(t){e.each(t,p)},p=function(e){i.each(function(t){n(function(){e(t)},0)})};return r(d),{get:l,map:a,isReady:u}},r=function(e){return o(function(t){t(e)})};return{nu:o,pure:r}}),l("ephox.katamari.async.Bounce",["global!Array","global!setTimeout"],function(e,t){var n=function(n){return function(){var o=e.prototype.slice.call(arguments),r=this;t(function(){n.apply(r,o)},0)}};return{bounce:n}}),l("ephox.katamari.api.Future",["ephox.katamari.api.LazyValue","ephox.katamari.async.Bounce"],function(e,t){var n=function(o){var r=function(e){o(t.bounce(e))},i=function(e){return n(function(t){r(function(n){var o=e(n);t(o)})})},s=function(e){return n(function(t){r(function(n){e(n).get(t)})})},a=function(e){return n(function(t){r(function(n){e.get(t)})})},l=function(){return e.nu(r)};return{map:i,bind:s,anonBind:a,toLazy:l,get:r}},o=function(e){return n(function(t){t(e)})};return{nu:n,pure:o}}),l("ephox.katamari.async.AsyncValues",["ephox.katamari.api.Arr"],function(e){var t=function(t,n){return n(function(n){var o=[],r=0,i=function(e){return function(i){o[e]=i,r++,r>=t.length&&n(o)}};0===t.length?n([]):e.each(t,function(e,t){e.get(i(t))})})};return{par:t}}),l("ephox.katamari.api.Futures",["ephox.katamari.api.Arr","ephox.katamari.api.Future","ephox.katamari.async.AsyncValues"],function(e,t,n){var o=function(e){return n.par(e,t.nu)},r=function(t,n){var r=e.map(t,n);return o(r)},i=function(e,t){return function(n){return t(n).bind(e)}};return{par:o,mapM:r,compose:i}}),l("ephox.katamari.api.Result",["ephox.katamari.api.Fun","ephox.katamari.api.Option"],function(e,t){var n=function(o){var r=function(e){return o===e},i=function(e){return n(o)},s=function(e){return n(o)},a=function(e){return n(e(o))},l=function(e){e(o)},d=function(e){return e(o)},u=function(e,t){return t(o)},c=function(e){return e(o)},p=function(e){return e(o)},f=function(){return t.some(o)};return{is:r,isValue:e.constant(!0),isError:e.constant(!1),getOr:e.constant(o),getOrThunk:e.constant(o),getOrDie:e.constant(o),or:i,orThunk:s,fold:u,map:a,each:l,bind:d,exists:c,forall:p,toOption:f}},o=function(n){var r=function(e){return e()},i=function(){return e.die(n)()},s=function(e){return e},a=function(e){return e()},l=function(e){return o(n)},d=function(e){return o(n)},u=function(e,t){return e(n)};return{is:e.constant(!1),isValue:e.constant(!1),isError:e.constant(!0),getOr:e.identity,getOrThunk:r,getOrDie:i,or:s,orThunk:a,fold:u,map:l,each:e.noop,bind:d,exists:e.constant(!1),forall:e.constant(!0),toOption:t.none}};return{value:n,error:o}}),l("tinymce.core.dom.StyleSheetLoader",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Future","ephox.katamari.api.Futures","ephox.katamari.api.Result","tinymce.core.util.Delay","tinymce.core.util.Tools"],function(e,t,n,o,r,i,s){"use strict";return function(a,l){function d(e){a.getElementsByTagName("head")[0].appendChild(e)}function u(e,t,n){function o(){for(var e=b.passed,t=e.length;t--;)e[t]();b.status=2,b.passed=[],b.failed=[]}function r(){for(var e=b.failed,t=e.length;t--;)e[t]();b.status=3,b.passed=[],b.failed=[]}function l(){var e=navigator.userAgent.match(/WebKit\/(\d*)/);return!!(e&&e[1]<536)}function u(e,t){e()||((new Date).getTime()-v<c?i.setTimeout(t):r())}function m(){u(function(){for(var e,t,n=a.styleSheets,r=n.length;r--;)if(e=n[r],t=e.ownerNode?e.ownerNode:e.owningElement,t&&t.id===g.id)return o(),!0},m)}function h(){u(function(){try{var e=y.sheet.cssRules;return o(),!!e}catch(e){}},h)}var g,y,v,b;if(e=s._addCacheSuffix(e),f[e]?b=f[e]:(b={passed:[],failed:[]},f[e]=b),t&&b.passed.push(t),n&&b.failed.push(n),1!=b.status){if(2==b.status)return void o();if(3==b.status)return void r();if(b.status=1,g=a.createElement("link"),g.rel="stylesheet",g.type="text/css",g.id="u"+p++,g.async=!1,g.defer=!1,v=(new Date).getTime(),"onload"in g&&!l())g.onload=m,g.onerror=r;else{if(navigator.userAgent.indexOf("Firefox")>0)return y=a.createElement("style"),y.textContent='@import "'+e+'"',h(),void d(y);m()}d(g),g.href=e}}var c,p=0,f={};l=l||{},c=l.maxLoadTime||5e3;var m=function(e){return n.nu(function(n){u(e,t.compose(n,t.constant(r.value(e))),t.compose(n,t.constant(r.error(e))))})},h=function(e){return e.fold(t.identity,t.identity)},g=function(t,n,r){o.par(e.map(t,m)).get(function(t){var o=e.partition(t,function(e){return e.isValue()});o.fail.length>0?r(o.fail.map(h)):n(o.pass.map(h))})};return{load:u,loadAll:g}}}),l("tinymce.core.html.Schema",["tinymce.core.util.Tools"],function(e){function t(t,n){return t=e.trim(t),t?t.split(n||" "):[]}function n(e){function n(e,n,o){function r(e,t){var n,o,r={};for(n=0,o=e.length;n<o;n++)r[e[n]]=t||{};return r}var a,l,d;for(o=o||[],n=n||"","string"==typeof o&&(o=t(o)),e=t(e),a=e.length;a--;)l=t([s,n].join(" ")),d={attributes:r(l),attributesOrder:l,children:r(o,i)},f[e[a]]=d}function o(e,n){var o,r,i,s;for(e=t(e),o=e.length,n=t(n);o--;)for(r=f[e[o]],i=0,s=n.length;i<s;i++)r.attributes[n[i]]={},r.attributesOrder.push(n[i])}var s,l,d,u,c,p,f={};return r[e]?r[e]:(s="id accesskey class dir lang style tabindex title role",l="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",d="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!=e&&(s+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",l+=" article aside details dialog figure header footer hgroup section nav",d+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"),"html5-strict"!=e&&(s+=" xml:lang",p="acronym applet basefont big font strike tt",d=[d,p].join(" "),a(t(p),function(e){n(e,"",d)}),c="center dir isindex noframes",l=[l,c].join(" "),u=[l,d].join(" "),a(t(c),function(e){n(e,"",u)})),u=u||[l,d].join(" "),n("html","manifest","head body"),n("head","","base command link meta noscript script style title"),n("title hr noscript br"),n("base","href target"),n("link","href rel media hreflang type sizes hreflang"),n("meta","name http-equiv content charset"),n("style","media type scoped"),n("script","src async defer type charset"),n("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",u),n("address dt dd div caption","",u),n("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",d),n("blockquote","cite",u),n("ol","reversed start type","li"),n("ul","","li"),n("li","value",u),n("dl","","dt dd"),n("a","href target rel media hreflang type",d),n("q","cite",d),n("ins del","cite datetime",u),n("img","src sizes srcset alt usemap ismap width height"),n("iframe","src name width height",u),n("embed","src type width height"),n("object","data type typemustmatch name usemap form width height",[u,"param"].join(" ")),n("param","name value"),n("map","name",[u,"area"].join(" ")),n("area","alt coords shape href target rel media hreflang type"),n("table","border","caption colgroup thead tfoot tbody tr"+("html4"==e?" col":"")),n("colgroup","span","col"),n("col","span"),n("tbody thead tfoot","","tr"),n("tr","","td th"),n("td","colspan rowspan headers",u),n("th","colspan rowspan headers scope abbr",u),n("form","accept-charset action autocomplete enctype method name novalidate target",u),n("fieldset","disabled form name",[u,"legend"].join(" ")),n("label","form for",d),n("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),n("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"==e?u:d),n("select","disabled form multiple name required size","option optgroup"),n("optgroup","disabled label","option"),n("option","disabled label selected value"),n("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),n("menu","type label",[u,"li"].join(" ")),n("noscript","",u),"html4"!=e&&(n("wbr"),n("ruby","",[d,"rt rp"].join(" ")),n("figcaption","",u),n("mark rt rp summary bdi","",d),n("canvas","width height",u),n("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[u,"track source"].join(" ")),n("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[u,"track source"].join(" ")),n("picture","","img source"),n("source","src srcset type media sizes"),n("track","kind src srclang label default"),n("datalist","",[d,"option"].join(" ")),n("article section nav aside header footer","",u),n("hgroup","","h1 h2 h3 h4 h5 h6"),n("figure","",[u,"figcaption"].join(" ")),n("time","datetime",d),n("dialog","open",u),n("command","type label icon disabled checked radiogroup command"),n("output","for form name",d),n("progress","value max",d),n("meter","value min max low high optimum",d),n("details","open",[u,"summary"].join(" ")),n("keygen","autofocus challenge disabled form keytype name")),"html5-strict"!=e&&(o("script","language xml:space"),o("style","xml:space"),o("object","declare classid code codebase codetype archive standby align border hspace vspace"),o("embed","align name hspace vspace"),o("param","valuetype type"),o("a","charset name rev shape coords"),o("br","clear"),o("applet","codebase archive code object alt name width height align hspace vspace"),o("img","name longdesc align border hspace vspace"),o("iframe","longdesc frameborder marginwidth marginheight scrolling align"),o("font basefont","size color face"),o("input","usemap align"),o("select","onchange"),o("textarea"),o("h1 h2 h3 h4 h5 h6 div p legend caption","align"),o("ul","type compact"),o("li","type"),o("ol dl menu dir","compact"),o("pre","width xml:space"),o("hr","align noshade size width"),o("isindex","prompt"),o("table","summary width frame rules cellspacing cellpadding align bgcolor"),o("col","width align char charoff valign"),o("colgroup","width align char charoff valign"),o("thead","align char charoff valign"),o("tr","align char charoff valign bgcolor"),o("th","axis align char charoff valign nowrap bgcolor width height"),o("form","accept"),o("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),o("tfoot","align char charoff valign"),o("tbody","align char charoff valign"),o("area","nohref"),o("body","background bgcolor text link vlink alink")),"html4"!=e&&(o("input button select textarea","autofocus"),o("input textarea","placeholder"),o("a","download"),o("link script img","crossorigin"),o("iframe","sandbox seamless allowfullscreen")),a(t("a form meter progress dfn"),function(e){f[e]&&delete f[e].children[e]}),delete f.caption.children.table,delete f.script,r[e]=f,f)}function o(e,t){var n;return e&&(n={},"string"==typeof e&&(e={"*":e}),a(e,function(e,o){n[o]=n[o.toUpperCase()]="map"==t?s(e,/[, ]/):d(e,/[, ]/)})),n}var r={},i={},s=e.makeMap,a=e.each,l=e.extend,d=e.explode,u=e.inArray;return function(e){function i(t,n,o){var i=e[t];return i?i=s(i,/[, ]/,s(i.toUpperCase(),/[, ]/)):(i=r[t],i||(i=s(n," ",s(n.toUpperCase()," ")),i=l(i,o),r[t]=i)),i}function c(e){return new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$")}function p(e){var n,o,r,i,a,l,d,p,f,m,h,g,y,v,b,_,x,C,E,w=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)\])?$/,j=/^([!\-])?(\w+::\w+|[^=:<]+)?(?:([=:<])(.*))?$/,S=/[*?+]/;if(e)for(e=t(e,","),N["@"]&&(_=N["@"].attributes,x=N["@"].attributesOrder),n=0,o=e.length;n<o;n++)if(a=w.exec(e[n])){if(v=a[1],f=a[2],b=a[3],p=a[5],g={},y=[],l={attributes:g,attributesOrder:y},"#"===v&&(l.paddEmpty=!0),"-"===v&&(l.removeEmpty=!0),"!"===a[4]&&(l.removeEmptyAttrs=!0),_){for(C in _)g[C]=_[C];y.push.apply(y,x)}if(p)for(p=t(p,"|"),r=0,i=p.length;r<i;r++)if(a=j.exec(p[r])){if(d={},h=a[1],m=a[2].replace(/::/g,":"),v=a[3],E=a[4],"!"===h&&(l.attributesRequired=l.attributesRequired||[],l.attributesRequired.push(m),d.required=!0),"-"===h){delete g[m],y.splice(u(y,m),1);continue}v&&("="===v&&(l.attributesDefault=l.attributesDefault||[],l.attributesDefault.push({name:m,value:E}),d.defaultValue=E),":"===v&&(l.attributesForced=l.attributesForced||[],l.attributesForced.push({name:m,value:E}),d.forcedValue=E),"<"===v&&(d.validValues=s(E,"?"))),S.test(m)?(l.attributePatterns=l.attributePatterns||[],d.pattern=c(m),l.attributePatterns.push(d)):(g[m]||y.push(m),g[m]=d)}_||"@"!=f||(_=g,x=y),b&&(l.outputName=f,N[b]=l),S.test(f)?(l.pattern=c(f),D.push(l)):N[f]=l}}function f(e){N={},D=[],p(e),a(b,function(e,t){R[t]=e.children})}function m(e){var n=/^(~)?(.+)$/;e&&(r.text_block_elements=r.block_elements=null,a(t(e,","),function(e){var t=n.exec(e),o="~"===t[1],r=o?"span":"div",i=t[2];if(R[i]=R[r],M[i]=r,o||(j[i.toUpperCase()]={},j[i]={}),!N[i]){var s=N[r];s=l({},s),delete s.removeEmptyAttrs,delete s.removeEmpty,N[i]=s}a(R,function(e,t){e[r]&&(R[t]=e=l({},R[t]),e[i]=e[r])})}))}function h(n){var o=/^([+\-]?)(\w+)\[([^\]]+)\]$/;r[e.schema]=null,n&&a(t(n,","),function(e){var n,r,i=o.exec(e);i&&(r=i[1],n=r?R[i[2]]:R[i[2]]={"#comment":{}},n=R[i[2]],a(t(i[3],"|"),function(e){"-"===r?delete n[e]:n[e]={}}))})}function g(e){var t,n=N[e];if(n)return n;for(t=D.length;t--;)if(n=D[t],n.pattern.test(e))return n}var y,v,b,_,x,C,E,w,j,S,T,P,k,I=this,N={},R={},D=[],M={},O={};e=e||{},b=n(e.schema),e.verify_html===!1&&(e.valid_elements="*[*]"),y=o(e.valid_styles),v=o(e.invalid_styles,"map"),w=o(e.valid_classes,"map"),_=i("whitespace_elements","pre script noscript style textarea video audio iframe object code"),x=i("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),C=i("short_ended_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),E=i("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls"),S=i("non_empty_elements","td th iframe video audio object script pre code",C),T=i("move_caret_before_on_enter_elements","table",S),P=i("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside nav figure"),j=i("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption",P),k=i("text_inline_elements","span strong b em i font strike u var cite dfn code mark q sup sub samp"),a((e.special||"script noscript style textarea").split(" "),function(e){O[e]=new RegExp("</"+e+"[^>]*>","gi")}),e.valid_elements?f(e.valid_elements):(a(b,function(e,t){N[t]={attributes:e.attributes,attributesOrder:e.attributesOrder},R[t]=e.children}),"html5"!=e.schema&&a(t("strong/b em/i"),function(e){e=t(e,"/"),N[e[1]].outputName=e[0]}),a(t("ol ul sub sup blockquote span font a table tbody tr strong em b i"),function(e){N[e]&&(N[e].removeEmpty=!0);
}),a(t("p h1 h2 h3 h4 h5 h6 th td pre div address caption"),function(e){N[e].paddEmpty=!0}),a(t("span"),function(e){N[e].removeEmptyAttrs=!0})),m(e.custom_elements),h(e.valid_children),p(e.extended_valid_elements),h("+ol[ul|ol],+ul[ul|ol]"),a({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},function(e,n){N[n]&&(N[n].parentsRequired=t(e))}),e.invalid_elements&&a(d(e.invalid_elements),function(e){N[e]&&delete N[e]}),g("span")||p("span[!data-mce-type|*]"),I.children=R,I.getValidStyles=function(){return y},I.getInvalidStyles=function(){return v},I.getValidClasses=function(){return w},I.getBoolAttrs=function(){return E},I.getBlockElements=function(){return j},I.getTextBlockElements=function(){return P},I.getTextInlineElements=function(){return k},I.getShortEndedElements=function(){return C},I.getSelfClosingElements=function(){return x},I.getNonEmptyElements=function(){return S},I.getMoveCaretBeforeOnEnterElements=function(){return T},I.getWhiteSpaceElements=function(){return _},I.getSpecialElements=function(){return O},I.isValidChild=function(e,t){var n=R[e.toLowerCase()];return!(!n||!n[t.toLowerCase()])},I.isValid=function(e,t){var n,o,r=g(e);if(r){if(!t)return!0;if(r.attributes[t])return!0;if(n=r.attributePatterns)for(o=n.length;o--;)if(n[o].pattern.test(e))return!0}return!1},I.getElementRule=g,I.getCustomElements=function(){return M},I.addValidElements=p,I.setValidElements=f,I.addCustomElements=m,I.addValidChildren=h,I.elements=N}}),l("tinymce.core.dom.DOMUtils",["tinymce.core.dom.DomQuery","tinymce.core.dom.EventUtils","tinymce.core.dom.Range","tinymce.core.dom.Sizzle","tinymce.core.dom.StyleSheetLoader","tinymce.core.dom.TreeWalker","tinymce.core.Env","tinymce.core.html.Entities","tinymce.core.html.Schema","tinymce.core.html.Styles","tinymce.core.util.Tools"],function(e,t,n,o,r,i,s,a,l,d,u){function c(e,t){var n,o={},r=t.keep_values;return n={set:function(n,o,r){t.url_converter&&(o=t.url_converter.call(t.url_converter_scope||e,o,r,n[0])),n.attr("data-mce-"+r,o).attr(r,o)},get:function(e,t){return e.attr("data-mce-"+t)||e.attr(t)}},o={style:{set:function(e,t){return null!==t&&"object"==typeof t?void e.css(t):(r&&e.attr("data-mce-style",t),void e.attr("style",t))},get:function(t){var n=t.attr("data-mce-style")||t.attr("style");return n=e.serializeStyle(e.parseStyle(n),t[0].nodeName)}}},r&&(o.href=o.src=n),o}function p(e,t){var n=t.attr("style");n=e.serializeStyle(e.parseStyle(n),t[0].nodeName),n||(n=null),t.attr("data-mce-style",n)}function f(e,t){var n,o,r=0;if(e)for(n=e.nodeType,e=e.previousSibling;e;e=e.previousSibling)o=e.nodeType,(!t||3!=o||o!=n&&e.nodeValue.length)&&(r++,n=o);return r}function m(n,o){var i,s=this;s.doc=n,s.win=window,s.files={},s.counter=0,s.stdMode=!b||n.documentMode>=8,s.boxModel=!b||"CSS1Compat"==n.compatMode||s.stdMode,s.styleSheetLoader=new r(n),s.boundEvents=[],s.settings=o=o||{},s.schema=o.schema?o.schema:new l({}),s.styles=new d({url_converter:o.url_converter,url_converter_scope:o.url_converter_scope},o.schema),s.fixDoc(n),s.events=o.ownEvents?new t(o.proxy):t.Event,s.attrHooks=c(s,o),i=o.schema?o.schema.getBlockElements():{},s.$=e.overrideDefaults(function(){return{context:n,element:s.getRoot()}}),s.isBlock=function(e){if(!e)return!1;var t=e.nodeType;return t?!(1!==t||!i[e.nodeName]):!!i[e]}}var h=u.each,g=u.is,y=u.grep,v=u.trim,b=s.ie,_=/^([a-z0-9],?)+$/i,x=/^[ \t\r\n]*$/;return m.prototype={$$:function(e){return"string"==typeof e&&(e=this.get(e)),this.$(e)},root:null,fixDoc:function(e){var t,n=this.settings;if(b&&n.schema){"abbr article aside audio canvas details figcaption figure footer header hgroup mark menu meter nav output progress section summary time video".replace(/\w+/g,function(t){e.createElement(t)});for(t in n.schema.getCustomElements())e.createElement(t)}},clone:function(e,t){var n,o,r=this;return!b||1!==e.nodeType||t?e.cloneNode(t):(o=r.doc,t?n.firstChild:(n=o.createElement(e.nodeName),h(r.getAttribs(e),function(t){r.setAttrib(n,t.nodeName,r.getAttrib(e,t.nodeName))}),n))},getRoot:function(){var e=this;return e.settings.root_element||e.doc.body},getViewPort:function(e){var t,n;return e=e?e:this.win,t=e.document,n=this.boxModel?t.documentElement:t.body,{x:e.pageXOffset||n.scrollLeft,y:e.pageYOffset||n.scrollTop,w:e.innerWidth||n.clientWidth,h:e.innerHeight||n.clientHeight}},getRect:function(e){var t,n,o=this;return e=o.get(e),t=o.getPos(e),n=o.getSize(e),{x:t.x,y:t.y,w:n.w,h:n.h}},getSize:function(e){var t,n,o=this;return e=o.get(e),t=o.getStyle(e,"width"),n=o.getStyle(e,"height"),t.indexOf("px")===-1&&(t=0),n.indexOf("px")===-1&&(n=0),{w:parseInt(t,10)||e.offsetWidth||e.clientWidth,h:parseInt(n,10)||e.offsetHeight||e.clientHeight}},getParent:function(e,t,n){return this.getParents(e,t,n,!1)},getParents:function(e,t,n,o){var r,i=this,s=[];for(e=i.get(e),o=void 0===o,n=n||("BODY"!=i.getRoot().nodeName?i.getRoot().parentNode:null),g(t,"string")&&(r=t,t="*"===t?function(e){return 1==e.nodeType}:function(e){return i.is(e,r)});e&&e!=n&&e.nodeType&&9!==e.nodeType;){if(!t||t(e)){if(!o)return e;s.push(e)}e=e.parentNode}return o?s:null},get:function(e){var t;return e&&this.doc&&"string"==typeof e&&(t=e,e=this.doc.getElementById(e),e&&e.id!==t)?this.doc.getElementsByName(t)[1]:e},getNext:function(e,t){return this._findSib(e,t,"nextSibling")},getPrev:function(e,t){return this._findSib(e,t,"previousSibling")},select:function(e,t){var n=this;return o(e,n.get(t)||n.settings.root_element||n.doc,[])},is:function(e,t){var n;if(!e)return!1;if(void 0===e.length){if("*"===t)return 1==e.nodeType;if(_.test(t)){for(t=t.toLowerCase().split(/,/),e=e.nodeName.toLowerCase(),n=t.length-1;n>=0;n--)if(t[n]==e)return!0;return!1}}if(e.nodeType&&1!=e.nodeType)return!1;var r=e.nodeType?[e]:e;return o(t,r[0].ownerDocument||r[0],null,r).length>0},add:function(e,t,n,o,r){var i=this;return this.run(e,function(e){var s;return s=g(t,"string")?i.doc.createElement(t):t,i.setAttribs(s,n),o&&(o.nodeType?s.appendChild(o):i.setHTML(s,o)),r?s:e.appendChild(s)})},create:function(e,t,n){return this.add(this.doc.createElement(e),e,t,n,1)},createHTML:function(e,t,n){var o,r="";r+="<"+e;for(o in t)t.hasOwnProperty(o)&&null!==t[o]&&"undefined"!=typeof t[o]&&(r+=" "+o+'="'+this.encode(t[o])+'"');return"undefined"!=typeof n?r+">"+n+"</"+e+">":r+" />"},createFragment:function(e){var t,n,o,r=this.doc;for(o=r.createElement("div"),t=r.createDocumentFragment(),e&&(o.innerHTML=e);n=o.firstChild;)t.appendChild(n);return t},remove:function(e,t){return e=this.$$(e),t?e.each(function(){for(var e;e=this.firstChild;)3==e.nodeType&&0===e.data.length?this.removeChild(e):this.parentNode.insertBefore(e,this)}).remove():e.remove(),e.length>1?e.toArray():e[0]},setStyle:function(e,t,n){e=this.$$(e).css(t,n),this.settings.update_styles&&p(this,e)},getStyle:function(e,t,n){return e=this.$$(e),n?e.css(t):(t=t.replace(/-(\D)/g,function(e,t){return t.toUpperCase()}),"float"==t&&(t=s.ie&&s.ie<12?"styleFloat":"cssFloat"),e[0]&&e[0].style?e[0].style[t]:void 0)},setStyles:function(e,t){e=this.$$(e).css(t),this.settings.update_styles&&p(this,e)},removeAllAttribs:function(e){return this.run(e,function(e){var t,n=e.attributes;for(t=n.length-1;t>=0;t--)e.removeAttributeNode(n.item(t))})},setAttrib:function(e,t,n){var o,r,i=this,s=i.settings;""===n&&(n=null),e=i.$$(e),o=e.attr(t),e.length&&(r=i.attrHooks[t],r&&r.set?r.set(e,n,t):e.attr(t,n),o!=n&&s.onSetAttrib&&s.onSetAttrib({attrElm:e,attrName:t,attrValue:n}))},setAttribs:function(e,t){var n=this;n.$$(e).each(function(e,o){h(t,function(e,t){n.setAttrib(o,t,e)})})},getAttrib:function(e,t,n){var o,r,i=this;return e=i.$$(e),e.length&&(o=i.attrHooks[t],r=o&&o.get?o.get(e,t):e.attr(t)),"undefined"==typeof r&&(r=n||""),r},getPos:function(t,n){var o,r,i=this,s=0,a=0,l=i.doc,d=l.body;if(t=i.get(t),n=n||d,t){if(n===d&&t.getBoundingClientRect&&"static"===e(d).css("position"))return r=t.getBoundingClientRect(),n=i.boxModel?l.documentElement:d,s=r.left+(l.documentElement.scrollLeft||d.scrollLeft)-n.clientLeft,a=r.top+(l.documentElement.scrollTop||d.scrollTop)-n.clientTop,{x:s,y:a};for(o=t;o&&o!=n&&o.nodeType;)s+=o.offsetLeft||0,a+=o.offsetTop||0,o=o.offsetParent;for(o=t.parentNode;o&&o!=n&&o.nodeType;)s-=o.scrollLeft||0,a-=o.scrollTop||0,o=o.parentNode}return{x:s,y:a}},parseStyle:function(e){return this.styles.parse(e)},serializeStyle:function(e,t){return this.styles.serialize(e,t)},addStyle:function(e){var t,n,o=this,r=o.doc;if(o!==m.DOM&&r===document){var i=m.DOM.addedStyles;if(i=i||[],i[e])return;i[e]=!0,m.DOM.addedStyles=i}n=r.getElementById("mceDefaultStyles"),n||(n=r.createElement("style"),n.id="mceDefaultStyles",n.type="text/css",t=r.getElementsByTagName("head")[0],t.firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n)),n.styleSheet?n.styleSheet.cssText+=e:n.appendChild(r.createTextNode(e))},loadCSS:function(e){var t,n=this,o=n.doc;return n!==m.DOM&&o===document?void m.DOM.loadCSS(e):(e||(e=""),t=o.getElementsByTagName("head")[0],void h(e.split(","),function(e){var r;e=u._addCacheSuffix(e),n.files[e]||(n.files[e]=!0,r=n.create("link",{rel:"stylesheet",href:e}),b&&o.documentMode&&o.recalc&&(r.onload=function(){o.recalc&&o.recalc(),r.onload=null}),t.appendChild(r))}))},addClass:function(e,t){this.$$(e).addClass(t)},removeClass:function(e,t){this.toggleClass(e,t,!1)},hasClass:function(e,t){return this.$$(e).hasClass(t)},toggleClass:function(t,n,o){this.$$(t).toggleClass(n,o).each(function(){""===this.className&&e(this).attr("class",null)})},show:function(e){this.$$(e).show()},hide:function(e){this.$$(e).hide()},isHidden:function(e){return"none"==this.$$(e).css("display")},uniqueId:function(e){return(e?e:"mce_")+this.counter++},setHTML:function(t,n){t=this.$$(t),b?t.each(function(t,o){if(o.canHaveHTML!==!1){for(;o.firstChild;)o.removeChild(o.firstChild);try{o.innerHTML="<br>"+n,o.removeChild(o.firstChild)}catch(t){e("<div></div>").html("<br>"+n).contents().slice(1).appendTo(o)}return n}}):t.html(n)},getOuterHTML:function(t){return t=this.get(t),1==t.nodeType&&"outerHTML"in t?t.outerHTML:e("<div></div>").append(e(t).clone()).html()},setOuterHTML:function(t,n){var o=this;o.$$(t).each(function(){try{if("outerHTML"in this)return void(this.outerHTML=n)}catch(e){}o.remove(e(this).html(n),!0)})},decode:a.decode,encode:a.encodeAllRaw,insertAfter:function(e,t){return t=this.get(t),this.run(e,function(e){var n,o;return n=t.parentNode,o=t.nextSibling,o?n.insertBefore(e,o):n.appendChild(e),e})},replace:function(e,t,n){var o=this;return o.run(t,function(t){return g(t,"array")&&(e=e.cloneNode(!0)),n&&h(y(t.childNodes),function(t){e.appendChild(t)}),t.parentNode.replaceChild(e,t)})},rename:function(e,t){var n,o=this;return e.nodeName!=t.toUpperCase()&&(n=o.create(t),h(o.getAttribs(e),function(t){o.setAttrib(n,t.nodeName,o.getAttrib(e,t.nodeName))}),o.replace(n,e,1)),n||e},findCommonAncestor:function(e,t){for(var n,o=e;o;){for(n=t;n&&o!=n;)n=n.parentNode;if(o==n)break;o=o.parentNode}return!o&&e.ownerDocument?e.ownerDocument.documentElement:o},toHex:function(e){return this.styles.toHex(u.trim(e))},run:function(e,t,n){var o,r=this;return"string"==typeof e&&(e=r.get(e)),!!e&&(n=n||this,e.nodeType||!e.length&&0!==e.length?t.call(n,e):(o=[],h(e,function(e,i){e&&("string"==typeof e&&(e=r.get(e)),o.push(t.call(n,e,i)))}),o))},getAttribs:function(e){var t;if(e=this.get(e),!e)return[];if(b){if(t=[],"OBJECT"==e.nodeName)return e.attributes;"OPTION"===e.nodeName&&this.getAttrib(e,"selected")&&t.push({specified:1,nodeName:"selected"});var n=/<\/?[\w:\-]+ ?|=[\"][^\"]+\"|=\'[^\']+\'|=[\w\-]+|>/gi;return e.cloneNode(!1).outerHTML.replace(n,"").replace(/[\w:\-]+/gi,function(e){t.push({specified:1,nodeName:e})}),t}return e.attributes},isEmpty:function(e,t){var n,o,r,s,a,l,d=this,u=0;if(e=e.firstChild){a=new i(e,e.parentNode),t=t||(d.schema?d.schema.getNonEmptyElements():null),s=d.schema?d.schema.getWhiteSpaceElements():{};do{if(r=e.nodeType,1===r){var c=e.getAttribute("data-mce-bogus");if(c){e=a.next("all"===c);continue}if(l=e.nodeName.toLowerCase(),t&&t[l]){if("br"===l){u++,e=a.next();continue}return!1}for(o=d.getAttribs(e),n=o.length;n--;)if(l=o[n].nodeName,"name"===l||"data-mce-bookmark"===l)return!1}if(8==r)return!1;if(3===r&&!x.test(e.nodeValue))return!1;if(3===r&&e.parentNode&&s[e.parentNode.nodeName]&&x.test(e.nodeValue))return!1;e=a.next()}while(e)}return u<=1},createRng:function(){var e=this.doc;return e.createRange?e.createRange():new n(this)},nodeIndex:f,split:function(e,t,n){function o(e){function t(e){var t=e.previousSibling&&"SPAN"==e.previousSibling.nodeName,n=e.nextSibling&&"SPAN"==e.nextSibling.nodeName;return t&&n}var n,r=e.childNodes,i=e.nodeType;if(1!=i||"bookmark"!=e.getAttribute("data-mce-type")){for(n=r.length-1;n>=0;n--)o(r[n]);if(9!=i){if(3==i&&e.nodeValue.length>0){var s=v(e.nodeValue).length;if(!a.isBlock(e.parentNode)||s>0||0===s&&t(e))return}else if(1==i&&(r=e.childNodes,1==r.length&&r[0]&&1==r[0].nodeType&&"bookmark"==r[0].getAttribute("data-mce-type")&&e.parentNode.insertBefore(r[0],e),r.length||/^(br|hr|input|img)$/i.test(e.nodeName)))return;a.remove(e)}return e}}var r,i,s,a=this,l=a.createRng();if(e&&t)return l.setStart(e.parentNode,a.nodeIndex(e)),l.setEnd(t.parentNode,a.nodeIndex(t)),r=l.extractContents(),l=a.createRng(),l.setStart(t.parentNode,a.nodeIndex(t)+1),l.setEnd(e.parentNode,a.nodeIndex(e)+1),i=l.extractContents(),s=e.parentNode,s.insertBefore(o(r),e),n?s.insertBefore(n,e):s.insertBefore(t,e),s.insertBefore(o(i),e),a.remove(e),n||t},bind:function(e,t,n,o){var r=this;if(u.isArray(e)){for(var i=e.length;i--;)e[i]=r.bind(e[i],t,n,o);return e}return!r.settings.collect||e!==r.doc&&e!==r.win||r.boundEvents.push([e,t,n,o]),r.events.bind(e,t,n,o||r)},unbind:function(e,t,n){var o,r=this;if(u.isArray(e)){for(o=e.length;o--;)e[o]=r.unbind(e[o],t,n);return e}if(r.boundEvents&&(e===r.doc||e===r.win))for(o=r.boundEvents.length;o--;){var i=r.boundEvents[o];e!=i[0]||t&&t!=i[1]||n&&n!=i[2]||this.events.unbind(i[0],i[1],i[2])}return this.events.unbind(e,t,n)},fire:function(e,t,n){return this.events.fire(e,t,n)},getContentEditable:function(e){var t;return e&&1==e.nodeType?(t=e.getAttribute("data-mce-contenteditable"),t&&"inherit"!==t?t:"inherit"!==e.contentEditable?e.contentEditable:null):null},getContentEditableParent:function(e){for(var t=this.getRoot(),n=null;e&&e!==t&&(n=this.getContentEditable(e),null===n);e=e.parentNode);return n},destroy:function(){var e=this;if(e.boundEvents){for(var t=e.boundEvents.length;t--;){var n=e.boundEvents[t];this.events.unbind(n[0],n[1],n[2])}e.boundEvents=null}o.setDocument&&o.setDocument(),e.win=e.doc=e.root=e.events=e.frag=null},isChildOf:function(e,t){for(;e;){if(t===e)return!0;e=e.parentNode}return!1},dumpRng:function(e){return"startContainer: "+e.startContainer.nodeName+", startOffset: "+e.startOffset+", endContainer: "+e.endContainer.nodeName+", endOffset: "+e.endOffset},_findSib:function(e,t,n){var o=this,r=t;if(e)for("string"==typeof r&&(r=function(e){return o.is(e,t)}),e=e[n];e;e=e[n])if(r(e))return e;return null}},m.DOM=new m(document),m.nodeIndex=f,m}),l("tinymce.core.dom.ScriptLoader",["tinymce.core.dom.DOMUtils","tinymce.core.util.Tools"],function(e,t){function n(){function e(e,n,r){function i(){u.remove(d),l&&(l.onreadystatechange=l.onload=l=null),n()}function a(){s(r)?r():"undefined"!=typeof console&&console.log&&console.log("Failed to load script: "+e)}var l,d,u=o;d=u.uniqueId(),l=document.createElement("script"),l.id=d,l.type="text/javascript",l.src=t._addCacheSuffix(e),"onreadystatechange"in l?l.onreadystatechange=function(){/loaded|complete/.test(l.readyState)&&i()}:l.onload=i,l.onerror=a,(document.getElementsByTagName("head")[0]||document.body).appendChild(l)}var n,a=0,l=1,d=2,u=3,c={},p=[],f={},m=[],h=0;this.isDone=function(e){return c[e]==d},this.markDone=function(e){c[e]=d},this.add=this.load=function(e,t,o,r){var i=c[e];i==n&&(p.push(e),c[e]=a),t&&(f[e]||(f[e]=[]),f[e].push({success:t,failure:r,scope:o||this}))},this.remove=function(e){delete c[e],delete f[e]},this.loadQueue=function(e,t,n){this.loadScripts(p,e,t,n)},this.loadScripts=function(t,o,a,p){function g(e,t){r(f[t],function(t){s(t[e])&&t[e].call(t.scope)}),f[t]=n}var y,v=[];m.push({success:o,failure:p,scope:a||this}),(y=function(){var n=i(t);t.length=0,r(n,function(t){return c[t]===d?void g("success",t):c[t]===u?void g("failure",t):void(c[t]!==l&&(c[t]=l,h++,e(t,function(){c[t]=d,h--,g("success",t),y()},function(){c[t]=u,h--,v.push(t),g("failure",t),y()})))}),h||(r(m,function(e){0===v.length?s(e.success)&&e.success.call(e.scope):s(e.failure)&&e.failure.call(e.scope,v)}),m.length=0)})()}}var o=e.DOM,r=t.each,i=t.grep,s=function(e){return"function"==typeof e};return n.ScriptLoader=new n,n}),l("tinymce.core.AddOnManager",["tinymce.core.dom.ScriptLoader","tinymce.core.util.Tools"],function(e,t){function n(){var e=this;e.items=[],e.urls={},e.lookup={}}var o=t.each;return n.prototype={get:function(e){if(this.lookup[e])return this.lookup[e].instance},dependencies:function(e){var t;return this.lookup[e]&&(t=this.lookup[e].dependencies),t||[]},requireLangPack:function(t,o){var r=n.language;if(r&&n.languageLoad!==!1){if(o)if(o=","+o+",",o.indexOf(","+r.substr(0,2)+",")!=-1)r=r.substr(0,2);else if(o.indexOf(","+r+",")==-1)return;e.ScriptLoader.add(this.urls[t]+"/langs/"+r+".js")}},add:function(e,t,n){return this.items.push(t),this.lookup[e]={instance:t,dependencies:n},t},remove:function(e){delete this.urls[e],delete this.lookup[e]},createUrl:function(e,t){return"object"==typeof t?t:{prefix:e.prefix,resource:t,suffix:e.suffix}},addComponents:function(t,n){var r=this.urls[t];o(n,function(t){e.ScriptLoader.add(r+"/"+t)})},load:function(t,r,i,s,a){function l(){var n=d.dependencies(t);o(n,function(e){var t=d.createUrl(r,e);d.load(t.resource,t,void 0,void 0)}),i&&(s?i.call(s):i.call(e))}var d=this,u=r;d.urls[t]||("object"==typeof r&&(u=r.prefix+r.resource+r.suffix),0!==u.indexOf("/")&&u.indexOf("://")==-1&&(u=n.baseURL+"/"+u),d.urls[t]=u.substring(0,u.lastIndexOf("/")),d.lookup[t]?l():e.ScriptLoader.add(u,l,s,a))}},n.PluginManager=new n,n.ThemeManager=new n,n}),l("tinymce.core.dom.NodeType",[],function(){function e(e){return function(t){return!!t&&t.nodeType==e}}function t(e){return e=e.toLowerCase().split(" "),function(t){var n,o;if(t&&t.nodeType)for(o=t.nodeName.toLowerCase(),n=0;n<e.length;n++)if(o===e[n])return!0;return!1}}function n(e,t){return t=t.toLowerCase().split(" "),function(n){var o,r;if(l(n))for(o=0;o<t.length;o++)if(r=n.ownerDocument.defaultView.getComputedStyle(n,null).getPropertyValue(e),r===t[o])return!0;return!1}}function o(e,t){return function(n){return l(n)&&n[e]===t}}function r(e,t){return function(t){return l(t)&&t.hasAttribute(e)}}function i(e,t){return function(n){return l(n)&&n.getAttribute(e)===t}}function s(e){return l(e)&&e.hasAttribute("data-mce-bogus")}function a(e){return function(t){if(l(t)){if(t.contentEditable===e)return!0;if(t.getAttribute("data-mce-contenteditable")===e)return!0}return!1}}var l=e(1);return{isText:e(3),isElement:l,isComment:e(8),isBr:t("br"),isContentEditableTrue:a("true"),isContentEditableFalse:a("false"),matchNodeNames:t,hasPropValue:o,hasAttribute:r,hasAttributeValue:i,matchStyleValues:n,isBogus:s}}),l("tinymce.core.text.Zwsp",[],function(){var e="\ufeff",t=function(t){return t===e},n=function(t){return t.replace(new RegExp(e,"g"),"")};return{isZwsp:t,ZWSP:e,trim:n}}),l("tinymce.core.caret.CaretContainer",["tinymce.core.dom.NodeType","tinymce.core.text.Zwsp"],function(e,t){function n(e){return f(e)&&(e=e.parentNode),p(e)&&e.hasAttribute("data-mce-caret")}function o(e){return f(e)&&t.isZwsp(e.data)}function r(e){return n(e)||o(e)}function i(e,n){var o,i,s,a;if(o=e.ownerDocument,s=o.createTextNode(t.ZWSP),a=e.parentNode,n){if(i=e.previousSibling,f(i)){if(r(i))return i;if(d(i))return i.splitText(i.data.length-1)}a.insertBefore(s,e)}else{if(i=e.nextSibling,f(i)){if(r(i))return i;if(l(i))return i.splitText(1),i}e.nextSibling?a.insertBefore(s,e.nextSibling):a.appendChild(s)}return s}function s(){var e=document.createElement("br");return e.setAttribute("data-mce-bogus","1"),e}function a(e,t,n){var o,r,i;return o=t.ownerDocument,r=o.createElement(e),r.setAttribute("data-mce-caret",n?"before":"after"),r.setAttribute("data-mce-bogus","all"),r.appendChild(s()),i=t.parentNode,n?i.insertBefore(r,t):t.nextSibling?i.insertBefore(r,t.nextSibling):i.appendChild(r),r}function l(e){return f(e)&&e.data[0]==t.ZWSP}function d(e){return f(e)&&e.data[e.data.length-1]==t.ZWSP}function u(t){var n=t.getElementsByTagName("br"),o=n[n.length-1];e.isBogus(o)&&o.parentNode.removeChild(o)}function c(e){return e&&e.hasAttribute("data-mce-caret")?(u(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("_moz_abspos"),e):null}var p=e.isElement,f=e.isText,m=function(t){return t.firstChild!==t.lastChild||!e.isBr(t.firstChild)},h=function(n){if(e.isText(n)){var o=n.data;return o.length>0&&o.charAt(0)!==t.ZWSP&&n.insertData(0,t.ZWSP),n}return null},g=function(n){if(e.isText(n)){var o=n.data;return o.length>0&&o.charAt(o.length-1)!==t.ZWSP&&n.insertData(o.length,t.ZWSP),n}return null},y=function(n){return n&&e.isText(n.container())&&n.container().data.charAt(n.offset())===t.ZWSP},v=function(n){return n&&e.isText(n.container())&&n.container().data.charAt(n.offset()-1)===t.ZWSP};return{isCaretContainer:r,isCaretContainerBlock:n,isCaretContainerInline:o,showCaretContainerBlock:c,insertInline:i,prependInline:h,appendInline:g,isBeforeInline:y,isAfterInline:v,insertBlock:a,hasContent:m,startsWithCaretContainer:l,endsWithCaretContainer:d}}),l("tinymce.core.dom.RangeUtils",["tinymce.core.util.Tools","tinymce.core.dom.TreeWalker","tinymce.core.dom.NodeType","tinymce.core.dom.Range","tinymce.core.caret.CaretContainer"],function(e,t,n,o,r){function i(e){return g(e)||y(e)}function s(e,t){var n=e.childNodes;return t--,t>n.length-1?t=n.length-1:t<0&&(t=0),n[t]||e}function a(e,t,n){for(;e&&e!==t;){if(n(e))return e;e=e.parentNode}return null}function l(e,t,n){return null!==a(e,t,n)}function d(e,t,n){return l(e,t,function(e){return e.nodeName===n})}function u(e){return"_mce_caret"===e.id}function c(e,t){return v(e)&&l(e,t,u)===!1}function p(e){this.walk=function(t,n){function o(e){var t;return t=e[0],3===t.nodeType&&t===g&&y>=t.nodeValue.length&&e.splice(0,1),t=e[e.length-1],0===b&&e.length>0&&t===v&&3===t.nodeType&&e.splice(e.length-1,1),e}function r(e,t,n){for(var o=[];e&&e!=n;e=e[t])o.push(e);return o}function i(e,t){do{if(e.parentNode==t)return e;e=e.parentNode}while(e)}function a(e,t,i){var s=i?"nextSibling":"previousSibling";for(c=e,p=c.parentNode;c&&c!=t;c=p)p=c.parentNode,f=r(c==e?c:c[s],s),f.length&&(i||f.reverse(),n(o(f)))}var l,d,u,c,p,f,m,g=t.startContainer,y=t.startOffset,v=t.endContainer,b=t.endOffset;if(m=e.select("td[data-mce-selected],th[data-mce-selected]"),m.length>0)return void h(m,function(e){n([e])});if(1==g.nodeType&&g.hasChildNodes()&&(g=g.childNodes[y]),1==v.nodeType&&v.hasChildNodes()&&(v=s(v,b)),g==v)return n(o([g]));for(l=e.findCommonAncestor(g,v),c=g;c;c=c.parentNode){if(c===v)return a(g,l,!0);if(c===l)break}for(c=v;c;c=c.parentNode){if(c===g)return a(v,l);if(c===l)break}d=i(g,l)||g,u=i(v,l)||v,a(g,d,!0),f=r(d==g?d:d.nextSibling,"nextSibling",u==v?u.nextSibling:u),f.length&&n(o(f)),a(v,u)},this.split=function(e){function t(e,t){return e.splitText(t)}var n=e.startContainer,o=e.startOffset,r=e.endContainer,i=e.endOffset;return n==r&&3==n.nodeType?o>0&&o<n.nodeValue.length&&(r=t(n,o),n=r.previousSibling,i>o?(i-=o,n=r=t(r,i).previousSibling,i=r.nodeValue.length,o=0):i=0):(3==n.nodeType&&o>0&&o<n.nodeValue.length&&(n=t(n,o),o=0),3==r.nodeType&&i>0&&i<r.nodeValue.length&&(r=t(r,i).previousSibling,i=r.nodeValue.length)),{startContainer:n,startOffset:o,endContainer:r,endOffset:i}},this.normalize=function(n){function o(o){function s(e){return e&&/^(TD|TH|CAPTION)$/.test(e.nodeName)}function a(n,o){for(var r=new t(n,e.getParent(n.parentNode,e.isBlock)||C);n=r[o?"prev":"next"]();)if("BR"===n.nodeName)return!0}function l(e){for(;e&&e!=C;){if(y(e))return!0;e=e.parentNode}return!1}function u(e,t){return e.previousSibling&&e.previousSibling.nodeName==t}function p(n,o){var s,a,l;if(o=o||f,l=e.getParent(o.parentNode,e.isBlock)||C,n&&"BR"==o.nodeName&&x&&e.isEmpty(l))return f=o.parentNode,m=e.nodeIndex(o),void(i=!0);for(s=new t(o,l);g=s[n?"prev":"next"]();){if("false"===e.getContentEditableParent(g)||c(g,e.getRoot()))return;if(3===g.nodeType&&g.nodeValue.length>0)return void(d(g,C,"A")===!1&&(f=g,m=n?g.nodeValue.length:0,i=!0));if(e.isBlock(g)||b[g.nodeName.toLowerCase()])return;a=g}r&&a&&(f=a,i=!0,m=0)}var f,m,h,g,b,_,x,C=e.getRoot();if(f=n[(o?"start":"end")+"Container"],m=n[(o?"start":"end")+"Offset"],x=1==f.nodeType&&m===f.childNodes.length,b=e.schema.getNonEmptyElements(),_=o,!v(f)){if(1==f.nodeType&&m>f.childNodes.length-1&&(_=!1),9===f.nodeType&&(f=e.getRoot(),m=0),f===C){if(_&&(g=f.childNodes[m>0?m-1:0])){if(v(g))return;if(b[g.nodeName]||"TABLE"==g.nodeName)return}if(f.hasChildNodes()){if(m=Math.min(!_&&m>0?m-1:m,f.childNodes.length-1),f=f.childNodes[m],m=0,!r&&f===C.lastChild&&"TABLE"===f.nodeName)return;if(l(f)||v(f))return;if(f.hasChildNodes()&&!/TABLE/.test(f.nodeName)){g=f,h=new t(f,C);do{if(y(g)||v(g)){i=!1;break}if(3===g.nodeType&&g.nodeValue.length>0){m=_?0:g.nodeValue.length,f=g,i=!0;break}if(b[g.nodeName.toLowerCase()]&&!s(g)){m=e.nodeIndex(g),f=g.parentNode,"IMG"!=g.nodeName||_||m++,i=!0;break}}while(g=_?h.next():h.prev())}}}r&&(3===f.nodeType&&0===m&&p(!0),1===f.nodeType&&(g=f.childNodes[m],g||(g=f.childNodes[m-1]),!g||"BR"!==g.nodeName||u(g,"A")||a(g)||a(g,!0)||p(!0,g))),_&&!r&&3===f.nodeType&&m===f.nodeValue.length&&p(!1),i&&n["set"+(o?"Start":"End")](f,m)}}var r,i=!1;return r=n.collapsed,o(!0),r||o(),i&&r&&n.collapse(!0),i}}function f(t,n,o){var r,i,s;if(r=o.elementFromPoint(t,n),i=o.body.createTextRange(),r&&"HTML"!=r.tagName||(r=o.body),i.moveToElementText(r),s=e.toArray(i.getClientRects()),s=s.sort(function(e,t){return e=Math.abs(Math.max(e.top-n,e.bottom-n)),t=Math.abs(Math.max(t.top-n,t.bottom-n)),e-t}),s.length>0){n=(s[0].bottom+s[0].top)/2;try{return i.moveToPoint(t,n),i.collapse(!0),i}catch(e){}}return null}function m(e,t){var n=e&&e.parentElement?e.parentElement():null;return y(a(n,t,i))?null:e}var h=e.each,g=n.isContentEditableTrue,y=n.isContentEditableFalse,v=r.isCaretContainer;return p.compareRanges=function(e,t){if(e&&t){if(!e.item&&!e.duplicate)return e.startContainer==t.startContainer&&e.startOffset==t.startOffset;if(e.item&&t.item&&e.item(0)===t.item(0))return!0;if(e.isEqual&&t.isEqual&&t.isEqual(e))return!0}return!1},p.getCaretRangeFromPoint=function(e,t,n){var o,r;if(n.caretPositionFromPoint)r=n.caretPositionFromPoint(e,t),o=n.createRange(),o.setStart(r.offsetNode,r.offset),o.collapse(!0);else if(n.caretRangeFromPoint)o=n.caretRangeFromPoint(e,t);else if(n.body.createTextRange){o=n.body.createTextRange();try{o.moveToPoint(e,t),o.collapse(!0)}catch(r){o=f(e,t,n)}return m(o,n.body)}return o},p.getSelectedNode=function(e){var t=e.startContainer,n=e.startOffset;return t.hasChildNodes()&&e.endOffset==n+1?t.childNodes[n]:null},p.getNode=function(e,t){return 1==e.nodeType&&e.hasChildNodes()&&(t>=e.childNodes.length&&(t=e.childNodes.length-1),e=e.childNodes[t]),e},p}),l("tinymce.core.html.Node",[],function(){function e(e,t,n){var o,r,i=n?"lastChild":"firstChild",s=n?"prev":"next";if(e[i])return e[i];if(e!==t){if(o=e[s])return o;for(r=e.parent;r&&r!==t;r=r.parent)if(o=r[s])return o}}function t(e,t){this.name=e,this.type=t,1===t&&(this.attributes=[],this.attributes.map={})}var n=/^[ \t\r\n]*$/,o={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11};return t.prototype={replace:function(e){var t=this;return e.parent&&e.remove(),t.insert(e,t),t.remove(),t},attr:function(e,t){var n,o,r,i=this;if("string"!=typeof e){for(o in e)i.attr(o,e[o]);return i}if(n=i.attributes){if(t!==r){if(null===t){if(e in n.map)for(delete n.map[e],o=n.length;o--;)if(n[o].name===e)return n=n.splice(o,1),i;return i}if(e in n.map){for(o=n.length;o--;)if(n[o].name===e){n[o].value=t;break}}else n.push({name:e,value:t});return n.map[e]=t,i}return n.map[e]}},clone:function(){var e,n,o,r,i,s=this,a=new t(s.name,s.type);if(o=s.attributes){for(i=[],i.map={},e=0,n=o.length;e<n;e++)r=o[e],"id"!==r.name&&(i[i.length]={name:r.name,value:r.value},i.map[r.name]=r.value);a.attributes=i}return a.value=s.value,a.shortEnded=s.shortEnded,a},wrap:function(e){var t=this;return t.parent.insert(e,t),e.append(t),t},unwrap:function(){var e,t,n=this;for(e=n.firstChild;e;)t=e.next,n.insert(e,n,!0),e=t;n.remove()},remove:function(){var e=this,t=e.parent,n=e.next,o=e.prev;return t&&(t.firstChild===e?(t.firstChild=n,n&&(n.prev=null)):o.next=n,t.lastChild===e?(t.lastChild=o,o&&(o.next=null)):n.prev=o,e.parent=e.next=e.prev=null),e},append:function(e){var t,n=this;return e.parent&&e.remove(),t=n.lastChild,t?(t.next=e,e.prev=t,n.lastChild=e):n.lastChild=n.firstChild=e,e.parent=n,e},insert:function(e,t,n){var o;return e.parent&&e.remove(),o=t.parent||this,n?(t===o.firstChild?o.firstChild=e:t.prev.next=e,e.prev=t.prev,e.next=t,t.prev=e):(t===o.lastChild?o.lastChild=e:t.next.prev=e,e.next=t.next,e.prev=t,t.next=e),e.parent=o,e},getAll:function(t){var n,o=this,r=[];for(n=o.firstChild;n;n=e(n,o))n.name===t&&r.push(n);return r},empty:function(){var t,n,o,r=this;if(r.firstChild){for(t=[],o=r.firstChild;o;o=e(o,r))t.push(o);for(n=t.length;n--;)o=t[n],o.parent=o.firstChild=o.lastChild=o.next=o.prev=null}return r.firstChild=r.lastChild=null,r},isEmpty:function(t,o){var r,i,s=this,a=s.firstChild;if(o=o||{},a)do{if(1===a.type){if(a.attributes.map["data-mce-bogus"])continue;if(t[a.name])return!1;for(r=a.attributes.length;r--;)if(i=a.attributes[r].name,"name"===i||0===i.indexOf("data-mce-bookmark"))return!1}if(8===a.type)return!1;if(3===a.type&&!n.test(a.value))return!1;if(3===a.type&&a.parent&&o[a.parent.name]&&n.test(a.value))return!1}while(a=e(a,s));return!0},walk:function(t){return e(this,null,t)}},t.create=function(e,n){var r,i;if(r=new t(e,o[e]||1),n)for(i in n)r.attr(i,n[i]);return r},t}),l("tinymce.core.html.SaxParser",["tinymce.core.html.Schema","tinymce.core.html.Entities","tinymce.core.util.Tools"],function(e,t,n){function o(e,t,n){var o,r,i,s,a=1;for(s=e.getShortEndedElements(),i=/<([!?\/])?([A-Za-z0-9\-_\:\.]+)((?:\s+[^"\'>]+(?:(?:"[^"]*")|(?:\'[^\']*\')|[^>]*))*|\/|\s+)>/g,i.lastIndex=o=n;r=i.exec(t);){if(o=i.lastIndex,"/"===r[1])a--;else if(!r[1]){if(r[2]in s)continue;a++}if(0===a)break}return o}function r(r,a){function l(){}var d=this;r=r||{},d.schema=a=a||new e,r.fix_self_closing!==!1&&(r.fix_self_closing=!0),i("comment cdata text start end pi doctype".split(" "),function(e){e&&(d[e]=r[e]||l)}),d.parse=function(e){function i(e){var t,n;for(t=U.length;t--&&U[t].name!==e;);if(t>=0){for(n=U.length-1;n>=t;n--)e=U[n],e.valid&&B.end(e.name);U.length=t}}function l(e,t,n,o,i){var a,l,d=/[\s\u0000-\u001F]+/g;if(t=t.toLowerCase(),n=t in b?t:W(n||o||i||""),x&&!g&&s(t)===!1){if(a=S[t],!a&&T){for(l=T.length;l--&&(a=T[l],!a.pattern.test(t)););l===-1&&(a=null)}if(!a)return;if(a.validValues&&!(n in a.validValues))return}if(V[t]&&!r.allow_script_urls){var u=n.replace(d,"");try{u=decodeURIComponent(u)}catch(e){u=unescape(u)}if(q.test(u))return;if(!r.allow_html_data_urls&&G.test(u)&&!/^data:image\//i.test(u))return}p.map[t]=n,p.push({name:t,value:n})}var d,u,c,p,f,m,h,g,y,v,b,_,x,C,E,w,j,S,T,P,k,I,N,R,D,M,O,A,L,F,B=this,z=0,U=[],H=0,W=t.decode,V=n.makeMap("src,href,data,background,formaction,poster"),q=/((java|vb)script|mhtml):/i,G=/^data:/i;for(M=new RegExp("<(?:(?:!--([\\w\\W]*?)-->)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:!DOCTYPE([\\w\\W]*?)>)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([A-Za-z][A-Za-z0-9\\-_\\:\\.]*)>)|(?:([A-Za-z][A-Za-z0-9\\-_\\:\\.]*)((?:\\s+[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*|\\/|\\s+)>))","g"),O=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:[^\"])*)\")|(?:\'((?:[^\'])*)\')|([^>\s]+)))?/g,
v=a.getShortEndedElements(),D=r.self_closing_elements||a.getSelfClosingElements(),b=a.getBoolAttrs(),x=r.validate,y=r.remove_internals,F=r.fix_self_closing,A=a.getSpecialElements(),N=e+">";d=M.exec(N);){if(z<d.index&&B.text(W(e.substr(z,d.index-z))),u=d[6])u=u.toLowerCase(),":"===u.charAt(0)&&(u=u.substr(1)),i(u);else if(u=d[7]){if(d.index+d[0].length>e.length){B.text(W(e.substr(d.index))),z=d.index+d[0].length;continue}if(u=u.toLowerCase(),":"===u.charAt(0)&&(u=u.substr(1)),_=u in v,F&&D[u]&&U.length>0&&U[U.length-1].name===u&&i(u),!x||(C=a.getElementRule(u))){if(E=!0,x&&(S=C.attributes,T=C.attributePatterns),(j=d[8])?(g=j.indexOf("data-mce-type")!==-1,g&&y&&(E=!1),p=[],p.map={},j.replace(O,l)):(p=[],p.map={}),x&&!g){if(P=C.attributesRequired,k=C.attributesDefault,I=C.attributesForced,R=C.removeEmptyAttrs,R&&!p.length&&(E=!1),I)for(f=I.length;f--;)w=I[f],h=w.name,L=w.value,"{$uid}"===L&&(L="mce_"+H++),p.map[h]=L,p.push({name:h,value:L});if(k)for(f=k.length;f--;)w=k[f],h=w.name,h in p.map||(L=w.value,"{$uid}"===L&&(L="mce_"+H++),p.map[h]=L,p.push({name:h,value:L}));if(P){for(f=P.length;f--&&!(P[f]in p.map););f===-1&&(E=!1)}if(w=p.map["data-mce-bogus"]){if("all"===w){z=o(a,e,M.lastIndex),M.lastIndex=z;continue}E=!1}}E&&B.start(u,p,_)}else E=!1;if(c=A[u]){c.lastIndex=z=d.index+d[0].length,(d=c.exec(e))?(E&&(m=e.substr(z,d.index-z)),z=d.index+d[0].length):(m=e.substr(z),z=e.length),E&&(m.length>0&&B.text(m,!0),B.end(u)),M.lastIndex=z;continue}_||(j&&j.indexOf("/")==j.length-1?E&&B.end(u):U.push({name:u,valid:E}))}else(u=d[1])?(">"===u.charAt(0)&&(u=" "+u),r.allow_conditional_comments||"[if"!==u.substr(0,3).toLowerCase()||(u=" "+u),B.comment(u)):(u=d[2])?B.cdata(u):(u=d[3])?B.doctype(u):(u=d[4])&&B.pi(u,d[5]);z=d.index+d[0].length}for(z<e.length&&B.text(W(e.substr(z))),f=U.length-1;f>=0;f--)u=U[f],u.valid&&B.end(u.name)}}var i=n.each,s=function(e){return 0===e.indexOf("data-")||0===e.indexOf("aria-")};return r.findEndTag=o,r}),l("tinymce.core.html.DomParser",["tinymce.core.html.Node","tinymce.core.html.Schema","tinymce.core.html.SaxParser","tinymce.core.util.Tools"],function(e,t,n,o){var r=o.makeMap,i=o.each,s=o.explode,a=o.extend,l=function(t,n){t.padd_empty_with_br?n.empty().append(new e("br","1")).shortEnded=!0:n.empty().append(new e("#text","3")).value=" "},d=function(e,t){return e&&e.firstChild===e.lastChild&&e.firstChild.name===t};return function(u,c){function p(t){var n,o,i,s,a,l,u,p,m,h,g,y,v,b,_,x;for(y=r("tr,td,th,tbody,thead,tfoot,table"),h=c.getNonEmptyElements(),g=c.getWhiteSpaceElements(),v=c.getTextBlockElements(),b=c.getSpecialElements(),n=0;n<t.length;n++)if(o=t[n],o.parent&&!o.fixed)if(v[o.name]&&"li"==o.parent.name){for(_=o.next;_&&v[_.name];)_.name="li",_.fixed=!0,o.parent.insert(_,o.parent),_=_.next;o.unwrap(o)}else{for(s=[o],i=o.parent;i&&!c.isValidChild(i.name,o.name)&&!y[i.name];i=i.parent)s.push(i);if(i&&s.length>1){for(s.reverse(),a=l=f.filterNode(s[0].clone()),m=0;m<s.length-1;m++){for(c.isValidChild(l.name,s[m].name)?(u=f.filterNode(s[m].clone()),l.append(u)):u=l,p=s[m].firstChild;p&&p!=s[m+1];)x=p.next,u.append(p),p=x;l=u}a.isEmpty(h,g)?i.insert(o,s[0],!0):(i.insert(a,s[0],!0),i.insert(o,a)),i=s[0],(i.isEmpty(h,g)||d(i,"br"))&&i.empty().remove()}else if(o.parent){if("li"===o.name){if(_=o.prev,_&&("ul"===_.name||"ul"===_.name)){_.append(o);continue}if(_=o.next,_&&("ul"===_.name||"ul"===_.name)){_.insert(o,_.firstChild,!0);continue}o.wrap(f.filterNode(new e("ul",1)));continue}c.isValidChild(o.parent.name,"div")&&c.isValidChild("div",o.name)?o.wrap(f.filterNode(new e("div",1))):b[o.name]?o.empty().remove():o.unwrap()}}}var f=this,m={},h=[],g={},y={};u=u||{},u.validate=!("validate"in u)||u.validate,u.root_name=u.root_name||"body",f.schema=c=c||new t,f.filterNode=function(e){var t,n,o;n in m&&(o=g[n],o?o.push(e):g[n]=[e]),t=h.length;for(;t--;)n=h[t].name,n in e.attributes.map&&(o=y[n],o?o.push(e):y[n]=[e]);return e},f.addNodeFilter=function(e,t){i(s(e),function(e){var n=m[e];n||(m[e]=n=[]),n.push(t)})},f.addAttributeFilter=function(e,t){i(s(e),function(e){var n;for(n=0;n<h.length;n++)if(h[n].name===e)return void h[n].callbacks.push(t);h.push({name:e,callbacks:[t]})})},f.parse=function(t,o){function i(){function e(e){e&&(o=e.firstChild,o&&3==o.type&&(o.value=o.value.replace(I,"")),o=e.lastChild,o&&3==o.type&&(o.value=o.value.replace(R,"")))}var t,n,o=b.firstChild;if(c.isValidChild(b.name,F.toLowerCase())){for(;o;)t=o.next,3==o.type||1==o.type&&"p"!==o.name&&!k[o.name]&&!o.attr("data-mce-type")?n?n.append(o):(n=s(F,1),n.attr(u.forced_root_block_attrs),b.insert(n,o),n.append(o)):(e(n),n=null),o=t;e(n)}}function s(t,n){var o,r=new e(t,n);return t in m&&(o=g[t],o?o.push(r):g[t]=[r]),r}function d(e){var t,n,o,r,i=c.getBlockElements();for(t=e.prev;t&&3===t.type;){if(o=t.value.replace(R,""),o.length>0)return void(t.value=o);if(n=t.next){if(3==n.type&&n.value.length){t=t.prev;continue}if(!i[n.name]&&"script"!=n.name&&"style"!=n.name){t=t.prev;continue}}r=t.prev,t.remove(),t=r}}function f(e){var t,n={};for(t in e)"li"!==t&&"p"!=t&&(n[t]=e[t]);return n}var v,b,_,x,C,E,w,j,S,T,P,k,I,N,R,D,M,O,A,L,F,B=[];if(o=o||{},g={},y={},k=a(r("script,style,head,html,body,title,meta,param"),c.getBlockElements()),L=c.getNonEmptyElements(),A=c.children,P=u.validate,F="forced_root_block"in o?o.forced_root_block:u.forced_root_block,O=c.getWhiteSpaceElements(),I=/^[ \t\r\n]+/,R=/[ \t\r\n]+$/,D=/[ \t\r\n]+/g,M=/^[ \t\r\n]+$/,v=new n({validate:P,allow_script_urls:u.allow_script_urls,allow_conditional_comments:u.allow_conditional_comments,self_closing_elements:f(c.getSelfClosingElements()),cdata:function(e){_.append(s("#cdata",4)).value=e},text:function(e,t){var n;N||(e=e.replace(D," "),_.lastChild&&k[_.lastChild.name]&&(e=e.replace(I,""))),0!==e.length&&(n=s("#text",3),n.raw=!!t,_.append(n).value=e)},comment:function(e){_.append(s("#comment",8)).value=e},pi:function(e,t){_.append(s(e,7)).value=t,d(_)},doctype:function(e){var t;t=_.append(s("#doctype",10)),t.value=e,d(_)},start:function(e,t,n){var o,r,i,a,l;if(i=P?c.getElementRule(e):{}){for(o=s(i.outputName||e,1),o.attributes=t,o.shortEnded=n,_.append(o),l=A[_.name],l&&A[o.name]&&!l[o.name]&&B.push(o),r=h.length;r--;)a=h[r].name,a in t.map&&(S=y[a],S?S.push(o):y[a]=[o]);k[e]&&d(o),n||(_=o),!N&&O[e]&&(N=!0)}},end:function(e){var t,n,o,r,i;if(n=P?c.getElementRule(e):{}){if(k[e]&&!N){if(t=_.firstChild,t&&3===t.type)if(o=t.value.replace(I,""),o.length>0)t.value=o,t=t.next;else for(r=t.next,t.remove(),t=r;t&&3===t.type;)o=t.value,r=t.next,(0===o.length||M.test(o))&&(t.remove(),t=r),t=r;if(t=_.lastChild,t&&3===t.type)if(o=t.value.replace(R,""),o.length>0)t.value=o,t=t.prev;else for(r=t.prev,t.remove(),t=r;t&&3===t.type;)o=t.value,r=t.prev,(0===o.length||M.test(o))&&(t.remove(),t=r),t=r}if(N&&O[e]&&(N=!1),(n.removeEmpty||n.paddEmpty)&&_.isEmpty(L,O))if(n.paddEmpty)l(u,_);else if(!_.attributes.map.name&&!_.attributes.map.id)return i=_.parent,k[_.name]?_.empty().remove():_.unwrap(),void(_=i);_=_.parent}}},c),b=_=new e(o.context||u.root_name,11),v.parse(t),P&&B.length&&(o.context?o.invalid=!0:p(B)),F&&("body"==b.name||o.isRootContent)&&i(),!o.invalid){for(T in g){for(S=m[T],x=g[T],w=x.length;w--;)x[w].parent||x.splice(w,1);for(C=0,E=S.length;C<E;C++)S[C](x,T,o)}for(C=0,E=h.length;C<E;C++)if(S=h[C],S.name in y){for(x=y[S.name],w=x.length;w--;)x[w].parent||x.splice(w,1);for(w=0,j=S.callbacks.length;w<j;w++)S.callbacks[w](x,S.name,o)}}return b},u.remove_trailing_brs&&f.addNodeFilter("br",function(t){var n,o,r,i,s,d,p,f,m=t.length,h=a({},c.getBlockElements()),g=c.getNonEmptyElements(),y=c.getNonEmptyElements();for(h.body=1,n=0;n<m;n++)if(o=t[n],r=o.parent,h[o.parent.name]&&o===r.lastChild){for(s=o.prev;s;){if(d=s.name,"span"!==d||"bookmark"!==s.attr("data-mce-type")){if("br"!==d)break;if("br"===d){o=null;break}}s=s.prev}o&&(o.remove(),r.isEmpty(g,y)&&(p=c.getElementRule(r.name),p&&(p.removeEmpty?r.remove():p.paddEmpty&&l(u,r))))}else{for(i=o;r&&r.firstChild===i&&r.lastChild===i&&(i=r,!h[r.name]);)r=r.parent;i===r&&u.padd_empty_with_br!==!0&&(f=new e("#text",3),f.value=" ",o.replace(f))}}),u.allow_unsafe_link_target||f.addAttributeFilter("href",function(e){for(var t,n=e.length,r=function(e){var t=e.split(" ").filter(function(e){return e.length>0});return t.concat(["noopener"]).join(" ")},i=function(e){var t=e?o.trim(e):"";return/\b(noopener)\b/g.test(t)?t:r(t)};n--;)t=e[n],"a"===t.name&&"_blank"===t.attr("target")&&t.attr("rel",i(t.attr("rel")))}),u.allow_html_in_named_anchor||f.addAttributeFilter("id,name",function(e){for(var t,n,o,r,i=e.length;i--;)if(r=e[i],"a"===r.name&&r.firstChild&&!r.attr("href")){o=r.parent,t=r.lastChild;do n=t.prev,o.insert(t,r),t=n;while(t)}}),u.fix_list_elements&&f.addNodeFilter("ul,ol",function(t){for(var n,o,r=t.length;r--;)if(n=t[r],o=n.parent,"ul"===o.name||"ol"===o.name)if(n.prev&&"li"===n.prev.name)n.prev.append(n);else{var i=new e("li",1);i.attr("style","list-style-type: none"),n.wrap(i)}}),u.validate&&c.getValidClasses()&&f.addAttributeFilter("class",function(e){for(var t,n,o,r,i,s,a,l=e.length,d=c.getValidClasses();l--;){for(t=e[l],n=t.attr("class").split(" "),i="",o=0;o<n.length;o++)r=n[o],a=!1,s=d["*"],s&&s[r]&&(a=!0),s=d[t.name],!a&&s&&s[r]&&(a=!0),a&&(i&&(i+=" "),i+=r);i.length||(i=null),t.attr("class",i)}})}}),l("tinymce.core.html.Writer",["tinymce.core.html.Entities","tinymce.core.util.Tools"],function(e,t){var n=t.makeMap;return function(t){var o,r,i,s,a,l=[];return t=t||{},o=t.indent,r=n(t.indent_before||""),i=n(t.indent_after||""),s=e.getEncodeFunc(t.entity_encoding||"raw",t.entities),a="html"==t.element_format,{start:function(e,t,n){var d,u,c,p;if(o&&r[e]&&l.length>0&&(p=l[l.length-1],p.length>0&&"\n"!==p&&l.push("\n")),l.push("<",e),t)for(d=0,u=t.length;d<u;d++)c=t[d],l.push(" ",c.name,'="',s(c.value,!0),'"');!n||a?l[l.length]=">":l[l.length]=" />",n&&o&&i[e]&&l.length>0&&(p=l[l.length-1],p.length>0&&"\n"!==p&&l.push("\n"))},end:function(e){var t;l.push("</",e,">"),o&&i[e]&&l.length>0&&(t=l[l.length-1],t.length>0&&"\n"!==t&&l.push("\n"))},text:function(e,t){e.length>0&&(l[l.length]=t?e:s(e))},cdata:function(e){l.push("<![CDATA[",e,"]]>")},comment:function(e){l.push("<!--",e,"-->")},pi:function(e,t){t?l.push("<?",e," ",s(t),"?>"):l.push("<?",e,"?>"),o&&l.push("\n")},doctype:function(e){l.push("<!DOCTYPE",e,">",o?"\n":"")},reset:function(){l.length=0},getContent:function(){return l.join("").replace(/\n$/,"")}}}}),l("tinymce.core.html.Serializer",["tinymce.core.html.Writer","tinymce.core.html.Schema"],function(e,t){return function(n,o){var r=this,i=new e(n);n=n||{},n.validate=!("validate"in n)||n.validate,r.schema=o=o||new t,r.writer=i,r.serialize=function(e){function t(e){var n,a,l,d,u,c,p,f,m,h=r[e.type];if(h)h(e);else{if(n=e.name,a=e.shortEnded,l=e.attributes,s&&l&&l.length>1&&(c=[],c.map={},m=o.getElementRule(e.name))){for(p=0,f=m.attributesOrder.length;p<f;p++)d=m.attributesOrder[p],d in l.map&&(u=l.map[d],c.map[d]=u,c.push({name:d,value:u}));for(p=0,f=l.length;p<f;p++)d=l[p].name,d in c.map||(u=l.map[d],c.map[d]=u,c.push({name:d,value:u}));l=c}if(i.start(e.name,l,a),!a){if(e=e.firstChild)do t(e);while(e=e.next);i.end(n)}}}var r,s;return s=n.validate,r={3:function(e){i.text(e.value,e.raw)},8:function(e){i.comment(e.value)},7:function(e){i.pi(e.name,e.value)},10:function(e){i.doctype(e.value)},4:function(e){i.cdata(e.value)},11:function(e){if(e=e.firstChild)do t(e);while(e=e.next)}},i.reset(),1!=e.type||n.inner?r[11](e):t(e),i.getContent()}}}),l("tinymce.core.dom.Serializer",["tinymce.core.dom.DOMUtils","tinymce.core.html.DomParser","tinymce.core.html.SaxParser","tinymce.core.html.Entities","tinymce.core.html.Serializer","tinymce.core.html.Node","tinymce.core.html.Schema","tinymce.core.Env","tinymce.core.util.Tools","tinymce.core.text.Zwsp"],function(e,t,n,o,r,i,s,a,l,d){function u(e){function t(e){return e&&"br"===e.name}var n,o;n=e.lastChild,t(n)&&(o=n.prev,t(o)&&(n.remove(),o.remove()))}var c=l.each,p=l.trim,f=e.DOM;return function(e,i){function m(e){var t=new RegExp(["<span[^>]+data-mce-bogus[^>]+>[​\ufeff]+<\\/span>","\\s?("+x.join("|")+')="[^"]+"'].join("|"),"gi");return e=d.trim(e.replace(t,""))}function h(e){var t,o,r,s,a,l=e,d=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,u=i.schema;for(l=m(l),a=u.getShortEndedElements();s=d.exec(l);)o=d.lastIndex,r=s[0].length,t=a[s[1]]?o:n.findEndTag(u,l,o),l=l.substring(0,o-r)+l.substring(t),d.lastIndex=o-r;return l}function g(){return h(i.getBody().innerHTML)}function y(e){l.inArray(x,e)===-1&&(_.addAttributeFilter(e,function(e,t){for(var n=e.length;n--;)e[n].attr(t,null)}),x.push(e))}var v,b,_,x=["data-mce-selected"];return i&&(v=i.dom,b=i.schema),v=v||f,b=b||new s(e),e.entity_encoding=e.entity_encoding||"named",e.remove_trailing_brs=!("remove_trailing_brs"in e)||e.remove_trailing_brs,_=new t(e,b),_.addAttributeFilter("data-mce-tabindex",function(e,t){for(var n,o=e.length;o--;)n=e[o],n.attr("tabindex",n.attributes.map["data-mce-tabindex"]),n.attr(t,null)}),_.addAttributeFilter("src,href,style",function(t,n){for(var o,r,i,s=t.length,a="data-mce-"+n,l=e.url_converter,d=e.url_converter_scope;s--;)o=t[s],r=o.attributes.map[a],r!==i?(o.attr(n,r.length>0?r:null),o.attr(a,null)):(r=o.attributes.map[n],"style"===n?r=v.serializeStyle(v.parseStyle(r),o.name):l&&(r=l.call(d,r,n,o.name)),o.attr(n,r.length>0?r:null))}),_.addAttributeFilter("class",function(e){for(var t,n,o=e.length;o--;)t=e[o],n=t.attr("class"),n&&(n=t.attr("class").replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),t.attr("class",n.length>0?n:null))}),_.addAttributeFilter("data-mce-type",function(e,t,n){for(var o,r=e.length;r--;)o=e[r],"bookmark"!==o.attributes.map["data-mce-type"]||n.cleanup||o.remove()}),_.addNodeFilter("noscript",function(e){for(var t,n=e.length;n--;)t=e[n].firstChild,t&&(t.value=o.decode(t.value))}),_.addNodeFilter("script,style",function(e,t){function n(e){return e.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"")}for(var o,r,i,s=e.length;s--;)o=e[s],r=o.firstChild?o.firstChild.value:"","script"===t?(i=o.attr("type"),i&&o.attr("type","mce-no/type"==i?null:i.replace(/^mce\-/,"")),r.length>0&&(o.firstChild.value="// <![CDATA[\n"+n(r)+"\n// ]]>")):r.length>0&&(o.firstChild.value="<!--\n"+n(r)+"\n-->")}),_.addNodeFilter("#comment",function(e){for(var t,n=e.length;n--;)t=e[n],0===t.value.indexOf("[CDATA[")?(t.name="#cdata",t.type=4,t.value=t.value.replace(/^\[CDATA\[|\]\]$/g,"")):0===t.value.indexOf("mce:protected ")&&(t.name="#text",t.type=3,t.raw=!0,t.value=unescape(t.value).substr(14))}),_.addNodeFilter("xml:namespace,input",function(e,t){for(var n,o=e.length;o--;)n=e[o],7===n.type?n.remove():1===n.type&&("input"!==t||"type"in n.attributes.map||n.attr("type","text"))}),_.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-type,data-mce-resize",function(e,t){for(var n=e.length;n--;)e[n].attr(t,null)}),{schema:b,addNodeFilter:_.addNodeFilter,addAttributeFilter:_.addAttributeFilter,serialize:function(t,n){var o,i,s,l,f,m,h=this;return a.ie&&v.select("script,style,select,map").length>0?(f=t.innerHTML,t=t.cloneNode(!1),v.setHTML(t,f)):t=t.cloneNode(!0),o=document.implementation,o.createHTMLDocument&&(i=o.createHTMLDocument(""),c("BODY"==t.nodeName?t.childNodes:[t],function(e){i.body.appendChild(i.importNode(e,!0))}),t="BODY"!=t.nodeName?i.body.firstChild:i.body,s=v.doc,v.doc=i),n=n||{},n.format=n.format||"html",n.selection&&(n.forced_root_block=""),n.no_events||(n.node=t,h.onPreProcess(n)),m=_.parse(p(n.getInner?t.innerHTML:v.getOuterHTML(t)),n),u(m),l=new r(e,b),n.content=l.serialize(m),n.cleanup||(n.content=d.trim(n.content),n.content=n.content.replace(/\uFEFF/g,"")),n.no_events||h.onPostProcess(n),s&&(v.doc=s),n.node=null,n.content},addRules:function(e){b.addValidElements(e)},setRules:function(e){b.setValidElements(e)},onPreProcess:function(e){i&&i.fire("PreProcess",e)},onPostProcess:function(e){i&&i.fire("PostProcess",e)},addTempAttr:y,trimHtml:m,getTrimmedContent:g,trimContent:h}}}),l("tinymce.core.util.VK",["tinymce.core.Env"],function(e){return{BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,modifierPressed:function(e){return e.shiftKey||e.ctrlKey||e.altKey||this.metaKeyPressed(e)},metaKeyPressed:function(t){return e.mac?t.metaKey:t.ctrlKey&&!t.altKey}}}),l("tinymce.core.dom.ControlSelection",["tinymce.core.util.VK","tinymce.core.util.Tools","tinymce.core.util.Delay","tinymce.core.Env","tinymce.core.dom.NodeType"],function(e,t,n,o,r){function i(e,t){for(;t&&t!=e;){if(a(t)||s(t))return t;t=t.parentNode}return null}var s=r.isContentEditableFalse,a=r.isContentEditableTrue;return function(r,a){function l(e){var t=a.settings.object_resizing;return t!==!1&&!o.iOS&&("string"!=typeof t&&(t="table,img,div"),"false"!==e.getAttribute("data-mce-resize")&&(e!=a.getBody()&&a.dom.is(e,t)))}function d(t){var n,o,r,i,s;n=t.screenX-N,o=t.screenY-R,B=n*k[2]+O,z=o*k[3]+A,B=B<5?5:B,z=z<5?5:z,r="IMG"==j.nodeName&&a.settings.resize_img_proportional!==!1?!e.modifierPressed(t):e.modifierPressed(t)||"IMG"==j.nodeName&&k[2]*k[3]!==0,r&&($(n)>$(o)?(z=Y(B*L),B=Y(z/L)):(B=Y(z/L),z=Y(B*L))),W.setStyles(S,{width:B,height:z}),i=k.startPos.x+n,s=k.startPos.y+o,i=i>0?i:0,s=s>0?s:0,W.setStyles(T,{left:i,top:s,display:"block"}),T.innerHTML=B+" &times; "+z,k[2]<0&&S.clientWidth<=B&&W.setStyle(S,"left",D+(O-B)),k[3]<0&&S.clientHeight<=z&&W.setStyle(S,"top",M+(A-z)),n=J.scrollWidth-U,o=J.scrollHeight-H,n+o!==0&&W.setStyles(T,{left:i-n,top:s-o}),F||(a.fire("ObjectResizeStart",{target:j,width:O,height:A}),F=!0)}function u(){function e(e,t){t&&(j.style[e]||!a.schema.isValid(j.nodeName.toLowerCase(),e)?W.setStyle(j,e,t):W.setAttrib(j,e,t))}F=!1,e("width",B),e("height",z),W.unbind(q,"mousemove",d),W.unbind(q,"mouseup",u),G!=q&&(W.unbind(G,"mousemove",d),W.unbind(G,"mouseup",u)),W.remove(S),W.remove(T),K&&"TABLE"!=j.nodeName||c(j),a.fire("ObjectResized",{target:j,width:B,height:z}),W.setAttrib(j,"style",W.getAttrib(j,"style")),a.nodeChanged()}function c(e,t,n){var r,i,s,c,f;p(),x(),r=W.getPos(e,J),D=r.x,M=r.y,f=e.getBoundingClientRect(),i=f.width||f.right-f.left,s=f.height||f.bottom-f.top,j!=e&&(_(),j=e,B=z=0),c=a.fire("ObjectSelected",{target:e}),l(e)&&!c.isDefaultPrevented()?V(P,function(e,r){function a(t){N=t.screenX,R=t.screenY,O=j.clientWidth,A=j.clientHeight,L=A/O,k=e,e.startPos={x:i*e[0]+D,y:s*e[1]+M},U=J.scrollWidth,H=J.scrollHeight,S=j.cloneNode(!0),W.addClass(S,"mce-clonedresizable"),W.setAttrib(S,"data-mce-bogus","all"),S.contentEditable=!1,S.unSelectabe=!0,W.setStyles(S,{left:D,top:M,margin:0}),S.removeAttribute("data-mce-selected"),J.appendChild(S),W.bind(q,"mousemove",d),W.bind(q,"mouseup",u),G!=q&&(W.bind(G,"mousemove",d),W.bind(G,"mouseup",u)),T=W.add(J,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},O+" &times; "+A)}var l;return t?void(r==t&&a(n)):(l=W.get("mceResizeHandle"+r),l&&W.remove(l),l=W.add(J,"div",{id:"mceResizeHandle"+r,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+r+"-resize; margin:0; padding:0"}),o.ie&&(l.contentEditable=!1),W.bind(l,"mousedown",function(e){e.stopImmediatePropagation(),e.preventDefault(),a(e)}),e.elm=l,void W.setStyles(l,{left:i*e[0]+D-l.offsetWidth/2,top:s*e[1]+M-l.offsetHeight/2}))}):p(),j.setAttribute("data-mce-selected","1")}function p(){var e,t;x(),j&&j.removeAttribute("data-mce-selected");for(e in P)t=W.get("mceResizeHandle"+e),t&&(W.unbind(t),W.remove(t))}function f(e){function t(e,t){if(e)do if(e===t)return!0;while(e=e.parentNode)}var n,o;if(!F&&!a.removed)return V(W.select("img[data-mce-selected],hr[data-mce-selected]"),function(e){e.removeAttribute("data-mce-selected")}),o="mousedown"==e.type?e.target:r.getNode(),o=W.$(o).closest(K?"table":"table,img,hr")[0],t(o,J)&&(C(),n=r.getStart(!0),t(n,o)&&t(r.getEnd(!0),o)&&(!K||o!=n&&"IMG"!==n.nodeName))?void c(o):void p()}function m(e,t,n){e&&e.attachEvent&&e.attachEvent("on"+t,n)}function h(e,t,n){e&&e.detachEvent&&e.detachEvent("on"+t,n)}function g(e){var t,n,o,r,i,s,l,d=e.srcElement;t=d.getBoundingClientRect(),s=I.clientX-t.left,l=I.clientY-t.top;for(n in P)if(o=P[n],r=d.offsetWidth*o[0],i=d.offsetHeight*o[1],$(r-s)<8&&$(i-l)<8){k=o;break}F=!0,a.fire("ObjectResizeStart",{target:j,width:j.clientWidth,height:j.clientHeight}),a.getDoc().selection.empty(),c(d,n,I)}function y(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function v(e){return s(i(a.getBody(),e))}function b(e){var t=e.srcElement;if(v(t))return void y(e);if(t!=j){if(a.fire("ObjectSelected",{target:t}),_(),0===t.id.indexOf("mceResizeHandle"))return void(e.returnValue=!1);"IMG"!=t.nodeName&&"TABLE"!=t.nodeName||(p(),j=t,m(t,"resizestart",g))}}function _(){h(j,"resizestart",g)}function x(){for(var e in P){var t=P[e];t.elm&&(W.unbind(t.elm),delete t.elm)}}function C(){try{a.getDoc().execCommand("enableObjectResizing",!1,!1)}catch(e){}}function E(e){var t;if(K){t=q.body.createControlRange();try{return t.addElement(e),t.select(),!0}catch(e){}}}function w(){j=S=null,K&&(_(),h(J,"controlselect",b))}var j,S,T,P,k,I,N,R,D,M,O,A,L,F,B,z,U,H,W=a.dom,V=t.each,q=a.getDoc(),G=document,K=o.ie&&o.ie<11,$=Math.abs,Y=Math.round,J=a.getBody();P={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]};var Z=".mce-content-body";return a.contentStyles.push(Z+" div.mce-resizehandle {position: absolute;border: 1px solid black;box-sizing: box-sizing;background: #FFF;width: 7px;height: 7px;z-index: 10000}"+Z+" .mce-resizehandle:hover {background: #000}"+Z+" img[data-mce-selected],"+Z+" hr[data-mce-selected] {outline: 1px solid black;resize: none}"+Z+" .mce-clonedresizable {position: absolute;"+(o.gecko?"":"outline: 1px dashed black;")+"opacity: .5;filter: alpha(opacity=50);z-index: 10000}"+Z+" .mce-resize-helper {background: #555;background: rgba(0,0,0,0.75);border-radius: 3px;border: 1px;color: white;display: none;font-family: sans-serif;font-size: 12px;white-space: nowrap;line-height: 14px;margin: 5px 10px;padding: 5px;position: absolute;z-index: 10001}"),a.on("init",function(){K?(a.on("ObjectResized",function(e){"TABLE"!=e.target.nodeName&&(p(),E(e.target))}),m(J,"controlselect",b),a.on("mousedown",function(e){I=e})):(C(),o.ie>=11&&(a.on("mousedown click",function(e){var t=e.target,n=t.nodeName;F||!/^(TABLE|IMG|HR)$/.test(n)||v(t)||(a.selection.select(t,"TABLE"==n),"mousedown"==e.type&&a.nodeChanged())}),a.dom.bind(J,"mscontrolselect",function(e){function t(e){n.setEditorTimeout(a,function(){a.selection.select(e)})}return v(e.target)?(e.preventDefault(),void t(e.target)):void(/^(TABLE|IMG|HR)$/.test(e.target.nodeName)&&(e.preventDefault(),"IMG"==e.target.tagName&&t(e.target)))})));var e=n.throttle(function(e){a.composing||f(e)});a.on("nodechange ResizeEditor ResizeWindow drop",e),a.on("keyup compositionend",function(t){j&&"TABLE"==j.nodeName&&e(t)}),a.on("hide blur",p)}),a.on("remove",x),{isResizable:l,showResizeRect:c,hideResizeRect:p,updateResizeRect:f,controlSelect:E,destroy:w}}}),l("tinymce.core.util.Fun",[],function(){function e(e){return function(){return e}}function t(e){return function(t){return!e(t)}}function n(e,t){return function(n){return e(t(n))}}function o(){var e=a.call(arguments);return function(t){for(var n=0;n<e.length;n++)if(e[n](t))return!0;return!1}}function r(){var e=a.call(arguments);return function(t){for(var n=0;n<e.length;n++)if(!e[n](t))return!1;return!0}}function i(e){var t=a.call(arguments);return t.length-1>=e.length?e.apply(this,t.slice(1)):function(){var e=t.concat([].slice.call(arguments));return i.apply(this,e)}}function s(){}var a=[].slice;return{constant:e,negate:t,and:r,or:o,curry:i,compose:n,noop:s}}),l("tinymce.core.caret.CaretCandidate",["tinymce.core.dom.NodeType","tinymce.core.util.Arr","tinymce.core.caret.CaretContainer"],function(e,t,n){function o(e){return!h(e)&&(c(e)?!p(e.parentNode):f(e)||u(e)||m(e)||d(e))}function r(e,t){for(e=e.parentNode;e&&e!=t;e=e.parentNode){if(d(e))return!1;if(l(e))return!0}return!0}function i(e){return!!d(e)&&t.reduce(e.getElementsByTagName("*"),function(e,t){return e||l(t)},!1)!==!0}function s(e){return f(e)||i(e)}function a(e,t){return o(e)&&r(e,t)}var l=e.isContentEditableTrue,d=e.isContentEditableFalse,u=e.isBr,c=e.isText,p=e.matchNodeNames("script style textarea"),f=e.matchNodeNames("img input textarea hr iframe video audio object"),m=e.matchNodeNames("table"),h=n.isCaretContainer;return{isCaretCandidate:o,isInEditable:r,isAtomic:s,isEditableCaretCandidate:a}}),l("tinymce.core.geom.ClientRect",[],function(){function e(e){return e?{left:u(e.left),top:u(e.top),bottom:u(e.bottom),right:u(e.right),width:u(e.width),height:u(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0}}function t(t,n){return t=e(t),n?t.right=t.left:(t.left=t.left+t.width,t.right=t.left),t.width=0,t}function n(e,t){return e.left===t.left&&e.top===t.top&&e.bottom===t.bottom&&e.right===t.right}function o(e,t,n){return e>=0&&e<=Math.min(t.height,n.height)/2}function r(e,t){return e.bottom-e.height/2<t.top||!(e.top>t.bottom)&&o(t.top-e.bottom,e,t)}function i(e,t){return e.top>t.bottom||!(e.bottom<t.top)&&o(t.bottom-e.top,e,t)}function s(e,t){return e.left<t.left}function a(e,t){return e.right>t.right}function l(e,t){return r(e,t)?-1:i(e,t)?1:s(e,t)?-1:a(e,t)?1:0}function d(e,t,n){return t>=e.left&&t<=e.right&&n>=e.top&&n<=e.bottom}var u=Math.round;return{clone:e,collapse:t,isEqual:n,isAbove:r,isBelow:i,isLeft:s,isRight:a,compare:l,containsXY:d}}),l("tinymce.core.text.ExtendingChar",[],function(){function e(e){return"string"==typeof e&&e.charCodeAt(0)>=768&&t.test(e)}var t=new RegExp("[̀-ͯ҃-҇҈-҉֑-ֽֿׁ-ׂׄ-ׇׅؐ-ًؚ-ٰٟۖ-ۜ۟-ۤۧ-۪ۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣣ-ंऺ़ु-ै्॑-ॗॢ-ॣঁ়াু-ৄ্ৗৢ-ৣਁ-ਂ਼ੁ-ੂੇ-ੈੋ-੍ੑੰ-ੱੵઁ-ં઼ુ-ૅે-ૈ્ૢ-ૣଁ଼ାିୁ-ୄ୍ୖୗୢ-ୣஂாீ்ௗఀా-ీె-ైొ-్ౕ-ౖౢ-ౣಁ಼ಿೂೆೌ-್ೕ-ೖೢ-ೣഁാു-ൄ്ൗൢ-ൣ්ාි-ුූෟัิ-ฺ็-๎ັິ-ູົ-ຼ່-ໍ༘-ཱ༹༙༵༷-ཾྀ-྄྆-྇ྍ-ྗྙ-ྼ࿆ိ-ူဲ-့္-်ွ-ှၘ-ၙၞ-ၠၱ-ၴႂႅ-ႆႍႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒ-ᝓᝲ-ᝳ឴-឵ិ-ួំ៉-៓៝᠋-᠍ᢩᤠ-ᤢᤧ-ᤨᤲ᤹-᤻ᨗ-ᨘᨛᩖᩘ-ᩞ᩠ᩢᩥ-ᩬᩳ-᩿᩼᪰-᪽᪾ᬀ-ᬃ᬴ᬶ-ᬺᬼᭂ᭫-᭳ᮀ-ᮁᮢ-ᮥᮨ-ᮩ᮫-ᮭ᯦ᯨ-ᯩᯭᯯ-ᯱᰬ-ᰳᰶ-᰷᳐-᳔᳒-᳢᳠-᳨᳭᳴᳸-᳹᷀-᷵᷼-᷿‌-‍⃐-⃜⃝-⃠⃡⃢-⃤⃥-⃰⳯-⵿⳱ⷠ-〪ⷿ-〭〮-゙〯-゚꙯꙰-꙲ꙴ-꙽ꚞ-ꚟ꛰-꛱ꠂ꠆ꠋꠥ-ꠦ꣄꣠-꣱ꤦ-꤭ꥇ-ꥑꦀ-ꦂ꦳ꦶ-ꦹꦼꧥꨩ-ꨮꨱ-ꨲꨵ-ꨶꩃꩌꩼꪰꪲ-ꪴꪷ-ꪸꪾ-꪿꫁ꫬ-ꫭ꫶ꯥꯨ꯭ﬞ︀-️︠-︯ﾞ-ﾟ]");return{isExtendingChar:e}}),l("tinymce.core.caret.CaretPosition",["tinymce.core.util.Fun","tinymce.core.dom.NodeType","tinymce.core.dom.DOMUtils","tinymce.core.dom.RangeUtils","tinymce.core.caret.CaretCandidate","tinymce.core.geom.ClientRect","tinymce.core.text.ExtendingChar"],function(e,t,n,o,r,i,s){function a(e){return"createRange"in e?e.createRange():n.DOM.createRng()}function l(e){return e&&/[\r\n\t ]/.test(e)}function d(e){var t,n=e.startContainer,o=e.startOffset;return!!(l(e.toString())&&y(n.parentNode)&&(t=n.data,l(t[o-1])||l(t[o+1])))}function u(e){function t(e){var t,n=e.ownerDocument,o=a(n),r=n.createTextNode(" "),s=e.parentNode;return s.insertBefore(r,e),o.setStart(r,0),o.setEnd(r,1),t=i.clone(o.getBoundingClientRect()),s.removeChild(r),t}function n(e){var n,o;return o=e.getClientRects(),n=o.length>0?i.clone(o[0]):i.clone(e.getBoundingClientRect()),b(e)&&0===n.left?t(e):n}function o(e,t){return e=i.collapse(e,t),e.width=1,e.right=e.left+1,e}function r(e){0!==e.height&&(f.length>0&&i.isEqual(e,f[f.length-1])||f.push(e))}function l(e,t){var i=a(e.ownerDocument);if(t<e.data.length){if(s.isExtendingChar(e.data[t]))return f;if(s.isExtendingChar(e.data[t-1])&&(i.setStart(e,t),i.setEnd(e,t+1),!d(i)))return r(o(n(i),!1)),f}t>0&&(i.setStart(e,t-1),i.setEnd(e,t),d(i)||r(o(n(i),!1))),t<e.data.length&&(i.setStart(e,t),i.setEnd(e,t+1),d(i)||r(o(n(i),!0)))}var u,c,f=[];if(v(e.container()))return l(e.container(),e.offset()),f;if(p(e.container()))if(e.isAtEnd())c=x(e.container(),e.offset()),v(c)&&l(c,c.data.length),g(c)&&!b(c)&&r(o(n(c),!1));else{if(c=x(e.container(),e.offset()),v(c)&&l(c,0),g(c)&&e.isAtEnd())return r(o(n(c),!1)),f;u=x(e.container(),e.offset()-1),g(u)&&!b(u)&&(m(u)||m(c)||!g(c))&&r(o(n(u),!1)),g(c)&&r(o(n(c),!0))}return f}function c(t,n,o){function r(){return v(t)?0===n:0===n}function i(){return v(t)?n>=t.data.length:n>=t.childNodes.length}function s(){var e;return e=a(t.ownerDocument),e.setStart(t,n),e.setEnd(t,n),e}function l(){return o||(o=u(new c(t,n))),o}function d(){return l().length>0}function p(e){return e&&t===e.container()&&n===e.offset()}function f(e){return x(t,e?n-1:n)}return{container:e.constant(t),offset:e.constant(n),toRange:s,getClientRects:l,isVisible:d,isAtStart:r,isAtEnd:i,isEqual:p,getNode:f}}var p=t.isElement,f=r.isCaretCandidate,m=t.matchStyleValues("display","block table"),h=t.matchStyleValues("float","left right"),g=e.and(p,f,e.negate(h)),y=e.negate(t.matchStyleValues("white-space","pre pre-line pre-wrap")),v=t.isText,b=t.isBr,_=n.nodeIndex,x=o.getNode;return c.fromRangeStart=function(e){return new c(e.startContainer,e.startOffset)},c.fromRangeEnd=function(e){return new c(e.endContainer,e.endOffset)},c.after=function(e){return new c(e.parentNode,_(e)+1)},c.before=function(e){return new c(e.parentNode,_(e))},c.isAtStart=function(e){return!!e&&e.isAtStart()},c.isAtEnd=function(e){return!!e&&e.isAtEnd()},c.isTextPosition=function(e){return!!e&&t.isText(e.container())},c}),l("tinymce.core.caret.CaretBookmark",["tinymce.core.dom.NodeType","tinymce.core.dom.DOMUtils","tinymce.core.util.Fun","tinymce.core.util.Arr","tinymce.core.caret.CaretPosition"],function(e,t,n,o,r){function i(e){var t=e.parentNode;return y(t)?i(t):t}function s(e){return e?o.reduce(e.childNodes,function(e,t){return y(t)&&"BR"!=t.nodeName?e=e.concat(s(t)):e.push(t),e},[]):[]}function a(e,t){for(;(e=e.previousSibling)&&g(e);)t+=e.data.length;return t}function l(e){return function(t){return e===t}}function d(t){var n,r,a;return n=s(i(t)),r=o.findIndex(n,l(t),t),n=n.slice(0,r+1),a=o.reduce(n,function(e,t,o){return g(t)&&g(n[o-1])&&e++,e},0),n=o.filter(n,e.matchNodeNames(t.nodeName)),r=o.findIndex(n,l(t),t),r-a}function u(e){var t;return t=g(e)?"text()":e.nodeName.toLowerCase(),t+"["+d(e)+"]"}function c(e,t,n){var o=[];for(t=t.parentNode;t!=e&&(!n||!n(t));t=t.parentNode)o.push(t);return o}function p(t,r){var i,s,l,d,p,f=[];return i=r.container(),s=r.offset(),g(i)?l=a(i,s):(d=i.childNodes,s>=d.length?(l="after",s=d.length-1):l="before",i=d[s]),f.push(u(i)),p=c(t,i),p=o.filter(p,n.negate(e.isBogus)),f=f.concat(o.map(p,function(e){return u(e)})),f.reverse().join("/")+","+l}function f(t,n,r){var i=s(t);return i=o.filter(i,function(e,t){return!g(e)||!g(i[t-1])}),i=o.filter(i,e.matchNodeNames(n)),i[r]}function m(e,t){for(var n,o=e,i=0;g(o);){if(n=o.data.length,t>=i&&t<=i+n){e=o,t-=i;break}if(!g(o.nextSibling)){e=o,t=n;break}i+=n,o=o.nextSibling}return t>e.data.length&&(t=e.data.length),new r(e,t)}function h(e,t){var n,i,s;return t?(n=t.split(","),t=n[0].split("/"),s=n.length>1?n[1]:"before",i=o.reduce(t,function(e,t){return(t=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(t))?("text()"===t[1]&&(t[1]="#text"),f(e,t[1],parseInt(t[2],10))):null},e),i?g(i)?m(i,parseInt(s,10)):(s="after"===s?v(i)+1:v(i),new r(i.parentNode,s)):null):null}var g=e.isText,y=e.isBogus,v=t.nodeIndex;return{create:p,resolve:h}}),l("tinymce.core.dom.BookmarkManager",["tinymce.core.caret.CaretBookmark","tinymce.core.caret.CaretContainer","tinymce.core.caret.CaretPosition","tinymce.core.dom.NodeType","tinymce.core.dom.RangeUtils","tinymce.core.Env","tinymce.core.text.Zwsp","tinymce.core.util.Tools"],function(e,t,n,o,r,i,s,a){function l(s){var l=s.dom;this.getBookmark=function(i,c){function p(e,t){var n=0;return a.each(l.select(e),function(e){if("all"!==e.getAttribute("data-mce-bogus"))return e!=t&&void n++}),n}function f(e){function t(t){var n,o,r,i=t?"start":"end";n=e[i+"Container"],o=e[i+"Offset"],1==n.nodeType&&"TR"==n.nodeName&&(r=n.childNodes,n=r[Math.min(t?o:o-1,r.length-1)],n&&(o=t?0:n.childNodes.length,e["set"+(t?"Start":"End")](n,o)))}return t(!0),t(),e}function m(e){function t(e,t){var o,r=e[t?"startContainer":"endContainer"],i=e[t?"startOffset":"endOffset"],s=[],a=0;for(3===r.nodeType?s.push(c?u(r,i):i):(o=r.childNodes,i>=o.length&&o.length&&(a=1,
i=Math.max(0,o.length-1)),s.push(l.nodeIndex(o[i],c)+a));r&&r!=n;r=r.parentNode)s.push(l.nodeIndex(r,c));return s}var n=l.getRoot(),o={};return o.start=t(e,!0),s.isCollapsed()||(o.end=t(e)),o}function h(e){function n(e,n){var i;if(o.isElement(e)&&(e=r.getNode(e,n),d(e)))return e;if(t.isCaretContainer(e)){if(o.isText(e)&&t.isCaretContainerBlock(e)&&(e=e.parentNode),i=e.previousSibling,d(i))return i;if(i=e.nextSibling,d(i))return i}}return n(e.startContainer,e.startOffset)||n(e.endContainer,e.endOffset)}var g,y,v,b,_,x,C,E="&#xFEFF;";if(2==i)return x=s.getNode(),_=x?x.nodeName:null,g=s.getRng(),d(x)||"IMG"==_?{name:_,index:p(_,x)}:s.tridentSel?s.tridentSel.getBookmark(i):(x=h(g),x?(_=x.tagName,{name:_,index:p(_,x)}):m(g));if(3==i)return g=s.getRng(),{start:e.create(l.getRoot(),n.fromRangeStart(g)),end:e.create(l.getRoot(),n.fromRangeEnd(g))};if(i)return{rng:s.getRng()};if(g=s.getRng(),v=l.uniqueId(),b=s.isCollapsed(),C="overflow:hidden;line-height:0px",g.duplicate||g.item){if(g.item)return x=g.item(0),_=x.nodeName,{name:_,index:p(_,x)};y=g.duplicate();try{g.collapse(),g.pasteHTML('<span data-mce-type="bookmark" id="'+v+'_start" style="'+C+'">'+E+"</span>"),b||(y.collapse(!1),g.moveToElementText(y.parentElement()),0===g.compareEndPoints("StartToEnd",y)&&y.move("character",-1),y.pasteHTML('<span data-mce-type="bookmark" id="'+v+'_end" style="'+C+'">'+E+"</span>"))}catch(e){return null}}else{if(x=s.getNode(),_=x.nodeName,"IMG"==_)return{name:_,index:p(_,x)};y=f(g.cloneRange()),b||(y.collapse(!1),y.insertNode(l.create("span",{"data-mce-type":"bookmark",id:v+"_end",style:C},E))),g=f(g),g.collapse(!0),g.insertNode(l.create("span",{"data-mce-type":"bookmark",id:v+"_start",style:C},E))}return s.moveToBookmark({id:v,keep:1}),{id:v}},this.moveToBookmark=function(t){function n(e){var n,o,r,i,s=t[e?"start":"end"];if(s){for(r=s[0],o=c,n=s.length-1;n>=1;n--){if(i=o.childNodes,s[n]>i.length-1)return;o=i[s[n]]}3===o.nodeType&&(r=Math.min(s[0],o.nodeValue.length)),1===o.nodeType&&(r=Math.min(s[0],o.childNodes.length)),e?u.setStart(o,r):u.setEnd(o,r)}return!0}function o(e){var n,o,r,s,d=l.get(t.id+"_"+e),u=t.keep;if(d&&(n=d.parentNode,"start"==e?(u?(n=d.firstChild,o=1):o=l.nodeIndex(d),p=f=n,m=h=o):(u?(n=d.firstChild,o=1):o=l.nodeIndex(d),f=n,h=o),!u)){for(s=d.previousSibling,r=d.nextSibling,a.each(a.grep(d.childNodes),function(e){3==e.nodeType&&(e.nodeValue=e.nodeValue.replace(/\uFEFF/g,""))});d=l.get(t.id+"_"+e);)l.remove(d,1);s&&r&&s.nodeType==r.nodeType&&3==s.nodeType&&!i.opera&&(o=s.nodeValue.length,s.appendData(r.nodeValue),l.remove(r),"start"==e?(p=f=s,m=h=o):(f=s,h=o))}}function r(e){return!l.isBlock(e)||e.innerHTML||i.ie||(e.innerHTML='<br data-mce-bogus="1" />'),e}function d(){var n,o;return n=l.createRng(),o=e.resolve(l.getRoot(),t.start),n.setStart(o.container(),o.offset()),o=e.resolve(l.getRoot(),t.end),n.setEnd(o.container(),o.offset()),n}var u,c,p,f,m,h;if(t)if(a.isArray(t.start)){if(u=l.createRng(),c=l.getRoot(),s.tridentSel)return s.tridentSel.moveToBookmark(t);n(!0)&&n()&&s.setRng(u)}else"string"==typeof t.start?s.setRng(d(t)):t.id?(o("start"),o("end"),p&&(u=l.createRng(),u.setStart(r(p),m),u.setEnd(r(f),h),s.setRng(u))):t.name?s.select(l.select(t.name)[t.index]):t.rng&&s.setRng(t.rng)}}var d=o.isContentEditableFalse,u=function(e,t){var n,o;for(o=s.trim(e.data.slice(0,t)).length,n=e.previousSibling;n&&3===n.nodeType;n=n.previousSibling)o+=s.trim(n.data).length;return o};return l.isBookmarkNode=function(e){return e&&"SPAN"===e.tagName&&"bookmark"===e.getAttribute("data-mce-type")},l}),l("tinymce.core.dom.ScrollIntoView",["tinymce.core.dom.NodeType"],function(e){var t=function(e){for(var t=0,n=0,o=e;o&&o.nodeType;)t+=o.offsetLeft||0,n+=o.offsetTop||0,o=o.offsetParent;return{x:t,y:n}},n=function(e,t,n){var o={elm:t,alignToTop:n};return e.fire("scrollIntoView",o),o.isDefaultPrevented()},o=function(o,r,i){var s,a,l,d,u=o.dom,c=u.getRoot(),p=0;if(!n(o,r,i)&&e.isElement(r)){if(i===!1&&(p=r.offsetHeight),"BODY"!==c.nodeName){var f=o.selection.getScrollContainer();if(f)return s=t(r).y-t(f).y+p,d=f.clientHeight,l=f.scrollTop,void((s<l||s+25>l+d)&&(f.scrollTop=s<l?s:s-d+25))}a=u.getViewPort(o.getWin()),s=u.getPos(r).y+p,l=a.y,d=a.h,(s<a.y||s+25>l+d)&&o.getWin().scrollTo(0,s<l?s:s-d+25)}};return{scrollIntoView:o}}),l("tinymce.core.dom.TridentSelection",[],function(){function e(e){function t(t,n){var o,r,i,s,a,l,d,u,c=0,p=-1;if(o=t.duplicate(),o.collapse(n),u=o.parentElement(),u.ownerDocument===e.dom.doc){for(;"false"===u.contentEditable;)u=u.parentNode;if(!u.hasChildNodes())return{node:u,inside:1};for(s=u.children,r=s.length-1;c<=r;)if(d=Math.floor((c+r)/2),a=s[d],o.moveToElementText(a),p=o.compareEndPoints(n?"StartToStart":"EndToEnd",t),p>0)r=d-1;else{if(!(p<0))return{node:a};c=d+1}if(p<0)for(a?o.collapse(!1):(o.moveToElementText(u),o.collapse(!0),a=u,i=!0),l=0;0!==o.compareEndPoints(n?"StartToStart":"StartToEnd",t)&&0!==o.move("character",1)&&u==o.parentElement();)l++;else for(o.collapse(!0),l=0;0!==o.compareEndPoints(n?"StartToStart":"StartToEnd",t)&&0!==o.move("character",-1)&&u==o.parentElement();)l++;return{node:a,position:p,offset:l,inside:i}}}function n(){function n(e){var n,o,r,i,s,a=t(u,e),l=0;if(n=a.node,o=a.offset,a.inside&&!n.hasChildNodes())return void c[e?"setStart":"setEnd"](n,0);if(o===i)return void c[e?"setStartBefore":"setEndAfter"](n);if(a.position<0){if(r=a.inside?n.firstChild:n.nextSibling,!r)return void c[e?"setStartAfter":"setEndAfter"](n);if(!o)return void(3==r.nodeType?c[e?"setStart":"setEnd"](r,0):c[e?"setStartBefore":"setEndBefore"](r));for(;r;){if(3==r.nodeType&&(s=r.nodeValue,l+=s.length,l>=o)){n=r,l-=o,l=s.length-l;break}r=r.nextSibling}}else{if(r=n.previousSibling,!r)return c[e?"setStartBefore":"setEndBefore"](n);if(!o)return void(3==n.nodeType?c[e?"setStart":"setEnd"](r,n.nodeValue.length):c[e?"setStartAfter":"setEndAfter"](r));for(;r;){if(3==r.nodeType&&(l+=r.nodeValue.length,l>=o)){n=r,l-=o;break}r=r.previousSibling}}c[e?"setStart":"setEnd"](n,l)}var i,s,a,l,d,u=e.getRng(),c=r.createRng();if(i=u.item?u.item(0):u.parentElement(),i.ownerDocument!=r.doc)return c;if(s=e.isCollapsed(),u.item)return c.setStart(i.parentNode,r.nodeIndex(i)),c.setEnd(c.startContainer,c.startOffset+1),c;try{n(!0),s||n()}catch(t){if(t.number!=-2147024809)throw t;d=o.getBookmark(2),a=u.duplicate(),a.collapse(!0),i=a.parentElement(),s||(a=u.duplicate(),a.collapse(!1),l=a.parentElement(),l.innerHTML=l.innerHTML),i.innerHTML=i.innerHTML,o.moveToBookmark(d),u=e.getRng(),n(!0),s||n()}return c}var o=this,r=e.dom,i=!1;this.getBookmark=function(n){function o(e){var t,n,o,i,s=[];for(t=e.parentNode,n=r.getRoot().parentNode;t!=n&&9!==t.nodeType;){for(o=t.children,i=o.length;i--;)if(e===o[i]){s.push(i);break}e=t,t=t.parentNode}return s}function i(e){var n;if(n=t(s,e))return{position:n.position,offset:n.offset,indexes:o(n.node),inside:n.inside}}var s=e.getRng(),a={};return 2===n&&(s.item?a.start={ctrl:!0,indexes:o(s.item(0))}:(a.start=i(!0),e.isCollapsed()||(a.end=i()))),a},this.moveToBookmark=function(e){function t(e){var t,n,o,i;for(t=r.getRoot(),n=e.length-1;n>=0;n--)i=t.children,o=e[n],o<=i.length-1&&(t=i[o]);return t}function n(n){var r,s,a,l,d=e[n?"start":"end"];d&&(r=d.position>0,s=i.createTextRange(),s.moveToElementText(t(d.indexes)),l=d.offset,l!==a?(s.collapse(d.inside||r),s.moveStart("character",r?-l:l)):s.collapse(n),o.setEndPoint(n?"StartToStart":"EndToStart",s),n&&o.collapse(!0))}var o,i=r.doc.body;e.start&&(e.start.ctrl?(o=i.createControlRange(),o.addElement(t(e.start.indexes)),o.select()):(o=i.createTextRange(),n(!0),n(),o.select()))},this.addRange=function(t){function n(e){var t,n,s,c,p;s=r.create("a"),t=e?a:d,n=e?l:u,c=o.duplicate(),t!=m&&t!=m.documentElement||(t=h,n=0),3==t.nodeType?(t.parentNode.insertBefore(s,t),c.moveToElementText(s),c.moveStart("character",n),r.remove(s),o.setEndPoint(e?"StartToStart":"EndToEnd",c)):(p=t.childNodes,p.length?(n>=p.length?r.insertAfter(s,p[p.length-1]):t.insertBefore(s,p[n]),c.moveToElementText(s)):t.canHaveHTML&&(t.innerHTML="<span>&#xFEFF;</span>",s=t.firstChild,c.moveToElementText(s),c.collapse(i)),o.setEndPoint(e?"StartToStart":"EndToEnd",c),r.remove(s))}var o,s,a,l,d,u,c,p,f,m=e.dom.doc,h=m.body;if(a=t.startContainer,l=t.startOffset,d=t.endContainer,u=t.endOffset,o=h.createTextRange(),a==d&&1==a.nodeType){if(l==u&&!a.hasChildNodes()){if(a.canHaveHTML)return c=a.previousSibling,c&&!c.hasChildNodes()&&r.isBlock(c)?c.innerHTML="&#xFEFF;":c=null,a.innerHTML="<span>&#xFEFF;</span><span>&#xFEFF;</span>",o.moveToElementText(a.lastChild),o.select(),r.doc.selection.clear(),a.innerHTML="",void(c&&(c.innerHTML=""));l=r.nodeIndex(a),a=a.parentNode}if(l==u-1)try{if(f=a.childNodes[l],s=h.createControlRange(),s.addElement(f),s.select(),p=e.getRng(),p.item&&f===p.item(0))return}catch(e){}}n(!0),n(),o.select()},this.getRangeAt=n}return e}),l("ephox.katamari.api.Type",["global!Array","global!String"],function(e,t){var n=function(n){if(null===n)return"null";var o=typeof n;return"object"===o&&e.prototype.isPrototypeOf(n)?"array":"object"===o&&t.prototype.isPrototypeOf(n)?"string":o},o=function(e){return function(t){return n(t)===e}};return{isString:o("string"),isObject:o("object"),isArray:o("array"),isNull:o("null"),isBoolean:o("boolean"),isUndefined:o("undefined"),isFunction:o("function"),isNumber:o("number")}}),l("ephox.katamari.data.Immutable",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","global!Array","global!Error"],function(e,t,n,o){return function(){var r=arguments;return function(){for(var i=new n(arguments.length),s=0;s<i.length;s++)i[s]=arguments[s];if(r.length!==i.length)throw new o('Wrong number of arguments to struct. Expected "['+r.length+']", got '+i.length+" arguments");var a={};return e.each(r,function(e,n){a[e]=t.constant(i[n])}),a}}}),l("ephox.katamari.api.Obj",["ephox.katamari.api.Option","global!Object"],function(e,t){var n=function(){var e=t.keys,n=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t};return void 0===e?n:e}(),o=function(e,t){for(var o=n(e),r=0,i=o.length;r<i;r++){var s=o[r],a=e[s];t(a,s,e)}},r=function(e,t){return i(e,function(e,n,o){return{k:n,v:t(e,n,o)}})},i=function(e,t){var n={};return o(e,function(o,r){var i=t(o,r,e);n[i.k]=i.v}),n},s=function(e,t){var n={},r={};return o(e,function(e,o){var i=t(e,o)?n:r;i[o]=e}),{t:n,f:r}},a=function(e,t){var n=[];return o(e,function(e,o){n.push(t(e,o))}),n},l=function(t,o){for(var r=n(t),i=0,s=r.length;i<s;i++){var a=r[i],l=t[a];if(o(l,a,t))return e.some(l)}return e.none()},d=function(e){return a(e,function(e){return e})},u=function(e){return d(e).length};return{bifilter:s,each:o,map:r,mapToArray:a,tupleMap:i,find:l,keys:n,values:d,size:u}}),l("ephox.katamari.util.BagUtils",["ephox.katamari.api.Arr","ephox.katamari.api.Type","global!Error"],function(e,t,n){var o=function(e){return e.slice(0).sort()},r=function(e,t){throw new n("All required keys ("+o(e).join(", ")+") were not specified. Specified keys were: "+o(t).join(", ")+".")},i=function(e){throw new n("Unsupported keys for object: "+o(e).join(", "))},s=function(o,r){if(!t.isArray(r))throw new n("The "+o+" fields must be an array. Was: "+r+".");e.each(r,function(e){if(!t.isString(e))throw new n("The value "+e+" in the "+o+" fields was not a string.")})},a=function(e,t){throw new n("All values need to be of type: "+t+". Keys ("+o(e).join(", ")+") were not.")},l=function(t){var r=o(t),i=e.find(r,function(e,t){return t<r.length-1&&e===r[t+1]});i.each(function(e){throw new n("The field: "+e+" occurs more than once in the combined fields: ["+r.join(", ")+"].")})};return{sort:o,reqMessage:r,unsuppMessage:i,validateStrArr:s,invalidTypeMessage:a,checkDupes:l}}),l("ephox.katamari.data.MixedBag",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Obj","ephox.katamari.api.Option","ephox.katamari.util.BagUtils","global!Error","global!Object"],function(e,t,n,o,r,i,s){return function(a,l){var d=a.concat(l);if(0===d.length)throw new i("You must specify at least one required or optional field.");return r.validateStrArr("required",a),r.validateStrArr("optional",l),r.checkDupes(d),function(i){var u=n.keys(i),c=e.forall(a,function(t){return e.contains(u,t)});c||r.reqMessage(a,u);var p=e.filter(u,function(t){return!e.contains(d,t)});p.length>0&&r.unsuppMessage(p);var f={};return e.each(a,function(e){f[e]=t.constant(i[e])}),e.each(l,function(e){f[e]=t.constant(s.prototype.hasOwnProperty.call(i,e)?o.some(i[e]):o.none())}),f}}}),l("ephox.katamari.api.Struct",["ephox.katamari.data.Immutable","ephox.katamari.data.MixedBag"],function(e,t){return{immutable:e,immutableBag:t}}),l("ephox.sugar.alien.Recurse",[],function(){var e=function(e,t){var n=[],o=function(e){return n.push(e),t(e)},r=t(e);do r=r.bind(o);while(r.isSome());return n};return{toArray:e}}),l("ephox.katamari.api.Global",[],function(){return"undefined"!=typeof window?window:Function("return this;")()}),l("ephox.katamari.api.Resolve",["ephox.katamari.api.Global"],function(e){var t=function(t,n){for(var o=void 0!==n?n:e,r=0;r<t.length&&void 0!==o&&null!==o;++r)o=o[t[r]];return o},n=function(e,n){var o=e.split(".");return t(o,n)},o=function(e,t){return void 0!==e[t]&&null!==e[t]||(e[t]={}),e[t]},r=function(t,n){for(var r=void 0!==n?n:e,i=0;i<t.length;++i)r=o(r,t[i]);return r},i=function(e,t){var n=e.split(".");return r(n,t)};return{path:t,resolve:n,forge:r,namespace:i}}),l("ephox.sand.util.Global",["ephox.katamari.api.Resolve"],function(e){var t=function(t,n){return e.resolve(t,n)},n=function(e,n){var o=t(e,n);if(void 0===o)throw e+" not available on this browser";return o};return{getOrDie:n}}),l("ephox.sand.api.Node",["ephox.sand.util.Global"],function(e){var t=function(){var t=e.getOrDie("Node");return t},n=function(e,t,n){return 0!==(e.compareDocumentPosition(t)&n)},o=function(e,o){return n(e,o,t().DOCUMENT_POSITION_PRECEDING)},r=function(e,o){return n(e,o,t().DOCUMENT_POSITION_CONTAINED_BY)};return{documentPositionPreceding:o,documentPositionContainedBy:r}}),l("ephox.katamari.api.Thunk",[],function(){var e=function(e){var t,n=!1;return function(){return n||(n=!0,t=e.apply(null,arguments)),t}};return{cached:e}}),d("global!Number",Number),l("ephox.sand.detect.Version",["ephox.katamari.api.Arr","global!Number","global!String"],function(e,t,n){var o=function(e,t){for(var n=0;n<e.length;n++){var o=e[n];if(o.test(t))return o}},r=function(e,n){var r=o(e,n);if(!r)return{major:0,minor:0};var i=function(e){return t(n.replace(r,"$"+e))};return a(i(1),i(2))},i=function(e,t){var o=n(t).toLowerCase();return 0===e.length?s():r(e,o)},s=function(){return a(0,0)},a=function(e,t){return{major:e,minor:t}};return{nu:a,detect:i,unknown:s}}),l("ephox.sand.core.Browser",["ephox.katamari.api.Fun","ephox.sand.detect.Version"],function(e,t){var n="Edge",o="Chrome",r="IE",i="Opera",s="Firefox",a="Safari",l=function(e,t){return function(){return t===e}},d=function(){return u({current:void 0,version:t.unknown()})},u=function(e){var t=e.current,d=e.version;return{current:t,version:d,isEdge:l(n,t),isChrome:l(o,t),isIE:l(r,t),isOpera:l(i,t),isFirefox:l(s,t),isSafari:l(a,t)}};return{unknown:d,nu:u,edge:e.constant(n),chrome:e.constant(o),ie:e.constant(r),opera:e.constant(i),firefox:e.constant(s),safari:e.constant(a)}}),l("ephox.sand.core.OperatingSystem",["ephox.katamari.api.Fun","ephox.sand.detect.Version"],function(e,t){var n="Windows",o="iOS",r="Android",i="Linux",s="OSX",a="Solaris",l="FreeBSD",d=function(e,t){return function(){return t===e}},u=function(){return c({current:void 0,version:t.unknown()})},c=function(e){var t=e.current,u=e.version;return{current:t,version:u,isWindows:d(n,t),isiOS:d(o,t),isAndroid:d(r,t),isOSX:d(s,t),isLinux:d(i,t),isSolaris:d(a,t),isFreeBSD:d(l,t)}};return{unknown:u,nu:c,windows:e.constant(n),ios:e.constant(o),android:e.constant(r),linux:e.constant(i),osx:e.constant(s),solaris:e.constant(a),freebsd:e.constant(l)}}),l("ephox.sand.detect.DeviceType",["ephox.katamari.api.Fun"],function(e){return function(t,n,o){var r=t.isiOS()&&/ipad/i.test(o)===!0,i=t.isiOS()&&!r,s=t.isAndroid()&&3===t.version.major,a=t.isAndroid()&&4===t.version.major,l=r||s||a&&/mobile/i.test(o)===!0,d=t.isiOS()||t.isAndroid(),u=d&&!l,c=n.isSafari()&&t.isiOS()&&/safari/i.test(o)===!1;return{isiPad:e.constant(r),isiPhone:e.constant(i),isTablet:e.constant(l),isPhone:e.constant(u),isTouch:e.constant(d),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:e.constant(c)}}}),l("ephox.sand.detect.UaString",["ephox.katamari.api.Arr","ephox.sand.detect.Version","global!String"],function(e,t,n){var o=function(t,o){var r=n(o).toLowerCase();return e.find(t,function(e){return e.search(r)})},r=function(e,n){return o(e,n).map(function(e){var o=t.detect(e.versionRegexes,n);return{current:e.name,version:o}})},i=function(e,n){return o(e,n).map(function(e){var o=t.detect(e.versionRegexes,n);return{current:e.name,version:o}})};return{detectBrowser:r,detectOs:i}}),l("ephox.katamari.str.StrAppend",[],function(){var e=function(e,t){return t+e},t=function(e,t){return e+t},n=function(e,t){return e.substring(t)},o=function(e,t){return e.substring(0,e.length-t)};return{addToStart:e,addToEnd:t,removeFromStart:n,removeFromEnd:o}}),l("ephox.katamari.str.StringParts",["ephox.katamari.api.Option","global!Error"],function(e,t){var n=function(e,t){return e.substr(0,t)},o=function(e,t){return e.substr(e.length-t,e.length)},r=function(t){return""===t?e.none():e.some(t.substr(0,1))},i=function(t){return""===t?e.none():e.some(t.substring(1))};return{first:n,last:o,head:r,tail:i}}),l("ephox.katamari.api.Strings",["ephox.katamari.str.StrAppend","ephox.katamari.str.StringParts","global!Error"],function(e,t,n){var o=function(e,t,n){if(""===t)return!0;if(e.length<t.length)return!1;var o=e.substr(n,n+t.length);return o===t},r=function(e,t){var n=function(e){var t=typeof e;return"string"===t||"number"===t};return e.replace(/\${([^{}]*)}/g,function(e,o){var r=t[o];return n(r)?r:e})},i=function(t,n){return c(t,n)?e.removeFromStart(t,n.length):t},s=function(t,n){return p(t,n)?e.removeFromEnd(t,n.length):t},a=function(t,n){return c(t,n)?t:e.addToStart(t,n)},l=function(t,n){return p(t,n)?t:e.addToEnd(t,n)},d=function(e,t){return e.indexOf(t)!==-1},u=function(e){return t.head(e).bind(function(n){return t.tail(e).map(function(e){return n.toUpperCase()+e})}).getOr(e)},c=function(e,t){return o(e,t,0)},p=function(e,t){return o(e,t,e.length-t.length)},f=function(e){return e.replace(/^\s+|\s+$/g,"")},m=function(e){return e.replace(/^\s+/g,"")},h=function(e){return e.replace(/\s+$/g,"")};return{supplant:r,startsWith:c,removeLeading:i,removeTrailing:s,ensureLeading:a,ensureTrailing:l,endsWith:p,contains:d,trim:f,lTrim:m,rTrim:h,capitalize:u}}),l("ephox.sand.info.PlatformInfo",["ephox.katamari.api.Fun","ephox.katamari.api.Strings"],function(e,t){var n=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,o=function(e){return function(n){return t.contains(n,e)}},r=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){var n=t.contains(e,"edge/")&&t.contains(e,"chrome")&&t.contains(e,"safari")&&t.contains(e,"applewebkit");return n}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,n],search:function(e){return t.contains(e,"chrome")&&!t.contains(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return t.contains(e,"msie")||t.contains(e,"trident")}},{name:"Opera",versionRegexes:[n,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:o("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:o("firefox")},{name:"Safari",versionRegexes:[n,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(t.contains(e,"safari")||t.contains(e,"mobile/"))&&t.contains(e,"applewebkit")}}],i=[{name:"Windows",search:o("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return t.contains(e,"iphone")||t.contains(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:o("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:o("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:o("linux"),versionRegexes:[]},{name:"Solaris",search:o("sunos"),versionRegexes:[]},{name:"FreeBSD",search:o("freebsd"),versionRegexes:[]}];return{browsers:e.constant(r),oses:e.constant(i)}}),l("ephox.sand.core.PlatformDetection",["ephox.sand.core.Browser","ephox.sand.core.OperatingSystem","ephox.sand.detect.DeviceType","ephox.sand.detect.UaString","ephox.sand.info.PlatformInfo"],function(e,t,n,o,r){var i=function(i){var s=r.browsers(),a=r.oses(),l=o.detectBrowser(s,i).fold(e.unknown,e.nu),d=o.detectOs(a,i).fold(t.unknown,t.nu),u=n(d,l,i);return{browser:l,os:d,deviceType:u}};return{detect:i}}),d("global!navigator",navigator),l("ephox.sand.api.PlatformDetection",["ephox.katamari.api.Thunk","ephox.sand.core.PlatformDetection","global!navigator"],function(e,t,n){var o=e.cached(function(){var e=n.userAgent;return t.detect(e)});return{detect:o}}),l("global!console",[],function(){return"undefined"==typeof console&&(console={log:function(){}}),console}),d("global!document",document),l("ephox.sugar.api.node.Element",["ephox.katamari.api.Fun","global!Error","global!console","global!document"],function(e,t,n,o){var r=function(e,t){var r=t||o,i=r.createElement("div");if(i.innerHTML=e,!i.hasChildNodes()||i.childNodes.length>1)throw n.error("HTML does not have a single root node",e),"HTML must have a single root node";return a(i.childNodes[0])},i=function(e,t){var n=t||o,r=n.createElement(e);return a(r)},s=function(e,t){var n=t||o,r=n.createTextNode(e);return a(r)},a=function(n){if(null===n||void 0===n)throw new t("Node cannot be null or undefined");return{dom:e.constant(n)}};return{fromHtml:r,fromTag:i,fromText:s,fromDom:a}}),l("ephox.sugar.api.node.NodeTypes",[],function(){return{ATTRIBUTE:2,CDATA_SECTION:4,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,ELEMENT:1,TEXT:3,PROCESSING_INSTRUCTION:7,ENTITY_REFERENCE:5,ENTITY:6,NOTATION:12}}),l("ephox.sugar.api.search.Selectors",["ephox.katamari.api.Arr","ephox.katamari.api.Option","ephox.sugar.api.node.Element","ephox.sugar.api.node.NodeTypes","global!Error","global!document"],function(e,t,n,o,r,i){var s=0,a=1,l=2,d=3,u=function(){var e=i.createElement("span");return void 0!==e.matches?s:void 0!==e.msMatchesSelector?a:void 0!==e.webkitMatchesSelector?l:void 0!==e.mozMatchesSelector?d:-1}(),c=o.ELEMENT,p=o.DOCUMENT,f=function(e,t){var n=e.dom();if(n.nodeType!==c)return!1;if(u===s)return n.matches(t);if(u===a)return n.msMatchesSelector(t);if(u===l)return n.webkitMatchesSelector(t);if(u===d)return n.mozMatchesSelector(t);throw new r("Browser lacks native selectors")},m=function(e){return e.nodeType!==c&&e.nodeType!==p||0===e.childElementCount},h=function(t,o){var r=void 0===o?i:o.dom();return m(r)?[]:e.map(r.querySelectorAll(t),n.fromDom)},g=function(e,o){var r=void 0===o?i:o.dom();return m(r)?t.none():t.from(r.querySelector(e)).map(n.fromDom)};return{all:h,is:f,one:g}}),l("ephox.sugar.api.dom.Compare",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.sand.api.Node","ephox.sand.api.PlatformDetection","ephox.sugar.api.search.Selectors"],function(e,t,n,o,r){var i=function(e,t){return e.dom()===t.dom()},s=function(e,t){return e.dom().isEqualNode(t.dom())},a=function(n,o){return e.exists(o,t.curry(i,n))},l=function(e,t){var n=e.dom(),o=t.dom();return n!==o&&n.contains(o)},d=function(e,t){return n.documentPositionContainedBy(e.dom(),t.dom())},u=o.detect().browser,c=u.isIE()?d:l;return{eq:i,isEqualNode:s,member:a,contains:c,is:r.is}}),l("ephox.sugar.api.search.Traverse",["ephox.katamari.api.Type","ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.katamari.api.Struct","ephox.sugar.alien.Recurse","ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element"],function(e,t,n,o,r,i,s,a){var l=function(e){return a.fromDom(e.dom().ownerDocument)},d=function(e){var t=l(e);return a.fromDom(t.dom().documentElement)},u=function(e){var t=e.dom(),n=t.ownerDocument.defaultView;return a.fromDom(n)},c=function(e){var t=e.dom();return o.from(t.parentNode).map(a.fromDom)},p=function(e){return c(e).bind(function(n){var o=_(n);return t.findIndex(o,function(t){return s.eq(e,t)})})},f=function(t,o){for(var r=e.isFunction(o)?o:n.constant(!1),i=t.dom(),s=[];null!==i.parentNode&&void 0!==i.parentNode;){var l=i.parentNode,d=a.fromDom(l);if(s.push(d),r(d)===!0)break;i=l}return s},m=function(e){var n=function(n){return t.filter(n,function(t){return!s.eq(e,t)})};return c(e).map(_).map(n).getOr([])},h=function(e){var t=e.dom();return o.from(t.offsetParent).map(a.fromDom)},g=function(e){var t=e.dom();return o.from(t.previousSibling).map(a.fromDom)},y=function(e){var t=e.dom();return o.from(t.nextSibling).map(a.fromDom)},v=function(e){return t.reverse(i.toArray(e,g))},b=function(e){return i.toArray(e,y)},_=function(e){var n=e.dom();return t.map(n.childNodes,a.fromDom)},x=function(e,t){var n=e.dom().childNodes;return o.from(n[t]).map(a.fromDom)},C=function(e){return x(e,0)},E=function(e){return x(e,e.dom().childNodes.length-1)},w=r.immutable("element","offset"),j=function(e,t){var n=_(e);return n.length>0&&t<n.length?w(n[t],0):w(e,t)};return{owner:l,defaultView:u,documentElement:d,parent:c,findIndex:p,parents:f,siblings:m,prevSibling:g,offsetParent:h,prevSiblings:v,nextSibling:y,nextSiblings:b,children:_,child:x,firstChild:C,lastChild:E,leaf:j}}),l("ephox.sugar.api.dom.Insert",["ephox.sugar.api.search.Traverse"],function(e){var t=function(t,n){var o=e.parent(t);o.each(function(e){e.dom().insertBefore(n.dom(),t.dom())})},n=function(n,o){var i=e.nextSibling(n);i.fold(function(){var t=e.parent(n);t.each(function(e){r(e,o)})},function(e){t(e,o)})},o=function(t,n){var o=e.firstChild(t);o.fold(function(){r(t,n)},function(e){t.dom().insertBefore(n.dom(),e.dom())})},r=function(e,t){e.dom().appendChild(t.dom())},i=function(n,o,i){e.child(n,i).fold(function(){r(n,o)},function(e){t(e,o)})},s=function(e,n){t(e,n),r(n,e)};return{before:t,after:n,prepend:o,append:r,appendAt:i,wrap:s}}),l("ephox.sugar.api.node.Node",["ephox.sugar.api.node.NodeTypes"],function(e){var t=function(e){var t=e.dom().nodeName;return t.toLowerCase()},n=function(e){return e.dom().nodeType},o=function(e){return e.dom().nodeValue},r=function(e){return function(t){return n(t)===e}},i=function(o){return n(o)===e.COMMENT||"#comment"===t(o)},s=r(e.ELEMENT),a=r(e.TEXT),l=r(e.DOCUMENT);return{name:t,type:n,value:o,isElement:s,isText:a,isDocument:l,isComment:i}}),l("ephox.sugar.api.properties.Attr",["ephox.katamari.api.Type","ephox.katamari.api.Arr","ephox.katamari.api.Obj","ephox.sugar.api.node.Node","global!Error","global!console"],function(e,t,n,o,r,i){var s=function(t,n,o){if(!(e.isString(o)||e.isBoolean(o)||e.isNumber(o)))throw i.error("Invalid call to Attr.set. Key ",n,":: Value ",o,":: Element ",t),new r("Attribute value was not simple");t.setAttribute(n,o+"")},a=function(e,t,n){s(e.dom(),t,n)},l=function(e,t){var o=e.dom();n.each(t,function(e,t){s(o,t,e)})},d=function(e,t){var n=e.dom().getAttribute(t);return null===n?void 0:n},u=function(e,t){var n=e.dom();return!(!n||!n.hasAttribute)&&n.hasAttribute(t)},c=function(e,t){e.dom().removeAttribute(t)},p=function(e){var t=e.dom().attributes;return void 0===t||null===t||0===t.length},f=function(e){return t.foldl(e.dom().attributes,function(e,t){return e[t.name]=t.value,e},{})},m=function(e,t,n){u(e,n)&&!u(t,n)&&a(t,n,d(e,n))},h=function(e,n,r){o.isElement(e)&&o.isElement(n)&&t.each(r,function(t){m(e,n,t)})};return{clone:f,set:a,setAll:l,get:d,has:u,remove:c,hasNone:p,transfer:h}}),l("ephox.sugar.api.dom.InsertAll",["ephox.katamari.api.Arr","ephox.sugar.api.dom.Insert"],function(e,t){var n=function(n,o){e.each(o,function(e){t.before(n,e)})},o=function(n,o){e.each(o,function(e,r){var i=0===r?n:o[r-1];t.after(i,e)})},r=function(n,o){e.each(o.slice().reverse(),function(e){t.prepend(n,e)})},i=function(n,o){e.each(o,function(e){t.append(n,e)})};return{before:n,after:o,prepend:r,append:i}}),l("ephox.sugar.api.dom.Remove",["ephox.katamari.api.Arr","ephox.sugar.api.dom.InsertAll","ephox.sugar.api.search.Traverse"],function(e,t,n){var o=function(t){t.dom().textContent="",e.each(n.children(t),function(e){r(e)})},r=function(e){var t=e.dom();null!==t.parentNode&&t.parentNode.removeChild(t)},i=function(e){var o=n.children(e);o.length>0&&t.before(e,o),r(e)};return{empty:o,remove:r,unwrap:i}}),l("ephox.sugar.api.dom.Replication",["ephox.sugar.api.properties.Attr","ephox.sugar.api.node.Element","ephox.sugar.api.dom.Insert","ephox.sugar.api.dom.InsertAll","ephox.sugar.api.dom.Remove","ephox.sugar.api.search.Traverse"],function(e,t,n,o,r,i){var s=function(e,n){return t.fromDom(e.dom().cloneNode(n))},a=function(e){return s(e,!1)},l=function(e){return s(e,!0)},d=function(n,o){var r=t.fromTag(o),i=e.clone(n);return e.setAll(r,i),r},u=function(e,t){var n=d(e,t),r=i.children(l(e));return o.append(n,r),n},c=function(e,t){var s=d(e,t);n.before(e,s);var a=i.children(e);return o.append(s,a),r.remove(e),s};return{shallow:a,shallowAs:d,deep:l,copy:u,mutate:c}}),l("ephox.sugar.api.node.Fragment",["ephox.katamari.api.Arr","ephox.sugar.api.node.Element","global!document"],function(e,t,n){var o=function(o,r){var i=r||n,s=i.createDocumentFragment();return e.each(o,function(e){s.appendChild(e.dom())}),t.fromDom(s)};return{fromElements:o}}),l("tinymce.core.dom.ElementType",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.sugar.api.node.Node"],function(e,t,n){var o=["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"],r=["area","base","basefont","br","col","frame","hr","img","input","isindex","link","meta","param","embed","source","wbr","track"],i=["td","th"],s=["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"],a=["h1","h2","h3","h4","h5","h6"],l=function(o){var r;return function(i){return r=r?r:e.mapToObject(o,t.constant(!0)),r.hasOwnProperty(n.name(i))}},d=l(a),u=l(o),c=function(e){return n.isElement(e)&&!u(e)};return{isBlock:u,isInline:c,isHeading:d,isTextBlock:l(s),isVoid:l(r),isTableCell:l(i)}}),l("tinymce.core.dom.Parents",["ephox.katamari.api.Fun","ephox.sugar.api.dom.Compare","ephox.sugar.api.search.Traverse"],function(e,t,n){var o=function(e){return e.slice(0,-1)},r=function(e,r,i){return t.contains(r,e)?o(n.parents(e,function(e){return i(e)||t.eq(e,r)})):[]},i=function(t,n){return r(t,n,e.constant(!1))},s=function(e,t){return[e].concat(i(e,t))};return{parentsUntil:r,parents:i,parentsAndSelf:s}}),l("ephox.katamari.api.Options",["ephox.katamari.api.Option"],function(e){var t=function(e){for(var t=[],n=function(e){t.push(e)},o=0;o<e.length;o++)e[o].each(n);return t},n=function(t,n){for(var o=0;o<t.length;o++){var r=n(t[o],o);if(r.isSome())return r}return e.none()},o=function(t,n){for(var o=[],r=0;r<t.length;r++){var i=t[r];if(!i.isSome())return e.none();o.push(i.getOrDie())}return e.some(n.apply(null,o))};return{cat:t,findMap:n,liftN:o}}),l("tinymce.core.selection.SelectionUtils",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.katamari.api.Options","ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","ephox.sugar.api.search.Traverse","tinymce.core.dom.NodeType"],function(e,t,n,o,r,i,s,a,l){var d=function(e){var t=e.startContainer,o=e.startOffset;return l.isText(t)?0===o?n.some(i.fromDom(t)):n.none():n.from(t.childNodes[o]).map(i.fromDom)},u=function(e){var t=e.endContainer,o=e.endOffset;return l.isText(t)?o===t.data.length?n.some(i.fromDom(t)):n.none():n.from(t.childNodes[o-1]).map(i.fromDom);
},c=function(e){return a.firstChild(e).fold(t.constant([e]),function(t){return[e].concat(c(t))})},p=function(e){return a.lastChild(e).fold(t.constant([e]),function(t){return"br"===s.name(t)?a.prevSibling(t).map(function(t){return[e].concat(p(t))}).getOr([]):[e].concat(p(t))})},f=function(n,i){return o.liftN([d(i),u(i)],function(o,i){var s=e.find(c(n),t.curry(r.eq,o)),a=e.find(p(n),t.curry(r.eq,i));return s.isSome()&&a.isSome()}).getOr(!1)};return{hasAllContentsSelected:f}}),l("tinymce.core.selection.FragmentReader",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.sugar.api.dom.Insert","ephox.sugar.api.dom.Replication","ephox.sugar.api.node.Element","ephox.sugar.api.node.Fragment","ephox.sugar.api.node.Node","tinymce.core.dom.ElementType","tinymce.core.dom.Parents","tinymce.core.selection.SelectionUtils"],function(e,t,n,o,r,i,s,a,l,d){var u=function(t){return e.find(t,function(e){return"ul"===s.name(e)||"ol"===s.name(e)})},c=function(n,o){return e.find(n,function(e){return"li"===s.name(e)&&d.hasAllContentsSelected(e,o)}).fold(t.constant([]),function(e){return u(n).map(function(e){return[r.fromTag("li"),r.fromTag(s.name(e))]}).getOr([])})},p=function(t,o){var r=e.foldl(o,function(e,t){return n.append(t,e),t},t);return o.length>0?i.fromElements([r]):r},f=function(t,n){var i=l.parentsAndSelf(r.fromDom(n.commonAncestorContainer),r.fromDom(t)),s=e.filter(i,function(e){return a.isInline(e)||a.isHeading(e)}),d=c(i,n);return e.map(s.concat(d),o.shallow)},m=function(e,t){return p(r.fromDom(t.cloneContents()),f(e,t))},h=function(e,t){return t.collapsed?i.fromElements([]):m(e,t)};return{read:h}}),l("tinymce.core.dom.Selection",["tinymce.core.caret.CaretPosition","tinymce.core.dom.BookmarkManager","tinymce.core.dom.ControlSelection","tinymce.core.dom.NodeType","tinymce.core.dom.RangeUtils","tinymce.core.dom.ScrollIntoView","tinymce.core.dom.TreeWalker","tinymce.core.dom.TridentSelection","tinymce.core.Env","tinymce.core.selection.FragmentReader","tinymce.core.text.Zwsp","tinymce.core.util.Tools"],function(e,t,n,o,r,i,s,a,l,d,u,c){function p(e,o,r,i){var s=this;s.dom=e,s.win=o,s.serializer=r,s.editor=i,s.bookmarkManager=new t(s),s.controlSelection=new n(s,i),s.win.getSelection||(s.tridentSel=new a(s))}var f=c.each,m=c.trim,h=l.ie,g=function(e){if(e){if(e.select)return!0;var t=e.startContainer,n=e.endContainer;return!!(t&&t.parentNode&&n&&n.parentNode)}return!1};return p.prototype={setCursorLocation:function(e,t){var n=this,o=n.dom.createRng();e?(o.setStart(e,t),o.setEnd(e,t),n.setRng(o),n.collapse(!1)):(n._moveEndPoint(o,n.editor.getBody(),!0),n.setRng(o))},getContent:function(e){var t,n,o,r=this,i=r.getRng(),s=r.dom.create("body"),a=r.getSel();return e=e||{},t=n="",e.get=!0,e.format=e.format||"html",e.selection=!0,r.editor.fire("BeforeGetContent",e),"text"===e.format?r.isCollapsed()?"":u.trim(i.text||(a.toString?a.toString():"")):(i.cloneContents?(o=e.contextual?d.read(r.editor.getBody(),i).dom():i.cloneContents(),o&&s.appendChild(o)):void 0!==i.item||void 0!==i.htmlText?(s.innerHTML="<br>"+(i.item?i.item(0).outerHTML:i.htmlText),s.removeChild(s.firstChild)):s.innerHTML=i.toString(),/^\s/.test(s.innerHTML)&&(t=" "),/\s+$/.test(s.innerHTML)&&(n=" "),e.getInner=!0,e.content=r.isCollapsed()?"":t+r.serializer.serialize(s,e)+n,r.editor.fire("GetContent",e),e.content)},setContent:function(e,t){var n,o,r,i=this,s=i.getRng(),a=i.win.document;if(t=t||{format:"html"},t.set=!0,t.selection=!0,t.content=e,t.no_events||i.editor.fire("BeforeSetContent",t),e=t.content,s.insertNode){e+='<span id="__caret">_</span>',s.startContainer==a&&s.endContainer==a?a.body.innerHTML=e:(s.deleteContents(),0===a.body.childNodes.length?a.body.innerHTML=e:s.createContextualFragment?s.insertNode(s.createContextualFragment(e)):(o=a.createDocumentFragment(),r=a.createElement("div"),o.appendChild(r),r.outerHTML=e,s.insertNode(o))),n=i.dom.get("__caret"),s=a.createRange(),s.setStartBefore(n),s.setEndBefore(n),i.setRng(s),i.dom.remove("__caret");try{i.setRng(s)}catch(e){}}else s.item&&(a.execCommand("Delete",!1,null),s=i.getRng()),/^\s+/.test(e)?(s.pasteHTML('<span id="__mce_tmp">_</span>'+e),i.dom.remove("__mce_tmp")):s.pasteHTML(e);t.no_events||i.editor.fire("SetContent",t)},getStart:function(e){var t,n,o,r,i=this,s=i.getRng();if(s.duplicate||s.item){if(s.item)return s.item(0);for(o=s.duplicate(),o.collapse(1),t=o.parentElement(),t.ownerDocument!==i.dom.doc&&(t=i.dom.getRoot()),n=r=s.parentElement();r=r.parentNode;)if(r==t){t=n;break}return t}return t=s.startContainer,1==t.nodeType&&t.hasChildNodes()&&(e&&s.collapsed||(t=t.childNodes[Math.min(t.childNodes.length-1,s.startOffset)])),t&&3==t.nodeType?t.parentNode:t},getEnd:function(e){var t,n,o=this,r=o.getRng();return r.duplicate||r.item?r.item?r.item(0):(r=r.duplicate(),r.collapse(0),t=r.parentElement(),t.ownerDocument!==o.dom.doc&&(t=o.dom.getRoot()),t&&"BODY"==t.nodeName?t.lastChild||t:t):(t=r.endContainer,n=r.endOffset,1==t.nodeType&&t.hasChildNodes()&&(e&&r.collapsed||(t=t.childNodes[n>0?n-1:n])),t&&3==t.nodeType?t.parentNode:t)},getBookmark:function(e,t){return this.bookmarkManager.getBookmark(e,t)},moveToBookmark:function(e){return this.bookmarkManager.moveToBookmark(e)},select:function(e,t){var n,o=this,r=o.dom,i=r.createRng();if(o.lastFocusBookmark=null,e){if(!t&&o.controlSelection.controlSelect(e))return;n=r.nodeIndex(e),i.setStart(e.parentNode,n),i.setEnd(e.parentNode,n+1),t&&(o._moveEndPoint(i,e,!0),o._moveEndPoint(i,e)),o.setRng(i)}return e},isCollapsed:function(){var e=this,t=e.getRng(),n=e.getSel();return!(!t||t.item)&&(t.compareEndPoints?0===t.compareEndPoints("StartToEnd",t):!n||t.collapsed)},collapse:function(e){var t,n=this,o=n.getRng();o.item&&(t=o.item(0),o=n.win.document.body.createTextRange(),o.moveToElementText(t)),o.collapse(!!e),n.setRng(o)},getSel:function(){var e=this.win;return e.getSelection?e.getSelection():e.document.selection},getRng:function(e){function t(e,t,n){try{return t.compareBoundaryPoints(e,n)}catch(e){return-1}}var n,o,r,i,s,a,l=this;if(!l.win)return null;if(i=l.win.document,"undefined"==typeof i||null===i)return null;if(!e&&l.lastFocusBookmark){var d=l.lastFocusBookmark;return d.startContainer?(o=i.createRange(),o.setStart(d.startContainer,d.startOffset),o.setEnd(d.endContainer,d.endOffset)):o=d,o}if(e&&l.tridentSel)return l.tridentSel.getRangeAt(0);try{(n=l.getSel())&&(o=n.rangeCount>0?n.getRangeAt(0):n.createRange?n.createRange():i.createRange())}catch(e){}if(a=l.editor.fire("GetSelectionRange",{range:o}),a.range!==o)return a.range;if(h&&o&&o.setStart&&i.selection){try{s=i.selection.createRange()}catch(e){}s&&s.item&&(r=s.item(0),o=i.createRange(),o.setStartBefore(r),o.setEndAfter(r))}return o||(o=i.createRange?i.createRange():i.body.createTextRange()),o.setStart&&9===o.startContainer.nodeType&&o.collapsed&&(r=l.dom.getRoot(),o.setStart(r,0),o.setEnd(r,0)),l.selectedRange&&l.explicitRange&&(0===t(o.START_TO_START,o,l.selectedRange)&&0===t(o.END_TO_END,o,l.selectedRange)?o=l.explicitRange:(l.selectedRange=null,l.explicitRange=null)),o},setRng:function(e,t){var n,o,r,i=this;if(g(e))if(e.select){i.explicitRange=null;try{e.select()}catch(e){}}else if(i.tridentSel){if(e.cloneRange)try{i.tridentSel.addRange(e)}catch(e){}}else{if(n=i.getSel(),r=i.editor.fire("SetSelectionRange",{range:e,forward:t}),e=r.range,n){i.explicitRange=e;try{n.removeAllRanges(),n.addRange(e)}catch(e){}t===!1&&n.extend&&(n.collapse(e.endContainer,e.endOffset),n.extend(e.startContainer,e.startOffset)),i.selectedRange=n.rangeCount>0?n.getRangeAt(0):null}e.collapsed||e.startContainer!==e.endContainer||!n.setBaseAndExtent||l.ie||e.endOffset-e.startOffset<2&&e.startContainer.hasChildNodes()&&(o=e.startContainer.childNodes[e.startOffset],o&&"IMG"===o.tagName&&(n.setBaseAndExtent(e.startContainer,e.startOffset,e.endContainer,e.endOffset),n.anchorNode===e.startContainer&&n.focusNode===e.endContainer||n.setBaseAndExtent(o,0,o,1))),i.editor.fire("AfterSetSelectionRange",{range:e,forward:t})}},setNode:function(e){var t=this;return t.setContent(t.dom.getOuterHTML(e)),e},getNode:function(){function e(e,t){for(var n=e;e&&3===e.nodeType&&0===e.length;)e=t?e.nextSibling:e.previousSibling;return e||n}var t,n,o,r,i,s=this,a=s.getRng(),l=s.dom.getRoot();return a?(n=a.startContainer,o=a.endContainer,r=a.startOffset,i=a.endOffset,a.setStart?(t=a.commonAncestorContainer,!a.collapsed&&(n==o&&i-r<2&&n.hasChildNodes()&&(t=n.childNodes[r]),3===n.nodeType&&3===o.nodeType&&(n=n.length===r?e(n.nextSibling,!0):n.parentNode,o=0===i?e(o.previousSibling,!1):o.parentNode,n&&n===o))?n:t&&3==t.nodeType?t.parentNode:t):(t=a.item?a.item(0):a.parentElement(),t.ownerDocument!==s.win.document&&(t=l),t)):l},getSelectedBlocks:function(e,t){var n,o,r=this,i=r.dom,a=[];if(o=i.getRoot(),e=i.getParent(e||r.getStart(),i.isBlock),t=i.getParent(t||r.getEnd(),i.isBlock),e&&e!=o&&a.push(e),e&&t&&e!=t){n=e;for(var l=new s(e,o);(n=l.next())&&n!=t;)i.isBlock(n)&&a.push(n)}return t&&e!=t&&t!=o&&a.push(t),a},isForward:function(){var e,t,n=this.dom,o=this.getSel();return!(o&&o.anchorNode&&o.focusNode)||(e=n.createRng(),e.setStart(o.anchorNode,o.anchorOffset),e.collapse(!0),t=n.createRng(),t.setStart(o.focusNode,o.focusOffset),t.collapse(!0),e.compareBoundaryPoints(e.START_TO_START,t)<=0)},normalize:function(){var e=this,t=e.getRng();return l.range&&new r(e.dom).normalize(t)&&e.setRng(t,e.isForward()),t},selectorChanged:function(e,t){var n,o=this;return o.selectorChangedData||(o.selectorChangedData={},n={},o.editor.on("NodeChange",function(e){var t=e.element,r=o.dom,i=r.getParents(t,null,r.getRoot()),s={};f(o.selectorChangedData,function(e,t){f(i,function(o){if(r.is(o,t))return n[t]||(f(e,function(e){e(!0,{node:o,selector:t,parents:i})}),n[t]=e),s[t]=e,!1})}),f(n,function(e,o){s[o]||(delete n[o],f(e,function(e){e(!1,{node:t,selector:o,parents:i})}))})})),o.selectorChangedData[e]||(o.selectorChangedData[e]=[]),o.selectorChangedData[e].push(t),o},getScrollContainer:function(){for(var e,t=this.dom.getRoot();t&&"BODY"!=t.nodeName;){if(t.scrollHeight>t.clientHeight){e=t;break}t=t.parentNode}return e},scrollIntoView:function(e,t){i.scrollIntoView(this.editor,e,t)},placeCaretAt:function(e,t){this.setRng(r.getCaretRangeFromPoint(e,t,this.editor.getDoc()))},_moveEndPoint:function(e,t,n){var o=t,r=new s(t,o),i=this.dom.schema.getNonEmptyElements();do{if(3==t.nodeType&&0!==m(t.nodeValue).length)return void(n?e.setStart(t,0):e.setEnd(t,t.nodeValue.length));if(i[t.nodeName]&&!/^(TD|TH)$/.test(t.nodeName))return void(n?e.setStartBefore(t):"BR"==t.nodeName?e.setEndBefore(t):e.setEndAfter(t));if(l.ie&&l.ie<11&&this.dom.isBlock(t)&&this.dom.isEmpty(t))return void(n?e.setStart(t,0):e.setEnd(t,0))}while(t=n?r.next():r.prev());"BODY"==o.nodeName&&(n?e.setStart(o,0):e.setEnd(o,o.childNodes.length))},getBoundingClientRect:function(){var t=this.getRng();return t.collapsed?e.fromRangeStart(t).getClientRects()[0]:t.getBoundingClientRect()},destroy:function(){this.win=null,this.controlSelection.destroy()}},p}),l("tinymce.core.dom.ElementUtils",["tinymce.core.dom.BookmarkManager","tinymce.core.util.Tools"],function(e,t){function n(t){this.compare=function(n,r){function i(e){var n={};return o(t.getAttribs(e),function(o){var r=o.nodeName.toLowerCase();0!==r.indexOf("_")&&"style"!==r&&0!==r.indexOf("data-")&&(n[r]=t.getAttrib(e,r))}),n}function s(e,t){var n,o;for(o in e)if(e.hasOwnProperty(o)){if(n=t[o],"undefined"==typeof n)return!1;if(e[o]!=n)return!1;delete t[o]}for(o in t)if(t.hasOwnProperty(o))return!1;return!0}return n.nodeName==r.nodeName&&(!!s(i(n),i(r))&&(!!s(t.parseStyle(t.getAttrib(n,"style")),t.parseStyle(t.getAttrib(r,"style")))&&(!e.isBookmarkNode(n)&&!e.isBookmarkNode(r))))}}var o=t.each;return n}),l("tinymce.core.fmt.Preview",["tinymce.core.dom.DOMUtils","tinymce.core.util.Tools","tinymce.core.html.Schema"],function(e,t,n){function o(e,o){function r(e,t){t.classes.length&&d.addClass(e,t.classes.join(" ")),d.setAttribs(e,t.attrs)}function i(e){var t;return u="string"==typeof e?{name:e,classes:[],attrs:{}}:e,t=d.create(u.name),r(t,u),t}function s(e,n){var o="string"!=typeof e?e.nodeName.toLowerCase():e,r=p.getElementRule(o),i=r&&r.parentsRequired;return!(!i||!i.length)&&(n&&t.inArray(i,n)!==-1?n:i[0])}function a(e,n,o){var r,l,u,c=n.length>0&&n[0],p=c&&c.name;if(u=s(e,p))p==u?(l=n[0],n=n.slice(1)):l=u;else if(c)l=n[0],n=n.slice(1);else if(!o)return e;return l&&(r=i(l),r.appendChild(e)),o&&(r||(r=d.create("div"),r.appendChild(e)),t.each(o,function(t){var n=i(t);r.insertBefore(n,e)})),a(r,n,l&&l.siblings)}var l,u,c,p=o&&o.schema||new n({});return e&&e.length?(u=e[0],l=i(u),c=d.create("div"),c.appendChild(a(l,e.slice(1),u.siblings)),c):""}function r(e,t){return o(s(e),t)}function i(e){var n,o={classes:[],attrs:{}};return e=o.selector=t.trim(e),"*"!==e&&(n=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,function(e,n,r,i,s){switch(n){case"#":o.attrs.id=r;break;case".":o.classes.push(r);break;case":":t.inArray("checked disabled enabled read-only required".split(" "),r)!==-1&&(o.attrs[r]=r)}if("["==i){var a=s.match(/([\w\-]+)(?:\=\"([^\"]+))?/);a&&(o.attrs[a[1]]=a[2])}return""})),o.name=n||"div",o}function s(e){return e&&"string"==typeof e?(e=e.split(/\s*,\s*/)[0],e=e.replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),t.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),function(e){var n=t.map(e.split(/(?:~\+|~|\+)/),i),o=n.pop();return n.length&&(o.siblings=n),o}).reverse()):[]}function a(e,t){function n(e){return e.replace(/%(\w+)/g,"")}var r,i,a,u,c,p,f="";if(p=e.settings.preview_styles,p===!1)return"";if("string"!=typeof p&&(p="font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"),"string"==typeof t){if(t=e.formatter.get(t),!t)return;t=t[0]}return"preview"in t&&(p=t.preview,p===!1)?"":(r=t.block||t.inline||"span",u=s(t.selector),u.length?(u[0].name||(u[0].name=r),r=t.selector,i=o(u,e)):i=o([r],e),a=d.select(r,i)[0]||i.firstChild,l(t.styles,function(e,t){e=n(e),e&&d.setStyle(a,t,e)}),l(t.attributes,function(e,t){e=n(e),e&&d.setAttrib(a,t,e)}),l(t.classes,function(e){e=n(e),d.hasClass(a,e)||d.addClass(a,e)}),e.fire("PreviewFormats"),d.setStyles(i,{position:"absolute",left:-65535}),e.getBody().appendChild(i),c=d.getStyle(e.getBody(),"fontSize",!0),c=/px$/.test(c)?parseInt(c,10):0,l(p.split(" "),function(t){var n=d.getStyle(a,t,!0);if(!("background-color"==t&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(n)&&(n=d.getStyle(e.getBody(),t,!0),"#ffffff"==d.toHex(n).toLowerCase())||"color"==t&&"#000000"==d.toHex(n).toLowerCase())){if("font-size"==t&&/em|%$/.test(n)){if(0===c)return;n=parseFloat(n,10)/(/%$/.test(n)?100:1),n=n*c+"px"}"border"==t&&n&&(f+="padding:0 2px;"),f+=t+":"+n+";"}}),e.fire("AfterPreviewFormats"),d.remove(i),f)}var l=t.each,d=e.DOM;return{getCssText:a,parseSelector:s,selectorToHtml:r}}),l("tinymce.core.fmt.Hooks",["tinymce.core.util.Arr","tinymce.core.dom.NodeType","tinymce.core.dom.DomQuery"],function(e,t,n){function o(e,t){var n=i[e];n||(i[e]=n=[]),i[e].push(t)}function r(e,t){a(i[e],function(e){e(t)})}var i={},s=e.filter,a=e.each;return o("pre",function(o){function r(t){return l(t.previousSibling)&&e.indexOf(d,t.previousSibling)!=-1}function i(e,t){n(t).remove(),n(e).append("<br><br>").append(t.childNodes)}var l,d,u=o.selection.getRng();l=t.matchNodeNames("pre"),u.collapsed||(d=o.selection.getSelectedBlocks(),a(s(s(d,l),r),function(e){i(e.previousSibling,e)}))}),{postProcess:r}}),l("tinymce.core.Formatter",["tinymce.core.dom.TreeWalker","tinymce.core.dom.RangeUtils","tinymce.core.dom.BookmarkManager","tinymce.core.dom.ElementUtils","tinymce.core.dom.NodeType","tinymce.core.util.Fun","tinymce.core.util.Tools","tinymce.core.fmt.Preview","tinymce.core.fmt.Hooks"],function(e,t,n,o,r,i,s,a,l){return function(d){function u(e){return e.nodeType&&(e=e.nodeName),!!d.schema.getTextBlockElements()[e.toLowerCase()]}function c(e){return/^(TH|TD)$/.test(e.nodeName)}function p(e){return e&&/^(IMG)$/.test(e.nodeName)}function f(e,t){return oe.getParents(e,t,oe.getRoot())}function m(e){return 1===e.nodeType&&"_mce_caret"===e.id}function h(){v({valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"left"},inherit:!1,preview:!1,defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"center"},inherit:!1,preview:!1,defaultBlock:"div"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"justify"},inherit:!1,defaultBlock:"div",preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all"}],italic:[{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all"}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:!0},{inline:"strike",remove:"all"}],forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",styles:{fontSize:"%value"},clear_child_styles:!0},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:function(){return!0},onformat:function(e,t,n){ge(n,function(t,n){oe.setAttrib(e,n,t)})}},removeformat:[{selector:"b,strong,em,i,font,u,strike,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]}),ge("p h1 h2 h3 h4 h5 h6 div address pre div dt dd samp".split(/\s/),function(e){v(e,{block:e,remove:"all"})}),v(d.settings.formats)}function g(){d.addShortcut("meta+b","bold_desc","Bold"),d.addShortcut("meta+i","italic_desc","Italic"),d.addShortcut("meta+u","underline_desc","Underline");for(var e=1;e<=6;e++)d.addShortcut("access+"+e,"",["FormatBlock",!1,"h"+e]);d.addShortcut("access+7","",["FormatBlock",!1,"p"]),d.addShortcut("access+8","",["FormatBlock",!1,"div"]),d.addShortcut("access+9","",["FormatBlock",!1,"address"])}function y(e){return e?ne[e]:ne}function v(e,t){e&&("string"!=typeof e?ge(e,function(e,t){v(t,e)}):(t=t.length?t:[t],ge(t,function(e){e.deep===Q&&(e.deep=!e.selector),e.split===Q&&(e.split=!e.selector||e.inline),e.remove===Q&&e.selector&&!e.inline&&(e.remove="none"),e.selector&&e.inline&&(e.mixed=!0,e.block_expand=!0),"string"==typeof e.classes&&(e.classes=e.classes.split(/\s+/))}),ne[e]=t))}function b(e){return e&&ne[e]&&delete ne[e],ne}function _(e,t){var n=y(t);if(n)for(var o=0;o<n.length;o++)if(n[o].inherit===!1&&oe.is(e,n[o].selector))return!0;return!1}function x(e){var t;return d.dom.getParent(e,function(e){return t=d.dom.getStyle(e,"text-decoration"),t&&"none"!==t}),t}function C(e){var t;1===e.nodeType&&e.parentNode&&1===e.parentNode.nodeType&&(t=x(e.parentNode),d.dom.getStyle(e,"color")&&t?d.dom.setStyle(e,"text-decoration",t):d.dom.getStyle(e,"text-decoration")===t&&d.dom.setStyle(e,"text-decoration",null))}function E(t,n,o){function r(e,t){if(t=t||h,e){if(t.onformat&&t.onformat(e,t,n,o),ge(t.styles,function(t,o){oe.setStyle(e,o,z(t,n))}),t.styles){var r=oe.getAttrib(e,"style");r&&e.setAttribute("data-mce-style",r)}ge(t.attributes,function(t,o){oe.setAttrib(e,o,z(t,n))}),ge(t.classes,function(t){t=z(t,n),oe.hasClass(e,t)||oe.addClass(e,t)})}}function i(e,t){var n=!1;return!!h.selector&&(ge(e,function(e){if(!("collapsed"in e&&e.collapsed!==g))return oe.is(t,e.selector)&&!m(t)?(r(t,e),n=!0,!1):void 0}),n)}function s(){function t(t,n){var r=new e(n);for(o=r.prev2();o;o=r.prev2()){if(3==o.nodeType&&o.data.length>0)return o;if(o.childNodes.length>1||o==t||"BR"==o.tagName)return o}}var n=d.selection.getRng(),r=n.startContainer,i=n.endContainer;if(r!=i&&0===n.endOffset){var s=t(r,i),a=3==s.nodeType?s.data.length:s.childNodes.length;n.setEnd(s,a)}return n}function a(e,o,s){var a,l,d=[],c=!0;a=h.inline||h.block,l=oe.create(a),r(l),ie.walk(e,function(e){function o(e){var g,y,v,b;if(b=c,g=e.nodeName.toLowerCase(),y=e.parentNode.nodeName.toLowerCase(),1===e.nodeType&&me(e)&&(b=c,c="true"===me(e),v=!0),D(g,"br"))return p=0,void(h.block&&oe.remove(e));if(h.wrapper&&S(e,t,n))return void(p=0);if(c&&!v&&h.block&&!h.wrapper&&u(g)&&se(y,a))return e=oe.rename(e,a),r(e),d.push(e),void(p=0);if(h.selector){var _=i(f,e);if(!h.inline||_)return void(p=0)}!c||v||!se(a,g)||!se(y,a)||!s&&3===e.nodeType&&1===e.nodeValue.length&&65279===e.nodeValue.charCodeAt(0)||m(e)||h.inline&&ae(e)?(p=0,ge(ye(e.childNodes),o),v&&(c=b),p=0):(p||(p=oe.clone(l,pe),e.parentNode.insertBefore(p,e),d.push(p)),p.appendChild(e))}var p;ge(e,o)}),h.links===!0&&ge(d,function(e){function t(e){"A"===e.nodeName&&r(e,h),ge(ye(e.childNodes),t)}t(e)}),ge(d,function(e){function o(e){var t=0;return ge(e.childNodes,function(e){U(e)||he(e)||t++}),t}function i(e){var t=!1;return ge(e.childNodes,function(e){if(O(e))return t=e,!1}),t}function s(e,t){do{if(1!==o(e))break;if(e=i(e),!e)break;if(t(e))return e}while(e);return null}function a(e){var t,n;return t=i(e),t&&!he(t)&&R(t,h)&&(n=oe.clone(t,pe),r(n),oe.replace(n,e,fe),oe.remove(t,1)),n||e}var l;if(l=o(e),(d.length>1||!ae(e))&&0===l)return void oe.remove(e,1);if(h.inline||h.wrapper){if(h.exact||1!==l||(e=a(e)),ge(f,function(t){ge(oe.select(t.inline,e),function(e){O(e)&&q(t,n,e,t.exact?e:null)}),_e(t,e)}),S(e.parentNode,t,n)&&q(h,n,e)&&(e=0),h.merge_with_parents&&oe.getParent(e.parentNode,function(o){if(S(o,t,n))return q(h,n,e)&&(e=0),fe}),e&&!ae(e)&&!F(e,"fontSize")){var u=s(e,A("fontSize"));u&&E("fontsize",{value:F(u,"fontSize")},e)}e&&h.merge_siblings!==!1&&(e=$(K(e),e),e=$(e,K(e,fe)))}})}var c,p,f=y(t),h=f[0],g=!o&&re.isCollapsed();if("false"!==me(re.getNode())){if(h){if(o)o.nodeType?i(f,o)||(p=oe.createRng(),p.setStartBefore(o),p.setEndAfter(o),a(W(p,f),null,!0)):a(o,null,!0);else if(g&&h.inline&&!oe.select("td[data-mce-selected],th[data-mce-selected]").length)J("apply",t,n);else{var v=d.selection.getNode();le||!f[0].defaultBlock||oe.getParent(v,oe.isBlock)||E(f[0].defaultBlock),d.selection.setRng(s()),c=re.getBookmark(),a(W(re.getRng(fe),f),c),h.styles&&((h.styles.color||h.styles.textDecoration)&&(ve(v,C,"childNodes"),C(v)),h.styles.backgroundColor&&M(v,A("fontSize"),L("backgroundColor",z(h.styles.backgroundColor,n)))),re.moveToBookmark(c),Z(re.getRng(fe)),d.nodeChanged()}l.postProcess(t,d)}}else{o=re.getNode();for(var b=0,_=f.length;b<_;b++)if(f[b].ceFalseOverride&&oe.is(o,f[b].selector))return void r(o,f[b])}}function w(e,t,n,o){function r(e){var n,o,i,s,a;if(1===e.nodeType&&me(e)&&(s=v,v="true"===me(e),a=!0),n=ye(e.childNodes),v&&!a)for(o=0,i=h.length;o<i&&!q(h[o],t,e,e);o++);if(g.deep&&n.length){for(o=0,i=n.length;o<i;o++)r(n[o]);a&&(v=s)}}function i(n){var r;return ge(f(n.parentNode).reverse(),function(n){var i;r||"_start"==n.id||"_end"==n.id||(i=S(n,e,t,o),i&&i.split!==!1&&(r=n))}),r}function s(e,n,o,r){var i,s,a,l,d,u;if(e){for(u=e.parentNode,i=n.parentNode;i&&i!=u;i=i.parentNode){for(s=oe.clone(i,pe),d=0;d<h.length;d++)if(q(h[d],t,s,s)){s=0;break}s&&(a&&s.appendChild(a),l||(l=s),a=s)}!r||g.mixed&&ae(e)||(n=oe.split(e,n)),a&&(o.parentNode.insertBefore(a,o),l.appendChild(o))}return n}function a(e){return s(i(e),e,e,!0)}function l(e){var t=oe.get(e?"_start":"_end"),n=t[e?"firstChild":"lastChild"];return he(n)&&(n=n[e?"firstChild":"lastChild"]),3==n.nodeType&&0===n.data.length&&(n=e?t.previousSibling||t.nextSibling:t.nextSibling||t.previousSibling),oe.remove(t,!0),n}function u(e){var t,n,o=e.commonAncestorContainer;if(e=W(e,h,fe),g.split){if(t=Y(e,fe),n=Y(e),t!=n){if(/^(TR|TH|TD)$/.test(t.nodeName)&&t.firstChild&&(t="TR"==t.nodeName?t.firstChild.firstChild||t:t.firstChild||t),o&&/^T(HEAD|BODY|FOOT|R)$/.test(o.nodeName)&&c(n)&&n.firstChild&&(n=n.firstChild||n),oe.isChildOf(t,n)&&!ae(n)&&!c(t)&&!c(n))return t=H(t,"span",{id:"_start","data-mce-type":"bookmark"}),a(t),void(t=l(fe));t=H(t,"span",{id:"_start","data-mce-type":"bookmark"}),n=H(n,"span",{id:"_end","data-mce-type":"bookmark"}),a(t),a(n),t=l(fe),n=l()}else t=n=a(t);e.startContainer=t.parentNode?t.parentNode:t,e.startOffset=de(t),e.endContainer=n.parentNode?n.parentNode:n,e.endOffset=de(n)+1}ie.walk(e,function(e){ge(e,function(e){r(e),1===e.nodeType&&"underline"===d.dom.getStyle(e,"text-decoration")&&e.parentNode&&"underline"===x(e.parentNode)&&q({deep:!1,exact:!0,inline:"span",styles:{textDecoration:"underline"}},null,e)})})}var p,m,h=y(e),g=h[0],v=!0;if(n)return void(n.nodeType?(m=oe.createRng(),m.setStartBefore(n),m.setEndAfter(n),u(m)):u(n));if("false"!==me(re.getNode()))re.isCollapsed()&&g.inline&&!oe.select("td[data-mce-selected],th[data-mce-selected]").length?J("remove",e,t,o):(p=re.getBookmark(),u(re.getRng(fe)),re.moveToBookmark(p),g.inline&&T(e,t,re.getStart())&&Z(re.getRng(!0)),d.nodeChanged());else{n=re.getNode();for(var b=0,_=h.length;b<_&&(!h[b].ceFalseOverride||!q(h[b],t,n,n));b++);}}function j(e,t,n){var o=y(e);!T(e,t,n)||"toggle"in o[0]&&!o[0].toggle?E(e,t,n):w(e,t,n)}function S(e,t,n,o){function r(e,t,r){var i,s,a,l=t[r];if(t.onmatch)return t.onmatch(e,t,r);if(l)if(l.length===Q){for(i in l)if(l.hasOwnProperty(i)){if(s="attributes"===r?oe.getAttrib(e,i):F(e,i),o&&!s&&!t.exact)return;if((!o||t.exact)&&!D(s,B(z(l[i],n),i)))return}}else for(a=0;a<l.length;a++)if("attributes"===r?oe.getAttrib(e,l[a]):F(e,l[a]))return t;return t}var i,s,a,l=y(t);if(l&&e)for(s=0;s<l.length;s++)if(i=l[s],R(e,i)&&r(e,i,"attributes")&&r(e,i,"styles")){if(a=i.classes)for(s=0;s<a.length;s++)if(!oe.hasClass(e,a[s]))return;return i}}function T(e,t,n){function o(n){var o=oe.getRoot();return n!==o&&(n=oe.getParent(n,function(n){return!!_(n,e)||(n.parentNode===o||!!S(n,e,t,!0))}),S(n,e,t))}var r;return n?o(n):(n=re.getNode(),o(n)?fe:(r=re.getStart(),r!=n&&o(r)?fe:pe))}function P(e,t){var n,o=[],r={};return n=re.getStart(),oe.getParent(n,function(n){var i,s;for(i=0;i<e.length;i++)s=e[i],!r[s]&&S(n,s,t)&&(r[s]=!0,o.push(s))},oe.getRoot()),o}function k(e){var t,n,o,r,i,s=y(e);if(s)for(t=re.getStart(),n=f(t),r=s.length-1;r>=0;r--){if(i=s[r].selector,!i||s[r].defaultBlock)return fe;for(o=n.length-1;o>=0;o--)if(oe.is(n[o],i))return fe}return pe}function I(e,t,n){var o;return X||(X={},o={},d.on("NodeChange",function(e){var t=f(e.element),n={};t=s.grep(t,function(e){return 1==e.nodeType&&!e.getAttribute("data-mce-bogus")}),ge(X,function(e,r){ge(t,function(i){return S(i,r,{},e.similar)?(o[r]||(ge(e,function(e){e(!0,{node:i,format:r,parents:t})}),o[r]=e),n[r]=e,!1):!_(i,r)&&void 0})}),ge(o,function(r,i){n[i]||(delete o[i],ge(r,function(n){n(!1,{node:e.element,format:i,parents:t})}))})})),ge(e.split(","),function(e){X[e]||(X[e]=[],X[e].similar=n),X[e].push(t)}),this}function N(e){return a.getCssText(d,e)}function R(e,t){return D(e,t.inline)?fe:D(e,t.block)?fe:t.selector?1==e.nodeType&&oe.is(e,t.selector):void 0}function D(e,t){return e=e||"",t=t||"",e=""+(e.nodeName||e),t=""+(t.nodeName||t),e.toLowerCase()==t.toLowerCase()}function M(e,t,n){ge(e.childNodes,function(e){O(e)&&(t(e)&&n(e),e.hasChildNodes()&&M(e,t,n))})}function O(e){return e&&1===e.nodeType&&!he(e)&&!m(e)&&!r.isBogus(e)}function A(e){return i.curry(function(e,t){return!(!t||!F(t,e))},e)}function L(e,t){return i.curry(function(e,t,n){oe.setStyle(n,e,t)},e,t)}function F(e,t){return B(oe.getStyle(e,t),t)}function B(e,t){return"color"!=t&&"backgroundColor"!=t||(e=oe.toHex(e)),"fontWeight"==t&&700==e&&(e="bold"),"fontFamily"==t&&(e=e.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),""+e}function z(e,t){return"string"!=typeof e?e=e(t):t&&(e=e.replace(/%(\w+)/g,function(e,n){return t[n]||e})),e}function U(e){return e&&3===e.nodeType&&/^([\t \r\n]+|)$/.test(e.nodeValue)}function H(e,t,n){var o=oe.create(t,n);return e.parentNode.insertBefore(o,e),o.appendChild(e),o}function W(t,n,o){function r(e){function t(e){return"BR"==e.nodeName&&e.getAttribute("data-mce-bogus")&&!e.nextSibling}var o,r,i,s,a;if(o=r=e?g:v,s=e?"previousSibling":"nextSibling",a=oe.getRoot(),3==o.nodeType&&!U(o)&&(e?y>0:b<o.nodeValue.length))return o;for(;;){if(!n[0].block_expand&&ae(r))return r;for(i=r[s];i;i=i[s])if(!he(i)&&!U(i)&&!t(i))return r;if(r==a||r.parentNode==a){o=r;break}r=r.parentNode}return o}function i(e,t){for(t===Q&&(t=3===e.nodeType?e.length:e.childNodes.length);e&&e.hasChildNodes();)e=e.childNodes[t],e&&(t=3===e.nodeType?e.length:e.childNodes.length);return{node:e,offset:t}}function s(e){for(var t=e;t;){if(1===t.nodeType&&me(t))return"false"===me(t)?t:e;t=t.parentNode}return e}function a(t,n,r){function i(e,t){var n,i,s=e.nodeValue;return"undefined"==typeof t&&(t=r?s.length:0),r?(n=s.lastIndexOf(" ",t),i=s.lastIndexOf(" ",t),n=n>i?n:i,n===-1||o||n++):(n=s.indexOf(" ",t),i=s.indexOf(" ",t),n=n!==-1&&(i===-1||n<i)?n:i),n}var s,a,l,u;if(3===t.nodeType){if(l=i(t,n),l!==-1)return{container:t,offset:l};u=t}for(s=new e(t,oe.getParent(t,ae)||d.getBody());a=s[r?"prev":"next"]();)if(3===a.nodeType){if(u=a,l=i(a),l!==-1)return{container:a,offset:l}}else if(ae(a))break;if(u)return n=r?0:u.length,{container:u,offset:n}}function l(e,o){var r,i,s,a;for(3==e.nodeType&&0===e.nodeValue.length&&e[o]&&(e=e[o]),r=f(e),i=0;i<r.length;i++)for(s=0;s<n.length;s++)if(a=n[s],!("collapsed"in a&&a.collapsed!==t.collapsed)&&oe.is(r[i],a.selector))return r[i];return e}function c(e,t){var o,r=oe.getRoot();if(n[0].wrapper||(o=oe.getParent(e,n[0].block,r)),o||(o=oe.getParent(3==e.nodeType?e.parentNode:e,function(e){return e!=r&&u(e)})),o&&n[0].wrapper&&(o=f(o,"ul,ol").reverse()[0]||o),!o)for(o=e;o[t]&&!ae(o[t])&&(o=o[t],!D(o,"br")););return o||e}var p,m,h,g=t.startContainer,y=t.startOffset,v=t.endContainer,b=t.endOffset;if(1==g.nodeType&&g.hasChildNodes()&&(p=g.childNodes.length-1,g=g.childNodes[y>p?p:y],3==g.nodeType&&(y=0)),1==v.nodeType&&v.hasChildNodes()&&(p=v.childNodes.length-1,v=v.childNodes[b>p?p:b-1],3==v.nodeType&&(b=v.nodeValue.length)),g=s(g),v=s(v),(he(g.parentNode)||he(g))&&(g=he(g)?g:g.parentNode,g=g.nextSibling||g,3==g.nodeType&&(y=0)),(he(v.parentNode)||he(v))&&(v=he(v)?v:v.parentNode,v=v.previousSibling||v,3==v.nodeType&&(b=v.length)),n[0].inline&&(t.collapsed&&(h=a(g,y,!0),h&&(g=h.container,y=h.offset),h=a(v,b),h&&(v=h.container,b=h.offset)),m=i(v,b),m.node)){for(;m.node&&0===m.offset&&m.node.previousSibling;)m=i(m.node.previousSibling);m.node&&m.offset>0&&3===m.node.nodeType&&" "===m.node.nodeValue.charAt(m.offset-1)&&m.offset>1&&(v=m.node,v.splitText(m.offset-1))}return(n[0].inline||n[0].block_expand)&&(n[0].inline&&3==g.nodeType&&0!==y||(g=r(!0)),n[0].inline&&3==v.nodeType&&b!==v.nodeValue.length||(v=r())),n[0].selector&&n[0].expand!==pe&&!n[0].inline&&(g=l(g,"previousSibling"),
v=l(v,"nextSibling")),(n[0].block||n[0].selector)&&(g=c(g,"previousSibling"),v=c(v,"nextSibling"),n[0].block&&(ae(g)||(g=r(!0)),ae(v)||(v=r()))),1==g.nodeType&&(y=de(g),g=g.parentNode),1==v.nodeType&&(b=de(v)+1,v=v.parentNode),{startContainer:g,startOffset:y,endContainer:v,endOffset:b}}function V(e,t){return t.links&&"A"==e.tagName}function q(e,t,n,o){var r,i,s;if(!R(n,e)&&!V(n,e))return pe;if("all"!=e.remove)for(ge(e.styles,function(r,i){r=B(z(r,t),i),"number"==typeof i&&(i=r,o=0),(e.remove_similar||!o||D(F(o,i),r))&&oe.setStyle(n,i,""),s=1}),s&&""===oe.getAttrib(n,"style")&&(n.removeAttribute("style"),n.removeAttribute("data-mce-style")),ge(e.attributes,function(e,r){var i;if(e=z(e,t),"number"==typeof r&&(r=e,o=0),!o||D(oe.getAttrib(o,r),e)){if("class"==r&&(e=oe.getAttrib(n,r),e&&(i="",ge(e.split(/\s+/),function(e){/mce\-\w+/.test(e)&&(i+=(i?" ":"")+e)}),i)))return void oe.setAttrib(n,r,i);"class"==r&&n.removeAttribute("className"),ce.test(r)&&n.removeAttribute("data-mce-"+r),n.removeAttribute(r)}}),ge(e.classes,function(e){e=z(e,t),o&&!oe.hasClass(o,e)||oe.removeClass(n,e)}),i=oe.getAttribs(n),r=0;r<i.length;r++){var a=i[r].nodeName;if(0!==a.indexOf("_")&&0!==a.indexOf("data-"))return pe}return"none"!=e.remove?(G(n,e),fe):void 0}function G(e,t){function n(e,t,n){return e=K(e,t,n),!e||"BR"==e.nodeName||ae(e)}var o,r=e.parentNode;t.block&&(le?r==oe.getRoot()&&(t.list_block&&D(e,t.list_block)||ge(ye(e.childNodes),function(e){se(le,e.nodeName.toLowerCase())?o?o.appendChild(e):(o=H(e,le),oe.setAttribs(o,d.settings.forced_root_block_attrs)):o=0})):ae(e)&&!ae(r)&&(n(e,pe)||n(e.firstChild,fe,1)||e.insertBefore(oe.create("br"),e.firstChild),n(e,fe)||n(e.lastChild,pe,1)||e.appendChild(oe.create("br")))),t.selector&&t.inline&&!D(t.inline,e)||oe.remove(e,1)}function K(e,t,n){if(e)for(t=t?"nextSibling":"previousSibling",e=n?e:e[t];e;e=e[t])if(1==e.nodeType||!U(e))return e}function $(e,t){function n(e,t){for(r=e;r;r=r[t]){if(3==r.nodeType&&0!==r.nodeValue.length)return e;if(1==r.nodeType&&!he(r))return r}return e}var r,i,s=new o(oe);if(e&&t&&(e=n(e,"previousSibling"),t=n(t,"nextSibling"),s.compare(e,t))){for(r=e.nextSibling;r&&r!=t;)i=r,r=r.nextSibling,e.appendChild(i);return oe.remove(t),ge(ye(t.childNodes),function(t){e.appendChild(t)}),e}return t}function Y(t,n){var o,r,i;return o=t[n?"startContainer":"endContainer"],r=t[n?"startOffset":"endOffset"],1==o.nodeType&&(i=o.childNodes.length-1,!n&&r&&r--,o=o.childNodes[r>i?i:r]),3===o.nodeType&&n&&r>=o.nodeValue.length&&(o=new e(o,d.getBody()).next()||o),3!==o.nodeType||n||0!==r||(o=new e(o,d.getBody()).prev()||o),o}function J(t,n,o,r){function i(e){var t=oe.create("span",{id:h,"data-mce-bogus":!0,style:g?"color:red":""});return e&&t.appendChild(d.getDoc().createTextNode(ue)),t}function s(e,t){for(;e;){if(3===e.nodeType&&e.nodeValue!==ue||e.childNodes.length>1)return!1;t&&1===e.nodeType&&t.push(e),e=e.firstChild}return!0}function a(e){for(;e;){if(e.id===h)return e;e=e.parentNode}}function l(t){var n;if(t)for(n=new e(t,t),t=n.current();t;t=n.next())if(3===t.nodeType)return t}function c(e,t){var n,o;if(e)o=re.getRng(!0),s(e)?(t!==!1&&(o.setStartBefore(e),o.setEndBefore(e)),oe.remove(e)):(n=l(e),n.nodeValue.charAt(0)===ue&&(n.deleteData(0,1),o.startContainer==n&&o.startOffset>0&&o.setStart(n,o.startOffset-1),o.endContainer==n&&o.endOffset>0&&o.setEnd(n,o.endOffset-1)),oe.remove(e,1)),re.setRng(o);else if(e=a(re.getStart()),!e)for(;e=oe.get(h);)c(e,!1)}function p(){var e,t,r,s,d,u,c;e=re.getRng(!0),s=e.startOffset,u=e.startContainer,c=u.nodeValue,t=a(re.getStart()),t&&(r=l(t));var p=/[^\s\u00a0\u00ad\u200b\ufeff]/;c&&s>0&&s<c.length&&p.test(c.charAt(s))&&p.test(c.charAt(s-1))?(d=re.getBookmark(),e.collapse(!0),e=W(e,y(n)),e=ie.split(e),E(n,o,e),re.moveToBookmark(d)):(t&&r.nodeValue===ue?E(n,o,t):(t=i(!0),r=t.firstChild,e.insertNode(t),s=1,E(n,o,t)),re.setCursorLocation(r,s))}function f(){var e,t,s,a,l,d,c,p,f=re.getRng(!0),m=[];for(e=f.startContainer,t=f.startOffset,l=e,3==e.nodeType&&(t!=e.nodeValue.length&&(a=!0),l=l.parentNode);l;){if(S(l,n,o,r)){d=l;break}l.nextSibling&&(a=!0),m.push(l),l=l.parentNode}if(d)if(a)s=re.getBookmark(),f.collapse(!0),f=W(f,y(n),!0),f=ie.split(f),w(n,o,f),re.moveToBookmark(s);else{for(p=i(),l=p,c=m.length-1;c>=0;c--)l.appendChild(oe.clone(m[c],!1)),l=l.firstChild;l.appendChild(oe.doc.createTextNode(ue)),l=l.firstChild;var h=oe.getParent(d,u);h&&oe.isEmpty(h)?d.parentNode.replaceChild(p,d):oe.insertAfter(p,d),re.setCursorLocation(l,1),oe.isEmpty(d)&&oe.remove(d)}}function m(){var e;e=a(re.getStart()),e&&!oe.isEmpty(e)&&ve(e,function(e){1!=e.nodeType||e.id===h||oe.isEmpty(e)||oe.setAttrib(e,"data-mce-bogus",null)},"childNodes")}var h="_mce_caret",g=d.settings.caret_debug;d._hasCaretEvents||(te=function(){var e,t=[];if(s(a(re.getStart()),t))for(e=t.length;e--;)oe.setAttrib(t[e],"data-mce-bogus","1")},ee=function(e){var t=e.keyCode;c(),8==t&&re.isCollapsed()&&re.getStart().innerHTML==ue&&c(a(re.getStart())),37!=t&&39!=t||c(a(re.getStart())),m()},d.on("SetContent",function(e){e.selection&&m()}),d._hasCaretEvents=!0),"apply"==t?p():f()}function Z(t){var n,o,r,i=t.startContainer,s=t.startOffset;if((t.startContainer!=t.endContainer||!p(t.startContainer.childNodes[t.startOffset]))&&(3==i.nodeType&&s>=i.nodeValue.length&&(s=de(i),i=i.parentNode),1==i.nodeType))for(r=i.childNodes,s<r.length?(i=r[s],n=new e(i,oe.getParent(i,oe.isBlock))):(i=r[r.length-1],n=new e(i,oe.getParent(i,oe.isBlock)),n.next(!0)),o=n.current();o;o=n.next())if(3==o.nodeType&&!U(o))return t.setStart(o,0),void re.setRng(t)}var X,Q,ee,te,ne={},oe=d.dom,re=d.selection,ie=new t(oe),se=d.schema.isValidChild,ae=oe.isBlock,le=d.settings.forced_root_block,de=oe.nodeIndex,ue="\ufeff",ce=/^(src|href|style)$/,pe=!1,fe=!0,me=oe.getContentEditable,he=n.isBookmarkNode,ge=s.each,ye=s.grep,ve=s.walk,be=s.extend,_e=function(e,t){e.clear_child_styles&&ge(oe.select("*",t),function(t){ge(e.styles,function(e,n){oe.setStyle(t,n,"")})})};be(this,{get:y,register:v,unregister:b,apply:E,remove:w,toggle:j,match:T,matchAll:P,matchNode:S,canApply:k,formatChanged:I,getCssText:N}),h(),g(),d.on("BeforeGetContent",function(e){te&&"raw"!=e.format&&te()}),d.on("mouseup keydown",function(e){ee&&ee(e)})}}),l("tinymce.core.undo.Diff",[],function(){var e=0,t=1,n=2,o=function(o,r){var i=o.length+r.length+2,s=new Array(i),a=new Array(i),l=function(e,t,n){return{start:e,end:t,diag:n}},d=function(i,s,a,l,u){var p=c(i,s,a,l);if(null===p||p.start===s&&p.diag===s-l||p.end===i&&p.diag===i-a)for(var f=i,m=a;f<s||m<l;)f<s&&m<l&&o[f]===r[m]?(u.push([e,o[f]]),++f,++m):s-i>l-a?(u.push([n,o[f]]),++f):(u.push([t,r[m]]),++m);else{d(i,p.start,a,p.start-p.diag,u);for(var h=p.start;h<p.end;++h)u.push([e,o[h]]);d(p.end,s,p.end-p.diag,l,u)}},u=function(e,t,n,i){for(var s=e;s-t<i&&s<n&&o[s]===r[s-t];)++s;return l(e,s,t)},c=function(e,t,n,i){var l=t-e,d=i-n;if(0===l||0===d)return null;var c=l-d,p=d+l,f=(p%2===0?p:p+1)/2;s[1+f]=e,a[1+f]=t+1;for(var m=0;m<=f;++m){for(var h=-m;h<=m;h+=2){var g=h+f;h===-m||h!=m&&s[g-1]<s[g+1]?s[g]=s[g+1]:s[g]=s[g-1]+1;for(var y=s[g],v=y-e+n-h;y<t&&v<i&&o[y]===r[v];)s[g]=++y,++v;if(c%2!=0&&c-m<=h&&h<=c+m&&a[g-c]<=s[g])return u(a[g-c],h+e-n,t,i)}for(h=c-m;h<=c+m;h+=2){for(g=h+f-c,h===c-m||h!=c+m&&a[g+1]<=a[g-1]?a[g]=a[g+1]-1:a[g]=a[g-1],y=a[g]-1,v=y-e+n-h;y>=e&&v>=n&&o[y]===r[v];)a[g]=y--,v--;if(c%2===0&&-m<=h&&h<=m&&a[g]<=s[g+c])return u(a[g],h+e-n,t,i)}}},p=[];return d(0,o.length,0,r.length,p),p};return{KEEP:e,DELETE:n,INSERT:t,diff:o}}),l("tinymce.core.undo.Fragments",["tinymce.core.util.Arr","tinymce.core.html.Entities","tinymce.core.undo.Diff"],function(e,t,n){var o=function(e){return 1===e.nodeType?e.outerHTML:3===e.nodeType?t.encodeRaw(e.data,!1):8===e.nodeType?"<!--"+e.data+"-->":""},r=function(e){var t,n,o;for(o=document.createElement("div"),t=document.createDocumentFragment(),e&&(o.innerHTML=e);n=o.firstChild;)t.appendChild(n);return t},i=function(e,t,n){var o=r(t);if(e.hasChildNodes()&&n<e.childNodes.length){var i=e.childNodes[n];i.parentNode.insertBefore(o,i)}else e.appendChild(o)},s=function(e,t){if(e.hasChildNodes()&&t<e.childNodes.length){var n=e.childNodes[t];n.parentNode.removeChild(n)}},a=function(t,o){var r=0;e.each(t,function(e){e[0]===n.KEEP?r++:e[0]===n.INSERT?(i(o,e[1],r),r++):e[0]===n.DELETE&&s(o,r)})},l=function(t){return e.filter(e.map(t.childNodes,o),function(e){return e.length>0})},d=function(t,r){var i=e.map(r.childNodes,o);return a(n.diff(i,t),r),r};return{read:l,write:d}}),l("tinymce.core.undo.Levels",["tinymce.core.util.Arr","tinymce.core.undo.Fragments"],function(e,t){var n=function(e){return e.indexOf("</iframe>")!==-1},o=function(e){return{type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}},r=function(e){return{type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}},i=function(i){var s,a,l;return s=t.read(i.getBody()),l=e.map(s,function(e){return i.serializer.trimContent(e)}),a=l.join(""),n(a)?o(l):r(a)},s=function(e,n,o){"fragmented"===n.type?t.write(n.fragments,e.getBody()):e.setContent(n.content,{format:"raw"}),e.selection.moveToBookmark(o?n.beforeBookmark:n.bookmark)},a=function(e){return"fragmented"===e.type?e.fragments.join(""):e.content},l=function(e,t){return a(e)===a(t)};return{createFragmentedLevel:o,createCompleteLevel:r,createFromEditor:i,applyToEditor:s,isEq:l}}),l("tinymce.core.UndoManager",["tinymce.core.util.VK","tinymce.core.util.Tools","tinymce.core.undo.Levels"],function(e,t,n){return function(e){function o(t){e.setDirty(t)}function r(e){f(!1),l.add({},e)}function i(){l.typing&&(f(!1),l.add())}var s,a,l=this,d=0,u=[],c=0,p=function(){return 0===c},f=function(e){p()&&(l.typing=e)};return e.on("init",function(){l.add()}),e.on("BeforeExecCommand",function(e){var t=e.command;"Undo"!==t&&"Redo"!==t&&"mceRepaint"!==t&&(i(),l.beforeChange())}),e.on("ExecCommand",function(e){var t=e.command;"Undo"!==t&&"Redo"!==t&&"mceRepaint"!==t&&r(e)}),e.on("ObjectResizeStart Cut",function(){l.beforeChange()}),e.on("SaveContent ObjectResized blur",r),e.on("DragEnd",r),e.on("KeyUp",function(t){var i=t.keyCode;t.isDefaultPrevented()||((i>=33&&i<=36||i>=37&&i<=40||45===i||t.ctrlKey)&&(r(),e.nodeChanged()),46!==i&&8!==i||e.nodeChanged(),a&&l.typing&&n.isEq(n.createFromEditor(e),u[0])===!1&&(e.isDirty()===!1&&(o(!0),e.fire("change",{level:u[0],lastLevel:null})),e.fire("TypingUndo"),a=!1,e.nodeChanged()))}),e.on("KeyDown",function(e){var t=e.keyCode;if(!e.isDefaultPrevented()){if(t>=33&&t<=36||t>=37&&t<=40||45===t)return void(l.typing&&r(e));var n=e.ctrlKey&&!e.altKey||e.metaKey;!(t<16||t>20)||224===t||91===t||l.typing||n||(l.beforeChange(),f(!0),l.add({},e),a=!0)}}),e.on("MouseDown",function(e){l.typing&&r(e)}),e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo"),e.on("AddUndo Undo Redo ClearUndos",function(t){t.isDefaultPrevented()||e.nodeChanged()}),l={data:u,typing:!1,beforeChange:function(){p()&&(s=e.selection.getBookmark(2,!0))},add:function(r,i){var a,l,c,f=e.settings;if(c=n.createFromEditor(e),r=r||{},r=t.extend(r,c),p()===!1||e.removed)return null;if(l=u[d],e.fire("BeforeAddUndo",{level:r,lastLevel:l,originalEvent:i}).isDefaultPrevented())return null;if(l&&n.isEq(l,r))return null;if(u[d]&&(u[d].beforeBookmark=s),f.custom_undo_redo_levels&&u.length>f.custom_undo_redo_levels){for(a=0;a<u.length-1;a++)u[a]=u[a+1];u.length--,d=u.length}r.bookmark=e.selection.getBookmark(2,!0),d<u.length-1&&(u.length=d+1),u.push(r),d=u.length-1;var m={level:r,lastLevel:l,originalEvent:i};return e.fire("AddUndo",m),d>0&&(o(!0),e.fire("change",m)),r},undo:function(){var t;return l.typing&&(l.add(),l.typing=!1,f(!1)),d>0&&(t=u[--d],n.applyToEditor(e,t,!0),o(!0),e.fire("undo",{level:t})),t},redo:function(){var t;return d<u.length-1&&(t=u[++d],n.applyToEditor(e,t,!1),o(!0),e.fire("redo",{level:t})),t},clear:function(){u=[],d=0,l.typing=!1,l.data=u,e.fire("ClearUndos")},hasUndo:function(){return d>0||l.typing&&u[0]&&!n.isEq(n.createFromEditor(e),u[0])},hasRedo:function(){return d<u.length-1&&!l.typing},transact:function(e){return i(),l.beforeChange(),l.ignore(e),l.add()},ignore:function(e){try{c++,e()}finally{c--}},extra:function(t,o){var r,i;l.transact(t)&&(i=u[d].bookmark,r=u[d-1],n.applyToEditor(e,r,!0),l.transact(o)&&(u[d-1].beforeBookmark=i))}}}}),l("ephox.sugar.api.node.Body",["ephox.katamari.api.Thunk","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","global!document"],function(e,t,n,o){var r=function(e){var t=n.isText(e)?e.dom().parentNode:e.dom();return void 0!==t&&null!==t&&t.ownerDocument.body.contains(t)},i=e.cached(function(){return s(t.fromDom(o))}),s=function(e){var n=e.dom().body;if(null===n||void 0===n)throw"Body is not available yet";return t.fromDom(n)};return{body:i,getBody:s,inBody:r}}),l("ephox.sugar.impl.ClosestOrAncestor",["ephox.katamari.api.Type","ephox.katamari.api.Option"],function(e,t){return function(n,o,r,i,s){return n(r,i)?t.some(r):e.isFunction(s)&&s(r)?t.none():o(r,i,s)}}),l("ephox.sugar.api.search.PredicateFind",["ephox.katamari.api.Type","ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.sugar.api.node.Body","ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element","ephox.sugar.impl.ClosestOrAncestor"],function(e,t,n,o,r,i,s,a){var l=function(e){return f(r.body(),e)},d=function(t,r,i){for(var a=t.dom(),l=e.isFunction(i)?i:n.constant(!1);a.parentNode;){a=a.parentNode;var d=s.fromDom(a);if(r(d))return o.some(d);if(l(d))break}return o.none()},u=function(e,t,n){var o=function(e){return t(e)};return a(o,d,e,t,n)},c=function(e,t){var n=e.dom();return n.parentNode?p(s.fromDom(n.parentNode),function(n){return!i.eq(e,n)&&t(n)}):o.none()},p=function(e,o){var r=t.find(e.dom().childNodes,n.compose(o,s.fromDom));return r.map(s.fromDom)},f=function(e,t){var n=function(e){for(var r=0;r<e.childNodes.length;r++){if(t(s.fromDom(e.childNodes[r])))return o.some(s.fromDom(e.childNodes[r]));var i=n(e.childNodes[r]);if(i.isSome())return i}return o.none()};return n(e.dom())};return{first:l,ancestor:d,closest:u,sibling:c,child:p,descendant:f}}),l("tinymce.core.caret.CaretUtils",["tinymce.core.util.Fun","tinymce.core.dom.TreeWalker","tinymce.core.dom.NodeType","tinymce.core.caret.CaretPosition","tinymce.core.caret.CaretContainer","tinymce.core.caret.CaretCandidate"],function(e,t,n,o,r,i){function s(e){return e>0}function a(e){return e<0}function l(e,t){for(var n;n=e(t);)if(!w(n))return n;return null}function d(e,n,o,r,i){var d=new t(e,r);if(a(n)){if((x(e)||w(e))&&(e=l(d.prev,!0),o(e)))return e;for(;e=l(d.prev,i);)if(o(e))return e}if(s(n)){if((x(e)||w(e))&&(e=l(d.next,!0),o(e)))return e;for(;e=l(d.next,i);)if(o(e))return e}return null}function u(e,t){for(e=e.parentNode;e&&e!=t;e=e.parentNode)if(_(e))return e;return t}function c(e,t){for(;e&&e!=t;){if(C(e))return e;e=e.parentNode}return null}function p(e,t,n){return c(e.container(),n)==c(t.container(),n)}function f(e,t,n){return u(e.container(),n)==u(t.container(),n)}function m(e,t){var n,o;return t?(n=t.container(),o=t.offset(),S(n)?n.childNodes[o+e]:null):null}function h(e,t){var n=t.ownerDocument.createRange();return e?(n.setStartBefore(t),n.setEndBefore(t)):(n.setStartAfter(t),n.setEndAfter(t)),n}function g(e,t,n){return c(t,e)==c(n,e)}function y(e,t,n){var o,r;for(r=e?"previousSibling":"nextSibling";n&&n!=t;){if(o=n[r],E(o)&&(o=o[r]),x(o)){if(g(t,o,n))return o;break}if(T(o))break;n=n.parentNode}return null}function v(e,t,o){var i,s,a,l,d=j(y,!0,t),u=j(y,!1,t);if(s=o.startContainer,a=o.startOffset,r.isCaretContainerBlock(s)){if(S(s)||(s=s.parentNode),l=s.getAttribute("data-mce-caret"),"before"==l&&(i=s.nextSibling,x(i)))return P(i);if("after"==l&&(i=s.previousSibling,x(i)))return k(i)}if(!o.collapsed)return o;if(n.isText(s)){if(E(s)){if(1===e){if(i=u(s))return P(i);if(i=d(s))return k(i)}if(e===-1){if(i=d(s))return k(i);if(i=u(s))return P(i)}return o}if(r.endsWithCaretContainer(s)&&a>=s.data.length-1)return 1===e&&(i=u(s))?P(i):o;if(r.startsWithCaretContainer(s)&&a<=1)return e===-1&&(i=d(s))?k(i):o;if(a===s.data.length)return i=u(s),i?P(i):o;if(0===a)return i=d(s),i?k(i):o}return o}function b(e,t){return x(m(e,t))}var _=n.isContentEditableTrue,x=n.isContentEditableFalse,C=n.matchStyleValues("display","block table table-cell table-caption list-item"),E=r.isCaretContainer,w=r.isCaretContainerBlock,j=e.curry,S=n.isElement,T=i.isCaretCandidate,P=j(h,!0),k=j(h,!1);return{isForwards:s,isBackwards:a,findNode:d,getEditingHost:u,getParentBlock:c,isInSameBlock:p,isInSameEditingHost:f,isBeforeContentEditableFalse:j(b,0),isAfterContentEditableFalse:j(b,-1),normalizeRange:v}}),l("tinymce.core.caret.CaretWalker",["tinymce.core.dom.NodeType","tinymce.core.caret.CaretCandidate","tinymce.core.caret.CaretPosition","tinymce.core.caret.CaretUtils","tinymce.core.util.Arr","tinymce.core.util.Fun"],function(e,t,n,o,r,i){function s(e,t){for(var n=[];e&&e!=t;)n.push(e),e=e.parentNode;return n}function a(e,t){return e.hasChildNodes()&&t<e.childNodes.length?e.childNodes[t]:null}function l(e,t){if(h(e)){if(y(t.previousSibling)&&!p(t.previousSibling))return n.before(t);if(p(t))return n(t,0)}if(g(e)){if(y(t.nextSibling)&&!p(t.nextSibling))return n.after(t);if(p(t))return n(t,t.data.length)}return g(e)?m(t)?n.before(t):n.after(t):n.before(t)}function d(t,r){var i;return!!e.isBr(t)&&(i=u(1,n.after(t),r),!!i&&!o.isInSameBlock(n.before(t),n.before(i),r))}function u(e,t,_){var x,C,E,w,j,S,T;if(!f(_)||!t)return null;if(t.isEqual(n.after(_))&&_.lastChild){if(T=n.after(_.lastChild),g(e)&&y(_.lastChild)&&f(_.lastChild))return m(_.lastChild)?n.before(_.lastChild):T}else T=t;if(x=T.container(),C=T.offset(),p(x)){if(g(e)&&C>0)return n(x,--C);if(h(e)&&C<x.length)return n(x,++C);E=x}else{if(g(e)&&C>0&&(w=a(x,C-1),y(w)))return!v(w)&&(j=o.findNode(w,e,b,w))?p(j)?n(j,j.data.length):n.after(j):p(w)?n(w,w.data.length):n.before(w);if(h(e)&&C<x.childNodes.length&&(w=a(x,C),y(w)))return d(w,_)?u(e,n.after(w),_):!v(w)&&(j=o.findNode(w,e,b,w))?p(j)?n(j,0):n.before(j):p(w)?n(w,0):n.after(w);E=T.getNode()}return(h(e)&&T.isAtEnd()||g(e)&&T.isAtStart())&&(E=o.findNode(E,e,i.constant(!0),_,!0),b(E))?l(e,E):(w=o.findNode(E,e,b,_),S=r.last(r.filter(s(x,_),c)),!S||w&&S.contains(w)?w?l(e,w):null:T=h(e)?n.after(S):n.before(S))}var c=e.isContentEditableFalse,p=e.isText,f=e.isElement,m=e.isBr,h=o.isForwards,g=o.isBackwards,y=t.isCaretCandidate,v=t.isAtomic,b=t.isEditableCaretCandidate;return function(e){return{next:function(t){return u(1,t,e)},prev:function(t){return u(-1,t,e)}}}}),l("tinymce.core.caret.CaretFinder",["ephox.katamari.api.Fun","ephox.katamari.api.Option","tinymce.core.caret.CaretCandidate","tinymce.core.caret.CaretPosition","tinymce.core.caret.CaretUtils","tinymce.core.caret.CaretWalker","tinymce.core.dom.NodeType"],function(e,t,n,o,r,i,s){var a=function(e,t,n){var r=e?o.before(n):o.after(n);return m(e,t,r)},l=function(e){return s.isBr(e)?o.before(e):o.after(e)},d=function(e){return o.isTextPosition(e)?0===e.offset():n.isCaretCandidate(e.getNode())},u=function(e){return o.isTextPosition(e)?e.offset()===e.container().data.length:n.isCaretCandidate(e.getNode(!0))},c=function(e,t){return!o.isTextPosition(e)&&!o.isTextPosition(t)&&e.getNode()===t.getNode(!0)},p=function(e){return!o.isTextPosition(e)&&s.isBr(e.getNode())},f=function(e,t,n){return e?!c(t,n)&&!p(t)&&u(t)&&d(n):!c(n,t)&&d(t)&&u(n)},m=function(e,n,o){var r=new i(n);return t.from(e?r.next(o):r.prev(o))},h=function(e,n,o){return m(e,n,o).bind(function(i){return r.isInSameBlock(o,i,n)&&f(e,o,i)?m(e,n,i):t.some(i)})},g=function(e,r){var i=e?r.firstChild:r.lastChild;return s.isText(i)?t.some(new o(i,e?0:i.data.length)):i?n.isCaretCandidate(i)?t.some(e?o.before(i):l(i)):a(e,r,i):t.none()};return{fromPosition:m,navigate:h,positionIn:g}}),l("tinymce.core.delete.DeleteUtils",["ephox.katamari.api.Arr","ephox.katamari.api.Option","ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","ephox.sugar.api.search.PredicateFind"],function(e,t,n,o,r,i){var s=function(t){var n=e.foldl(t,function(e,t){return e[t]=!0,e},{});return function(e){return n[r.name(e)]===!0}},a=s(["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"]),l=function(e){return function(t){return n.eq(e,o.fromDom(t.dom().parentNode))}},d=function(e,o){return n.contains(e,o)?i.closest(o,a,l(e)):t.none()};return{getParentTextBlock:d}}),l("ephox.sugar.api.search.SelectorFind",["ephox.sugar.api.search.PredicateFind","ephox.sugar.api.search.Selectors","ephox.sugar.impl.ClosestOrAncestor"],function(e,t,n){var o=function(e){return t.one(e)},r=function(n,o,r){return e.ancestor(n,function(e){return t.is(e,o)},r)},i=function(n,o){return e.sibling(n,function(e){return t.is(e,o)})},s=function(n,o){return e.child(n,function(e){return t.is(e,o)})},a=function(e,n){return t.one(n,e)},l=function(e,o,i){return n(t.is,r,e,o,i)};return{first:o,ancestor:r,sibling:i,child:s,descendant:a,closest:l}}),l("ephox.sugar.api.search.SelectorExists",["ephox.sugar.api.search.SelectorFind"],function(e){var t=function(t){return e.first(t).isSome()},n=function(t,n,o){return e.ancestor(t,n,o).isSome()},o=function(t,n){return e.sibling(t,n).isSome()},r=function(t,n){return e.child(t,n).isSome()},i=function(t,n){return e.descendant(t,n).isSome()},s=function(t,n,o){return e.closest(t,n,o).isSome()};return{any:t,ancestor:n,sibling:o,child:r,descendant:i,closest:s}}),l("tinymce.core.dom.Empty",["ephox.katamari.api.Fun","ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element","ephox.sugar.api.search.SelectorExists","tinymce.core.caret.CaretCandidate","tinymce.core.dom.NodeType","tinymce.core.dom.TreeWalker"],function(e,t,n,o,r,i,s){var a=function(r,i){var s=n.fromDom(r),a=n.fromDom(i);return o.ancestor(a,"pre,code",e.curry(t.eq,s))},l=function(e,t){return i.isText(t)&&/^[ \t\r\n]*$/.test(t.data)&&a(e,t)===!1},d=function(e){return i.isElement(e)&&"A"===e.nodeName&&e.hasAttribute("name")},u=function(e,t){return r.isCaretCandidate(t)&&l(e,t)===!1||d(t)||c(t)},c=i.hasAttribute("data-mce-bookmark"),p=i.hasAttribute("data-mce-bogus"),f=i.hasAttributeValue("data-mce-bogus","all"),m=function(e){var t,n,o=0;if(u(e,e))return!1;if(n=e.firstChild,!n)return!0;t=new s(n,e);do if(f(n))n=t.next(!0);else if(p(n))n=t.next();else if(i.isBr(n))o++,n=t.next();else{if(u(e,n))return!1;n=t.next()}while(n);return o<=1},h=function(e){return m(e.dom())};return{isEmpty:h}}),l("tinymce.core.delete.BlockBoundary",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.katamari.api.Options","ephox.katamari.api.Struct","ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","ephox.sugar.api.search.PredicateFind","ephox.sugar.api.search.Traverse","tinymce.core.caret.CaretFinder","tinymce.core.caret.CaretPosition","tinymce.core.delete.DeleteUtils","tinymce.core.dom.Empty","tinymce.core.dom.NodeType"],function(e,t,n,o,r,i,s,a,l,d,u,c,p,f,m){var h=r.immutable("block","position"),g=r.immutable("from","to"),y=function(e,t){var n=s.fromDom(e),o=s.fromDom(t.container());return p.getParentTextBlock(n,o).map(function(e){return h(e,t)})},v=function(e){return i.eq(e.from().block(),e.to().block())===!1},b=function(e){return d.parent(e.from().block()).bind(function(t){return d.parent(e.to().block()).filter(function(e){return i.eq(t,e)})}).isSome()},_=function(e){return m.isContentEditableFalse(e.from().block())===!1&&m.isContentEditableFalse(e.to().block())===!1},x=function(e,t,o){return m.isBr(o.position().getNode())&&f.isEmpty(o.block())===!1?u.positionIn(!1,o.block().dom()).bind(function(r){return r.isEqual(o.position())?u.fromPosition(t,e,r).bind(function(t){return y(e,t)}):n.some(o)}).getOr(o):o},C=function(e,t,n){var r=y(e,c.fromRangeStart(n)),i=r.bind(function(n){return u.fromPosition(t,e,n.position()).bind(function(n){return y(e,n).map(function(n){return x(e,t,n)})})});return o.liftN([r,i],g).filter(function(e){return v(e)&&b(e)&&_(e)})},E=function(e,t,o){return o.collapsed?C(e,t,o):n.none()};return{read:E}}),l("tinymce.core.delete.MergeBlocks",["ephox.katamari.api.Arr","ephox.katamari.api.Option","ephox.sugar.api.dom.Insert","ephox.sugar.api.dom.Remove","ephox.sugar.api.node.Element","ephox.sugar.api.search.Traverse","tinymce.core.caret.CaretFinder","tinymce.core.caret.CaretPosition","tinymce.core.dom.Empty","tinymce.core.dom.NodeType"],function(e,t,n,o,r,i,s,a,l,d){var u=function(a,u,c,p){var f=i.children(u);return d.isBr(p.getNode())&&(o.remove(r.fromDom(p.getNode())),p=s.positionIn(!1,c.dom()).getOr(p)),l.isEmpty(u)===!1&&e.each(f,function(e){n.append(c,e)}),l.isEmpty(u)&&o.remove(u),f.length>0?t.from(p):t.none()},c=function(e,t,n){return e?l.isEmpty(t)?(o.remove(t),s.positionIn(!0,n.dom())):s.positionIn(!1,t.dom()).bind(function(o){return u(e,n,t,o)}):l.isEmpty(n)?(o.remove(n),s.positionIn(!0,t.dom())):s.positionIn(!1,n.dom()).bind(function(o){return u(e,t,n,o)})};return{mergeBlocks:c}}),l("tinymce.core.delete.BlockBoundaryDelete",["tinymce.core.delete.BlockBoundary","tinymce.core.delete.MergeBlocks"],function(e,t){var n=function(n,o){var r;return r=e.read(n.getBody(),o,n.selection.getRng()).bind(function(e){return t.mergeBlocks(o,e.from().block(),e.to().block())}),r.each(function(e){n.selection.setRng(e.toRange())}),r.isSome()};return{backspaceDelete:n}}),l("tinymce.core.delete.BlockRangeDelete",["ephox.katamari.api.Options","ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element","tinymce.core.delete.DeleteUtils","tinymce.core.delete.MergeBlocks"],function(e,t,n,o,r){var i=function(i,s){var a=s.getRng();return e.liftN([o.getParentTextBlock(i,n.fromDom(a.startContainer)),o.getParentTextBlock(i,n.fromDom(a.endContainer))],function(e,n){return t.eq(e,n)===!1&&(a.deleteContents(),r.mergeBlocks(!0,e,n).each(function(e){s.setRng(e.toRange())}),!0)}).getOr(!1)},s=function(e,t){var o=n.fromDom(e.getBody());return e.selection.isCollapsed()===!1&&i(o,e.selection)};return{backspaceDelete:s}}),l("ephox.katamari.api.Adt",["ephox.katamari.api.Arr","ephox.katamari.api.Obj","ephox.katamari.api.Type","global!Array","global!Error","global!console"],function(e,t,n,o,r,i){var s=function(s){if(!n.isArray(s))throw new r("cases must be an array");if(0===s.length)throw new r("there must be at least one case");var a=[],l={};return e.each(s,function(d,u){var c=t.keys(d);if(1!==c.length)throw new r("one and only one name per case");var p=c[0],f=d[p];if(void 0!==l[p])throw new r("duplicate key detected:"+p);if("cata"===p)throw new r("cannot have a case named cata (sorry)");if(!n.isArray(f))throw new r("case arguments must be an array");a.push(p),l[p]=function(){var n=arguments.length;if(n!==f.length)throw new r("Wrong number of arguments to case "+p+". Expected "+f.length+" ("+f+"), got "+n);for(var l=new o(n),d=0;d<l.length;d++)l[d]=arguments[d];var c=function(n){var o=t.keys(n);if(a.length!==o.length)throw new r("Wrong number of arguments to match. Expected: "+a.join(",")+"\nActual: "+o.join(","));var i=e.forall(a,function(t){return e.contains(o,t)});if(!i)throw new r("Not all branches were specified when using match. Specified: "+o.join(", ")+"\nRequired: "+a.join(", "));return n[p].apply(null,l)};return{fold:function(){if(arguments.length!==s.length)throw new r("Wrong number of arguments to fold. Expected "+s.length+", got "+arguments.length);var e=arguments[u];return e.apply(null,l)},match:c,log:function(e){i.log(e,{constructors:a,constructor:p,params:l})}}}}),l};return{generate:s}}),l("tinymce.core.delete.CefDeleteAction",["ephox.katamari.api.Adt","ephox.katamari.api.Option","ephox.sugar.api.node.Element","tinymce.core.caret.CaretFinder","tinymce.core.caret.CaretPosition","tinymce.core.caret.CaretUtils","tinymce.core.delete.DeleteUtils","tinymce.core.dom.Empty","tinymce.core.dom.NodeType"],function(e,t,n,o,r,i,s,a,l){var d=e.generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),u=function(e,t){var n=t.getNode(e===!1),o=e?"after":"before";return l.isElement(n)&&n.getAttribute("data-mce-caret")===o},c=function(e,o,r,i){var l=i.getNode(o===!1);return s.getParentTextBlock(n.fromDom(e),n.fromDom(r.getNode())).map(function(e){return a.isEmpty(e)?d.remove(e.dom()):d.moveToElement(l)}).orThunk(function(){return t.some(d.moveToElement(l))})},p=function(e,n,r){return o.fromPosition(n,e,r).bind(function(o){return n&&l.isContentEditableFalse(o.getNode())?c(e,n,r,o):n===!1&&l.isContentEditableFalse(o.getNode(!0))?c(e,n,r,o):n&&i.isAfterContentEditableFalse(r)?t.some(d.moveToPosition(o)):n===!1&&i.isBeforeContentEditableFalse(r)?t.some(d.moveToPosition(o)):t.none()})},f=function(e,n){return e&&l.isContentEditableFalse(n.nextSibling)?t.some(d.moveToElement(n.nextSibling)):e===!1&&l.isContentEditableFalse(n.previousSibling)?t.some(d.moveToElement(n.previousSibling)):t.none()},m=function(e,n,o){return u(n,o)?f(n,o.getNode(n===!1)).fold(function(){return p(e,n,o)},t.some):p(e,n,o)},h=function(e,n,o){var s=i.normalizeRange(n?1:-1,e,o),a=r.fromRangeStart(s);return n===!1&&i.isAfterContentEditableFalse(a)?t.some(d.remove(a.getNode(!0))):n&&i.isBeforeContentEditableFalse(a)?t.some(d.remove(a.getNode())):m(e,n,a)};return{read:h}}),l("tinymce.core.text.Bidi",[],function(){var e=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,t=function(t){return e.test(t)};return{hasStrongRtl:t}}),l("tinymce.core.keyboard.InlineUtils",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.katamari.api.Options","tinymce.core.caret.CaretContainer","tinymce.core.caret.CaretFinder","tinymce.core.caret.CaretPosition","tinymce.core.caret.CaretUtils","tinymce.core.caret.CaretWalker","tinymce.core.dom.DOMUtils","tinymce.core.dom.NodeType","tinymce.core.text.Bidi"],function(e,t,n,o,r,i,s,a,l,d,u,c){var p=function(e){return d.DOM.is(e,"a[href],code")},f=function(e){return"rtl"===d.DOM.getStyle(e,"direction",!0)||c.hasStrongRtl(e.textContent)},m=function(t,n){return e.filter(d.DOM.getParents(n.container(),"*",t),p)},h=function(e,t){var o=m(e,t);return n.from(o[0])},g=function(e,t){var o=m(e,t);return n.from(o[o.length-1])},y=function(e,t,n){var o=a.getParentBlock(t,e),r=a.getParentBlock(n,e);return o&&o===r},v=function(e,t){return!!t&&g(e,t).isSome()},b=function(e,t){return g(e,t).map(function(e){return C(e,!1,t).isNone()||C(e,!0,t).isNone()}).getOr(!1)},_=function(e){return r.isBeforeInline(e)||r.isAfterInline(e)},x=function(e,t){return i.positionIn(t,e)},C=function(e,t,n){return i.fromPosition(t,e,n)},E=function(e,t){var n=t.container(),o=t.offset();return e?r.isCaretContainerInline(n)?u.isText(n.nextSibling)?new s(n.nextSibling,0):s.after(n):r.isBeforeInline(t)?new s(n,o+1):t:r.isCaretContainerInline(n)?u.isText(n.previousSibling)?new s(n.previousSibling,n.previousSibling.data.length):s.before(n):r.isAfterInline(t)?new s(n,o-1):t},w=t.curry(E,!0),j=t.curry(E,!1);return{isInlineTarget:p,findInline:h,findRootInline:g,isInInline:v,isRtl:f,isAtInlineEndPoint:b,isAtZwsp:_,findCaretPositionIn:x,findCaretPosition:C,normalizePosition:E,normalizeForwards:w,normalizeBackwards:j,hasSameParentBlock:y}}),l("tinymce.core.delete.DeleteElement",["ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.katamari.api.Options","ephox.sugar.api.dom.Insert","ephox.sugar.api.dom.Remove","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","ephox.sugar.api.search.PredicateFind","ephox.sugar.api.search.Traverse","tinymce.core.caret.CaretCandidate","tinymce.core.caret.CaretPosition","tinymce.core.dom.Empty","tinymce.core.dom.NodeType","tinymce.core.keyboard.InlineUtils"],function(e,t,n,o,r,i,s,a,l,d,u,c,p,f){var m=function(e,t){var n=e.container(),o=e.offset();return u.isTextPosition(e)===!1&&n===t.parentNode&&o>u.before(t).offset()},h=function(e,t){return m(t,e)?new u(t.container(),t.offset()-1):t},g=function(e){return p.isText(e)?new u(e,0):u.before(e)},y=function(e){return p.isText(e)?new u(e,e.data.length):u.after(e)},v=function(e){return d.isCaretCandidate(e.previousSibling)?t.some(y(e.previousSibling)):e.previousSibling?f.findCaretPositionIn(e.previousSibling,!1):t.none();
},b=function(e){return d.isCaretCandidate(e.nextSibling)?t.some(g(e.nextSibling)):e.nextSibling?f.findCaretPositionIn(e.nextSibling,!0):t.none()},_=function(e,n){var o=u.before(n.previousSibling?n.previousSibling:n.parentNode);return f.findCaretPosition(e,!1,o).fold(function(){return f.findCaretPosition(e,!0,u.after(n))},t.some)},x=function(e,n){return f.findCaretPosition(e,!0,u.after(n)).fold(function(){return f.findCaretPosition(e,!1,u.before(n))},t.some)},C=function(e,t){return v(t).orThunk(function(){return b(t)}).orThunk(function(){return _(e,t)})},E=function(e,t){return b(t).orThunk(function(){return v(t)}).orThunk(function(){return x(e,t)})},w=function(e,t,n){return e?E(t,n):C(t,n)},j=function(t,n,o){return w(t,n,o).map(e.curry(h,o))},S=function(e,t,n){n.fold(function(){e.focus()},function(n){e.selection.setRng(n.toRange(),t)})},T=function(e){return function(t){return t.dom()===e}},P=function(e,t){return t&&e.schema.getBlockElements().hasOwnProperty(s.name(t))},k=function(e){if(c.isEmpty(e)){var n=i.fromHtml('<br data-mce-bogus="1">');return r.empty(e),o.append(e,n),t.some(u.before(n.dom()))}return t.none()},I=function(e,t){return n.liftN([l.prevSibling(e),l.nextSibling(e),t],function(t,n,o){var i,s=t.dom(),a=n.dom();return p.isText(s)&&p.isText(a)?(i=s.data.length,s.appendData(a.data),r.remove(n),r.remove(e),o.container()===a?new u(s,i):o):(r.remove(e),o)}).orThunk(function(){return r.remove(e),t})},N=function(n,o,r){var i=j(o,n.getBody(),r.dom()),s=a.ancestor(r,e.curry(P,n),T(n.getBody())),l=I(r,i);s.bind(k).fold(function(){S(n,o,l)},function(e){S(n,o,t.some(e))})};return{deleteElement:N}}),l("tinymce.core.delete.CefDelete",["ephox.sugar.api.node.Element","tinymce.core.caret.CaretPosition","tinymce.core.caret.CaretUtils","tinymce.core.delete.BlockBoundary","tinymce.core.delete.CefDeleteAction","tinymce.core.delete.DeleteElement","tinymce.core.delete.MergeBlocks","tinymce.core.dom.NodeType"],function(e,t,n,o,r,i,s,a){var l=function(t,n){return function(o){return i.deleteElement(t,n,e.fromDom(o)),!0}},d=function(e,n){return function(o){var r=n?t.before(o):t.after(o);return e.selection.setRng(r.toRange()),!0}},u=function(e){return function(t){return e.selection.setRng(t.toRange()),!0}},c=function(e,t){var n=r.read(e.getBody(),t,e.selection.getRng()).map(function(n){return n.fold(l(e,t),d(e,t),u(e))});return n.getOr(!1)},p=function(t,n){var o=t.selection.getNode();return!!a.isContentEditableFalse(o)&&(i.deleteElement(t,n,e.fromDom(t.selection.getNode())),!0)},f=function(e,t){for(;t&&t!==e;){if(a.isContentEditableTrue(t)||a.isContentEditableFalse(t))return t;t=t.parentNode}return null},m=function(e){var n,o=f(e.getBody(),e.selection.getNode());return a.isContentEditableTrue(o)&&e.dom.isBlock(o)&&e.dom.isEmpty(o)&&(n=e.dom.create("br",{"data-mce-bogus":"1"}),e.dom.setHTML(o,""),o.appendChild(n),e.selection.setRng(t.before(n).toRange())),!0},h=function(e,t){return e.selection.isCollapsed()?c(e,t):p(e,t)};return{backspaceDelete:h,paddEmptyElement:m}}),l("tinymce.core.caret.CaretContainerInline",["ephox.katamari.api.Fun","tinymce.core.dom.NodeType","tinymce.core.text.Zwsp"],function(e,t,n){var o=t.isText,r=function(e){return o(e)&&e.data[0]===n.ZWSP},i=function(e){return o(e)&&e.data[e.data.length-1]===n.ZWSP},s=function(e){return e.ownerDocument.createTextNode(n.ZWSP)},a=function(e){if(o(e.previousSibling))return i(e.previousSibling)?e.previousSibling:(e.previousSibling.appendData(n.ZWSP),e.previousSibling);if(o(e))return r(e)?e:(e.insertData(0,n.ZWSP),e);var t=s(e);return e.parentNode.insertBefore(t,e),t},l=function(e){if(o(e.nextSibling))return r(e.nextSibling)?e.nextSibling:(e.nextSibling.insertData(0,n.ZWSP),e.nextSibling);if(o(e))return i(e)?e:(e.appendData(n.ZWSP),e);var t=s(e);return e.nextSibling?e.parentNode.insertBefore(t,e.nextSibling):e.parentNode.appendChild(t),t},d=function(e,t){return e?a(t):l(t)};return{insertInline:d,insertInlineBefore:e.curry(d,!0),insertInlineAfter:e.curry(d,!1)}}),l("tinymce.core.caret.CaretContainerRemove",["ephox.katamari.api.Arr","tinymce.core.caret.CaretContainer","tinymce.core.caret.CaretPosition","tinymce.core.dom.NodeType","tinymce.core.text.Zwsp","tinymce.core.util.Tools"],function(e,t,n,o,r,i){var s=o.isElement,a=o.isText,l=function(e){var t=e.parentNode;t&&t.removeChild(e)},d=function(e){try{return e.nodeValue}catch(e){return""}},u=function(e,t){0===t.length?l(e):e.nodeValue=t},c=function(e){var t=r.trim(e);return{count:e.length-t.length,text:t}},p=function(e,t){return v(e),t},f=function(e,t){var o=c(e.data.substr(0,t.offset())),r=c(e.data.substr(t.offset())),i=o.text+r.text;return i.length>0?(u(e,i),new n(e,t.offset()-o.count)):t},m=function(t,o){var r=o.container(),i=e.indexOf(r.childNodes,t).map(function(e){return e<o.offset()?new n(r,o.offset()-1):o}).getOr(o);return v(t),i},h=function(e,t){return t.container()===e?f(e,t):p(e,t)},g=function(e,t){return t.container()===e.parentNode?m(e,t):p(e,t)},y=function(e,t){return n.isTextPosition(t)?h(e,t):g(e,t)},v=function(e){if(s(e)&&t.isCaretContainer(e)&&(t.hasContent(e)?e.removeAttribute("data-mce-caret"):l(e)),a(e)){var n=r.trim(d(e));u(e,n)}};return{removeAndReposition:y,remove:v}}),l("tinymce.core.keyboard.BoundaryCaret",["ephox.katamari.api.Option","tinymce.core.caret.CaretContainer","tinymce.core.caret.CaretContainerInline","tinymce.core.caret.CaretContainerRemove","tinymce.core.caret.CaretPosition","tinymce.core.dom.NodeType","tinymce.core.keyboard.InlineUtils"],function(e,t,n,o,r,i,s){var a=function(e,t){return i.isText(e.container())?n.insertInline(t,e.container()):n.insertInline(t,e.getNode())},l=function(e,n){var o=n.get();return o&&e.container()===o&&t.isCaretContainerInline(o)},d=function(t,i){return i.fold(function(i){o.remove(t.get());var s=n.insertInlineBefore(i);return t.set(s),e.some(new r(s,s.length-1))},function(e){return s.findCaretPositionIn(e,!0).map(function(e){if(l(e,t))return new r(t.get(),1);o.remove(t.get());var n=a(e,!0);return t.set(n),new r(n,1)})},function(e){return s.findCaretPositionIn(e,!1).map(function(e){if(l(e,t))return new r(t.get(),t.get().length-1);o.remove(t.get());var n=a(e,!1);return t.set(n),new r(n,n.length-1)})},function(i){o.remove(t.get());var s=n.insertInlineAfter(i);return t.set(s),e.some(new r(s,1))})};return{renderCaret:d}}),l("tinymce.core.util.LazyEvaluator",["ephox.katamari.api.Option"],function(e){var t=function(t,n){for(var o=0;o<t.length;o++){var r=t[o].apply(null,n);if(r.isSome())return r}return e.none()};return{evaluateUntil:t}}),l("tinymce.core.keyboard.BoundaryLocation",["ephox.katamari.api.Adt","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.katamari.api.Options","tinymce.core.caret.CaretContainer","tinymce.core.caret.CaretPosition","tinymce.core.caret.CaretUtils","tinymce.core.dom.NodeType","tinymce.core.keyboard.InlineUtils","tinymce.core.util.LazyEvaluator"],function(e,t,n,o,r,i,s,a,l,d){var u=e.generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),c=function(e,t){var n=s.getParentBlock(t,e);return n?n:e},p=function(e,o){var r=l.normalizeForwards(o),i=c(e,r.container());return l.findRootInline(i,r).fold(function(){return l.findCaretPosition(i,!0,r).bind(t.curry(l.findRootInline,i)).map(function(e){return u.before(e)})},n.none)},f=function(e,t){var o=l.normalizeBackwards(t);return l.findRootInline(e,o).bind(function(e){var t=l.findCaretPosition(e,!1,o);return t.isNone()?n.some(u.start(e)):n.none()})},m=function(e,t){var o=l.normalizeForwards(t);return l.findRootInline(e,o).bind(function(e){var t=l.findCaretPosition(e,!0,o);return t.isNone()?n.some(u.end(e)):n.none()})},h=function(e,o){var r=l.normalizeBackwards(o),i=c(e,r.container());return l.findRootInline(i,r).fold(function(){return l.findCaretPosition(i,!1,r).bind(t.curry(l.findRootInline,i)).map(function(e){return u.after(e)})},n.none)},g=function(e){return l.isRtl(v(e))===!1},y=function(e,t){var n=d.evaluateUntil([p,f,m,h],[e,t]);return n.filter(g)},v=function(e){return e.fold(t.identity,t.identity,t.identity,t.identity)},b=function(e){return e.fold(t.constant("before"),t.constant("start"),t.constant("end"),t.constant("after"))},_=function(e){return e.fold(u.before,u.before,u.after,u.after)},x=function(e){return e.fold(u.start,u.start,u.end,u.end)},C=function(e,t){return b(e)===b(t)&&v(e)===v(t)},E=function(e,t,n,r,i){return o.liftN([l.findRootInline(t,n),l.findRootInline(t,r)],function(n,o){return n!==o&&l.hasSameParentBlock(t,n,o)?u.after(e?n:o):i}).getOr(i)},w=function(e,n){return e.fold(t.constant(!0),function(e){return!C(e,n)})},j=function(e,n,o,r){var i=l.normalizePosition(e,r),s=l.findCaretPosition(n,e,i).map(t.curry(l.normalizePosition,e)),a=s.fold(function(){return o.map(_)},function(r){return y(n,r).map(t.curry(E,e,n,i,r)).filter(t.curry(w,o))});return a.filter(g)},S=function(e,o){return e?o.fold(t.compose(n.some,u.start),n.none,t.compose(n.some,u.after),n.none):o.fold(n.none,t.compose(n.some,u.before),n.none,t.compose(n.some,u.end))},T=function(e,n,o){var r=l.normalizePosition(e,o),i=y(n,r);return y(n,r).bind(t.curry(S,e)).orThunk(function(){return j(e,n,i,o)})};return{readLocation:y,prevLocation:t.curry(T,!1),nextLocation:t.curry(T,!0),getElement:v,outside:_,inside:x}}),l("ephox.katamari.api.Cell",[],function(){var e=function(t){var n=t,o=function(){return n},r=function(e){n=e},i=function(){return e(o())};return{get:o,set:r,clone:i}};return e}),l("tinymce.core.keyboard.BoundarySelection",["ephox.katamari.api.Arr","ephox.katamari.api.Cell","ephox.katamari.api.Fun","tinymce.core.caret.CaretContainerRemove","tinymce.core.caret.CaretPosition","tinymce.core.keyboard.BoundaryCaret","tinymce.core.keyboard.BoundaryLocation","tinymce.core.keyboard.InlineUtils"],function(e,t,n,o,r,i,s,a){var l=function(e,t){var n=e.dom.createRng();n.setStart(t.container(),t.offset()),n.setEnd(t.container(),t.offset()),e.selection.setRng(n)},d=function(e){return e.settings.inline_boundaries!==!1},u=function(e,t){e?t.setAttribute("data-mce-selected","1"):t.removeAttribute("data-mce-selected","1")},c=function(e,t,n){return i.renderCaret(t,n).map(function(t){return l(e,t),n})},p=function(e,t,n){var o=e.getBody(),i=r.fromRangeStart(e.selection.getRng()),a=n?s.nextLocation(o,i):s.prevLocation(o,i);return a.bind(function(n){return c(e,t,n)})},f=function(t,o){var r=t.select("a[href][data-mce-selected],code[data-mce-selected]"),i=e.filter(o,a.isInlineTarget);e.each(e.difference(r,i),n.curry(u,!1)),e.each(e.difference(i,r),n.curry(u,!0))},m=function(e,t){if(e.selection.isCollapsed()&&e.composing!==!0&&t.get()){var n=r.fromRangeStart(e.selection.getRng());r.isTextPosition(n)&&a.isAtZwsp(n)===!1&&(l(e,o.removeAndReposition(t.get(),n)),t.set(null))}},h=function(t,n,o){if(t.selection.isCollapsed()){var i=e.filter(o,a.isInlineTarget);e.each(i,function(e){var o=r.fromRangeStart(t.selection.getRng());s.readLocation(t.getBody(),o).bind(function(e){return c(t,n,e)})})}},g=function(e,t,n){return function(){return!!d(e)&&p(e,t,n).isSome()}},y=function(e){var n=new t(null);return e.on("NodeChange",function(t){d(e)&&(f(e.dom,t.parents),m(e,n),h(e,n,t.parents))}),n};return{move:g,setupSelectedState:y,setCaretPosition:l}}),l("tinymce.core.delete.InlineBoundaryDelete",["ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.katamari.api.Options","ephox.sugar.api.node.Element","tinymce.core.caret.CaretContainer","tinymce.core.caret.CaretFinder","tinymce.core.caret.CaretPosition","tinymce.core.caret.CaretUtils","tinymce.core.delete.DeleteElement","tinymce.core.keyboard.BoundaryCaret","tinymce.core.keyboard.BoundaryLocation","tinymce.core.keyboard.BoundarySelection","tinymce.core.keyboard.InlineUtils"],function(e,t,n,o,r,i,s,a,l,d,u,c,p){var f=function(e){return e.settings.inline_boundaries!==!1},m=function(e,t){var n=document.createRange();return n.setStart(e.container(),e.offset()),n.setEnd(t.container(),t.offset()),n},h=function(e){return n.liftN([p.findCaretPositionIn(e,!0),p.findCaretPositionIn(e,!1)],function(t,n){var o=p.normalizePosition(!0,t),r=p.normalizePosition(!1,n);return p.findCaretPosition(e,!0,o).map(function(e){return e.isEqual(r)}).getOr(!0)}).getOr(!0)},g=function(e,t){return function(n){return d.renderCaret(t,n).map(function(t){return c.setCaretPosition(e,t),!0}).getOr(!1)}},y=function(e,t,n,o){var r=e.getBody();e.undoManager.ignore(function(){e.selection.setRng(m(n,o)),e.execCommand("Delete"),u.readLocation(r,s.fromRangeStart(e.selection.getRng())).map(u.inside).map(g(e,t))}),e.nodeChanged()},v=function(e,t){var n=a.getParentBlock(t,e);return n?n:e},b=function(n,r,s,a){var d=v(n.getBody(),a.container()),c=u.readLocation(d,a);return c.bind(function(n){return s?n.fold(e.constant(t.some(u.inside(n))),t.none,e.constant(t.some(u.outside(n))),t.none):n.fold(t.none,e.constant(t.some(u.outside(n))),t.none,e.constant(t.some(u.inside(n))))}).map(g(n,r)).getOrThunk(function(){var e=i.navigate(s,d,a),t=e.bind(function(e){return u.readLocation(d,e)});return c.isSome()&&t.isSome()?p.findRootInline(d,a).map(function(e){return!!h(e)&&(l.deleteElement(n,s,o.fromDom(e)),!0)}).getOr(!1):t.bind(function(t){return e.map(function(e){return s?y(n,r,a,e):y(n,r,e,a),!0})}).getOr(!1)})},_=function(e,t,n){if(e.selection.isCollapsed()&&f(e)){var o=s.fromRangeStart(e.selection.getRng());return b(e,t,n,o)}return!1};return{backspaceDelete:_}}),l("tinymce.core.delete.DeleteCommands",["tinymce.core.delete.BlockBoundaryDelete","tinymce.core.delete.BlockRangeDelete","tinymce.core.delete.CefDelete","tinymce.core.delete.InlineBoundaryDelete"],function(e,t,n,o){var r=function(e,t){e.getDoc().execCommand(t,!1,null)},i=function(e){var t=e.dom,n=e.getBody();t.isEmpty(n)&&(e.setContent(""),n.firstChild&&t.isBlock(n.firstChild)?e.selection.setCursorLocation(n.firstChild,0):e.selection.setCursorLocation(n,0))},s=function(s){n.backspaceDelete(s,!1)||o.backspaceDelete(s,!1)||e.backspaceDelete(s,!1)||t.backspaceDelete(s,!1)||(r(s,"Delete"),i(s))},a=function(i){n.backspaceDelete(i,!0)||o.backspaceDelete(i,!0)||e.backspaceDelete(i,!0)||t.backspaceDelete(i,!0)||r(i,"ForwardDelete")};return{deleteCommand:s,forwardDeleteCommand:a}}),l("tinymce.core.dom.RangeNormalizer",["tinymce.core.caret.CaretFinder","tinymce.core.caret.CaretPosition","tinymce.core.caret.CaretUtils","tinymce.core.dom.NodeType"],function(e,t,n,o){var r=function(e){return o.isElement(e)&&/^(P|H[1-6]|DIV)$/.test(e.nodeName)},i=function(e,t){return t(e.endContainer)},s=function(e,t,n,o){var r=document.createRange();return r.setStart(e,t),r.setEnd(n,o),r},a=function(o){var a=t.fromRangeStart(o),l=t.fromRangeEnd(o),d=o.commonAncestorContainer;return o.collapsed===!1&&i(o,r)&&0===o.endOffset?e.fromPosition(!1,d,l).map(function(e){return!n.isInSameBlock(a,l,d)&&n.isInSameBlock(a,e,d)?s(a.container(),a.offset(),e.container(),e.offset()):o}).getOr(o):o},l=function(e){return a(e)};return{normalize:l}}),l("tinymce.core.InsertList",["tinymce.core.util.Tools","tinymce.core.caret.CaretWalker","tinymce.core.caret.CaretPosition"],function(e,t,n){var o=function(e){var t=e.firstChild,n=e.lastChild;return t&&"meta"===t.name&&(t=t.next),n&&"mce_marker"===n.attr("id")&&(n=n.prev),!(!t||t!==n)&&("ul"===t.name||"ol"===t.name)},r=function(e){var t=e.firstChild,n=e.lastChild;return t&&"META"===t.nodeName&&t.parentNode.removeChild(t),n&&"mce_marker"===n.id&&n.parentNode.removeChild(n),e},i=function(e,t,n){var o=t.serialize(n),i=e.createFragment(o);return r(i)},s=function(t){return e.grep(t.childNodes,function(e){return"LI"===e.nodeName})},a=function(e){return!e.firstChild},l=function(e){return e.length>0&&a(e[e.length-1])?e.slice(0,-1):e},d=function(e,t){var n=e.getParent(t,e.isBlock);return n&&"LI"===n.nodeName?n:null},u=function(e,t){return!!d(e,t)},c=function(e,t){var n=t.cloneRange(),o=t.cloneRange();return n.setStartBefore(e),o.setEndAfter(e),[n.cloneContents(),o.cloneContents()]},p=function(e,o){var r=n.before(e),i=new t(o),s=i.next(r);return s?s.toRange():null},f=function(e,o){var r=n.after(e),i=new t(o),s=i.prev(r);return s?s.toRange():null},m=function(t,n,o,r){var i=c(t,r),s=t.parentNode;return s.insertBefore(i[0],t),e.each(n,function(e){s.insertBefore(e,t)}),s.insertBefore(i[1],t),s.removeChild(t),f(n[n.length-1],o)},h=function(t,n,o){var r=t.parentNode;return e.each(n,function(e){r.insertBefore(e,t)}),p(t,o)},g=function(e,t,n,o){return o.insertAfter(t.reverse(),e),f(t[0],n)},y=function(e,o,r,a){var u=i(o,e,a),c=d(o,r.startContainer),p=l(s(u.firstChild)),f=1,y=2,v=o.getRoot(),b=function(e){var i=n.fromRangeStart(r),s=new t(o.getRoot()),a=e===f?s.prev(i):s.next(i);return!a||d(o,a.getNode())!==c};return b(f)?h(c,p,v):b(y)?g(c,p,v,o):m(c,p,v,r)};return{isListFragment:o,insertAtCaret:y,isParentBlockLi:u,trimListItems:l,listItems:s}}),l("tinymce.core.InsertContent",["tinymce.core.caret.CaretPosition","tinymce.core.caret.CaretWalker","tinymce.core.dom.ElementUtils","tinymce.core.dom.NodeType","tinymce.core.dom.RangeNormalizer","tinymce.core.Env","tinymce.core.html.Serializer","tinymce.core.InsertList","tinymce.core.util.Tools"],function(e,t,n,o,r,i,s,a,l){var d=o.matchNodeNames("td th"),u=function(e,t,n){if("all"===n.getAttribute("data-mce-bogus"))n.parentNode.insertBefore(e.dom.createFragment(t),n);else{var o=n.firstChild,r=n.lastChild;!o||o===r&&"BR"===o.nodeName?e.dom.setHTML(n,t):e.selection.setContent(t)}},c=function(o,c,p){function f(e){function t(e){return o[e]&&3==o[e].nodeType}var n,o,r;return n=M.getRng(!0),o=n.startContainer,r=n.startOffset,3==o.nodeType&&(r>0?e=e.replace(/^&nbsp;/," "):t("previousSibling")||(e=e.replace(/^ /,"&nbsp;")),r<o.length?e=e.replace(/&nbsp;(<br>|)$/," "):t("nextSibling")||(e=e.replace(/(&nbsp;| )(<br>|)$/,"&nbsp;"))),e}function m(){var e,t,n;e=M.getRng(!0),t=e.startContainer,n=e.startOffset,3==t.nodeType&&e.collapsed&&(" "===t.data[n]?(t.deleteData(n,1),/[\u00a0| ]$/.test(c)||(c+=" ")):" "===t.data[n-1]&&(t.deleteData(n-1,1),/[\u00a0| ]$/.test(c)||(c=" "+c)))}function h(){if(R){var e=o.getBody(),t=new n(O);l.each(O.select("*[data-mce-fragment]"),function(n){for(var o=n.parentNode;o&&o!=e;o=o.parentNode)D[n.nodeName.toLowerCase()]&&t.compare(o,n)&&O.remove(n,!0)})}}function g(e){for(var t=e;t=t.walk();)1===t.type&&t.attr("data-mce-fragment","1")}function y(e){l.each(e.getElementsByTagName("*"),function(e){e.removeAttribute("data-mce-fragment")})}function v(e){return!!e.getAttribute("data-mce-fragment")}function b(e){return e&&!o.schema.getShortEndedElements()[e.nodeName]}function _(n){function r(e){for(var t=o.getBody();e&&e!==t;e=e.parentNode)if("false"===o.dom.getContentEditable(e))return e;return null}function s(n){var r=e.fromRangeStart(n),i=new t(o.getBody());if(r=i.next(r))return r.toRange()}var a,l,u;if(n){if(M.scrollIntoView(n),a=r(n))return O.remove(n),void M.select(a);P=O.createRng(),k=n.previousSibling,k&&3==k.nodeType?(P.setStart(k,k.nodeValue.length),i.ie||(I=n.nextSibling,I&&3==I.nodeType&&(k.appendData(I.data),I.parentNode.removeChild(I)))):(P.setStartBefore(n),P.setEndBefore(n)),l=O.getParent(n,O.isBlock),O.remove(n),l&&O.isEmpty(l)&&(o.$(l).empty(),P.setStart(l,0),P.setEnd(l,0),d(l)||v(l)||!(u=s(P))?O.add(l,O.create("br",{"data-mce-bogus":"1"})):(P=u,O.remove(l))),M.setRng(P)}}var x,C,E,w,j,S,T,P,k,I,N,R,D=o.schema.getTextInlineElements(),M=o.selection,O=o.dom;/^ | $/.test(c)&&(c=f(c)),x=o.parser,R=p.merge,C=new s({validate:o.settings.validate},o.schema),N='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;&#x200B;</span>',S={content:c,format:"html",selection:!0},o.fire("BeforeSetContent",S),c=S.content,c.indexOf("{$caret}")==-1&&(c+="{$caret}"),c=c.replace(/\{\$caret\}/,N),P=M.getRng();var A=P.startContainer||(P.parentElement?P.parentElement():null),L=o.getBody();A===L&&M.isCollapsed()&&O.isBlock(L.firstChild)&&b(L.firstChild)&&O.isEmpty(L.firstChild)&&(P=O.createRng(),P.setStart(L.firstChild,0),P.setEnd(L.firstChild,0),M.setRng(P)),M.isCollapsed()||(o.selection.setRng(r.normalize(o.selection.getRng())),o.getDoc().execCommand("Delete",!1,null),m()),E=M.getNode();var F={context:E.nodeName.toLowerCase(),data:p.data};if(j=x.parse(c,F),p.paste===!0&&a.isListFragment(j)&&a.isParentBlockLi(O,E))return P=a.insertAtCaret(C,O,o.selection.getRng(!0),j),o.selection.setRng(P),void o.fire("SetContent",S);if(g(j),k=j.lastChild,"mce_marker"==k.attr("id"))for(T=k,k=k.prev;k;k=k.walk(!0))if(3==k.type||!O.isBlock(k.name)){o.schema.isValidChild(k.parent.name,"span")&&k.parent.insert(T,k,"br"===k.name);break}if(o._selectionOverrides.showBlockCaretContainer(E),F.invalid){for(M.setContent(N),E=M.getNode(),w=o.getBody(),9==E.nodeType?E=k=w:k=E;k!==w;)E=k,k=k.parentNode;c=E==w?w.innerHTML:O.getOuterHTML(E),c=C.serialize(x.parse(c.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,function(){return C.serialize(j)}))),E==w?O.setHTML(w,c):O.setOuterHTML(E,c)}else c=C.serialize(j),u(o,c,E);h(),_(O.get("mce_marker")),y(o.getBody()),o.fire("SetContent",S),o.addVisual()},p=function(e){var t;return"string"!=typeof e?(t=l.extend({paste:e.paste,data:{paste:e.paste}},e),{content:e.content,details:t}):{content:e,details:{}}},f=function(e,t){var n=p(t);c(e,n.content,n.details)};return{insertAtCaret:f}}),l("tinymce.core.EditorCommands",["tinymce.core.delete.DeleteCommands","tinymce.core.dom.NodeType","tinymce.core.dom.RangeUtils","tinymce.core.dom.TreeWalker","tinymce.core.Env","tinymce.core.InsertContent","tinymce.core.util.Tools"],function(e,t,n,o,r,i,s){var a=s.each,l=s.extend,d=s.map,u=s.inArray,c=s.explode,p=r.ie&&r.ie<11,f=!0,m=!1;return function(s){function h(e,t,n,o){var r,i,l=0;if(!s.removed){if(/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint)$/.test(e)||o&&o.skip_focus||s.focus(),o=s.fire("BeforeExecCommand",{command:e,ui:t,value:n}),o.isDefaultPrevented())return!1;if(i=e.toLowerCase(),r=D.exec[i])return r(i,t,n),s.fire("ExecCommand",{command:e,ui:t,value:n}),!0;if(a(s.plugins,function(o){if(o.execCommand&&o.execCommand(e,t,n))return s.fire("ExecCommand",{command:e,ui:t,value:n}),l=!0,!1}),l)return l;if(s.theme&&s.theme.execCommand&&s.theme.execCommand(e,t,n))return s.fire("ExecCommand",{command:e,ui:t,value:n}),!0;try{l=s.getDoc().execCommand(e,t,n)}catch(e){}return!!l&&(s.fire("ExecCommand",{command:e,ui:t,value:n}),!0)}}function g(e){var t;if(!s.quirks.isHidden()&&!s.removed){if(e=e.toLowerCase(),t=D.state[e])return t(e);try{return s.getDoc().queryCommandState(e)}catch(e){}return!1}}function y(e){var t;if(!s.quirks.isHidden()&&!s.removed){if(e=e.toLowerCase(),t=D.value[e])return t(e);try{return s.getDoc().queryCommandValue(e)}catch(e){}}}function v(e,t){t=t||"exec",a(e,function(e,n){a(n.toLowerCase().split(","),function(n){D[t][n]=e})})}function b(e,t,n){e=e.toLowerCase(),D.exec[e]=function(e,o,r,i){return t.call(n||s,o,r,i)}}function _(e){if(e=e.toLowerCase(),D.exec[e])return!0;try{return s.getDoc().queryCommandSupported(e)}catch(e){}return!1}function x(e,t,n){e=e.toLowerCase(),D.state[e]=function(){return t.call(n||s)}}function C(e,t,n){e=e.toLowerCase(),D.value[e]=function(){return t.call(n||s)}}function E(e){return e=e.toLowerCase(),!!D.exec[e]}function w(e,t,n){return void 0===t&&(t=m),void 0===n&&(n=null),s.getDoc().execCommand(e,t,n)}function j(e){return N.match(e)}function S(e,t){N.toggle(e,t?{value:t}:void 0),s.nodeChanged()}function T(e){R=I.getBookmark(e)}function P(){I.moveToBookmark(R)}var k,I,N,R,D={state:{},exec:{},value:{}},M=s.settings;s.on("PreInit",function(){k=s.dom,I=s.selection,M=s.settings,N=s.formatter}),l(this,{execCommand:h,queryCommandState:g,queryCommandValue:y,queryCommandSupported:_,addCommands:v,addCommand:b,addQueryStateHandler:x,addQueryValueHandler:C,hasCustomCommand:E}),v({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){s.undoManager.add()},"Cut,Copy,Paste":function(e){var t,n=s.getDoc();try{w(e)}catch(e){t=f}if("paste"!==e||n.queryCommandEnabled(e)||(t=!0),t||!n.queryCommandSupported(e)){var o=s.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");r.mac&&(o=o.replace(/Ctrl\+/g,"⌘+")),s.notificationManager.open({text:o,type:"error"})}},unlink:function(){if(I.isCollapsed()){var e=s.dom.getParent(s.selection.getStart(),"a");return void(e&&s.dom.remove(e,!0))}N.remove("link")},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull,JustifyNone":function(e){var t=e.substring(7);"full"==t&&(t="justify"),a("left,center,right,justify".split(","),function(e){t!=e&&N.remove("align"+e)}),"none"!=t&&S("align"+t)},"InsertUnorderedList,InsertOrderedList":function(e){var t,n;w(e),t=k.getParent(I.getNode(),"ol,ul"),t&&(n=t.parentNode,/^(H[1-6]|P|ADDRESS|PRE)$/.test(n.nodeName)&&(T(),k.split(n,t),P()))},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){S(e)},"ForeColor,HiliteColor,FontName":function(e,t,n){S(e,n)},FontSize:function(e,t,n){var o,r;n>=1&&n<=7&&(r=c(M.font_size_style_values),o=c(M.font_size_classes),n=o?o[n-1]||n:r[n-1]||n),S(e,n)},RemoveFormat:function(e){N.remove(e)},mceBlockQuote:function(){S("blockquote")},FormatBlock:function(e,t,n){return S(n||"p")},mceCleanup:function(){var e=I.getBookmark();s.setContent(s.getContent({cleanup:f}),{cleanup:f}),I.moveToBookmark(e)},mceRemoveNode:function(e,t,n){var o=n||I.getNode();o!=s.getBody()&&(T(),s.dom.remove(o,f),P())},mceSelectNodeDepth:function(e,t,n){var o=0;k.getParent(I.getNode(),function(e){if(1==e.nodeType&&o++==n)return I.select(e),m},s.getBody())},mceSelectNode:function(e,t,n){I.select(n)},mceInsertContent:function(e,t,n){i.insertAtCaret(s,n)},mceInsertRawHTML:function(e,t,n){I.setContent("tiny_mce_marker"),s.setContent(s.getContent().replace(/tiny_mce_marker/g,function(){return n}))},mceToggleFormat:function(e,t,n){S(n)},mceSetContent:function(e,t,n){s.setContent(n)},"Indent,Outdent":function(e){var t,n,o;t=M.indentation,n=/[a-z%]+$/i.exec(t),t=parseInt(t,10),g("InsertUnorderedList")||g("InsertOrderedList")?w(e):(M.forced_root_block||k.getParent(I.getNode(),k.isBlock)||N.apply("div"),a(I.getSelectedBlocks(),function(r){if("false"!==k.getContentEditable(r)&&"LI"!==r.nodeName){var i=s.getParam("indent_use_margin",!1)?"margin":"padding";i="TABLE"===r.nodeName?"margin":i,i+="rtl"==k.getStyle(r,"direction",!0)?"Right":"Left","outdent"==e?(o=Math.max(0,parseInt(r.style[i]||0,10)-t),k.setStyle(r,i,o?o+n:"")):(o=parseInt(r.style[i]||0,10)+t+n,k.setStyle(r,i,o))}}))},mceRepaint:function(){},InsertHorizontalRule:function(){s.execCommand("mceInsertContent",!1,"<hr />")},mceToggleVisualAid:function(){s.hasVisual=!s.hasVisual,s.addVisual()},mceReplaceContent:function(e,t,n){s.execCommand("mceInsertContent",!1,n.replace(/\{\$selection\}/g,I.getContent({format:"text"})))},mceInsertLink:function(e,t,n){var o;"string"==typeof n&&(n={href:n}),o=k.getParent(I.getNode(),"a"),n.href=n.href.replace(" ","%20"),o&&n.href||N.remove("link"),n.href&&N.apply("link",n,o)},selectAll:function(){var e,n=k.getRoot();if(I.getRng().setStart){var o=k.getParent(I.getStart(),t.isContentEditableTrue);o&&(e=k.createRng(),e.selectNodeContents(o),I.setRng(e))}else e=I.getRng(),e.item||(e.moveToElementText(n),e.select())},delete:function(){e.deleteCommand(s)},forwardDelete:function(){e.forwardDeleteCommand(s)},mceNewDocument:function(){s.setContent("")},InsertLineBreak:function(e,t,r){function i(){for(var e,t=new o(h,y),n=s.schema.getNonEmptyElements();e=t.next();)if(n[e.nodeName.toLowerCase()]||e.length>0)return!0}var a,l,d,u=r,c=I.getRng(!0);new n(k).normalize(c);var m=c.startOffset,h=c.startContainer;if(1==h.nodeType&&h.hasChildNodes()){var g=m>h.childNodes.length-1;h=h.childNodes[Math.min(m,h.childNodes.length-1)]||h,m=g&&3==h.nodeType?h.nodeValue.length:0}var y=k.getParent(h,k.isBlock),v=y?y.nodeName.toUpperCase():"",b=y?k.getParent(y.parentNode,k.isBlock):null,_=b?b.nodeName.toUpperCase():"",x=u&&u.ctrlKey;"LI"!=_||x||(y=b,v=_),h&&3==h.nodeType&&m>=h.nodeValue.length&&(p||i()||(a=k.create("br"),c.insertNode(a),c.setStartAfter(a),c.setEndAfter(a),l=!0)),a=k.create("br"),c.insertNode(a);var C=k.doc.documentMode;return p&&"PRE"==v&&(!C||C<8)&&a.parentNode.insertBefore(k.doc.createTextNode("\r"),a),d=k.create("span",{},"&nbsp;"),a.parentNode.insertBefore(d,a),I.scrollIntoView(d),k.remove(d),l?(c.setStartBefore(a),c.setEndBefore(a)):(c.setStartAfter(a),c.setEndAfter(a)),I.setRng(c),s.undoManager.add(),f}}),v({"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(e){var t="align"+e.substring(7),n=I.isCollapsed()?[k.getParent(I.getNode(),k.isBlock)]:I.getSelectedBlocks(),o=d(n,function(e){return!!N.matchNode(e,t)});return u(o,f)!==-1},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){return j(e)},mceBlockQuote:function(){return j("blockquote")},Outdent:function(){var e;if(M.inline_styles){if((e=k.getParent(I.getStart(),k.isBlock))&&parseInt(e.style.paddingLeft,10)>0)return f;if((e=k.getParent(I.getEnd(),k.isBlock))&&parseInt(e.style.paddingLeft,10)>0)return f}return g("InsertUnorderedList")||g("InsertOrderedList")||!M.inline_styles&&!!k.getParent(I.getNode(),"BLOCKQUOTE")},"InsertUnorderedList,InsertOrderedList":function(e){var t=k.getParent(I.getNode(),"ul,ol");return t&&("insertunorderedlist"===e&&"UL"===t.tagName||"insertorderedlist"===e&&"OL"===t.tagName)}},"state"),v({"FontSize,FontName":function(e){var t,n=0;return(t=k.getParent(I.getNode(),"span"))&&(n="fontsize"==e?t.style.fontSize:t.style.fontFamily.replace(/, /g,",").replace(/[\'\"]/g,"").toLowerCase()),n}},"value"),v({Undo:function(){s.undoManager.undo()},Redo:function(){s.undoManager.redo()}})}}),l("tinymce.core.util.URI",["global!document","tinymce.core.util.Tools"],function(e,t){function n(t,s){var a,l,d=this;if(t=r(t),s=d.settings=s||{},a=s.base_uri,/^([\w\-]+):([^\/]{2})/i.test(t)||/^\s*#/.test(t))return void(d.source=t);var u=0===t.indexOf("//");0!==t.indexOf("/")||u||(t=(a?a.protocol||"http":"http")+"://mce_host"+t),/^[\w\-]*:?\/\//.test(t)||(l=s.base_uri?s.base_uri.path:new n(e.location.href).directory,""===s.base_uri.protocol?t="//mce_host"+d.toAbsPath(l,t):(t=/([^#?]*)([#?]?.*)/.exec(t),t=(a&&a.protocol||"http")+"://mce_host"+d.toAbsPath(l,t[1])+t[2])),t=t.replace(/@@/g,"(mce_at)"),t=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(t),o(i,function(e,n){var o=t[n];o&&(o=o.replace(/\(mce_at\)/g,"@@")),d[e]=o}),a&&(d.protocol||(d.protocol=a.protocol),d.userInfo||(d.userInfo=a.userInfo),d.port||"mce_host"!==d.host||(d.port=a.port),d.host&&"mce_host"!==d.host||(d.host=a.host),d.source=""),u&&(d.protocol="")}var o=t.each,r=t.trim,i="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),s={ftp:21,http:80,https:443,mailto:25};return n.prototype={setPath:function(e){var t=this;e=/^(.*?)\/?(\w+)?$/.exec(e),t.path=e[0],t.directory=e[1],t.file=e[2],t.source="",t.getURI()},toRelative:function(e){var t,o=this;if("./"===e)return e;if(e=new n(e,{base_uri:o}),"mce_host"!=e.host&&o.host!=e.host&&e.host||o.port!=e.port||o.protocol!=e.protocol&&""!==e.protocol)return e.getURI();var r=o.getURI(),i=e.getURI();return r==i||"/"==r.charAt(r.length-1)&&r.substr(0,r.length-1)==i?r:(t=o.toRelPath(o.path,e.path),e.query&&(t+="?"+e.query),e.anchor&&(t+="#"+e.anchor),t)},toAbsolute:function(e,t){return e=new n(e,{base_uri:this}),e.getURI(t&&this.isSameOrigin(e))},isSameOrigin:function(e){if(this.host==e.host&&this.protocol==e.protocol){if(this.port==e.port)return!0;var t=s[this.protocol];if(t&&(this.port||t)==(e.port||t))return!0}return!1},toRelPath:function(e,t){var n,o,r,i=0,s="";if(e=e.substring(0,e.lastIndexOf("/")),e=e.split("/"),n=t.split("/"),e.length>=n.length)for(o=0,r=e.length;o<r;o++)if(o>=n.length||e[o]!=n[o]){i=o+1;break}if(e.length<n.length)for(o=0,r=n.length;o<r;o++)if(o>=e.length||e[o]!=n[o]){i=o+1;break}if(1===i)return t;for(o=0,r=e.length-(i-1);o<r;o++)s+="../";for(o=i-1,r=n.length;o<r;o++)s+=o!=i-1?"/"+n[o]:n[o];return s},toAbsPath:function(e,t){var n,r,i,s=0,a=[];for(r=/\/$/.test(t)?"/":"",e=e.split("/"),
t=t.split("/"),o(e,function(e){e&&a.push(e)}),e=a,n=t.length-1,a=[];n>=0;n--)0!==t[n].length&&"."!==t[n]&&(".."!==t[n]?s>0?s--:a.push(t[n]):s++);return n=e.length-s,i=n<=0?a.reverse().join("/"):e.slice(0,n).join("/")+"/"+a.reverse().join("/"),0!==i.indexOf("/")&&(i="/"+i),r&&i.lastIndexOf("/")!==i.length-1&&(i+=r),i},getURI:function(e){var t,n=this;return n.source&&!e||(t="",e||(t+=n.protocol?n.protocol+"://":"//",n.userInfo&&(t+=n.userInfo+"@"),n.host&&(t+=n.host),n.port&&(t+=":"+n.port)),n.path&&(t+=n.path),n.query&&(t+="?"+n.query),n.anchor&&(t+="#"+n.anchor),n.source=t),n.source}},n.parseDataUri=function(e){var t,n;return e=decodeURIComponent(e).split(","),n=/data:([^;]+)/.exec(e[0]),n&&(t=n[1]),{type:t,data:e[1]}},n.getDocumentBaseUrl=function(e){var t;return t=0!==e.protocol.indexOf("http")&&"file:"!==e.protocol?e.href:e.protocol+"//"+e.host+e.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(t)&&(t=t.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(t)||(t+="/")),t},n}),l("tinymce.core.util.Class",["tinymce.core.util.Tools"],function(e){function t(){}var n,o,r=e.each,i=e.extend;return t.extend=n=function(e){function t(){var e,t,n,r=this;if(!o&&(r.init&&r.init.apply(r,arguments),t=r.Mixins))for(e=t.length;e--;)n=t[e],n.init&&n.init.apply(r,arguments)}function s(){return this}function a(e,t){return function(){var n,o=this,r=o._super;return o._super=p[e],n=t.apply(o,arguments),o._super=r,n}}var l,d,u,c=this,p=c.prototype;o=!0,l=new c,o=!1,e.Mixins&&(r(e.Mixins,function(t){for(var n in t)"init"!==n&&(e[n]=t[n])}),p.Mixins&&(e.Mixins=p.Mixins.concat(e.Mixins))),e.Methods&&r(e.Methods.split(","),function(t){e[t]=s}),e.Properties&&r(e.Properties.split(","),function(t){var n="_"+t;e[t]=function(e){var t,o=this;return e!==t?(o[n]=e,o):o[n]}}),e.Statics&&r(e.Statics,function(e,n){t[n]=e}),e.Defaults&&p.Defaults&&(e.Defaults=i({},p.Defaults,e.Defaults));for(d in e)u=e[d],"function"==typeof u&&p[d]?l[d]=a(d,u):l[d]=u;return t.prototype=l,t.constructor=t,t.extend=n,t},t}),l("tinymce.core.util.EventDispatcher",["tinymce.core.util.Tools"],function(e){function t(t){function n(){return!1}function o(){return!0}function r(e,r){var i,a,l,u;if(e=e.toLowerCase(),r=r||{},r.type=e,r.target||(r.target=d),r.preventDefault||(r.preventDefault=function(){r.isDefaultPrevented=o},r.stopPropagation=function(){r.isPropagationStopped=o},r.stopImmediatePropagation=function(){r.isImmediatePropagationStopped=o},r.isDefaultPrevented=n,r.isPropagationStopped=n,r.isImmediatePropagationStopped=n),t.beforeFire&&t.beforeFire(r),i=p[e])for(a=0,l=i.length;a<l;a++){if(u=i[a],u.once&&s(e,u.func),r.isImmediatePropagationStopped())return r.stopPropagation(),r;if(u.func.call(d,r)===!1)return r.preventDefault(),r}return r}function i(t,o,r,i){var s,a,l;if(o===!1&&(o=n),o)for(o={func:o},i&&e.extend(o,i),a=t.toLowerCase().split(" "),l=a.length;l--;)t=a[l],s=p[t],s||(s=p[t]=[],u(t,!0)),r?s.unshift(o):s.push(o);return c}function s(e,t){var n,o,r,i,s;if(e)for(i=e.toLowerCase().split(" "),n=i.length;n--;){if(e=i[n],o=p[e],!e){for(r in p)u(r,!1),delete p[r];return c}if(o){if(t)for(s=o.length;s--;)o[s].func===t&&(o=o.slice(0,s).concat(o.slice(s+1)),p[e]=o);else o.length=0;o.length||(u(e,!1),delete p[e])}}else{for(e in p)u(e,!1);p={}}return c}function a(e,t,n){return i(e,t,n,{once:!0})}function l(e){return e=e.toLowerCase(),!(!p[e]||0===p[e].length)}var d,u,c=this,p={};t=t||{},d=t.scope||c,u=t.toggleEvent||n,c.fire=r,c.on=i,c.off=s,c.once=a,c.has=l}var n=e.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend"," ");return t.isNative=function(e){return!!n[e.toLowerCase()]},t}),l("tinymce.core.util.Observable",["tinymce.core.util.EventDispatcher"],function(e){function t(t){return t._eventDispatcher||(t._eventDispatcher=new e({scope:t,toggleEvent:function(n,o){e.isNative(n)&&t.toggleNativeEvent&&t.toggleNativeEvent(n,o)}})),t._eventDispatcher}return{fire:function(e,n,o){var r=this;if(r.removed&&"remove"!==e)return n;if(n=t(r).fire(e,n,o),o!==!1&&r.parent)for(var i=r.parent();i&&!n.isPropagationStopped();)i.fire(e,n,!1),i=i.parent();return n},on:function(e,n,o){return t(this).on(e,n,o)},off:function(e,n){return t(this).off(e,n)},once:function(e,n){return t(this).once(e,n)},hasEventListeners:function(e){return t(this).has(e)}}}),l("tinymce.core.data.Binding",[],function(){function e(e){this.create=e.create}return e.create=function(t,n){return new e({create:function(e,o){function r(t){e.set(o,t.value)}function i(e){t.set(n,e.value)}var s;return e.on("change:"+o,i),t.on("change:"+n,r),s=e._bindings,s||(s=e._bindings=[],e.on("destroy",function(){for(var e=s.length;e--;)s[e]()})),s.push(function(){t.off("change:"+n,r)}),t.get(n)}})},e}),l("tinymce.core.data.ObservableObject",["tinymce.core.data.Binding","tinymce.core.util.Class","tinymce.core.util.Observable","tinymce.core.util.Tools"],function(e,t,n,o){function r(e){return e.nodeType>0}function i(e,t){var n,s;if(e===t)return!0;if(null===e||null===t)return e===t;if("object"!=typeof e||"object"!=typeof t)return e===t;if(o.isArray(t)){if(e.length!==t.length)return!1;for(n=e.length;n--;)if(!i(e[n],t[n]))return!1}if(r(e)||r(t))return e===t;s={};for(n in t){if(!i(e[n],t[n]))return!1;s[n]=!0}for(n in e)if(!s[n]&&!i(e[n],t[n]))return!1;return!0}return t.extend({Mixins:[n],init:function(t){var n,o;t=t||{};for(n in t)o=t[n],o instanceof e&&(t[n]=o.create(this,n));this.data=t},set:function(t,n){var o,r,s=this.data[t];if(n instanceof e&&(n=n.create(this,t)),"object"==typeof t){for(o in t)this.set(o,t[o]);return this}return i(s,n)||(this.data[t]=n,r={target:this,name:t,value:n,oldValue:s},this.fire("change:"+t,r),this.fire("change",r)),this},get:function(e){return this.data[e]},has:function(e){return e in this.data},bind:function(t){return e.create(this,t)},destroy:function(){this.fire("destroy")}})}),l("tinymce.core.ui.Selector",["tinymce.core.util.Class"],function(e){"use strict";function t(e){for(var t,n=[],o=e.length;o--;)t=e[o],t.__checked||(n.push(t),t.__checked=1);for(o=n.length;o--;)delete n[o].__checked;return n}var n,o=/^([\w\\*]+)?(?:#([\w\-\\]+))?(?:\.([\w\\\.]+))?(?:\[\@?([\w\\]+)([\^\$\*!~]?=)([\w\\]+)\])?(?:\:(.+))?/i,r=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,i=/^\s*|\s*$/g,s=e.extend({init:function(e){function t(e){if(e)return e=e.toLowerCase(),function(t){return"*"===e||t.type===e}}function n(e){if(e)return function(t){return t._name===e}}function s(e){if(e)return e=e.split("."),function(t){for(var n=e.length;n--;)if(!t.classes.contains(e[n]))return!1;return!0}}function a(e,t,n){if(e)return function(o){var r=o[e]?o[e]():"";return t?"="===t?r===n:"*="===t?r.indexOf(n)>=0:"~="===t?(" "+r+" ").indexOf(" "+n+" ")>=0:"!="===t?r!=n:"^="===t?0===r.indexOf(n):"$="===t&&r.substr(r.length-n.length)===n:!!n}}function l(e){var t;if(e)return e=/(?:not\((.+)\))|(.+)/i.exec(e),e[1]?(t=u(e[1],[]),function(e){return!c(e,t)}):(e=e[2],function(t,n,o){return"first"===e?0===n:"last"===e?n===o-1:"even"===e?n%2===0:"odd"===e?n%2===1:!!t[e]&&t[e]()})}function d(e,r,d){function u(e){e&&r.push(e)}var c;return c=o.exec(e.replace(i,"")),u(t(c[1])),u(n(c[2])),u(s(c[3])),u(a(c[4],c[5],c[6])),u(l(c[7])),r.pseudo=!!c[7],r.direct=d,r}function u(e,t){var n,o,i,s=[];do if(r.exec(""),o=r.exec(e),o&&(e=o[3],s.push(o[1]),o[2])){n=o[3];break}while(o);for(n&&u(n,t),e=[],i=0;i<s.length;i++)">"!=s[i]&&e.push(d(s[i],[],">"===s[i-1]));return t.push(e),t}var c=this.match;this._selectors=u(e,[])},match:function(e,t){var n,o,r,i,s,a,l,d,u,c,p,f,m;for(t=t||this._selectors,n=0,o=t.length;n<o;n++){for(s=t[n],i=s.length,m=e,f=0,r=i-1;r>=0;r--)for(d=s[r];m;){if(d.pseudo)for(p=m.parent().items(),u=c=p.length;u--&&p[u]!==m;);for(a=0,l=d.length;a<l;a++)if(!d[a](m,u,c)){a=l+1;break}if(a===l){f++;break}if(r===i-1)break;m=m.parent()}if(f===i)return!0}return!1},find:function(e){function o(e,t,n){var r,i,s,l,d,u=t[n];for(r=0,i=e.length;r<i;r++){for(d=e[r],s=0,l=u.length;s<l;s++)if(!u[s](d,r,i)){s=l+1;break}if(s===l)n==t.length-1?a.push(d):d.items&&o(d.items(),t,n+1);else if(u.direct)return;d.items&&o(d.items(),t,n)}}var r,i,a=[],l=this._selectors;if(e.items){for(r=0,i=l.length;r<i;r++)o(e.items(),l[r],0);i>1&&(a=t(a))}return n||(n=s.Collection),new n(a)}});return s}),l("tinymce.core.ui.Collection",["tinymce.core.util.Tools","tinymce.core.ui.Selector","tinymce.core.util.Class"],function(e,t,n){"use strict";var o,r,i=Array.prototype.push,s=Array.prototype.slice;return r={length:0,init:function(e){e&&this.add(e)},add:function(t){var n=this;return e.isArray(t)?i.apply(n,t):t instanceof o?n.add(t.toArray()):i.call(n,t),n},set:function(e){var t,n=this,o=n.length;for(n.length=0,n.add(e),t=n.length;t<o;t++)delete n[t];return n},filter:function(e){var n,r,i,s,a=this,l=[];for("string"==typeof e?(e=new t(e),s=function(t){return e.match(t)}):s=e,n=0,r=a.length;n<r;n++)i=a[n],s(i)&&l.push(i);return new o(l)},slice:function(){return new o(s.apply(this,arguments))},eq:function(e){return e===-1?this.slice(e):this.slice(e,+e+1)},each:function(t){return e.each(this,t),this},toArray:function(){return e.toArray(this)},indexOf:function(e){for(var t=this,n=t.length;n--&&t[n]!==e;);return n},reverse:function(){return new o(e.toArray(this).reverse())},hasClass:function(e){return!!this[0]&&this[0].classes.contains(e)},prop:function(e,t){var n,o,r=this;return t!==n?(r.each(function(n){n[e]&&n[e](t)}),r):(o=r[0],o&&o[e]?o[e]():void 0)},exec:function(t){var n=this,o=e.toArray(arguments).slice(1);return n.each(function(e){e[t]&&e[t].apply(e,o)}),n},remove:function(){for(var e=this.length;e--;)this[e].remove();return this},addClass:function(e){return this.each(function(t){t.classes.add(e)})},removeClass:function(e){return this.each(function(t){t.classes.remove(e)})}},e.each("fire on off show hide append prepend before after reflow".split(" "),function(t){r[t]=function(){var n=e.toArray(arguments);return this.each(function(e){t in e&&e[t].apply(e,n)}),this}}),e.each("text name disabled active selected checked visible parent value data".split(" "),function(e){r[e]=function(t){return this.prop(e,t)}}),o=n.extend(r),t.Collection=o,o}),l("tinymce.core.ui.DomUtils",["tinymce.core.Env","tinymce.core.util.Tools","tinymce.core.dom.DOMUtils"],function(e,t,n){"use strict";var o=0,r={id:function(){return"mceu_"+o++},create:function(e,o,r){var i=document.createElement(e);return n.DOM.setAttribs(i,o),"string"==typeof r?i.innerHTML=r:t.each(r,function(e){e.nodeType&&i.appendChild(e)}),i},createFragment:function(e){return n.DOM.createFragment(e)},getWindowSize:function(){return n.DOM.getViewPort()},getSize:function(e){var t,n;if(e.getBoundingClientRect){var o=e.getBoundingClientRect();t=Math.max(o.width||o.right-o.left,e.offsetWidth),n=Math.max(o.height||o.bottom-o.bottom,e.offsetHeight)}else t=e.offsetWidth,n=e.offsetHeight;return{width:t,height:n}},getPos:function(e,t){return n.DOM.getPos(e,t||r.getContainer())},getContainer:function(){return e.container?e.container:document.body},getViewPort:function(e){return n.DOM.getViewPort(e)},get:function(e){return document.getElementById(e)},addClass:function(e,t){return n.DOM.addClass(e,t)},removeClass:function(e,t){return n.DOM.removeClass(e,t)},hasClass:function(e,t){return n.DOM.hasClass(e,t)},toggleClass:function(e,t,o){return n.DOM.toggleClass(e,t,o)},css:function(e,t,o){return n.DOM.setStyle(e,t,o)},getRuntimeStyle:function(e,t){return n.DOM.getStyle(e,t,!0)},on:function(e,t,o,r){return n.DOM.bind(e,t,o,r)},off:function(e,t,o){return n.DOM.unbind(e,t,o)},fire:function(e,t,o){return n.DOM.fire(e,t,o)},innerHtml:function(e,t){n.DOM.setHTML(e,t)}};return r}),l("tinymce.core.ui.BoxUtils",[],function(){"use strict";return{parseBox:function(e){var t,n=10;if(e)return"number"==typeof e?(e=e||0,{top:e,left:e,bottom:e,right:e}):(e=e.split(" "),t=e.length,1===t?e[1]=e[2]=e[3]=e[0]:2===t?(e[2]=e[0],e[3]=e[1]):3===t&&(e[3]=e[1]),{top:parseInt(e[0],n)||0,right:parseInt(e[1],n)||0,bottom:parseInt(e[2],n)||0,left:parseInt(e[3],n)||0})},measureBox:function(e,t){function n(t){var n=document.defaultView;return n?(t=t.replace(/[A-Z]/g,function(e){return"-"+e}),n.getComputedStyle(e,null).getPropertyValue(t)):e.currentStyle[t]}function o(e){var t=parseFloat(n(e),10);return isNaN(t)?0:t}return{top:o(t+"TopWidth"),right:o(t+"RightWidth"),bottom:o(t+"BottomWidth"),left:o(t+"LeftWidth")}}}}),l("tinymce.core.ui.ClassList",["tinymce.core.util.Tools"],function(e){"use strict";function t(){}function n(e){this.cls=[],this.cls._map={},this.onchange=e||t,this.prefix=""}return e.extend(n.prototype,{add:function(e){return e&&!this.contains(e)&&(this.cls._map[e]=!0,this.cls.push(e),this._change()),this},remove:function(e){if(this.contains(e)){for(var t=0;t<this.cls.length&&this.cls[t]!==e;t++);this.cls.splice(t,1),delete this.cls._map[e],this._change()}return this},toggle:function(e,t){var n=this.contains(e);return n!==t&&(n?this.remove(e):this.add(e),this._change()),this},contains:function(e){return!!this.cls._map[e]},_change:function(){delete this.clsValue,this.onchange.call(this)}}),n.prototype.toString=function(){var e;if(this.clsValue)return this.clsValue;e="";for(var t=0;t<this.cls.length;t++)t>0&&(e+=" "),e+=this.prefix+this.cls[t];return e},n}),l("tinymce.core.ui.ReflowQueue",["tinymce.core.util.Delay"],function(e){var t,n={};return{add:function(o){var r=o.parent();if(r){if(!r._layout||r._layout.isNative())return;n[r._id]||(n[r._id]=r),t||(t=!0,e.requestAnimationFrame(function(){var e,o;t=!1;for(e in n)o=n[e],o.state.get("rendered")&&o.reflow();n={}},document.body))}},remove:function(e){n[e._id]&&delete n[e._id]}}}),l("tinymce.core.ui.Control",["tinymce.core.util.Class","tinymce.core.util.Tools","tinymce.core.util.EventDispatcher","tinymce.core.data.ObservableObject","tinymce.core.ui.Collection","tinymce.core.ui.DomUtils","tinymce.core.dom.DomQuery","tinymce.core.ui.BoxUtils","tinymce.core.ui.ClassList","tinymce.core.ui.ReflowQueue"],function(e,t,n,o,r,i,s,a,l,d){"use strict";function u(e){return e._eventDispatcher||(e._eventDispatcher=new n({scope:e,toggleEvent:function(t,o){o&&n.isNative(t)&&(e._nativeEvents||(e._nativeEvents={}),e._nativeEvents[t]=!0,e.state.get("rendered")&&c(e))}})),e._eventDispatcher}function c(e){function t(t){var n=e.getParentCtrl(t.target);n&&n.fire(t.type,t)}function n(){var e=d._lastHoverCtrl;e&&(e.fire("mouseleave",{target:e.getEl()}),e.parents().each(function(e){e.fire("mouseleave",{target:e.getEl()})}),d._lastHoverCtrl=null)}function o(t){var n,o,r,i=e.getParentCtrl(t.target),s=d._lastHoverCtrl,a=0;if(i!==s){if(d._lastHoverCtrl=i,o=i.parents().toArray().reverse(),o.push(i),s){for(r=s.parents().toArray().reverse(),r.push(s),a=0;a<r.length&&o[a]===r[a];a++);for(n=r.length-1;n>=a;n--)s=r[n],s.fire("mouseleave",{target:s.getEl()})}for(n=a;n<o.length;n++)i=o[n],i.fire("mouseenter",{target:i.getEl()})}}function r(t){t.preventDefault(),"mousewheel"==t.type?(t.deltaY=-.025*t.wheelDelta,t.wheelDeltaX&&(t.deltaX=-.025*t.wheelDeltaX)):(t.deltaX=0,t.deltaY=t.detail),t=e.fire("wheel",t)}var i,a,l,d,u,c;if(u=e._nativeEvents){for(l=e.parents().toArray(),l.unshift(e),i=0,a=l.length;!d&&i<a;i++)d=l[i]._eventsRoot;for(d||(d=l[l.length-1]||e),e._eventsRoot=d,a=i,i=0;i<a;i++)l[i]._eventsRoot=d;var p=d._delegates;p||(p=d._delegates={});for(c in u){if(!u)return!1;"wheel"!==c||m?("mouseenter"===c||"mouseleave"===c?d._hasMouseEnter||(s(d.getEl()).on("mouseleave",n).on("mouseover",o),d._hasMouseEnter=1):p[c]||(s(d.getEl()).on(c,t),p[c]=!0),u[c]=!1):f?s(e.getEl()).on("mousewheel",r):s(e.getEl()).on("DOMMouseScroll",r)}}}var p,f="onmousewheel"in document,m=!1,h="mce-",g=0,y={Statics:{classPrefix:h},isRtl:function(){return p.rtl},classPrefix:h,init:function(e){function n(e){var t;for(e=e.split(" "),t=0;t<e.length;t++)d.classes.add(e[t])}var r,i,d=this;d.settings=e=t.extend({},d.Defaults,e),d._id=e.id||"mceu_"+g++,d._aria={role:e.role},d._elmCache={},d.$=s,d.state=new o({visible:!0,active:!1,disabled:!1,value:""}),d.data=new o(e.data),d.classes=new l(function(){d.state.get("rendered")&&(d.getEl().className=this.toString())}),d.classes.prefix=d.classPrefix,r=e.classes,r&&(d.Defaults&&(i=d.Defaults.classes,i&&r!=i&&n(i)),n(r)),t.each("title text name visible disabled active value".split(" "),function(t){t in e&&d[t](e[t])}),d.on("click",function(){if(d.disabled())return!1}),d.settings=e,d.borderBox=a.parseBox(e.border),d.paddingBox=a.parseBox(e.padding),d.marginBox=a.parseBox(e.margin),e.hidden&&d.hide()},Properties:"parent,name",getContainerElm:function(){return i.getContainer()},getParentCtrl:function(e){for(var t,n=this.getRoot().controlIdLookup;e&&n&&!(t=n[e.id]);)e=e.parentNode;return t},initLayoutRect:function(){var e,t,n,o,r,s,l,d,u,c,p=this,f=p.settings,m=p.getEl();e=p.borderBox=p.borderBox||a.measureBox(m,"border"),p.paddingBox=p.paddingBox||a.measureBox(m,"padding"),p.marginBox=p.marginBox||a.measureBox(m,"margin"),c=i.getSize(m),d=f.minWidth,u=f.minHeight,r=d||c.width,s=u||c.height,n=f.width,o=f.height,l=f.autoResize,l="undefined"!=typeof l?l:!n&&!o,n=n||r,o=o||s;var h=e.left+e.right,g=e.top+e.bottom,y=f.maxWidth||65535,v=f.maxHeight||65535;return p._layoutRect=t={x:f.x||0,y:f.y||0,w:n,h:o,deltaW:h,deltaH:g,contentW:n-h,contentH:o-g,innerW:n-h,innerH:o-g,startMinWidth:d||0,startMinHeight:u||0,minW:Math.min(r,y),minH:Math.min(s,v),maxW:y,maxH:v,autoResize:l,scrollW:0},p._lastLayoutRect={},t},layoutRect:function(e){var t,n,o,r,i,s,a=this,l=a._layoutRect;return l||(l=a.initLayoutRect()),e?(o=l.deltaW,r=l.deltaH,e.x!==i&&(l.x=e.x),e.y!==i&&(l.y=e.y),e.minW!==i&&(l.minW=e.minW),e.minH!==i&&(l.minH=e.minH),n=e.w,n!==i&&(n=n<l.minW?l.minW:n,n=n>l.maxW?l.maxW:n,l.w=n,l.innerW=n-o),n=e.h,n!==i&&(n=n<l.minH?l.minH:n,n=n>l.maxH?l.maxH:n,l.h=n,l.innerH=n-r),n=e.innerW,n!==i&&(n=n<l.minW-o?l.minW-o:n,n=n>l.maxW-o?l.maxW-o:n,l.innerW=n,l.w=n+o),n=e.innerH,n!==i&&(n=n<l.minH-r?l.minH-r:n,n=n>l.maxH-r?l.maxH-r:n,l.innerH=n,l.h=n+r),e.contentW!==i&&(l.contentW=e.contentW),e.contentH!==i&&(l.contentH=e.contentH),t=a._lastLayoutRect,t.x===l.x&&t.y===l.y&&t.w===l.w&&t.h===l.h||(s=p.repaintControls,s&&s.map&&!s.map[a._id]&&(s.push(a),s.map[a._id]=!0),t.x=l.x,t.y=l.y,t.w=l.w,t.h=l.h),a):l},repaint:function(){var e,t,n,o,r,i,s,a,l,d,u=this;l=document.createRange?function(e){return e}:Math.round,e=u.getEl().style,o=u._layoutRect,a=u._lastRepaintRect||{},r=u.borderBox,i=r.left+r.right,s=r.top+r.bottom,o.x!==a.x&&(e.left=l(o.x)+"px",a.x=o.x),o.y!==a.y&&(e.top=l(o.y)+"px",a.y=o.y),o.w!==a.w&&(d=l(o.w-i),e.width=(d>=0?d:0)+"px",a.w=o.w),o.h!==a.h&&(d=l(o.h-s),e.height=(d>=0?d:0)+"px",a.h=o.h),u._hasBody&&o.innerW!==a.innerW&&(d=l(o.innerW),n=u.getEl("body"),n&&(t=n.style,t.width=(d>=0?d:0)+"px"),a.innerW=o.innerW),u._hasBody&&o.innerH!==a.innerH&&(d=l(o.innerH),n=n||u.getEl("body"),n&&(t=t||n.style,t.height=(d>=0?d:0)+"px"),a.innerH=o.innerH),u._lastRepaintRect=a,u.fire("repaint",{},!1)},updateLayoutRect:function(){var e=this;e.parent()._lastRect=null,i.css(e.getEl(),{width:"",height:""}),e._layoutRect=e._lastRepaintRect=e._lastLayoutRect=null,e.initLayoutRect()},on:function(e,t){function n(e){var t,n;return"string"!=typeof e?e:function(r){return t||o.parentsAndSelf().each(function(o){var r=o.settings.callbacks;if(r&&(t=r[e]))return n=o,!1}),t?t.call(n,r):(r.action=e,void this.fire("execute",r))}}var o=this;return u(o).on(e,n(t)),o},off:function(e,t){return u(this).off(e,t),this},fire:function(e,t,n){var o=this;if(t=t||{},t.control||(t.control=o),t=u(o).fire(e,t),n!==!1&&o.parent)for(var r=o.parent();r&&!t.isPropagationStopped();)r.fire(e,t,!1),r=r.parent();return t},hasEventListeners:function(e){return u(this).has(e)},parents:function(e){var t,n=this,o=new r;for(t=n.parent();t;t=t.parent())o.add(t);return e&&(o=o.filter(e)),o},parentsAndSelf:function(e){return new r(this).add(this.parents(e))},next:function(){var e=this.parent().items();return e[e.indexOf(this)+1]},prev:function(){var e=this.parent().items();return e[e.indexOf(this)-1]},innerHtml:function(e){return this.$el.html(e),this},getEl:function(e){var t=e?this._id+"-"+e:this._id;return this._elmCache[t]||(this._elmCache[t]=s("#"+t)[0]),this._elmCache[t]},show:function(){return this.visible(!0)},hide:function(){return this.visible(!1)},focus:function(){try{this.getEl().focus()}catch(e){}return this},blur:function(){return this.getEl().blur(),this},aria:function(e,t){var n=this,o=n.getEl(n.ariaTarget);return"undefined"==typeof t?n._aria[e]:(n._aria[e]=t,n.state.get("rendered")&&o.setAttribute("role"==e?e:"aria-"+e,t),n)},encode:function(e,t){return t!==!1&&(e=this.translate(e)),(e||"").replace(/[&<>"]/g,function(e){return"&#"+e.charCodeAt(0)+";"})},translate:function(e){return p.translate?p.translate(e):e},before:function(e){var t=this,n=t.parent();return n&&n.insert(e,n.items().indexOf(t),!0),t},after:function(e){var t=this,n=t.parent();return n&&n.insert(e,n.items().indexOf(t)),t},remove:function(){var e,t,n=this,o=n.getEl(),r=n.parent();if(n.items){var i=n.items().toArray();for(t=i.length;t--;)i[t].remove()}r&&r.items&&(e=[],r.items().each(function(t){t!==n&&e.push(t)}),r.items().set(e),r._lastRect=null),n._eventsRoot&&n._eventsRoot==n&&s(o).off();var a=n.getRoot().controlIdLookup;return a&&delete a[n._id],o&&o.parentNode&&o.parentNode.removeChild(o),n.state.set("rendered",!1),n.state.destroy(),n.fire("remove"),n},renderBefore:function(e){return s(e).before(this.renderHtml()),this.postRender(),this},renderTo:function(e){return s(e||this.getContainerElm()).append(this.renderHtml()),this.postRender(),this},preRender:function(){},render:function(){},renderHtml:function(){return'<div id="'+this._id+'" class="'+this.classes+'"></div>'},postRender:function(){var e,t,n,o,r,i=this,a=i.settings;i.$el=s(i.getEl()),i.state.set("rendered",!0);for(o in a)0===o.indexOf("on")&&i.on(o.substr(2),a[o]);if(i._eventsRoot){for(n=i.parent();!r&&n;n=n.parent())r=n._eventsRoot;if(r)for(o in r._nativeEvents)i._nativeEvents[o]=!0}c(i),a.style&&(e=i.getEl(),e&&(e.setAttribute("style",a.style),e.style.cssText=a.style)),i.settings.border&&(t=i.borderBox,i.$el.css({"border-top-width":t.top,"border-right-width":t.right,"border-bottom-width":t.bottom,"border-left-width":t.left}));var l=i.getRoot();l.controlIdLookup||(l.controlIdLookup={}),l.controlIdLookup[i._id]=i;for(var u in i._aria)i.aria(u,i._aria[u]);i.state.get("visible")===!1&&(i.getEl().style.display="none"),i.bindStates(),i.state.on("change:visible",function(e){var t,n=e.value;i.state.get("rendered")&&(i.getEl().style.display=n===!1?"none":"",i.getEl().getBoundingClientRect()),t=i.parent(),t&&(t._lastRect=null),i.fire(n?"show":"hide"),d.add(i)}),i.fire("postrender",{},!1)},bindStates:function(){},scrollIntoView:function(e){function t(e,t){var n,o,r=e;for(n=o=0;r&&r!=t&&r.nodeType;)n+=r.offsetLeft||0,o+=r.offsetTop||0,r=r.offsetParent;return{x:n,y:o}}var n,o,r,i,s,a,l=this.getEl(),d=l.parentNode,u=t(l,d);return n=u.x,o=u.y,r=l.offsetWidth,i=l.offsetHeight,s=d.clientWidth,a=d.clientHeight,"end"==e?(n-=s-r,o-=a-i):"center"==e&&(n-=s/2-r/2,o-=a/2-i/2),d.scrollLeft=n,d.scrollTop=o,this},getRoot:function(){for(var e,t=this,n=[];t;){if(t.rootControl){e=t.rootControl;break}n.push(t),e=t,t=t.parent()}e||(e=this);for(var o=n.length;o--;)n[o].rootControl=e;return e},reflow:function(){d.remove(this);var e=this.parent();return e&&e._layout&&!e._layout.isNative()&&e.reflow(),this}};return t.each("text title visible disabled active value".split(" "),function(e){y[e]=function(t){return 0===arguments.length?this.state.get(e):("undefined"!=typeof t&&this.state.set(e,t),this)}}),p=e.extend(y)}),l("tinymce.core.ui.Factory",[],function(){"use strict";var e={};return{add:function(t,n){e[t.toLowerCase()]=n},has:function(t){return!!e[t.toLowerCase()]},create:function(t,n){var o;if("string"==typeof t?(n=n||{},n.type=t):(n=t,t=n.type),t=t.toLowerCase(),o=e[t],!o)throw new Error("Could not find control by type: "+t);return o=new o(n),o.type=t,o}}}),l("tinymce.core.ui.KeyboardNavigation",[],function(){"use strict";var e=function(e){return!!e.getAttribute("data-mce-tabstop")};return function(t){function n(e){return e&&1===e.nodeType}function o(e){return e=e||_,n(e)?e.getAttribute("role"):null}function r(e){for(var t,n=e||_;n=n.parentNode;)if(t=o(n))return t}function i(e){var t=_;if(n(t))return t.getAttribute("aria-"+e)}function s(e){var t=e.tagName.toUpperCase();return"INPUT"==t||"TEXTAREA"==t||"SELECT"==t}function a(t){return!(!s(t)||t.hidden)||(!!e(t)||!!/^(button|menuitem|checkbox|tab|menuitemcheckbox|option|gridcell|slider)$/.test(o(t)))}function l(e){function t(e){if(1==e.nodeType&&"none"!=e.style.display&&!e.disabled){a(e)&&n.push(e);for(var o=0;o<e.childNodes.length;o++)t(e.childNodes[o])}}var n=[];return t(e||C.getEl()),n}function d(e){var t,n;e=e||x,n=e.parents().toArray(),n.unshift(e);for(var o=0;o<n.length&&(t=n[o],!t.settings.ariaRoot);o++);return t}function u(e){var t=d(e),n=l(t.getEl());t.settings.ariaRemember&&"lastAriaIndex"in t?c(t.lastAriaIndex,n):c(0,n)}function c(e,t){return e<0?e=t.length-1:e>=t.length&&(e=0),t[e]&&t[e].focus(),e}function p(e,t){var n=-1,o=d();t=t||l(o.getEl());for(var r=0;r<t.length;r++)t[r]===_&&(n=r);n+=e,o.lastAriaIndex=c(n,t)}function f(){var e=r();"tablist"==e?p(-1,l(_.parentNode)):x.parent().submenu?v():p(-1)}function m(){var e=o(),t=r();"tablist"==t?p(1,l(_.parentNode)):"menuitem"==e&&"menu"==t&&i("haspopup")?b():p(1)}function h(){p(-1)}function g(){var e=o(),t=r();"menuitem"==e&&"menubar"==t?b():"button"==e&&i("haspopup")?b({key:"down"}):p(1)}function y(e){var t=r();if("tablist"==t){var n=l(x.getEl("body"))[0];n&&n.focus()}else p(e.shiftKey?-1:1)}function v(){x.fire("cancel")}function b(e){e=e||{},x.fire("click",{target:_,aria:e})}var _,x,C=t.root;try{_=document.activeElement}catch(e){_=document.body}return x=C.getParentCtrl(_),C.on("keydown",function(t){function n(t,n){s(_)||e(_)||"slider"!==o(_)&&n(t)!==!1&&t.preventDefault()}if(!t.isDefaultPrevented())switch(t.keyCode){case 37:n(t,f);break;case 39:n(t,m);break;case 38:n(t,h);break;case 40:n(t,g);break;case 27:v();break;case 14:case 13:case 32:n(t,b);break;case 9:y(t)!==!1&&t.preventDefault()}}),C.on("focusin",function(e){_=e.target,x=e.control}),{focusFirst:u}}}),l("tinymce.core.ui.Container",["tinymce.core.ui.Control","tinymce.core.ui.Collection","tinymce.core.ui.Selector","tinymce.core.ui.Factory","tinymce.core.ui.KeyboardNavigation","tinymce.core.util.Tools","tinymce.core.dom.DomQuery","tinymce.core.ui.ClassList","tinymce.core.ui.ReflowQueue"],function(e,t,n,o,r,i,s,a,l){"use strict";var d={};return e.extend({init:function(e){var n=this;n._super(e),e=n.settings,e.fixed&&n.state.set("fixed",!0),n._items=new t,n.isRtl()&&n.classes.add("rtl"),n.bodyClasses=new a(function(){n.state.get("rendered")&&(n.getEl("body").className=this.toString())}),n.bodyClasses.prefix=n.classPrefix,n.classes.add("container"),n.bodyClasses.add("container-body"),e.containerCls&&n.classes.add(e.containerCls),n._layout=o.create((e.layout||"")+"layout"),n.settings.items?n.add(n.settings.items):n.add(n.render()),n._hasBody=!0},items:function(){return this._items},find:function(e){return e=d[e]=d[e]||new n(e),e.find(this)},add:function(e){var t=this;return t.items().add(t.create(e)).parent(t),t},focus:function(e){var t,n,o,r=this;return e&&(n=r.keyboardNav||r.parents().eq(-1)[0].keyboardNav)?void n.focusFirst(r):(o=r.find("*"),r.statusbar&&o.add(r.statusbar.items()),o.each(function(e){return e.settings.autofocus?(t=null,!1):void(e.canFocus&&(t=t||e))}),t&&t.focus(),r)},replace:function(e,t){for(var n,o=this.items(),r=o.length;r--;)if(o[r]===e){o[r]=t;break}r>=0&&(n=t.getEl(),n&&n.parentNode.removeChild(n),n=e.getEl(),n&&n.parentNode.removeChild(n)),t.parent(this)},create:function(t){var n,r=this,s=[];return i.isArray(t)||(t=[t]),i.each(t,function(t){t&&(t instanceof e||("string"==typeof t&&(t={type:t}),n=i.extend({},r.settings.defaults,t),t.type=n.type=n.type||t.type||r.settings.defaultType||(n.defaults?n.defaults.type:null),t=o.create(n)),s.push(t))}),s},renderNew:function(){var e=this;return e.items().each(function(t,n){var o;t.parent(e),t.state.get("rendered")||(o=e.getEl("body"),o.hasChildNodes()&&n<=o.childNodes.length-1?s(o.childNodes[n]).before(t.renderHtml()):s(o).append(t.renderHtml()),t.postRender(),l.add(t))}),e._layout.applyClasses(e.items().filter(":visible")),e._lastRect=null,e},append:function(e){return this.add(e).renderNew()},prepend:function(e){var t=this;return t.items().set(t.create(e).concat(t.items().toArray())),t.renderNew()},insert:function(e,t,n){var o,r,i,s=this;return e=s.create(e),o=s.items(),!n&&t<o.length-1&&(t+=1),t>=0&&t<o.length&&(r=o.slice(0,t).toArray(),i=o.slice(t).toArray(),o.set(r.concat(e,i))),s.renderNew()},fromJSON:function(e){var t=this;for(var n in e)t.find("#"+n).value(e[n]);return t},toJSON:function(){var e=this,t={};return e.find("*").each(function(e){var n=e.name(),o=e.value();n&&"undefined"!=typeof o&&(t[n]=o)}),t},renderHtml:function(){var e=this,t=e._layout,n=this.settings.role;return e.preRender(),t.preRender(e),'<div id="'+e._id+'" class="'+e.classes+'"'+(n?' role="'+this.settings.role+'"':"")+'><div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+(e.settings.html||"")+t.renderHtml(e)+"</div></div>"},postRender:function(){var e,t=this;return t.items().exec("postRender"),t._super(),t._layout.postRender(t),t.state.set("rendered",!0),t.settings.style&&t.$el.css(t.settings.style),t.settings.border&&(e=t.borderBox,t.$el.css({"border-top-width":e.top,"border-right-width":e.right,"border-bottom-width":e.bottom,"border-left-width":e.left})),t.parent()||(t.keyboardNav=new r({root:t})),t},initLayoutRect:function(){var e=this,t=e._super();return e._layout.recalc(e),t},recalc:function(){var e=this,t=e._layoutRect,n=e._lastRect;if(!n||n.w!=t.w||n.h!=t.h)return e._layout.recalc(e),t=e.layoutRect(),e._lastRect={x:t.x,y:t.y,w:t.w,h:t.h},!0},reflow:function(){var t;if(l.remove(this),this.visible()){for(e.repaintControls=[],e.repaintControls.map={},this.recalc(),t=e.repaintControls.length;t--;)e.repaintControls[t].repaint();"flow"!==this.settings.layout&&"stack"!==this.settings.layout&&this.repaint(),e.repaintControls=[]}return this}})}),l("tinymce.core.ui.DragHelper",["tinymce.core.dom.DomQuery"],function(e){"use strict";function t(e){var t,n,o,r,i,s,a,l,d=Math.max;return t=e.documentElement,n=e.body,o=d(t.scrollWidth,n.scrollWidth),r=d(t.clientWidth,n.clientWidth),i=d(t.offsetWidth,n.offsetWidth),s=d(t.scrollHeight,n.scrollHeight),a=d(t.clientHeight,n.clientHeight),l=d(t.offsetHeight,n.offsetHeight),{width:o<i?r:o,height:s<l?a:s}}function n(e){var t,n;if(e.changedTouches)for(t="screenX screenY pageX pageY clientX clientY".split(" "),n=0;n<t.length;n++)e[t[n]]=e.changedTouches[0][t[n]]}return function(o,r){function i(){return f.getElementById(r.handle||o)}var s,a,l,d,u,c,p,f=r.document||document;r=r||{},l=function(o){var l,m,h=t(f);n(o),o.preventDefault(),a=o.button,l=i(),c=o.screenX,p=o.screenY,m=window.getComputedStyle?window.getComputedStyle(l,null).getPropertyValue("cursor"):l.runtimeStyle.cursor,s=e("<div></div>").css({position:"absolute",top:0,left:0,width:h.width,height:h.height,zIndex:2147483647,opacity:1e-4,cursor:m}).appendTo(f.body),e(f).on("mousemove touchmove",u).on("mouseup touchend",d),r.start(o)},u=function(e){return n(e),e.button!==a?d(e):(e.deltaX=e.screenX-c,e.deltaY=e.screenY-p,e.preventDefault(),void r.drag(e))},d=function(t){n(t),e(f).off("mousemove touchmove",u).off("mouseup touchend",d),s.remove(),r.stop&&r.stop(t)},this.destroy=function(){e(i()).off()},e(i()).on("mousedown touchstart",l)}}),l("tinymce.core.ui.Scrollable",["tinymce.core.dom.DomQuery","tinymce.core.ui.DragHelper"],function(e,t){"use strict";return{init:function(){var e=this;e.on("repaint",e.renderScroll)},renderScroll:function(){function n(){
function t(t,s,a,l,d,u){var c,p,f,m,h,g,y,v,b;if(p=r.getEl("scroll"+t)){if(v=s.toLowerCase(),b=a.toLowerCase(),e(r.getEl("absend")).css(v,r.layoutRect()[l]-1),!d)return void e(p).css("display","none");e(p).css("display","block"),c=r.getEl("body"),f=r.getEl("scroll"+t+"t"),m=c["client"+a]-2*i,m-=n&&o?p["client"+u]:0,h=c["scroll"+a],g=m/h,y={},y[v]=c["offset"+s]+i,y[b]=m,e(p).css(y),y={},y[v]=c["scroll"+s]*g,y[b]=m*g,e(f).css(y)}}var n,o,s;s=r.getEl("body"),n=s.scrollWidth>s.clientWidth,o=s.scrollHeight>s.clientHeight,t("h","Left","Width","contentW",n,"Height"),t("v","Top","Height","contentH",o,"Width")}function o(){function n(n,o,s,a,l){var d,u=r._id+"-scroll"+n,c=r.classPrefix;e(r.getEl()).append('<div id="'+u+'" class="'+c+"scrollbar "+c+"scrollbar-"+n+'"><div id="'+u+'t" class="'+c+'scrollbar-thumb"></div></div>'),r.draghelper=new t(u+"t",{start:function(){d=r.getEl("body")["scroll"+o],e("#"+u).addClass(c+"active")},drag:function(e){var t,u,c,p,f=r.layoutRect();u=f.contentW>f.innerW,c=f.contentH>f.innerH,p=r.getEl("body")["client"+s]-2*i,p-=u&&c?r.getEl("scroll"+n)["client"+l]:0,t=p/r.getEl("body")["scroll"+s],r.getEl("body")["scroll"+o]=d+e["delta"+a]/t},stop:function(){e("#"+u).removeClass(c+"active")}})}r.classes.add("scroll"),n("v","Top","Height","Y","Width"),n("h","Left","Width","X","Height")}var r=this,i=2;r.settings.autoScroll&&(r._hasScroll||(r._hasScroll=!0,o(),r.on("wheel",function(e){var t=r.getEl("body");t.scrollLeft+=10*(e.deltaX||0),t.scrollTop+=10*e.deltaY,n()}),e(r.getEl("body")).on("scroll",n)),n())}}}),l("tinymce.core.ui.Panel",["tinymce.core.ui.Container","tinymce.core.ui.Scrollable"],function(e,t){"use strict";return e.extend({Defaults:{layout:"fit",containerCls:"panel"},Mixins:[t],renderHtml:function(){var e=this,t=e._layout,n=e.settings.html;return e.preRender(),t.preRender(e),"undefined"==typeof n?n='<div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+t.renderHtml(e)+"</div>":("function"==typeof n&&(n=n.call(e)),e._hasBody=!1),'<div id="'+e._id+'" class="'+e.classes+'" hidefocus="1" tabindex="-1" role="group">'+(e._preBodyHtml||"")+n+"</div>"}})}),l("tinymce.core.ui.Movable",["tinymce.core.ui.DomUtils"],function(e){"use strict";function t(t,n,o){var r,i,s,a,l,d,u,c,p,f;return p=e.getViewPort(),i=e.getPos(n),s=i.x,a=i.y,t.state.get("fixed")&&"static"==e.getRuntimeStyle(document.body,"position")&&(s-=p.x,a-=p.y),r=t.getEl(),f=e.getSize(r),l=f.width,d=f.height,f=e.getSize(n),u=f.width,c=f.height,o=(o||"").split(""),"b"===o[0]&&(a+=c),"r"===o[1]&&(s+=u),"c"===o[0]&&(a+=Math.round(c/2)),"c"===o[1]&&(s+=Math.round(u/2)),"b"===o[3]&&(a-=d),"r"===o[4]&&(s-=l),"c"===o[3]&&(a-=Math.round(d/2)),"c"===o[4]&&(s-=Math.round(l/2)),{x:s,y:a,w:l,h:d}}return{testMoveRel:function(n,o){for(var r=e.getViewPort(),i=0;i<o.length;i++){var s=t(this,n,o[i]);if(this.state.get("fixed")){if(s.x>0&&s.x+s.w<r.w&&s.y>0&&s.y+s.h<r.h)return o[i]}else if(s.x>r.x&&s.x+s.w<r.w+r.x&&s.y>r.y&&s.y+s.h<r.h+r.y)return o[i]}return o[0]},moveRel:function(e,n){"string"!=typeof n&&(n=this.testMoveRel(e,n));var o=t(this,e,n);return this.moveTo(o.x,o.y)},moveBy:function(e,t){var n=this,o=n.layoutRect();return n.moveTo(o.x+e,o.y+t),n},moveTo:function(t,n){function o(e,t,n){return e<0?0:e+n>t?(e=t-n,e<0?0:e):e}var r=this;if(r.settings.constrainToViewport){var i=e.getViewPort(window),s=r.layoutRect();t=o(t,i.w+i.x,s.w),n=o(n,i.h+i.y,s.h)}return r.state.get("rendered")?r.layoutRect({x:t,y:n}).repaint():(r.settings.x=t,r.settings.y=n),r.fire("move",{x:t,y:n}),r}}}),l("tinymce.core.ui.Resizable",["tinymce.core.ui.DomUtils"],function(e){"use strict";return{resizeToContent:function(){this._layoutRect.autoResize=!0,this._lastRect=null,this.reflow()},resizeTo:function(t,n){if(t<=1||n<=1){var o=e.getWindowSize();t=t<=1?t*o.w:t,n=n<=1?n*o.h:n}return this._layoutRect.autoResize=!1,this.layoutRect({minW:t,minH:n,w:t,h:n}).reflow()},resizeBy:function(e,t){var n=this,o=n.layoutRect();return n.resizeTo(o.w+e,o.h+t)}}}),l("tinymce.core.ui.FloatPanel",["tinymce.core.ui.Panel","tinymce.core.ui.Movable","tinymce.core.ui.Resizable","tinymce.core.ui.DomUtils","tinymce.core.dom.DomQuery","tinymce.core.util.Delay"],function(e,t,n,o,r,i){"use strict";function s(e,t){for(;e;){if(e==t)return!0;e=e.parent()}}function a(e){for(var t=v.length;t--;){var n=v[t],o=n.getParentCtrl(e.target);if(n.settings.autohide){if(o&&(s(o,n)||n.parent()===o))continue;e=n.fire("autohide",{target:e.target}),e.isDefaultPrevented()||n.hide()}}}function l(){m||(m=function(e){2!=e.button&&a(e)},r(document).on("click touchstart",m))}function d(){h||(h=function(){var e;for(e=v.length;e--;)c(v[e])},r(window).on("scroll",h))}function u(){if(!g){var e=document.documentElement,t=e.clientWidth,n=e.clientHeight;g=function(){document.all&&t==e.clientWidth&&n==e.clientHeight||(t=e.clientWidth,n=e.clientHeight,_.hideAll())},r(window).on("resize",g)}}function c(e){function t(t,n){for(var o,r=0;r<v.length;r++)if(v[r]!=e)for(o=v[r].parent();o&&(o=o.parent());)o==e&&v[r].fixed(t).moveBy(0,n).repaint()}var n=o.getViewPort().y;e.settings.autofix&&(e.state.get("fixed")?e._autoFixY>n&&(e.fixed(!1).layoutRect({y:e._autoFixY}).repaint(),t(!1,e._autoFixY-n)):(e._autoFixY=e.layoutRect().y,e._autoFixY<n&&(e.fixed(!0).layoutRect({y:0}).repaint(),t(!0,n-e._autoFixY))))}function p(e,t){var n,o,i=_.zIndex||65535;if(e)b.push(t);else for(n=b.length;n--;)b[n]===t&&b.splice(n,1);if(b.length)for(n=0;n<b.length;n++)b[n].modal&&(i++,o=b[n]),b[n].getEl().style.zIndex=i,b[n].zIndex=i,i++;var s=r("#"+t.classPrefix+"modal-block",t.getContainerElm())[0];o?r(s).css("z-index",o.zIndex-1):s&&(s.parentNode.removeChild(s),y=!1),_.currentZIndex=i}function f(e){var t;for(t=v.length;t--;)v[t]===e&&v.splice(t,1);for(t=b.length;t--;)b[t]===e&&b.splice(t,1)}var m,h,g,y,v=[],b=[],_=e.extend({Mixins:[t,n],init:function(e){var t=this;t._super(e),t._eventsRoot=t,t.classes.add("floatpanel"),e.autohide&&(l(),u(),v.push(t)),e.autofix&&(d(),t.on("move",function(){c(this)})),t.on("postrender show",function(e){if(e.control==t){var n,o=t.classPrefix;t.modal&&!y&&(n=r("#"+o+"modal-block",t.getContainerElm()),n[0]||(n=r('<div id="'+o+'modal-block" class="'+o+"reset "+o+'fade"></div>').appendTo(t.getContainerElm())),i.setTimeout(function(){n.addClass(o+"in"),r(t.getEl()).addClass(o+"in")}),y=!0),p(!0,t)}}),t.on("show",function(){t.parents().each(function(e){if(e.state.get("fixed"))return t.fixed(!0),!1})}),e.popover&&(t._preBodyHtml='<div class="'+t.classPrefix+'arrow"></div>',t.classes.add("popover").add("bottom").add(t.isRtl()?"end":"start")),t.aria("label",e.ariaLabel),t.aria("labelledby",t._id),t.aria("describedby",t.describedBy||t._id+"-none")},fixed:function(e){var t=this;if(t.state.get("fixed")!=e){if(t.state.get("rendered")){var n=o.getViewPort();e?t.layoutRect().y-=n.y:t.layoutRect().y+=n.y}t.classes.toggle("fixed",e),t.state.set("fixed",e)}return t},show:function(){var e,t=this,n=t._super();for(e=v.length;e--&&v[e]!==t;);return e===-1&&v.push(t),n},hide:function(){return f(this),p(!1,this),this._super()},hideAll:function(){_.hideAll()},close:function(){var e=this;return e.fire("close").isDefaultPrevented()||(e.remove(),p(!1,e)),e},remove:function(){f(this),this._super()},postRender:function(){var e=this;return e.settings.bodyRole&&this.getEl("body").setAttribute("role",e.settings.bodyRole),e._super()}});return _.hideAll=function(){for(var e=v.length;e--;){var t=v[e];t&&t.settings.autohide&&(t.hide(),v.splice(e,1))}},_}),l("tinymce.core.ui.Window",["tinymce.core.ui.FloatPanel","tinymce.core.ui.Panel","tinymce.core.ui.DomUtils","tinymce.core.dom.DomQuery","tinymce.core.ui.DragHelper","tinymce.core.ui.BoxUtils","tinymce.core.Env","tinymce.core.util.Delay"],function(e,t,n,o,r,i,s,a){"use strict";function l(e){var t,n="width=device-width,initial-scale=1.0,user-scalable=0,minimum-scale=1.0,maximum-scale=1.0",r=o("meta[name=viewport]")[0];s.overrideViewPort!==!1&&(r||(r=document.createElement("meta"),r.setAttribute("name","viewport"),document.getElementsByTagName("head")[0].appendChild(r)),t=r.getAttribute("content"),t&&"undefined"!=typeof f&&(f=t),r.setAttribute("content",e?n:f))}function d(e,t){u()&&t===!1&&o([document.documentElement,document.body]).removeClass(e+"fullscreen")}function u(){for(var e=0;e<p.length;e++)if(p[e]._fullscreen)return!0;return!1}function c(){function e(){var e,t,o=n.getWindowSize();for(e=0;e<p.length;e++)t=p[e].layoutRect(),p[e].moveTo(p[e].settings.x||Math.max(0,o.w/2-t.w/2),p[e].settings.y||Math.max(0,o.h/2-t.h/2))}if(!s.desktop){var t={w:window.innerWidth,h:window.innerHeight};a.setInterval(function(){var e=window.innerWidth,n=window.innerHeight;t.w==e&&t.h==n||(t={w:e,h:n},o(window).trigger("resize"))},100)}o(window).on("resize",e)}var p=[],f="",m=e.extend({modal:!0,Defaults:{border:1,layout:"flex",containerCls:"panel",role:"dialog",callbacks:{submit:function(){this.fire("submit",{data:this.toJSON()})},close:function(){this.close()}}},init:function(e){var o=this;o._super(e),o.isRtl()&&o.classes.add("rtl"),o.classes.add("window"),o.bodyClasses.add("window-body"),o.state.set("fixed",!0),e.buttons&&(o.statusbar=new t({layout:"flex",border:"1 0 0 0",spacing:3,padding:10,align:"center",pack:o.isRtl()?"start":"end",defaults:{type:"button"},items:e.buttons}),o.statusbar.classes.add("foot"),o.statusbar.parent(o)),o.on("click",function(e){var t=o.classPrefix+"close";(n.hasClass(e.target,t)||n.hasClass(e.target.parentNode,t))&&o.close()}),o.on("cancel",function(){o.close()}),o.aria("describedby",o.describedBy||o._id+"-none"),o.aria("label",e.title),o._fullscreen=!1},recalc:function(){var e,t,o,r,i=this,s=i.statusbar;i._fullscreen&&(i.layoutRect(n.getWindowSize()),i.layoutRect().contentH=i.layoutRect().innerH),i._super(),e=i.layoutRect(),i.settings.title&&!i._fullscreen&&(t=e.headerW,t>e.w&&(o=e.x-Math.max(0,t/2),i.layoutRect({w:t,x:o}),r=!0)),s&&(s.layoutRect({w:i.layoutRect().innerW}).recalc(),t=s.layoutRect().minW+e.deltaW,t>e.w&&(o=e.x-Math.max(0,t-e.w),i.layoutRect({w:t,x:o}),r=!0)),r&&i.recalc()},initLayoutRect:function(){var e,t=this,o=t._super(),r=0;if(t.settings.title&&!t._fullscreen){e=t.getEl("head");var i=n.getSize(e);o.headerW=i.width,o.headerH=i.height,r+=o.headerH}t.statusbar&&(r+=t.statusbar.layoutRect().h),o.deltaH+=r,o.minH+=r,o.h+=r;var s=n.getWindowSize();return o.x=t.settings.x||Math.max(0,s.w/2-o.w/2),o.y=t.settings.y||Math.max(0,s.h/2-o.h/2),o},renderHtml:function(){var e=this,t=e._layout,n=e._id,o=e.classPrefix,r=e.settings,i="",s="",a=r.html;return e.preRender(),t.preRender(e),r.title&&(i='<div id="'+n+'-head" class="'+o+'window-head"><div id="'+n+'-title" class="'+o+'title">'+e.encode(r.title)+'</div><div id="'+n+'-dragh" class="'+o+'dragh"></div><button type="button" class="'+o+'close" aria-hidden="true"><i class="mce-ico mce-i-remove"></i></button></div>'),r.url&&(a='<iframe src="'+r.url+'" tabindex="-1"></iframe>'),"undefined"==typeof a&&(a=t.renderHtml(e)),e.statusbar&&(s=e.statusbar.renderHtml()),'<div id="'+n+'" class="'+e.classes+'" hidefocus="1"><div class="'+e.classPrefix+'reset" role="application">'+i+'<div id="'+n+'-body" class="'+e.bodyClasses+'">'+a+"</div>"+s+"</div></div>"},fullscreen:function(e){var t,r,s=this,l=document.documentElement,d=s.classPrefix;if(e!=s._fullscreen)if(o(window).on("resize",function(){var e;if(s._fullscreen)if(t)s._timer||(s._timer=a.setTimeout(function(){var e=n.getWindowSize();s.moveTo(0,0).resizeTo(e.w,e.h),s._timer=0},50));else{e=(new Date).getTime();var o=n.getWindowSize();s.moveTo(0,0).resizeTo(o.w,o.h),(new Date).getTime()-e>50&&(t=!0)}}),r=s.layoutRect(),s._fullscreen=e,e){s._initial={x:r.x,y:r.y,w:r.w,h:r.h},s.borderBox=i.parseBox("0"),s.getEl("head").style.display="none",r.deltaH-=r.headerH+2,o([l,document.body]).addClass(d+"fullscreen"),s.classes.add("fullscreen");var u=n.getWindowSize();s.moveTo(0,0).resizeTo(u.w,u.h)}else s.borderBox=i.parseBox(s.settings.border),s.getEl("head").style.display="",r.deltaH+=r.headerH,o([l,document.body]).removeClass(d+"fullscreen"),s.classes.remove("fullscreen"),s.moveTo(s._initial.x,s._initial.y).resizeTo(s._initial.w,s._initial.h);return s.reflow()},postRender:function(){var e,t=this;setTimeout(function(){t.classes.add("in"),t.fire("open")},0),t._super(),t.statusbar&&t.statusbar.postRender(),t.focus(),this.dragHelper=new r(t._id+"-dragh",{start:function(){e={x:t.layoutRect().x,y:t.layoutRect().y}},drag:function(n){t.moveTo(e.x+n.deltaX,e.y+n.deltaY)}}),t.on("submit",function(e){e.isDefaultPrevented()||t.close()}),p.push(t),l(!0)},submit:function(){return this.fire("submit",{data:this.toJSON()})},remove:function(){var e,t=this;for(t.dragHelper.destroy(),t._super(),t.statusbar&&this.statusbar.remove(),d(t.classPrefix,!1),e=p.length;e--;)p[e]===t&&p.splice(e,1);l(p.length>0)},getContentWindow:function(){var e=this.getEl().getElementsByTagName("iframe")[0];return e?e.contentWindow:null}});return c(),m}),l("tinymce.core.ui.MessageBox",["tinymce.core.ui.Window"],function(e){"use strict";var t=e.extend({init:function(e){e={border:1,padding:20,layout:"flex",pack:"center",align:"center",containerCls:"panel",autoScroll:!0,buttons:{type:"button",text:"Ok",action:"ok"},items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200}},this._super(e)},Statics:{OK:1,OK_CANCEL:2,YES_NO:3,YES_NO_CANCEL:4,msgBox:function(n){function o(e,t,n){return{type:"button",text:e,subtype:n?"primary":"",onClick:function(e){e.control.parents()[1].close(),i(t)}}}var r,i=n.callback||function(){};switch(n.buttons){case t.OK_CANCEL:r=[o("Ok",!0,!0),o("Cancel",!1)];break;case t.YES_NO:case t.YES_NO_CANCEL:r=[o("Yes",1,!0),o("No",0)],n.buttons==t.YES_NO_CANCEL&&r.push(o("Cancel",-1));break;default:r=[o("Ok",!0,!0)]}return new e({padding:20,x:n.x,y:n.y,minWidth:300,minHeight:100,layout:"flex",pack:"center",align:"center",buttons:r,title:n.title,role:"alertdialog",items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200,text:n.text},onPostRender:function(){this.aria("describedby",this.items()[0]._id)},onClose:n.onClose,onCancel:function(){i(!1)}}).renderTo(document.body).reflow()},alert:function(e,n){return"string"==typeof e&&(e={text:e}),e.callback=n,t.msgBox(e)},confirm:function(e,n){return"string"==typeof e&&(e={text:e}),e.callback=n,e.buttons=t.OK_CANCEL,t.msgBox(e)}}});return t}),l("tinymce.core.WindowManager",["tinymce.core.ui.Window","tinymce.core.ui.MessageBox"],function(e,t){return function(n){function o(){if(a.length)return a[a.length-1]}function r(e){n.fire("OpenWindow",{win:e})}function i(e){n.fire("CloseWindow",{win:e})}var s=this,a=[];s.windows=a,n.on("remove",function(){for(var e=a.length;e--;)a[e].close()}),s.open=function(t,o){var s;return n.editorManager.setActive(n),t.title=t.title||" ",t.url=t.url||t.file,t.url&&(t.width=parseInt(t.width||320,10),t.height=parseInt(t.height||240,10)),t.body&&(t.items={defaults:t.defaults,type:t.bodyType||"form",items:t.body,data:t.data,callbacks:t.commands}),t.url||t.buttons||(t.buttons=[{text:"Ok",subtype:"primary",onclick:function(){s.find("form")[0].submit()}},{text:"Cancel",onclick:function(){s.close()}}]),s=new e(t),a.push(s),s.on("close",function(){for(var e=a.length;e--;)a[e]===s&&a.splice(e,1);a.length||n.focus(),i(s)}),t.data&&s.on("postRender",function(){this.find("*").each(function(e){var n=e.name();n in t.data&&e.value(t.data[n])})}),s.features=t||{},s.params=o||{},1===a.length&&n.nodeChanged(),s=s.renderTo().reflow(),r(s),s},s.alert=function(e,o,s){var a;a=t.alert(e,function(){o?o.call(s||this):n.focus()}),a.on("close",function(){i(a)}),r(a)},s.confirm=function(e,n,o){var s;s=t.confirm(e,function(e){n.call(o||this,e)}),s.on("close",function(){i(s)}),r(s)},s.close=function(){o()&&o().close()},s.getParams=function(){return o()?o().params:null},s.setParams=function(e){o()&&(o().params=e)},s.getWindows=function(){return a}}}),l("tinymce.core.ui.Tooltip",["tinymce.core.ui.Control","tinymce.core.ui.Movable"],function(e,t){return e.extend({Mixins:[t],Defaults:{classes:"widget tooltip tooltip-n"},renderHtml:function(){var e=this,t=e.classPrefix;return'<div id="'+e._id+'" class="'+e.classes+'" role="presentation"><div class="'+t+'tooltip-arrow"></div><div class="'+t+'tooltip-inner">'+e.encode(e.state.get("text"))+"</div></div>"},bindStates:function(){var e=this;return e.state.on("change:text",function(t){e.getEl().lastChild.innerHTML=e.encode(t.value)}),e._super()},repaint:function(){var e,t,n=this;e=n.getEl().style,t=n._layoutRect,e.left=t.x+"px",e.top=t.y+"px",e.zIndex=131070}})}),l("tinymce.core.ui.Widget",["tinymce.core.ui.Control","tinymce.core.ui.Tooltip"],function(e,t){"use strict";var n,o=e.extend({init:function(e){var t=this;t._super(e),e=t.settings,t.canFocus=!0,e.tooltip&&o.tooltips!==!1&&(t.on("mouseenter",function(n){var o=t.tooltip().moveTo(-65535);if(n.control==t){var r=o.text(e.tooltip).show().testMoveRel(t.getEl(),["bc-tc","bc-tl","bc-tr"]);o.classes.toggle("tooltip-n","bc-tc"==r),o.classes.toggle("tooltip-nw","bc-tl"==r),o.classes.toggle("tooltip-ne","bc-tr"==r),o.moveRel(t.getEl(),r)}else o.hide()}),t.on("mouseleave mousedown click",function(){t.tooltip().hide()})),t.aria("label",e.ariaLabel||e.tooltip)},tooltip:function(){return n||(n=new t({type:"tooltip"}),n.renderTo()),n},postRender:function(){var e=this,t=e.settings;e._super(),e.parent()||!t.width&&!t.height||(e.initLayoutRect(),e.repaint()),t.autofocus&&e.focus()},bindStates:function(){function e(e){n.aria("disabled",e),n.classes.toggle("disabled",e)}function t(e){n.aria("pressed",e),n.classes.toggle("active",e)}var n=this;return n.state.on("change:disabled",function(t){e(t.value)}),n.state.on("change:active",function(e){t(e.value)}),n.state.get("disabled")&&e(!0),n.state.get("active")&&t(!0),n._super()},remove:function(){this._super(),n&&(n.remove(),n=null)}});return o}),l("tinymce.core.ui.Progress",["tinymce.core.ui.Widget"],function(e){"use strict";return e.extend({Defaults:{value:0},init:function(e){var t=this;t._super(e),t.classes.add("progress"),t.settings.filter||(t.settings.filter=function(e){return Math.round(e)})},renderHtml:function(){var e=this,t=e._id,n=this.classPrefix;return'<div id="'+t+'" class="'+e.classes+'"><div class="'+n+'bar-container"><div class="'+n+'bar"></div></div><div class="'+n+'text">0%</div></div>'},postRender:function(){var e=this;return e._super(),e.value(e.settings.value),e},bindStates:function(){function e(e){e=t.settings.filter(e),t.getEl().lastChild.innerHTML=e+"%",t.getEl().firstChild.firstChild.style.width=e+"%"}var t=this;return t.state.on("change:value",function(t){e(t.value)}),e(t.state.get("value")),t._super()}})}),l("tinymce.core.ui.Notification",["tinymce.core.ui.Control","tinymce.core.ui.Movable","tinymce.core.ui.Progress","tinymce.core.util.Delay"],function(e,t,n,o){return e.extend({Mixins:[t],Defaults:{classes:"widget notification"},init:function(e){var t=this;t._super(e),e.text&&t.text(e.text),e.icon&&(t.icon=e.icon),e.color&&(t.color=e.color),e.type&&t.classes.add("notification-"+e.type),e.timeout&&(e.timeout<0||e.timeout>0)&&!e.closeButton?t.closeButton=!1:(t.classes.add("has-close"),t.closeButton=!0),e.progressBar&&(t.progressBar=new n),t.on("click",function(e){e.target.className.indexOf(t.classPrefix+"close")!=-1&&t.close()})},renderHtml:function(){var e=this,t=e.classPrefix,n="",o="",r="",i="";return e.icon&&(n='<i class="'+t+"ico "+t+"i-"+e.icon+'"></i>'),e.color&&(i=' style="background-color: '+e.color+'"'),e.closeButton&&(o='<button type="button" class="'+t+'close" aria-hidden="true">×</button>'),e.progressBar&&(r=e.progressBar.renderHtml()),'<div id="'+e._id+'" class="'+e.classes+'"'+i+' role="presentation">'+n+'<div class="'+t+'notification-inner">'+e.state.get("text")+"</div>"+r+o+"</div>"},postRender:function(){var e=this;return o.setTimeout(function(){e.$el.addClass(e.classPrefix+"in")}),e._super()},bindStates:function(){var e=this;return e.state.on("change:text",function(t){e.getEl().childNodes[1].innerHTML=t.value}),e.progressBar&&e.progressBar.bindStates(),e._super()},close:function(){var e=this;return e.fire("close").isDefaultPrevented()||e.remove(),e},repaint:function(){var e,t,n=this;e=n.getEl().style,t=n._layoutRect,e.left=t.x+"px",e.top=t.y+"px",e.zIndex=65534}})}),l("tinymce.core.NotificationManager",["tinymce.core.ui.Notification","tinymce.core.util.Delay","tinymce.core.util.Tools"],function(e,t,n){return function(o){function r(){if(p.length)return p[p.length-1]}function i(){t.requestAnimationFrame(function(){s(),a()})}function s(){for(var e=0;e<p.length;e++)p[e].moveTo(0,0)}function a(){if(p.length>0){var e=p.slice(0,1)[0],t=o.inline?o.getElement():o.getContentAreaContainer();if(e.moveRel(t,"tc-tc"),p.length>1)for(var n=1;n<p.length;n++)p[n].moveRel(p[n-1].getEl(),"bc-tc")}}function l(e,t){if(!u(t))return null;var o=n.grep(e,function(e){return d(t,e)});return 0===o.length?null:o[0]}function d(e,t){return e.type===t.settings.type&&e.text===t.settings.text}function u(e){return!e.progressBar&&!e.timeout}var c=this,p=[];c.notifications=p,o.on("remove",function(){for(var e=p.length;e--;)p[e].close()}),o.on("ResizeEditor",a),o.on("ResizeWindow",i),c.open=function(t){if(!o.removed){var n;o.editorManager.setActive(o);var r=l(p,t);return null===r?(n=new e(t),p.push(n),t.timeout>0&&(n.timer=setTimeout(function(){n.close()},t.timeout)),n.on("close",function(){var e=p.length;for(n.timer&&o.getWin().clearTimeout(n.timer);e--;)p[e]===n&&p.splice(e,1);a()}),n.renderTo(),a()):n=r,n}},c.close=function(){r()&&r().close()},c.getNotifications=function(){return p},o.on("SkinLoaded",function(){var e=o.settings.service_message;e&&o.notificationManager.open({text:e,type:"warning",timeout:0,icon:""})})}}),l("tinymce.core.EditorObservable",["tinymce.core.util.Observable","tinymce.core.dom.DOMUtils","tinymce.core.util.Tools"],function(e,t,n){function o(e,t){return"selectionchange"==t?e.getDoc():!e.inline&&/^mouse|touch|click|contextmenu|drop|dragover|dragend/.test(t)?e.getDoc().documentElement:e.settings.event_root?(e.eventRoot||(e.eventRoot=s.select(e.settings.event_root)[0]),e.eventRoot):e.getBody()}function r(e,t){function n(e){return!e.hidden&&!e.readonly}var r,a;if(e.delegates||(e.delegates={}),!e.delegates[t]&&!e.removed)if(r=o(e,t),e.settings.event_root){if(i||(i={},e.editorManager.on("removeEditor",function(){var t;if(!e.editorManager.activeEditor&&i){for(t in i)e.dom.unbind(o(e,t));i=null}})),i[t])return;a=function(o){for(var r=o.target,i=e.editorManager.editors,a=i.length;a--;){var l=i[a].getBody();(l===r||s.isChildOf(r,l))&&n(i[a])&&i[a].fire(t,o)}},i[t]=a,s.bind(r,t,a)}else a=function(o){n(e)&&e.fire(t,o)},s.bind(r,t,a),e.delegates[t]=a}var i,s=t.DOM,a={bindPendingEventDelegates:function(){var e=this;n.each(e._pendingNativeEvents,function(t){r(e,t)})},toggleNativeEvent:function(e,t){var n=this;"focus"!=e&&"blur"!=e&&(t?n.initialized?r(n,e):n._pendingNativeEvents?n._pendingNativeEvents.push(e):n._pendingNativeEvents=[e]:n.initialized&&(n.dom.unbind(o(n,e),e,n.delegates[e]),delete n.delegates[e]))},unbindAllNativeEvents:function(){var e,t=this;if(t.delegates){for(e in t.delegates)t.dom.unbind(o(t,e),e,t.delegates[e]);delete t.delegates}t.inline||(t.getBody().onload=null,t.dom.unbind(t.getWin()),t.dom.unbind(t.getDoc())),t.dom.unbind(t.getBody()),t.dom.unbind(t.getContainer())}};return a=n.extend({},e,a)}),l("tinymce.core.Shortcuts",["tinymce.core.util.Tools","tinymce.core.Env"],function(e,t){var n=e.each,o=e.explode,r={f9:120,f10:121,f11:122},i=e.makeMap("alt,ctrl,shift,meta,access");return function(s){function a(e){var s,a,l={};n(o(e,"+"),function(e){e in i?l[e]=!0:/^[0-9]{2,}$/.test(e)?l.keyCode=parseInt(e,10):(l.charCode=e.charCodeAt(0),l.keyCode=r[e]||e.toUpperCase().charCodeAt(0))}),s=[l.keyCode];for(a in i)l[a]?s.push(a):l[a]=!1;return l.id=s.join(","),l.access&&(l.alt=!0,t.mac?l.ctrl=!0:l.shift=!0),l.meta&&(t.mac?l.meta=!0:(l.ctrl=!0,l.meta=!1)),l}function l(t,n,r,i){var l;return l=e.map(o(t,">"),a),l[l.length-1]=e.extend(l[l.length-1],{func:r,scope:i||s}),e.extend(l[0],{desc:s.translate(n),subpatterns:l.slice(1)})}function d(e){return e.altKey||e.ctrlKey||e.metaKey}function u(e){return"keydown"===e.type&&e.keyCode>=112&&e.keyCode<=123}function c(e,t){return!!t&&(t.ctrl==e.ctrlKey&&t.meta==e.metaKey&&(t.alt==e.altKey&&t.shift==e.shiftKey&&(!!(e.keyCode==t.keyCode||e.charCode&&e.charCode==t.charCode)&&(e.preventDefault(),!0))))}function p(e){return e.func?e.func.call(e.scope):null}var f=this,m={},h=[];s.on("keyup keypress keydown",function(e){!d(e)&&!u(e)||e.isDefaultPrevented()||(n(m,function(t){if(c(e,t))return h=t.subpatterns.slice(0),"keydown"==e.type&&p(t),!0}),c(e,h[0])&&(1===h.length&&"keydown"==e.type&&p(h[0]),h.shift()))}),f.add=function(t,r,i,a){var d;return d=i,"string"==typeof i?i=function(){s.execCommand(d,!1,null)}:e.isArray(d)&&(i=function(){s.execCommand(d[0],d[1],d[2])}),n(o(e.trim(t.toLowerCase())),function(e){var t=l(e,r,i,a);m[t.id]=t}),!0},f.remove=function(e){var t=l(e);return!!m[t.id]&&(delete m[t.id],!0)}}}),d("global!window",window),l("tinymce.core.ErrorReporter",["tinymce.core.AddOnManager"],function(e){var t=e.PluginManager,n=function(e,n){for(var o in t.urls){var r=t.urls[o]+"/plugin"+n+".js";if(r===e)return o}return null},o=function(e,t){var o=n(t,e.suffix);return o?"Failed to load plugin: "+o+" from url "+t:"Failed to load plugin url: "+t},r=function(e,t){e.notificationManager.open({type:"error",text:t})},i=function(e,t){e._skinLoaded?r(e,t):e.on("SkinLoaded",function(){r(e,t)})},s=function(e,t){i(e,"Failed to upload image: "+t)},a=function(e,t){i(e,o(e,t))},l=function(e,t){i(e,"Failed to load content css: "+t[0])},d=function(e){var t=window.console;t&&!window.test&&(t.error?t.error.apply(t,arguments):t.log.apply(t,arguments))};return{pluginLoadError:a,uploadError:s,displayError:i,contentCssError:l,initError:d}}),l("tinymce.core.caret.CaretContainerInput",["ephox.katamari.api.Fun","tinymce.core.caret.CaretContainer"],function(e,t){var n=function(e){return e.dom.select("*[data-mce-caret]")[0]},o=function(e){e.selection.setRng(e.selection.getRng())},r=function(e,n){n.hasAttribute("data-mce-caret")&&(t.showCaretContainerBlock(n),o(e),e.selection.scrollIntoView(n))},i=function(e,o){var i=n(e);if(i)return"compositionstart"===o.type?(o.preventDefault(),o.stopPropagation(),void r(i)):void(t.hasContent(i)&&r(e,i))},s=function(t){t.on("keyup compositionstart",e.curry(i,t))};return{setup:s}}),l("tinymce.core.file.Uploader",["tinymce.core.util.Promise","tinymce.core.util.Tools","tinymce.core.util.Fun"],function(e,t,n){return function(n,o){function r(e,t){return e?e.replace(/\/$/,"")+"/"+t.replace(/^\//,""):t}function i(e,t,n,i){var s,a;s=new XMLHttpRequest,s.open("POST",o.url),s.withCredentials=o.credentials,s.upload.onprogress=function(e){i(e.loaded/e.total*100)},s.onerror=function(){n("Image upload failed due to a XHR Transport error. Code: "+s.status)},s.onload=function(){var e;return s.status<200||s.status>=300?void n("HTTP Error: "+s.status):(e=JSON.parse(s.responseText),e&&"string"==typeof e.location?void t(r(o.basePath,e.location)):void n("Invalid JSON: "+s.responseText))},a=new FormData,a.append("file",e.blob(),e.filename()),s.send(a)}function s(){return new e(function(e){e([])})}function a(e,t){return{url:t,blobInfo:e,status:!0}}function l(e,t){return{url:"",blobInfo:e,status:!1,error:t}}function d(e,n){t.each(h[e],function(e){e(n)}),delete h[e]}function u(t,o,r){return n.markPending(t.blobUri()),new e(function(e){var i,s,u=function(){};try{var c=function(){i&&(i.close(),s=u)},p=function(o){c(),n.markUploaded(t.blobUri(),o),d(t.blobUri(),a(t,o)),e(a(t,o))},f=function(o){c(),n.removeFailed(t.blobUri()),d(t.blobUri(),l(t,o)),e(l(t,o))};s=function(e){e<0||e>100||(i||(i=r()),i.progressBar.value(e))},o(t,p,f,s)}catch(n){e(l(t,n.message))}})}function c(e){return e===i}function p(t){var n=t.blobUri();return new e(function(e){h[n]=h[n]||[],h[n].push(e)})}function f(r,i){return r=t.grep(r,function(e){return!n.isUploaded(e.blobUri())}),e.all(t.map(r,function(e){return n.isPending(e.blobUri())?p(e):u(e,o.handler,i)}))}function m(e,t){return!o.url&&c(o.handler)?s():f(e,t)}var h={};return o=t.extend({credentials:!1,handler:i},o),{upload:m}}}),l("tinymce.core.file.Conversions",["tinymce.core.util.Promise"],function(e){function t(t){return new e(function(e,n){var o=function(){n("Cannot convert "+t+" to Blob. Resource might not exist or is inaccessible.")};try{var r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="blob",r.onload=function(){200==this.status?e(this.response):o()},r.onerror=o,r.send()}catch(e){o()}})}function n(e){var t,n;return e=decodeURIComponent(e).split(","),n=/data:([^;]+)/.exec(e[0]),n&&(t=n[1]),{type:t,data:e[1]}}function o(t){return new e(function(e){var o,r,i;t=n(t);try{o=atob(t.data)}catch(t){return void e(new Blob([]))}for(r=new Uint8Array(o.length),i=0;i<r.length;i++)r[i]=o.charCodeAt(i);e(new Blob([r],{type:t.type}))})}function r(e){return 0===e.indexOf("blob:")?t(e):0===e.indexOf("data:")?o(e):null}function i(t){return new e(function(e){var n=new FileReader;n.onloadend=function(){e(n.result)},n.readAsDataURL(t)})}return{uriToBlob:r,blobToDataUri:i,parseDataUri:n}}),l("tinymce.core.file.ImageScanner",["tinymce.core.util.Promise","tinymce.core.util.Arr","tinymce.core.util.Fun","tinymce.core.file.Conversions","tinymce.core.Env"],function(e,t,n,o,r){var i=0,s=function(e){return(e||"blobid")+i++},a=function(e,t,n,r){var i,a;return 0===t.src.indexOf("blob:")?(a=e.getByUri(t.src),void(a?n({image:t,blobInfo:a}):o.uriToBlob(t.src).then(function(r){o.blobToDataUri(r).then(function(l){i=o.parseDataUri(l).data,a=e.create(s(),r,i),e.add(a),n({image:t,blobInfo:a})})},function(e){r(e)}))):(i=o.parseDataUri(t.src).data,a=e.findFirst(function(e){return e.base64()===i}),void(a?n({image:t,blobInfo:a}):o.uriToBlob(t.src).then(function(o){a=e.create(s(),o,i),e.add(a),n({image:t,blobInfo:a})},function(e){r(e)})))},l=function(e){return e?e.getElementsByTagName("img"):[]};return function(o,i){function s(s,u){var c,p;return u||(u=n.constant(!0)),c=t.filter(l(s),function(e){var t=e.src;return!!r.fileApi&&(!e.hasAttribute("data-mce-bogus")&&(!e.hasAttribute("data-mce-placeholder")&&(!(!t||t==r.transparentSrc)&&(0===t.indexOf("blob:")?!o.isUploaded(t):0===t.indexOf("data:")&&u(e)))))}),p=t.map(c,function(t){var n;return d[t.src]?new e(function(e){d[t.src].then(function(n){return"string"==typeof n?n:void e({image:t,blobInfo:n.blobInfo})})}):(n=new e(function(e,n){a(i,t,e,n)}).then(function(e){return delete d[e.image.src],e}).catch(function(e){return delete d[t.src],e}),d[t.src]=n,n)}),e.all(p)}var d={};return{findAll:s}}}),l("tinymce.core.util.Uuid",[],function(){var e=0,t=function(){var e=function(){return Math.round(4294967295*Math.random()).toString(36)},t=(new Date).getTime();return"s"+t.toString(36)+e()+e()+e()},n=function(n){return n+e++ +t()};return{uuid:n}}),d("global!URL",URL),l("tinymce.core.file.BlobCache",["tinymce.core.util.Arr","tinymce.core.util.Fun","tinymce.core.util.Uuid","global!URL"],function(e,t,n,o){return function(){function r(e){var t={"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png"};return t[e.toLowerCase()]||"dat"}function i(e,t,n,o){return s("object"==typeof e?e:{id:e,name:o,blob:t,base64:n})}function s(e){var t,i;if(!e.blob||!e.base64)throw"blob and base64 representations of the image are required for BlobInfo to be created";return t=e.id||n.uuid("blobid"),i=e.name||t,{id:m(t),name:m(i),filename:m(i+"."+r(e.blob.type)),blob:m(e.blob),base64:m(e.base64),blobUri:m(e.blobUri||o.createObjectURL(e.blob)),uri:m(e.uri)}}function a(e){l(e.id())||f.push(e)}function l(e){return d(function(t){return t.id()===e})}function d(t){return e.filter(f,t)[0]}function u(e){return d(function(t){return t.blobUri()==e})}function c(t){f=e.filter(f,function(e){return e.blobUri()!==t||(o.revokeObjectURL(e.blobUri()),!1)})}function p(){e.each(f,function(e){o.revokeObjectURL(e.blobUri())}),f=[]}var f=[],m=t.constant;return{create:i,add:a,get:l,getByUri:u,findFirst:d,removeByUri:c,destroy:p}}}),l("tinymce.core.file.UploadStatus",[],function(){return function(){function e(e,t){return{status:e,
resultUri:t}}function t(e){return e in c}function n(e){var t=c[e];return t?t.resultUri:null}function o(e){return!!t(e)&&c[e].status===d}function r(e){return!!t(e)&&c[e].status===u}function i(t){c[t]=e(d,null)}function s(t,n){c[t]=e(u,n)}function a(e){delete c[e]}function l(){c={}}var d=1,u=2,c={};return{hasBlobUri:t,getResultUri:n,isPending:o,isUploaded:r,markPending:i,markUploaded:s,removeFailed:a,destroy:l}}}),l("tinymce.core.EditorUpload",["tinymce.core.util.Arr","tinymce.core.file.Uploader","tinymce.core.file.ImageScanner","tinymce.core.file.BlobCache","tinymce.core.file.UploadStatus","tinymce.core.ErrorReporter"],function(e,t,n,o,r,i){return function(s){function a(e){return function(t){return s.selection?e(t):[]}}function l(){return"?"+(new Date).getTime()}function d(e,t,n){var o=0;do o=e.indexOf(t,o),o!==-1&&(e=e.substring(0,o)+n+e.substr(o+t.length),o+=n.length-t.length+1);while(o!==-1);return e}function u(e,t,n){return e=d(e,'src="'+t+'"','src="'+n+'"'),e=d(e,'data-mce-src="'+t+'"','data-mce-src="'+n+'"')}function c(t,n){e.each(s.undoManager.data,function(o){"fragmented"===o.type?o.fragments=e.map(o.fragments,function(e){return u(e,t,n)}):o.content=u(o.content,t,n)})}function p(){return s.notificationManager.open({text:s.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0})}function f(e,t){C.removeByUri(e.src),c(e.src,t),s.$(e).attr({src:E.images_reuse_filename?t+l():t,"data-mce-src":s.convertURL(t,"src")})}function m(n){return _||(_=new t(w,{url:E.images_upload_url,basePath:E.images_upload_base_path,credentials:E.images_upload_credentials,handler:E.images_upload_handler})),y().then(a(function(t){var o;return o=e.map(t,function(e){return e.blobInfo}),_.upload(o,p).then(a(function(o){var r=e.map(o,function(e,n){var o=t[n].image;return e.status&&s.settings.images_replace_blob_uris!==!1?f(o,e.url):e.error&&i.uploadError(s,e.error),{element:o,status:e.status}});return n&&n(r),r}))}))}function h(e){if(E.automatic_uploads!==!1)return m(e)}function g(e){return!E.images_dataimg_filter||E.images_dataimg_filter(e)}function y(){return x||(x=new n(w,C)),x.findAll(s.getBody(),g).then(a(function(t){return t=e.filter(t,function(e){return"string"!=typeof e||(i.displayError(s,e),!1)}),e.each(t,function(e){c(e.image.src,e.blobInfo.blobUri()),e.image.src=e.blobInfo.blobUri(),e.image.removeAttribute("data-mce-src")}),t}))}function v(){C.destroy(),w.destroy(),x=_=null}function b(t){return t.replace(/src="(blob:[^"]+)"/g,function(t,n){var o=w.getResultUri(n);if(o)return'src="'+o+'"';var r=C.getByUri(n);return r||(r=e.reduce(s.editorManager.editors,function(e,t){return e||t.editorUpload&&t.editorUpload.blobCache.getByUri(n)},null)),r?'src="data:'+r.blob().type+";base64,"+r.base64()+'"':t})}var _,x,C=new o,E=s.settings,w=new r;return s.on("setContent",function(){s.settings.automatic_uploads!==!1?h():y()}),s.on("RawSaveContent",function(e){e.content=b(e.content)}),s.on("getContent",function(e){e.source_view||"raw"==e.format||(e.content=b(e.content))}),s.on("PostRender",function(){s.parser.addNodeFilter("img",function(t){e.each(t,function(e){var t=e.attr("src");if(!C.getByUri(t)){var n=w.getResultUri(t);n&&e.attr("src",n)}})})}),{blobCache:C,uploadImages:m,uploadImagesAuto:h,scanForImages:y,destroy:v}}}),l("tinymce.core.ForceBlocks",["ephox.katamari.api.Fun"],function(e){var t=function(e){var t,n,o,r,i,s,a,l,d,u,c,p,f=e.settings,m=e.dom,h=e.selection,g=e.schema,y=g.getBlockElements(),v=h.getStart(),b=e.getBody(),_=-16777215;if(p=f.forced_root_block,v&&1===v.nodeType&&p){for(;v&&v!==b;){if(y[v.nodeName])return;v=v.parentNode}if(t=h.getRng(),t.setStart){n=t.startContainer,o=t.startOffset,r=t.endContainer,i=t.endOffset;try{d=e.getDoc().activeElement===b}catch(e){}}else t.item&&(v=t.item(0),t=e.getDoc().body.createTextRange(),t.moveToElementText(v)),d=t.parentElement().ownerDocument===e.getDoc(),u=t.duplicate(),u.collapse(!0),o=u.move("character",_)*-1,u.collapsed||(u=t.duplicate(),u.collapse(!1),i=u.move("character",_)*-1-o);for(v=b.firstChild,c=b.nodeName.toLowerCase();v;)if((3===v.nodeType||1==v.nodeType&&!y[v.nodeName])&&g.isValidChild(c,p.toLowerCase())){if(3===v.nodeType&&0===v.nodeValue.length){a=v,v=v.nextSibling,m.remove(a);continue}s||(s=m.create(p,e.settings.forced_root_block_attrs),v.parentNode.insertBefore(s,v),l=!0),a=v,v=v.nextSibling,s.appendChild(a)}else s=null,v=v.nextSibling;if(l&&d){if(t.setStart)t.setStart(n,o),t.setEnd(r,i),h.setRng(t);else try{t=e.getDoc().body.createTextRange(),t.moveToElementText(b),t.collapse(!0),t.moveStart("character",o),i>0&&t.moveEnd("character",i),t.select()}catch(e){}e.nodeChanged()}}},n=function(n){n.settings.forced_root_block&&n.on("NodeChange",e.curry(t,n))};return{setup:n}}),l("tinymce.core.dom.Dimensions",["tinymce.core.util.Arr","tinymce.core.dom.NodeType","tinymce.core.geom.ClientRect"],function(e,t,n){function o(r){function i(t){return e.map(t,function(e){return e=n.clone(e),e.node=r,e})}if(e.isArray(r))return e.reduce(r,function(e,t){return e.concat(o(t))},[]);if(t.isElement(r))return i(r.getClientRects());if(t.isText(r)){var s=r.ownerDocument.createRange();return s.setStart(r,0),s.setEnd(r,r.data.length),i(s.getClientRects())}}return{getClientRects:o}}),l("tinymce.core.caret.LineUtils",["tinymce.core.util.Fun","tinymce.core.util.Arr","tinymce.core.dom.NodeType","tinymce.core.dom.Dimensions","tinymce.core.geom.ClientRect","tinymce.core.caret.CaretUtils","tinymce.core.caret.CaretCandidate"],function(e,t,n,o,r,i,s){function a(e,t){return Math.abs(e.left-t)}function l(e,t){return Math.abs(e.right-t)}function d(e,n){function o(e,t){return e>=t.left&&e<=t.right}return t.reduce(e,function(e,t){var r,i;return r=Math.min(a(e,n),l(e,n)),i=Math.min(a(t,n),l(t,n)),o(n,t)?t:o(n,e)?e:i==r&&h(t.node)?t:i<r?t:e})}function u(e,t,n,o){for(;o=g(o,e,s.isEditableCaretCandidate,t);)if(n(o))return}function c(e,n){function i(e,r){var i;return i=t.filter(o.getClientRects(r),function(t){return!e(t,n)}),s=s.concat(i),0===i.length}var s=[];return s.push(n),u(-1,e,y(i,r.isAbove),n.node),u(1,e,y(i,r.isBelow),n.node),s}function p(e){return t.filter(t.toArray(e.getElementsByTagName("*")),h)}function f(e,t){return{node:e.node,before:a(e,t)<l(e,t)}}function m(e,n,r){var i,s;return i=o.getClientRects(p(e)),i=t.filter(i,function(e){return r>=e.top&&r<=e.bottom}),s=d(i,n),s&&(s=d(c(e,s),n),s&&h(s.node))?f(s,n):null}var h=n.isContentEditableFalse,g=i.findNode,y=e.curry;return{findClosestClientRect:d,findLineNodeRects:c,closestCaret:m}}),l("tinymce.core.caret.LineWalker",["tinymce.core.util.Fun","tinymce.core.util.Arr","tinymce.core.dom.Dimensions","tinymce.core.caret.CaretCandidate","tinymce.core.caret.CaretUtils","tinymce.core.caret.CaretWalker","tinymce.core.caret.CaretPosition","tinymce.core.geom.ClientRect"],function(e,t,n,o,r,i,s,a){function l(e,t,n,i){for(;i=r.findNode(i,e,o.isEditableCaretCandidate,t);)if(n(i))return}function d(e,o,r,i,s,a){function d(i){var a,l,d;for(d=n.getClientRects(i),e==-1&&(d=d.reverse()),a=0;a<d.length;a++)if(l=d[a],!r(l,c)){if(f.length>0&&o(l,t.last(f))&&p++,l.line=p,s(l))return!0;f.push(l)}}var u,c,p=0,f=[];return(c=t.last(a.getClientRects()))?(u=a.getNode(),d(u),l(e,i,d,u),f):f}function u(e,t){return t.line>e}function c(e,t){return t.line===e}function p(e,n,o,r){function l(n){return 1==e?t.last(n.getClientRects()):t.last(n.getClientRects())}var d,u,c,p,f,m,h=new i(n),g=[],y=0;1==e?(d=h.next,u=a.isBelow,c=a.isAbove,p=s.after(r)):(d=h.prev,u=a.isAbove,c=a.isBelow,p=s.before(r)),m=l(p);do if(p.isVisible()&&(f=l(p),!c(f,m))){if(g.length>0&&u(f,t.last(g))&&y++,f=a.clone(f),f.position=p,f.line=y,o(f))return g;g.push(f)}while(p=d(p));return g}var f=e.curry,m=f(d,-1,a.isAbove,a.isBelow),h=f(d,1,a.isBelow,a.isAbove);return{upUntil:m,downUntil:h,positionsUntil:p,isAboveLine:f(u),isLine:f(c)}}),l("tinymce.core.keyboard.CefUtils",["tinymce.core.caret.CaretPosition","tinymce.core.caret.CaretUtils","tinymce.core.dom.NodeType","tinymce.core.util.Fun"],function(e,t,n,o){var r=n.isContentEditableTrue,i=n.isContentEditableFalse,s=function(e,t,n,o){return t._selectionOverrides.showCaret(e,n,o)},a=function(e){var t=e.ownerDocument.createRange();return t.selectNode(e),t},l=function(e,t){var n;return n=e.fire("BeforeObjectSelected",{target:t}),n.isDefaultPrevented()?null:a(t)},d=function(n,a){var l,d;return a=t.normalizeRange(1,n.getBody(),a),l=e.fromRangeStart(a),i(l.getNode())?s(1,n,l.getNode(),!l.isAtEnd()):i(l.getNode(!0))?s(1,n,l.getNode(!0),!1):(d=n.dom.getParent(l.getNode(),o.or(i,r)),i(d)?s(1,n,d,!1):null)},u=function(e,t){var n;return t&&t.collapsed?(n=d(e,t),n?n:t):t};return{showCaret:s,selectNode:l,renderCaretAtRange:d,renderRangeCaret:u}}),l("tinymce.core.keyboard.CefNavigation",["tinymce.core.caret.CaretContainer","tinymce.core.caret.CaretPosition","tinymce.core.caret.CaretUtils","tinymce.core.caret.CaretWalker","tinymce.core.caret.LineUtils","tinymce.core.caret.LineWalker","tinymce.core.dom.NodeType","tinymce.core.dom.RangeUtils","tinymce.core.Env","tinymce.core.keyboard.CefUtils","tinymce.core.util.Arr","tinymce.core.util.Fun"],function(e,t,n,o,r,i,s,a,l,d,u,c){var p=s.isContentEditableFalse,f=a.getSelectedNode,m=n.isAfterContentEditableFalse,h=n.isBeforeContentEditableFalse,g=function(e,t){for(;t=e(t);)if(t.isVisible())return t;return t},y=function(e,t){var o=n.isInSameBlock(e,t);return!(o||!s.isBr(e.getNode()))||o},v=function(t){return e.isCaretContainerBlock(t.startContainer)},b=function(e,o,r){return r=n.normalizeRange(e,o,r),e===-1?t.fromRangeStart(r):t.fromRangeEnd(r)},_=function(e,t,n,o,r){var i,s,a,l;return!r.collapsed&&(i=f(r),p(i))?d.showCaret(e,t,i,e===-1):(l=v(r),s=b(e,t.getBody(),r),o(s)?d.selectNode(t,s.getNode(e===-1)):(s=n(s))?o(s)?d.showCaret(e,t,s.getNode(e===-1),1===e):(a=n(s),o(a)&&y(s,a)?d.showCaret(e,t,a.getNode(e===-1),1===e):l?d.renderRangeCaret(t,s.toRange()):null):l?r:null)},x=function(e,t,n,o){var s,a,l,c,g,y,v,_,x;if(x=f(o),s=b(e,t.getBody(),o),a=n(t.getBody(),i.isAboveLine(1),s),l=u.filter(a,i.isLine(1)),g=u.last(s.getClientRects()),h(s)&&(x=s.getNode()),m(s)&&(x=s.getNode(!0)),!g)return null;if(y=g.left,c=r.findClosestClientRect(l,y),c&&p(c.node))return v=Math.abs(y-c.left),_=Math.abs(y-c.right),d.showCaret(e,t,c.node,v<_);if(x){var C=i.positionsUntil(e,t.getBody(),i.isAboveLine(1),x);if(c=r.findClosestClientRect(u.filter(C,i.isLine(1)),y))return d.renderRangeCaret(t,c.position.toRange());if(c=u.last(u.filter(C,i.isLine(0))))return d.renderRangeCaret(t,c.position.toRange())}},C=function(e){var t=e.dom.create(e.settings.forced_root_block);return(!l.ie||l.ie>=11)&&(t.innerHTML='<br data-mce-bogus="1">'),t},E=function(e,n,r){var i,s,a,l=new o(e.getBody()),d=c.curry(g,l.next),u=c.curry(g,l.prev);if(r.collapsed&&e.settings.forced_root_block){if(i=e.dom.getParent(r.startContainer,"PRE"),!i)return;s=1===n?d(t.fromRangeStart(r)):u(t.fromRangeStart(r)),s||(a=C(e),1===n?e.$(i).after(a):e.$(i).before(a),e.selection.select(a,!0),e.selection.collapse())}},w=function(e,t){var n,r=new o(e.getBody()),i=c.curry(g,r.next),s=c.curry(g,r.prev),a=t?1:-1,l=t?i:s,d=t?h:m,u=e.selection.getRng();return(n=_(a,e,l,d,u))?n:(n=E(e,a,u),n?n:null)},j=function(e,t){var n,o=t?1:-1,r=t?i.downUntil:i.upUntil,s=e.selection.getRng();return(n=x(o,e,r,s))?n:(n=E(e,o,s),n?n:null)},S=function(e,t){return function(){var n=w(e,t);return!!n&&(e.selection.setRng(n),!0)}},T=function(e,t){return function(){var n=j(e,t);return!!n&&(e.selection.setRng(n),!0)}};return{moveH:S,moveV:T}}),l("ephox.katamari.api.Merger",["ephox.katamari.api.Type","global!Array","global!Error"],function(e,t,n){var o=function(e,t){return t},r=function(t,n){var o=e.isObject(t)&&e.isObject(n);return o?s(t,n):n},i=function(e){return function(){for(var o=new t(arguments.length),r=0;r<o.length;r++)o[r]=arguments[r];if(0===o.length)throw new n("Can't merge zero objects");for(var i={},s=0;s<o.length;s++){var a=o[s];for(var l in a)a.hasOwnProperty(l)&&(i[l]=e(i[l],a[l]))}return i}},s=i(r),a=i(o);return{deepMerge:s,merge:a}}),l("tinymce.core.keyboard.MatchKeys",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Merger"],function(e,t,n){var o=function(o){return e.map(o,function(e){return n.merge({shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0,action:t.noop},e)})},r=function(e,t){return t.keyCode===e.keyCode&&t.shiftKey===e.shiftKey&&t.altKey===e.altKey&&t.ctrlKey===e.ctrlKey&&t.metaKey===e.metaKey},i=function(t,n){return e.bind(o(t),function(e){return r(e,n)?[e]:[]})},s=function(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}};return{match:i,action:s}}),l("tinymce.core.keyboard.ArrowKeys",["ephox.katamari.api.Arr","ephox.katamari.api.Cell","tinymce.core.keyboard.BoundarySelection","tinymce.core.keyboard.CefNavigation","tinymce.core.keyboard.MatchKeys","tinymce.core.util.VK"],function(e,t,n,o,r,i){var s=function(t,s,a){var l=r.match([{keyCode:i.RIGHT,action:o.moveH(t,!0)},{keyCode:i.LEFT,action:o.moveH(t,!1)},{keyCode:i.UP,action:o.moveV(t,!1)},{keyCode:i.DOWN,action:o.moveV(t,!0)},{keyCode:i.RIGHT,action:n.move(t,s,!0)},{keyCode:i.LEFT,action:n.move(t,s,!1)}],a);e.find(l,function(e){return e.action()}).each(function(e){a.preventDefault()})},a=function(e,t){e.on("keydown",function(n){n.isDefaultPrevented()===!1&&s(e,t,n)})};return{setup:a}}),l("tinymce.core.keyboard.DeleteBackspaceKeys",["ephox.katamari.api.Arr","tinymce.core.delete.BlockBoundaryDelete","tinymce.core.delete.BlockRangeDelete","tinymce.core.delete.CefDelete","tinymce.core.delete.InlineBoundaryDelete","tinymce.core.keyboard.MatchKeys","tinymce.core.util.VK"],function(e,t,n,o,r,i,s){var a=function(a,l,d){var u=i.match([{keyCode:s.BACKSPACE,action:i.action(o.backspaceDelete,a,!1)},{keyCode:s.DELETE,action:i.action(o.backspaceDelete,a,!0)},{keyCode:s.BACKSPACE,action:i.action(r.backspaceDelete,a,l,!1)},{keyCode:s.DELETE,action:i.action(r.backspaceDelete,a,l,!0)},{keyCode:s.BACKSPACE,action:i.action(n.backspaceDelete,a,!1)},{keyCode:s.DELETE,action:i.action(n.backspaceDelete,a,!0)},{keyCode:s.BACKSPACE,action:i.action(t.backspaceDelete,a,!1)},{keyCode:s.DELETE,action:i.action(t.backspaceDelete,a,!0)}],d);e.find(u,function(e){return e.action()}).each(function(e){d.preventDefault()})},l=function(t,n){var r=i.match([{keyCode:s.BACKSPACE,action:i.action(o.paddEmptyElement,t)},{keyCode:s.DELETE,action:i.action(o.paddEmptyElement,t)}],n);e.find(r,function(e){return e.action()})},d=function(e,t){e.on("keydown",function(n){n.isDefaultPrevented()===!1&&a(e,t,n)}),e.on("keyup",function(t){t.isDefaultPrevented()===!1&&l(e,t)})};return{setup:d}}),l("tinymce.core.keyboard.EnterKey",["tinymce.core.caret.CaretContainer","tinymce.core.dom.NodeType","tinymce.core.dom.RangeUtils","tinymce.core.dom.TreeWalker","tinymce.core.Env","tinymce.core.text.Zwsp","tinymce.core.util.Tools"],function(e,t,n,o,r,i,s){var a=r.ie&&r.ie<11,l=function(e){return e&&"A"===e.nodeName&&0===s.trim(i.trim(e.innerText||e.textContent)).length},d=function(e){return e&&/^(TD|TH|CAPTION)$/.test(e.nodeName)},u=function(e){e.innerHTML=a?"":'<br data-mce-bogus="1">'},c=function(e,t){return e.nodeName===t||e.previousSibling&&e.previousSibling.nodeName===t},p=function(e,t){return t&&e.isBlock(t)&&!/^(TD|TH|CAPTION|FORM)$/.test(t.nodeName)&&!/^(fixed|absolute)/i.test(t.style.position)&&"true"!==e.getContentEditable(t)},f=function(e,t,n){var o;e.isBlock(n)&&(o=t.getRng(),n.appendChild(e.create("span",null," ")),t.select(n),n.lastChild.outerHTML="",t.setRng(o))},m=function(e,t,n){var o,r=n,i=[];if(r){for(;r=r.firstChild;){if(e.isBlock(r))return;1!=r.nodeType||t[r.nodeName.toLowerCase()]||i.push(r)}for(o=i.length;o--;)r=i[o],!r.hasChildNodes()||r.firstChild==r.lastChild&&""===r.firstChild.nodeValue?e.remove(r):l(r)&&e.remove(r)}},h=function(e,n,o){return t.isText(n)===!1?o:e?1===o&&n.data.charAt(o-1)===i.ZWSP?0:o:o===n.data.length-1&&n.data.charAt(o)===i.ZWSP?n.data.length:o},g=function(e){var t=e.cloneRange();return t.setStart(e.startContainer,h(!0,e.startContainer,e.startOffset)),t.setEnd(e.endContainer,h(!1,e.endContainer,e.endOffset)),t},y=function(e){for(;e;){if(1===e.nodeType||3===e.nodeType&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}},v=function(t){function i(i){function E(e){var t,n,i,a,d=e;if(e){if(r.ie&&r.ie<9&&B&&B.firstChild&&B.firstChild==B.lastChild&&"BR"==B.firstChild.tagName&&s.remove(B.firstChild),/^(LI|DT|DD)$/.test(e.nodeName)){var u=y(e.firstChild);u&&/^(UL|OL|DL)$/.test(u.nodeName)&&e.insertBefore(s.doc.createTextNode(" "),e.firstChild)}if(i=s.createRng(),r.ie||e.normalize(),e.hasChildNodes()){for(t=new o(e,e);n=t.current();){if(3==n.nodeType){i.setStart(n,0),i.setEnd(n,0);break}if(C[n.nodeName.toLowerCase()]){i.setStartBefore(n),i.setEndBefore(n);break}d=n,n=t.next()}n||(i.setStart(d,0),i.setEnd(d,0))}else"BR"==e.nodeName?e.nextSibling&&s.isBlock(e.nextSibling)?((!z||z<9)&&(a=s.create("br"),e.parentNode.insertBefore(a,e)),i.setStartBefore(e),i.setEndBefore(e)):(i.setStartAfter(e),i.setEndAfter(e)):(i.setStart(e,0),i.setEnd(e,0));l.setRng(i),s.remove(a),l.scrollIntoView(e)}}function w(e){var t=v.forced_root_block;t&&t.toLowerCase()===e.tagName.toLowerCase()&&s.setAttribs(e,v.forced_root_block_attrs)}function j(e){var t,n,o,r=L,i=_.getTextInlineElements();if(e||"TABLE"==q||"HR"==q?(t=s.create(e||K),w(t)):t=B.cloneNode(!1),o=t,v.keep_styles===!1)s.setAttrib(t,"style",null),s.setAttrib(t,"class",null);else do if(i[r.nodeName]){if("_mce_caret"==r.id)continue;n=r.cloneNode(!1),s.setAttrib(n,"id",""),t.hasChildNodes()?(n.appendChild(t.firstChild),t.appendChild(n)):(o=n,t.appendChild(n))}while((r=r.parentNode)&&r!=A);return a||(o.innerHTML='<br data-mce-bogus="1">'),t}function S(e){var t,n,r,i;if(i=h(e,L,F),3==L.nodeType&&(e?i>0:i<L.nodeValue.length))return!1;if(L.parentNode==B&&$&&!e)return!0;if(e&&1==L.nodeType&&L==B.firstChild)return!0;if(c(L,"TABLE")||c(L,"HR"))return $&&!e||!$&&e;for(t=new o(L,B),3==L.nodeType&&(e&&0===i?t.prev():e||i!=L.nodeValue.length||t.next());n=t.current();){if(1===n.nodeType){if(!n.getAttribute("data-mce-bogus")&&(r=n.nodeName.toLowerCase(),x[r]&&"br"!==r))return!1}else if(3===n.nodeType&&!/^[ \t\r\n]*$/.test(n.nodeValue))return!1;e?t.prev():t.next()}return!0}function T(e,n){var o,r,i,a,l,u,c=K||"P";if(r=s.getParent(e,s.isBlock),!r||!p(s,r)){if(r=r||A,u=r==t.getBody()||d(r)?r.nodeName.toLowerCase():r.parentNode.nodeName.toLowerCase(),!r.hasChildNodes())return o=s.create(c),w(o),r.appendChild(o),M.setStart(o,0),M.setEnd(o,0),o;for(a=e;a.parentNode!=r;)a=a.parentNode;for(;a&&!s.isBlock(a);)i=a,a=a.previousSibling;if(i&&_.isValidChild(u,c.toLowerCase())){for(o=s.create(c),w(o),i.parentNode.insertBefore(o,i),a=i;a&&!s.isBlock(a);)l=a.nextSibling,o.appendChild(a),a=l;M.setStart(e,n),M.setEnd(e,n)}}return e}function P(){function e(e){for(var t=V[e?"firstChild":"lastChild"];t&&1!=t.nodeType;)t=t[e?"nextSibling":"previousSibling"];return t===B}function n(){var e=V.parentNode;return/^(LI|DT|DD)$/.test(e.nodeName)?e:V}if(V!=t.getBody()){var o=V.parentNode.nodeName;/^(OL|UL|LI)$/.test(o)&&(K="LI"),H=K?j(K):s.create("BR"),e(!0)&&e()?"LI"==o?s.insertAfter(H,n()):s.replace(H,V):e(!0)?"LI"==o?(s.insertAfter(H,n()),H.appendChild(s.doc.createTextNode(" ")),H.appendChild(V)):V.parentNode.insertBefore(H,V):e()?(s.insertAfter(H,n()),f(s,l,H)):(V=n(),O=M.cloneRange(),O.setStartAfter(B),O.setEndAfter(V),W=O.extractContents(),"LI"==K&&"LI"==W.firstChild.nodeName?(H=W.firstChild,s.insertAfter(W,V)):(s.insertAfter(W,V),s.insertAfter(H,V))),s.remove(B),E(H),b.add()}}function k(){t.execCommand("InsertLineBreak",!1,i)}function I(e){do 3===e.nodeType&&(e.nodeValue=e.nodeValue.replace(/^[\r\n]+/,"")),e=e.firstChild;while(e)}function N(e){var t,n,o=s.getRoot();for(t=e;t!==o&&"false"!==s.getContentEditable(t);)"true"===s.getContentEditable(t)&&(n=t),t=t.parentNode;return t!==o?n:o}function R(e){var t;a||(e.normalize(),t=e.lastChild,t&&!/^(left|right)$/gi.test(s.getStyle(t,"float",!0))||s.add(e,"br"))}function D(){H=/^(H[1-6]|PRE|FIGURE)$/.test(q)&&"HGROUP"!=G?j(K):j(),v.end_container_on_empty_block&&p(s,V)&&s.isEmpty(B)?H=s.split(V,B):s.insertAfter(H,B),E(H)}var M,O,A,L,F,B,z,U,H,W,V,q,G,K,$;if(M=l.getRng(!0),!i.isDefaultPrevented()){if(!M.collapsed)return void t.execCommand("Delete");if(new n(s).normalize(M),L=M.startContainer,F=M.startOffset,K=(v.force_p_newlines?"p":"")||v.forced_root_block,K=K?K.toUpperCase():"",z=s.doc.documentMode,U=i.shiftKey,1==L.nodeType&&L.hasChildNodes()&&($=F>L.childNodes.length-1,L=L.childNodes[Math.min(F,L.childNodes.length-1)]||L,F=$&&3==L.nodeType?L.nodeValue.length:0),A=N(L)){if(b.beforeChange(),!s.isBlock(A)&&A!=s.getRoot())return void(K&&!U||k());if((K&&!U||!K&&U)&&(L=T(L,F)),B=s.getParent(L,s.isBlock),V=B?s.getParent(B.parentNode,s.isBlock):null,q=B?B.nodeName.toUpperCase():"",G=V?V.nodeName.toUpperCase():"","LI"!=G||i.ctrlKey||(B=V,q=G),t.undoManager.typing&&(t.undoManager.typing=!1,t.undoManager.add()),/^(LI|DT|DD)$/.test(q)){if(!K&&U)return void k();if(s.isEmpty(B))return void P()}if("PRE"==q&&v.br_in_pre!==!1){if(!U)return void k()}else if(!K&&!U&&"LI"!=q||K&&U)return void k();K&&B===t.getBody()||(K=K||"P",e.isCaretContainerBlock(B)?(H=e.showCaretContainerBlock(B),s.isEmpty(B)&&u(B),E(H)):S()?D():S(!0)?(H=B.parentNode.insertBefore(j(),B),f(s,l,H),E(c(B,"HR")?H:B)):(O=g(M).cloneRange(),O.setEndAfter(B),W=O.extractContents(),I(W),H=W.firstChild,s.insertAfter(W,B),m(s,x,H),R(B),s.isEmpty(B)&&u(B),H.normalize(),s.isEmpty(H)?(s.remove(H),D()):E(H)),s.setAttrib(H,"id",""),t.fire("NewBlock",{newBlock:H}),b.typing=!1,b.add())}}}var s=t.dom,l=t.selection,v=t.settings,b=t.undoManager,_=t.schema,x=_.getNonEmptyElements(),C=_.getMoveCaretBeforeOnEnterElements();t.on("keydown",function(e){13==e.keyCode&&i(e)!==!1&&e.preventDefault()})};return{setup:v}}),l("tinymce.core.keyboard.InsertSpace",["ephox.katamari.api.Fun","tinymce.core.caret.CaretPosition","tinymce.core.dom.NodeType","tinymce.core.keyboard.BoundaryLocation"],function(e,t,n,o){var r=function(e,t){return l(e)&&n.isText(t.container())},i=function(e,t){var n=t.container(),o=t.offset();n.insertData(o," "),e.selection.setCursorLocation(n,o+1)},s=function(e,t,n){return!!r(n,t)&&(i(e,t),!0)},a=function(n){var r=t.fromRangeStart(n.selection.getRng()),i=o.readLocation(n.getBody(),r);return i.map(e.curry(s,n,r)).getOr(!1)},l=function(t){return t.fold(e.constant(!1),e.constant(!0),e.constant(!0),e.constant(!1))},d=function(e){return!!e.selection.isCollapsed()&&a(e)};return{insertAtSelection:d}}),l("tinymce.core.keyboard.SpaceKey",["ephox.katamari.api.Arr","tinymce.core.keyboard.InsertSpace","tinymce.core.keyboard.MatchKeys","tinymce.core.util.VK"],function(e,t,n,o){var r=function(r,i){var s=n.match([{keyCode:o.SPACEBAR,action:n.action(t.insertAtSelection,r)}],i);e.find(s,function(e){return e.action()}).each(function(e){i.preventDefault()})},i=function(e){e.on("keydown",function(t){t.isDefaultPrevented()===!1&&r(e,t)})};return{setup:i}}),l("tinymce.core.keyboard.KeyboardOverrides",["tinymce.core.keyboard.ArrowKeys","tinymce.core.keyboard.BoundarySelection","tinymce.core.keyboard.DeleteBackspaceKeys","tinymce.core.keyboard.EnterKey","tinymce.core.keyboard.SpaceKey"],function(e,t,n,o,r){var i=function(i){var s=t.setupSelectedState(i);e.setup(i,s),n.setup(i,s),o.setup(i),r.setup(i)};return{setup:i}}),l("tinymce.core.NodeChange",["tinymce.core.dom.RangeUtils","tinymce.core.Env","tinymce.core.util.Delay"],function(e,t,n){return function(o){function r(e){var t,n;if(n=o.$(e).parentsUntil(o.getBody()).add(e),n.length===s.length){for(t=n.length;t>=0&&n[t]===s[t];t--);if(t===-1)return s=n,!0}return s=n,!1}var i,s=[];"onselectionchange"in o.getDoc()||o.on("NodeChange Click MouseUp KeyUp Focus",function(t){var n,r;n=o.selection.getRng(),r={startContainer:n.startContainer,startOffset:n.startOffset,endContainer:n.endContainer,endOffset:n.endOffset},"nodechange"!=t.type&&e.compareRanges(r,i)||o.fire("SelectionChange"),i=r}),o.on("contextmenu",function(){o.fire("SelectionChange")}),o.on("SelectionChange",function(){var e=o.selection.getStart(!0);!t.range&&o.selection.isCollapsed()||!r(e)&&o.dom.isChildOf(e,o.getBody())&&o.nodeChanged({selectionChange:!0})}),o.on("MouseUp",function(e){e.isDefaultPrevented()||("IMG"==o.selection.getNode().nodeName?n.setEditorTimeout(o,function(){o.nodeChanged()}):o.nodeChanged())}),this.nodeChanged=function(e){var t,n,r,i=o.selection;o.initialized&&i&&!o.settings.disable_nodechange&&!o.readonly&&(r=o.getBody(),t=i.getStart(!0)||r,t.ownerDocument==o.getDoc()&&o.dom.isChildOf(t,r)||(t=r),n=[],o.dom.getParent(t,function(e){return e===r||void n.push(e)}),e=e||{},e.element=t,e.parents=n,o.fire("NodeChange",e))}}}),l("tinymce.core.caret.FakeCaret",["tinymce.core.caret.CaretContainer","tinymce.core.caret.CaretContainerRemove","tinymce.core.caret.CaretPosition","tinymce.core.dom.DomQuery","tinymce.core.dom.NodeType","tinymce.core.dom.RangeUtils","tinymce.core.geom.ClientRect","tinymce.core.util.Delay"],function(e,t,n,o,r,i,s,a){var l=r.isContentEditableFalse,d=function(e){return e&&/^(TD|TH)$/i.test(e.nodeName)};return function(n,r){function i(e,t){var o,r,i,a,l,d=s.collapse(e.getBoundingClientRect(),t);return"BODY"==n.tagName?(o=n.ownerDocument.documentElement,r=n.scrollLeft||o.scrollLeft,i=n.scrollTop||o.scrollTop):(l=n.getBoundingClientRect(),r=n.scrollLeft-l.left,i=n.scrollTop-l.top),d.left+=r,d.right+=r,d.top+=i,d.bottom+=i,d.width=1,a=e.offsetWidth-e.clientWidth,a>0&&(t&&(a*=-1),d.left+=a,d.right+=a),d}function u(){var t,r,i,s,a;for(t=o("*[contentEditable=false]",n),s=0;s<t.length;s++)r=t[s],i=r.previousSibling,e.endsWithCaretContainer(i)&&(a=i.data,1==a.length?i.parentNode.removeChild(i):i.deleteData(a.length-1,1)),i=r.nextSibling,e.startsWithCaretContainer(i)&&(a=i.data,1==a.length?i.parentNode.removeChild(i):i.deleteData(0,1));return null}function c(t,s){var a,u;return p(),d(s)?null:r(s)?(v=e.insertBlock("p",s,t),a=i(s,t),o(v).css("top",a.top),y=o('<div class="mce-visual-caret" data-mce-bogus="all"></div>').css(a).appendTo(n),t&&y.addClass("mce-visual-caret-before"),f(),u=s.ownerDocument.createRange(),u.setStart(v,0),u.setEnd(v,0),u):(v=e.insertInline(s,t),u=s.ownerDocument.createRange(),l(v.nextSibling)?(u.setStart(v,0),u.setEnd(v,0)):(u.setStart(v,1),u.setEnd(v,1)),u)}function p(){u(),v&&(t.remove(v),v=null),y&&(y.remove(),y=null),clearInterval(g)}function f(){g=a.setInterval(function(){o("div.mce-visual-caret",n).toggleClass("mce-visual-caret-hidden")},500)}function m(){a.clearInterval(g)}function h(){return".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}"}var g,y,v;return{show:c,hide:p,getCss:h,destroy:m}}}),l("tinymce.core.dom.MousePosition",[],function(){var e=function(e){var t,n,o,r;return r=e.getBoundingClientRect(),t=e.ownerDocument,n=t.documentElement,o=t.defaultView,{top:r.top+o.pageYOffset-n.clientTop,left:r.left+o.pageXOffset-n.clientLeft}},t=function(t){return t.inline?e(t.getBody()):{left:0,top:0}},n=function(e){var t=e.getBody();return e.inline?{left:t.scrollLeft,top:t.scrollTop}:{left:0,top:0}},o=function(e){var t=e.getBody(),n=e.getDoc().documentElement,o={left:t.scrollLeft,top:t.scrollTop},r={left:t.scrollLeft||n.scrollLeft,top:t.scrollTop||n.scrollTop};return e.inline?o:r},r=function(t,n){if(n.target.ownerDocument!==t.getDoc()){var r=e(t.getContentAreaContainer()),i=o(t);return{left:n.pageX-r.left+i.left,top:n.pageY-r.top+i.top}}return{left:n.pageX,top:n.pageY}},i=function(e,t,n){return{pageX:n.left-e.left+t.left,pageY:n.top-e.top+t.top}},s=function(e,o){return i(t(e),n(e),r(e,o))};return{calc:s}}),l("tinymce.core.DragDropOverrides",["tinymce.core.dom.NodeType","tinymce.core.util.Arr","tinymce.core.util.Fun","tinymce.core.util.Delay","tinymce.core.dom.DOMUtils","tinymce.core.dom.MousePosition"],function(e,t,n,o,r,i){var s=e.isContentEditableFalse,a=e.isContentEditableTrue,l=function(e,t){return s(t)&&t!==e},d=function(e,t,n){return t!==n&&!e.dom.isChildOf(t,n)&&!s(t)},u=function(e){var t=e.cloneNode(!0);return t.removeAttribute("data-mce-selected"),t},c=function(e,t,n,o){var r=t.cloneNode(!0);e.dom.setStyles(r,{width:n,height:o}),e.dom.setAttrib(r,"data-mce-selected",null);var i=e.dom.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return e.dom.setStyles(i,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:o}),e.dom.setStyles(r,{margin:0,boxSizing:"border-box"}),i.appendChild(r),i},p=function(e,t){e.parentNode!==t&&t.appendChild(e)},f=function(e,t,n,o,r,i){var s=0,a=0;e.style.left=t.pageX+"px",e.style.top=t.pageY+"px",t.pageX+n>r&&(s=t.pageX+n-r),t.pageY+o>i&&(a=t.pageY+o-i),e.style.width=n-s+"px",e.style.height=o-a+"px"},m=function(e){e&&e.parentNode&&e.parentNode.removeChild(e)},h=function(e){return 0===e.button},g=function(e){return e.element},y=function(e,t){return{pageX:t.pageX-e.relX,pageY:t.pageY+5}},v=function(e,o){return function(r){if(h(r)){var i=t.find(o.dom.getParents(r.target),n.or(s,a));if(l(o.getBody(),i)){var d=o.dom.getPos(i),u=o.getBody(),p=o.getDoc().documentElement;e.element=i,e.screenX=r.screenX,e.screenY=r.screenY,e.maxX=(o.inline?u.scrollWidth:p.offsetWidth)-2,e.maxY=(o.inline?u.scrollHeight:p.offsetHeight)-2,e.relX=r.pageX-d.x,e.relY=r.pageY-d.y,e.width=i.offsetWidth,e.height=i.offsetHeight,e.ghost=c(o,i,e.width,e.height)}}}},b=function(e,t){var n=o.throttle(function(e,n){t._selectionOverrides.hideFakeCaret(),t.selection.placeCaretAt(e,n)},0);return function(o){var r=Math.max(Math.abs(o.screenX-e.screenX),Math.abs(o.screenY-e.screenY));if(g(e)&&!e.dragging&&r>10){var s=t.fire("dragstart",{target:e.element});if(s.isDefaultPrevented())return;e.dragging=!0,t.focus()}if(e.dragging){var a=y(e,i.calc(t,o));p(e.ghost,t.getBody()),f(e.ghost,a,e.width,e.height,e.maxX,e.maxY),n(o.clientX,o.clientY)}}},_=function(e){var t=e.getSel().getRangeAt(0),n=t.startContainer;return 3===n.nodeType?n.parentNode:n},x=function(e,t){return function(n){if(e.dragging&&d(t,_(t.selection),e.element)){var o=u(e.element),r=t.fire("drop",{targetClone:o,clientX:n.clientX,clientY:n.clientY});r.isDefaultPrevented()||(o=r.targetClone,t.undoManager.transact(function(){m(e.element),t.insertContent(t.dom.getOuterHTML(o)),t._selectionOverrides.hideFakeCaret()}))}E(e)}},C=function(e,t){return function(){E(e),e.dragging&&t.fire("dragend")}},E=function(e){e.dragging=!1,e.element=null,m(e.ghost)},w=function(e){var t,n,o,i,s,a,l={};t=r.DOM,a=document,n=v(l,e),o=b(l,e),i=x(l,e),s=C(l,e),e.on("mousedown",n),e.on("mousemove",o),e.on("mouseup",i),t.bind(a,"mousemove",o),t.bind(a,"mouseup",s),e.on("remove",function(){t.unbind(a,"mousemove",o),t.unbind(a,"mouseup",s)})},j=function(e){e.on("drop",function(t){var n="undefined"!=typeof t.clientX?e.getDoc().elementFromPoint(t.clientX,t.clientY):null;(s(n)||s(e.dom.getContentEditableParent(n)))&&t.preventDefault()})},S=function(e){w(e),j(e)};return{init:S}});l("tinymce.core.SelectionOverrides",["tinymce.core.caret.CaretContainer","tinymce.core.caret.CaretPosition","tinymce.core.caret.CaretUtils","tinymce.core.caret.CaretWalker","tinymce.core.caret.FakeCaret","tinymce.core.caret.LineUtils","tinymce.core.dom.NodeType","tinymce.core.DragDropOverrides","tinymce.core.Env","tinymce.core.geom.ClientRect","tinymce.core.keyboard.CefUtils","tinymce.core.util.Arr","tinymce.core.util.Delay","tinymce.core.util.Fun","tinymce.core.util.VK"],function(e,t,n,o,r,i,s,a,l,d,u,c,p,f,m){function h(s){function f(e){return s.dom.hasClass(e,"mce-offscreen-selection")}function h(){var e=s.dom.get(F);return e?e.getElementsByTagName("*")[0]:e}function _(e){return s.dom.isBlock(e)}function x(e){e&&s.selection.setRng(e)}function C(){return s.selection.getRng()}function E(e,t){s.selection.scrollIntoView(e,t)}function w(e,t,n){var o;return o=s.fire("ShowCaret",{target:t,direction:e,before:n}),o.isDefaultPrevented()?null:(E(t,e===-1),L.show(n,t))}function j(e,o){return o=n.normalizeRange(e,A,o),e==-1?t.fromRangeStart(o):t.fromRangeEnd(o);
}function S(t){t.hasAttribute("data-mce-caret")&&(e.showCaretContainerBlock(t),x(C()),E(t[0]))}function T(){function e(e){for(var t=s.getBody();e&&e!=t;){if(g(e)||y(e))return e;e=e.parentNode}return null}function n(e,t,n){return!n.collapsed&&c.reduce(n.getClientRects(),function(n,o){return n||d.containsXY(o,e,t)},!1)}function r(t){var n=!1;t.on("touchstart",function(){n=!1}),t.on("touchmove",function(){n=!0}),t.on("touchend",function(o){var r=e(o.target);y(r)&&(n||(o.preventDefault(),N(u.selectNode(t,r))))})}s.on("mouseup",function(){var e=C();e.collapsed&&x(u.renderCaretAtRange(s,e))}),s.on("click",function(t){var n;n=e(t.target),n&&(y(n)&&(t.preventDefault(),s.focus()),g(n)&&s.dom.isChildOf(n,s.selection.getNode())&&R())}),s.on("blur NewBlock",function(){R(),M()});var _=function(e){var n=new o(e);if(!e.firstChild)return!1;var r=t.before(e.firstChild),i=n.next(r);return i&&!b(i)&&!v(i)},E=function(e,t){var n=s.dom.getParent(e,s.dom.isBlock),o=s.dom.getParent(t,s.dom.isBlock);return n===o},j=function(e,t){var n=s.dom.getParent(e,s.dom.isBlock),o=s.dom.getParent(t,s.dom.isBlock);return n&&!E(n,o)&&_(n)};r(s),s.on("mousedown",function(t){var o;if(o=e(t.target))y(o)?(t.preventDefault(),N(u.selectNode(s,o))):(R(),g(o)&&t.shiftKey||n(t.clientX,t.clientY,s.selection.getRng())||s.selection.placeCaretAt(t.clientX,t.clientY));else{R(),M();var r=i.closestCaret(A,t.clientX,t.clientY);r&&(j(t.target,r.node)||(t.preventDefault(),s.getBody().focus(),x(w(1,r.node,r.before))))}}),s.on("keypress",function(e){if(!m.modifierPressed(e))switch(e.keyCode){default:y(s.selection.getNode())&&e.preventDefault()}}),s.on("getSelectionRange",function(e){var t=e.range;if(O){if(!O.parentNode)return void(O=null);t=t.cloneRange(),t.selectNode(O),e.range=t}}),s.on("setSelectionRange",function(e){var t;t=N(e.range,e.forward),t&&(e.range=t)}),s.on("AfterSetSelectionRange",function(e){var t=e.range;I(t)||M(),f(t.startContainer.parentNode)||R()}),s.on("focus",function(){p.setEditorTimeout(s,function(){s.selection.setRng(u.renderRangeCaret(s,s.selection.getRng()))},0)}),s.on("copy",function(e){var t=e.clipboardData;if(!e.isDefaultPrevented()&&e.clipboardData&&!l.ie){var n=h();n&&(e.preventDefault(),t.clearData(),t.setData("text/html",n.outerHTML),t.setData("text/plain",n.outerText))}}),a.init(s)}function P(){var e=s.contentStyles,t=".mce-content-body";e.push(L.getCss()),e.push(t+" .mce-offscreen-selection {position: absolute;left: -9999999999px;max-width: 1000000px;}"+t+" *[contentEditable=false] {cursor: default;}"+t+" *[contentEditable=true] {cursor: text;}")}function k(t){return e.isCaretContainer(t)||e.startsWithCaretContainer(t)||e.endsWithCaretContainer(t)}function I(e){return k(e.startContainer)||k(e.endContainer)}function N(e,t){var n,o,r,i,a,d,u,c,p,f,m=s.$,h=s.dom;if(!e)return null;if(e.collapsed){if(!I(e))if(t===!1){if(c=j(-1,e),y(c.getNode(!0)))return w(-1,c.getNode(!0),!1);if(y(c.getNode()))return w(-1,c.getNode(),!c.isAtEnd())}else{if(c=j(1,e),y(c.getNode()))return w(1,c.getNode(),!c.isAtEnd());if(y(c.getNode(!0)))return w(1,c.getNode(!0),!1)}return null}return i=e.startContainer,a=e.startOffset,d=e.endOffset,3==i.nodeType&&0==a&&y(i.parentNode)&&(i=i.parentNode,a=h.nodeIndex(i),i=i.parentNode),1!=i.nodeType?null:(d==a+1&&(n=i.childNodes[a]),y(n)?(p=f=n.cloneNode(!0),u=s.fire("ObjectSelected",{target:n,targetClone:p}),u.isDefaultPrevented()?null:(p=u.targetClone,o=m("#"+F),0===o.length&&(o=m('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>').attr("id",F),o.appendTo(s.getBody())),e=s.dom.createRng(),p===f&&l.ie?(o.empty().append('<p style="font-size: 0" data-mce-bogus="all"> </p>').append(p),e.setStartAfter(o[0].firstChild.firstChild),e.setEndAfter(p)):(o.empty().append(" ").append(p).append(" "),e.setStart(o[0].firstChild,1),e.setEnd(o[0].lastChild,0)),o.css({top:h.getPos(n,s.getBody()).y}),o[0].focus(),r=s.selection.getSel(),r.removeAllRanges(),r.addRange(e),s.$("*[data-mce-selected]").removeAttr("data-mce-selected"),n.setAttribute("data-mce-selected",1),O=n,M(),e)):null)}function R(){O&&(O.removeAttribute("data-mce-selected"),s.$("#"+F).remove(),O=null)}function D(){L.destroy(),O=null}function M(){L.hide()}var O,A=s.getBody(),L=new r(s.getBody(),_),F="sel-"+s.dom.uniqueId();return l.ceFalse&&(T(),P()),{showCaret:w,showBlockCaretContainer:S,hideFakeCaret:M,destroy:D}}var g=s.isContentEditableTrue,y=s.isContentEditableFalse,v=n.isAfterContentEditableFalse,b=n.isBeforeContentEditableFalse;return h});l("tinymce.core.dom.NodePath",["tinymce.core.dom.DOMUtils"],function(e){function t(t,n,o){for(var r=[];n&&n!=t;n=n.parentNode)r.push(e.nodeIndex(n,o));return r}function n(e,t){var n,o,r;for(o=e,n=t.length-1;n>=0;n--){if(r=o.childNodes,t[n]>r.length-1)return null;o=r[t[n]]}return o}return{create:t,resolve:n}}),l("tinymce.core.util.Quirks",["tinymce.core.util.VK","tinymce.core.dom.RangeUtils","tinymce.core.dom.TreeWalker","tinymce.core.dom.NodePath","tinymce.core.html.Node","tinymce.core.html.Entities","tinymce.core.Env","tinymce.core.util.Tools","tinymce.core.util.Delay","tinymce.core.caret.CaretContainer","tinymce.core.caret.CaretPosition","tinymce.core.caret.CaretWalker"],function(e,t,n,o,r,i,s,a,l,d,u,c){return function(n){function o(e,t){try{n.getDoc().execCommand(e,!1,t)}catch(e){}}function p(){var e=n.getDoc().documentMode;return e?e:6}function f(e){return e.isDefaultPrevented()}function m(e){var t,o;e.dataTransfer&&(n.selection.isCollapsed()&&"IMG"==e.target.tagName&&Q.select(e.target),t=n.selection.getContent(),t.length>0&&(o=se+escape(n.id)+","+escape(t),e.dataTransfer.setData(ae,o)))}function h(e){var t;return e.dataTransfer&&(t=e.dataTransfer.getData(ae),t&&t.indexOf(se)>=0)?(t=t.substr(se.length).split(","),{id:unescape(t[0]),html:unescape(t[1])}):null}function g(e,t){n.queryCommandSupported("mceInsertClipboardContent")?n.execCommand("mceInsertClipboardContent",!1,{content:e,internal:t}):n.execCommand("mceInsertContent",!1,e)}function y(){function e(e){var t=X.create("body"),n=e.cloneContents();return t.appendChild(n),Q.serializer.serialize(t,{format:"html"})}function o(o){if(!o.setStart){if(o.item)return!1;var r=o.duplicate();return r.moveToElementText(n.getBody()),t.compareRanges(o,r)}var i=e(o),s=X.createRng();s.selectNode(n.getBody());var a=e(s);return i===a}n.on("keydown",function(e){var t,r,i=e.keyCode;if(!f(e)&&(i==Z||i==J)){if(t=n.selection.isCollapsed(),r=n.getBody(),t&&!X.isEmpty(r))return;if(!t&&!o(n.selection.getRng()))return;e.preventDefault(),n.setContent(""),r.firstChild&&X.isBlock(r.firstChild)?n.selection.setCursorLocation(r.firstChild,0):n.selection.setCursorLocation(r,0),n.nodeChanged()}})}function v(){n.shortcuts.add("meta+a",null,"SelectAll")}function b(){n.settings.content_editable||X.bind(n.getDoc(),"mousedown mouseup",function(e){var t;if(e.target==n.getDoc().documentElement)if(t=Q.getRng(),n.getBody().focus(),"mousedown"==e.type){if(d.isCaretContainer(t.startContainer))return;Q.placeCaretAt(e.clientX,e.clientY)}else Q.setRng(t)})}function _(){n.on("keydown",function(e){if(!f(e)&&e.keyCode===J){if(!n.getBody().getElementsByTagName("hr").length)return;if(Q.isCollapsed()&&0===Q.getRng(!0).startOffset){var t=Q.getNode(),o=t.previousSibling;if("HR"==t.nodeName)return X.remove(t),void e.preventDefault();o&&o.nodeName&&"hr"===o.nodeName.toLowerCase()&&(X.remove(o),e.preventDefault())}}})}function x(){window.Range.prototype.getClientRects||n.on("mousedown",function(e){if(!f(e)&&"HTML"===e.target.nodeName){var t=n.getBody();t.blur(),l.setEditorTimeout(n,function(){t.focus()})}})}function C(){n.on("click",function(e){var t=e.target;/^(IMG|HR)$/.test(t.nodeName)&&"false"!==X.getContentEditableParent(t)&&(e.preventDefault(),n.selection.select(t),n.nodeChanged()),"A"==t.nodeName&&X.hasClass(t,"mce-item-anchor")&&(e.preventDefault(),Q.select(t))})}function E(){function e(){var e=X.getAttribs(Q.getStart().cloneNode(!1));return function(){var t=Q.getStart();t!==n.getBody()&&(X.setAttrib(t,"style",null),Y(e,function(e){t.setAttributeNode(e.cloneNode(!0))}))}}function t(){return!Q.isCollapsed()&&X.getParent(Q.getStart(),X.isBlock)!=X.getParent(Q.getEnd(),X.isBlock)}n.on("keypress",function(o){var r;if(!f(o)&&(8==o.keyCode||46==o.keyCode)&&t())return r=e(),n.getDoc().execCommand("delete",!1,null),r(),o.preventDefault(),!1}),X.bind(n.getDoc(),"cut",function(o){var r;!f(o)&&t()&&(r=e(),l.setEditorTimeout(n,function(){r()}))})}function w(){document.body.setAttribute("role","application")}function j(){n.on("keydown",function(e){if(!f(e)&&e.keyCode===J&&Q.isCollapsed()&&0===Q.getRng(!0).startOffset){var t=Q.getNode().previousSibling;if(t&&t.nodeName&&"table"===t.nodeName.toLowerCase())return e.preventDefault(),!1}})}function S(){p()>7||(o("RespectVisibilityInDesign",!0),n.contentStyles.push(".mceHideBrInPre pre br {display: none}"),X.addClass(n.getBody(),"mceHideBrInPre"),te.addNodeFilter("pre",function(e){for(var t,n,o,i,s=e.length;s--;)for(t=e[s].getAll("br"),n=t.length;n--;)o=t[n],i=o.prev,i&&3===i.type&&"\n"!=i.value.charAt(i.value-1)?i.value+="\n":o.parent.insert(new r("#text",3),o,!0).value="\n"}),ne.addNodeFilter("pre",function(e){for(var t,n,o,r,i=e.length;i--;)for(t=e[i].getAll("br"),n=t.length;n--;)o=t[n],r=o.prev,r&&3==r.type&&(r.value=r.value.replace(/\r?\n$/,""))}))}function T(){X.bind(n.getBody(),"mouseup",function(){var e,t=Q.getNode();"IMG"==t.nodeName&&((e=X.getStyle(t,"width"))&&(X.setAttrib(t,"width",e.replace(/[^0-9%]+/g,"")),X.setStyle(t,"width","")),(e=X.getStyle(t,"height"))&&(X.setAttrib(t,"height",e.replace(/[^0-9%]+/g,"")),X.setStyle(t,"height","")))})}function P(){n.on("keydown",function(t){var o,r,i,s,a;if(!f(t)&&t.keyCode==e.BACKSPACE&&(o=Q.getRng(),r=o.startContainer,i=o.startOffset,s=X.getRoot(),a=r,o.collapsed&&0===i)){for(;a&&a.parentNode&&a.parentNode.firstChild==a&&a.parentNode!=s;)a=a.parentNode;"BLOCKQUOTE"===a.tagName&&(n.formatter.toggle("blockquote",null,a),o=X.createRng(),o.setStart(r,0),o.setEnd(r,0),Q.setRng(o))}})}function k(){function e(){G(),o("StyleWithCSS",!1),o("enableInlineTableEditing",!1),ee.object_resizing||o("enableObjectResizing",!1)}ee.readonly||n.on("BeforeExecCommand MouseDown",e)}function I(){function e(){Y(X.select("a"),function(e){var t=e.parentNode,n=X.getRoot();if(t.lastChild===e){for(;t&&!X.isBlock(t);){if(t.parentNode.lastChild!==t||t===n)return;t=t.parentNode}X.add(t,"br",{"data-mce-bogus":1})}})}n.on("SetContent ExecCommand",function(t){"setcontent"!=t.type&&"mceInsertLink"!==t.command||e()})}function N(){ee.forced_root_block&&n.on("init",function(){o("DefaultParagraphSeparator",ee.forced_root_block)})}function R(){n.on("keydown",function(e){var t;f(e)||e.keyCode!=J||(t=n.getDoc().selection.createRange(),t&&t.item&&(e.preventDefault(),n.undoManager.beforeChange(),X.remove(t.item(0)),n.undoManager.add()))})}function D(){var e;p()>=10&&(e="",Y("p div h1 h2 h3 h4 h5 h6".split(" "),function(t,n){e+=(n>0?",":"")+t+":empty"}),n.contentStyles.push(e+"{padding-right: 1px !important}"))}function M(){p()<9&&(te.addNodeFilter("noscript",function(e){for(var t,n,o=e.length;o--;)t=e[o],n=t.firstChild,n&&t.attr("data-mce-innertext",n.value)}),ne.addNodeFilter("noscript",function(e){for(var t,n,o,s=e.length;s--;)t=e[s],n=e[s].firstChild,n?n.value=i.decode(n.value):(o=t.attributes.map["data-mce-innertext"],o&&(t.attr("data-mce-innertext",null),n=new r("#text",3),n.value=o,n.raw=!0,t.append(n)))}))}function O(){function e(e,t){var n=a.createTextRange();try{n.moveToPoint(e,t)}catch(e){n=null}return n}function t(t){var o;t.button?(o=e(t.x,t.y),o&&(o.compareEndPoints("StartToStart",r)>0?o.setEndPoint("StartToStart",r):o.setEndPoint("EndToEnd",r),o.select())):n()}function n(){var e=s.selection.createRange();r&&!e.item&&0===e.compareEndPoints("StartToEnd",e)&&r.select(),X.unbind(s,"mouseup",n),X.unbind(s,"mousemove",t),r=o=0}var o,r,i,s=X.doc,a=s.body;s.documentElement.unselectable=!0,X.bind(s,"mousedown contextmenu",function(a){if("HTML"===a.target.nodeName){if(o&&n(),i=s.documentElement,i.scrollHeight>i.clientHeight)return;o=1,r=e(a.x,a.y),r&&(X.bind(s,"mouseup",n),X.bind(s,"mousemove",t),X.getRoot().focus(),r.select())}})}function A(){n.on("keyup focusin mouseup",function(t){65==t.keyCode&&e.metaKeyPressed(t)||Q.normalize()},!0)}function L(){n.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")}function F(){n.inline||n.on("keydown",function(){document.activeElement==document.body&&n.getWin().focus()})}function B(){n.inline||(n.contentStyles.push("body {min-height: 150px}"),n.on("click",function(e){var t;if("HTML"==e.target.nodeName){if(s.ie>11)return void n.getBody().focus();t=n.selection.getRng(),n.getBody().focus(),n.selection.setRng(t),n.selection.normalize(),n.nodeChanged()}}))}function z(){s.mac&&n.on("keydown",function(t){!e.metaKeyPressed(t)||t.shiftKey||37!=t.keyCode&&39!=t.keyCode||(t.preventDefault(),n.selection.getSel().modify("move",37==t.keyCode?"backward":"forward","lineboundary"))})}function U(){o("AutoUrlDetect",!1)}function H(){n.on("click",function(e){var t=e.target;do if("A"===t.tagName)return void e.preventDefault();while(t=t.parentNode)}),n.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")}function W(){n.on("init",function(){n.dom.bind(n.getBody(),"submit",function(e){e.preventDefault()})})}function V(){te.addNodeFilter("br",function(e){for(var t=e.length;t--;)"Apple-interchange-newline"==e[t].attr("class")&&e[t].remove()})}function q(){n.on("dragstart",function(e){m(e)}),n.on("drop",function(e){if(!f(e)){var o=h(e);if(o&&o.id!=n.id){e.preventDefault();var r=t.getCaretRangeFromPoint(e.x,e.y,n.getDoc());Q.setRng(r),g(o.html,!0)}}})}function G(){}function K(){var e;return!oe||n.removed?0:(e=n.selection.getSel(),!e||!e.rangeCount||0===e.rangeCount)}function $(){function t(e){var t=new c(e.getBody()),n=e.selection.getRng(),o=u.fromRangeStart(n),r=u.fromRangeEnd(n),i=t.prev(o),s=t.next(r);return!e.selection.isCollapsed()&&(!i||i.isAtStart()&&o.isEqual(i))&&(!s||s.isAtEnd()&&o.isEqual(s))}n.on("keypress",function(o){!f(o)&&!Q.isCollapsed()&&o.charCode>31&&!e.metaKeyPressed(o)&&t(n)&&(o.preventDefault(),n.setContent(String.fromCharCode(o.charCode)),n.selection.select(n.getBody(),!0),n.selection.collapse(!1),n.nodeChanged())}),n.on("keydown",function(e){var o=e.keyCode;f(e)||o!=Z&&o!=J||t(n)&&(e.preventDefault(),n.setContent(""),n.nodeChanged())})}var Y=a.each,J=e.BACKSPACE,Z=e.DELETE,X=n.dom,Q=n.selection,ee=n.settings,te=n.parser,ne=n.serializer,oe=s.gecko,re=s.ie,ie=s.webkit,se="data:text/mce-internal,",ae=re?"Text":"URL";return P(),y(),s.windowsPhone||A(),ie&&($(),b(),C(),N(),W(),j(),V(),s.iOS?(F(),B(),H()):v()),re&&s.ie<11&&(_(),w(),S(),T(),R(),D(),M(),O()),s.ie>=11&&(B(),j()),s.ie&&(v(),U(),q()),oe&&($(),_(),x(),E(),k(),I(),L(),z(),j()),{refreshContentEditable:G,isHidden:K}}}),l("tinymce.core.init.InitContentBody",["global!document","global!window","tinymce.core.caret.CaretContainerInput","tinymce.core.dom.DOMUtils","tinymce.core.dom.Selection","tinymce.core.dom.Serializer","tinymce.core.EditorUpload","tinymce.core.ErrorReporter","tinymce.core.ForceBlocks","tinymce.core.Formatter","tinymce.core.html.DomParser","tinymce.core.html.Node","tinymce.core.html.Schema","tinymce.core.keyboard.KeyboardOverrides","tinymce.core.NodeChange","tinymce.core.SelectionOverrides","tinymce.core.UndoManager","tinymce.core.util.Delay","tinymce.core.util.Quirks","tinymce.core.util.Tools"],function(e,t,n,o,r,i,s,a,l,d,u,c,p,f,m,h,g,y,v,b){var _=o.DOM,x=function(e){var t=new u(e.settings,e.schema);return t.addAttributeFilter("src,href,style,tabindex",function(t,n){for(var o,r,i,s=t.length,a=e.dom;s--;)if(o=t[s],r=o.attr(n),i="data-mce-"+n,!o.attributes.map[i]){if(0===r.indexOf("data:")||0===r.indexOf("blob:"))continue;"style"===n?(r=a.serializeStyle(a.parseStyle(r),o.name),r.length||(r=null),o.attr(i,r),o.attr(n,r)):"tabindex"===n?(o.attr(i,r),o.attr(n,null)):o.attr(i,e.convertURL(r,n,o.name))}}),t.addNodeFilter("script",function(e){for(var t,n,o=e.length;o--;)t=e[o],n=t.attr("type")||"no/type",0!==n.indexOf("mce-")&&t.attr("type","mce-"+n)}),t.addNodeFilter("#cdata",function(e){for(var t,n=e.length;n--;)t=e[n],t.type=8,t.name="#comment",t.value="[CDATA["+t.value+"]]"}),t.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(t){for(var n,o=t.length,r=e.schema.getNonEmptyElements();o--;)n=t[o],n.isEmpty(r)&&0===n.getAll("br").length&&(n.append(new c("br",1)).shortEnded=!0)}),t},C=function(e){e.settings.auto_focus&&y.setEditorTimeout(e,function(){var t;t=e.settings.auto_focus===!0?e:e.editorManager.get(e.settings.auto_focus),t.destroyed||t.focus()},100)},E=function(e){e.bindPendingEventDelegates(),e.initialized=!0,e.fire("init"),e.focus(!0),e.nodeChanged({initial:!0}),e.execCallback("init_instance_callback",e),C(e)},w=function(u,c){var y,C,w=u.settings,j=u.getElement(),S=u.getDoc();w.inline||(u.getElement().style.visibility=u.orgVisibility),c||w.content_editable||(S.open(),S.write(u.iframeHTML),S.close()),w.content_editable&&(u.on("remove",function(){var e=this.getBody();_.removeClass(e,"mce-content-body"),_.removeClass(e,"mce-edit-focus"),_.setAttrib(e,"contentEditable",null)}),_.addClass(j,"mce-content-body"),u.contentDocument=S=w.content_document||e,u.contentWindow=w.content_window||t,u.bodyElement=j,w.content_document=w.content_window=null,w.root_name=j.nodeName.toLowerCase()),y=u.getBody(),y.disabled=!0,u.readonly=w.readonly,u.readonly||(u.inline&&"static"===_.getStyle(y,"position",!0)&&(y.style.position="relative"),y.contentEditable=u.getParam("content_editable_state",!0)),y.disabled=!1,u.editorUpload=new s(u),u.schema=new p(w),u.dom=new o(S,{keep_values:!0,url_converter:u.convertURL,url_converter_scope:u,hex_colors:w.force_hex_style_colors,class_filter:w.class_filter,update_styles:!0,root_element:u.inline?u.getBody():null,collect:w.content_editable,schema:u.schema,onSetAttrib:function(e){u.fire("SetAttrib",e)}}),u.parser=x(u),u.serializer=new i(w,u),u.selection=new r(u.dom,u.getWin(),u.serializer,u),u.formatter=new d(u),u.undoManager=new g(u),u._nodeChangeDispatcher=new m(u),u._selectionOverrides=new h(u),n.setup(u),f.setup(u),l.setup(u),u.fire("PreInit"),w.browser_spellcheck||w.gecko_spellcheck||(S.body.spellcheck=!1,_.setAttrib(y,"spellcheck","false")),u.quirks=new v(u),u.fire("PostRender"),w.directionality&&(y.dir=w.directionality),w.nowrap&&(y.style.whiteSpace="nowrap"),w.protect&&u.on("BeforeSetContent",function(e){b.each(w.protect,function(t){e.content=e.content.replace(t,function(e){return"<!--mce:protected "+escape(e)+"-->"})})}),u.on("SetContent",function(){u.addVisual(u.getBody())}),w.padd_empty_editor&&u.on("PostProcess",function(e){e.content=e.content.replace(/^(<p[^>]*>(&nbsp;|&#160;|\s|\u00a0|<br \/>|)<\/p>[\r\n]*|<br \/>[\r\n]*)$/,"")}),u.load({initial:!0,format:"html"}),u.startContent=u.getContent({format:"raw"}),u.on("compositionstart compositionend",function(e){u.composing="compositionstart"===e.type}),u.contentStyles.length>0&&(C="",b.each(u.contentStyles,function(e){C+=e+"\r\n"}),u.dom.addStyle(C)),u.dom.styleSheetLoader.loadAll(u.contentCSS,function(e){E(u)},function(e){E(u),a.contentCssError(u,e)})};return{initContentBody:w}}),l("tinymce.core.PluginManager",["tinymce.core.AddOnManager"],function(e){return e.PluginManager}),l("tinymce.core.ThemeManager",["tinymce.core.AddOnManager"],function(e){return e.ThemeManager}),l("tinymce.core.init.Init",["global!document","global!window","tinymce.core.dom.DOMUtils","tinymce.core.Env","tinymce.core.init.InitContentBody","tinymce.core.PluginManager","tinymce.core.ThemeManager","tinymce.core.util.Tools","tinymce.core.util.Uuid"],function(e,t,n,o,r,i,s,a,l){var d=n.DOM,u=function(e,t,n){var o,r,s=i.get(n);if(o=i.urls[n]||e.documentBaseUrl.replace(/\/$/,""),n=a.trim(n),s&&a.inArray(t,n)===-1){if(a.each(i.dependencies(n),function(n){u(e,t,n)}),e.plugins[n])return;r=new s(e,o,e.$),e.plugins[n]=r,r.init&&(r.init(e,o),t.push(n))}},c=function(e){var t=[];a.each(e.settings.plugins.replace(/\-/g,"").split(/[ ,]/),function(n){u(e,t,n)})},p=function(e){var t,n=e.settings;n.theme&&("function"!=typeof n.theme?(n.theme=n.theme.replace(/-/,""),t=s.get(n.theme),e.theme=new t(e,s.urls[n.theme]),e.theme.init&&e.theme.init(e,s.urls[n.theme]||e.documentBaseUrl.replace(/\/$/,""),e.$)):e.theme=n.theme)},f=function(e){var t,n,o,r,i,s=e.settings,a=e.getElement();return s.render_ui&&e.theme&&(e.orgDisplay=a.style.display,"function"!=typeof s.theme?(t=s.width||d.getStyle(a,"width")||"100%",n=s.height||d.getStyle(a,"height")||a.offsetHeight,o=s.min_height||100,r=/^[0-9\.]+(|px)$/i,r.test(""+t)&&(t=Math.max(parseInt(t,10),100)),r.test(""+n)&&(n=Math.max(parseInt(n,10),o)),i=e.theme.renderUI({targetNode:a,width:t,height:n,deltaWidth:s.delta_width,deltaHeight:s.delta_height}),s.content_editable||(n=(i.iframeHeight||n)+("number"==typeof n?i.deltaHeight||0:""),n<o&&(n=o))):(i=s.theme(e,a),i.editorContainer.nodeType&&(i.editorContainer.id=i.editorContainer.id||e.id+"_parent"),i.iframeContainer.nodeType&&(i.iframeContainer.id=i.iframeContainer.id||e.id+"_iframecontainer"),n=i.iframeHeight||a.offsetHeight),e.editorContainer=i.editorContainer,i.height=n),i},m=function(n,i){if(e.domain!==t.location.hostname&&o.ie&&o.ie<12){var s=l.uuid("mce");n[s]=function(){r.initContentBody(n)};var a='javascript:(function(){document.open();document.domain="'+e.domain+'";var ed = window.parent.tinymce.get("'+n.id+'");document.write(ed.iframeHTML);document.close();ed.'+s+"(true);})()";return d.setAttrib(i,"src",a),!0}return!1},h=function(e,t){var n,r,i=e.settings;e.iframeHTML=i.doctype+"<html><head>",i.document_base_url!=e.documentBaseUrl&&(e.iframeHTML+='<base href="'+e.documentBaseURI.getURI()+'" />'),!o.caretAfter&&i.ie7_compat&&(e.iframeHTML+='<meta http-equiv="X-UA-Compatible" content="IE=7" />'),e.iframeHTML+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />',n=i.body_id||"tinymce",n.indexOf("=")!=-1&&(n=e.getParam("body_id","","hash"),n=n[e.id]||n),r=i.body_class||"",r.indexOf("=")!=-1&&(r=e.getParam("body_class","","hash"),r=r[e.id]||""),i.content_security_policy&&(e.iframeHTML+='<meta http-equiv="Content-Security-Policy" content="'+i.content_security_policy+'" />'),e.iframeHTML+='</head><body id="'+n+'" class="mce-content-body '+r+'" data-id="'+e.id+'"><br></body></html>';var s=d.create("iframe",{id:e.id+"_ifr",frameBorder:"0",allowTransparency:"true",title:e.editorManager.translate("Rich Text Area. Press ALT-F9 for menu. Press ALT-F10 for toolbar. Press ALT-0 for help"),style:{width:"100%",height:t.height,display:"block"}});s.onload=function(){s.onload=null,e.fire("load")};var a=m(e,s);return e.contentAreaContainer=t.iframeContainer,e.iframeElement=s,d.add(t.iframeContainer,s),a},g=function(e){var t,n=e.settings,o=e.getElement();if(e.rtl=n.rtl_ui||e.editorManager.i18n.rtl,e.editorManager.i18n.setCode(n.language),n.aria_label=n.aria_label||d.getAttrib(o,"aria-label",e.getLang("aria.rich_text_area")),e.fire("ScriptsLoaded"),p(e),c(e),t=f(e),n.content_css&&a.each(a.explode(n.content_css),function(t){e.contentCSS.push(e.documentBaseURI.toAbsolute(t))}),n.content_style&&e.contentStyles.push(n.content_style),n.content_editable)return r.initContentBody(e);var i=h(e,t);t.editorContainer&&(d.get(t.editorContainer).style.display=e.orgDisplay,e.hidden=d.isHidden(t.editorContainer)),e.getElement().style.display="none",d.setAttrib(e.id,"aria-hidden",!0),i||r.initContentBody(e)};return{init:g}}),l("tinymce.core.init.Render",["global!window","tinymce.core.dom.DOMUtils","tinymce.core.dom.EventUtils","tinymce.core.dom.ScriptLoader","tinymce.core.Env","tinymce.core.ErrorReporter","tinymce.core.init.Init","tinymce.core.NotificationManager","tinymce.core.PluginManager","tinymce.core.ThemeManager","tinymce.core.util.Tools","tinymce.core.WindowManager"],function(e,t,n,o,r,i,s,a,l,d,u,c){var p=t.DOM,f=function(e,t){var n=e.settings,r=o.ScriptLoader;if(n.language&&"en"!=n.language&&!n.language_url&&(n.language_url=e.editorManager.baseURL+"/langs/"+n.language+".js"),n.language_url&&r.add(n.language_url),n.theme&&"function"!=typeof n.theme&&"-"!=n.theme.charAt(0)&&!d.urls[n.theme]){var a=n.theme_url;a=a?e.documentBaseURI.toAbsolute(a):"themes/"+n.theme+"/theme"+t+".js",d.load(n.theme,a)}u.isArray(n.plugins)&&(n.plugins=n.plugins.join(" ")),u.each(n.external_plugins,function(e,t){l.load(t,e),n.plugins+=" "+t}),u.each(n.plugins.split(/[ ,]/),function(e){if(e=u.trim(e),e&&!l.urls[e])if("-"===e.charAt(0)){e=e.substr(1,e.length);var n=l.dependencies(e);u.each(n,function(e){var n={prefix:"plugins/",resource:e,suffix:"/plugin"+t+".js"};e=l.createUrl(n,e),l.load(e.resource,e)})}else l.load(e,{prefix:"plugins/",resource:e,suffix:"/plugin"+t+".js"})}),r.loadQueue(function(){e.removed||s.init(e)},e,function(t){i.pluginLoadError(e,t[0]),e.removed||s.init(e)})},m=function(t){function o(){p.unbind(e,"ready",o),t.render()}var i=t.settings,s=t.id;if(!n.Event.domLoaded)return void p.bind(e,"ready",o);if(t.getElement()&&r.contentEditable){i.inline?t.inline=!0:(t.orgVisibility=t.getElement().style.visibility,t.getElement().style.visibility="hidden");var l=t.getElement().form||p.getParent(s,"form");l&&(t.formElement=l,i.hidden_input&&!/TEXTAREA|INPUT/i.test(t.getElement().nodeName)&&(p.insertAfter(p.create("input",{type:"hidden",name:s}),s),t.hasHiddenInput=!0),t.formEventDelegate=function(e){t.fire(e.type,e)},p.bind(l,"submit reset",t.formEventDelegate),t.on("reset",function(){t.setContent(t.startContent,{format:"raw"})}),!i.submit_patch||l.submit.nodeType||l.submit.length||l._mceOldSubmit||(l._mceOldSubmit=l.submit,l.submit=function(){return t.editorManager.triggerSave(),t.setDirty(!1),l._mceOldSubmit(l)})),t.windowManager=new c(t),t.notificationManager=new a(t),"xml"===i.encoding&&t.on("GetContent",function(e){e.save&&(e.content=p.encode(e.content))}),i.add_form_submit_trigger&&t.on("submit",function(){t.initialized&&t.save()}),i.add_unload_trigger&&(t._beforeUnload=function(){!t.initialized||t.destroyed||t.isHidden()||t.save({format:"raw",no_events:!0,set_dirty:!1})},t.editorManager.on("BeforeUnload",t._beforeUnload)),t.editorManager.add(t),f(t,t.suffix)}};return{render:m}}),l("tinymce.core.Mode",[],function(){function e(e,t,n){try{e.getDoc().execCommand(t,!1,n)}catch(e){}}function t(e){var t,n;return t=e.getBody(),n=function(t){e.dom.getParents(t.target,"a").length>0&&t.preventDefault()},e.dom.bind(t,"click",n),{unbind:function(){e.dom.unbind(t,"click",n)}}}function n(n,o){n._clickBlocker&&(n._clickBlocker.unbind(),n._clickBlocker=null),o?(n._clickBlocker=t(n),n.selection.controlSelection.hideResizeRect(),n.readonly=!0,n.getBody().contentEditable=!1):(n.readonly=!1,n.getBody().contentEditable=!0,e(n,"StyleWithCSS",!1),e(n,"enableInlineTableEditing",!1),e(n,"enableObjectResizing",!1),n.focus(),n.nodeChanged())}function o(e,t){var o=e.readonly?"readonly":"design";t!=o&&(e.initialized?n(e,"readonly"==t):e.on("init",function(){n(e,"readonly"==t)}),e.fire("SwitchMode",{mode:t}))}return{setMode:o}}),l("tinymce.core.ui.Sidebar",[],function(){var e=function(e,t,n){var o=e.sidebars?e.sidebars:[];o.push({name:t,settings:n}),e.sidebars=o};return{add:e}}),l("tinymce.core.Editor",["tinymce.core.AddOnManager","tinymce.core.dom.DomQuery","tinymce.core.dom.DOMUtils","tinymce.core.EditorCommands","tinymce.core.EditorObservable","tinymce.core.Env","tinymce.core.html.Serializer","tinymce.core.init.Render","tinymce.core.Mode","tinymce.core.Shortcuts","tinymce.core.ui.Sidebar","tinymce.core.util.Tools","tinymce.core.util.URI","tinymce.core.util.Uuid"],function(e,t,n,o,r,i,s,a,l,d,u,c,p,f){function m(n,r,s){var a,l,u,c=this;a=c.documentBaseUrl=s.documentBaseURL,l=s.baseURI,u=s.defaultSettings,r=g({id:n,theme:"modern",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:a,add_form_submit_trigger:!0,submit_patch:!0,add_unload_trigger:!0,convert_urls:!0,relative_urls:!0,remove_script_host:!0,object_resizing:!0,doctype:"<!DOCTYPE html>",visual:!0,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",forced_root_block:"p",hidden_input:!0,padd_empty_editor:!0,render_ui:!0,indentation:"30px",inline_styles:!0,convert_fonts_to_spans:!0,indent:"simple",indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",validate:!0,entity_encoding:"named",url_converter:c.convertURL,url_converter_scope:c,ie7_compat:!0},u,r),u&&u.external_plugins&&r.external_plugins&&(r.external_plugins=g({},u.external_plugins,r.external_plugins)),c.settings=r,e.language=r.language||"en",e.languageLoad=r.language_load,e.baseURL=s.baseURL,c.id=r.id=n,c.setDirty(!1),c.plugins={},c.documentBaseURI=new p(r.document_base_url||a,{base_uri:l}),c.baseURI=l,c.contentCSS=[],c.contentStyles=[],c.shortcuts=new d(c),c.loadedCSS={},c.editorCommands=new o(c),c.suffix=s.suffix,c.editorManager=s,c.inline=r.inline,c.settings.content_editable=c.inline,r.cache_suffix&&(i.cacheSuffix=r.cache_suffix.replace(/^[\?\&]+/,"")),r.override_viewport===!1&&(i.overrideViewPort=!1),s.fire("SetupEditor",c),c.execCallback("setup",c),c.$=t.overrideDefaults(function(){return{context:c.inline?c.getBody():c.getDoc(),element:c.getBody()}})}var h=n.DOM,g=c.extend,y=c.each,v=c.trim,b=c.resolve,_=i.gecko,x=i.ie;return m.prototype={render:function(){a.render(this)},focus:function(e){function t(e){return s.dom.getParent(e,function(e){return"true"===s.dom.getContentEditable(e)})}var n,o,r,s=this,a=s.selection,l=s.settings.content_editable,d=s.getDoc(),u=s.getBody();if(!s.removed){if(!e){if(n=a.getRng(),n.item&&(o=n.item(0)),s.quirks.refreshContentEditable(),r=t(a.getNode()),s.$.contains(u,r))return r.focus(),a.normalize(),void s.editorManager.setActive(s);if(l||(i.opera||s.getBody().focus(),s.getWin().focus()),_||l){if(u.setActive)try{u.setActive()}catch(e){u.focus()}else u.focus();l&&a.normalize()}o&&o.ownerDocument==d&&(n=d.body.createControlRange(),n.addElement(o),n.select())}s.editorManager.setActive(s)}},execCallback:function(e){var t,n=this,o=n.settings[e];if(o)return n.callbackLookup&&(t=n.callbackLookup[e])&&(o=t.func,t=t.scope),"string"==typeof o&&(t=o.replace(/\.\w+$/,""),t=t?b(t):0,o=b(o),n.callbackLookup=n.callbackLookup||{},n.callbackLookup[e]={func:o,scope:t}),o.apply(t||n,Array.prototype.slice.call(arguments,1))},translate:function(e){var t=this.settings.language||"en",n=this.editorManager.i18n;return e?(e=n.data[t+"."+e]||e.replace(/\{\#([^\}]+)\}/g,function(e,o){return n.data[t+"."+o]||"{#"+o+"}"}),this.editorManager.translate(e)):""},getLang:function(e,t){return this.editorManager.i18n.data[(this.settings.language||"en")+"."+e]||(void 0!==t?t:"{#"+e+"}")},getParam:function(e,t,n){var o,r=e in this.settings?this.settings[e]:t;return"hash"===n?(o={},"string"==typeof r?y(r.indexOf("=")>0?r.split(/[;,](?![^=;,]*(?:[;,]|$))/):r.split(","),function(e){e=e.split("="),e.length>1?o[v(e[0])]=v(e[1]):o[v(e[0])]=v(e)}):o=r,o):r},nodeChanged:function(e){this._nodeChangeDispatcher.nodeChanged(e)},addButton:function(e,t){var n=this;t.cmd&&(t.onclick=function(){n.execCommand(t.cmd)}),t.text||t.icon||(t.icon=e),n.buttons=n.buttons||{},t.tooltip=t.tooltip||t.title,n.buttons[e]=t},addSidebar:function(e,t){return u.add(this,e,t)},addMenuItem:function(e,t){var n=this;t.cmd&&(t.onclick=function(){n.execCommand(t.cmd)}),n.menuItems=n.menuItems||{},n.menuItems[e]=t},addContextToolbar:function(e,t){var n,o=this;o.contextToolbars=o.contextToolbars||[],"string"==typeof e&&(n=e,e=function(e){return o.dom.is(e,n)}),o.contextToolbars.push({id:f.uuid("mcet"),predicate:e,items:t})},addCommand:function(e,t,n){this.editorCommands.addCommand(e,t,n)},addQueryStateHandler:function(e,t,n){this.editorCommands.addQueryStateHandler(e,t,n)},addQueryValueHandler:function(e,t,n){
this.editorCommands.addQueryValueHandler(e,t,n)},addShortcut:function(e,t,n,o){this.shortcuts.add(e,t,n,o)},execCommand:function(e,t,n,o){return this.editorCommands.execCommand(e,t,n,o)},queryCommandState:function(e){return this.editorCommands.queryCommandState(e)},queryCommandValue:function(e){return this.editorCommands.queryCommandValue(e)},queryCommandSupported:function(e){return this.editorCommands.queryCommandSupported(e)},show:function(){var e=this;e.hidden&&(e.hidden=!1,e.inline?e.getBody().contentEditable=!0:(h.show(e.getContainer()),h.hide(e.id)),e.load(),e.fire("show"))},hide:function(){var e=this,t=e.getDoc();e.hidden||(x&&t&&!e.inline&&t.execCommand("SelectAll"),e.save(),e.inline?(e.getBody().contentEditable=!1,e==e.editorManager.focusedEditor&&(e.editorManager.focusedEditor=null)):(h.hide(e.getContainer()),h.setStyle(e.id,"display",e.orgDisplay)),e.hidden=!0,e.fire("hide"))},isHidden:function(){return!!this.hidden},setProgressState:function(e,t){this.fire("ProgressState",{state:e,time:t})},load:function(e){var t,n=this,o=n.getElement();return n.removed?"":o?(e=e||{},e.load=!0,t=n.setContent(void 0!==o.value?o.value:o.innerHTML,e),e.element=o,e.no_events||n.fire("LoadContent",e),e.element=o=null,t):void 0},save:function(e){var t,n,o=this,r=o.getElement();if(r&&o.initialized&&!o.removed)return e=e||{},e.save=!0,e.element=r,t=e.content=o.getContent(e),e.no_events||o.fire("SaveContent",e),"raw"==e.format&&o.fire("RawSaveContent",e),t=e.content,/TEXTAREA|INPUT/i.test(r.nodeName)?r.value=t:(o.inline||(r.innerHTML=t),(n=h.getParent(o.id,"form"))&&y(n.elements,function(e){if(e.name==o.id)return e.value=t,!1})),e.element=r=null,e.set_dirty!==!1&&o.setDirty(!1),t},setContent:function(e,t){var n,o,r=this,i=r.getBody();return t=t||{},t.format=t.format||"html",t.set=!0,t.content=e,t.no_events||r.fire("BeforeSetContent",t),e=t.content,0===e.length||/^\s+$/.test(e)?(o=x&&x<11?"":'<br data-mce-bogus="1">',"TABLE"==i.nodeName?e="<tr><td>"+o+"</td></tr>":/^(UL|OL)$/.test(i.nodeName)&&(e="<li>"+o+"</li>"),n=r.settings.forced_root_block,n&&r.schema.isValidChild(i.nodeName.toLowerCase(),n.toLowerCase())?(e=o,e=r.dom.createHTML(n,r.settings.forced_root_block_attrs,e)):x||e||(e='<br data-mce-bogus="1">'),r.dom.setHTML(i,e),r.fire("SetContent",t)):("raw"!==t.format&&(e=new s({validate:r.validate},r.schema).serialize(r.parser.parse(e,{isRootContent:!0}))),t.content=v(e),r.dom.setHTML(i,t.content),t.no_events||r.fire("SetContent",t)),t.content},getContent:function(e){var t,n=this,o=n.getBody();return n.removed?"":(e=e||{},e.format=e.format||"html",e.get=!0,e.getInner=!0,e.no_events||n.fire("BeforeGetContent",e),t="raw"==e.format?c.trim(n.serializer.getTrimmedContent()):"text"==e.format?o.innerText||o.textContent:n.serializer.serialize(o,e),"text"!=e.format?e.content=v(t):e.content=t,e.no_events||n.fire("GetContent",e),e.content)},insertContent:function(e,t){t&&(e=g({content:e},t)),this.execCommand("mceInsertContent",!1,e)},isDirty:function(){return!this.isNotDirty},setDirty:function(e){var t=!this.isNotDirty;this.isNotDirty=!e,e&&e!=t&&this.fire("dirty")},setMode:function(e){l.setMode(this,e)},getContainer:function(){var e=this;return e.container||(e.container=h.get(e.editorContainer||e.id+"_parent")),e.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return this.targetElm||(this.targetElm=h.get(this.id)),this.targetElm},getWin:function(){var e,t=this;return t.contentWindow||(e=t.iframeElement,e&&(t.contentWindow=e.contentWindow)),t.contentWindow},getDoc:function(){var e,t=this;return t.contentDocument||(e=t.getWin(),e&&(t.contentDocument=e.document)),t.contentDocument},getBody:function(){var e=this.getDoc();return this.bodyElement||(e?e.body:null)},convertURL:function(e,t,n){var o=this,r=o.settings;return r.urlconverter_callback?o.execCallback("urlconverter_callback",e,n,!0,t):!r.convert_urls||n&&"LINK"==n.nodeName||0===e.indexOf("file:")||0===e.length?e:r.relative_urls?o.documentBaseURI.toRelative(e):e=o.documentBaseURI.toAbsolute(e,r.remove_script_host)},addVisual:function(e){var t,n=this,o=n.settings,r=n.dom;e=e||n.getBody(),void 0===n.hasVisual&&(n.hasVisual=o.visual),y(r.select("table,a",e),function(e){var i;switch(e.nodeName){case"TABLE":return t=o.visual_table_class||"mce-item-table",i=r.getAttrib(e,"border"),void(i&&"0"!=i||!n.hasVisual?r.removeClass(e,t):r.addClass(e,t));case"A":return void(r.getAttrib(e,"href",!1)||(i=r.getAttrib(e,"name")||e.id,t=o.visual_anchor_class||"mce-item-anchor",i&&n.hasVisual?r.addClass(e,t):r.removeClass(e,t)))}}),n.fire("VisualAid",{element:e,hasVisual:n.hasVisual})},remove:function(){var e=this;e.removed||(e.save(),e.removed=1,e.unbindAllNativeEvents(),e.hasHiddenInput&&h.remove(e.getElement().nextSibling),e.inline||(x&&x<10&&e.getDoc().execCommand("SelectAll",!1,null),h.setStyle(e.id,"display",e.orgDisplay),e.getBody().onload=null),e.fire("remove"),e.editorManager.remove(e),h.remove(e.getContainer()),e._selectionOverrides.destroy(),e.editorUpload.destroy(),e.destroy())},destroy:function(e){var t,n=this;if(!n.destroyed){if(!e&&!n.removed)return void n.remove();e||(n.editorManager.off("beforeunload",n._beforeUnload),n.theme&&n.theme.destroy&&n.theme.destroy(),n.selection.destroy(),n.dom.destroy()),t=n.formElement,t&&(t._mceOldSubmit&&(t.submit=t._mceOldSubmit,t._mceOldSubmit=null),h.unbind(t,"submit reset",n.formEventDelegate)),n.contentAreaContainer=n.formElement=n.container=n.editorContainer=null,n.bodyElement=n.contentDocument=n.contentWindow=null,n.iframeElement=n.targetElm=null,n.selection&&(n.selection=n.selection.win=n.selection.dom=n.selection.dom.doc=null),n.destroyed=1}},uploadImages:function(e){return this.editorUpload.uploadImages(e)},_scanForImages:function(){return this.editorUpload.scanForImages()}},g(m.prototype,r),m}),l("tinymce.core.util.I18n",["tinymce.core.util.Tools"],function(e){"use strict";var t={},n="en";return{setCode:function(e){e&&(n=e,this.rtl=!!this.data[e]&&"rtl"===this.data[e]._dir)},getCode:function(){return n},rtl:!1,add:function(e,n){var o=t[e];o||(t[e]=o={});for(var r in n)o[r]=n[r];this.setCode(e)},translate:function(o){function r(t){return e.is(t,"function")?Object.prototype.toString.call(t):i(t)?"":""+t}function i(t){return""===t||null===t||e.is(t,"undefined")}function s(t){return t=r(t),e.hasOwn(a,t)?r(a[t]):t}var a=t[n]||{};if(i(o))return"";if(e.is(o,"object")&&e.hasOwn(o,"raw"))return r(o.raw);if(e.is(o,"array")){var l=o.slice(1);o=s(o[0]).replace(/\{([0-9]+)\}/g,function(t,n){return e.hasOwn(l,n)?r(l[n]):t})}return s(o).replace(/{context:\w+}$/,"")},data:t}}),l("tinymce.core.FocusManager",["tinymce.core.dom.DOMUtils","tinymce.core.util.Delay","tinymce.core.Env"],function(e,t,n){function o(e){function o(){try{return document.activeElement}catch(e){return document.body}}function d(e,t){if(t&&t.startContainer){if(!e.isChildOf(t.startContainer,e.getRoot())||!e.isChildOf(t.endContainer,e.getRoot()))return;return{startContainer:t.startContainer,startOffset:t.startOffset,endContainer:t.endContainer,endOffset:t.endOffset}}return t}function c(e,t){var n;return t.startContainer?(n=e.getDoc().createRange(),n.setStart(t.startContainer,t.startOffset),n.setEnd(t.endContainer,t.endOffset)):n=t,n}function p(p){var f=p.editor;f.on("init",function(){(f.inline||n.ie)&&("onbeforedeactivate"in document&&n.ie<9?f.dom.bind(f.getBody(),"beforedeactivate",function(e){if(e.target==f.getBody())try{f.lastRng=f.selection.getRng()}catch(e){}}):f.on("nodechange mouseup keyup",function(e){var t=o();"nodechange"==e.type&&e.selectionChange||(t&&t.id==f.id+"_ifr"&&(t=f.getBody()),f.dom.isChildOf(t,f.getBody())&&(f.lastRng=f.selection.getRng()))}),n.webkit&&!r&&(r=function(){var t=e.activeEditor;if(t&&t.selection){var n=t.selection.getRng();n&&!n.collapsed&&(f.lastRng=n)}},a.bind(document,"selectionchange",r)))}),f.on("setcontent",function(){f.lastRng=null}),f.on("mousedown",function(){f.selection.lastFocusBookmark=null}),f.on("focusin",function(){var t,n=e.focusedEditor;f.selection.lastFocusBookmark&&(t=c(f,f.selection.lastFocusBookmark),f.selection.lastFocusBookmark=null,f.selection.setRng(t)),n!=f&&(n&&n.fire("blur",{focusedEditor:f}),e.setActive(f),e.focusedEditor=f,f.fire("focus",{blurredEditor:n}),f.focus(!0)),f.lastRng=null}),f.on("focusout",function(){t.setEditorTimeout(f,function(){var t=e.focusedEditor;l(f,o())||t!=f||(f.fire("blur",{focusedEditor:null}),e.focusedEditor=null,f.selection&&(f.selection.lastFocusBookmark=null))})}),i||(i=function(t){var n,o=e.activeEditor;n=t.target,o&&n.ownerDocument===document&&(o.selection&&n!==o.getBody()&&u(f,n)&&(o.selection.lastFocusBookmark=d(o.dom,o.lastRng)),n===document.body||l(o,n)||e.focusedEditor!==o||(o.fire("blur",{focusedEditor:null}),e.focusedEditor=null))},a.bind(document,"focusin",i)),f.inline&&!s&&(s=function(t){var n=e.activeEditor,o=n.dom;if(n.inline&&o&&!o.isChildOf(t.target,n.getBody())){var r=n.selection.getRng();r.collapsed||(n.lastRng=r)}},a.bind(document,"mouseup",s))}function f(t){e.focusedEditor==t.editor&&(e.focusedEditor=null),e.activeEditor||(a.unbind(document,"selectionchange",r),a.unbind(document,"focusin",i),a.unbind(document,"mouseup",s),r=i=s=null)}e.on("AddEditor",p),e.on("RemoveEditor",f)}var r,i,s,a=e.DOM,l=function(e,t){var n=e?e.settings.custom_ui_selector:"",r=a.getParent(t,function(t){return o.isEditorUIElement(t)||!!n&&e.dom.is(t,n)});return null!==r},d=function(e){return e.inline===!0},u=function(e,t){return d(e)===!1||e.dom.isChildOf(t,e.getBody())===!1};return o.isEditorUIElement=function(e){return e.className.toString().indexOf("mce-")!==-1},o._isUIElement=l,o}),l("tinymce.core.LegacyInput",["tinymce.core.util.Tools"],function(e){var t=e.each,n=e.explode,o=function(e){e.on("AddEditor",function(e){var o=e.editor;o.on("preInit",function(){function e(e,n){t(n,function(t,n){t&&a.setStyle(e,n,t)}),a.rename(e,"span")}function r(e){a=o.dom,l.convert_fonts_to_spans&&t(a.select("font,u,strike",e.node),function(e){i[e.nodeName.toLowerCase()](a,e)})}var i,s,a,l=o.settings;l.inline_styles&&(s=n(l.font_size_legacy_values),i={font:function(t,n){e(n,{backgroundColor:n.style.backgroundColor,color:n.color,fontFamily:n.face,fontSize:s[parseInt(n.size,10)-1]})},u:function(t,n){"html4"===o.settings.schema&&e(n,{textDecoration:"underline"})},strike:function(t,n){e(n,{textDecoration:"line-through"})}},o.on("PreProcess SetContent",r))})})};return{register:o}}),l("tinymce.core.EditorManager",["tinymce.core.AddOnManager","tinymce.core.dom.DomQuery","tinymce.core.dom.DOMUtils","tinymce.core.Editor","tinymce.core.Env","tinymce.core.ErrorReporter","tinymce.core.FocusManager","tinymce.core.LegacyInput","tinymce.core.util.I18n","tinymce.core.util.Observable","tinymce.core.util.Promise","tinymce.core.util.Tools","tinymce.core.util.URI"],function(e,t,n,o,r,i,s,a,l,d,u,c,p){function f(e){x(v.editors,function(t){"scroll"===e.type?t.fire("ScrollWindow",e):t.fire("ResizeWindow",e)})}function m(e,n){n!==w&&(n?t(window).on("resize scroll",f):t(window).off("resize scroll",f),w=n)}function h(e){var t,n=v.editors;delete n[e.id];for(var o=0;o<n.length;o++)if(n[o]==e){n.splice(o,1),t=!0;break}return v.activeEditor==e&&(v.activeEditor=n[0]),v.focusedEditor==e&&(v.focusedEditor=null),t}function g(e){return e&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode&&(h(e),e.unbindAllNativeEvents(),e.destroy(!0),e.removed=!0,e=null),e}var y,v,b=n.DOM,_=c.explode,x=c.each,C=c.extend,E=0,w=!1;return v={$:t,majorVersion:"4",minorVersion:"6.3",releaseDate:"2017-05-30",editors:[],i18n:l,activeEditor:null,setup:function(){var e,t,n,o,r=this,i="";if(t=p.getDocumentBaseUrl(document.location),/^[^:]+:\/\/\/?[^\/]+\//.test(t)&&(t=t.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(t)||(t+="/")),n=window.tinymce||window.tinyMCEPreInit)e=n.base||n.baseURL,i=n.suffix;else{for(var a=document.getElementsByTagName("script"),l=0;l<a.length;l++){o=a[l].src;var d=o.substring(o.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(o)){d.indexOf(".min")!=-1&&(i=".min"),e=o.substring(0,o.lastIndexOf("/"));break}}!e&&document.currentScript&&(o=document.currentScript.src,o.indexOf(".min")!=-1&&(i=".min"),e=o.substring(0,o.lastIndexOf("/")))}r.baseURL=new p(t).toAbsolute(e),r.documentBaseURL=t,r.baseURI=new p(r.baseURL),r.suffix=i,r.focusManager=new s(r)},overrideDefaults:function(t){var n,o;n=t.base_url,n&&(this.baseURL=new p(this.documentBaseURL).toAbsolute(n.replace(/\/+$/,"")),this.baseURI=new p(this.baseURL)),o=t.suffix,t.suffix&&(this.suffix=o),this.defaultSettings=t;var r=t.plugin_base_urls;for(var i in r)e.PluginManager.urls[i]=r[i]},init:function(e){function n(e,t){return e.inline&&t.tagName.toLowerCase()in m}function s(e){var t=e.id;return t||(t=e.name,t=t&&!b.get(t)?e.name:b.uniqueId(),e.setAttribute("id",t)),t}function a(t){var n=e[t];if(n)return n.apply(h,Array.prototype.slice.call(arguments,2))}function l(e,t){return t.constructor===RegExp?t.test(e.className):b.hasClass(e,t)}function d(e){var t,n=[];if(r.ie&&r.ie<11)return i.initError("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tinymce.com/docs/get-started/system-requirements/"),[];if(e.types)return x(e.types,function(e){n=n.concat(b.select(e.selector))}),n;if(e.selector)return b.select(e.selector);if(e.target)return[e.target];switch(e.mode){case"exact":t=e.elements||"",t.length>0&&x(_(t),function(e){var t;(t=b.get(e))?n.push(t):x(document.forms,function(t){x(t.elements,function(t){t.name===e&&(e="mce_editor_"+E++,b.setAttrib(t,"id",e),n.push(t))})})});break;case"textareas":case"specific_textareas":x(b.select("textarea"),function(t){e.editor_deselector&&l(t,e.editor_deselector)||e.editor_selector&&!l(t,e.editor_selector)||n.push(t)})}return n}function p(){function r(e,t,n){var r=new o(e,t,h);f.push(r),r.on("init",function(){++u===l.length&&y(f)}),r.targetElm=r.targetElm||n,r.render()}var l,u=0,f=[];return b.unbind(window,"ready",p),a("onpageload"),l=t.unique(d(e)),e.types?void x(e.types,function(t){c.each(l,function(n){return!b.is(n,t.selector)||(r(s(n),C({},e,t),n),!1)})}):(c.each(l,function(e){g(h.get(e.id))}),l=c.grep(l,function(e){return!h.get(e.id)}),void(0===l.length?y([]):x(l,function(t){n(e,t)?i.initError("Could not initialize inline editor on invalid inline target element",t):r(s(t),e,t)})))}var f,m,h=this;m=c.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option tbody tfoot thead tr script noscript style textarea video audio iframe object menu"," ");var y=function(e){f=e};return h.settings=e,b.bind(window,"ready",p),new u(function(e){f?e(f):y=function(t){e(t)}})},get:function(e){return arguments.length?e in this.editors?this.editors[e]:null:this.editors},add:function(e){var t=this,n=t.editors;return n[e.id]=e,n.push(e),m(n,!0),t.activeEditor=e,t.fire("AddEditor",{editor:e}),y||(y=function(){t.fire("BeforeUnload")},b.bind(window,"beforeunload",y)),e},createEditor:function(e,t){return this.add(new o(e,t,this))},remove:function(e){var t,n,o=this,r=o.editors;{if(e)return"string"==typeof e?(e=e.selector||e,void x(b.select(e),function(e){n=r[e.id],n&&o.remove(n)})):(n=e,r[n.id]?(h(n)&&o.fire("RemoveEditor",{editor:n}),r.length||b.unbind(window,"beforeunload",y),n.remove(),m(r,r.length>0),n):null);for(t=r.length-1;t>=0;t--)o.remove(r[t])}},execCommand:function(e,t,n){var r=this,i=r.get(n);switch(e){case"mceAddEditor":return r.get(n)||new o(n,r.settings,r).render(),!0;case"mceRemoveEditor":return i&&i.remove(),!0;case"mceToggleEditor":return i?(i.isHidden()?i.show():i.hide(),!0):(r.execCommand("mceAddEditor",0,n),!0)}return!!r.activeEditor&&r.activeEditor.execCommand(e,t,n)},triggerSave:function(){x(this.editors,function(e){e.save()})},addI18n:function(e,t){l.add(e,t)},translate:function(e){return l.translate(e)},setActive:function(e){var t=this.activeEditor;this.activeEditor!=e&&(t&&t.fire("deactivate",{relatedTarget:e}),e.fire("activate",{relatedTarget:t})),this.activeEditor=e}},C(v,d),v.setup(),a.register(v),v}),l("tinymce.core.util.XHR",["tinymce.core.util.Observable","tinymce.core.util.Tools"],function(e,t){var n={send:function(e){function o(){!e.async||4==r.readyState||i++>1e4?(e.success&&i<1e4&&200==r.status?e.success.call(e.success_scope,""+r.responseText,r,e):e.error&&e.error.call(e.error_scope,i>1e4?"TIMED_OUT":"GENERAL",r,e),r=null):setTimeout(o,10)}var r,i=0;if(e.scope=e.scope||this,e.success_scope=e.success_scope||e.scope,e.error_scope=e.error_scope||e.scope,e.async=e.async!==!1,e.data=e.data||"",n.fire("beforeInitialize",{settings:e}),r=new XMLHttpRequest){if(r.overrideMimeType&&r.overrideMimeType(e.content_type),r.open(e.type||(e.data?"POST":"GET"),e.url,e.async),e.crossDomain&&(r.withCredentials=!0),e.content_type&&r.setRequestHeader("Content-Type",e.content_type),e.requestheaders&&t.each(e.requestheaders,function(e){r.setRequestHeader(e.key,e.value)}),r.setRequestHeader("X-Requested-With","XMLHttpRequest"),r=n.fire("beforeSend",{xhr:r,settings:e}).xhr,r.send(e.data),!e.async)return o();setTimeout(o,10)}}};return t.extend(n,e),n}),l("tinymce.core.util.JSON",[],function(){function e(t,n){var o,r,i,s;if(n=n||'"',null===t)return"null";if(i=typeof t,"string"==i)return r="\bb\tt\nn\ff\rr\"\"''\\\\",n+t.replace(/([\u0080-\uFFFF\x00-\x1f\"\'\\])/g,function(e,t){return'"'===n&&"'"===e?e:(o=r.indexOf(t),o+1?"\\"+r.charAt(o+1):(e=t.charCodeAt().toString(16),"\\u"+"0000".substring(e.length)+e))})+n;if("object"==i){if(t.hasOwnProperty&&"[object Array]"===Object.prototype.toString.call(t)){for(o=0,r="[";o<t.length;o++)r+=(o>0?",":"")+e(t[o],n);return r+"]"}r="{";for(s in t)t.hasOwnProperty(s)&&(r+="function"!=typeof t[s]?(r.length>1?","+n:n)+s+n+":"+e(t[s],n):"");return r+"}"}return""+t}return{serialize:e,parse:function(e){try{return window[String.fromCharCode(101)+"val"]("("+e+")")}catch(e){}}}}),l("tinymce.core.util.JSONRequest",["tinymce.core.util.JSON","tinymce.core.util.XHR","tinymce.core.util.Tools"],function(e,t,n){function o(e){this.settings=r({},e),this.count=0}var r=n.extend;return o.sendRPC=function(e){return(new o).send(e)},o.prototype={send:function(n){var o=n.error,i=n.success;n=r(this.settings,n),n.success=function(t,r){t=e.parse(t),"undefined"==typeof t&&(t={error:"JSON Parse error."}),t.error?o.call(n.error_scope||n.scope,t.error,r):i.call(n.success_scope||n.scope,t.result)},n.error=function(e,t){o&&o.call(n.error_scope||n.scope,e,t)},n.data=e.serialize({id:n.id||"c"+this.count++,method:n.method,params:n.params}),n.content_type="application/json",t.send(n)}},o}),l("tinymce.core.util.JSONP",["tinymce.core.dom.DOMUtils"],function(e){return{callbacks:{},count:0,send:function(t){var n=this,o=e.DOM,r=void 0!==t.count?t.count:n.count,i="tinymce_jsonp_"+r;n.callbacks[r]=function(e){o.remove(i),delete n.callbacks[r],t.callback(e)},o.add(o.doc.body,"script",{id:i,src:t.url,type:"text/javascript"}),n.count++}}}),l("tinymce.core.util.LocalStorage",[],function(){function e(){s=[];for(var e in i)s.push(e);o.length=s.length}function t(){function t(e){var t,n;return n=void 0!==e?d+e:o.indexOf(",",d),n===-1||n>o.length?null:(t=o.substring(d,n),d=n+1,t)}var n,o,s,d=0;if(i={},l){r.load(a),o=r.getAttribute(a)||"";do{var u=t();if(null===u)break;if(n=t(parseInt(u,32)||0),null!==n){if(u=t(),null===u)break;s=t(parseInt(u,32)||0),n&&(i[n]=s)}}while(null!==n);e()}}function n(){var t,n="";if(l){for(var o in i)t=i[o],n+=(n?",":"")+o.length.toString(32)+","+o+","+t.length.toString(32)+","+t;r.setAttribute(a,n);try{r.save(a)}catch(e){}e()}}var o,r,i,s,a,l;try{if(window.localStorage)return localStorage}catch(e){}return a="tinymce",r=document.documentElement,l=!!r.addBehavior,l&&r.addBehavior("#default#userData"),o={key:function(e){return s[e]},getItem:function(e){return e in i?i[e]:null},setItem:function(e,t){i[e]=""+t,n()},removeItem:function(e){delete i[e],n()},clear:function(){i={},n()}},t(),o}),l("tinymce.core.api.Compat",["tinymce.core.dom.DOMUtils","tinymce.core.dom.EventUtils","tinymce.core.dom.ScriptLoader","tinymce.core.AddOnManager","tinymce.core.util.Tools","tinymce.core.Env"],function(e,t,n,o,r,i){var s=function(s){s.DOM=e.DOM,s.ScriptLoader=n.ScriptLoader,s.PluginManager=o.PluginManager,s.ThemeManager=o.ThemeManager,s.dom=s.dom||{},s.dom.Event=t.Event,r.each("trim isArray is toArray makeMap each map grep inArray extend create walk createNS resolve explode _addCacheSuffix".split(" "),function(e){s[e]=r[e]}),r.each("isOpera isWebKit isIE isGecko isMac".split(" "),function(e){s[e]=i[e.substr(2).toLowerCase()]})};return{register:s}}),l("tinymce.core.util.Color",[],function(){function e(e){function r(e,r,i){var s,a,l,d,u,c;return s=0,a=0,l=0,e/=255,r/=255,i/=255,u=t(e,t(r,i)),c=n(e,n(r,i)),u==c?(l=u,{h:0,s:0,v:100*l}):(d=e==u?r-i:i==u?e-r:i-e,s=e==u?3:i==u?1:5,s=60*(s-d/(c-u)),a=(c-u)/c,l=c,{h:o(s),s:o(100*a),v:o(100*l)})}function i(e,r,i){var s,a,l,d;if(e=(parseInt(e,10)||0)%360,r=parseInt(r,10)/100,i=parseInt(i,10)/100,r=n(0,t(r,1)),i=n(0,t(i,1)),0===r)return void(c=p=f=o(255*i));switch(s=e/60,a=i*r,l=a*(1-Math.abs(s%2-1)),d=i-a,Math.floor(s)){case 0:c=a,p=l,f=0;break;case 1:c=l,p=a,f=0;break;case 2:c=0,p=a,f=l;break;case 3:c=0,p=l,f=a;break;case 4:c=l,p=0,f=a;break;case 5:c=a,p=0,f=l;break;default:c=p=f=0}c=o(255*(c+d)),p=o(255*(p+d)),f=o(255*(f+d))}function s(){function e(e){return e=parseInt(e,10).toString(16),e.length>1?e:"0"+e}return"#"+e(c)+e(p)+e(f)}function a(){return{r:c,g:p,b:f}}function l(){return r(c,p,f)}function d(e){var t;return"object"==typeof e?"r"in e?(c=e.r,p=e.g,f=e.b):"v"in e&&i(e.h,e.s,e.v):(t=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)[^\)]*\)/gi.exec(e))?(c=parseInt(t[1],10),p=parseInt(t[2],10),f=parseInt(t[3],10)):(t=/#([0-F]{2})([0-F]{2})([0-F]{2})/gi.exec(e))?(c=parseInt(t[1],16),p=parseInt(t[2],16),f=parseInt(t[3],16)):(t=/#([0-F])([0-F])([0-F])/gi.exec(e))&&(c=parseInt(t[1]+t[1],16),p=parseInt(t[2]+t[2],16),f=parseInt(t[3]+t[3],16)),c=c<0?0:c>255?255:c,p=p<0?0:p>255?255:p,f=f<0?0:f>255?255:f,u}var u=this,c=0,p=0,f=0;e&&d(e),u.toRgb=a,u.toHsv=l,u.toHex=s,u.parse=d}var t=Math.min,n=Math.max,o=Math.round;return e}),l("tinymce.core.ui.Layout",["tinymce.core.util.Class","tinymce.core.util.Tools"],function(e,t){"use strict";return e.extend({Defaults:{firstControlClass:"first",lastControlClass:"last"},init:function(e){this.settings=t.extend({},this.Defaults,e)},preRender:function(e){e.bodyClasses.add(this.settings.containerClass)},applyClasses:function(e){var t,n,o,r,i=this,s=i.settings;t=s.firstControlClass,n=s.lastControlClass,e.each(function(e){e.classes.remove(t).remove(n).add(s.controlClass),e.visible()&&(o||(o=e),r=e)}),o&&o.classes.add(t),r&&r.classes.add(n)},renderHtml:function(e){var t=this,n="";return t.applyClasses(e.items()),e.items().each(function(e){n+=e.renderHtml()}),n},recalc:function(){},postRender:function(){},isNative:function(){return!1}})}),l("tinymce.core.ui.AbsoluteLayout",["tinymce.core.ui.Layout"],function(e){"use strict";return e.extend({Defaults:{containerClass:"abs-layout",controlClass:"abs-layout-item"},recalc:function(e){e.items().filter(":visible").each(function(e){var t=e.settings;e.layoutRect({x:t.x,y:t.y,w:t.w,h:t.h}),e.recalc&&e.recalc()})},renderHtml:function(e){return'<div id="'+e._id+'-absend" class="'+e.classPrefix+'abs-end"></div>'+this._super(e)}})}),l("tinymce.core.ui.Button",["tinymce.core.ui.Widget"],function(e){"use strict";return e.extend({Defaults:{classes:"widget btn",role:"button"},init:function(e){var t,n=this;n._super(e),e=n.settings,t=n.settings.size,n.on("click mousedown",function(e){e.preventDefault()}),n.on("touchstart",function(e){n.fire("click",e),e.preventDefault()}),e.subtype&&n.classes.add(e.subtype),t&&n.classes.add("btn-"+t),e.icon&&n.icon(e.icon)},icon:function(e){return arguments.length?(this.state.set("icon",e),this):this.state.get("icon")},repaint:function(){var e,t=this.getEl().firstChild;t&&(e=t.style,e.width=e.height="100%"),this._super()},renderHtml:function(){var e,t=this,n=t._id,o=t.classPrefix,r=t.state.get("icon"),i=t.state.get("text"),s="";return e=t.settings.image,e?(r="none","string"!=typeof e&&(e=window.getSelection?e[0]:e[1]),e=" style=\"background-image: url('"+e+"')\""):e="",i&&(t.classes.add("btn-has-text"),s='<span class="'+o+'txt">'+t.encode(i)+"</span>"),r=r?o+"ico "+o+"i-"+r:"",'<div id="'+n+'" class="'+t.classes+'" tabindex="-1"><button role="presentation" type="button" tabindex="-1">'+(r?'<i class="'+r+'"'+e+"></i>":"")+s+"</button></div>"},bindStates:function(){function e(e){var r=n("span."+o,t.getEl());e?(r[0]||(n("button:first",t.getEl()).append('<span class="'+o+'"></span>'),r=n("span."+o,t.getEl())),r.html(t.encode(e))):r.remove(),t.classes.toggle("btn-has-text",!!e)}var t=this,n=t.$,o=t.classPrefix+"txt";return t.state.on("change:text",function(t){e(t.value)}),t.state.on("change:icon",function(n){var o=n.value,r=t.classPrefix;t.settings.icon=o,o=o?r+"ico "+r+"i-"+t.settings.icon:"";var i=t.getEl().firstChild,s=i.getElementsByTagName("i")[0];o?(s&&s==i.firstChild||(s=document.createElement("i"),i.insertBefore(s,i.firstChild)),s.className=o):s&&i.removeChild(s),e(t.state.get("text"))}),t._super()}})}),l("tinymce.core.ui.ButtonGroup",["tinymce.core.ui.Container"],function(e){"use strict";return e.extend({Defaults:{defaultType:"button",role:"group"},renderHtml:function(){var e=this,t=e._layout;return e.classes.add("btn-group"),e.preRender(),t.preRender(e),'<div id="'+e._id+'" class="'+e.classes+'"><div id="'+e._id+'-body">'+(e.settings.html||"")+t.renderHtml(e)+"</div></div>"}})}),l("tinymce.core.ui.Checkbox",["tinymce.core.ui.Widget"],function(e){"use strict";return e.extend({Defaults:{classes:"checkbox",role:"checkbox",checked:!1},init:function(e){var t=this;t._super(e),t.on("click mousedown",function(e){e.preventDefault()}),t.on("click",function(e){e.preventDefault(),t.disabled()||t.checked(!t.checked())}),t.checked(t.settings.checked)},checked:function(e){return arguments.length?(this.state.set("checked",e),this):this.state.get("checked")},value:function(e){return arguments.length?this.checked(e):this.checked()},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix;return'<div id="'+t+'" class="'+e.classes+'" unselectable="on" aria-labelledby="'+t+'-al" tabindex="-1"><i class="'+n+"ico "+n+'i-checkbox"></i><span id="'+t+'-al" class="'+n+'label">'+e.encode(e.state.get("text"))+"</span></div>"},bindStates:function(){function e(e){t.classes.toggle("checked",e),t.aria("checked",e)}var t=this;return t.state.on("change:text",function(e){t.getEl("al").firstChild.data=t.translate(e.value)}),t.state.on("change:checked change:value",function(n){t.fire("change"),e(n.value)}),t.state.on("change:icon",function(e){var n=e.value,o=t.classPrefix;if("undefined"==typeof n)return t.settings.icon;t.settings.icon=n,n=n?o+"ico "+o+"i-"+t.settings.icon:"";var r=t.getEl().firstChild,i=r.getElementsByTagName("i")[0];n?(i&&i==r.firstChild||(i=document.createElement("i"),r.insertBefore(i,r.firstChild)),i.className=n):i&&r.removeChild(i)}),t.state.get("checked")&&e(!0),t._super()}})}),l("tinymce.core.ui.ComboBox",["tinymce.core.ui.Widget","tinymce.core.ui.Factory","tinymce.core.ui.DomUtils","tinymce.core.dom.DomQuery","tinymce.core.util.VK","tinymce.core.util.Tools"],function(e,t,n,o,r,i){"use strict";return e.extend({init:function(e){var t=this;t._super(e),e=t.settings,t.classes.add("combobox"),t.subinput=!0,t.ariaTarget="inp",e.menu=e.menu||e.values,e.menu&&(e.icon="caret"),t.on("click",function(n){var r=n.target,i=t.getEl();if(o.contains(i,r)||r==i)for(;r&&r!=i;)r.id&&r.id.indexOf("-open")!=-1&&(t.fire("action"),e.menu&&(t.showMenu(),n.aria&&t.menu.items()[0].focus())),r=r.parentNode}),t.on("keydown",function(e){var n;13==e.keyCode&&"INPUT"===e.target.nodeName&&(e.preventDefault(),t.parents().reverse().each(function(e){if(e.toJSON)return n=e,!1}),t.fire("submit",{data:n.toJSON()}))}),t.on("keyup",function(e){if("INPUT"==e.target.nodeName){var n=t.state.get("value"),o=e.target.value;o!==n&&(t.state.set("value",o),t.fire("autocomplete",e))}}),t.on("mouseover",function(e){var n=t.tooltip().moveTo(-65535);if(t.statusLevel()&&e.target.className.indexOf(t.classPrefix+"status")!==-1){var o=t.statusMessage()||"Ok",r=n.text(o).show().testMoveRel(e.target,["bc-tc","bc-tl","bc-tr"]);n.classes.toggle("tooltip-n","bc-tc"==r),n.classes.toggle("tooltip-nw","bc-tl"==r),n.classes.toggle("tooltip-ne","bc-tr"==r),n.moveRel(e.target,r)}})},statusLevel:function(e){return arguments.length>0&&this.state.set("statusLevel",e),this.state.get("statusLevel")},statusMessage:function(e){return arguments.length>0&&this.state.set("statusMessage",e),this.state.get("statusMessage")},showMenu:function(){var e,n=this,o=n.settings;n.menu||(e=o.menu||[],e.length?e={type:"menu",items:e}:e.type=e.type||"menu",n.menu=t.create(e).parent(n).renderTo(n.getContainerElm()),n.fire("createmenu"),n.menu.reflow(),n.menu.on("cancel",function(e){e.control===n.menu&&n.focus()}),n.menu.on("show hide",function(e){e.control.items().each(function(e){e.active(e.value()==n.value())})}).fire("show"),n.menu.on("select",function(e){n.value(e.control.value())}),n.on("focusin",function(e){"INPUT"==e.target.tagName.toUpperCase()&&n.menu.hide()}),n.aria("expanded",!0)),n.menu.show(),n.menu.layoutRect({w:n.layoutRect().w}),n.menu.moveRel(n.getEl(),n.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"])},focus:function(){this.getEl("inp").focus()},repaint:function(){var e,t,r=this,i=r.getEl(),s=r.getEl("open"),a=r.layoutRect(),l=0,d=i.firstChild;r.statusLevel()&&"none"!==r.statusLevel()&&(l=parseInt(n.getRuntimeStyle(d,"padding-right"),10)-parseInt(n.getRuntimeStyle(d,"padding-left"),10)),e=s?a.w-n.getSize(s).width-10:a.w-10;var u=document;return u.all&&(!u.documentMode||u.documentMode<=8)&&(t=r.layoutRect().h-2+"px"),o(d).css({width:e-l,lineHeight:t}),r._super(),r},postRender:function(){var e=this;return o(this.getEl("inp")).on("change",function(t){e.state.set("value",t.target.value),e.fire("change",t)}),e._super()},renderHtml:function(){var e,t,n=this,o=n._id,r=n.settings,i=n.classPrefix,s=n.state.get("value")||"",a="",l="",d="";return"spellcheck"in r&&(l+=' spellcheck="'+r.spellcheck+'"'),r.maxLength&&(l+=' maxlength="'+r.maxLength+'"'),r.size&&(l+=' size="'+r.size+'"'),r.subtype&&(l+=' type="'+r.subtype+'"'),d='<i id="'+o+'-status" class="mce-status mce-ico" style="display: none"></i>',n.disabled()&&(l+=' disabled="disabled"'),e=r.icon,e&&"caret"!=e&&(e=i+"ico "+i+"i-"+r.icon),t=n.state.get("text"),(e||t)&&(a='<div id="'+o+'-open" class="'+i+"btn "+i+'open" tabIndex="-1" role="button"><button id="'+o+'-action" type="button" hidefocus="1" tabindex="-1">'+("caret"!=e?'<i class="'+e+'"></i>':'<i class="'+i+'caret"></i>')+(t?(e?" ":"")+t:"")+"</button></div>",n.classes.add("has-open")),'<div id="'+o+'" class="'+n.classes+'"><input id="'+o+'-inp" class="'+i+'textbox" value="'+n.encode(s,!1)+'" hidefocus="1"'+l+' placeholder="'+n.encode(r.placeholder)+'" />'+d+a+"</div>"},value:function(e){return arguments.length?(this.state.set("value",e),this):(this.state.get("rendered")&&this.state.set("value",this.getEl("inp").value),this.state.get("value"))},showAutoComplete:function(e,n){var o=this;if(0===e.length)return void o.hideMenu();var r=function(e,t){return function(){o.fire("selectitem",{title:t,value:e})}};o.menu?o.menu.items().remove():o.menu=t.create({type:"menu",classes:"combobox-menu",layout:"flow"}).parent(o).renderTo(),i.each(e,function(e){o.menu.add({text:e.title,url:e.previewUrl,match:n,classes:"menu-item-ellipsis",onclick:r(e.value,e.title)})}),o.menu.renderNew(),o.hideMenu(),o.menu.on("cancel",function(e){e.control.parent()===o.menu&&(e.stopPropagation(),o.focus(),o.hideMenu())}),o.menu.on("select",function(){o.focus()});var s=o.layoutRect().w;o.menu.layoutRect({w:s,minW:0,maxW:s}),o.menu.reflow(),o.menu.show(),o.menu.moveRel(o.getEl(),o.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"])},hideMenu:function(){this.menu&&this.menu.hide()},bindStates:function(){var e=this;e.state.on("change:value",function(t){e.getEl("inp").value!=t.value&&(e.getEl("inp").value=t.value);
}),e.state.on("change:disabled",function(t){e.getEl("inp").disabled=t.value}),e.state.on("change:statusLevel",function(t){var o=e.getEl("status"),r=e.classPrefix,i=t.value;n.css(o,"display","none"===i?"none":""),n.toggleClass(o,r+"i-checkmark","ok"===i),n.toggleClass(o,r+"i-warning","warn"===i),n.toggleClass(o,r+"i-error","error"===i),e.classes.toggle("has-status","none"!==i),e.repaint()}),n.on(e.getEl("status"),"mouseleave",function(){e.tooltip().hide()}),e.on("cancel",function(t){e.menu&&e.menu.visible()&&(t.stopPropagation(),e.hideMenu())});var t=function(e,t){t&&t.items().length>0&&t.items().eq(e)[0].focus()};return e.on("keydown",function(n){var o=n.keyCode;"INPUT"===n.target.nodeName&&(o===r.DOWN?(n.preventDefault(),e.fire("autocomplete"),t(0,e.menu)):o===r.UP&&(n.preventDefault(),t(-1,e.menu)))}),e._super()},remove:function(){o(this.getEl("inp")).off(),this.menu&&this.menu.remove(),this._super()}})}),l("tinymce.core.ui.ColorBox",["tinymce.core.ui.ComboBox"],function(e){"use strict";return e.extend({init:function(e){var t=this;e.spellcheck=!1,e.onaction&&(e.icon="none"),t._super(e),t.classes.add("colorbox"),t.on("change keyup postrender",function(){t.repaintColor(t.value())})},repaintColor:function(e){var t=this.getEl("open"),n=t?t.getElementsByTagName("i")[0]:null;if(n)try{n.style.background=e}catch(e){}},bindStates:function(){var e=this;return e.state.on("change:value",function(t){e.state.get("rendered")&&e.repaintColor(t.value)}),e._super()}})}),l("tinymce.core.ui.PanelButton",["tinymce.core.ui.Button","tinymce.core.ui.FloatPanel"],function(e,t){"use strict";return e.extend({showPanel:function(){var e=this,n=e.settings;if(e.active(!0),e.panel)e.panel.show();else{var o=n.panel;o.type&&(o={layout:"grid",items:o}),o.role=o.role||"dialog",o.popover=!0,o.autohide=!0,o.ariaRoot=!0,e.panel=new t(o).on("hide",function(){e.active(!1)}).on("cancel",function(t){t.stopPropagation(),e.focus(),e.hidePanel()}).parent(e).renderTo(e.getContainerElm()),e.panel.fire("show"),e.panel.reflow()}e.panel.moveRel(e.getEl(),n.popoverAlign||(e.isRtl()?["bc-tr","bc-tc"]:["bc-tl","bc-tc"]))},hidePanel:function(){var e=this;e.panel&&e.panel.hide()},postRender:function(){var e=this;return e.aria("haspopup",!0),e.on("click",function(t){t.control===e&&(e.panel&&e.panel.visible()?e.hidePanel():(e.showPanel(),e.panel.focus(!!t.aria)))}),e._super()},remove:function(){return this.panel&&(this.panel.remove(),this.panel=null),this._super()}})}),l("tinymce.core.ui.ColorButton",["tinymce.core.ui.PanelButton","tinymce.core.dom.DOMUtils"],function(e,t){"use strict";var n=t.DOM;return e.extend({init:function(e){this._super(e),this.classes.add("colorbutton")},color:function(e){return e?(this._color=e,this.getEl("preview").style.backgroundColor=e,this):this._color},resetColor:function(){return this._color=null,this.getEl("preview").style.backgroundColor=null,this},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix,o=e.state.get("text"),r=e.settings.icon?n+"ico "+n+"i-"+e.settings.icon:"",i=e.settings.image?" style=\"background-image: url('"+e.settings.image+"')\"":"",s="";return o&&(e.classes.add("btn-has-text"),s='<span class="'+n+'txt">'+e.encode(o)+"</span>"),'<div id="'+t+'" class="'+e.classes+'" role="button" tabindex="-1" aria-haspopup="true"><button role="presentation" hidefocus="1" type="button" tabindex="-1">'+(r?'<i class="'+r+'"'+i+"></i>":"")+'<span id="'+t+'-preview" class="'+n+'preview"></span>'+s+'</button><button type="button" class="'+n+'open" hidefocus="1" tabindex="-1"> <i class="'+n+'caret"></i></button></div>'},postRender:function(){var e=this,t=e.settings.onclick;return e.on("click",function(o){o.aria&&"down"==o.aria.key||o.control!=e||n.getParent(o.target,"."+e.classPrefix+"open")||(o.stopImmediatePropagation(),t.call(e,o))}),delete e.settings.onclick,e._super()}})}),l("tinymce.core.ui.ColorPicker",["tinymce.core.ui.Widget","tinymce.core.ui.DragHelper","tinymce.core.ui.DomUtils","tinymce.core.util.Color"],function(e,t,n,o){"use strict";return e.extend({Defaults:{classes:"widget colorpicker"},init:function(e){this._super(e)},postRender:function(){function e(e,t){var o,r,i=n.getPos(e);return o=t.pageX-i.x,r=t.pageY-i.y,o=Math.max(0,Math.min(o/e.clientWidth,1)),r=Math.max(0,Math.min(r/e.clientHeight,1)),{x:o,y:r}}function r(e,t){var r=(360-e.h)/360;n.css(d,{top:100*r+"%"}),t||n.css(c,{left:e.s+"%",top:100-e.v+"%"}),u.style.background=new o({s:100,v:100,h:e.h}).toHex(),p.color().parse({s:e.s,v:e.v,h:e.h})}function i(t){var n;n=e(u,t),a.s=100*n.x,a.v=100*(1-n.y),r(a),p.fire("change")}function s(t){var n;n=e(l,t),a=f.toHsv(),a.h=360*(1-n.y),r(a,!0),p.fire("change")}var a,l,d,u,c,p=this,f=p.color();l=p.getEl("h"),d=p.getEl("hp"),u=p.getEl("sv"),c=p.getEl("svp"),p._repaint=function(){a=f.toHsv(),r(a)},p._super(),p._svdraghelper=new t(p._id+"-sv",{start:i,drag:i}),p._hdraghelper=new t(p._id+"-h",{start:s,drag:s}),p._repaint()},rgb:function(){return this.color().toRgb()},value:function(e){var t=this;return arguments.length?(t.color().parse(e),void(t._rendered&&t._repaint())):t.color().toHex()},color:function(){return this._color||(this._color=new o),this._color},renderHtml:function(){function e(){var e,t,n,o,s="";for(n="filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=",o=i.split(","),e=0,t=o.length-1;e<t;e++)s+='<div class="'+r+'colorpicker-h-chunk" style="height:'+100/t+"%;"+n+o[e]+",endColorstr="+o[e+1]+");-ms-"+n+o[e]+",endColorstr="+o[e+1]+')"></div>';return s}var t,n=this,o=n._id,r=n.classPrefix,i="#ff0000,#ff0080,#ff00ff,#8000ff,#0000ff,#0080ff,#00ffff,#00ff80,#00ff00,#80ff00,#ffff00,#ff8000,#ff0000",s="background: -ms-linear-gradient(top,"+i+");background: linear-gradient(to bottom,"+i+");";return t='<div id="'+o+'-h" class="'+r+'colorpicker-h" style="'+s+'">'+e()+'<div id="'+o+'-hp" class="'+r+'colorpicker-h-marker"></div></div>','<div id="'+o+'" class="'+n.classes+'"><div id="'+o+'-sv" class="'+r+'colorpicker-sv"><div class="'+r+'colorpicker-overlay1"><div class="'+r+'colorpicker-overlay2"><div id="'+o+'-svp" class="'+r+'colorpicker-selector1"><div class="'+r+'colorpicker-selector2"></div></div></div></div></div>'+t+"</div>"}})}),l("tinymce.core.ui.Path",["tinymce.core.ui.Widget"],function(e){"use strict";return e.extend({init:function(e){var t=this;e.delimiter||(e.delimiter="»"),t._super(e),t.classes.add("path"),t.canFocus=!0,t.on("click",function(e){var n,o=e.target;(n=o.getAttribute("data-index"))&&t.fire("select",{value:t.row()[n],index:n})}),t.row(t.settings.row)},focus:function(){var e=this;return e.getEl().firstChild.focus(),e},row:function(e){return arguments.length?(this.state.set("row",e),this):this.state.get("row")},renderHtml:function(){var e=this;return'<div id="'+e._id+'" class="'+e.classes+'">'+e._getDataPathHtml(e.state.get("row"))+"</div>"},bindStates:function(){var e=this;return e.state.on("change:row",function(t){e.innerHtml(e._getDataPathHtml(t.value))}),e._super()},_getDataPathHtml:function(e){var t,n,o=this,r=e||[],i="",s=o.classPrefix;for(t=0,n=r.length;t<n;t++)i+=(t>0?'<div class="'+s+'divider" aria-hidden="true"> '+o.settings.delimiter+" </div>":"")+'<div role="button" class="'+s+"path-item"+(t==n-1?" "+s+"last":"")+'" data-index="'+t+'" tabindex="-1" id="'+o._id+"-"+t+'" aria-level="'+(t+1)+'">'+r[t].name+"</div>";return i||(i='<div class="'+s+'path-item"> </div>'),i}})}),l("tinymce.core.ui.ElementPath",["tinymce.core.ui.Path"],function(e){return e.extend({postRender:function(){function e(e){if(1===e.nodeType){if("BR"==e.nodeName||e.getAttribute("data-mce-bogus"))return!0;if("bookmark"===e.getAttribute("data-mce-type"))return!0}return!1}var t=this,n=t.settings.editor;return n.settings.elementpath!==!1&&(t.on("select",function(e){n.focus(),n.selection.select(this.row()[e.index].element),n.nodeChanged()}),n.on("nodeChange",function(o){for(var r=[],i=o.parents,s=i.length;s--;)if(1==i[s].nodeType&&!e(i[s])){var a=n.fire("ResolveName",{name:i[s].nodeName.toLowerCase(),target:i[s]});if(a.isDefaultPrevented()||r.push({name:a.name,element:i[s]}),a.isPropagationStopped())break}t.row(r)})),t._super()}})}),l("tinymce.core.ui.FormItem",["tinymce.core.ui.Container"],function(e){"use strict";return e.extend({Defaults:{layout:"flex",align:"center",defaults:{flex:1}},renderHtml:function(){var e=this,t=e._layout,n=e.classPrefix;return e.classes.add("formitem"),t.preRender(e),'<div id="'+e._id+'" class="'+e.classes+'" hidefocus="1" tabindex="-1">'+(e.settings.title?'<div id="'+e._id+'-title" class="'+n+'title">'+e.settings.title+"</div>":"")+'<div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+(e.settings.html||"")+t.renderHtml(e)+"</div></div>"}})}),l("tinymce.core.ui.Form",["tinymce.core.ui.Container","tinymce.core.ui.FormItem","tinymce.core.util.Tools"],function(e,t,n){"use strict";return e.extend({Defaults:{containerCls:"form",layout:"flex",direction:"column",align:"stretch",flex:1,padding:20,labelGap:30,spacing:10,callbacks:{submit:function(){this.submit()}}},preRender:function(){var e=this,o=e.items();e.settings.formItemDefaults||(e.settings.formItemDefaults={layout:"flex",autoResize:"overflow",defaults:{flex:1}}),o.each(function(o){var r,i=o.settings.label;i&&(r=new t(n.extend({items:{type:"label",id:o._id+"-l",text:i,flex:0,forId:o._id,disabled:o.disabled()}},e.settings.formItemDefaults)),r.type="formitem",o.aria("labelledby",o._id+"-l"),"undefined"==typeof o.settings.flex&&(o.settings.flex=1),e.replace(o,r),r.add(o))})},submit:function(){return this.fire("submit",{data:this.toJSON()})},postRender:function(){var e=this;e._super(),e.fromJSON(e.settings.data)},bindStates:function(){function e(){var e,n,o,r=0,i=[];if(t.settings.labelGapCalc!==!1)for(o="children"==t.settings.labelGapCalc?t.find("formitem"):t.items(),o.filter("formitem").each(function(e){var t=e.items()[0],n=t.getEl().clientWidth;r=n>r?n:r,i.push(t)}),n=t.settings.labelGap||0,e=i.length;e--;)i[e].settings.minWidth=r+n}var t=this;t._super(),t.on("show",e),e()}})}),l("tinymce.core.ui.FieldSet",["tinymce.core.ui.Form"],function(e){"use strict";return e.extend({Defaults:{containerCls:"fieldset",layout:"flex",direction:"column",align:"stretch",flex:1,padding:"25 15 5 15",labelGap:30,spacing:10,border:1},renderHtml:function(){var e=this,t=e._layout,n=e.classPrefix;return e.preRender(),t.preRender(e),'<fieldset id="'+e._id+'" class="'+e.classes+'" hidefocus="1" tabindex="-1">'+(e.settings.title?'<legend id="'+e._id+'-title" class="'+n+'fieldset-title">'+e.settings.title+"</legend>":"")+'<div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+(e.settings.html||"")+t.renderHtml(e)+"</div></fieldset>"}})}),l("tinymce.core.content.LinkTargets",["tinymce.core.dom.DOMUtils","tinymce.core.dom.NodeType","tinymce.core.util.Arr","tinymce.core.util.Fun","tinymce.core.util.Tools","tinymce.core.util.Uuid"],function(e,t,n,o,r,i){var s=r.trim,a=function(e,t,n,o,r){return{type:e,title:t,url:n,level:o,attach:r}},l=function(e){for(;e=e.parentNode;){var n=e.contentEditable;if(n&&"inherit"!==n)return t.isContentEditableTrue(e)}return!1},d=function(t,n){return e.DOM.select(t,n)},u=function(e){return e.innerText||e.textContent},c=function(e){return e.id?e.id:i.uuid("h")},p=function(e){return e&&"A"===e.nodeName&&(e.id||e.name)},f=function(e){return p(e)&&h(e)},m=function(e){return e&&/^(H[1-6])$/.test(e.nodeName)},h=function(e){return l(e)&&!t.isContentEditableFalse(e)},g=function(e){return m(e)&&h(e)},y=function(e){return m(e)?parseInt(e.nodeName.substr(1),10):0},v=function(e){var t=c(e),n=function(){e.id=t};return a("header",u(e),"#"+t,y(e),n)},b=function(e){var t=e.id||e.name,n=u(e);return a("anchor",n?n:"#"+t,"#"+t,0,o.noop)},_=function(e){return n.map(n.filter(e,g),v)},x=function(e){return n.map(n.filter(e,f),b)},C=function(e){var t=d("h1,h2,h3,h4,h5,h6,a:not([href])",e);return t},E=function(e){return s(e.title).length>0},w=function(e){var t=C(e);return n.filter(_(t).concat(x(t)),E)};return{find:w}}),l("tinymce.core.ui.FilePicker",["global!window","tinymce.core.content.LinkTargets","tinymce.core.EditorManager","tinymce.core.ui.ComboBox","tinymce.core.util.Arr","tinymce.core.util.Fun","tinymce.core.util.Tools"],function(e,t,n,o,r,i,s){"use strict";var a=function(){return e.tinymce?e.tinymce.activeEditor:n.activeEditor},l={},d=5,u=function(e){return{title:e.title,value:{title:{raw:e.title},url:e.url,attach:e.attach}}},c=function(e){return s.map(e,u)},p=function(e,t){return{title:e,value:{title:e,url:t,attach:i.noop}}},f=function(e,t){var n=r.find(t,function(t){return t.url===e});return!n},m=function(e,t,n){var o=t in e?e[t]:n;return o===!1?null:o},h=function(e,t,n,o){var a={title:"-"},d=function(e){var o=r.filter(e[n],function(e){return f(e,t)});return s.map(o,function(e){return{title:e,value:{title:e,url:e,attach:i.noop}}})},u=function(e){var n=r.filter(t,function(t){return t.type==e});return c(n)},h=function(){var e=u("anchor"),t=m(o,"anchor_top","#top"),n=m(o,"anchor_bottom","#bottom");return null!==t&&e.unshift(p("<top>",t)),null!==n&&e.push(p("<bottom>",n)),e},g=function(e){return r.reduce(e,function(e,t){var n=0===e.length||0===t.length;return n?e.concat(t):e.concat(a,t)},[])};return o.typeahead_urls===!1?[]:"file"===n?g([y(e,d(l)),y(e,u("header")),y(e,h())]):y(e,d(l))},g=function(e,t){var n=l[t];/^https?/.test(e)&&(n?r.indexOf(n,e)===-1&&(l[t]=n.slice(0,d).concat(e)):l[t]=[e])},y=function(e,t){var n=e.toLowerCase(),o=s.grep(t,function(e){return e.title.toLowerCase().indexOf(n)!==-1});return 1===o.length&&o[0].title===e?[]:o},v=function(e){var t=e.title;return t.raw?t.raw:t},b=function(e,n,o,r){var i=function(i){var s=t.find(o),a=h(i,s,r,n);e.showAutoComplete(a,i)};e.on("autocomplete",function(){i(e.value())}),e.on("selectitem",function(t){var n=t.value;e.value(n.url);var o=v(n);"image"===r?e.fire("change",{meta:{alt:o,attach:n.attach}}):e.fire("change",{meta:{text:o,attach:n.attach}}),e.focus()}),e.on("click",function(t){0===e.value().length&&"INPUT"===t.target.nodeName&&i("")}),e.on("PostRender",function(){e.getRoot().on("submit",function(t){t.isDefaultPrevented()||g(e.value(),r)})})},_=function(e){var t=e.status,n=e.message;return"valid"===t?{status:"ok",message:n}:"unknown"===t?{status:"warn",message:n}:"invalid"===t?{status:"warn",message:n}:{status:"none",message:""}},x=function(e,t,n){var o=t.filepicker_validator_handler;if(o){var r=function(t){return 0===t.length?void e.statusLevel("none"):void o({url:t,type:n},function(t){var n=_(t);e.statusMessage(n.message),e.statusLevel(n.status)})};e.state.on("change:value",function(e){r(e.value)})}};return o.extend({init:function(t){var n,o,r,i=this,l=a(),d=l.settings,u=t.filetype;t.spellcheck=!1,r=d.file_picker_types||d.file_browser_callback_types,r&&(r=s.makeMap(r,/[, ]/)),r&&!r[u]||(o=d.file_picker_callback,!o||r&&!r[u]?(o=d.file_browser_callback,!o||r&&!r[u]||(n=function(){o(i.getEl("inp").id,i.value(),u,e)})):n=function(){var e=i.fire("beforecall").meta;e=s.extend({filetype:u},e),o.call(l,function(e,t){i.value(e).fire("change",{meta:t})},i.value(),e)}),n&&(t.icon="browse",t.onaction=n),i._super(t),b(i,d,l.getBody(),u),x(i,d,u)}})}),l("tinymce.core.ui.FitLayout",["tinymce.core.ui.AbsoluteLayout"],function(e){"use strict";return e.extend({recalc:function(e){var t=e.layoutRect(),n=e.paddingBox;e.items().filter(":visible").each(function(e){e.layoutRect({x:n.left,y:n.top,w:t.innerW-n.right-n.left,h:t.innerH-n.top-n.bottom}),e.recalc&&e.recalc()})}})}),l("tinymce.core.ui.FlexLayout",["tinymce.core.ui.AbsoluteLayout"],function(e){"use strict";return e.extend({recalc:function(e){var t,n,o,r,i,s,a,l,d,u,c,p,f,m,h,g,y,v,b,_,x,C,E,w,j,S,T,P,k,I,N,R,D,M,O,A,L,F,B=[],z=Math.max,U=Math.min;for(o=e.items().filter(":visible"),r=e.layoutRect(),i=e.paddingBox,s=e.settings,p=e.isRtl()?s.direction||"row-reversed":s.direction,a=s.align,l=e.isRtl()?s.pack||"end":s.pack,d=s.spacing||0,"row-reversed"!=p&&"column-reverse"!=p||(o=o.set(o.toArray().reverse()),p=p.split("-")[0]),"column"==p?(j="y",E="h",w="minH",S="maxH",P="innerH",T="top",k="deltaH",I="contentH",O="left",D="w",N="x",R="innerW",M="minW",A="right",L="deltaW",F="contentW"):(j="x",E="w",w="minW",S="maxW",P="innerW",T="left",k="deltaW",I="contentW",O="top",D="h",N="y",R="innerH",M="minH",A="bottom",L="deltaH",F="contentH"),c=r[P]-i[T]-i[T],C=u=0,t=0,n=o.length;t<n;t++)f=o[t],m=f.layoutRect(),h=f.settings,g=h.flex,c-=t<n-1?d:0,g>0&&(u+=g,m[S]&&B.push(f),m.flex=g),c-=m[w],y=i[O]+m[M]+i[A],y>C&&(C=y);if(_={},c<0?_[w]=r[w]-c+r[k]:_[w]=r[P]-c+r[k],_[M]=C+r[L],_[I]=r[P]-c,_[F]=C,_.minW=U(_.minW,r.maxW),_.minH=U(_.minH,r.maxH),_.minW=z(_.minW,r.startMinWidth),_.minH=z(_.minH,r.startMinHeight),!r.autoResize||_.minW==r.minW&&_.minH==r.minH){for(b=c/u,t=0,n=B.length;t<n;t++)f=B[t],m=f.layoutRect(),v=m[S],y=m[w]+m.flex*b,y>v?(c-=m[S]-m[w],u-=m.flex,m.flex=0,m.maxFlexSize=v):m.maxFlexSize=0;for(b=c/u,x=i[T],_={},0===u&&("end"==l?x=c+i[T]:"center"==l?(x=Math.round(r[P]/2-(r[P]-c)/2)+i[T],x<0&&(x=i[T])):"justify"==l&&(x=i[T],d=Math.floor(c/(o.length-1)))),_[N]=i[O],t=0,n=o.length;t<n;t++)f=o[t],m=f.layoutRect(),y=m.maxFlexSize||m[w],"center"===a?_[N]=Math.round(r[R]/2-m[D]/2):"stretch"===a?(_[D]=z(m[M]||0,r[R]-i[O]-i[A]),_[N]=i[O]):"end"===a&&(_[N]=r[R]-m[D]-i.top),m.flex>0&&(y+=m.flex*b),_[E]=y,_[j]=x,f.layoutRect(_),f.recalc&&f.recalc(),x+=y+d}else if(_.w=_.minW,_.h=_.minH,e.layoutRect(_),this.recalc(e),null===e._lastRect){var H=e.parent();H&&(H._lastRect=null,H.recalc())}}})}),l("tinymce.core.ui.FlowLayout",["tinymce.core.ui.Layout"],function(e){return e.extend({Defaults:{containerClass:"flow-layout",controlClass:"flow-layout-item",endClass:"break"},recalc:function(e){e.items().filter(":visible").each(function(e){e.recalc&&e.recalc()})},isNative:function(){return!0}})}),l("tinymce.core.fmt.FontInfo",["ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","tinymce.core.dom.DOMUtils"],function(e,t,n,o,r){var i=function(e,n,o){for(;o!==n;){if(o.style[e]){var r=o.style[e];return""!==r?t.some(r):t.none()}o=o.parentNode}return t.none()},s=function(e){return/[0-9.]+px$/.test(e)?Math.round(72*parseInt(e,10)/96)+"pt":e},a=function(e){return e.replace(/[\'\"]/g,"").replace(/,\s+/g,",")},l=function(e,n){return t.from(r.DOM.getStyle(n,e,!0))},d=function(e){return function(r,s){return t.from(s).map(n.fromDom).filter(o.isElement).bind(function(t){return i(e,r,t.dom()).or(l(e,t.dom()))}).getOr("")}};return{getFontSize:d("fontSize"),getFontFamily:e.compose(a,d("fontFamily")),toPt:s}}),l("tinymce.core.ui.FormatControls",["tinymce.core.ui.Control","tinymce.core.ui.Widget","tinymce.core.ui.FloatPanel","tinymce.core.util.Tools","tinymce.core.util.Arr","tinymce.core.dom.DOMUtils","tinymce.core.EditorManager","tinymce.core.Env","tinymce.core.fmt.FontInfo"],function(e,t,n,o,r,i,s,a,l){function d(e){e.settings.ui_container&&(a.container=i.DOM.select(e.settings.ui_container)[0])}function u(t){t.on("ScriptsLoaded",function(){t.rtl&&(e.rtl=!0)})}function c(e){function t(t,n){return function(){var o=this;e.on("nodeChange",function(r){var i=e.formatter,s=null;p(r.parents,function(e){if(p(t,function(t){if(n?i.matchNode(e,n,{value:t.value})&&(s=t.value):i.matchNode(e,t.value)&&(s=t.value),s)return!1}),s)return!1}),o.value(s)})}}function r(t){return function(){var n=this,o=function(e){return e?e.split(",")[0]:""};e.on("nodeChange",function(r){var i,s=null;i=l.getFontFamily(e.getBody(),r.element),p(t,function(e){e.value.toLowerCase()===i.toLowerCase()&&(s=e.value)}),p(t,function(e){s||o(e.value).toLowerCase()!==o(i).toLowerCase()||(s=e.value)}),n.value(s),!s&&i&&n.text(o(i))})}}function i(t){return function(){var n=this;e.on("nodeChange",function(o){var r,i,s=null;r=l.getFontSize(e.getBody(),o.element),i=l.toPt(r),p(t,function(e){e.value===r?s=r:e.value===i&&(s=i)}),n.value(s),s||n.text(i)})}}function s(e){e=e.replace(/;$/,"").split(";");for(var t=e.length;t--;)e[t]=e[t].split("=");return e}function a(){function t(e){var n=[];if(e)return p(e,function(e){var i={text:e.title,icon:e.icon};if(e.items)i.menu=t(e.items);else{var s=e.format||"custom"+o++;e.format||(e.name=s,r.push(e)),i.format=s,i.cmd=e.cmd}n.push(i)}),n}function n(){var n;return n=t(e.settings.style_formats_merge?e.settings.style_formats?i.concat(e.settings.style_formats):i:e.settings.style_formats||i)}var o=0,r=[],i=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",icon:"bold",format:"bold"},{title:"Italic",icon:"italic",format:"italic"},{title:"Underline",icon:"underline",format:"underline"},{title:"Strikethrough",icon:"strikethrough",format:"strikethrough"},{title:"Superscript",icon:"superscript",format:"superscript"},{title:"Subscript",icon:"subscript",format:"subscript"},{title:"Code",icon:"code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Alignment",items:[{title:"Left",icon:"alignleft",format:"alignleft"},{title:"Center",icon:"aligncenter",format:"aligncenter"},{title:"Right",icon:"alignright",format:"alignright"},{title:"Justify",icon:"alignjustify",format:"alignjustify"}]}];return e.on("init",function(){p(r,function(t){e.formatter.register(t.name,t)})}),{type:"menu",items:n(),onPostRender:function(t){e.fire("renderFormatsMenu",{control:t.control})},itemDefaults:{preview:!0,textStyle:function(){if(this.settings.format)return e.formatter.getCssText(this.settings.format)},onPostRender:function(){var t=this;t.parent().on("show",function(){var n,o;n=t.settings.format,n&&(t.disabled(!e.formatter.canApply(n)),t.active(e.formatter.match(n))),o=t.settings.cmd,o&&t.active(e.queryCommandState(o))})},onclick:function(){this.settings.format&&m(this.settings.format),this.settings.cmd&&e.execCommand(this.settings.cmd)}}}}function d(t){return function(){var n=this;e.formatter?e.formatter.formatChanged(t,function(e){n.active(e)}):e.on("init",function(){e.formatter.formatChanged(t,function(e){n.active(e)})})}}function u(t){return function(){function n(){var n="redo"==t?"hasRedo":"hasUndo";return!!e.undoManager&&e.undoManager[n]()}var o=this;o.disabled(!n()),e.on("Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",function(){o.disabled(e.readonly||!n())})}}function c(){var t=this;e.on("VisualAid",function(e){t.active(e.hasVisual)}),t.active(e.hasVisual)}function m(t){t.control&&(t=t.control.value()),t&&e.execCommand("mceToggleFormat",!1,t)}function h(t){var n=t.length;return o.each(t,function(t){t.menu&&(t.hidden=0===h(t.menu));var o=t.format;o&&(t.hidden=!e.formatter.canApply(o)),t.hidden&&n--}),n}function g(t){var n=t.items().length;return t.items().each(function(t){t.menu&&t.visible(g(t.menu)>0),!t.menu&&t.settings.menu&&t.visible(h(t.settings.menu)>0);var o=t.settings.format;o&&t.visible(e.formatter.canApply(o)),t.visible()||n--}),n}var y;y=a(),p({bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript"},function(t,n){e.addButton(n,{tooltip:t,onPostRender:d(n),onclick:function(){m(n)}})}),p({outdent:["Decrease indent","Outdent"],indent:["Increase indent","Indent"],cut:["Cut","Cut"],copy:["Copy","Copy"],paste:["Paste","Paste"],help:["Help","mceHelp"],selectall:["Select all","SelectAll"],removeformat:["Clear formatting","RemoveFormat"],visualaid:["Visual aids","mceToggleVisualAid"],newdocument:["New document","mceNewDocument"]},function(t,n){e.addButton(n,{tooltip:t[0],cmd:t[1]})}),p({blockquote:["Blockquote","mceBlockQuote"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"],alignleft:["Align left","JustifyLeft"],aligncenter:["Align center","JustifyCenter"],alignright:["Align right","JustifyRight"],alignjustify:["Justify","JustifyFull"],alignnone:["No alignment","JustifyNone"]},function(t,n){e.addButton(n,{tooltip:t[0],cmd:t[1],onPostRender:d(n)})});var v=function(e){var t=e;return t.length>0&&"-"===t[0].text&&(t=t.slice(1)),t.length>0&&"-"===t[t.length-1].text&&(t=t.slice(0,t.length-1)),t},b=function(t){var n,r;if("string"==typeof t)r=t.split(" ");else if(o.isArray(t))return f(o.map(t,b));return n=o.grep(r,function(t){return"|"===t||t in e.menuItems}),o.map(n,function(t){return"|"===t?{text:"-"}:e.menuItems[t]})},_=function(t){var n=[{text:"-"}],r=o.grep(e.menuItems,function(e){return e.context===t});return o.each(r,function(e){"before"==e.separator&&n.push({text:"|"}),e.prependToContext?n.unshift(e):n.push(e),"after"==e.separator&&n.push({text:"|"})}),n},x=function(e){return v(e.insert_button_items?b(e.insert_button_items):_("insert"))};e.addButton("undo",{tooltip:"Undo",onPostRender:u("undo"),cmd:"undo"}),e.addButton("redo",{tooltip:"Redo",onPostRender:u("redo"),cmd:"redo"}),e.addMenuItem("newdocument",{text:"New document",icon:"newdocument",cmd:"mceNewDocument"}),e.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onPostRender:u("undo"),cmd:"undo"}),e.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onPostRender:u("redo"),cmd:"redo"}),e.addMenuItem("visualaid",{text:"Visual aids",selectable:!0,onPostRender:c,cmd:"mceToggleVisualAid"}),e.addButton("remove",{tooltip:"Remove",icon:"remove",cmd:"Delete"}),e.addButton("insert",{type:"menubutton",icon:"insert",menu:[],oncreatemenu:function(){this.menu.add(x(e.settings)),this.menu.renderNew()}}),p({cut:["Cut","Cut","Meta+X"],copy:["Copy","Copy","Meta+C"],paste:["Paste","Paste","Meta+V"],selectall:["Select all","SelectAll","Meta+A"],bold:["Bold","Bold","Meta+B"],italic:["Italic","Italic","Meta+I"],underline:["Underline","Underline","Meta+U"],strikethrough:["Strikethrough","Strikethrough"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"],removeformat:["Clear formatting","RemoveFormat"]},function(t,n){e.addMenuItem(n,{text:t[0],icon:n,shortcut:t[2],cmd:t[1]})}),e.on("mousedown",function(){n.hideAll()}),e.addButton("styleselect",{type:"menubutton",text:"Formats",menu:y,onShowMenu:function(){e.settings.style_formats_autohide&&g(this.menu)}}),e.addButton("formatselect",function(){var n=[],o=s(e.settings.block_formats||"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre");return p(o,function(t){n.push({text:t[0],value:t[1],textStyle:function(){return e.formatter.getCssText(t[1])}})}),{type:"listbox",text:o[0][0],values:n,fixedWidth:!0,onselect:m,onPostRender:t(n)}}),e.addButton("fontselect",function(){var t="Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats",n=[],o=s(e.settings.font_formats||t);return p(o,function(e){n.push({text:{raw:e[0]},value:e[1],textStyle:e[1].indexOf("dings")==-1?"font-family:"+e[1]:""})}),{type:"listbox",text:"Font Family",tooltip:"Font Family",values:n,fixedWidth:!0,onPostRender:r(n),onselect:function(t){t.control.settings.value&&e.execCommand("FontName",!1,t.control.settings.value)}}}),e.addButton("fontsizeselect",function(){var t=[],n="8pt 10pt 12pt 14pt 18pt 24pt 36pt",o=e.settings.fontsize_formats||n;return p(o.split(" "),function(e){var n=e,o=e,r=e.split("=");r.length>1&&(n=r[0],o=r[1]),t.push({text:n,value:o})}),{type:"listbox",text:"Font Sizes",tooltip:"Font Sizes",values:t,fixedWidth:!0,onPostRender:i(t),onclick:function(t){t.control.settings.value&&e.execCommand("FontSize",!1,t.control.settings.value)}}}),e.addMenuItem("formats",{text:"Formats",menu:y})}var p=o.each,f=function(e){return r.reduce(e,function(e,t){return e.concat(t)},[])};return s.on("AddEditor",function(e){var t=e.editor;u(t),c(t),d(t)}),e.translate=function(e){return s.translate(e)},t.tooltips=!a.iOS,{}}),l("tinymce.core.ui.GridLayout",["tinymce.core.ui.AbsoluteLayout"],function(e){"use strict";return e.extend({recalc:function(e){var t,n,o,r,i,s,a,l,d,u,c,p,f,m,h,g,y,v,b,_,x,C,E,w,j,S,T,P,k,I=[],N=[];t=e.settings,r=e.items().filter(":visible"),i=e.layoutRect(),o=t.columns||Math.ceil(Math.sqrt(r.length)),n=Math.ceil(r.length/o),v=t.spacingH||t.spacing||0,b=t.spacingV||t.spacing||0,_=t.alignH||t.align,x=t.alignV||t.align,g=e.paddingBox,P="reverseRows"in t?t.reverseRows:e.isRtl(),_&&"string"==typeof _&&(_=[_]),x&&"string"==typeof x&&(x=[x]);for(c=0;c<o;c++)I.push(0);for(p=0;p<n;p++)N.push(0);for(p=0;p<n;p++)for(c=0;c<o&&(u=r[p*o+c],u);c++)d=u.layoutRect(),w=d.minW,j=d.minH,I[c]=w>I[c]?w:I[c],N[p]=j>N[p]?j:N[p];for(S=i.innerW-g.left-g.right,C=0,c=0;c<o;c++)C+=I[c]+(c>0?v:0),S-=(c>0?v:0)+I[c];for(T=i.innerH-g.top-g.bottom,E=0,p=0;p<n;p++)E+=N[p]+(p>0?b:0),T-=(p>0?b:0)+N[p];if(C+=g.left+g.right,E+=g.top+g.bottom,l={},l.minW=C+(i.w-i.innerW),l.minH=E+(i.h-i.innerH),l.contentW=l.minW-i.deltaW,l.contentH=l.minH-i.deltaH,l.minW=Math.min(l.minW,i.maxW),l.minH=Math.min(l.minH,i.maxH),l.minW=Math.max(l.minW,i.startMinWidth),l.minH=Math.max(l.minH,i.startMinHeight),!i.autoResize||l.minW==i.minW&&l.minH==i.minH){i.autoResize&&(l=e.layoutRect(l),l.contentW=l.minW-i.deltaW,l.contentH=l.minH-i.deltaH);var R;R="start"==t.packV?0:T>0?Math.floor(T/n):0;var D=0,M=t.flexWidths;if(M)for(c=0;c<M.length;c++)D+=M[c];else D=o;var O=S/D;for(c=0;c<o;c++)I[c]+=M?M[c]*O:O;for(m=g.top,p=0;p<n;p++){for(f=g.left,a=N[p]+R,c=0;c<o&&(k=P?p*o+o-1-c:p*o+c,u=r[k],u);c++)h=u.settings,d=u.layoutRect(),s=Math.max(I[c],d.startMinWidth),d.x=f,d.y=m,y=h.alignH||(_?_[c]||_[0]:null),"center"==y?d.x=f+s/2-d.w/2:"right"==y?d.x=f+s-d.w:"stretch"==y&&(d.w=s),y=h.alignV||(x?x[c]||x[0]:null),"center"==y?d.y=m+a/2-d.h/2:"bottom"==y?d.y=m+a-d.h:"stretch"==y&&(d.h=a),u.layoutRect(d),f+=s+v,u.recalc&&u.recalc();m+=a+b}}else if(l.w=l.minW,l.h=l.minH,e.layoutRect(l),this.recalc(e),null===e._lastRect){var A=e.parent();A&&(A._lastRect=null,A.recalc())}}})}),l("tinymce.core.ui.Iframe",["tinymce.core.ui.Widget","tinymce.core.util.Delay"],function(e,t){"use strict";return e.extend({renderHtml:function(){var e=this;return e.classes.add("iframe"),e.canFocus=!1,'<iframe id="'+e._id+'" class="'+e.classes+'" tabindex="-1" src="'+(e.settings.url||"javascript:''")+'" frameborder="0"></iframe>'},src:function(e){this.getEl().src=e},html:function(e,n){var o=this,r=this.getEl().contentWindow.document.body;return r?(r.innerHTML=e,n&&n()):t.setTimeout(function(){o.html(e)}),this}})}),l("tinymce.core.ui.InfoBox",["tinymce.core.ui.Widget"],function(e){"use strict";return e.extend({init:function(e){var t=this;t._super(e),t.classes.add("widget").add("infobox"),t.canFocus=!1},severity:function(e){this.classes.remove("error"),this.classes.remove("warning"),this.classes.remove("success"),this.classes.add(e)},help:function(e){this.state.set("help",e)},renderHtml:function(){var e=this,t=e.classPrefix;return'<div id="'+e._id+'" class="'+e.classes+'"><div id="'+e._id+'-body">'+e.encode(e.state.get("text"))+'<button role="button" tabindex="-1"><i class="'+t+"ico "+t+'i-help"></i></button></div></div>'},bindStates:function(){var e=this;return e.state.on("change:text",function(t){e.getEl("body").firstChild.data=e.encode(t.value),e.state.get("rendered")&&e.updateLayoutRect()}),e.state.on("change:help",function(t){e.classes.toggle("has-help",t.value),e.state.get("rendered")&&e.updateLayoutRect()}),e._super()}})}),l("tinymce.core.ui.Label",["tinymce.core.ui.Widget","tinymce.core.ui.DomUtils"],function(e,t){"use strict";return e.extend({init:function(e){var t=this;t._super(e),t.classes.add("widget").add("label"),t.canFocus=!1,e.multiline&&t.classes.add("autoscroll"),e.strong&&t.classes.add("strong")},initLayoutRect:function(){var e=this,n=e._super();
if(e.settings.multiline){var o=t.getSize(e.getEl());o.width>n.maxW&&(n.minW=n.maxW,e.classes.add("multiline")),e.getEl().style.width=n.minW+"px",n.startMinH=n.h=n.minH=Math.min(n.maxH,t.getSize(e.getEl()).height)}return n},repaint:function(){var e=this;return e.settings.multiline||(e.getEl().style.lineHeight=e.layoutRect().h+"px"),e._super()},severity:function(e){this.classes.remove("error"),this.classes.remove("warning"),this.classes.remove("success"),this.classes.add(e)},renderHtml:function(){var e,t,n=this,o=n.settings.forId,r=n.settings.html?n.settings.html:n.encode(n.state.get("text"));return!o&&(t=n.settings.forName)&&(e=n.getRoot().find("#"+t)[0],e&&(o=e._id)),o?'<label id="'+n._id+'" class="'+n.classes+'"'+(o?' for="'+o+'"':"")+">"+r+"</label>":'<span id="'+n._id+'" class="'+n.classes+'">'+r+"</span>"},bindStates:function(){var e=this;return e.state.on("change:text",function(t){e.innerHtml(e.encode(t.value)),e.state.get("rendered")&&e.updateLayoutRect()}),e._super()}})}),l("tinymce.core.ui.Toolbar",["tinymce.core.ui.Container"],function(e){"use strict";return e.extend({Defaults:{role:"toolbar",layout:"flow"},init:function(e){var t=this;t._super(e),t.classes.add("toolbar")},postRender:function(){var e=this;return e.items().each(function(e){e.classes.add("toolbar-item")}),e._super()}})}),l("tinymce.core.ui.MenuBar",["tinymce.core.ui.Toolbar"],function(e){"use strict";return e.extend({Defaults:{role:"menubar",containerCls:"menubar",ariaRoot:!0,defaults:{type:"menubutton"}}})}),l("tinymce.core.ui.MenuButton",["tinymce.core.ui.Button","tinymce.core.ui.Factory","tinymce.core.ui.MenuBar"],function(e,t,n){"use strict";function o(e,t){for(;e;){if(t===e)return!0;e=e.parentNode}return!1}var r=e.extend({init:function(e){var t=this;t._renderOpen=!0,t._super(e),e=t.settings,t.classes.add("menubtn"),e.fixedWidth&&t.classes.add("fixed-width"),t.aria("haspopup",!0),t.state.set("menu",e.menu||t.render())},showMenu:function(e){var n,o=this;return o.menu&&o.menu.visible()&&e!==!1?o.hideMenu():(o.menu||(n=o.state.get("menu")||[],n.length?n={type:"menu",items:n}:n.type=n.type||"menu",n.renderTo?o.menu=n.parent(o).show().renderTo():o.menu=t.create(n).parent(o).renderTo(),o.fire("createmenu"),o.menu.reflow(),o.menu.on("cancel",function(e){e.control.parent()===o.menu&&(e.stopPropagation(),o.focus(),o.hideMenu())}),o.menu.on("select",function(){o.focus()}),o.menu.on("show hide",function(e){e.control==o.menu&&o.activeMenu("show"==e.type),o.aria("expanded","show"==e.type)}).fire("show")),o.menu.show(),o.menu.layoutRect({w:o.layoutRect().w}),o.menu.moveRel(o.getEl(),o.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"]),void o.fire("showmenu"))},hideMenu:function(){var e=this;e.menu&&(e.menu.items().each(function(e){e.hideMenu&&e.hideMenu()}),e.menu.hide())},activeMenu:function(e){this.classes.toggle("active",e)},renderHtml:function(){var e,t=this,o=t._id,r=t.classPrefix,i=t.settings.icon,s=t.state.get("text"),a="";return e=t.settings.image,e?(i="none","string"!=typeof e&&(e=window.getSelection?e[0]:e[1]),e=" style=\"background-image: url('"+e+"')\""):e="",s&&(t.classes.add("btn-has-text"),a='<span class="'+r+'txt">'+t.encode(s)+"</span>"),i=t.settings.icon?r+"ico "+r+"i-"+i:"",t.aria("role",t.parent()instanceof n?"menuitem":"button"),'<div id="'+o+'" class="'+t.classes+'" tabindex="-1" aria-labelledby="'+o+'"><button id="'+o+'-open" role="presentation" type="button" tabindex="-1">'+(i?'<i class="'+i+'"'+e+"></i>":"")+a+' <i class="'+r+'caret"></i></button></div>'},postRender:function(){var e=this;return e.on("click",function(t){t.control===e&&o(t.target,e.getEl())&&(e.focus(),e.showMenu(!t.aria),t.aria&&e.menu.items().filter(":visible")[0].focus())}),e.on("mouseenter",function(t){var n,o=t.control,i=e.parent();o&&i&&o instanceof r&&o.parent()==i&&(i.items().filter("MenuButton").each(function(e){e.hideMenu&&e!=o&&(e.menu&&e.menu.visible()&&(n=!0),e.hideMenu())}),n&&(o.focus(),o.showMenu()))}),e._super()},bindStates:function(){var e=this;return e.state.on("change:menu",function(){e.menu&&e.menu.remove(),e.menu=null}),e._super()},remove:function(){this._super(),this.menu&&this.menu.remove()}});return r}),l("tinymce.core.ui.MenuItem",["tinymce.core.ui.Widget","tinymce.core.ui.Factory","tinymce.core.Env","tinymce.core.util.Delay"],function(e,t,n,o){"use strict";return e.extend({Defaults:{border:0,role:"menuitem"},init:function(e){var t,n=this;n._super(e),e=n.settings,n.classes.add("menu-item"),e.menu&&n.classes.add("menu-item-expand"),e.preview&&n.classes.add("menu-item-preview"),t=n.state.get("text"),"-"!==t&&"|"!==t||(n.classes.add("menu-item-sep"),n.aria("role","separator"),n.state.set("text","-")),e.selectable&&(n.aria("role","menuitemcheckbox"),n.classes.add("menu-item-checkbox"),e.icon="selected"),e.preview||e.selectable||n.classes.add("menu-item-normal"),n.on("mousedown",function(e){e.preventDefault()}),e.menu&&!e.ariaHideMenu&&n.aria("haspopup",!0)},hasMenus:function(){return!!this.settings.menu},showMenu:function(){var e,n=this,o=n.settings,r=n.parent();if(r.items().each(function(e){e!==n&&e.hideMenu()}),o.menu){e=n.menu,e?e.show():(e=o.menu,e.length?e={type:"menu",items:e}:e.type=e.type||"menu",r.settings.itemDefaults&&(e.itemDefaults=r.settings.itemDefaults),e=n.menu=t.create(e).parent(n).renderTo(),e.reflow(),e.on("cancel",function(t){t.stopPropagation(),n.focus(),e.hide()}),e.on("show hide",function(e){e.control.items&&e.control.items().each(function(e){e.active(e.settings.selected)})}).fire("show"),e.on("hide",function(t){t.control===e&&n.classes.remove("selected")}),e.submenu=!0),e._parentMenu=r,e.classes.add("menu-sub");var i=e.testMoveRel(n.getEl(),n.isRtl()?["tl-tr","bl-br","tr-tl","br-bl"]:["tr-tl","br-bl","tl-tr","bl-br"]);e.moveRel(n.getEl(),i),e.rel=i,i="menu-sub-"+i,e.classes.remove(e._lastRel).add(i),e._lastRel=i,n.classes.add("selected"),n.aria("expanded",!0)}},hideMenu:function(){var e=this;return e.menu&&(e.menu.items().each(function(e){e.hideMenu&&e.hideMenu()}),e.menu.hide(),e.aria("expanded",!1)),e},renderHtml:function(){function e(e){var t,o,r={};for(r=n.mac?{alt:"&#x2325;",ctrl:"&#x2318;",shift:"&#x21E7;",meta:"&#x2318;"}:{meta:"Ctrl"},e=e.split("+"),t=0;t<e.length;t++)o=r[e[t].toLowerCase()],o&&(e[t]=o);return e.join("+")}function t(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function o(e){var n=a.match||"";return n?e.replace(new RegExp(t(n),"gi"),function(e){return"!mce~match["+e+"]mce~match!"}):e}function r(e){return e.replace(new RegExp(t("!mce~match["),"g"),"<b>").replace(new RegExp(t("]mce~match!"),"g"),"</b>")}var i=this,s=i._id,a=i.settings,l=i.classPrefix,d=i.state.get("text"),u=i.settings.icon,c="",p=a.shortcut,f=i.encode(a.url),m="";return u&&i.parent().classes.add("menu-has-icons"),a.image&&(c=" style=\"background-image: url('"+a.image+"')\""),p&&(p=e(p)),u=l+"ico "+l+"i-"+(i.settings.icon||"none"),m="-"!==d?'<i class="'+u+'"'+c+"></i> ":"",d=r(i.encode(o(d))),f=r(i.encode(o(f))),'<div id="'+s+'" class="'+i.classes+'" tabindex="-1">'+m+("-"!==d?'<span id="'+s+'-text" class="'+l+'text">'+d+"</span>":"")+(p?'<div id="'+s+'-shortcut" class="'+l+'menu-shortcut">'+p+"</div>":"")+(a.menu?'<div class="'+l+'caret"></div>':"")+(f?'<div class="'+l+'menu-item-link">'+f+"</div>":"")+"</div>"},postRender:function(){var e=this,t=e.settings,n=t.textStyle;if("function"==typeof n&&(n=n.call(this)),n){var r=e.getEl("text");r&&r.setAttribute("style",n)}return e.on("mouseenter click",function(n){n.control===e&&(t.menu||"click"!==n.type?(e.showMenu(),n.aria&&e.menu.focus(!0)):(e.fire("select"),o.requestAnimationFrame(function(){e.parent().hideAll()})))}),e._super(),e},hover:function(){var e=this;return e.parent().items().each(function(e){e.classes.remove("selected")}),e.classes.toggle("selected",!0),e},active:function(e){return"undefined"!=typeof e&&this.aria("checked",e),this._super(e)},remove:function(){this._super(),this.menu&&this.menu.remove()}})}),l("tinymce.core.ui.Throbber",["tinymce.core.dom.DomQuery","tinymce.core.ui.Control","tinymce.core.util.Delay"],function(e,t,n){"use strict";return function(o,r){var i,s,a=this,l=t.classPrefix;a.show=function(t,d){function u(){i&&(e(o).append('<div class="'+l+"throbber"+(r?" "+l+"throbber-inline":"")+'"></div>'),d&&d())}return a.hide(),i=!0,t?s=n.setTimeout(u,t):u(),a},a.hide=function(){var e=o.lastChild;return n.clearTimeout(s),e&&e.className.indexOf("throbber")!=-1&&e.parentNode.removeChild(e),i=!1,a}}}),l("tinymce.core.ui.Menu",["tinymce.core.ui.FloatPanel","tinymce.core.ui.MenuItem","tinymce.core.ui.Throbber","tinymce.core.util.Tools"],function(e,t,n,o){"use strict";return e.extend({Defaults:{defaultType:"menuitem",border:1,layout:"stack",role:"application",bodyRole:"menu",ariaRoot:!0},init:function(e){var t=this;if(e.autohide=!0,e.constrainToViewport=!0,"function"==typeof e.items&&(e.itemsFactory=e.items,e.items=[]),e.itemDefaults)for(var n=e.items,r=n.length;r--;)n[r]=o.extend({},e.itemDefaults,n[r]);t._super(e),t.classes.add("menu")},repaint:function(){return this.classes.toggle("menu-align",!0),this._super(),this.getEl().style.height="",this.getEl("body").style.height="",this},cancel:function(){var e=this;e.hideAll(),e.fire("select")},load:function(){function e(){r.throbber&&(r.throbber.hide(),r.throbber=null)}var t,o,r=this;o=r.settings.itemsFactory,o&&(r.throbber||(r.throbber=new n(r.getEl("body"),(!0)),0===r.items().length?(r.throbber.show(),r.fire("loading")):r.throbber.show(100,function(){r.items().remove(),r.fire("loading")}),r.on("hide close",e)),r.requestTime=t=(new Date).getTime(),r.settings.itemsFactory(function(n){return 0===n.length?void r.hide():void(r.requestTime===t&&(r.getEl().style.width="",r.getEl("body").style.width="",e(),r.items().remove(),r.getEl("body").innerHTML="",r.add(n),r.renderNew(),r.fire("loaded")))}))},hideAll:function(){var e=this;return this.find("menuitem").exec("hideMenu"),e._super()},preRender:function(){var e=this;return e.items().each(function(t){var n=t.settings;if(n.icon||n.image||n.selectable)return e._hasIcons=!0,!1}),e.settings.itemsFactory&&e.on("postrender",function(){e.settings.itemsFactory&&e.load()}),e._super()}})}),l("tinymce.core.ui.ListBox",["tinymce.core.ui.MenuButton","tinymce.core.ui.Menu"],function(e,t){"use strict";return e.extend({init:function(e){function t(n){for(var i=0;i<n.length;i++){if(o=n[i].selected||e.value===n[i].value)return r=r||n[i].text,s.state.set("value",n[i].value),!0;if(n[i].menu&&t(n[i].menu))return!0}}var n,o,r,i,s=this;s._super(e),e=s.settings,s._values=n=e.values,n&&("undefined"!=typeof e.value&&t(n),!o&&n.length>0&&(r=n[0].text,s.state.set("value",n[0].value)),s.state.set("menu",n)),s.state.set("text",e.text||r),s.classes.add("listbox"),s.on("select",function(t){var n=t.control;i&&(t.lastControl=i),e.multiple?n.active(!n.active()):s.value(t.control.value()),i=n})},bindStates:function(){function e(e,n){e instanceof t&&e.items().each(function(e){e.hasMenus()||e.active(e.value()===n)})}function n(e,t){var o;if(e)for(var r=0;r<e.length;r++){if(e[r].value===t)return e[r];if(e[r].menu&&(o=n(e[r].menu,t)))return o}}var o=this;return o.on("show",function(t){e(t.control,o.value())}),o.state.on("change:value",function(e){var t=n(o.state.get("menu"),e.value);t?o.text(t.text):o.text(o.settings.text)}),o._super()}})}),l("tinymce.core.ui.Radio",["tinymce.core.ui.Checkbox"],function(e){"use strict";return e.extend({Defaults:{classes:"radio",role:"radio"}})}),l("tinymce.core.ui.ResizeHandle",["tinymce.core.ui.Widget","tinymce.core.ui.DragHelper"],function(e,t){"use strict";return e.extend({renderHtml:function(){var e=this,t=e.classPrefix;return e.classes.add("resizehandle"),"both"==e.settings.direction&&e.classes.add("resizehandle-both"),e.canFocus=!1,'<div id="'+e._id+'" class="'+e.classes+'"><i class="'+t+"ico "+t+'i-resize"></i></div>'},postRender:function(){var e=this;e._super(),e.resizeDragHelper=new t(this._id,{start:function(){e.fire("ResizeStart")},drag:function(t){"both"!=e.settings.direction&&(t.deltaX=0),e.fire("Resize",t)},stop:function(){e.fire("ResizeEnd")}})},remove:function(){return this.resizeDragHelper&&this.resizeDragHelper.destroy(),this._super()}})}),l("tinymce.core.ui.SelectBox",["tinymce.core.ui.Widget"],function(e){"use strict";function t(e){var t="";if(e)for(var n=0;n<e.length;n++)t+='<option value="'+e[n]+'">'+e[n]+"</option>";return t}return e.extend({Defaults:{classes:"selectbox",role:"selectbox",options:[]},init:function(e){var t=this;t._super(e),t.settings.size&&(t.size=t.settings.size),t.settings.options&&(t._options=t.settings.options),t.on("keydown",function(e){var n;13==e.keyCode&&(e.preventDefault(),t.parents().reverse().each(function(e){if(e.toJSON)return n=e,!1}),t.fire("submit",{data:n.toJSON()}))})},options:function(e){return arguments.length?(this.state.set("options",e),this):this.state.get("options")},renderHtml:function(){var e,n=this,o="";return e=t(n._options),n.size&&(o=' size = "'+n.size+'"'),'<select id="'+n._id+'" class="'+n.classes+'"'+o+">"+e+"</select>"},bindStates:function(){var e=this;return e.state.on("change:options",function(n){e.getEl().innerHTML=t(n.value)}),e._super()}})}),l("tinymce.core.ui.Slider",["tinymce.core.ui.Widget","tinymce.core.ui.DragHelper","tinymce.core.ui.DomUtils"],function(e,t,n){"use strict";function o(e,t,n){return e<t&&(e=t),e>n&&(e=n),e}function r(e,t,n){e.setAttribute("aria-"+t,n)}function i(e,t){var o,i,s,a,l,d;"v"==e.settings.orientation?(a="top",s="height",i="h"):(a="left",s="width",i="w"),d=e.getEl("handle"),o=(e.layoutRect()[i]||100)-n.getSize(d)[s],l=o*((t-e._minValue)/(e._maxValue-e._minValue))+"px",d.style[a]=l,d.style.height=e.layoutRect().h+"px",r(d,"valuenow",t),r(d,"valuetext",""+e.settings.previewFilter(t)),r(d,"valuemin",e._minValue),r(d,"valuemax",e._maxValue)}return e.extend({init:function(e){var t=this;e.previewFilter||(e.previewFilter=function(e){return Math.round(100*e)/100}),t._super(e),t.classes.add("slider"),"v"==e.orientation&&t.classes.add("vertical"),t._minValue=e.minValue||0,t._maxValue=e.maxValue||100,t._initValue=t.state.get("value")},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix;return'<div id="'+t+'" class="'+e.classes+'"><div id="'+t+'-handle" class="'+n+'slider-handle" role="slider" tabindex="-1"></div></div>'},reset:function(){this.value(this._initValue).repaint()},postRender:function(){function e(e,t,n){return(n+e)/(t-e)}function r(e,t,n){return n*(t-e)-e}function i(t,n){function i(i){var s;s=f.value(),s=r(t,n,e(t,n,s)+.05*i),s=o(s,t,n),f.value(s),f.fire("dragstart",{value:s}),f.fire("drag",{value:s}),f.fire("dragend",{value:s})}f.on("keydown",function(e){switch(e.keyCode){case 37:case 38:i(-1);break;case 39:case 40:i(1)}})}function s(e,r,i){var s,a,l,m,h;f._dragHelper=new t(f._id,{handle:f._id+"-handle",start:function(e){s=e[d],a=parseInt(f.getEl("handle").style[u],10),l=(f.layoutRect()[p]||100)-n.getSize(i)[c],f.fire("dragstart",{value:h})},drag:function(t){var n=t[d]-s;m=o(a+n,0,l),i.style[u]=m+"px",h=e+m/l*(r-e),f.value(h),f.tooltip().text(""+f.settings.previewFilter(h)).show().moveRel(i,"bc tc"),f.fire("drag",{value:h})},stop:function(){f.tooltip().hide(),f.fire("dragend",{value:h})}})}var a,l,d,u,c,p,f=this;a=f._minValue,l=f._maxValue,"v"==f.settings.orientation?(d="screenY",u="top",c="height",p="h"):(d="screenX",u="left",c="width",p="w"),f._super(),i(a,l,f.getEl("handle")),s(a,l,f.getEl("handle"))},repaint:function(){this._super(),i(this,this.value())},bindStates:function(){var e=this;return e.state.on("change:value",function(t){i(e,t.value)}),e._super()}})}),l("tinymce.core.ui.Spacer",["tinymce.core.ui.Widget"],function(e){"use strict";return e.extend({renderHtml:function(){var e=this;return e.classes.add("spacer"),e.canFocus=!1,'<div id="'+e._id+'" class="'+e.classes+'"></div>'}})}),l("tinymce.core.ui.SplitButton",["tinymce.core.ui.MenuButton","tinymce.core.ui.DomUtils","tinymce.core.dom.DomQuery"],function(e,t,n){return e.extend({Defaults:{classes:"widget btn splitbtn",role:"button"},repaint:function(){var e,o,r=this,i=r.getEl(),s=r.layoutRect();return r._super(),e=i.firstChild,o=i.lastChild,n(e).css({width:s.w-t.getSize(o).width,height:s.h-2}),n(o).css({height:s.h-2}),r},activeMenu:function(e){var t=this;n(t.getEl().lastChild).toggleClass(t.classPrefix+"active",e)},renderHtml:function(){var e,t=this,n=t._id,o=t.classPrefix,r=t.state.get("icon"),i=t.state.get("text"),s="";return e=t.settings.image,e?(r="none","string"!=typeof e&&(e=window.getSelection?e[0]:e[1]),e=" style=\"background-image: url('"+e+"')\""):e="",r=t.settings.icon?o+"ico "+o+"i-"+r:"",i&&(t.classes.add("btn-has-text"),s='<span class="'+o+'txt">'+t.encode(i)+"</span>"),'<div id="'+n+'" class="'+t.classes+'" role="button" tabindex="-1"><button type="button" hidefocus="1" tabindex="-1">'+(r?'<i class="'+r+'"'+e+"></i>":"")+s+'</button><button type="button" class="'+o+'open" hidefocus="1" tabindex="-1">'+(t._menuBtnText?(r?" ":"")+t._menuBtnText:"")+' <i class="'+o+'caret"></i></button></div>'},postRender:function(){var e=this,t=e.settings.onclick;return e.on("click",function(e){var n=e.target;if(e.control==this)for(;n;){if(e.aria&&"down"!=e.aria.key||"BUTTON"==n.nodeName&&n.className.indexOf("open")==-1)return e.stopImmediatePropagation(),void(t&&t.call(this,e));n=n.parentNode}}),delete e.settings.onclick,e._super()}})}),l("tinymce.core.ui.StackLayout",["tinymce.core.ui.FlowLayout"],function(e){"use strict";return e.extend({Defaults:{containerClass:"stack-layout",controlClass:"stack-layout-item",endClass:"break"},isNative:function(){return!0}})}),l("tinymce.core.ui.TabPanel",["tinymce.core.ui.Panel","tinymce.core.dom.DomQuery","tinymce.core.ui.DomUtils"],function(e,t,n){"use strict";return e.extend({Defaults:{layout:"absolute",defaults:{type:"panel"}},activateTab:function(e){var n;this.activeTabId&&(n=this.getEl(this.activeTabId),t(n).removeClass(this.classPrefix+"active"),n.setAttribute("aria-selected","false")),this.activeTabId="t"+e,n=this.getEl("t"+e),n.setAttribute("aria-selected","true"),t(n).addClass(this.classPrefix+"active"),this.items()[e].show().fire("showtab"),this.reflow(),this.items().each(function(t,n){e!=n&&t.hide()})},renderHtml:function(){var e=this,t=e._layout,n="",o=e.classPrefix;return e.preRender(),t.preRender(e),e.items().each(function(t,r){var i=e._id+"-t"+r;t.aria("role","tabpanel"),t.aria("labelledby",i),n+='<div id="'+i+'" class="'+o+'tab" unselectable="on" role="tab" aria-controls="'+t._id+'" aria-selected="false" tabIndex="-1">'+e.encode(t.settings.title)+"</div>"}),'<div id="'+e._id+'" class="'+e.classes+'" hidefocus="1" tabindex="-1"><div id="'+e._id+'-head" class="'+o+'tabs" role="tablist">'+n+'</div><div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+t.renderHtml(e)+"</div></div>"},postRender:function(){var e=this;e._super(),e.settings.activeTab=e.settings.activeTab||0,e.activateTab(e.settings.activeTab),this.on("click",function(t){var n=t.target.parentNode;if(n&&n.id==e._id+"-head")for(var o=n.childNodes.length;o--;)n.childNodes[o]==t.target&&e.activateTab(o)})},initLayoutRect:function(){var e,t,o,r=this;t=n.getSize(r.getEl("head")).width,t=t<0?0:t,o=0,r.items().each(function(e){t=Math.max(t,e.layoutRect().minW),o=Math.max(o,e.layoutRect().minH)}),r.items().each(function(e){e.settings.x=0,e.settings.y=0,e.settings.w=t,e.settings.h=o,e.layoutRect({x:0,y:0,w:t,h:o})});var i=n.getSize(r.getEl("head")).height;return r.settings.minWidth=t,r.settings.minHeight=o+i,e=r._super(),e.deltaH+=i,e.innerH=e.h-e.deltaH,e}})}),l("tinymce.core.ui.TextBox",["tinymce.core.ui.Widget","tinymce.core.util.Tools","tinymce.core.ui.DomUtils"],function(e,t,n){return e.extend({init:function(e){var t=this;t._super(e),t.classes.add("textbox"),e.multiline?t.classes.add("multiline"):(t.on("keydown",function(e){var n;13==e.keyCode&&(e.preventDefault(),t.parents().reverse().each(function(e){if(e.toJSON)return n=e,!1}),t.fire("submit",{data:n.toJSON()}))}),t.on("keyup",function(e){t.state.set("value",e.target.value)}))},repaint:function(){var e,t,n,o,r,i=this,s=0;e=i.getEl().style,t=i._layoutRect,r=i._lastRepaintRect||{};var a=document;return!i.settings.multiline&&a.all&&(!a.documentMode||a.documentMode<=8)&&(e.lineHeight=t.h-s+"px"),n=i.borderBox,o=n.left+n.right+8,s=n.top+n.bottom+(i.settings.multiline?8:0),t.x!==r.x&&(e.left=t.x+"px",r.x=t.x),t.y!==r.y&&(e.top=t.y+"px",r.y=t.y),t.w!==r.w&&(e.width=t.w-o+"px",r.w=t.w),t.h!==r.h&&(e.height=t.h-s+"px",r.h=t.h),i._lastRepaintRect=r,i.fire("repaint",{},!1),i},renderHtml:function(){var e,o,r=this,i=r.settings;return e={id:r._id,hidefocus:"1"},t.each(["rows","spellcheck","maxLength","size","readonly","min","max","step","list","pattern","placeholder","required","multiple"],function(t){e[t]=i[t]}),r.disabled()&&(e.disabled="disabled"),i.subtype&&(e.type=i.subtype),o=n.create(i.multiline?"textarea":"input",e),o.value=r.state.get("value"),o.className=r.classes,o.outerHTML},value:function(e){return arguments.length?(this.state.set("value",e),this):(this.state.get("rendered")&&this.state.set("value",this.getEl().value),this.state.get("value"))},postRender:function(){var e=this;e.getEl().value=e.state.get("value"),e._super(),e.$el.on("change",function(t){e.state.set("value",t.target.value),e.fire("change",t)})},bindStates:function(){var e=this;return e.state.on("change:value",function(t){e.getEl().value!=t.value&&(e.getEl().value=t.value)}),e.state.on("change:disabled",function(t){e.getEl().disabled=t.value}),e._super()},remove:function(){this.$el.off(),this._super()}})}),l("tinymce.core.ui.Api",["tinymce.core.ui.Selector","tinymce.core.ui.Collection","tinymce.core.ui.ReflowQueue","tinymce.core.ui.Control","tinymce.core.ui.Factory","tinymce.core.ui.KeyboardNavigation","tinymce.core.ui.Container","tinymce.core.ui.DragHelper","tinymce.core.ui.Scrollable","tinymce.core.ui.Panel","tinymce.core.ui.Movable","tinymce.core.ui.Resizable","tinymce.core.ui.FloatPanel","tinymce.core.ui.Window","tinymce.core.ui.MessageBox","tinymce.core.ui.Tooltip","tinymce.core.ui.Widget","tinymce.core.ui.Progress","tinymce.core.ui.Notification","tinymce.core.ui.Layout","tinymce.core.ui.AbsoluteLayout","tinymce.core.ui.Button","tinymce.core.ui.ButtonGroup","tinymce.core.ui.Checkbox","tinymce.core.ui.ComboBox","tinymce.core.ui.ColorBox","tinymce.core.ui.PanelButton","tinymce.core.ui.ColorButton","tinymce.core.ui.ColorPicker","tinymce.core.ui.Path","tinymce.core.ui.ElementPath","tinymce.core.ui.FormItem","tinymce.core.ui.Form","tinymce.core.ui.FieldSet","tinymce.core.ui.FilePicker","tinymce.core.ui.FitLayout","tinymce.core.ui.FlexLayout","tinymce.core.ui.FlowLayout","tinymce.core.ui.FormatControls","tinymce.core.ui.GridLayout","tinymce.core.ui.Iframe","tinymce.core.ui.InfoBox","tinymce.core.ui.Label","tinymce.core.ui.Toolbar","tinymce.core.ui.MenuBar","tinymce.core.ui.MenuButton","tinymce.core.ui.MenuItem","tinymce.core.ui.Throbber","tinymce.core.ui.Menu","tinymce.core.ui.ListBox","tinymce.core.ui.Radio","tinymce.core.ui.ResizeHandle","tinymce.core.ui.SelectBox","tinymce.core.ui.Slider","tinymce.core.ui.Spacer","tinymce.core.ui.SplitButton","tinymce.core.ui.StackLayout","tinymce.core.ui.TabPanel","tinymce.core.ui.TextBox"],function(e,t,n,o,r,i,s,a,l,d,u,c,p,f,m,h,g,y,v,b,_,x,C,E,w,j,S,T,P,k,I,N,R,D,M,O,A,L,F,B,z,U,H,W,V,q,G,K,$,Y,J,Z,X,Q,ee,te,ne,oe,re){"use strict";var ie=function(e,t){r.add(e.split(".").pop(),t)},se=function(e,t,n){var o,r;for(r=t.split(/[.\/]/),o=0;o<r.length-1;++o)void 0===e[r[o]]&&(e[r[o]]={}),e=e[r[o]];e[r[r.length-1]]=n,ie(t,n)},ae=function(ie){se(ie,"ui.Selector",e),se(ie,"ui.Collection",t),se(ie,"ui.ReflowQueue",n),se(ie,"ui.Control",o),se(ie,"ui.Factory",r),se(ie,"ui.KeyboardNavigation",i),se(ie,"ui.Container",s),se(ie,"ui.DragHelper",a),se(ie,"ui.Scrollable",l),se(ie,"ui.Panel",d),se(ie,"ui.Movable",u),se(ie,"ui.Resizable",c),se(ie,"ui.FloatPanel",p),se(ie,"ui.Window",f),se(ie,"ui.MessageBox",m),se(ie,"ui.Tooltip",h),se(ie,"ui.Widget",g),se(ie,"ui.Progress",y),se(ie,"ui.Notification",v),se(ie,"ui.Layout",b),se(ie,"ui.AbsoluteLayout",_),se(ie,"ui.Button",x),se(ie,"ui.ButtonGroup",C),se(ie,"ui.Checkbox",E),se(ie,"ui.ComboBox",w),se(ie,"ui.ColorBox",j),se(ie,"ui.PanelButton",S),se(ie,"ui.ColorButton",T),se(ie,"ui.ColorPicker",P),se(ie,"ui.Path",k),se(ie,"ui.ElementPath",I),se(ie,"ui.FormItem",N),se(ie,"ui.Form",R),se(ie,"ui.FieldSet",D),se(ie,"ui.FilePicker",M),se(ie,"ui.FitLayout",O),se(ie,"ui.FlexLayout",A),se(ie,"ui.FlowLayout",L),se(ie,"ui.FormatControls",F),se(ie,"ui.GridLayout",B),se(ie,"ui.Iframe",z),se(ie,"ui.InfoBox",U),se(ie,"ui.Label",H),se(ie,"ui.Toolbar",W),se(ie,"ui.MenuBar",V),se(ie,"ui.MenuButton",q),se(ie,"ui.MenuItem",G),se(ie,"ui.Throbber",K),se(ie,"ui.Menu",$),se(ie,"ui.ListBox",Y),se(ie,"ui.Radio",J),se(ie,"ui.ResizeHandle",Z),se(ie,"ui.SelectBox",X),se(ie,"ui.Slider",Q),se(ie,"ui.Spacer",ee),se(ie,"ui.SplitButton",te),se(ie,"ui.StackLayout",ne),se(ie,"ui.TabPanel",oe),se(ie,"ui.TextBox",re),se(ie,"ui.Api",le)},le={appendTo:ae};return le}),l("tinymce.core.api.Tinymce",["tinymce.core.geom.Rect","tinymce.core.util.Promise","tinymce.core.util.Delay","tinymce.core.Env","tinymce.core.dom.EventUtils","tinymce.core.dom.Sizzle","tinymce.core.util.Tools","tinymce.core.dom.DomQuery","tinymce.core.html.Styles","tinymce.core.dom.TreeWalker","tinymce.core.html.Entities","tinymce.core.dom.DOMUtils","tinymce.core.dom.ScriptLoader","tinymce.core.AddOnManager","tinymce.core.dom.RangeUtils","tinymce.core.html.Node","tinymce.core.html.Schema","tinymce.core.html.SaxParser","tinymce.core.html.DomParser","tinymce.core.html.Writer","tinymce.core.html.Serializer","tinymce.core.dom.Serializer","tinymce.core.util.VK","tinymce.core.dom.ControlSelection","tinymce.core.dom.BookmarkManager","tinymce.core.dom.Selection","tinymce.core.Formatter","tinymce.core.UndoManager","tinymce.core.EditorCommands","tinymce.core.util.URI","tinymce.core.util.Class","tinymce.core.util.EventDispatcher","tinymce.core.util.Observable","tinymce.core.WindowManager","tinymce.core.NotificationManager","tinymce.core.EditorObservable","tinymce.core.Shortcuts","tinymce.core.Editor","tinymce.core.util.I18n","tinymce.core.FocusManager","tinymce.core.EditorManager","tinymce.core.util.XHR","tinymce.core.util.JSON","tinymce.core.util.JSONRequest","tinymce.core.util.JSONP","tinymce.core.util.LocalStorage","tinymce.core.api.Compat","tinymce.core.util.Color","tinymce.core.ui.Api"],function(e,t,n,o,r,i,s,a,l,d,u,c,p,f,m,h,g,y,v,b,_,x,C,E,w,j,S,T,P,k,I,N,R,D,M,O,A,L,F,B,z,U,H,W,V,q,G,K,$){var Y=z,J=function(e,t,n){var o,r;for(r=t.split(/[.\/]/),o=0;o<r.length-1;++o)void 0===e[r[o]]&&(e[r[o]]={}),e=e[r[o]];e[r[r.length-1]]=n};return J(Y,"geom.Rect",e),J(Y,"util.Promise",t),J(Y,"util.Delay",n),J(Y,"Env",o),J(Y,"dom.EventUtils",r),J(Y,"dom.Sizzle",i),J(Y,"util.Tools",s),J(Y,"dom.DomQuery",a),J(Y,"html.Styles",l),J(Y,"dom.TreeWalker",d),J(Y,"html.Entities",u),J(Y,"dom.DOMUtils",c),J(Y,"dom.ScriptLoader",p),J(Y,"AddOnManager",f),J(Y,"dom.RangeUtils",m),J(Y,"html.Node",h),J(Y,"html.Schema",g),J(Y,"html.SaxParser",y),J(Y,"html.DomParser",v),J(Y,"html.Writer",b),J(Y,"html.Serializer",_),J(Y,"dom.Serializer",x),J(Y,"util.VK",C),J(Y,"dom.ControlSelection",E),J(Y,"dom.BookmarkManager",w),J(Y,"dom.Selection",j),J(Y,"Formatter",S),J(Y,"UndoManager",T),J(Y,"EditorCommands",P),J(Y,"util.URI",k),J(Y,"util.Class",I),J(Y,"util.EventDispatcher",N),J(Y,"util.Observable",R),J(Y,"WindowManager",D),J(Y,"NotificationManager",M),J(Y,"EditorObservable",O),J(Y,"Shortcuts",A),J(Y,"Editor",L),J(Y,"util.I18n",F),J(Y,"FocusManager",B),J(Y,"EditorManager",z),J(Y,"util.XHR",U),J(Y,"util.JSON",H),J(Y,"util.JSONRequest",W),J(Y,"util.JSONP",V),J(Y,"util.LocalStorage",q),J(Y,"Compat",G),J(Y,"util.Color",K),$.appendTo(Y),G.register(Y),Y}),l("tinymce.core.Register",[],function(){var t=this||window,n=function(n){"function"==typeof t.define&&(t.define.amd||(t.define("ephox/tinymce",[],function(){return n}),t.define("tinymce.core.EditorManager",[],function(){return n}))),e.exports=n};return{exposeToModuleLoaders:n}}),l("tinymce.core.api.Main",["tinymce.core.api.Tinymce","tinymce.core.Register"],function(e,t){return function(){return window.tinymce=e,window.tinyMCE=e,t.exposeToModuleLoaders(e),e}}),i("tinymce.core.api.Main")()}()}).call(window),t.window=tinymce}).call(t,n("./node_modules/timers-browserify/main.js").setImmediate)}});