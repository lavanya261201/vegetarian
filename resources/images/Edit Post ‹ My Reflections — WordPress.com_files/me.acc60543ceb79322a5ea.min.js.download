webpackJsonp(["me"],{"./client/blocks/edit-gravatar/constants.js":function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.ALLOWED_FILE_EXTENSIONS=["jpg","jpeg","png","gif","bmp"]},"./client/blocks/edit-gravatar/index.jsx":function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.EditGravatar=void 0;var s=o("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=n(s),a=o("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=n(a),l=o("./node_modules/babel-runtime/helpers/createClass.js"),d=n(l),u=o("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=n(u),p=o("./node_modules/babel-runtime/helpers/inherits.js"),m=n(p),f=o("./node_modules/prop-types/index.js"),h=n(f),g=o("./node_modules/react/react.js"),_=n(g),b=o("./node_modules/classnames/index.js"),v=n(b),E=o("./node_modules/react-redux/es/index.js"),y=o("./node_modules/i18n-calypso/index.js"),x=o("./node_modules/path-browserify/index.js"),k=n(x),j=o("./node_modules/gridicons/build/index.js"),C=n(j),S=o("./client/blocks/edit-gravatar/constants.js"),w=o("./client/state/ui/editor/image-editor/constants.js"),R=o("./client/components/dialog/index.jsx"),P=n(R),T=o("./client/components/file-picker/index.jsx"),A=n(T),N=o("./client/state/current-user/selectors.js"),L=o("./client/components/gravatar/index.jsx"),I=n(L),D=o("./client/state/current-user/gravatar-status/selectors.js"),M=o("./client/state/ui/editor/image-editor/actions.js"),O=o("./client/components/spinner/index.jsx"),F=n(O),U=o("./client/state/current-user/gravatar-status/actions.js"),B=o("./client/blocks/image-editor/index.jsx"),W=n(B),z=o("./client/components/info-popover/index.jsx"),V=n(z),G=o("./client/components/external-link/index.jsx"),H=n(G),q=o("./client/components/email-verification/email-verification-dialog/index.jsx"),Y=n(q),Q=o("./client/components/drop-zone/index.jsx"),Z=n(Q),X=o("./client/state/analytics/actions.js"),J=t.EditGravatar=function(e){function t(){var e,o,n,s;(0,r.default)(this,t);for(var a=arguments.length,l=Array(a),d=0;d<a;d++)l[d]=arguments[d];return o=n=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),n.state={isEditingImage:!1,image:!1,showEmailVerificationNotice:!1},n.onReceiveFile=function(e){var t=n.props,o=t.receiveGravatarImageFailed,s=t.translate,i=t.recordReceiveImageEvent,a=k.default.extname(e[0].name).toLowerCase().substring(1);if(i(),S.ALLOWED_FILE_EXTENSIONS.indexOf(a)===-1){var r="";return r=a?s("Sorry, %s files are not supported — please make sure your image is in JPG, GIF, or PNG format.",{args:a}):s("Sorry, images of that filetype are not supported — please make sure your image is in JPG, GIF, or PNG format."),void o({errorMessage:r,statName:"bad_filetype"})}var l=URL.createObjectURL(e[0]);n.setState({isEditingImage:!0,image:l})},n.onImageEditorDone=function(e,t){var o=n.props,s=o.receiveGravatarImageFailed,i=o.translate,a=o.uploadGravatar,r=o.user;return n.hideImageEditor(),e?void s({errorMessage:i("We couldn't save that image — please try another one."),statName:"image_editor_error"}):void a(t,r.email)},n.hideImageEditor=function(){var e=n.props.resetAllImageEditorState;e(),URL.revokeObjectURL(n.state.image),n.setState({isEditingImage:!1,image:!1})},n.handleUnverifiedUserClick=function(){n.props.recordClickButtonEvent({isVerified:n.props.user.email_verified}),n.props.user.email_verified||n.setState({showEmailVerificationNotice:!0})},n.closeVerifyEmailDialog=function(){n.setState({showEmailVerificationNotice:!1})},s=o,(0,c.default)(n,s)}return(0,m.default)(t,e),(0,d.default)(t,[{key:"renderImageEditor",value:function(){if(this.state.isEditingImage)return _.default.createElement(P.default,{additionalClassNames:"edit-gravatar-modal",isVisible:!0},_.default.createElement(W.default,{allowedAspectRatios:[w.AspectRatios.ASPECT_1X1],media:{src:this.state.image},onDone:this.onImageEditorDone,onCancel:this.hideImageEditor,doneButtonText:this.props.translate("Change My Photo")}))}},{key:"render",value:function(){var e=this.props,t=e.isUploading,o=e.translate,n=e.user,s="https://gravatar.com/"+(n.username||""),i=400,a=n.email_verified?"cloud-upload":"notice",r=o(n.email_verified?"Click to change photo":"Verify your email");return _.default.createElement("div",{className:(0,v.default)("edit-gravatar",{"is-unverified":!n.email_verified},{"is-uploading":t})},_.default.createElement("div",{onClick:this.handleUnverifiedUserClick},this.state.showEmailVerificationNotice&&_.default.createElement(Y.default,{onClose:this.closeVerifyEmailDialog}),this.renderImageEditor(),_.default.createElement(A.default,{accept:"image/*",onPick:this.onReceiveFile},_.default.createElement("div",{className:(0,v.default)("edit-gravatar__image-container",{"is-uploading":t})},n.email_verified&&_.default.createElement(Z.default,{textLabel:o("Drop to upload profile photo"),onFilesDrop:this.onReceiveFile}),_.default.createElement(I.default,{imgSize:i,size:150,user:n}),!t&&_.default.createElement("div",{className:"edit-gravatar__label-container"},_.default.createElement(C.default,{icon:a,size:36}),_.default.createElement("span",{className:"edit-gravatar__label"},r)),t&&_.default.createElement(F.default,{className:"edit-gravatar__spinner"})))),_.default.createElement("div",null,_.default.createElement("p",{className:"edit-gravatar__explanation"},o("Your profile photo is public.")),_.default.createElement(V.default,{className:"edit-gravatar__pop-over",position:"left"},o('{{p}}The avatar you use on WordPress.com comes from {{ExternalLink}}Gravatar{{/ExternalLink}}, a universal avatar service (it stands for "Globally Recognized Avatar," get it?).{{/p}}{{p}}Your image may also appear on other sites using Gravatar whenever you\'re logged in with your email address %(email)s.{{/p}}',{components:{ExternalLink:_.default.createElement(H.default,{href:s,target:"_blank",rel:"noopener noreferrer",icon:!0}),p:_.default.createElement("p",null)},args:{email:n.email}}))))}}]),t}(g.Component);J.propTypes={isUploading:h.default.bool,translate:h.default.func,receiveGravatarImageFailed:h.default.func,resetAllImageEditorState:h.default.func,uploadGravatar:h.default.func,user:h.default.object,recordClickButtonEvent:h.default.func,recordReceiveImageEvent:h.default.func};var K=function(e){var t=e.isVerified;return(0,X.composeAnalytics)((0,X.recordTracksEvent)("calypso_edit_gravatar_click",{userVerified:t}),(0,X.recordGoogleEvent)("Me","Clicked on Edit Gravatar Button in Profile"))},$=function(){return(0,X.recordTracksEvent)("calypso_edit_gravatar_file_receive")};t.default=(0,E.connect)(function(e){return{user:(0,N.getCurrentUser)(e)||{},isUploading:(0,D.isCurrentUserUploadingGravatar)(e)}},{resetAllImageEditorState:M.resetAllImageEditorState,receiveGravatarImageFailed:U.receiveGravatarImageFailed,uploadGravatar:U.uploadGravatar,recordClickButtonEvent:K,recordReceiveImageEvent:$})((0,y.localize)(J))},"./client/blocks/image-editor/image-editor-buttons.jsx":function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=o("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=n(s),a=o("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=n(a),l=o("./node_modules/babel-runtime/helpers/createClass.js"),d=n(l),u=o("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=n(u),p=o("./node_modules/babel-runtime/helpers/inherits.js"),m=n(p),f=o("./node_modules/lodash/noop.js"),h=n(f),g=o("./node_modules/prop-types/index.js"),_=n(g),b=o("./node_modules/react/react.js"),v=n(b),E=o("./node_modules/react-redux/es/index.js"),y=o("./node_modules/i18n-calypso/index.js"),x=o("./client/components/button/index.jsx"),k=n(x),j=o("./client/state/ui/editor/image-editor/selectors.js"),C=function(e){function t(){return(0,r.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,m.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){var e=this.props,t=e.hasChanges,o=e.onCancel,n=e.src,s=e.onDone,i=e.onReset,a=e.translate,r=e.doneButtonText;return v.default.createElement("div",{className:"image-editor__buttons"},o&&v.default.createElement(k.default,{className:"image-editor__buttons-button",onClick:o},a("Cancel")),v.default.createElement(k.default,{className:"image-editor__buttons-button",disabled:!t,onClick:i},a("Reset")),v.default.createElement(k.default,{className:"image-editor__buttons-button",disabled:!n,primary:!0,onClick:s},r||a(" Done ")))}}]),t}(b.Component);C.propTypes={src:_.default.string,hasChanges:_.default.bool,resetImageEditorState:_.default.func,onDone:_.default.func,onCancel:_.default.func,onReset:_.default.func,doneButtonText:_.default.string},C.defaultProps={src:"",hasChanges:!1,resetImageEditorState:h.default,onDone:h.default,onCancel:h.default,onReset:h.default,doneButtonText:""},t.default=(0,E.connect)(function(e){var t=(0,j.getImageEditorFileInfo)(e),o=t.src,n=(0,j.imageEditorHasChanges)(e);return{src:o,hasChanges:n}})((0,y.localize)(C)),e.exports=t.default},"./client/blocks/image-editor/image-editor-canvas.jsx":function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ImageEditorCanvas=void 0;var s=o("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=n(s),a=o("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=n(a),l=o("./node_modules/babel-runtime/helpers/createClass.js"),d=n(l),u=o("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=n(u),p=o("./node_modules/babel-runtime/helpers/inherits.js"),m=n(p),f=o("./node_modules/lodash/startsWith.js"),h=n(f),g=o("./node_modules/lodash/noop.js"),_=n(g),b=o("./node_modules/prop-types/index.js"),v=n(b),E=o("./node_modules/react/react.js"),y=n(E),x=o("./node_modules/react-dom/index.js"),k=n(x),j=o("./node_modules/react-redux/es/index.js"),C=o("./node_modules/classnames/index.js"),S=n(C),w=o("./client/blocks/image-editor/image-editor-crop.jsx"),R=n(w),P=o("./client/lib/media/utils.js"),T=n(P),A=o("./client/state/ui/editor/image-editor/selectors.js"),N=o("./client/state/ui/editor/image-editor/actions.js"),L=o("./client/state/selectors/get-image-editor-is-greater-than-minimum-dimensions.js"),I=n(L),D=t.ImageEditorCanvas=function(e){function t(e){(0,r.default)(this,t);var o=(0,c.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return o.frameRateInterval=1e3/30,o.requestAnimationFrameId=null,o.lastTimestamp=null,o.onWindowResize=function(){o.requestAnimationFrameId=window.requestAnimationFrame(o.updateCanvasPosition)},o.onLoadComplete=o.onLoadComplete.bind(o),o.updateCanvasPosition=o.updateCanvasPosition.bind(o),o.isVisible=!1,o}return(0,m.default)(t,e),(0,d.default)(t,[{key:"componentDidMount",value:function(){this.isVisible=!0}},{key:"componentWillReceiveProps",value:function(e){this.props.src!==e.src&&this.getImage(e.src)}},{key:"isBlobSrc",value:function(e){return(0,h.default)(e,"blob")}},{key:"getImage",value:function(e){var t=this,o=this.props,n=o.onLoadError,s=o.mimeType,i=new XMLHttpRequest;this.isBlobSrc(e)||(e+="?"),i.open("GET",e,!0),i.responseType="arraybuffer",i.onload=function(){if(t.isVisible){var e=window.URL.createObjectURL(new Blob([i.response],{type:s}));t.initImage(e)}},i.onerror=function(e){return n(e)},i.send()}},{key:"initImage",value:function(e){this.image=new Image,this.image.src=e,this.image.onload=this.onLoadComplete,this.image.onerror=this.onLoadComplete}},{key:"onLoadComplete",value:function(e){"load"===e.type&&this.isVisible&&(this.drawImage(),this.updateCanvasPosition(),"undefined"!=typeof window&&(this.lastTimestamp=window.performance.now(),window.addEventListener("resize",this.onWindowResize)),this.props.setImageEditorImageHasLoaded(this.image.width,this.image.height))}},{key:"componentWillUnmount",value:function(){"undefined"!=typeof window&&this.onWindowResize&&(window.removeEventListener("resize",this.onWindowResize),window.cancelAnimationFrame(this.requestAnimationFrameId)),this.isVisible=!1}},{key:"componentDidUpdate",value:function(){this.drawImage(),this.updateCanvasPosition()}},{key:"toBlob",value:function(e){var t=this.props.crop,o=t.leftRatio,n=t.topRatio,s=t.widthRatio,i=t.heightRatio,a=this.props,r=a.mimeType,l=a.transform,d=k.default.findDOMNode(this.refs.canvas),u=d.getContext("2d"),c=l.degrees%180!==0,p=c?this.image.height:this.image.width,m=c?this.image.width:this.image.height,f=o*p,h=n*m,g=s*p,_=i*m,b=u.getImageData(f,h,g,_),v=document.createElement("canvas");v.width=g,v.height=_;var E=v.getContext("2d");E.putImageData(b,0,0),T.default.canvasToBlob(v,e,r,1)}},{key:"drawImage",value:function(){if(this.image){var e=k.default.findDOMNode(this.refs.canvas),t=this.image.width,o=this.image.height,n=this.props.transform,s=n.degrees%180!==0;e.width=s?o:t,e.height=s?t:o;var i=e.getContext("2d");i.clearRect(0,0,e.width,e.height),i.save(),i.setTransform(1,0,0,1,e.width/2,e.height/2),i.scale(n.scaleX,n.scaleY),i.rotate(n.degrees*Math.PI/180),i.drawImage(this.image,-t/2,-o/2),i.restore()}}},{key:"updateCanvasPosition",value:function(e){var t=e,o=t-this.lastTimestamp;if(!(o<this.frameRateInterval)){this.lastTimestamp=t-o%this.frameRateInterval;var n=this.props.crop,s=n.leftRatio,i=n.topRatio,a=n.widthRatio,r=n.heightRatio,l=k.default.findDOMNode(this.refs.canvas),d=-50*a-100*s,u=-50*r-100*i,c=l.offsetTop,p=l.offsetLeft,m=l.offsetWidth,f=l.offsetHeight;this.props.setImageEditorCropBounds(c-f*-u/100,p-m*-d/100,c+f*(1+u/100),p+m*(1+d/100))}}},{key:"preventDrag",value:function(e){return e.preventDefault(),!1}},{key:"render",value:function(){var e=this.props.crop,t=e.leftRatio,o=e.topRatio,n=e.widthRatio,s=e.heightRatio,i=this.props,a=i.isImageLoaded,r=i.showCrop,l=-50*n-100*t,d=-50*s-100*o,u={transform:"translate("+l+"%, "+d+"%)",maxWidth:85/n+"%",maxHeight:85/s+"%"},c=(0,S.default)("image-editor__canvas",{"is-placeholder":!a});return y.default.createElement("div",{className:"image-editor__canvas-container"},y.default.createElement("canvas",{ref:"canvas",style:u,onMouseDown:this.preventDrag,className:c}),r&&y.default.createElement(R.default,null))}}]),t}(E.Component);D.propTypes={src:v.default.string,mimeType:v.default.string,transform:v.default.shape({degrees:v.default.number,scaleX:v.default.number,scaleY:v.default.number}),crop:v.default.shape({topRatio:v.default.number,leftRatio:v.default.number,widthRatio:v.default.number,heightRatio:v.default.number}),setImageEditorCropBounds:v.default.func,setImageEditorImageHasLoaded:v.default.func,onLoadError:v.default.func,isImageLoaded:v.default.bool,showCrop:v.default.bool},D.defaultProps={transform:{degrees:0,scaleX:1,scaleY:1},crop:{cropTopRatio:0,cropLeftRatio:0,cropWidthRatio:1,cropHeightRatio:1},setImageEditorCropBounds:_.default,setImageEditorImageHasLoaded:_.default,onLoadError:_.default,isImageLoaded:!1,showCrop:!0},t.default=(0,j.connect)(function(e){var t=(0,A.getImageEditorTransform)(e),o=(0,A.getImageEditorFileInfo)(e),n=o.src,s=o.mimeType,i=(0,A.getImageEditorCrop)(e),a=(0,A.isImageEditorImageLoaded)(e),r=(0,I.default)(e);return{src:n,mimeType:s,transform:t,crop:i,isImageLoaded:a,showCrop:!(!a||!r)}},{setImageEditorCropBounds:N.setImageEditorCropBounds,setImageEditorImageHasLoaded:N.setImageEditorImageHasLoaded},null,{withRef:!0})(D)},"./client/blocks/image-editor/image-editor-crop.jsx":function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=o("./node_modules/babel-runtime/helpers/toConsumableArray.js"),i=n(s),a=o("./node_modules/babel-runtime/core-js/object/assign.js"),r=n(a),l=o("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),d=n(l),u=o("./node_modules/babel-runtime/helpers/classCallCheck.js"),c=n(u),p=o("./node_modules/babel-runtime/helpers/createClass.js"),m=n(p),f=o("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),h=n(f),g=o("./node_modules/babel-runtime/helpers/inherits.js"),_=n(g),b=o("./node_modules/lodash/noop.js"),v=n(b),E=o("./node_modules/lodash/isEqual.js"),y=n(E),x=o("./node_modules/prop-types/index.js"),k=n(x),j=o("./node_modules/react/react.js"),C=n(j),S=o("./node_modules/react-redux/es/index.js"),w=o("./node_modules/classnames/index.js"),R=n(w),P=o("./client/components/draggable/index.jsx"),T=n(P),A=o("./client/state/ui/editor/image-editor/selectors.js"),N=o("./client/state/ui/editor/image-editor/constants.js"),L=o("./client/state/ui/editor/image-editor/actions.js"),I=o("./client/state/ui/editor/image-editor/reducer.js"),D=o("./client/state/selectors/get-image-editor-original-aspect-ratio.js"),M=n(D),O=function(e){function t(e){(0,c.default)(this,t);var o=(0,h.default)(this,(t.__proto__||(0,d.default)(t)).call(this,e));return o.state=o.getDefaultState(e),o.onTopLeftDrag=o.onTopLeftDrag.bind(o),o.onTopRightDrag=o.onTopRightDrag.bind(o),o.onBottomLeftDrag=o.onBottomLeftDrag.bind(o),o.onBottomRightDrag=o.onBottomRightDrag.bind(o),o.applyCrop=o.applyCrop.bind(o),o.onBorderDrag=o.onBorderDrag.bind(o),o}return(0,_.default)(t,e),(0,m.default)(t,[{key:"getDefaultState",value:function(e){return{top:e.bounds.topBound,left:e.bounds.leftBound,bottom:e.bounds.bottomBound,right:e.bounds.rightBound}}},{key:"componentWillMount",value:function(){this.updateCrop(this.getDefaultState(this.props),this.props,this.applyComputedCrop)}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,o=t.bounds,n=t.aspectRatio,s=t.crop;if(!(0,y.default)(o,e.bounds)){var i=e.bounds.rightBound-e.bounds.leftBound,a=e.bounds.bottomBound-e.bounds.topBound,r=e.bounds.topBound+e.crop.topRatio*a,l=e.bounds.leftBound+e.crop.leftRatio*i,d=r+e.crop.heightRatio*a,u=l+e.crop.widthRatio*i,c={top:r,left:l,bottom:d,right:u};this.setState(c),this.updateCrop(c)}n!==e.aspectRatio&&this.updateCrop(this.getDefaultState(e),e,this.applyCrop),e.imageEditorHasChanges||!(0,y.default)(e.crop,I.defaultCrop)||(0,y.default)(s,e.crop)||this.updateCrop(this.getDefaultState(e),e,this.applyComputedCrop)}},{key:"updateCrop",value:function(e,t,o){t=t||this.props;var n=t.aspectRatio;if(n===N.AspectRatios.FREE)return void this.setState(e,o);var s=t.degrees%180!==0,i=(0,r.default)({},this.state,e),a=i.right-i.left,l=i.bottom-i.top,d=void 0,u=void 0,c=a,p=l;switch(n){case N.AspectRatios.ORIGINAL:if(!this.props.originalAspectRatio)return void this.setState(e,o);var m=this.props.originalAspectRatio,f=m.width,h=m.height;d=s?h:f,u=s?f:h;break;case N.AspectRatios.ASPECT_1X1:d=1,u=1;break;case N.AspectRatios.ASPECT_16X9:d=s?9:16,u=s?16:9;break;case N.AspectRatios.ASPECT_4X3:d=s?3:4,u=s?4:3;break;case N.AspectRatios.ASPECT_3X2:d=s?2:3,u=s?3:2}var g=Math.min(a/d,l/u);c=d*g,p=u*g,e.hasOwnProperty("top")?e.top=i.bottom-p:e.hasOwnProperty("bottom")&&(e.bottom=i.top+p),e.hasOwnProperty("left")?e.left=i.right-c:e.hasOwnProperty("right")&&(e.right=i.left+c),this.setState(e,o)}},{key:"onTopLeftDrag",value:function(e,t){var o=this.state,n=o.right,s=o.bottom,i=this.props.minCropSize,a=t,r=e;n-r<=i.width&&(r=n-i.width),s-a<=i.height&&(a=s-i.height),this.updateCrop({top:a,left:r})}},{key:"onTopRightDrag",value:function(e,t){var o=this.state,n=o.left,s=o.bottom,i=this.props.minCropSize,a=t,r=e;r-n<=i.width&&(r=n+i.width),s-a<=i.height&&(a=s-i.height),this.updateCrop({top:a,right:r})}},{key:"onBottomRightDrag",value:function(e,t){var o=this.state,n=o.left,s=o.top,i=this.props.minCropSize,a=t,r=e;r-n<=i.width&&(r=n+i.width),a-s<=i.height&&(a=s+i.height),this.updateCrop({bottom:a,right:r})}},{key:"onBottomLeftDrag",value:function(e,t){var o=this.state,n=o.right,s=o.top,i=this.props.minCropSize,a=t,r=e;n-r<=i.width&&(r=n-i.width),a-s<=i.height&&(a=s+i.height),this.updateCrop({bottom:a,left:r})}},{key:"onBorderDrag",value:function(e,t){var o=this.state,n=o.top,s=o.left,i=o.right,a=o.bottom,r=i-s,l=a-n;this.setState({top:t,left:e,bottom:t+l,right:e+r})}},{key:"getCropBounds",value:function(){var e=this.state,t=e.top,o=e.left,n=e.right,s=e.bottom,i=this.props.bounds,a=i.topBound,r=i.leftBound,l=i.rightBound,d=i.bottomBound,u=t-a,c=o-r,p=n-o,m=s-t,f=l-r,h=d-a,g=this.props.degrees%180!==0;if(this.props.originalAspectRatio){var _=this.props.originalAspectRatio,b=_.width,v=_.height,E=g?v:b,y=g?b:v,x=y/E;h=f*x}return[u/h,c/f,p/f,m/h]}},{key:"applyCrop",value:function(){var e;(e=this.props).imageEditorCrop.apply(e,(0,i.default)(this.getCropBounds()))}},{key:"applyComputedCrop",value:function(){var e;(e=this.props).imageEditorComputedCrop.apply(e,(0,i.default)(this.getCropBounds()))}},{key:"render",value:function(){var e=this.state,t=e.top,o=e.left,n=e.right,s=e.bottom,i=n-o,a=s-t,r="image-editor__crop-handle",l=this.props.bounds,d=l.topBound,u=l.leftBound,c=l.rightBound,p=l.bottomBound;return C.default.createElement("div",null,C.default.createElement("div",{className:"image-editor__crop-background",style:{top:d+"px",left:o+"px",width:i+"px",height:Math.max(0,t-d)+"px"}}),C.default.createElement("div",{className:"image-editor__crop-background",style:{top:d+"px",left:u+"px",width:Math.max(0,o-u)+"px",height:Math.max(0,p-d)+"px"}}),C.default.createElement("div",{className:"image-editor__crop-background",style:{top:s+"px",left:o+"px",width:i+"px",height:Math.max(0,p-s)+"px"}}),C.default.createElement("div",{className:"image-editor__crop-background",style:{top:d+"px",left:n+"px",width:Math.max(0,c-n)+"px",height:Math.max(0,p-d)+"px"}}),C.default.createElement(T.default,{ref:"border",onDrag:this.onBorderDrag,onStop:this.applyCrop,x:o,y:t,width:i,height:a,bounds:{top:d,left:u,bottom:p,right:c},className:"image-editor__crop"}),C.default.createElement(T.default,{onDrag:this.onTopLeftDrag,onStop:this.applyCrop,x:o,y:t,controlled:!0,bounds:{bottom:s,right:n,top:d,left:u},ref:"topLeft",className:(0,R.default)(r,r+"-nwse")}),C.default.createElement(T.default,{onDrag:this.onTopRightDrag,onStop:this.applyCrop,y:t,x:n,controlled:!0,bounds:{bottom:s,left:o,top:d,right:c},ref:"topRight",className:(0,R.default)(r,r+"-nesw")}),C.default.createElement(T.default,{onDrag:this.onBottomRightDrag,onStop:this.applyCrop,y:s,x:n,controlled:!0,bounds:{top:t,left:o,bottom:p,right:c},ref:"bottomRight",className:(0,R.default)(r,r+"-nwse")}),C.default.createElement(T.default,{onDrag:this.onBottomLeftDrag,onStop:this.applyCrop,y:s,x:o,controlled:!0,bounds:{top:t,right:n,bottom:p,left:u},ref:"bottomLeft",className:(0,R.default)(r,r+"-nesw")}))}}]),t}(j.Component);O.propTypes={degrees:k.default.number,bounds:k.default.shape({topBound:k.default.number,leftBound:k.default.number,bottomBound:k.default.number,rightBound:k.default.number}),crop:k.default.shape({topRatio:k.default.number,leftRatio:k.default.number,widthRatio:k.default.number,heightRatio:k.default.number}),aspectRatio:k.default.string,imageEditorCrop:k.default.func,imageEditorComputedCrop:k.default.func,minCropSize:k.default.shape({width:k.default.number,height:k.default.number}),imageEditorHasChanges:k.default.bool},O.defaultProps={degrees:0,bounds:{topBound:0,leftBound:0,bottomBound:100,rightBound:100},imageEditorCrop:v.default,imageEditorComputedCrop:v.default,minCropSize:{width:50,height:50},imageEditorHasChanges:!1},t.default=(0,S.connect)(function(e){var t=(0,A.getImageEditorCropBounds)(e),o=(0,A.getImageEditorCrop)(e),n=(0,A.getImageEditorAspectRatio)(e),s=(0,A.getImageEditorTransform)(e),i=s.degrees;return{bounds:t,crop:o,aspectRatio:n,degrees:i,originalAspectRatio:(0,M.default)(e),imageEditorHasChanges:(0,A.imageEditorHasChanges)(e)}},{imageEditorCrop:L.imageEditorCrop,imageEditorComputedCrop:L.imageEditorComputedCrop})(O),e.exports=t.default},"./client/blocks/image-editor/image-editor-toolbar.jsx":function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ImageEditorToolbar=void 0;var s=o("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=n(s),a=o("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=n(a),l=o("./node_modules/babel-runtime/helpers/createClass.js"),d=n(l),u=o("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=n(u),p=o("./node_modules/babel-runtime/helpers/inherits.js"),m=n(p),f=o("./node_modules/lodash/values.js"),h=n(f),g=o("./node_modules/lodash/noop.js"),_=n(g),b=o("./node_modules/prop-types/index.js"),v=n(b),E=o("./node_modules/react/react.js"),y=n(E),x=o("./node_modules/react-redux/es/index.js"),k=o("./node_modules/i18n-calypso/index.js"),j=o("./node_modules/gridicons/build/index.js"),C=n(j),S=o("./node_modules/classnames/index.js"),w=n(S),R=o("./client/components/popover/menu.jsx"),P=n(R),T=o("./client/components/popover/menu-item.jsx"),A=n(T),N=o("./client/state/ui/editor/image-editor/constants.js"),L=o("./client/state/ui/editor/image-editor/selectors.js"),I=o("./client/state/ui/editor/image-editor/actions.js"),D=o("./client/state/selectors/get-image-editor-is-greater-than-minimum-dimensions.js"),M=n(D),O=t.ImageEditorToolbar=function(e){function t(e){(0,r.default)(this,t);var o=(0,c.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return o.state={showAspectPopover:!1},o.setAspectMenuContext=o.setAspectMenuContext.bind(o),o.onAspectOpen=o.onAspectOpen.bind(o),o.onAspectClose=o.onAspectClose.bind(o),o.rotate=o.rotate.bind(o),o.flip=o.flip.bind(o),o}return(0,m.default)(t,e),(0,d.default)(t,[{key:"rotate",value:function(){this.props.imageEditorRotateCounterclockwise()}},{key:"flip",value:function(){this.props.imageEditorFlip()}},{key:"onAspectOpen",value:function(e){e.preventDefault();var t=this.props,o=t.isAspectRatioDisabled,n=t.onShowNotice,s=t.translate;if(o){var i=s("To change the aspect ratio, the height and width must be bigger than {{strong}}%(width)dpx{{/strong}}.",{args:{width:N.MinimumImageDimensions.WIDTH,height:N.MinimumImageDimensions.HEIGHT},components:{strong:y.default.createElement("strong",null)}});return void n(i)}this.setState({showAspectPopover:!0})}},{key:"onAspectClose",value:function(e){this.setState({showAspectPopover:!1}),"string"==typeof e&&this.props.setImageEditorAspectRatio(e)}},{key:"setAspectMenuContext",value:function(e){this.setState({popoverContext:e})}},{key:"renderAspectMenu",value:function(){var e=this.state,t=e.popoverContext,o=e.showAspectPopover,n=this.props,s=n.translate,i=n.aspectRatio,a=n.allowedAspectRatios;if(t&&1!==a.length){var r=[{action:N.AspectRatios.FREE,label:s("Free")},{action:N.AspectRatios.ORIGINAL,label:s("Original")},{action:N.AspectRatios.ASPECT_1X1,label:s("Square")},{action:N.AspectRatios.ASPECT_16X9,label:s("16:9")},{action:N.AspectRatios.ASPECT_4X3,label:s("4:3")},{action:N.AspectRatios.ASPECT_3X2,label:s("3:2")}];return y.default.createElement(P.default,{isVisible:o,onClose:this.onAspectClose,position:"top",context:t,className:"image-editor__toolbar-popover popover is-dialog-visible"},r.map(function(e){return a.indexOf(e.action)!==-1?y.default.createElement(A.default,{key:"image-editor-toolbar-aspect-"+e.action,action:e.action},i===e.action&&y.default.createElement(C.default,{icon:"checkmark",size:12}),e.label):null}))}}},{key:"renderButtons",value:function(){var e=this.props,t=e.translate,o=e.allowedAspectRatios,n=e.isAspectRatioDisabled,s=[{tool:"rotate",icon:"rotate",text:t("Rotate"),onClick:this.rotate},1===o.length?null:{tool:"aspect",ref:this.setAspectMenuContext,icon:"crop",text:t("Crop"),onClick:this.onAspectOpen,disabled:n},{tool:"flip-vertical",icon:"flip-vertical",text:t("Flip"),onClick:this.flip}];return s.map(function(e){var t=(0,w.default)("image-editor__toolbar-button",{"is-disabled":e&&e.disabled});return e?y.default.createElement("button",{key:"image-editor-toolbar-"+e.tool,ref:e.ref,className:t,onClick:e.onClick},y.default.createElement(C.default,{icon:e.icon}),y.default.createElement("span",null,e.text)):null})}},{key:"render",value:function(){return y.default.createElement("div",{className:"image-editor__toolbar"},this.renderButtons(),this.renderAspectMenu())}}]),t}(E.Component);O.propTypes={aspectRatio:v.default.string,imageEditorRotateCounterclockwise:v.default.func,imageEditorFlip:v.default.func,setImageEditorAspectRatio:v.default.func,allowedAspectRatios:v.default.array,onShowNotice:v.default.func,isAspectRatioDisabled:v.default.bool},O.defaultProps={imageEditorRotateCounterclockwise:_.default,imageEditorFlip:_.default,setImageEditorAspectRatio:_.default,allowedAspectRatios:(0,h.default)(N.AspectRatios),onShowNotice:_.default,isAspectRatioDisabled:!1},t.default=(0,x.connect)(function(e){var t=(0,L.getImageEditorAspectRatio)(e),o=(0,M.default)(e);return{aspectRatio:t,isAspectRatioDisabled:!o}},{imageEditorRotateCounterclockwise:I.imageEditorRotateCounterclockwise,imageEditorFlip:I.imageEditorFlip,setImageEditorAspectRatio:I.setImageEditorAspectRatio})((0,k.localize)(O))},"./client/blocks/image-editor/index.jsx":function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=o("./node_modules/babel-runtime/helpers/extends.js"),i=n(s),a=o("./node_modules/lodash/partial.js"),r=n(a),l=o("./node_modules/lodash/isEqual.js"),d=n(l),u=o("./node_modules/lodash/noop.js"),c=n(u),p=o("./node_modules/react/react.js"),m=n(p),f=o("./node_modules/react-redux/es/index.js"),h=o("./node_modules/redux/lib/index.js"),g=o("./node_modules/path-browserify/index.js"),_=n(g),b=o("./node_modules/i18n-calypso/index.js"),v=o("./node_modules/classnames/index.js"),E=n(v),y=o("./client/components/close-on-escape/index.jsx"),x=n(y),k=o("./client/components/notice/index.jsx"),j=n(k),C=o("./client/blocks/image-editor/image-editor-canvas.jsx"),S=n(C),w=o("./client/blocks/image-editor/image-editor-toolbar.jsx"),R=n(w),P=o("./client/blocks/image-editor/image-editor-buttons.jsx"),T=n(P),A=o("./client/lib/media/utils.js"),N=n(A),L=o("./client/state/ui/editor/image-editor/actions.js"),I=o("./client/state/ui/editor/image-editor/selectors.js"),D=o("./client/state/ui/selectors.js"),M=o("./client/state/sites/selectors.js"),O=o("./client/components/data/query-sites/index.jsx"),F=n(O),U=o("./client/state/ui/editor/image-editor/constants.js"),B=o("./client/blocks/image-editor/utils.js"),W=m.default.createClass({displayName:"ImageEditor",propTypes:{media:p.PropTypes.object,siteId:p.PropTypes.number,onDone:p.PropTypes.func,onCancel:p.PropTypes.func,onReset:p.PropTypes.func,className:p.PropTypes.string,defaultAspectRatio:p.PropTypes.oneOf(U.AspectRatiosValues),allowedAspectRatios:p.PropTypes.arrayOf(p.PropTypes.oneOf(U.AspectRatiosValues)),site:p.PropTypes.object,fileName:p.PropTypes.string,setImageEditorFileInfo:p.PropTypes.func,setImageEditorDefaultAspectRatio:p.PropTypes.func,translate:p.PropTypes.func,isImageLoaded:p.PropTypes.bool},getDefaultProps:function(){return{media:null,onDone:c.default,onCancel:null,onReset:c.default,isImageLoaded:!1,defaultAspectRatio:U.AspectRatios.FREE,allowedAspectRatios:U.AspectRatiosValues,setImageEditorDefaultAspectRatio:c.default}},getInitialState:function(){return{noticeText:null,noticeStatus:"is-info"}},componentWillReceiveProps:function(e){var t=this.props.media;e.media&&!(0,d.default)(e.media,t)&&(this.props.resetAllImageEditorState(),this.updateFileInfo(e.media),this.setDefaultAspectRatio())},componentDidMount:function(){this.updateFileInfo(this.props.media),this.setDefaultAspectRatio()},setDefaultAspectRatio:function(){var e=this.props,t=e.defaultAspectRatio,o=e.allowedAspectRatios;this.props.setImageEditorDefaultAspectRatio((0,B.getDefaultAspectRatio)(t,o))},updateFileInfo:function(e){var t=this.props.site,o=void 0,n="default",s="image/png",i="default";e&&(o=e.src||N.default.url(e,{photon:t&&!t.is_private}),n=e.file||_.default.basename(o),s=N.default.getMimeType(e)||s,i=e.title||i),this.props.resetImageEditorState(),this.props.setImageEditorFileInfo(o,n,s,i)},convertBlobToImage:function(e){var t=this.props.onDone,o=document.createElement("img"),n=URL.createObjectURL(e),s=this.getImageEditorProps();o.onload=function(){URL.revokeObjectURL(n),t(null,e,(0,i.default)({},s,{
width:o.width,height:o.height}))},o.onerror=function(){t(null,e,s)},o.src=n},onDone:function e(){var t=this.props,o=t.isImageLoaded,e=t.onDone;if(!o)return void e(new Error("Image not loaded yet."),null,this.getImageEditorProps());var n=this.refs.editCanvas.getWrappedInstance();n.toBlob(this.convertBlobToImage)},onCancel:function(){this.props.onCancel(this.getImageEditorProps())},onReset:function(){this.props.resetImageEditorState(),this.props.onReset(this.getImageEditorProps())},getImageEditorProps:function(){var e=this.props,t=e.src,o=e.fileName,n=e.media,s=e.mimeType,i=e.title,a=e.site,r={src:t,fileName:o,mimeType:s,title:i,site:a,resetAllImageEditorState:this.props.resetAllImageEditorState};return n&&n.ID&&(r.ID=n.ID),r},showNotice:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"is-info";this.setState({noticeText:e,noticeStatus:t})},clearNoticeState:function(){this.setState({noticeText:null,noticeStatus:"is-info"})},renderNotice:function(){if(!this.state.noticeText)return null;var e="is-info"===this.state.noticeStatus;return m.default.createElement(j.default,{status:this.state.noticeStatus,showDismiss:e,text:this.state.noticeText,isCompact:!1,onDismissClick:this.clearNoticeState,className:"image-editor__notice"})},onLoadCanvasError:function(){var e=this.props.translate;this.showNotice(e("Sorry, there was a problem loading the image. Please close this editor and try selecting the image again."),"is-error")},render:function(){var e=this.props,t=e.className,o=e.siteId,n=e.allowedAspectRatios,s=this.state.noticeText,i=(0,E.default)("image-editor",t);return m.default.createElement("div",{className:i},s&&this.renderNotice(),m.default.createElement(x.default,{onEscape:this.onCancel}),m.default.createElement(F.default,{siteId:o}),m.default.createElement("figure",null,m.default.createElement("div",{className:"image-editor__content"},m.default.createElement(S.default,{ref:"editCanvas",onLoadError:this.onLoadCanvasError}),m.default.createElement(R.default,{onShowNotice:this.showNotice,allowedAspectRatios:n}),m.default.createElement(T.default,{onCancel:this.props.onCancel&&this.onCancel,onDone:this.onDone,onReset:this.onReset,doneButtonText:this.props.doneButtonText}))))}});t.default=(0,f.connect)(function(e,t){var o=t.siteId;return o||(o=(0,D.getSelectedSiteId)(e)),(0,i.default)({},(0,I.getImageEditorFileInfo)(e),{site:(0,M.getSite)(e,o),isImageLoaded:(0,I.isImageEditorImageLoaded)(e)})},function(e,t){var o=(0,B.getDefaultAspectRatio)(t.defaultAspectRatio,t.allowedAspectRatios),n={aspectRatio:o};return(0,h.bindActionCreators)({setImageEditorFileInfo:L.setImageEditorFileInfo,setImageEditorDefaultAspectRatio:L.setImageEditorDefaultAspectRatio,resetImageEditorState:(0,r.default)(L.resetImageEditorState,n),resetAllImageEditorState:(0,r.default)(L.resetAllImageEditorState,n)},e)})((0,b.localize)(W)),e.exports=t.default},"./client/blocks/image-editor/utils.js":function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d.AspectRatiosValues;return(0,l.default)(t,e)===-1&&(e=(0,a.default)(t,"0",d.AspectRatiosValues.FREE)),(0,l.default)(d.AspectRatiosValues,e)===-1?s(e):e}Object.defineProperty(t,"__esModule",{value:!0});var i=o("./node_modules/lodash/get.js"),a=n(i),r=o("./node_modules/lodash/indexOf.js"),l=n(r);t.getDefaultAspectRatio=s;var d=o("./client/state/ui/editor/image-editor/constants.js")},"./client/components/card/compact.jsx":function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=o("./node_modules/lodash/assign.js"),i=n(s),a=o("./node_modules/react/react.js"),r=n(a),l=o("./node_modules/classnames/index.js"),d=n(l),u=o("./node_modules/create-react-class/index.js"),c=n(u),p=o("./client/components/card/index.jsx"),m=n(p);t.default=(0,c.default)({displayName:"CompactCard",render:function(){var e=(0,i.default)({},this.props,{className:(0,d.default)(this.props.className,"is-compact")});return r.default.createElement(m.default,e,this.props.children)}}),e.exports=t.default},"./client/components/draggable/index.jsx":function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=o("./node_modules/babel-runtime/helpers/extends.js"),i=n(s),a=o("./node_modules/babel-runtime/core-js/object/keys.js"),r=n(a),l=o("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),d=n(l),u=o("./node_modules/babel-runtime/helpers/classCallCheck.js"),c=n(u),p=o("./node_modules/babel-runtime/helpers/createClass.js"),m=n(p),f=o("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),h=n(f),g=o("./node_modules/babel-runtime/helpers/inherits.js"),_=n(g),b=o("./node_modules/lodash/omit.js"),v=n(b),E=o("./node_modules/lodash/noop.js"),y=n(E),x=o("./node_modules/react/react.js"),k=n(x),j=function(e){function t(e){(0,c.default)(this,t);var o=(0,h.default)(this,(t.__proto__||(0,d.default)(t)).call(this,e));return o.state={x:o.props.x,y:o.props.y},o.onTouchStartHandler=o.onTouchStartHandler.bind(o),o.onMouseDownHandler=o.onMouseDownHandler.bind(o),o.draggingHandler=o.draggingHandler.bind(o),o.draggingEndedHandler=o.draggingEndedHandler.bind(o),o.update=o.update.bind(o),o}return(0,_.default)(t,e),(0,m.default)(t,[{key:"componentWillReceiveProps",value:function(e){this.state.x===e.x&&this.state.y===e.y||this.setState({x:e.x,y:e.y})}},{key:"componentWillUnmount",value:function(){this.removeListeners()}},{key:"draggingStartedHandler",value:function(e){this.dragging=!0;var t=e;this.isTouchEvent(e)&&(t=e.touches[0]),this.relativePos={x:t.pageX-this.state.x,y:t.pageY-this.state.y},cancelAnimationFrame(this.frameRequestId),this.frameRequestId=requestAnimationFrame(this.update)}},{key:"isTouchEvent",value:function(e){return(!e.pageX||!e.pageY)&&e.targetTouches&&e.targetTouches.length}},{key:"draggingHandler",value:function(e){var t=e;this.isTouchEvent(e)&&(t=e.touches[0]);var o=t.pageX-this.relativePos.x,n=t.pageY-this.relativePos.y;this.mousePos={x:o,y:n}}},{key:"draggingEndedHandler",value:function(){this.dragging=!1,this.mousePos=null,cancelAnimationFrame(this.frameRequestId),this.removeListeners(),this.props.onStop()}},{key:"onTouchStartHandler",value:function(e){e.preventDefault(),document.addEventListener("touchmove",this.draggingHandler),document.addEventListener("touchend",this.draggingEndedHandler),this.draggingStartedHandler(e)}},{key:"onMouseDownHandler",value:function(e){e.preventDefault(),document.addEventListener("mousemove",this.draggingHandler),document.addEventListener("mouseup",this.draggingEndedHandler),this.draggingStartedHandler(e)}},{key:"update",value:function(){if(!this.mousePos)return void(this.frameRequestId=requestAnimationFrame(this.update));var e=this.props.bounds,t=this.mousePos,o=t.x,n=t.y;e&&(o=Math.max(e.left,Math.min(e.right-this.props.width,o)),n=Math.max(e.top,Math.min(e.bottom-this.props.height,n))),this.dragging&&(this.frameRequestId=requestAnimationFrame(this.update)),this.props.onDrag(o,n),this.props.controlled||this.setState({x:o,y:n})}},{key:"removeListeners",value:function(){document.removeEventListener("mousemove",this.draggingHandler),document.removeEventListener("mouseup",this.draggingEndedHandler),document.removeEventListener("touchmove",this.draggingHandler),document.removeEventListener("touchend",this.draggingEndedHandler)}},{key:"render",value:function(){var e=(0,v.default)(this.props,(0,r.default)(this.constructor.propTypes)),t={transform:"translate("+this.state.x+"px, "+this.state.y+"px)"};return(this.props.width||this.props.height)&&(t.width=this.props.width+"px",t.height=this.props.height+"px"),k.default.createElement("div",(0,i.default)({},e,{style:t,onMouseDown:this.onMouseDownHandler,onTouchStart:this.onTouchStartHandler}))}}]),t}(x.Component);j.propTypes={onDrag:x.PropTypes.func,onStop:x.PropTypes.func,width:x.PropTypes.number,height:x.PropTypes.number,x:x.PropTypes.number,y:x.PropTypes.number,controlled:x.PropTypes.bool,bounds:x.PropTypes.shape({top:x.PropTypes.number,left:x.PropTypes.number,bottom:x.PropTypes.number,right:x.PropTypes.number})},j.defaultProps={onDrag:y.default,onStop:y.default,width:0,height:0,x:0,y:0,controlled:!1,bounds:null},t.default=j,e.exports=t.default},"./client/components/drop-zone/index.jsx":function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.DropZone=void 0;var s=o("./node_modules/babel-runtime/core-js/array/from.js"),i=n(s),a=o("./node_modules/lodash/without.js"),r=n(a),l=o("./node_modules/lodash/noop.js"),d=n(l),u=o("./node_modules/lodash/includes.js"),c=n(u),p=o("./node_modules/lodash/identity.js"),m=n(p),f=o("./node_modules/react-dom/index.js"),h=n(f),g=o("./node_modules/react/react.js"),_=n(g),b=o("./node_modules/prop-types/index.js"),v=n(b),E=o("./node_modules/react-redux/es/index.js"),y=o("./node_modules/classnames/index.js"),x=n(y),k=o("./node_modules/gridicons/build/index.js"),j=n(k),C=o("./node_modules/i18n-calypso/index.js"),S=o("./client/components/root-child/index.jsx"),w=n(S),R=o("./client/state/ui/drop-zone/actions.js"),P=t.DropZone=_.default.createClass({displayName:"DropZone",propTypes:{className:v.default.string,fullScreen:v.default.bool,icon:v.default.node,onDrop:v.default.func,onVerifyValidTransfer:v.default.func,onFilesDrop:v.default.func,textLabel:v.default.string,translate:v.default.func,showDropZone:v.default.func.isRequired,hideDropZone:v.default.func.isRequired,dropZoneName:v.default.string},getInitialState:function(){return{isDraggingOverDocument:!1,isDraggingOverElement:!1,lastVisibleState:!1}},getDefaultProps:function(){return{className:null,onDrop:d.default,onVerifyValidTransfer:function(){return!0},onFilesDrop:d.default,fullScreen:!1,icon:_.default.createElement(j.default,{icon:"cloud-upload",size:48}),translate:m.default,dropZoneName:null}},componentDidMount:function(){this.dragEnterNodes=[],window.addEventListener("dragover",this.preventDefault),window.addEventListener("drop",this.onDrop),window.addEventListener("dragenter",this.toggleDraggingOverDocument),window.addEventListener("dragleave",this.toggleDraggingOverDocument),window.addEventListener("mouseup",this.resetDragState)},componentDidUpdate:function(e,t){t.isDraggingOverDocument!==this.state.isDraggingOverDocument&&this.toggleMutationObserver()},componentWillUnmount:function(){window.removeEventListener("dragover",this.preventDefault),window.removeEventListener("drop",this.onDrop),window.removeEventListener("dragenter",this.toggleDraggingOverDocument),window.removeEventListener("dragleave",this.toggleDraggingOverDocument),window.removeEventListener("mouseup",this.resetDragState),this.disconnectMutationObserver()},resetDragState:function(){(this.state.isDraggingOverDocument||this.state.isDraggingOverElement)&&(this.setState({isDraggingOverDocument:!1,isDraggingOverElement:!1}),this.toggleDropZoneReduxState(!1))},toggleMutationObserver:function(){this.disconnectMutationObserver(),this.state.isDraggingOverDocument&&(this.observer=new window.MutationObserver(this.detectNodeRemoval),this.observer.observe(document.body,{childList:!0,subtree:!0}))},disconnectMutationObserver:function(){this.observer&&(this.observer.disconnect(),delete this.observer)},detectNodeRemoval:function(e){var t=this;e.forEach(function(e){e.removedNodes.length&&(t.dragEnterNodes=(0,r.default)(t.dragEnterNodes,(0,i.default)(e.removedNodes)))})},toggleDraggingOverDocument:function(e){"dragenter"!==e.type||(0,c.default)(this.dragEnterNodes,e.target)?"dragleave"===e.type&&(this.dragEnterNodes=(0,r.default)(this.dragEnterNodes,e.target)):this.dragEnterNodes.push(e.target);var t=window.CustomEvent&&e instanceof window.CustomEvent?e.detail:e,o=this.props.onVerifyValidTransfer(t.dataTransfer),n=o&&this.dragEnterNodes.length;this.setState({isDraggingOverDocument:n,isDraggingOverElement:n&&(this.props.fullScreen||this.isWithinZoneBounds(t.clientX,t.clientY))}),window.CustomEvent&&e instanceof window.CustomEvent&&(this.dragEnterNodes=(0,r.default)(this.dragEnterNodes,window)),this.toggleDropZoneReduxState(!(!this.state.isDraggingOverDocument&&!this.state.isDraggingOverElement))},toggleDropZoneReduxState:function(e){this.state.lastVisibleState!==e&&(e?this.props.showDropZone(this.props.dropZoneName):this.props.hideDropZone(this.props.dropZoneName),this.setState({lastVisibleState:e}))},preventDefault:function(e){e.preventDefault()},isWithinZoneBounds:function(e,t){if(!this.refs.zone)return!1;var o=this.refs.zone.getBoundingClientRect();return o.bottom!==o.top&&o.left!==o.right&&(e>=o.left&&e<=o.right&&t>=o.top&&t<=o.bottom)},onDrop:function(e){e.dataTransfer&&e.dataTransfer.files.length,this.resetDragState(),(this.props.fullScreen||h.default.findDOMNode(this.refs.zone).contains(e.target))&&(this.props.onDrop(e),this.props.onVerifyValidTransfer(e.dataTransfer)&&(e.dataTransfer&&this.props.onFilesDrop(Array.prototype.slice.call(e.dataTransfer.files)),e.stopPropagation(),e.preventDefault()))},renderContent:function(){var e=this.props.textLabel?this.props.textLabel:this.props.translate("Drop files to upload");return _.default.createElement("div",{className:"drop-zone__content"},this.props.children?this.props.children:_.default.createElement("div",null,_.default.createElement("span",{className:"drop-zone__content-icon"},this.props.icon),_.default.createElement("span",{className:"drop-zone__content-text"},e)))},render:function(){var e=(0,x.default)("drop-zone",this.props.className,{"is-active":this.state.isDraggingOverDocument||this.state.isDraggingOverElement,"is-dragging-over-document":this.state.isDraggingOverDocument,"is-dragging-over-element":this.state.isDraggingOverElement,"is-full-screen":this.props.fullScreen}),t=_.default.createElement("div",{ref:"zone",className:e},this.renderContent());return this.props.fullScreen?_.default.createElement(w.default,null,t):t}}),T={showDropZone:R.showDropZone,hideDropZone:R.hideDropZone};t.default=(0,E.connect)(null,T)((0,C.localize)(P))},"./client/components/email-verification/email-verification-dialog/index.jsx":function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=o("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=n(s),a=o("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=n(a),l=o("./node_modules/babel-runtime/helpers/createClass.js"),d=n(l),u=o("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=n(u),p=o("./node_modules/babel-runtime/helpers/inherits.js"),m=n(p),f=o("./node_modules/lodash/noop.js"),h=n(f),g=o("./node_modules/lodash/includes.js"),_=n(g),b=o("./node_modules/lodash/get.js"),v=n(b),E=o("./node_modules/prop-types/index.js"),y=n(E),x=o("./node_modules/react/react.js"),k=n(x),j=o("./node_modules/i18n-calypso/index.js"),C=o("./node_modules/react-redux/es/index.js"),S=o("./client/components/dialog/index.jsx"),w=n(S),R=o("./client/components/button/index.jsx"),P=n(R),T=o("./client/components/spinner/index.jsx"),A=n(T),N=o("./client/state/current-user/selectors.js"),L=o("./client/state/current-user/email-verification/actions.js"),I=function(e){function t(){var e,o,n,s;(0,r.default)(this,t);for(var a=arguments.length,l=Array(a),d=0;d<a;d++)l[d]=arguments[d];return o=n=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),n.handleClose=function(){n.props.resetVerifyEmailState(),n.props.onClose()},s=o,(0,c.default)(n,s)}return(0,m.default)(t,e),(0,d.default)(t,[{key:"getResendButtonLabel",value:function(){return"sent"===this.props.emailVerificationStatus||"error"===this.props.emailVerificationStatus?this.props.translate("Email Sent"):"requesting"===this.props.emailVerificationStatus?k.default.createElement(A.default,{className:"email-verification-dialog__confirmation-dialog-spinner"}):this.props.translate("Resend Email")}},{key:"getDialogButtons",value:function(){return[k.default.createElement(P.default,{key:"resend",primary:!1,disabled:(0,_.default)(["requesting","sent","error"],this.props.emailVerificationStatus),onClick:this.props.verifyEmail},this.getResendButtonLabel()),k.default.createElement(P.default,{key:"close",primary:!0,onClick:this.handleClose},this.props.translate("OK"))]}},{key:"render",value:function(){var e={confirmHeading:this.props.translate("Please verify your email address:"),confirmExplanation:this.props.translate("When you first signed up for a WordPress.com account we sent you an email. Please open it and click on the blue button to verify your email address."),confirmReasoning:this.props.translate("Verifying your email allows us to assist you if you ever lose access to your account in the future."),confirmEmail:this.props.translate("{{wrapper}}%(email)s{{/wrapper}} {{emailPreferences}}change{{/emailPreferences}}",{components:{wrapper:k.default.createElement("span",{className:"email-verification-dialog__confirmation-dialog-email-wrapper"}),emailPreferences:k.default.createElement("a",{href:"/me/account"})},args:{email:this.props.email}})};return k.default.createElement(w.default,{isVisible:!0,buttons:this.getDialogButtons(),additionalClassNames:"email-verification-dialog__confirmation-dialog is-narrow"},k.default.createElement("h1",{className:"email-verification-dialog__confirmation-dialog-heading is-variable-height"},e.confirmHeading),k.default.createElement("p",{className:"email-verification-dialog__confirmation-dialog-email"},e.confirmEmail),k.default.createElement("p",{className:"email-verification-dialog__confirmation-dialog-explanation"},e.confirmExplanation),k.default.createElement("p",{className:"email-verification-dialog__confirmation-dialog-reasoning"},e.confirmReasoning))}}]),t}(x.Component);I.propTypes={onClose:y.default.func,translate:y.default.func,email:y.default.string,emailVerificationStatus:y.default.string},I.defaultProps={onClose:h.default},t.default=(0,C.connect)(function(e){return{email:(0,N.getCurrentUserEmail)(e),emailVerificationStatus:(0,v.default)(e,"currentUser.emailVerification.status")}},{verifyEmail:L.verifyEmail,resetVerifyEmailState:L.resetVerifyEmailState})((0,j.localize)(I)),e.exports=t.default},"./client/components/file-picker/index.jsx":function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=o("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=n(s),a=o("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=n(a),l=o("./node_modules/babel-runtime/helpers/createClass.js"),d=n(l),u=o("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=n(u),p=o("./node_modules/babel-runtime/helpers/inherits.js"),m=n(p),f=o("./node_modules/lodash/noop.js"),h=n(f),g=o("./node_modules/lodash/assign.js"),_=n(g),b=o("./node_modules/react/react.js"),v=n(b),E=o("./node_modules/component-file-picker/index.js"),y=n(E),x=function(e){function t(e){(0,r.default)(this,t);var o=(0,c.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return o.showPicker=o.showPicker.bind(o),o}return(0,m.default)(t,e),(0,d.default)(t,[{key:"showPicker",value:function(){this.props.onClick(),(0,y.default)((0,_.default)({},this.props),this.props.onPick)}},{key:"render",value:function(){return v.default.createElement("span",{className:"file-picker",onClick:this.showPicker},this.props.children)}}]),t}(v.default.Component);t.default=x,x.displayName="FilePicker",x.propTypes={multiple:v.default.PropTypes.bool,directory:v.default.PropTypes.bool,accept:v.default.PropTypes.string,onClick:v.default.PropTypes.func,onPick:v.default.PropTypes.func},x.defaultProps={multiple:!1,directory:!1,accept:null,onClick:h.default,onPick:h.default},e.exports=t.default},"./client/components/forms/form-checkbox/index.jsx":function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=o("./node_modules/babel-runtime/helpers/extends.js"),i=n(s),a=o("./node_modules/babel-runtime/helpers/objectWithoutProperties.js"),r=n(a),l=o("./node_modules/react/react.js"),d=n(l),u=o("./node_modules/classnames/index.js"),c=n(u),p=function(e){var t=e.className,o=(0,r.default)(e,["className"]);return d.default.createElement("input",(0,i.default)({},o,{type:"checkbox",className:(0,c.default)(t,"form-checkbox")}))};t.default=p,e.exports=t.default},"./client/components/forms/form-input-validation/index.jsx":function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=o("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=n(s),a=o("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=n(a),l=o("./node_modules/babel-runtime/helpers/createClass.js"),d=n(l),u=o("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=n(u),p=o("./node_modules/babel-runtime/helpers/inherits.js"),m=n(p),f=o("./node_modules/react/react.js"),h=n(f),g=o("./node_modules/prop-types/index.js"),_=n(g),b=o("./node_modules/classnames/index.js"),v=n(b),E=o("./node_modules/gridicons/build/index.js"),y=n(E),x=function(e){function t(){return(0,r.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,m.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){var e=(0,v.default)({"form-input-validation":!0,"is-warning":this.props.isWarning,"is-error":this.props.isError}),t=this.props.isError||this.props.isWarning?"notice-outline":"checkmark";return h.default.createElement("div",{className:e},h.default.createElement("span",null,h.default.createElement(y.default,{size:24,icon:this.props.icon?this.props.icon:t})," ",this.props.text))}}]),t}(h.default.Component);x.displayName="FormInputValidation",x.propTypes={isError:_.default.bool,isWarning:_.default.bool,text:_.default.node,icon:_.default.string},x.defaultProps={isError:!1},t.default=x,e.exports=t.default},"./client/components/forms/form-tel-input/index.jsx":function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function s(e){var t=e.className,o=e.isError,n=e.isValid,s=(0,l.default)(e,["className","isError","isValid"]),i=(0,f.default)("form-tel-input",t,{"is-error":o,"is-valid":n});return u.default.createElement("input",(0,a.default)({},s,{type:"tel",pattern:"[0-9]*",className:i}))}Object.defineProperty(t,"__esModule",{value:!0});var i=o("./node_modules/babel-runtime/helpers/extends.js"),a=n(i),r=o("./node_modules/babel-runtime/helpers/objectWithoutProperties.js"),l=n(r);t.default=s;var d=o("./node_modules/react/react.js"),u=n(d),c=o("./node_modules/prop-types/index.js"),p=n(c),m=o("./node_modules/classnames/index.js"),f=n(m);s.propTypes={className:p.default.string,isError:p.default.bool,isValid:p.default.bool},s.defaultProps={isError:!1,isValid:!1},e.exports=t.default},"./client/components/forms/form-textarea/index.jsx":function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=o("./node_modules/babel-runtime/helpers/extends.js"),i=n(s),a=o("./node_modules/babel-runtime/helpers/objectWithoutProperties.js"),r=n(a),l=o("./node_modules/react/react.js"),d=n(l),u=o("./node_modules/classnames/index.js"),c=n(u),p=function(e){var t=e.className,o=e.isError,n=e.isValid,s=e.children,a=(0,r.default)(e,["className","isError","isValid","children"]);return d.default.createElement("textarea",(0,i.default)({},a,{className:(0,c.default)(t,"form-textarea",{"is-error":o,"is-valid":n})}),s)};t.default=p,e.exports=t.default},"./client/components/info-popover/index.jsx":function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=o("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=n(s),a=o("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=n(a),l=o("./node_modules/babel-runtime/helpers/createClass.js"),d=n(l),u=o("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=n(u),p=o("./node_modules/babel-runtime/helpers/inherits.js"),m=n(p),f=o("./node_modules/react/react.js"),h=n(f),g=o("./node_modules/gridicons/build/index.js"),_=n(g),b=o("./client/components/popover/index.jsx"),v=n(b),E=o("./node_modules/classnames/index.js"),y=n(E),x=o("./client/lib/analytics/index.js"),k=n(x),j=function(e){function t(){var e,o,n,s;(0,r.default)(this,t);for(var a=arguments.length,l=Array(a),d=0;d<a;d++)l[d]=arguments[d];return o=n=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),n.state={showPopover:!1},n.handleClick=function(e){e.preventDefault(),n.setState({showPopover:!n.state.showPopover},n.recordStats)},n.handleClose=function(){return n.setState({showPopover:!1},n.recordStats)},n.recordStats=function(){var e=n.props,t=e.gaEventCategory,o=e.popoverName;if(t&&o){var s=n.state.showPopover?" Opened":" Closed";k.default.ga.recordEvent(t,"InfoPopover: "+o+s)}},s=o,(0,c.default)(n,s)}return(0,m.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){return h.default.createElement("span",{onClick:this.handleClick,ref:"infoPopover",className:(0,y.default)("info-popover",{is_active:this.state.showPopover},this.props.className)},h.default.createElement(_.default,{icon:"info-outline",size:18}),h.default.createElement(v.default,{autoRtl:this.props.autoRtl,id:this.props.id,isVisible:this.state.showPopover,context:this.refs&&this.refs.infoPopover,ignoreContext:this.props.ignoreContext,position:this.props.position,onClose:this.handleClose,className:(0,y.default)("popover","info-popover__tooltip",this.props.className),rootClassName:this.props.rootClassName},this.props.children))}}]),t}(f.Component);j.propTypes={autoRtl:f.PropTypes.bool,className:f.PropTypes.string,gaEventCategory:f.PropTypes.string,id:f.PropTypes.string,ignoreContext:f.PropTypes.shape({getDOMNode:f.PropTypes.func}),popoverName:f.PropTypes.string,position:f.PropTypes.oneOf(["top","top right","right","bottom right","bottom","bottom left","left","top left"]),rootClassName:f.PropTypes.string},j.defaultProps={autoRtl:!0,position:"bottom"},t.default=j,e.exports=t.default},"./client/components/section-header/index.jsx":function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=o("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=n(s),a=o("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=n(a),l=o("./node_modules/babel-runtime/helpers/createClass.js"),d=n(l),u=o("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=n(u),p=o("./node_modules/babel-runtime/helpers/inherits.js"),m=n(p),f=o("./node_modules/react/react.js"),h=n(f),g=o("./node_modules/classnames/index.js"),_=n(g),b=o("./client/components/card/compact.jsx"),v=n(b),E=o("./client/components/count/index.jsx"),y=n(E),x=function(e){function t(){return(0,r.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,m.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){var e="number"==typeof this.props.count,t=!(this.props.label||e||this.props.children),o=(0,_.default)(this.props.className,"section-header",{"is-empty":t});return h.default.createElement(v.default,{className:o,href:this.props.href},h.default.createElement("div",{className:"section-header__label"},h.default.createElement("span",{className:"section-header__label-text"},this.props.label),e&&h.default.createElement(y.default,{count:this.props.count})),h.default.createElement("div",{className:"section-header__actions"},this.props.children))}}]),t}(f.PureComponent);x.defaultProps={label:"",href:null},t.default=x,e.exports=t.default},"./client/components/sidebar-navigation/index.jsx":function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=o("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=n(s),a=o("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=n(a),l=o("./node_modules/babel-runtime/helpers/createClass.js"),d=n(l),u=o("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=n(u),p=o("./node_modules/babel-runtime/helpers/inherits.js"),m=n(p),f=o("./node_modules/react/react.js"),h=n(f),g=o("./node_modules/react-redux/es/index.js"),_=o("./node_modules/gridicons/build/index.js"),b=n(_),v=o("./client/state/document-head/selectors.js"),E=o("./client/state/ui/layout-focus/actions.js"),y=function(e){function t(e){(0,r.default)(this,t);var o=(0,c.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return o.toggleSidebar=o.toggleSidebar.bind(o),o}return(0,m.default)(t,e),(0,d.default)(t,[{key:"toggleSidebar",value:function(e){e.preventDefault(),this.props.setLayoutFocus("sidebar")}},{key:"render",value:function(){return h.default.createElement("header",{className:"current-section"},h.default.createElement("a",{onClick:this.toggleSidebar,className:this.props.linkClassName},h.default.createElement(b.default,{icon:"chevron-left"}),this.props.children,h.default.createElement("div",null,h.default.createElement("p",{className:"current-section__"+this.props.sectionName+"-title"},this.props.sectionTitle),h.default.createElement("h1",{className:"current-section__section-title"},this.props.title))))}}]),t}(h.default.Component);y.propTypes={title:f.PropTypes.string,linkClassName:f.PropTypes.string,sectionTitle:f.PropTypes.string,sectionName:f.PropTypes.string.isRequired,setLayoutFocus:f.PropTypes.func.isRequired},t.default=(0,g.connect)(function(e){return{title:(0,v.getDocumentHeadTitle)(e)}},{setLayoutFocus:E.setLayoutFocus})(y),e.exports=t.default},"./client/lib/application-passwords-data/index.js":function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function s(){return this instanceof s?(this.data=null,this.newApplicationPassword=null,void(this.fetching=!1)):new s}var i=o("./node_modules/lodash/filter.js"),a=n(i),r=o("./node_modules/debug/browser.js")("calypso:application-passwords-data"),l=o("./client/lib/mixins/emitter/index.js"),d=o("./node_modules/store/store.js"),u=o("./client/lib/wp/browser.js").undocumented();l(s.prototype),s.prototype.get=function(){return this.data||(r("First time loading ApplicationPasswords, check store"),this.data=d.get("wpcom_me_application_passwords")||[],this.fetch()),this.data},s.prototype.fetch=function(){this.fetching=!0,u.me().getApplicationPasswords(function(e,t){return e?void r("Something went wrong fetching application passwords."):(this.data=t.application_passwords,this.fetching=!1,d.set("wpcom_me_application_passwords",this.data),r("Application passwords successfully retrieved"),void this.emit("change"))}.bind(this))},s.prototype.revoke=function(e,t){u.me().revokeApplicationPassword(e,function(o,n){o&&"unknown_application_password"!==o.error||(this.data=(0,a.default)(this.data,function(t){return parseInt(t.ID,10)!==e}),d.set("wpcom_me_application_passwords",this.data),this.emit("change")),t(o,n)}.bind(this))},s.prototype.create=function(e,t){u.me().createApplicationPassword(e,function(e,o){e?r("Creating application password failed."):(r("Application password successfully created"),this.newApplicationPassword=o,this.fetch()),t(e,o)}.bind(this))},s.prototype.hasNewPassword=function(){return!!this.newApplicationPassword},s.prototype.clearNewPassword=function(){this.newApplicationPassword=null,this.emit("change")},e.exports=new s},"./client/lib/connected-applications-data/index.js":function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function s(){return this instanceof s?(this.data=[],this.initialized=!1,void(this.fetching=!1)):new s}var i=o("./node_modules/lodash/find.js"),a=n(i),r=o("./node_modules/lodash/filter.js"),l=n(r),d=o("./node_modules/debug/browser.js")("calypso:connected-applications-data"),u=o("./client/lib/mixins/emitter/index.js"),c=o("./client/lib/wp/browser.js").undocumented();
u(s.prototype),s.prototype.get=function(){return this.initialized||this.fetch(),this.data},s.prototype.fetch=function(){this.fetching=!0,c.me().getConnectedApplications(function(e,t){return this.fetching=!1,e?void d("Something went wrong fetching connected applications."):(this.data=t.connected_applications,this.initialized=!0,d("Connected applications successfully retrieved"),void this.emit("change"))}.bind(this))},s.prototype.revoke=function(e,t){c.me().revokeApplicationConnection(e,function(o,n){return o?(d("Revoking application connection failed."),void t(o)):(this.data=(0,l.default)(this.data,function(t){return parseInt(t.ID,10)!==e}),t(null,n),void this.emit("change"))}.bind(this))},s.prototype.getApplication=function(e){var t;return this.initialized?(t=(0,a.default)(this.data,function(t){return parseInt(e,10)===parseInt(t.ID,10)}),"undefined"==typeof t&&this.fetch(),t):void this.fetch()},e.exports=new s},"./client/lib/safe-protocol-url/index.js":function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var s=o("./node_modules/lodash/pick.js"),i=n(s),a=o("./node_modules/lodash/assign.js"),r=n(a),l=o("./node_modules/url/url.js");e.exports=function(e){var t,o=["host","hash","search","path"];return null===e||""===e||"undefined"==typeof e?null:(t=l.parse(e),/^\/[^\/]/.test(e)?e:"http:"===t.protocol||"https:"===t.protocol?e:l.format((0,r.default)((0,i.default)(t,o),{protocol:"http"})))}},"./client/lib/trophies-data/index.js":function(e,t,o){"use strict";function n(){return this instanceof n?void(this.initialized=!1):new n}var s=o("./node_modules/debug/browser.js")("calypso:trophies-data"),i=o("./client/lib/mixins/emitter/index.js"),a=o("./node_modules/store/store.js"),r=o("./client/lib/wp/browser.js").undocumented();i(n.prototype),n.prototype.get=function(){var e;return this.data||(e=a.get("TrophiesData"),e?this.initialize(e):this.data=[],this.emit("change"),this.fetch()),this.data},n.prototype.fetch=function(){r.me().getTrophies(function(e,t){e&&s(e.error,e.message),this.data=t,this.initialized||(this.initialized=!0,this.emit("change")),a.set("TrophiesData",t)}.bind(this))},n.prototype.initialize=function(e){this.data=e,this.initialized=!0},n.prototype.hasLoadedFromServer=function(){return this.initialized},e.exports=new n},"./client/lib/two-step-authorization/index.js":function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function s(){return this instanceof s?(this.data=null,this.initialized=!1,this.indvalidCode=!1,this.smsResendThrottled=!1,this.bumpMCStat=function(e){f.mc.bumpStat("2fa",e)},void this.fetch()):new s}var i=o("./node_modules/babel-runtime/core-js/json/stringify.js"),a=n(i),r=o("./node_modules/debug/browser.js")("calypso:two-step-authorization"),l=o("./client/lib/mixins/emitter/index.js"),d=o("./client/lib/wp/browser.js").undocumented(),u=o("./client/lib/user-settings/index.js"),c=o("./client/lib/application-passwords-data/index.js"),p=o("./client/lib/connected-applications-data/index.js"),m=o("./client/lib/user-profile-links/index.js"),f=o("./client/lib/analytics/index.js");s.prototype.fetch=function(e){d.me().getTwoStep(function(t,o){t||(this.data=o,this.isReauthRequired()&&this.isTwoStepSMSEnabled()&&!this.initialized&&this.sendSMSCode(),this.isReauthRequired()&&!this.initialized&&this.bumpMCStat("reauth-required"),this.initialized=!0,this.emit("change")),e&&e(t,o)}.bind(this))},s.prototype.validateCode=function(e,t){d.me().validateTwoStepCode(e,function(o,n){!o&&n.success?(this.isReauthRequired()&&(u.fetchSettings(),c.fetch(),p.fetch(),m.reAuthRequired=!1,m.fetchProfileLinks()),this.data.two_step_reauthorization_required=!1,this.data.two_step_authorization_expires_soon=!1,this.invalidCode=!1,e.action?this.bumpMCStat("enable-two-step"===e.action?"enable-2fa-successful":"disable-2fa-successful"):this.bumpMCStat("reauth-successful"),this.emit("change")):o||(this.invalidCode=!0,e.action?this.bumpMCStat("enable-two-step"===e.action?"enable-2fa-failed-invalid-code":"disable-2fa-failed-invalid-code"):this.bumpMCStat("reauth-failed-invalid-code")),t&&t(o,n)}.bind(this))},s.prototype.sendSMSCode=function(e){d.me().sendSMSValidationCode(function(t,o){t?(r("Sending SMS code failed: "+(0,a.default)(t)),t.error&&"rate_limited"===t.error&&(r("SMS resend throttled."),this.bumpMCStat("sms-code-send-throttled"),this.smsResendThrottled=!0)):(this.smsResendThrottled=!1,this.bumpMCStat("sms-code-send-success")),this.emit("change"),e&&e(t,o)}.bind(this))},s.prototype.backupCodes=function(e){d.me().backupCodes(function(t,o){t?r("Fetching Backup Codes failed: "+(0,a.default)(t)):this.bumpMCStat("new-backup-codes-success"),e&&e(t,o)}.bind(this))},s.prototype.validateBackupCode=function(e,t){var o={code:e,action:"create-backup-receipt"};d.me().validateTwoStepCode(o,function(e,o){e&&r("Validating Two Step Code failed: "+(0,a.default)(e)),o&&this.bumpMCStat(o.success?"backup-code-validate-success":"backup-code-validate-failure"),t&&t(e,o)}.bind(this))},s.prototype.getAppAuthCodes=function(e){d.me().getAppAuthCodes(function(t,o){t&&r("Getting App Auth Codes failed: "+(0,a.default)(t)),e&&e(t,o)})},s.prototype.codeValidationFailed=function(){return this.invalidCode},s.prototype.isSMSResendThrottled=function(){return this.smsResendThrottled},s.prototype.isReauthRequired=function(){return!!this.data&&this.data.two_step_reauthorization_required},s.prototype.authExpiresSoon=function(){return!!this.data&&this.data.two_step_authorization_expires_soon},s.prototype.isTwoStepSMSEnabled=function(){return!!this.data&&this.data.two_step_sms_enabled},s.prototype.getSMSLastFour=function(){return this.data?this.data.two_step_sms_last_four:null},l(s.prototype),e.exports=new s},"./client/lib/user-profile-links/index.js":function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function s(){return this instanceof s?(this.profileLinks=!1,this.initialized=!1,this.reAuthRequired=!1,void(this.fetchingProfileLinks=!1)):new s}var i=o("./node_modules/lodash/some.js"),a=n(i),r=o("./node_modules/lodash/reject.js"),l=n(r),d=o("./node_modules/debug/browser.js")("calypso:user:profile-links"),u=o("./client/lib/wp/browser.js"),c=o("./client/lib/mixins/emitter/index.js");c(s.prototype),s.prototype.hasProfileLinks=function(){return!!this.profileLinks},s.prototype.isSiteInProfileLinks=function(e){return!!this.initialized&&(0,a.default)(this.profileLinks,function(t){return e.domain===t.value.replace(/^.*:\/\//,"")})},s.prototype.getProfileLinks=function(){return this.profileLinks||this.fetchProfileLinks(),this.profileLinks},s.prototype.fetchProfileLinks=function(){this.fetchingProfileLinks||this.reAuthRequired||(this.fetchingProfileLinks=!0,d("Fetching profile links for user"),u.me().settings().profileLinks().get(function(e,t){return this.fetchingProfileLinks=!1,e?(d("Something went wrong fetching the profile links for the user."),"error"in e&&"reauthorization_required"===e.error&&(this.reAuthRequired=!0),void this.emit("change")):(this.profileLinks=t.profile_links,this.initialized=!0,this.emit("change"),void d("Profile links successfully retrieved"))}.bind(this)))},s.prototype.addProfileLinks=function(e,t){u.me().settings().profileLinks().add(e,function(e,o){o&&o.profile_links&&(this.profileLinks=o.profile_links,this.emit("change")),t(e,o)}.bind(this))},s.prototype.deleteProfileLinkBySlug=function(e,t){u.me().settings().profileLinks().del(e,function(o,n){o||(this.profileLinks=(0,l.default)(this.profileLinks,{link_slug:e}),this.emit("change")),t(o,n)}.bind(this))},e.exports=new s},"./client/me/constants.js":function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=o("./node_modules/i18n-calypso/index.js"),i=n(s);t.default={sixDigit2faPlaceholder:i.default.translate("e.g. %(example)s",{args:{example:"123456"}}),sevenDigit2faPlaceholder:i.default.translate("e.g. %(example)s",{args:{example:"1234567"}}),eightDigitBackupCodePlaceholder:i.default.translate("e.g. %(example)s",{args:{example:"12345678"}})},e.exports=t.default},"./client/me/controller.js":function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=o("./node_modules/lodash/includes.js"),i=n(s),a=o("./node_modules/react-dom/index.js"),r=n(a),l=o("./node_modules/react/react.js"),d=n(l),u=o("./node_modules/page/index.js"),c=n(u),p=o("./node_modules/i18n-calypso/index.js"),m=n(p),f=o("./client/lib/analytics/index.js"),h=n(f),g=o("./client/lib/route/index.js"),_=n(g),b=o("./client/lib/user-settings/index.js"),v=n(b),E=o("./client/state/document-head/actions.js"),y=o("./client/lib/react-helpers/index.js"),x="Me";t.default={sidebar:function(e,t){var n=o("./client/me/sidebar/index.jsx");(0,y.renderWithReduxStore)(d.default.createElement(n,{context:e}),document.getElementById("secondary"),e.store),t()},profile:function(e){var t=o("./client/me/profile/index.jsx"),n=e.path;e.store.dispatch((0,E.setDocumentHeadTitle)(m.default.translate("My Profile",{textOnly:!0}))),h.default.pageView.record(n,x+" > My Profile"),(0,y.renderWithReduxStore)(d.default.createElement(t,{userSettings:v.default,path:e.path}),document.getElementById("primary"),e.store)},apps:function(e){var t=o("./client/me/get-apps/index.jsx").default,n=e.path;e.store.dispatch((0,E.setDocumentHeadTitle)(m.default.translate("Get Apps",{textOnly:!0}))),h.default.pageView.record(n,x+" > Get Apps"),(0,y.renderWithReduxStore)(d.default.createElement(t,{userSettings:v.default,path:e.path}),document.getElementById("primary"),e.store)},nextSteps:function(e){var t=_.default.sectionify(e.path),n=o("./client/me/next-steps/index.jsx"),s=o("./client/lib/trophies-data/index.js"),i="welcome"===e.params.welcome;e.store.dispatch((0,E.setDocumentHeadTitle)(m.default.translate("Next Steps",{textOnly:!0}))),i&&r.default.unmountComponentAtNode(document.getElementById("secondary")),h.default.tracks.recordEvent("calypso_me_next_view",{is_welcome:i}),h.default.pageView.record(t,x+" > Next"),(0,y.renderWithReduxStore)(d.default.createElement(n,{path:e.path,isWelcome:i,trophiesData:s}),document.getElementById("primary"),e.store)},nextStepsWelcomeRedirect:function(e,t){return(0,i.default)(e.path,"?welcome")?c.default.redirect("/me/next/welcome"):void t()},profileRedirect:function(){c.default.redirect("/me")},trophiesRedirect:function(){c.default.redirect("/me")},findFriendsRedirect:function(){c.default.redirect("/me")}},e.exports=t.default},"./client/me/form-base/index.js":function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var s=o("./node_modules/babel-runtime/core-js/json/stringify.js"),i=n(s),a=o("./node_modules/debug/browser.js")("calypso:me:form-base"),r=o("./client/notices/index.js");e.exports={componentDidMount:function(){this.props.userSettings.getSettings()},componentWillUnmount:function(){this.props.userSettings.unsavedSettings={}},getDisabledState:function(){return this.state.submittingForm},componentWillReceiveProps:function(e){e.showNoticeInitially&&this.setState({showNotice:e.showNoticeInitially})},componentWillUpdate:function(){this.showNotice()},getInitialState:function(){return{redirect:!1,submittingForm:!1,changingUsername:!1,usernameAction:"new",showNotice:!1}},showNotice:function(){this.props.userSettings.initialized&&this.state.showNotice&&(r.clearNotices("notices"),r.success(this.translate("Settings saved successfully!")),this.state.showNotice=!1)},valueLink:function(e){return{value:this.props.userSettings.getSetting(e),requestChange:function(t){this.props.userSettings.updateSetting(e,t)}.bind(this)}},submitForm:function(e){e.preventDefault(),a("Submitting form"),this.setState({submittingForm:!0}),this.props.userSettings.saveSettings(function(e,t){if(this.setState({submittingForm:!1}),e)a("Error saving settings: "+(0,i.default)(e)),e.message?r.error(e.message):r.error(this.translate("There was a problem saving your changes."));else{if(this.props.markSaved&&this.props.markSaved(),this.state&&this.state.redirect)return void(window.location=this.state.redirect+"?updated=success");this.setState({showNotice:!0}),this.showNotice(),a("Settings saved successfully "+(0,i.default)(t))}}.bind(this))}}},"./client/me/get-apps/desktop-download-card.jsx":function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=o("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=n(s),a=o("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=n(a),l=o("./node_modules/babel-runtime/helpers/createClass.js"),d=n(l),u=o("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=n(u),p=o("./node_modules/babel-runtime/helpers/inherits.js"),m=n(p),f=o("./node_modules/lodash/noop.js"),h=n(f),g=o("./node_modules/lodash/identity.js"),_=n(g),b=o("./node_modules/react/react.js"),v=n(b),E=o("./node_modules/react-redux/es/index.js"),y=o("./node_modules/i18n-calypso/index.js"),x=o("./client/components/card/index.jsx"),k=n(x),j=o("./client/components/button/index.jsx"),C=n(j),S=o("./client/state/analytics/actions.js"),w="https://apps.wordpress.com/d/windows?ref=getapps",R="https://apps.wordpress.com/d/osx?ref=getapps",P="https://apps.wordpress.com/d/linux?ref=getapps",T="https://apps.wordpress.com/d/linux-deb?ref=getapps",A=function(e){function t(){return(0,r.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,m.default)(t,e),(0,d.default)(t,[{key:"getDescription",value:function(e){var t=this.props.translate;switch(e){case"MacIntel":case"Linux i686":case"Linux i686 on x86_64":return t("A desktop app that gives WordPress a permanent home in your dock.");default:return t("A desktop app that gives WordPress a permanent home in your taskbar.")}}},{key:"getRequirementsText",value:function(e){var t=this.props.translate;switch(e){case"MacIntel":return t("Requires Mac OS X 10.11+. ");case"Linux i686":case"Linux i686 on x86_64":return t("Requires a 64-bit kernel. ");default:return t("Requires Windows 7+. ")}}},{key:"getTranslateComponents",value:function(e){switch(e){case"MacIntel":return{firstAvailableLink:this.getLinkAnchorTag(w),secondAvailableLink:this.getLinkAnchorTag(P),thirdAvailableLink:this.getLinkAnchorTag(T)};case"Linux i686":case"Linux i686 on x86_64":return{firstAvailableLink:this.getLinkAnchorTag(T),secondAvailableLink:this.getLinkAnchorTag(w),thirdAvailableLink:this.getLinkAnchorTag(R)};default:return{firstAvailableLink:this.getLinkAnchorTag(R),secondAvailableLink:this.getLinkAnchorTag(P),thirdAvailableLink:this.getLinkAnchorTag(T)}}}},{key:"getAlsoAvailableText",value:function(e){var t=this.props.translate;switch(e){case"MacIntel":return t("Also available for: {{firstAvailableLink}}Windows{{/firstAvailableLink}}, {{secondAvailableLink}}Linux (.tar.gz){{/secondAvailableLink}}, {{thirdAvailableLink}}Linux (.deb){{/thirdAvailableLink}}.",{components:this.getTranslateComponents(e)});case"Linux i686":case"Linux i686 on x86_64":return t("Also available for: {{firstAvailableLink}}Linux (.deb){{/firstAvailableLink}}, {{secondAvailableLink}}Windows{{/secondAvailableLink}}, {{thirdAvailableLink}}Mac{{/thirdAvailableLink}}.",{components:this.getTranslateComponents(e)});default:return t("Also available for: {{firstAvailableLink}}MacOS{{/firstAvailableLink}}, {{secondAvailableLink}}Linux (.tar.gz){{/secondAvailableLink}}, {{thirdAvailableLink}}Linux (.deb){{/thirdAvailableLink}}.",{components:this.getTranslateComponents(e)})}}},{key:"getButtonClickHandler",value:function(e){var t=this.props,o=t.trackWindowsClick,n=t.trackMacClick,s=t.trackLinuxTarClick,i=t.trackLinuxDebClick;switch(e){case"MacIntel":return n;case"Linux i686":return s;case"Linux i686 on x86_64":return i;default:return o}}},{key:"getButtonLink",value:function(e){switch(e){case"MacIntel":return R;case"Linux i686":case"Linux i686 on x86_64":return P;default:return w}}},{key:"getCardTitle",value:function(e){var t=this.props.translate;switch(e){case"MacIntel":return t("Desktop App for Mac");case"Linux i686":case"Linux i686 on x86_64":return t("Desktop App for Linux");default:return t("Desktop App for Windows")}}},{key:"getLinkAnchorTag",value:function(e){var t=this.props,o=t.trackWindowsClick,n=t.trackMacClick,s=t.trackLinuxTarClick,i=t.trackLinuxDebClick;switch(e){case R:return v.default.createElement("a",{href:e,onClick:n});case P:return v.default.createElement("a",{href:e,onClick:s});case T:return v.default.createElement("a",{href:e,onClick:i});default:return v.default.createElement("a",{href:e,onClick:o})}}},{key:"render",value:function(){var e=this.props.translate,t=!!(navigator.platform&&navigator.platform.length>0)&&navigator.platform;return v.default.createElement(k.default,{className:"get-apps__desktop"},v.default.createElement("div",{className:"get-apps__card-text"},v.default.createElement("h3",{className:"get-apps__card-title"},this.getCardTitle(t)),v.default.createElement("p",{className:"get-apps__description"},this.getDescription(t)),v.default.createElement("p",{className:"get-apps__also-available"},this.getRequirementsText(t),this.getAlsoAvailableText(t))),v.default.createElement(C.default,{className:"get-apps__desktop-button",href:this.getButtonLink(t),onClick:this.getButtonClickHandler(t)},e("Download")))}}]),t}(b.Component);A.propTypes={translate:b.PropTypes.func,trackWindowsClick:b.PropTypes.func,trackMacClick:b.PropTypes.func,trackLinuxTarClick:b.PropTypes.func,trackLinuxDebClick:b.PropTypes.func},A.defaultProps={translate:_.default,trackWindowsClick:h.default,trackMacClick:h.default,trackLinuxTarClick:h.default,trackLinuxDebClick:h.default};var N={trackWindowsClick:function(){return(0,S.recordTracksEvent)("calypso_app_download_windows_click")},trackMacClick:function(){return(0,S.recordTracksEvent)("calypso_app_download_mac_click")},trackLinuxTarClick:function(){return(0,S.recordTracksEvent)("calypso_app_download_linux_tar_click")},trackLinuxDebClick:function(){return(0,S.recordTracksEvent)("calypso_app_download_linux_deb_click")}};t.default=(0,E.connect)(null,N)((0,y.localize)(A)),e.exports=t.default},"./client/me/get-apps/illustration.jsx":function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=o("./node_modules/react/react.js"),i=n(s),a=o("./node_modules/i18n-calypso/index.js"),r=function(e){var t=e.translate;return i.default.createElement("div",{className:"get-apps__illustration"},i.default.createElement("img",{src:"/calypso/images/illustrations/get-apps-banner.svg",alt:t("Groups of people looking at WordPress mobile apps.")}),i.default.createElement("h2",{className:"get-apps__illustration-heading"},t("Inspiration strikes any time, anywhere.")),i.default.createElement("p",{className:"get-apps__illustration-tagline"},t("Get WordPress apps for all your screens.")))};t.default=(0,a.localize)(r),e.exports=t.default},"./client/me/get-apps/index.jsx":function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.GetApps=void 0;var s=o("./node_modules/react/react.js"),i=n(s),a=o("./client/me/sidebar-navigation/sidebar-navigation.jsx"),r=n(a),l=o("./client/components/main/index.jsx"),d=n(l),u=o("./client/me/get-apps/illustration.jsx"),c=n(u),p=o("./client/me/get-apps/desktop-download-card.jsx"),m=n(p),f=o("./client/me/get-apps/mobile-download-card.jsx"),h=n(f),g=t.GetApps=function(){return i.default.createElement(d.default,{className:"get-apps"},i.default.createElement(r.default,null),i.default.createElement(c.default,null),i.default.createElement(h.default,null),i.default.createElement(m.default,null))};t.default=g},"./client/me/get-apps/mobile-download-card.jsx":function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=o("./node_modules/lodash/noop.js"),i=n(s),a=o("./node_modules/lodash/identity.js"),r=n(a),l=o("./node_modules/react/react.js"),d=n(l),u=o("./node_modules/react-redux/es/index.js"),c=o("./node_modules/i18n-calypso/index.js"),p=o("./client/components/card/index.jsx"),m=n(p),f=o("./client/state/analytics/actions.js"),h=function(e){var t=e.translate,o=e.trackIosClick,n=e.trackAndroidClick;return d.default.createElement(m.default,{className:"get-apps__mobile"},d.default.createElement("div",{className:"get-apps__card-text"},d.default.createElement("h3",{className:"get-apps__card-title"},t("Mobile Apps")),d.default.createElement("p",{className:"get-apps__description"},t("WordPress at your fingertips."))),d.default.createElement("div",{className:"get-apps__badges"},d.default.createElement("a",{href:"https://itunes.apple.com/us/app/wordpress/id335703880?mt=8",onClick:o},d.default.createElement("img",{src:"/calypso/images/me/get-apps-app-store.png",title:t("Download the WordPress iOS mobile app."),alt:t("Apple App Store download badge")})),d.default.createElement("a",{href:"https://play.google.com/store/apps/details?id=org.wordpress.android",onClick:n},d.default.createElement("img",{src:"/calypso/images/me/get-apps-google-play.png",title:t("Download the WordPress Android mobile app."),alt:t("Google Play Store download badge")}))))};h.propTypes={translate:l.PropTypes.func,trackIosClick:l.PropTypes.func,trackAndroidClick:l.PropTypes.func},h.defaultProps={translate:r.default,trackIosClick:i.default,trackAndroidClick:i.default};var g={trackIosClick:function(){return(0,f.recordTracksEvent)("calypso_app_download_ios_click")},trackAndroidClick:function(){return(0,f.recordTracksEvent)("calypso_app_download_android_click")}};t.default=(0,u.connect)(null,g)((0,c.localize)(h)),e.exports=t.default},"./client/me/index.js":function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){i.default.isEnabled("me/my-profile")&&((0,r.default)("/me",d.default.sidebar,d.default.profile),(0,r.default)("/me/profile",d.default.profileRedirect),(0,r.default)("/me/public-profile",d.default.profileRedirect)),i.default.isEnabled("me/next-steps")&&(0,r.default)("/me/next/:welcome?",d.default.sidebar,d.default.nextStepsWelcomeRedirect,d.default.nextSteps),i.default.isEnabled("me/trophies")||(0,r.default)("/me/trophies",d.default.trophiesRedirect),i.default.isEnabled("me/find-friends")||(0,r.default)("/me/find-friends",d.default.findFriendsRedirect),(0,r.default)("/me/get-apps",d.default.sidebar,d.default.apps)};var s=o("./client/config/index.js"),i=n(s),a=o("./node_modules/page/index.js"),r=n(a),l=o("./client/me/controller.js"),d=n(l);e.exports=t.default},"./client/me/next-steps/index.jsx":function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var s=o("./node_modules/lodash/sortBy.js"),i=n(s),a=o("./node_modules/lodash/property.js"),r=n(a),l=o("./node_modules/react/react.js"),d=o("./client/me/next-steps/next-steps-box.jsx"),u=o("./client/me/sidebar-navigation/sidebar-navigation.jsx"),c=o("./client/lib/mixins/data-observe/index.js"),p=o("./client/me/next-steps/steps.js"),m=o("./client/lib/analytics/index.js"),f=o("./client/lib/products-values/index.js"),h=o("./client/lib/sites-list/index.js")();e.exports=l.createClass({displayName:"exports",mixins:[c("trophiesData","sites")],getDefaultProps:function(){return{sites:h}},userState:{},componentWillUnmount:function(){window.scrollTo(0,0)},recordEvent:function(e){m.ga.recordEvent("Me > Next > Welcome Message",e.action),m.tracks.recordEvent("calypso_me_next_welcome_click",{link:e.tracks,is_welcome:this.props.isWelcome})},setUserStateFromTrophiesData:function(){this.userState={userHasPosted:this.hasUserPosted()}},hasUserPosted:function(){if(this.props.trophiesData.hasLoadedFromServer())return this.props.trophiesData.get().trophies.some(function(e){return"post-milestone"===e.type})},renderPostComponent:function(){if(this.props.trophiesData.hasLoadedFromServer())return l.createElement("div",null,this.userState.userHasPosted?"You have posted":"Create a post")},renderMeSidebar:function(){if(!this.props.isWelcome)return l.createElement(u,null)},bloggingUniversityLinkRecordEvent:function(){this.recordEvent({tracks:"blogging_course",action:"Clicked Blogging University Link"})},docsLinkRecordEvent:function(){this.recordEvent({tracks:"documentation",action:"Clicked Documentation Link"})},dismissLinkRecordEvent:function(){this.recordEvent({tracks:"dismiss",action:"Clicked Dismiss Link"})},introMessage:function(){if(this.props.isWelcome)return l.createElement("div",{className:"next-steps__intro"},l.createElement("h3",{className:"next-steps__title"},this.translate("Thanks for signing up for WordPress.com.")),l.createElement("p",{className:"next-steps__intro"},this.translate("Next you can take any of the following steps, join a {{bloggingUniversityLink}}guided blogging course{{/bloggingUniversityLink}}, or check out our {{docsLink}}support documentation{{/docsLink}}.",{components:{bloggingUniversityLink:l.createElement("a",{href:"https://bloggingu.wordpress.com/",target:"_blank",rel:"noopener noreferrer",onClick:this.bloggingUniversityLinkRecordEvent}),docsLink:l.createElement("a",{href:"http://en.support.wordpress.com/",target:"_blank",rel:"noopener noreferrer",onClick:this.docsLinkRecordEvent})}})))},newestSite:function(){return(0,i.default)(this.props.sites.get(),(0,r.default)("ID")).pop()},outroMessage:function(){var e,t;if(this.props.isWelcome)return e=this.newestSite(),t="/stats/insights/"+(e?e.slug:""),l.createElement("div",{className:"next-steps__outro"},l.createElement("p",null,this.translate("If you want you can {{a}}skip these steps{{/a}}. You can come back to this page any time.",{components:{a:l.createElement("a",{href:t,onClick:this.dismissLinkRecordEvent})}})))},userHasPurchasedAPlan:function(){return this.props.sites.get().some(function(e){return f.isPlan(e.plan)})},renderSteps:function(){var e=this.newestSite(),t=p.defaultSequence;return this.userHasPurchasedAPlan()&&(t=p.hasPlanSequence),l.createElement("div",{className:"next-steps__steps"},t.map(function(t,o){var n=p.definitions(e)[t];return l.createElement(d,{key:t,stepName:t,step:n,primary:0===o,isWelcome:this.props.isWelcome})}.bind(this)))},render:function(){var e="main main-column next-steps";return this.setUserStateFromTrophiesData(),this.props.isWelcome&&(e+=" is-single-page"),l.createElement("div",{className:e},this.renderMeSidebar(),this.introMessage(),this.renderSteps(),this.outroMessage())}})},"./client/me/next-steps/next-steps-box.jsx":function(e,t,o){"use strict";var n=o("./node_modules/react/react.js"),s=o("./client/lib/analytics/index.js");e.exports=n.createClass({displayName:"exports",recordEvent:function(){s.ga.recordEvent("Me > Next > Box",this.props.stepName),s.tracks.recordEvent("calypso_me_next_click",{module:this.props.stepName,is_welcome:this.props.isWelcome})},render:function(){var e="next-steps-box",t="next-steps-box__step-body",o="button";return this.props.primary&&(e+=" is-primary",t+=" is-primary",o+=" is-primary"),n.createElement("div",{className:e},n.createElement("div",{className:"next-steps-box__step-header"},n.createElement("h2",null,this.props.step.title)),n.createElement("div",{className:t},this.props.step.body,n.createElement("div",{className:"next-steps-box__step-action"},n.createElement("a",{className:o,href:this.props.step.buttonURL,onClick:this.recordEvent},this.props.step.buttonText))))}})},"./client/me/next-steps/steps.js":function(e,t,o){"use strict";function n(e){return e?e.jetpack?e.options.admin_url+"customize.php":"/customize/"+e.slug:"/customize/"}var s=o("./node_modules/react/react.js"),i=o("./node_modules/gridicons/build/index.js"),a=o("./node_modules/i18n-calypso/index.js"),r=o("./client/lib/paths/index.js"),l=o("./client/config/index.js");e.exports={defaultSequence:["customize","theme","plans","post","page"],hasPlanSequence:["customize","theme","post","page","follow"],userOnly:["site","profile","follow"],definitions:function(e){return{post:{title:a.translate("Start Your First Post"),body:a.translate("{{p1}}Start blogging right away by writing your first post.{{/p1}}{{p2}}You can create new posts by clicking the {{pencil}}{{/pencil}} at the top of the screen.{{/p2}}",{comment:"p1 and p2 are paragraph tags.",components:{p1:s.createElement("p",null),p2:s.createElement("p",null),pencil:s.createElement(i,{icon:"create",size:18})}}),buttonText:a.translate("Start a Post"),buttonURL:r.newPost(e)},theme:{title:a.translate("Select a Theme"),body:a.translate("{{p1}}The theme is the look and feel of your WordPress. A theme doesn't change your content, just the way it is presented.{{/p1}}{{p2}}Choose a theme based on your taste. You can always change it later.{{/p2}}",{comment:"p1 and p2 are paragraph tags.",components:{p1:s.createElement("p",null),p2:s.createElement("p",null)}}),buttonText:a.translate("Select a Theme"),buttonURL:"/themes/"+(e?e.slug:"")},customize:{title:a.translate("Customize Your Site"),body:a.translate("{{p1}}You can use the Customizer to add header and background images, or tweak your theme.  {{/p1}}{{p2}}You can find the Customizer in My Sites.{{/p2}}",{comment:"p1 and p2 are paragraph tags.",components:{p1:s.createElement("p",null),p2:s.createElement("p",null)}}),buttonText:a.translate("Customize Your Site"),buttonURL:n(e)},plans:{title:a.translate("Add Features with a Plan"),body:a.translate("{{p1}}Plans upgrade your WordPress with storage, design options, and a custom domain.{{/p1}}{{p2}}A plan will also remove ads and enable audio and video uploads.{{/p2}}",{comment:"p1 and p2 are paragraph tags",components:{p1:s.createElement("p",null),p2:s.createElement("p",null)}}),buttonText:a.translate("Add a Plan"),buttonURL:"/plans/"+(e?e.slug:"")},page:{title:a.translate("Create a Page"),body:a.translate("{{p1}}Pages are sections of your site that contain information for your visitors.{{/p1}}{{p2}}Think about creating an About or Contact Us page to get started.{{/p2}}",{comment:"p1 and p2 are paragraph tags.",components:{p1:s.createElement("p",null),p2:s.createElement("p",null)}}),buttonText:a.translate("Create a Page"),buttonURL:r.newPage(e)},site:{title:a.translate("Create a Site"),body:a.translate("{{p1}}Start a new WordPress site or blog.{{/p1}}{{p2}}Your own WordPress is free and a great way to create a home on the web.{{/p2}}",{comment:"p1 and p2 are paragraph tags.",components:{p1:s.createElement("p",null),p2:s.createElement("p",null)}}),buttonText:a.translate("Create a Site"),buttonURL:l("signup_url")},profile:{title:a.translate("Complete Your Profile"),body:a.translate("{{p1}}Your profile is how other users see you.{{/p1}}{{p2}}Share a blurb about yourself to let others know what you're all about.{{/p2}}",{comment:"p1 and p2 are paragraph tags.",components:{p1:s.createElement("p",null),p2:s.createElement("p",null)}}),buttonText:a.translate("Complete Your Profile"),buttonURL:"/me"},follow:{title:a.translate("Follow Some Blogs"),body:a.translate("{{p1}}Follow some other sites to stay informed and find inspiration.{{/p1}}{{p2}}All of the content you follow shows up in your Reader.{{/p2}}",{comment:"p1 and p2 are paragraph tags.",components:{p1:s.createElement("p",null),p2:s.createElement("p",null)}}),buttonText:a.translate("Follow Some Blogs"),buttonURL:"/recommendations/"}}}}},"./client/me/profile-gravatar/index.jsx":function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=o("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=n(s),a=o("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=n(a),l=o("./node_modules/babel-runtime/helpers/createClass.js"),d=n(l),u=o("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=n(u),p=o("./node_modules/babel-runtime/helpers/inherits.js"),m=n(p),f=o("./node_modules/react/react.js"),h=n(f),g=o("./node_modules/i18n-calypso/index.js"),_=o("./node_modules/react-redux/es/index.js"),b=o("./client/components/animate/index.jsx"),v=n(b),E=o("./client/components/gravatar/index.jsx"),y=n(E),x=o("./client/state/analytics/actions.js"),k=function(e){
function t(){var e,o,n,s;(0,r.default)(this,t);for(var a=arguments.length,l=Array(a),d=0;d<a;d++)l[d]=arguments[d];return o=n=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),n.recordGravatarMisclick=function(){n.props.recordGoogleEvent("Me","Clicked on Unclickable Gravatar Image in Sidebar")},s=o,(0,c.default)(n,s)}return(0,m.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){var e=400;return h.default.createElement("div",{className:"profile-gravatar"},h.default.createElement("div",{onClick:this.recordGravatarMisclick},h.default.createElement(v.default,{type:"appear"},h.default.createElement(y.default,{user:this.props.user,size:150,imgSize:e}))),h.default.createElement("h2",{className:"profile-gravatar__user-display-name"},this.props.user.display_name),h.default.createElement("div",{className:"profile-gravatar__user-secondary-info"},"@",this.props.user.username))}}]),t}(f.Component);t.default=(0,_.connect)(null,{recordGoogleEvent:x.recordGoogleEvent})((0,g.localize)(k)),e.exports=t.default},"./client/me/profile-link/index.jsx":function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=o("./node_modules/react/react.js"),i=n(s),a=o("./node_modules/classnames/index.js"),r=n(a),l=o("./node_modules/gridicons/build/index.js"),d=n(l),u=o("./client/lib/safe-protocol-url/index.js"),c=n(u),p=o("./client/me/event-recorder/index.js"),m=n(p),f=o("./client/lib/url/index.js"),h=o("./client/components/button/index.jsx"),g=n(h);t.default=i.default.createClass({displayName:"ProfileLink",mixins:[m.default],getDefaultProps:function(){return{imageSize:100,title:"",url:"",slug:"",isPlaceholder:!1}},propTypes:{imageSize:i.default.PropTypes.number,title:i.default.PropTypes.string.isRequired,url:i.default.PropTypes.string.isRequired,slug:i.default.PropTypes.string.isRequired},renderRemove:function(){return i.default.createElement(g.default,{borderless:!0,icon:!0,className:"profile-link__remove",onClick:this.recordClickEvent("Remove Link Next to Site",this.props.onRemoveLink)},i.default.createElement(d.default,{icon:"cross"}))},render:function(){var e=(0,r.default)({"profile-link":!0,"is-placeholder":this.props.isPlaceholder}),t="//s1.wp.com/mshots/v1/"+encodeURIComponent(this.props.url)+"?w="+this.props.imageSize+"&h=64",o=this.props.isPlaceholder?null:(0,c.default)(this.props.url);return i.default.createElement("li",{className:e},this.props.isPlaceholder?i.default.createElement("div",{className:"profile-link__image-link"}):i.default.createElement("a",{href:o,className:"profile-link__image-link",target:"_blank",rel:"noopener noreferrer",onClick:this.recordClickEvent("Profile Links Site Images Link")},i.default.createElement("img",{className:"profile-link__image",src:t})),i.default.createElement("a",{href:o,target:"_blank",rel:"noopener noreferrer",onClick:this.recordClickEvent("Profile Links Site Link")},i.default.createElement("span",{className:"profile-link__title"},this.props.title),i.default.createElement("span",{className:"profile-link__url"},(0,f.withoutHttp)(this.props.url))),this.props.isPlaceholder?null:this.renderRemove())}}),e.exports=t.default},"./client/me/profile-links-add-other/index.jsx":function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=o("./node_modules/react/react.js"),i=n(s),a=o("./node_modules/react-addons-linked-state-mixin/index.js"),r=n(a),l=o("./client/components/forms/form-fieldset/index.jsx"),d=n(l),u=o("./client/components/forms/form-text-input/index.jsx"),c=n(u),p=o("./client/components/forms/form-button/index.jsx"),m=n(p),f=o("./client/me/event-recorder/index.js"),h=n(f),g=o("./client/components/notice/index.jsx"),_=n(g);t.default=i.default.createClass({displayName:"ProfileLinksAddOther",mixins:[r.default,h.default],getInitialState:function(){return{title:"",value:"",lastError:!1}},getFormDisabled:function(){var e=this.state.value.trim();return!this.state.title.trim()||!e||(-1!==e.indexOf(" ")||(!e.match(/[a-zA-z0-9]+\.[a-zA-z]{2,}/)||!(!e.match(/^.*:\/\//)||e.match(/^https?:\/\//))))},onSubmit:function(e){e.preventDefault(),this.getFormDisabled()||this.props.userProfileLinks.addProfileLinks([{title:this.state.title.trim(),value:this.state.value.trim()}],this.onSubmitResponse)},onCancel:function(e){e.preventDefault(),this.props.onCancel()},onSubmitResponse:function(e,t){e?this.setState({lastError:this.translate("Unable to add link right now. Please try again later.")}):t.duplicate?this.setState({lastError:this.translate("That link is already in your profile links. No changes were made.")}):t.malformed?this.setState({lastError:this.translate("An unexpected error occurred. Please try again later.")}):this.props.onSuccess()},clearLastError:function(){this.setState({lastError:!1})},possiblyRenderError:function(){return this.state.lastError?i.default.createElement(_.default,{className:"profile-links-add-other__error",status:"is-error",onDismissClick:this.clearLastError,text:this.state.lastError}):null},render:function(){return i.default.createElement("form",{className:"profile-links-add-other",onSubmit:this.onSubmit},i.default.createElement("p",null,this.translate("Please enter the URL and description of the site you want to add to your profile.")),this.possiblyRenderError(),i.default.createElement(d.default,null,i.default.createElement(c.default,{className:"profile-links-add-other__value",valueLink:this.linkState("value"),placeholder:this.translate("Enter a URL"),onFocus:this.recordFocusEvent("Add Other Site URL Field")}),i.default.createElement(c.default,{className:"profile-links-add-other__title",valueLink:this.linkState("title"),placeholder:this.translate("Enter a description"),onFocus:this.recordFocusEvent("Add Other Site Description Field")}),i.default.createElement(m.default,{className:"profile-links-add-other__add",disabled:this.getFormDisabled(),onClick:this.recordClickEvent("Save Other Site Button")},this.translate("Add Site")),i.default.createElement(m.default,{className:"profile-links-add-other__cancel",isPrimary:!1,onClick:this.recordClickEvent("Cancel Other Site Button",this.onCancel)},this.translate("Cancel"))))}}),e.exports=t.default},"./client/me/profile-links-add-wordpress/index.jsx":function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=o("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=n(s),a=o("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=n(a),l=o("./node_modules/babel-runtime/helpers/createClass.js"),d=n(l),u=o("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=n(u),p=o("./node_modules/babel-runtime/helpers/inherits.js"),m=n(p),f=o("./node_modules/lodash/map.js"),h=n(f),g=o("./node_modules/lodash/pickBy.js"),_=n(g),b=o("./node_modules/react/react.js"),v=n(b),E=o("./node_modules/react-redux/es/index.js"),y=o("./node_modules/i18n-calypso/index.js"),x=o("./client/config/index.js"),k=n(x),j=o("./client/components/forms/form-button/index.jsx"),C=n(j),S=o("./client/components/notice/index.jsx"),w=n(S),R=o("./client/me/event-recorder/index.js"),P=o("./client/state/selectors/get-public-sites.js"),T=n(P),A=o("./client/state/sites/selectors.js"),N=o("./client/me/profile-links-add-wordpress/site.jsx"),L=n(N),I=function(e,t,o){return function(n,s){var i=(0,_.default)(e,function(e,t){return"site-"===t.substr(0,5)&&e}),a=(0,h.default)(i,function(e,t){return parseInt(t.substr(5),10)}).map(function(e){return(0,A.getSite)(s(),e)}).map(function(e){return{title:e.name,value:e.URL}});a.length&&t.addProfileLinks(a,o)}},D=function(e){function t(){var e,o,n,s;(0,r.default)(this,t);for(var a=arguments.length,l=Array(a),d=0;d<a;d++)l[d]=arguments[d];return o=n=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),n.state={},n.handleCheckedChanged=function(e){var t={};t[e.target.name]=e.target.checked,n.setState(t)},n.onSelect=function(e,t){var o={};o[t]=!n.state[t],n.setState(o)},n.onAddableSubmit=function(e){e.preventDefault(),n.props.addProfileLinks(n.state,n.props.userProfileLinks,n.onSubmitResponse)},n.onCancel=function(e){e.preventDefault(),n.props.onCancel()},n.onCreateSite=function(e){e.preventDefault(),window.open((0,k.default)("signup_url")+"?ref=me-profile-links"),n.props.onCancel()},n.onJetpackMe=function(e){e.preventDefault(),window.open("http://jetpack.me/"),n.props.onCancel()},n.onSubmitResponse=function(e,t){var o=n.props.translate;return e?void n.setState({lastError:o("Unable to add any links right now. Please try again later.")}):t.malformed?void n.setState({lastError:o("An unexpected error occurred. Please try again later.")}):(t.duplicate&&n.props.userProfileLinks.fetchProfileLinks(),void n.props.onSuccess())},n.clearLastError=function(){n.setState({lastError:!1})},s=o,(0,c.default)(n,s)}return(0,m.default)(t,e),(0,d.default)(t,[{key:"getCheckedCount",value:function(){var e=0,t=void 0;for(t in this.state)this.state[t]&&e++;return e}},{key:"possiblyRenderError",value:function(){return this.state.lastError?v.default.createElement(w.default,{className:"profile-links-add-wordpress__error",status:"is-error",onDismissClick:this.clearLastError},this.state.lastError):null}},{key:"renderAddableSites",value:function(){var e=this;return this.props.publicSites.map(function(t){var o="site-"+t.ID,n=e.state[o];return e.props.userProfileLinks.isSiteInProfileLinks(t)?null:v.default.createElement(L.default,{key:o,site:t,checked:n,onChange:e.handleCheckedChanged,onSelect:e.onSelect})})}},{key:"renderAddableSitesForm",value:function(){var e=this.props.translate,t=this.getCheckedCount();return v.default.createElement("form",{className:"profile-links-add-wordpress",onSubmit:this.onAddableSubmit},v.default.createElement("p",null,e("Please select one or more sites to add to your profile.")),v.default.createElement("ul",{className:"profile-links-add-wordpress__list"},this.renderAddableSites()),this.possiblyRenderError(),v.default.createElement(C.default,{disabled:0===t,onClick:(0,R.recordClickEvent)("Add WordPress Sites Button")},e("Add Site","Add Sites",{count:t})),v.default.createElement(C.default,{className:"profile-links-add-wordpress__cancel",isPrimary:!1,onClick:(0,R.recordClickEvent)("Cancel Add WordPress Sites Button",this.onCancel)},e("Cancel")))}},{key:"renderInvitationForm",value:function(){var e=this.props.translate;return v.default.createElement("form",null,v.default.createElement("p",null,e("You have no public sites on WordPress.com yet, but if you like you can create one now. You may also add self-hosted WordPress sites here after installing {{jetpackLink}}Jetpack{{/jetpackLink}} on them.",{components:{jetpackLink:v.default.createElement("a",{href:"#",className:"profile-links-add-wordpress__jetpack-link",onClick:(0,R.recordClickEvent)("Jetpack Link in Profile Links",this.onJetpackMe)})}})),v.default.createElement(C.default,{onClick:(0,R.recordClickEvent)("Create Sites Button in Profile Links",this.onCreateSite)},e("Create Site")),v.default.createElement(C.default,{className:"profile-links-add-wordpress__cancel",isPrimary:!1,onClick:(0,R.recordClickEvent)("Cancel Add WordPress Sites Button",this.onCancel)},e("Cancel")))}},{key:"render",value:function(){return v.default.createElement("div",null,0===this.props.publicSites.length?this.renderInvitationForm():this.renderAddableSitesForm())}}]),t}(b.Component);t.default=(0,E.connect)(function(e){return{publicSites:(0,T.default)(e)}},{addProfileLinks:I})((0,y.localize)(D)),e.exports=t.default},"./client/me/profile-links-add-wordpress/site.jsx":function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=o("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=n(s),a=o("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=n(a),l=o("./node_modules/babel-runtime/helpers/createClass.js"),d=n(l),u=o("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=n(u),p=o("./node_modules/babel-runtime/helpers/inherits.js"),m=n(p),f=o("./node_modules/react/react.js"),h=n(f),g=o("./client/blocks/site/index.jsx"),_=n(g),b=o("./client/me/event-recorder/index.js"),v=function(e){function t(){var e,o,n,s;(0,r.default)(this,t);for(var a=arguments.length,l=Array(a),d=0;d<a;d++)l[d]=arguments[d];return o=n=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),n.onSelect=function(e){n.props.onSelect(e,n.getInputName())},s=o,(0,c.default)(n,s)}return(0,m.default)(t,e),(0,d.default)(t,[{key:"getInputName",value:function(){return"site-"+this.props.site.ID}},{key:"render",value:function(){var e=this.props,t=e.checked,o=e.onChange,n=e.site;return h.default.createElement("li",{key:n.ID,className:"profile-links-add-wordpress__item",onClick:(0,b.recordCheckboxEvent)("Add WordPress Site")},h.default.createElement("input",{className:"profile-links-add-wordpress__checkbox",type:"checkbox",name:this.getInputName(),onChange:o,checked:t}),h.default.createElement(_.default,{site:n,indicator:!1,onSelect:this.onSelect}))}}]),t}(f.Component);v.propTypes={onChange:f.PropTypes.func.isRequired,onSelect:f.PropTypes.func.isRequired,site:f.PropTypes.object.isRequired,checked:f.PropTypes.bool},v.defaultProps={checked:!1},t.default=v,e.exports=t.default},"./client/me/profile-links/add-buttons.jsx":function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=o("./node_modules/react/react.js"),i=n(s),a=o("./node_modules/gridicons/build/index.js"),r=n(a),l=o("./client/components/button/index.jsx"),d=n(l),u=o("./client/lib/mixins/data-observe/index.js"),c=n(u),p=o("./client/me/event-recorder/index.js"),m=n(p),f=o("./client/components/popover/menu.jsx"),h=n(f),g=o("./client/components/popover/menu-item.jsx"),_=n(g);t.default=i.default.createClass({displayName:"AddProfileLinksButtons",mixins:[(0,c.default)("userProfileLinks"),m.default],propTypes:{showingForm:i.default.PropTypes.bool,showPopoverMenu:i.default.PropTypes.bool},getDefaultProps:function(){return{showingForm:!1}},getInitialState:function(){return{popoverPosition:"top"}},render:function(){return i.default.createElement("div",null,i.default.createElement(h.default,{isVisible:this.props.showPopoverMenu,onClose:this.props.onClosePopoverMenu,position:this.state.popoverPosition,context:this.refs&&this.refs.popoverMenuButton},i.default.createElement(_.default,{onClick:this.recordClickEvent("Add a WordPress Site Button",this.props.onShowAddWordPress)},this.translate("Add WordPress Site")),i.default.createElement(_.default,{onClick:this.recordClickEvent("Add Other Site Button",this.props.onShowAddOther)},this.translate("Add URL"))),i.default.createElement(d.default,{compact:!0,ref:"popoverMenuButton",className:"popover-icon",onClick:this.props.onShowPopoverMenu},i.default.createElement(r.default,{icon:"add-outline"}),this.translate("Add")))}}),e.exports=t.default},"./client/me/profile-links/index.jsx":function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=o("./node_modules/lodash/times.js"),i=n(s),a=o("./node_modules/react/react.js"),r=n(a),l=o("./client/me/profile-link/index.jsx"),d=n(l),u=o("./client/lib/mixins/data-observe/index.js"),c=n(u),p=o("./client/me/profile-links/add-buttons.jsx"),m=n(p),f=o("./client/components/section-header/index.jsx"),h=n(f),g=o("./client/components/card/index.jsx"),_=n(g),b=o("./client/components/notice/index.jsx"),v=n(b),E=o("./client/me/event-recorder/index.js"),y=n(E),x=o("./client/me/profile-links-add-wordpress/index.jsx"),k=n(x),j=o("./client/me/profile-links-add-other/index.jsx"),C=n(j);t.default=r.default.createClass({displayName:"ProfileLinks",mixins:[(0,c.default)("userProfileLinks"),y.default],componentDidMount:function(){this.props.userProfileLinks.getProfileLinks(),"undefined"!=typeof document.hidden&&document.addEventListener("visibilitychange",this.handleVisibilityChange)},componentWillUnmount:function(){"undefined"!=typeof document.hidden&&document.removeEventListener("visibilitychange",this.handleVisibilityChange)},handleVisibilityChange:function(){document.hidden||this.props.userProfileLinks.fetchProfileLinks()},getDefaultProps:function(){return{userProfileLinks:{initialized:!1}}},getInitialState:function(){return{showingForm:!1,lastError:!1,showPopoverMenu:!1}},showAddWordPress:function(){this.setState({showingForm:"wordpress",showPopoverMenu:!1})},showAddOther:function(){this.setState({showingForm:"other",showPopoverMenu:!1})},showPopoverMenu:function(){this.setState({showPopoverMenu:!this.state.showPopoverMenu})},closePopoverMenu:function(){this.setState({showPopoverMenu:!1})},hideForms:function(){this.setState({showingForm:!1})},onRemoveLinkResponse:function(e){e?this.setState({lastError:e}):this.setState({lastError:!1})},clearLastError:function(){this.setState({lastError:!1})},onRemoveLink:function(e){this.props.userProfileLinks.deleteProfileLinkBySlug(e.link_slug,this.onRemoveLinkResponse)},possiblyRenderError:function(){return this.state.lastError?r.default.createElement(v.default,{className:"profile-links__error",status:"is-error",onDismissClick:this.clearLastError},this.translate("An error occurred while attempting to remove the link. Please try again later.")):null},renderProfileLinksList:function(){var e=this;return r.default.createElement("ul",{className:"profile-links__list"},this.props.userProfileLinks.getProfileLinks().map(function(t){return r.default.createElement(d.default,{key:t.link_slug,title:t.title,url:t.value,slug:t.link_slug,onRemoveLink:e.onRemoveLink.bind(e,t)})}))},renderNoProfileLinks:function(){return r.default.createElement("p",{className:"profile-links__no-links"},this.translate("You have no sites in your profile links. You may add sites if you'd like."))},renderPlaceholders:function(){return r.default.createElement("ul",{className:"profile-links__list"},(0,i.default)(2,function(e){return r.default.createElement(d.default,{title:"Loading Profile Links",url:"http://wordpress.com",slug:"A placeholder profile link",isPlaceholder:!0,key:e})}))},renderProfileLinks:function(){var e=this.props.userProfileLinks.initialized,t=this.props.userProfileLinks.getProfileLinks().length,o=void 0;return o=e?t>0?this.renderProfileLinksList():this.renderNoProfileLinks():this.renderPlaceholders(),r.default.createElement("div",null,r.default.createElement("p",null,this.translate("Manage which sites appear in your profile.")),this.possiblyRenderError(),o)},renderForm:function(){return"wordpress"===this.state.showingForm?r.default.createElement(k.default,{userProfileLinks:this.props.userProfileLinks,onSuccess:this.hideForms,onCancel:this.hideForms}):r.default.createElement(C.default,{userProfileLinks:this.props.userProfileLinks,onSuccess:this.hideForms,onCancel:this.hideForms})},render:function(){return r.default.createElement("div",null,r.default.createElement(h.default,{label:this.translate("Profile Links")},r.default.createElement(m.default,{userProfileLinks:this.props.userProfileLinks,showingForm:!!this.state.showingForm,onShowAddOther:this.showAddOther,showPopoverMenu:this.state.showPopoverMenu,onShowAddWordPress:this.showAddWordPress,onShowPopoverMenu:this.showPopoverMenu,onClosePopoverMenu:this.closePopoverMenu})),r.default.createElement(_.default,null,this.state.showingForm?this.renderForm():this.renderProfileLinks()))}}),e.exports=t.default},"./client/me/profile/index.jsx":function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=o("./node_modules/react/react.js"),i=n(s),a=o("./node_modules/react-addons-linked-state-mixin/index.js"),r=n(a),l=o("./node_modules/debug/browser.js"),d=n(l),u=o("./client/me/sidebar-navigation/sidebar-navigation.jsx"),c=n(u),p=o("./client/lib/protect-form/index.jsx"),m=o("./client/me/form-base/index.js"),f=n(m),h=o("./client/components/forms/form-button/index.jsx"),g=n(h),_=o("./client/components/forms/form-fieldset/index.jsx"),b=n(_),v=o("./client/components/forms/form-label/index.jsx"),E=n(v),y=o("./client/components/forms/form-text-input/index.jsx"),x=n(y),k=o("./client/components/forms/form-textarea/index.jsx"),j=n(k),C=o("./client/blocks/edit-gravatar/index.jsx"),S=n(C),w=o("./client/me/profile-links/index.jsx"),R=n(w),P=o("./client/lib/user-profile-links/index.js"),T=n(P),A=o("./client/me/reauth-required/index.jsx"),N=n(A),L=o("./client/lib/two-step-authorization/index.js"),I=n(L),D=o("./client/components/card/index.jsx"),M=n(D),O=o("./client/lib/mixins/data-observe/index.js"),F=n(O),U=o("./client/me/event-recorder/index.js"),B=n(U),W=o("./client/components/main/index.jsx"),z=n(W),V=o("./client/components/section-header/index.jsx"),G=n(V),H=(0,d.default)("calypso:me:profile");t.default=(0,p.protectForm)(i.default.createClass({displayName:"Profile",mixins:[f.default,r.default,(0,F.default)("userSettings"),B.default],componentDidMount:function(){H(this.displayName+" component is mounted.")},componentWillUnmount:function(){H(this.displayName+" component is unmounting.")},render:function(){var e="https://gravatar.com/"+this.props.userSettings.getSetting("user_login");return i.default.createElement(z.default,{className:"profile"},i.default.createElement(c.default,null),i.default.createElement(N.default,{twoStepAuthorization:I.default}),i.default.createElement(G.default,{label:this.translate("Profile")}),i.default.createElement(M.default,{className:"me-profile-settings"},i.default.createElement(S.default,null),i.default.createElement("form",{onSubmit:this.submitForm,onChange:this.props.markChanged},i.default.createElement(b.default,null,i.default.createElement(E.default,{htmlFor:"first_name"},this.translate("First Name")),i.default.createElement(x.default,{disabled:this.getDisabledState(),id:"first_name",name:"first_name",onFocus:this.recordFocusEvent("First Name Field"),valueLink:this.valueLink("first_name")})),i.default.createElement(b.default,null,i.default.createElement(E.default,{htmlFor:"last_name"},this.translate("Last Name")),i.default.createElement(x.default,{disabled:this.getDisabledState(),id:"last_name",name:"last_name",onFocus:this.recordFocusEvent("Last Name Field"),valueLink:this.valueLink("last_name")})),i.default.createElement(b.default,null,i.default.createElement(E.default,{htmlFor:"display_name"},this.translate("Public Display Name")),i.default.createElement(x.default,{disabled:this.getDisabledState(),id:"display_name",name:"display_name",onFocus:this.recordFocusEvent("Display Name Field"),valueLink:this.valueLink("display_name")})),i.default.createElement(b.default,null,i.default.createElement(E.default,{htmlFor:"description"},this.translate("About Me")),i.default.createElement(j.default,{disabled:this.getDisabledState(),id:"description",name:"description",onFocus:this.recordFocusEvent("About Me Field"),valueLink:this.valueLink("description")})),i.default.createElement("p",null,i.default.createElement(g.default,{disabled:!this.props.userSettings.hasUnsavedSettings()||this.getDisabledState(),onClick:this.recordClickEvent("Save Profile Details Button")},this.state.submittingForm?this.translate("Saving…"):this.translate("Save Profile Details")))),i.default.createElement("p",{className:"me-profile-settings__info-text"},this.translate("This information will be displayed publicly on {{profilelink}}your profile{{/profilelink}} and in {{hovercardslink}}Gravatar Hovercards{{/hovercardslink}}.",{components:{profilelink:i.default.createElement("a",{onClick:this.recordClickEvent("My Profile Link"),href:e,target:"_blank",rel:"noopener noreferrer"}),hovercardslink:i.default.createElement("a",{onClick:this.recordClickEvent("Gravatar Hovercards Link"),href:"https://support.wordpress.com/gravatar-hovercards/",target:"_blank",rel:"noopener noreferrer"})}}))),i.default.createElement(R.default,{userProfileLinks:T.default}))}})),e.exports=t.default},"./client/me/reauth-required/index.jsx":function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var s=o("./node_modules/babel-runtime/core-js/json/stringify.js"),i=n(s),a=o("./client/components/notice/index.jsx"),r=n(a),l=o("./node_modules/react/react.js"),d=o("./node_modules/react-addons-linked-state-mixin/index.js"),u=o("./node_modules/debug/browser.js")("calypso:me:reauth-required"),c=o("./client/components/dialog/index.jsx"),p=o("./client/components/forms/form-fieldset/index.jsx"),m=o("./client/components/forms/form-label/index.jsx"),f=o("./client/components/forms/form-tel-input/index.jsx"),h=o("./client/components/forms/form-checkbox/index.jsx"),g=o("./client/components/forms/form-button/index.jsx"),_=o("./client/components/forms/form-buttons-bar/index.jsx"),b=o("./client/components/forms/form-input-validation/index.jsx"),v=o("./client/lib/mixins/data-observe/index.js"),E=o("./client/me/event-recorder/index.js"),y=o("./client/lib/user/utils.js"),x=o("./client/me/constants.js");e.exports=l.createClass({displayName:"ReauthRequired",mixins:[d,v("twoStepAuthorization"),E],getInitialState:function(){return{remember2fa:!1,code:"",smsRequestsAllowed:!0}},getCodeMessage:function(){var e="";return e=this.props.twoStepAuthorization.isTwoStepSMSEnabled()?this.translate("Please check your text messages at the phone number ending with {{strong}}%(smsLastFour)s{{/strong}} and enter the verification code below.",{args:{smsLastFour:this.props.twoStepAuthorization.getSMSLastFour()},components:{strong:l.createElement("strong",null)}}):this.translate("Please enter the verification code generated by your authenticator app.")},submitForm:function(e){e.preventDefault(),this.setState({validatingCode:!0}),this.props.twoStepAuthorization.validateCode({code:this.state.code,remember2fa:this.state.remember2fa},function(e,t){this.setState({validatingCode:!1}),u(e?"There was an error validating that code: "+(0,i.default)(e):"The code validated!"+(0,i.default)(t))}.bind(this))},codeRequestTimer:!1,allowSMSRequests:function(){this.setState({smsRequestsAllowed:!0})},sendSMSCode:function(){this.setState({smsRequestsAllowed:!1}),this.codeRequestTimer=setTimeout(this.allowSMSRequests,6e4),this.props.twoStepAuthorization.sendSMSCode(function(e,t){u(!e&&t.sent?"SMS code successfully sent":"There was a failure sending the SMS code.")})},preValidateAuthCode:function(){return this.state.code.length&&this.state.code.length>5},renderSendSMSButton:function(){var e;return e=this.props.twoStepAuthorization.isTwoStepSMSEnabled()?l.createElement(g,{disabled:!this.state.smsRequestsAllowed,isPrimary:!1,onClick:this.recordClickEvent("Resend SMS Code Button on Reauth Required",this.sendSMSCode),type:"button"},this.translate("Resend SMS Code")):l.createElement(g,{disabled:!this.state.smsRequestsAllowed,isPrimary:!1,onClick:this.recordClickEvent("Send SMS Code Button on Reauth Required",this.sendSMSCode),type:"button"},this.translate("Send SMS Code"))},renderFailedValidationMsg:function(){return this.props.twoStepAuthorization.codeValidationFailed()?l.createElement(b,{isError:!0,text:this.translate("You entered an invalid code. Please try again.")}):null},renderSMSResendThrottled:function(){return this.props.twoStepAuthorization.isSMSResendThrottled()?l.createElement("div",{className:"reauth-required__send-sms-throttled"},l.createElement(r.default,{showDismiss:!1,text:this.translate("SMS codes are limited to once per minute. Please wait and try again.")})):null},render:function(){var e=this.props.twoStepAuthorization.isTwoStepSMSEnabled()?x.sevenDigit2faPlaceholder:x.sixDigit2faPlaceholder;return l.createElement(c,{autoFocus:!1,className:"reauth-required__dialog",isFullScreen:!1,isVisible:this.props.twoStepAuthorization.isReauthRequired(),buttons:null,onClose:null},l.createElement("p",null,this.getCodeMessage()),l.createElement("p",null,l.createElement("a",{className:"reauth-required__sign-out",onClick:this.recordClickEvent("Reauth Required Log Out Link",y.logout)},this.translate("Not you? Sign Out"))),l.createElement("form",{onSubmit:this.submitForm},l.createElement(p,null,l.createElement(m,{htmlFor:"code"},this.translate("Verification Code")),l.createElement(f,{autoFocus:!0,id:"code",isError:this.props.twoStepAuthorization.codeValidationFailed(),name:"code",placeholder:e,onFocus:this.recordFocusEvent("Reauth Required Verification Code Field"),valueLink:this.linkState("code")}),this.renderFailedValidationMsg()),l.createElement(p,null,l.createElement(m,null,l.createElement(h,{checkedLink:this.linkState("remember2fa"),id:"remember2fa",name:"remember2fa",onClick:this.recordCheckboxEvent("Remember 2fa")}),l.createElement("span",null,this.translate("Remember for 30 days.")))),this.renderSMSResendThrottled(),l.createElement(_,null,l.createElement(g,{disabled:this.state.validatingCode||!this.preValidateAuthCode(),onClick:this.recordClickEvent("Submit Validation Code on Reauth Required")},this.translate("Verify")),this.renderSendSMSButton())))}})},"./client/me/sidebar-navigation/sidebar-navigation.jsx":function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=o("./node_modules/react/react.js"),i=n(s),a=o("./node_modules/i18n-calypso/index.js"),r=o("./client/components/sidebar-navigation/index.jsx"),l=n(r),d=o("./client/components/gravatar/index.jsx"),u=n(d),c=o("./client/lib/user/index.js"),p=n(c),m=(0,p.default)(),f=function(e){var t=e.translate;return i.default.createElement(l.default,{sectionName:"me",sectionTitle:t("Me")},i.default.createElement(u.default,{user:m.get(),size:30,imgSize:400}))};t.default=(0,a.localize)(f),e.exports=t.default},"./client/me/sidebar/index.jsx":function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function s(e){return{currentUser:(0,_.getCurrentUser)(e)}}Object.defineProperty(t,"__esModule",{value:!0});var i=o("./node_modules/babel-runtime/helpers/defineProperty.js"),a=n(i),r=o("./node_modules/react/react.js"),l=n(r),d=o("./node_modules/debug/browser.js"),u=n(d),c=o("./node_modules/react-redux/es/index.js"),p=o("./client/components/button/index.jsx"),m=n(p),f=o("./client/me/purchases/paths.js"),h=n(f),g=o("./client/state/ui/layout-focus/actions.js"),_=o("./client/state/current-user/selectors.js"),b=o("./client/state/login/actions.js"),v=(0,u.default)("calypso:me:sidebar"),E=o("./client/layout/sidebar/index.jsx"),y=o("./client/layout/sidebar/footer.jsx"),x=o("./client/layout/sidebar/heading.jsx"),k=o("./client/layout/sidebar/item.jsx"),j=o("./client/layout/sidebar/menu.jsx"),C=o("./client/config/index.js"),S=o("./client/me/profile-gravatar/index.jsx"),w=o("./client/me/event-recorder/index.js"),R=o("./client/lib/user/index.js")(),P=o("./client/lib/user/utils.js"),T=l.default.createClass({displayName:"MeSidebar",mixins:[w],componentDidMount:function(){v("The MeSidebar React component is mounted.")},onNavigate:function(){this.props.setNextLayoutFocus("content"),window.scrollTo(0,0)},onSignOut:function(){var e=this.props.currentUser,t=e&&"en"===e.localeSlug,o=null;t&&!C.isEnabled("desktop")&&(o="/?apppromo"),C.isEnabled("login/wp-login")?this.props.logoutUser(o).then(function(e){var t=e.redirect_to;return R.clear(function(){return location.href=t||"/"})},function(){return P.logout(o)}):P.logout(o),this.recordClickEvent("Sidebar Sign Out Link")},render:function(){var e,t=this.props.context,o=(e={"/me":"profile","/me/security/account-recovery":"security","/me/security/connected-applications":"security","/me/security/social-login":"security","/me/security/two-step":"security","/me/notifications/comments":"notifications","/me/notifications/updates":"notifications","/me/notifications/subscriptions":"notifications","/help/contact":"help"},(0,a.default)(e,h.default.purchasesRoot(),"purchases"),(0,a.default)(e,h.default.billingHistory(),"purchases"),(0,a.default)(e,h.default.addCreditCard(),"purchases"),
(0,a.default)(e,"/me/chat","happychat"),e),n=t.path.replace(/\/\d+$/,""),s=void 0;return s=o[n]?o[n]:t.path.split("/").pop(),l.default.createElement(E,null,l.default.createElement(S,{user:this.props.currentUser}),l.default.createElement("div",{className:"me-sidebar__signout"},l.default.createElement(m.default,{compact:!0,className:"me-sidebar__signout-button",onClick:this.onSignOut,title:this.translate("Sign out of WordPress.com",{textOnly:!0})},this.translate("Sign Out"))),l.default.createElement(j,null,l.default.createElement(x,null,this.translate("Profile")),l.default.createElement("ul",null,l.default.createElement(k,{selected:"profile"===s,link:C.isEnabled("me/my-profile")?"/me":"//wordpress.com/me/public-profile",label:this.translate("My Profile"),icon:"user",onNavigate:this.onNavigate}),l.default.createElement(k,{selected:"account"===s,link:C.isEnabled("me/account")?"/me/account":"//wordpress.com/me/account",label:this.translate("Account Settings"),icon:"cog",onNavigate:this.onNavigate,preloadSectionName:"account"}),l.default.createElement(k,{selected:"purchases"===s,link:h.default.purchasesRoot(),label:this.translate("Manage Purchases"),icon:"credit-card",onNavigate:this.onNavigate,preloadSectionName:"purchases"}),l.default.createElement(k,{selected:"security"===s,link:"/me/security",label:this.translate("Security"),icon:"lock",onNavigate:this.onNavigate,preloadSectionName:"security"}),l.default.createElement(k,{selected:"notifications"===s,link:C.isEnabled("me/notifications")?"/me/notifications":"//wordpress.com/me/notifications",label:this.translate("Notification Settings"),icon:"bell",onNavigate:this.onNavigate,preloadSectionName:"notification-settings"}))),l.default.createElement(j,null,l.default.createElement(x,null,this.translate("Special")),l.default.createElement("ul",null,l.default.createElement(k,{selected:"get-apps"===s,link:"/me/get-apps",label:this.translate("Get Apps"),icon:"my-sites",onNavigate:this.onNavigate}),this.renderNextStepsItem(s))),l.default.createElement(y,null))},renderNextStepsItem:function(e){var t=this.props.currentUser;if(C.isEnabled("me/next-steps")&&t&&t.site_count>0)return l.default.createElement(k,{selected:"next"===e,link:"/me/next",label:this.translate("Next Steps"),icon:"list-checkmark",onNavigate:this.onNavigate})}});t.default=(0,c.connect)(s,{logoutUser:b.logoutUser,setNextLayoutFocus:g.setNextLayoutFocus})(T),e.exports=t.default},"./client/state/current-user/email-verification/actions.js":function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetVerifyEmailState=t.verifyEmail=void 0;var n=o("./client/state/action-types.js");t.verifyEmail=function(){return{type:n.EMAIL_VERIFY_REQUEST}},t.resetVerifyEmailState=function(){return{type:n.EMAIL_VERIFY_STATE_RESET}}},"./client/state/current-user/gravatar-status/actions.js":function(e,t,o){"use strict";function n(e,t){return(0,i.withAnalytics)((0,i.recordTracksEvent)("calypso_edit_gravatar_upload_start"),{type:s.GRAVATAR_UPLOAD_REQUEST,file:e,email:t})}Object.defineProperty(t,"__esModule",{value:!0}),t.receiveGravatarImageFailed=void 0,t.uploadGravatar=n;var s=o("./client/state/action-types.js"),i=o("./client/state/analytics/actions.js");t.receiveGravatarImageFailed=function(e){var t=e.errorMessage,o=e.statName;return(0,i.withAnalytics)((0,i.composeAnalytics)((0,i.recordTracksEvent)("calypso_edit_gravatar_file_receive_failure"),(0,i.bumpStat)("calypso_gravatar_update_error",o)),{type:s.GRAVATAR_RECEIVE_IMAGE_FAILURE,errorMessage:t})}},"./client/state/login/actions.js":function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function s(e){var t=(0,m.default)(e,"body.data.phone_number");return(0,b.translate)("Message sent to phone number ending in %(phoneNumber)s",{args:{phoneNumber:t}})}function i(e){var t="global";if(!e.status)return{code:"network_error",message:e.message,field:t};var o=(0,m.default)(e,"response.body.data.errors[0].code");if(o)if(o in w)t=w[o];else if("admin_login_attempt"===o){var n=(0,S.addLocaleToWpcomUrl)("https://wordpress.com/wp-login.php?action=lostpassword",(0,S.getLocaleSlug)());return{code:o,message:h.default.createElement("div",null,h.default.createElement("p",null,(0,b.translate)("You attempted to login with the username {{em}}admin{{/em}} on WordPress.com.",{components:{em:h.default.createElement("em",null)}})),h.default.createElement("p",null,(0,b.translate)("If you were trying to access your self hosted {{a}}WordPress.org{{/a}} site, try {{strong}}yourdomain.com/wp-admin/{{/strong}} instead.",{components:{a:h.default.createElement("a",{href:"http://wordpress.org",target:"_blank",rel:"noopener noreferrer"}),strong:h.default.createElement("strong",null)}})),h.default.createElement("p",null,(0,b.translate)("If you can’t remember your WordPress.com username, you can {{a}}reset your password{{/a}} by providing your email address.",{components:{a:h.default.createElement("a",{href:n,rel:"external"})}}))),field:t}}var s=(0,m.default)(e,"response.body.data.errors[0].message");return s||(s=(0,m.default)(e,"response.body.data",e.message)),{code:o,message:s,field:t}}Object.defineProperty(t,"__esModule",{value:!0}),t.logoutUser=t.formUpdate=t.stopPollAppPushAuth=t.startPollAppPushAuth=t.sendSmsCode=t.createSocialUserFailed=t.disconnectSocialUser=t.connectSocialUser=t.createSocialUser=t.loginSocialUser=t.loginUserWithTwoFactorVerificationCode=t.loginUser=void 0;var a=o("./node_modules/babel-runtime/core-js/promise.js"),r=n(a),l=o("./node_modules/babel-runtime/helpers/extends.js"),d=n(l),u=o("./node_modules/lodash/omit.js"),c=n(u),p=o("./node_modules/lodash/get.js"),m=n(p),f=o("./node_modules/react/react.js"),h=n(f),g=o("./node_modules/superagent/lib/client.js"),_=n(g),b=o("./node_modules/i18n-calypso/index.js"),v=o("./client/config/index.js"),E=n(v),y=o("./client/state/action-types.js"),x=o("./client/state/login/selectors.js"),k=o("./client/state/current-user/selectors.js"),j=o("./client/lib/wp/browser.js"),C=n(j),S=o("./client/lib/i18n-utils/browser.js"),w={empty_password:"password",empty_two_step_code:"twoStepCode",empty_username:"usernameOrEmail",incorrect_password:"password",invalid_email:"usernameOrEmail",invalid_two_step_code:"twoStepCode",invalid_username:"usernameOrEmail"},R=function(e){return(0,d.default)({message:e.message,code:e.error,field:"global"},(0,c.default)(e,["error","message","field"]))};t.loginUser=function(e,t,o,n){return function(a){return a({type:y.LOGIN_REQUEST}),_.default.post((0,S.addLocaleToWpcomUrl)("https://wordpress.com/wp-login.php?action=login-endpoint",(0,S.getLocaleSlug)())).withCredentials().set("Content-Type","application/x-www-form-urlencoded").accept("application/json").send({username:e,password:t,remember_me:o,redirect_to:n,client_id:(0,E.default)("wpcom_signup_id"),client_secret:(0,E.default)("wpcom_signup_key")}).then(function(e){a({type:y.LOGIN_REQUEST_SUCCESS,rememberMe:o,data:e.body&&e.body.data}),"sms"===(0,m.default)(e,"body.data.two_step_notification_sent")&&a({type:y.TWO_FACTOR_AUTHENTICATION_SEND_SMS_CODE_REQUEST_SUCCESS,notice:{message:s(e),status:"is-success"},twoStepNonce:(0,m.default)(e,"body.data.two_step_nonce_sms")})}).catch(function(e){var t=i(e);return a({type:y.LOGIN_REQUEST_FAILURE,error:t}),r.default.reject(t)})}},t.loginUserWithTwoFactorVerificationCode=function(e,t){return function(o,n){return o({type:y.TWO_FACTOR_AUTHENTICATION_LOGIN_REQUEST}),_.default.post((0,S.addLocaleToWpcomUrl)("https://wordpress.com/wp-login.php?action=two-step-authentication-endpoint",(0,S.getLocaleSlug)())).withCredentials().set("Content-Type","application/x-www-form-urlencoded").accept("application/json").send({user_id:(0,x.getTwoFactorUserId)(n()),auth_type:t,two_step_code:e,two_step_nonce:(0,x.getTwoFactorAuthNonce)(n(),t),remember_me:(0,x.getRememberMe)(n()),client_id:(0,E.default)("wpcom_signup_id"),client_secret:(0,E.default)("wpcom_signup_key")}).then(function(){o({type:y.TWO_FACTOR_AUTHENTICATION_LOGIN_REQUEST_SUCCESS})}).catch(function(e){var n=(0,m.default)(e,"response.body.data.two_step_nonce");n&&o({type:y.TWO_FACTOR_AUTHENTICATION_UPDATE_NONCE,twoStepNonce:n,nonceType:t});var s=i(e);return o({type:y.TWO_FACTOR_AUTHENTICATION_LOGIN_REQUEST_FAILURE,error:s}),r.default.reject(s)})}},t.loginSocialUser=function(e,t){return function(o){return o({type:y.SOCIAL_LOGIN_REQUEST}),_.default.post((0,S.addLocaleToWpcomUrl)("https://wordpress.com/wp-login.php?action=social-login-endpoint",(0,S.getLocaleSlug)())).withCredentials().set("Content-Type","application/x-www-form-urlencoded").accept("application/json").send((0,d.default)({},e,{redirect_to:t,client_id:(0,E.default)("wpcom_signup_id"),client_secret:(0,E.default)("wpcom_signup_key")})).then(function(e){o({type:y.SOCIAL_LOGIN_REQUEST_SUCCESS,data:(0,m.default)(e,"body.data")}),"sms"===(0,m.default)(e,"body.data.two_step_notification_sent")&&o({type:y.TWO_FACTOR_AUTHENTICATION_SEND_SMS_CODE_REQUEST_SUCCESS,notice:{message:s(e),status:"is-success"},twoStepNonce:(0,m.default)(e,"body.data.two_step_nonce_sms")})}).catch(function(t){var n=i(t);return n.email=(0,m.default)(t,"response.body.data.email"),o({type:y.SOCIAL_LOGIN_REQUEST_FAILURE,error:n,authInfo:e,data:(0,m.default)(t,"response.body.data")}),r.default.reject(n)})}},t.createSocialUser=function(e,t){return function(o){return o({type:y.SOCIAL_CREATE_ACCOUNT_REQUEST,notice:{message:(0,b.translate)("Creating your account")}}),C.default.undocumented().usersSocialNew((0,d.default)({},e,{signup_flow_name:t})).then(function(e){var t={username:e.username,bearerToken:e.bearer_token};return o({type:y.SOCIAL_CREATE_ACCOUNT_REQUEST_SUCCESS,data:t}),t},function(e){var t=R(e);return o({type:y.SOCIAL_CREATE_ACCOUNT_REQUEST_FAILURE,error:t}),r.default.reject(t)})}},t.connectSocialUser=function(e,t){return function(o){return o({type:y.SOCIAL_CONNECT_ACCOUNT_REQUEST,notice:{message:(0,b.translate)("Creating your account")}}),C.default.undocumented().me().socialConnect((0,d.default)({},e,{redirect_to:t})).then(function(e){o({type:y.SOCIAL_CONNECT_ACCOUNT_REQUEST_SUCCESS,redirect_to:e.redirect_to})},function(e){var t=R(e);return o({type:y.SOCIAL_CONNECT_ACCOUNT_REQUEST_FAILURE,error:t}),r.default.reject(t)})}},t.disconnectSocialUser=function(e){return function(t){return t({type:y.SOCIAL_DISCONNECT_ACCOUNT_REQUEST,notice:{message:(0,b.translate)("Creating your account")}}),C.default.undocumented().me().socialDisconnect(e).then(function(){t({type:y.SOCIAL_DISCONNECT_ACCOUNT_REQUEST_SUCCESS})},function(e){var o=R(e);return t({type:y.SOCIAL_DISCONNECT_ACCOUNT_REQUEST_FAILURE,error:o}),r.default.reject(o)})}},t.createSocialUserFailed=function(e,t){return{type:y.SOCIAL_CREATE_ACCOUNT_REQUEST_FAILURE,authInfo:e,error:t.field?t:R(t)}},t.sendSmsCode=function(){return function(e,t){return e({type:y.TWO_FACTOR_AUTHENTICATION_SEND_SMS_CODE_REQUEST,notice:{message:(0,b.translate)("Sending you a text message…")}}),_.default.post((0,S.addLocaleToWpcomUrl)("https://wordpress.com/wp-login.php?action=send-sms-code-endpoint",(0,S.getLocaleSlug)())).set("Content-Type","application/x-www-form-urlencoded").accept("application/json").send({user_id:(0,x.getTwoFactorUserId)(t()),two_step_nonce:(0,x.getTwoFactorAuthNonce)(t(),"sms"),client_id:(0,E.default)("wpcom_signup_id"),client_secret:(0,E.default)("wpcom_signup_key")}).then(function(t){var o=s(t);e({type:y.TWO_FACTOR_AUTHENTICATION_SEND_SMS_CODE_REQUEST_SUCCESS,notice:{message:o,status:"is-success"},twoStepNonce:(0,m.default)(t,"body.data.two_step_nonce")})}).catch(function(t){var o=i(t);e({type:y.TWO_FACTOR_AUTHENTICATION_SEND_SMS_CODE_REQUEST_FAILURE,error:o,twoStepNonce:(0,m.default)(t,"response.body.data.two_step_nonce")})})}},t.startPollAppPushAuth=function(){return{type:y.TWO_FACTOR_AUTHENTICATION_PUSH_POLL_START}},t.stopPollAppPushAuth=function(){return{type:y.TWO_FACTOR_AUTHENTICATION_PUSH_POLL_STOP}},t.formUpdate=function(){return{type:y.LOGIN_FORM_UPDATE}},t.logoutUser=function(e){return function(t,o){t({type:y.LOGOUT_REQUEST});var n=(0,k.getCurrentUser)(o()),s=(n.logout_URL||"").match(/_wpnonce=([^&]*)/),a=s&&s[1];return _.default.post((0,S.addLocaleToWpcomUrl)("https://wordpress.com/wp-login.php?action=logout-endpoint",(0,S.getLocaleSlug)())).withCredentials().set("Content-Type","application/x-www-form-urlencoded").accept("application/json").send({redirect_to:e,client_id:(0,E.default)("wpcom_signup_id"),client_secret:(0,E.default)("wpcom_signup_key"),logout_nonce:a}).then(function(e){var o=(0,m.default)(e,"body.data",{});return t({type:y.LOGOUT_REQUEST_SUCCESS,data:o}),r.default.resolve(o)}).catch(function(e){var o=i(e);return t({type:y.LOGOUT_REQUEST_FAILURE,error:o}),r.default.reject(o)})}}},"./client/state/ui/drop-zone/actions.js":function(e,t,o){"use strict";function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return{type:i.DROPZONE_SHOW,dropZoneName:e}}function s(e){return{type:i.DROPZONE_HIDE,dropZoneName:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.showDropZone=n,t.hideDropZone=s;var i=o("./client/state/action-types.js")},"./client/state/ui/editor/image-editor/actions.js":function(e,t,o){"use strict";function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:f.IMAGE_EDITOR_STATE_RESET,additionalData:e}}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:f.IMAGE_EDITOR_STATE_RESET_ALL,additionalData:e}}function i(){return{type:f.IMAGE_EDITOR_ROTATE_COUNTERCLOCKWISE}}function a(){return{type:f.IMAGE_EDITOR_FLIP}}function r(e){return{type:f.IMAGE_EDITOR_SET_ASPECT_RATIO,ratio:e}}function l(e){return{type:f.IMAGE_EDITOR_SET_DEFAULT_ASPECT_RATIO,ratio:e}}function d(e,t,o,n){return{type:f.IMAGE_EDITOR_SET_FILE_INFO,src:e,fileName:t,mimeType:o,title:n}}function u(e,t,o,n){return{type:f.IMAGE_EDITOR_SET_CROP_BOUNDS,topBound:e,leftBound:t,bottomBound:o,rightBound:n}}function c(e,t,o,n){return{type:f.IMAGE_EDITOR_COMPUTED_CROP,topRatio:e,leftRatio:t,widthRatio:o,heightRatio:n}}function p(e,t,o,n){return{type:f.IMAGE_EDITOR_CROP,topRatio:e,leftRatio:t,widthRatio:o,heightRatio:n}}function m(e,t){return{type:f.IMAGE_EDITOR_IMAGE_HAS_LOADED,width:e,height:t}}Object.defineProperty(t,"__esModule",{value:!0}),t.resetImageEditorState=n,t.resetAllImageEditorState=s,t.imageEditorRotateCounterclockwise=i,t.imageEditorFlip=a,t.setImageEditorAspectRatio=r,t.setImageEditorDefaultAspectRatio=l,t.setImageEditorFileInfo=d,t.setImageEditorCropBounds=u,t.imageEditorComputedCrop=c,t.imageEditorCrop=p,t.setImageEditorImageHasLoaded=m;var f=o("./client/state/action-types.js")},"./client/state/ui/editor/image-editor/selectors.js":function(e,t,o){"use strict";function n(e){return e.ui.editor.imageEditor.transform}function s(e){return e.ui.editor.imageEditor.fileInfo}function i(e){return e.ui.editor.imageEditor.hasChanges}function a(e){return!e.ui.editor.imageEditor.imageIsLoading}function r(e){return e.ui.editor.imageEditor.cropBounds}function l(e){return e.ui.editor.imageEditor.crop}function d(e){return e.ui.editor.imageEditor.aspectRatio}Object.defineProperty(t,"__esModule",{value:!0}),t.getImageEditorTransform=n,t.getImageEditorFileInfo=s,t.imageEditorHasChanges=i,t.isImageEditorImageLoaded=a,t.getImageEditorCropBounds=r,t.getImageEditorCrop=l,t.getImageEditorAspectRatio=d},"./node_modules/component-file-picker/index.js":function(e,t,o){function n(e,t){function o(e){t(a.files,e,a),s.unbind(a,"change",o),r=!1}"function"==typeof e&&(t=e,e={}),e=e||{},a.multiple=!!e.multiple,a.webkitdirectory=a.mozdirectory=a.directory=!!e.directory,null==e.accept?delete a.accept:e.accept.join?a.accept=e.accept.join(","):e.accept&&(a.accept=e.accept),r&&s.unbind(a,"change",r),s.bind(a,"change",o),r=o,i.reset(),a.click()}var s=o("./node_modules/component-event/index.js");e.exports=n;var i=document.createElement("form");i.innerHTML='<input type="file" style="top: -1000px; position: absolute" aria-hidden="true">',document.body.appendChild(i);var a=i.childNodes[0],r=!1},"./node_modules/create-react-class/factory.js":function(e,t,o){"use strict";function n(e){return e}function s(e,t,o){function s(e,t){var o=b.hasOwnProperty(t)?b[t]:null;x.hasOwnProperty(t)&&l("OVERRIDE_BASE"===o,"ReactClassInterface: You are attempting to override `%s` from your class specification. Ensure that your method names do not overlap with React methods.",t),e&&l("DEFINE_MANY"===o||"DEFINE_MANY_MERGED"===o,"ReactClassInterface: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",t)}function i(e,o){if(o){l("function"!=typeof o,"ReactClass: You're attempting to use a component class or function as a mixin. Instead, just use a regular object."),l(!t(o),"ReactClass: You're attempting to use a component as a mixin. Instead, just use a regular object.");var n=e.prototype,i=n.__reactAutoBindPairs;o.hasOwnProperty(d)&&v.mixins(e,o.mixins);for(var a in o)if(o.hasOwnProperty(a)&&a!==d){var r=o[a],u=n.hasOwnProperty(a);if(s(u,a),v.hasOwnProperty(a))v[a](e,r);else{var c=b.hasOwnProperty(a),f="function"==typeof r,h=f&&!c&&!u&&o.autobind!==!1;if(h)i.push(a,r),n[a]=r;else if(u){var g=b[a];l(c&&("DEFINE_MANY_MERGED"===g||"DEFINE_MANY"===g),"ReactClass: Unexpected spec policy %s for key %s when mixing in component specs.",g,a),"DEFINE_MANY_MERGED"===g?n[a]=p(n[a],r):"DEFINE_MANY"===g&&(n[a]=m(n[a],r))}else n[a]=r}}}else;}function u(e,t){if(t)for(var o in t){var n=t[o];if(t.hasOwnProperty(o)){var s=o in v;l(!s,'ReactClass: You are attempting to define a reserved property, `%s`, that shouldn\'t be on the "statics" key. Define it as an instance property instead; it will still be accessible on the constructor.',o);var i=o in e;l(!i,"ReactClass: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",o),e[o]=n}}}function c(e,t){l(e&&t&&"object"==typeof e&&"object"==typeof t,"mergeIntoWithNoDuplicateKeys(): Cannot merge non-objects.");for(var o in t)t.hasOwnProperty(o)&&(l(void 0===e[o],"mergeIntoWithNoDuplicateKeys(): Tried to merge two objects with the same key: `%s`. This conflict may be due to a mixin; in particular, this may be caused by two getInitialState() or getDefaultProps() methods returning objects with clashing keys.",o),e[o]=t[o]);return e}function p(e,t){return function(){var o=e.apply(this,arguments),n=t.apply(this,arguments);if(null==o)return n;if(null==n)return o;var s={};return c(s,o),c(s,n),s}}function m(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function f(e,t){var o=t.bind(e);return o}function h(e){for(var t=e.__reactAutoBindPairs,o=0;o<t.length;o+=2){var n=t[o],s=t[o+1];e[n]=f(e,s)}}function g(e){var t=n(function(e,n,s){this.__reactAutoBindPairs.length&&h(this),this.props=e,this.context=n,this.refs=r,this.updater=s||o,this.state=null;var i=this.getInitialState?this.getInitialState():null;l("object"==typeof i&&!Array.isArray(i),"%s.getInitialState(): must return an object or null",t.displayName||"ReactCompositeComponent"),this.state=i});t.prototype=new k,t.prototype.constructor=t,t.prototype.__reactAutoBindPairs=[],_.forEach(i.bind(null,t)),i(t,E),i(t,e),i(t,y),t.getDefaultProps&&(t.defaultProps=t.getDefaultProps()),l(t.prototype.render,"createClass(...): Class specification must implement a `render` method.");for(var s in b)t.prototype[s]||(t.prototype[s]=null);return t}var _=[],b={mixins:"DEFINE_MANY",statics:"DEFINE_MANY",propTypes:"DEFINE_MANY",contextTypes:"DEFINE_MANY",childContextTypes:"DEFINE_MANY",getDefaultProps:"DEFINE_MANY_MERGED",getInitialState:"DEFINE_MANY_MERGED",getChildContext:"DEFINE_MANY_MERGED",render:"DEFINE_ONCE",componentWillMount:"DEFINE_MANY",componentDidMount:"DEFINE_MANY",componentWillReceiveProps:"DEFINE_MANY",shouldComponentUpdate:"DEFINE_ONCE",componentWillUpdate:"DEFINE_MANY",componentDidUpdate:"DEFINE_MANY",componentWillUnmount:"DEFINE_MANY",updateComponent:"OVERRIDE_BASE"},v={displayName:function(e,t){e.displayName=t},mixins:function(e,t){if(t)for(var o=0;o<t.length;o++)i(e,t[o])},childContextTypes:function(e,t){e.childContextTypes=a({},e.childContextTypes,t)},contextTypes:function(e,t){e.contextTypes=a({},e.contextTypes,t)},getDefaultProps:function(e,t){e.getDefaultProps?e.getDefaultProps=p(e.getDefaultProps,t):e.getDefaultProps=t},propTypes:function(e,t){e.propTypes=a({},e.propTypes,t)},statics:function(e,t){u(e,t)},autobind:function(){}},E={componentDidMount:function(){this.__isMounted=!0}},y={componentWillUnmount:function(){this.__isMounted=!1}},x={replaceState:function(e,t){this.updater.enqueueReplaceState(this,e,t)},isMounted:function(){return!!this.__isMounted}},k=function(){};return a(k.prototype,e.prototype,x),g}var i,a=o("./node_modules/object-assign/index.js"),r=o("./node_modules/fbjs/lib/emptyObject.js"),l=o("./node_modules/fbjs/lib/invariant.js"),d="mixins";i={},e.exports=s},"./node_modules/create-react-class/index.js":function(e,t,o){"use strict";var n=o("./node_modules/react/react.js"),s=o("./node_modules/create-react-class/factory.js");if("undefined"==typeof n)throw Error("create-react-class could not find the React object. If you are using script tags, make sure that React is being loaded before create-react-class.");var i=(new n.Component).updater;e.exports=s(n.Component,n.isValidElement,i)},"./node_modules/lodash/indexOf.js":function(e,t,o){function n(e,t,o){var n=e?e.length:0;if(!n)return-1;var r=null==o?0:i(o);return r<0&&(r=a(n+r,0)),s(e,t,r)}var s=o("./node_modules/lodash/_baseIndexOf.js"),i=o("./node_modules/lodash/toInteger.js"),a=Math.max;e.exports=n}});