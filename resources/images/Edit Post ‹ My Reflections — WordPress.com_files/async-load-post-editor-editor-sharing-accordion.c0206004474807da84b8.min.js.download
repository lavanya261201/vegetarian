webpackJsonp(["async-load-post-editor-editor-sharing-accordion"],{"./client/components/forms/counted-textarea/index.jsx":function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.CountedTextarea=void 0;var o=s("./node_modules/babel-runtime/helpers/extends.js"),i=n(o),r=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),a=n(r),l=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),c=n(l),d=s("./node_modules/babel-runtime/helpers/createClass.js"),u=n(d),p=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),h=n(p),f=s("./node_modules/babel-runtime/helpers/inherits.js"),m=n(f),b=s("./node_modules/lodash/noop.js"),g=n(b),_=s("./node_modules/lodash/omit.js"),j=n(_),v=s("./node_modules/react/react.js"),C=n(v),P=s("./node_modules/prop-types/index.js"),x=n(P),y=s("./node_modules/i18n-calypso/index.js"),k=s("./node_modules/classnames/index.js"),E=n(k),S=s("./client/components/forms/form-textarea/index.jsx"),M=n(S),z=t.CountedTextarea=function(e){function t(){var e,s,n,o;(0,c.default)(this,t);for(var i=arguments.length,r=Array(i),l=0;l<i;l++)r[l]=arguments[l];return s=n=(0,h.default)(this,(e=t.__proto__||(0,a.default)(t)).call.apply(e,[this].concat(r))),n.renderCountPanel=function(){var e=n.props.value.length;!e&&n.props.countPlaceholderLength&&(e=n.props.placeholder.length);var t=void 0;return t=n.props.showRemainingCharacters&&n.props.acceptableLength?n.props.translate("%d character remaining","%d characters remaining",{context:"Input length",args:[n.props.acceptableLength-e],count:n.props.acceptableLength-e}):n.props.translate("%d character","%d characters",{context:"Input length",args:[e],count:e}),C.default.createElement("div",{className:"counted-textarea__count-panel"},t,n.props.children)},o=s,(0,h.default)(n,o)}return(0,m.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=(0,E.default)("counted-textarea",this.props.className,{"is-exceeding-acceptable-length":this.props.acceptableLength&&this.props.value.length>this.props.acceptableLength});return C.default.createElement("div",{className:e},C.default.createElement(M.default,(0,i.default)({},(0,j.default)(this.props,"className","acceptableLength","showRemainingCharacters","children","countPlaceholderLength","moment","numberFormat","translate"),{className:"counted-textarea__input"})),this.renderCountPanel())}}]),t}(C.default.Component);z.propTypes={value:x.default.string,placeholder:x.default.string,countPlaceholderLength:x.default.bool,onChange:x.default.func,acceptableLength:x.default.number,showRemainingCharacters:x.default.bool,translate:x.default.func},z.defaultProps={value:"",placeholder:"",countPlaceholderLength:!1,onChange:g.default,showRemainingCharacters:!1,translate:y.translate},t.default=(0,y.localize)(z)},"./client/post-editor/editor-fieldset/index.jsx":function(e,t,s){"use strict";var n=s("./node_modules/react/react.js"),o=s("./node_modules/classnames/index.js");e.exports=n.createClass({displayName:"EditorFieldset",propTypes:{legend:n.PropTypes.oneOfType([n.PropTypes.string,n.PropTypes.element]).isRequired},renderChildren:function(){return n.Children.map(this.props.children,function(e){return n.createElement("div",{className:"editor-fieldset__option"},e)})},render:function(){return n.createElement("fieldset",{className:o("editor-fieldset",this.props.className)},n.createElement("legend",{className:"editor-fieldset__legend"},this.props.legend),this.renderChildren())}})},"./client/post-editor/editor-sharing/accordion.jsx":function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=s("./node_modules/lodash/reduce.js"),i=n(o),r=s("./node_modules/lodash/includes.js"),a=n(r),l=s("./node_modules/react/react.js"),c=n(l),d=s("./node_modules/classnames/index.js"),u=n(d),p=s("./node_modules/react-redux/es/index.js"),h=s("./client/components/accordion/index.jsx"),f=n(h),m=s("./client/components/forms/form-text-input/index.jsx"),b=n(m),g=s("./client/lib/post-metadata/index.js"),_=n(g),j=s("./client/post-editor/editor-sharing/index.jsx"),v=n(j),C=s("./client/components/accordion/section.jsx"),P=n(C),x=s("./client/lib/posts/utils.js"),y=n(x),k=s("./client/lib/viewport/index.js"),E=s("./client/components/data/query-publicize-connections/index.jsx"),S=n(E),M=s("./client/state/current-user/selectors.js"),z=s("./client/state/ui/selectors.js"),w=s("./client/state/ui/editor/selectors.js"),N=s("./client/state/posts/selectors.js"),T=s("./client/state/sites/selectors.js"),L=s("./client/state/sharing/publicize/selectors.js"),I=s("./client/state/selectors/has-broken-site-user-connection.js"),B=n(I),O=s("./client/state/selectors/is-publicize-enabled.js"),D=n(O),R=s("./client/state/analytics/actions.js"),A=c.default.createClass({displayName:"EditorSharingAccordion",propTypes:{site:l.PropTypes.object,post:l.PropTypes.object,isNew:l.PropTypes.bool,connections:l.PropTypes.array,hasBrokenConnection:l.PropTypes.bool,isPublicizeEnabled:l.PropTypes.bool,isSharingActive:l.PropTypes.bool,isLikesActive:l.PropTypes.bool},getSubtitle:function(){var e=this.props,t=e.isPublicizeEnabled,s=e.post,n=e.connections;if(t&&s&&n){var o=_.default.publicizeSkipped(s);return(0,i.default)(n,function(e,t){var s=t.keyring_connection_ID,n=t.label;return(0,a.default)(o,s)||(0,a.default)(e,n)||e.push(n),e},[]).join(", ")}},renderShortUrl:function(){var e=(0,u.default)("editor-sharing__shortlink",{"is-standalone":this.hideSharing()});return y.default.isPublished(this.props.post)?c.default.createElement("div",{className:e},c.default.createElement("label",{className:"editor-sharing__shortlink-label",htmlFor:"shortlink-field"},this.translate("Shortlink")),c.default.createElement(b.default,{className:"editor-sharing__shortlink-field",id:"shortlink-field",value:this.props.post.short_URL,size:this.props.post.short_URL&&this.props.post.short_URL.length,readOnly:!0,selectOnFocus:!0})):null},hideSharing:function(){var e=this.props,t=e.isSharingActive,s=e.isLikesActive,n=e.isPublicizeEnabled;return!t&&!s&&!n},render:function(){var e=this.hideSharing(),t=(0,u.default)("editor-sharing__accordion",this.props.className,{"is-loading":!this.props.post||!this.props.connections});if(e&&!y.default.isPublished(this.props.post))return null;var s=void 0;return this.props.hasBrokenConnection&&(s={type:"warning",text:this.translate("A broken connection requires repair",{comment:"Publicize connection deauthorized, needs user action to fix"}),url:"/sharing/"+this.props.site.slug,position:(0,k.isMobile)()?"top left":"top",onClick:this.props.onStatusClick}),c.default.createElement(f.default,{title:this.translate("Sharing"),subtitle:this.getSubtitle(),status:s,className:t},this.props.site&&c.default.createElement(S.default,{siteId:this.props.site.ID}),c.default.createElement(P.default,null,!e&&c.default.createElement(v.default,{site:this.props.site,post:this.props.post}),this.renderShortUrl()))}});t.default=(0,p.connect)(function(e){var t=(0,z.getSelectedSiteId)(e),s=(0,M.getCurrentUserId)(e),n=(0,w.getEditorPostId)(e),o=(0,N.getEditedPostValue)(e,t,n,"type"),i=!1!==(0,T.isJetpackModuleActive)(e,t,"sharedaddy"),r=!1!==(0,T.isJetpackModuleActive)(e,t,"likes");return{connections:(0,L.getSiteUserConnections)(e,t,s),hasBrokenConnection:(0,B.default)(e,t,s),isSharingActive:i,isLikesActive:r,isPublicizeEnabled:(0,D.default)(e,t,o)}},{onStatusClick:function(){return(0,R.recordGoogleEvent)("Editor","Clicked Accordion Broken Status")}})(A),e.exports=t.default},"./client/post-editor/editor-sharing/index.jsx":function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.post,s=e.site;return r.default.createElement("div",{className:"editor-sharing"},r.default.createElement(l.default,{post:t,site:s}),r.default.createElement(d.default,{post:t,site:s}))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var i=s("./node_modules/react/react.js"),r=n(i),a=s("./client/post-editor/editor-sharing/publicize-options.jsx"),l=n(a),c=s("./client/post-editor/editor-sharing/sharing-like-options.jsx"),d=n(c);o.propTypes={site:i.PropTypes.object,post:i.PropTypes.object},e.exports=t.default},"./client/post-editor/editor-sharing/publicize-connection.jsx":function(e,t,s){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s("./node_modules/lodash/includes.js"),r=o(i),a=s("./node_modules/react/react.js"),l=o(a),c=s("./node_modules/gridicons/build/index.js"),d=o(c),u=s("./client/components/forms/form-checkbox/index.jsx"),p=o(u),h=s("./client/lib/post-metadata/index.js"),f=o(h),m=s("./client/lib/posts/actions.js"),b=o(m),g=s("./client/lib/posts/stats.js"),_=n(g),j=s("./client/components/notice/index.jsx"),v=o(j),C=s("./client/components/notice/notice-action.jsx"),P=o(C);t.default=l.default.createClass({displayName:"EditorSharingPublicizeConnection",propTypes:{post:a.PropTypes.object,connection:a.PropTypes.object,onRefresh:a.PropTypes.func,label:a.PropTypes.string},getDefaultProps:function(){return{onRefresh:function(){}}},isConnectionSkipped:function(){var e=this.props,t=e.post,s=e.connection;return t&&s&&(0,r.default)(f.default.publicizeSkipped(t),s.keyring_connection_ID)},isConnectionDone:function(){var e=this.props,t=e.post,s=e.connection;return t&&s&&(0,r.default)(f.default.publicizeDone(t),s.keyring_connection_ID)},isDisabled:function(){var e=this.props.connection;return!e||e.read_only},onChange:function(e){var t=this.props.connection;t&&(e.target.checked?(b.default.deleteMetadata("_wpas_skip_"+t.keyring_connection_ID),_.recordStat("sharing_enabled_"+t.service),_.recordEvent("Publicize Service",t.service,"enabled")):(b.default.updateMetadata("_wpas_skip_"+t.keyring_connection_ID,1),_.recordStat("sharing_disabled_"+t.service),_.recordEvent("Publicize Service",t.service,"disabled")))},renderBrokenConnection:function(){var e=this.props.connection;if(e&&"broken"===e.status)return l.default.createElement(v.default,{isCompact:!0,className:"editor-sharing__broken-publicize-connection",status:"is-warning",showDismiss:!1},this.translate("There is an issue connecting to %s.",{args:e.label}),l.default.createElement(P.default,{onClick:this.props.onRefresh},"Reconnect ",l.default.createElement(d.default,{icon:"external",size:18})))},render:function(){var e=this.props,t=e.connection,s=e.label;return l.default.createElement("div",{className:"editor-sharing__publicize-connection"},l.default.createElement("label",null,l.default.createElement(p.default,{checked:!this.isConnectionSkipped(),disabled:this.isDisabled(),onChange:this.onChange}),l.default.createElement("span",{"data-e2e-service":s},t&&t.external_display)),this.renderBrokenConnection())}}),e.exports=t.default},"./client/post-editor/editor-sharing/publicize-message.jsx":function(e,t,s){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),r=o(i),a=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),l=o(a),c=s("./node_modules/babel-runtime/helpers/createClass.js"),d=o(c),u=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),p=o(u),h=s("./node_modules/babel-runtime/helpers/inherits.js"),f=o(h),m=s("./node_modules/react/react.js"),b=o(m),g=s("./node_modules/i18n-calypso/index.js"),_=s("./node_modules/prop-types/index.js"),j=o(_),v=s("./client/components/forms/counted-textarea/index.jsx"),C=o(v),P=s("./client/components/forms/form-textarea/index.jsx"),x=o(P),y=s("./client/components/info-popover/index.jsx"),k=o(y),E=s("./client/components/track-input-changes/index.jsx"),S=o(E),M=s("./client/lib/posts/actions.js"),z=o(M),w=s("./client/lib/posts/stats.js"),N=n(w),T=function(e){function t(){var e,s,n,o;(0,l.default)(this,t);for(var i=arguments.length,a=Array(i),c=0;c<i;c++)a[c]=arguments[c];return s=n=(0,p.default)(this,(e=t.__proto__||(0,r.default)(t)).call.apply(e,[this].concat(a))),n.onChange=function(e){n.props.onChange?n.props.onChange(e.target.value):z.default.updateMetadata("_wpas_mess",e.target.value)},n.recordStats=function(){N.recordStat("sharing_message_changed"),N.recordEvent("Publicize Sharing Message Changed")},o=s,(0,p.default)(n,o)}return(0,f.default)(t,e),(0,d.default)(t,[{key:"renderInfoPopover",value:function(){return b.default.createElement(k.default,{className:"publicize-message-counter-info",position:"bottom left",gaEventCategory:"Editor",popoverName:"SharingMessage"},this.props.translate("The length includes space for the link to your post and an attached image.",{context:"Post editor sharing message counter explanation"}))}},{key:"renderTextarea",value:function(){var e=this.props.preview||this.props.translate("Write a message for your audience here.");return this.props.requireCount?b.default.createElement(C.default,{disabled:this.props.disabled,value:this.props.message,placeholder:e,countPlaceholderLength:!0,onChange:this.onChange,showRemainingCharacters:!0,acceptableLength:this.props.acceptableLength,className:"editor-sharing__message-input"},this.renderInfoPopover()):b.default.createElement(x.default,{disabled:this.props.disabled,value:this.props.message,placeholder:e,onChange:this.onChange,className:"editor-sharing__message-input"})}},{key:"render",value:function(){return b.default.createElement("div",{className:"editor-sharing__publicize-message"},b.default.createElement("h5",{className:"editor-sharing__message-heading"},this.props.translate("Customize the message",{context:"Post editor sharing message heading"})),b.default.createElement(S.default,{onNewValue:this.recordStats},this.renderTextarea()))}}]),t}(m.Component);T.propTypes={disabled:j.default.bool,message:j.default.string,preview:j.default.string,acceptableLength:j.default.number,requireCount:j.default.bool,onChange:j.default.func},T.defaultProps={disabled:!1,message:"",acceptableLength:140,requireCount:!1},t.default=(0,g.localize)(T),e.exports=t.default},"./client/post-editor/editor-sharing/publicize-options.jsx":function(e,t,s){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s("./node_modules/lodash/map.js"),r=o(i),a=s("./node_modules/lodash/includes.js"),l=o(a),c=s("./node_modules/react/react.js"),d=o(c),u=s("./node_modules/react-redux/es/index.js"),p=s("./node_modules/classnames/index.js"),h=o(p),f=s("./node_modules/gridicons/build/index.js"),m=o(f),b=s("./client/components/data/query-post-types/index.jsx"),g=o(b),_=s("./client/post-editor/editor-sharing/publicize-message.jsx"),j=o(_),v=s("./client/post-editor/editor-sharing/publicize-services.jsx"),C=o(v),P=s("./client/lib/paths/index.js"),x=n(P),y=s("./client/lib/post-metadata/index.js"),k=o(y),E=s("./client/lib/popup-monitor/index.js"),S=o(E),M=s("./client/components/button/index.jsx"),z=o(M),w=s("./client/lib/site/utils.js"),N=o(w),T=s("./client/lib/posts/stats.js"),L=s("./client/state/ui/selectors.js"),I=s("./client/state/ui/editor/selectors.js"),B=s("./client/state/sites/selectors.js"),O=s("./client/state/posts/selectors.js"),D=s("./client/state/post-types/selectors.js"),R=s("./client/state/current-user/selectors.js"),A=s("./client/state/sharing/publicize/selectors.js"),q=s("./client/state/sharing/publicize/actions.js"),U=d.default.createClass({displayName:"EditorSharingPublicizeOptions",connectionPopupMonitor:!1,jetpackModulePopupMonitor:!1,propTypes:{site:c.PropTypes.object,post:c.PropTypes.object,siteId:c.PropTypes.number,isPublicizeEnabled:c.PropTypes.bool,connections:c.PropTypes.array,requestConnections:c.PropTypes.func},hasConnections:function(){return this.props.connections&&this.props.connections.length},componentWillUnmount:function(){this.connectionPopupMonitor&&this.connectionPopupMonitor.off("close",this.onNewConnectionPopupClosed),this.jetpackModulePopupMonitor&&this.jetpackModulePopupMonitor.off("close",this.onModuleConnectionPopupClosed)},newConnectionPopup:function(){var e=void 0;this.props.site&&(e=x.publicizeConnections(this.props.site),this.connectionPopupMonitor||(this.connectionPopupMonitor=new S.default),this.connectionPopupMonitor.open(e),this.connectionPopupMonitor.once("close",this.onNewConnectionPopupClosed))},onNewConnectionPopupClosed:function(){this.props.requestConnections(this.props.site.ID)},newConnection:function(){this.newConnectionPopup(),(0,T.recordStat)("sharing_create_service"),(0,T.recordEvent)("Opened Create New Sharing Service Dialog")},jetpackModulePopup:function(){var e=void 0;this.props.site&&this.props.site.jetpack&&(e=x.jetpackModules(this.props.site,"publicize"),this.jetpackModulePopupMonitor||(this.jetpackModulePopupMonitor=new S.default),this.jetpackModulePopupMonitor.open(e),this.jetpackModulePopupMonitor.once("close",this.onModuleConnectionPopupClosed))},onModuleConnectionPopupClosed:function(){var e=this;this.props.site&&this.props.site.jetpack&&this.props.site.once("change",function(){e.props.isPublicizeEnabled&&e.props.requestConnections(e.props.site.ID)})},renderServices:function(){if(this.props.site&&this.hasConnections())return d.default.createElement(C.default,{post:this.props.post,newConnectionPopup:this.newConnectionPopup})},renderMessage:function(){var e=this.hasConnections()?k.default.publicizeSkipped(this.props.post):[],t=this.hasConnections()?this.props.connections.filter(function(t){return e&&-1===e.indexOf(t.keyring_connection_ID)}):[],s=(0,l.default)((0,r.default)(t,"service"),"twitter"),n=s?94:null;if(this.hasConnections())return d.default.createElement(j.default,{message:k.default.publicizeMessage(this.props.post)||"",requireCount:s,acceptableLength:n})},renderAddNewButton:function(){if(N.default.userCan("publish_posts",this.props.site))return d.default.createElement(z.default,{borderless:!0,compact:!0,onClick:this.newConnection},d.default.createElement(m.default,{icon:"add"})," ",this.translate("Connect new service"),d.default.createElement("span",{className:"editor-sharing__external-link-indicator"},d.default.createElement(m.default,{icon:"external",size:18})))},renderInfoNotice:function(){if(this.hasConnections()||N.default.userCan("publish_posts",this.props.site))return d.default.createElement("p",{className:"editor-drawer__description"},this.translate("Connect and select social media services to automatically share this post."))},dismissRepublicizeMessage:function(){this.props.dismissShareConfirmation(this.props.siteId,this.props.post.ID)},render:function(){if(!this.props.isPublicizeEnabled)return null;if(this.props.site&&this.props.site.options.publicize_permanently_disabled)return d.default.createElement("div",{className:"editor-sharing__publicize-disabled"},d.default.createElement("p",null,d.default.createElement("span",null,this.translate("Publicize is disabled on this site."))));if(this.props.site&&this.props.site.jetpack&&!this.props.isPublicizeEnabled)return d.default.createElement("div",{className:"editor-sharing__publicize-disabled"},d.default.createElement("p",null,d.default.createElement("span",null,this.translate("Enable the Publicize module to automatically share new posts to social networks."))),d.default.createElement("button",{className:"editor-sharing__jetpack-modules-button button is-secondary",onClick:this.jetpackModulePopup},this.translate("View Module Settings")));var e=(0,h.default)("editor-sharing__publicize-options",{"has-connections":this.hasConnections(),"has-add-option":N.default.userCan("publish_posts",this.props.site)});return d.default.createElement("div",{className:e},this.props.siteId&&d.default.createElement(g.default,{siteId:this.props.siteId}),this.renderInfoNotice(),this.renderServices(),this.renderAddNewButton(),this.renderMessage())}});t.default=(0,u.connect)(function(e){var t=(0,L.getSelectedSiteId)(e),s=(0,R.getCurrentUserId)(e),n=(0,I.getEditorPostId)(e),o=(0,O.getEditedPostValue)(e,t,n,"type"),i=!1!==(0,B.isJetpackModuleActive)(e,t,"publicize")&&(0,D.postTypeSupports)(e,t,o,"publicize");return{siteId:t,isPublicizeEnabled:i,connections:(0,A.getSiteUserConnections)(e,t,s)}},{requestConnections:q.fetchConnections})(U),e.exports=t.default},"./client/post-editor/editor-sharing/publicize-services.jsx":function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.EditorSharingPublicizeServices=void 0;var o=s("./node_modules/lodash/map.js"),i=n(o),r=s("./node_modules/lodash/groupBy.js"),a=n(r),l=s("./node_modules/react/react.js"),c=n(l),d=s("./node_modules/react-redux/es/index.js"),u=s("./client/post-editor/editor-sharing/publicize-connection.jsx"),p=n(u),h=s("./client/state/current-user/selectors.js"),f=s("./client/state/ui/selectors.js"),m=s("./client/state/sharing/publicize/selectors.js"),b=t.EditorSharingPublicizeServices=function(e){var t=e.connections,s=e.post,n=e.newConnectionPopup;return c.default.createElement("ul",{className:"editor-sharing__publicize-services"},(0,i.default)((0,a.default)(t,"label"),function(e,t){return c.default.createElement("li",{key:t,className:"editor-sharing__publicize-service"},c.default.createElement("h5",{className:"editor-sharing__publicize-service-heading"},t),e.map(function(e){return c.default.createElement(p.default,{key:e.ID,post:s,connection:e,onRefresh:n,label:t})}))}))};b.propTypes={connections:l.PropTypes.array.isRequired,post:l.PropTypes.object,newConnectionPopup:l.PropTypes.func.isRequired},t.default=(0,d.connect)(function(e){var t=(0,f.getSelectedSiteId)(e),s=(0,h.getCurrentUserId)(e);return{connections:(0,m.getSiteUserConnections)(e,t,s)}})(b)},"./client/post-editor/editor-sharing/sharing-like-options.jsx":function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=s("./node_modules/babel-runtime/helpers/defineProperty.js"),i=n(o),r=s("./node_modules/react/react.js"),a=n(r),l=s("./node_modules/react-redux/es/index.js"),c=s("./client/post-editor/editor-fieldset/index.jsx"),d=n(c),u=s("./client/components/forms/form-checkbox/index.jsx"),p=n(u),h=s("./client/lib/posts/actions.js"),f=n(h),m=s("./client/lib/posts/stats.js"),b=s("./client/state/ui/editor/selectors.js"),g=s("./client/state/ui/selectors.js"),_=s("./client/state/sites/selectors.js"),j=a.default.createClass({displayName:"SharingLikeOptions",propTypes:{site:a.default.PropTypes.object,post:a.default.PropTypes.object,isSharingButtonsEnabled:a.default.PropTypes.bool,isLikesEnabled:a.default.PropTypes.bool,isNew:a.default.PropTypes.bool},isShowingSharingButtons:function(){return this.props.post&&"sharing_enabled"in this.props.post?this.props.post.sharing_enabled:!this.props.site||!this.props.isNew||this.props.site.options.default_sharing_status},isShowingLikeButton:function(){return this.props.post&&"likes_enabled"in this.props.post?this.props.post.likes_enabled:!this.props.site||!this.props.isNew||this.props.site.options.default_likes_enabled},renderSharingButtonField:function(){if(this.props.isSharingButtonsEnabled)return a.default.createElement("label",null,a.default.createElement(p.default,{name:"sharing_enabled",checked:this.isShowingSharingButtons(),onChange:this.onChange}),a.default.createElement("span",null,this.translate("Show Sharing Buttons",{context:"Post Editor"})))},renderLikesButtonField:function(){if(this.props.isLikesEnabled)return a.default.createElement("label",null,a.default.createElement(p.default,{name:"likes_enabled",checked:this.isShowingLikeButton(),onChange:this.onChange}),a.default.createElement("span",null,this.translate("Show Like Button",{context:"Post Editor"})))},onChange:function(e){f.default.edit((0,i.default)({},e.target.name,e.target.checked)),this.recordStats(e)},recordStats:function(e){var t=e.target.name,s="sharing_enabled"===e.target.name?"Sharing Buttons":"Like Button";t+=e.target.checked?"_enabled":"_disabled",s+=e.target.checked?" Enabled":" Disabled",(0,m.recordStat)(t),(0,m.recordEvent)(s)},render:function(){return this.props.isSharingButtonsEnabled||this.props.isLikesEnabled?a.default.createElement(d.default,{className:"editor-sharing__sharing-like-options",legend:this.translate("Sharing Buttons & Likes")},this.renderSharingButtonField(),this.renderLikesButtonField()):null}});t.default=(0,l.connect)(function(e){var t=(0,g.getSelectedSiteId)(e);return{isSharingButtonsEnabled:!1!==(0,_.isJetpackModuleActive)(e,t,"sharedaddy"),isLikesEnabled:!1!==(0,_.isJetpackModuleActive)(e,t,"likes"),isNew:(0,b.isEditorNewPost)(e)}})(j),e.exports=t.default}});