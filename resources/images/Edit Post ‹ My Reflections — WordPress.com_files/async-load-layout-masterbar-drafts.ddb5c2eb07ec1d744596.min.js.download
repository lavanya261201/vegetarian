webpackJsonp(["async-load-layout-masterbar-drafts"],{"./client/components/card/compact.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=s("./node_modules/lodash/assign.js"),a=o(n),r=s("./node_modules/react/react.js"),i=o(r),l=s("./node_modules/classnames/index.js"),u=o(l),d=s("./node_modules/create-react-class/index.js"),c=o(d),p=s("./client/components/card/index.jsx"),f=o(p);t.default=(0,c.default)({displayName:"CompactCard",render:function(){var e=(0,a.default)({},this.props,{className:(0,u.default)(this.props.className,"is-compact")});return i.default.createElement(f.default,e,this.props.children)}}),e.exports=t.default},"./client/components/data/query-post-counts/index.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),a=o(n),r=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),i=o(r),l=s("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),p=s("./node_modules/babel-runtime/helpers/inherits.js"),f=o(p),h=s("./node_modules/react/react.js"),m=s("./node_modules/react-redux/es/index.js"),_=s("./client/state/posts/counts/actions.js"),g=s("./client/state/posts/counts/selectors.js"),v=function(e){function t(){return(0,i.default)(this,t),(0,c.default)(this,(t.__proto__||(0,a.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,u.default)(t,[{key:"componentWillMount",value:function(){this.request(this.props)}},{key:"componentWillReceiveProps",value:function(e){this.props.siteId===e.siteId&&this.props.type===e.type||this.request(e)}},{key:"request",value:function(e){e.requesting||e.requestPostCounts(e.siteId,e.type)}},{key:"render",value:function(){return null}}]),t}(h.Component);v.propTypes={siteId:h.PropTypes.number.isRequired,type:h.PropTypes.string.isRequired,requesting:h.PropTypes.bool,requestPostCounts:h.PropTypes.func},t.default=(0,m.connect)(function(e,t){var s=t.siteId,o=t.type;return{requesting:(0,g.isRequestingPostCounts)(e,s,o)}},{requestPostCounts:_.requestPostCounts})(v),e.exports=t.default},"./client/components/update-post-status/index.js":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=s("./node_modules/babel-runtime/helpers/extends.js"),a=o(n),r=s("./node_modules/babel-runtime/helpers/slicedToArray.js"),i=o(r),l=s("./node_modules/babel-runtime/helpers/typeof.js"),u=o(l),d=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),c=o(d),p=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),f=o(p),h=s("./node_modules/babel-runtime/helpers/createClass.js"),m=o(h),_=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),g=o(_),v=s("./node_modules/babel-runtime/helpers/inherits.js"),y=o(v),E=s("./node_modules/lodash/once.js"),b=o(E),P=s("./node_modules/lodash/flow.js"),j=o(P),S=s("./node_modules/react/react.js"),T=o(S),I=s("./node_modules/prop-types/index.js"),C=o(I),x=s("./node_modules/react-redux/es/index.js"),D=s("./node_modules/i18n-calypso/index.js"),w=s("./client/components/update-post-status/update-template.js"),N=o(w),A=s("./client/lib/posts/actions.js"),k=o(A),O=s("./client/state/analytics/actions.js"),M=1200,R=(0,b.default)(function(e){return{page:{deleteWarning:e("Delete this page permanently?"),deleted:e("Page Deleted"),deleting:e("Deleting Page"),error:e("Error"),restored:e("Page Restored"),restoring:e("Restoring Page"),trashed:e("Moved to Trash"),trashing:e("Trashing Page"),undo:e("undo?"),updated:e("Updated"),updating:e("Updating Page")},post:{deleteWarning:e("Delete this post permanently?"),deleted:e("Post Deleted"),deleting:e("Deleting Post"),error:e("Error"),restored:e("Restored"),restoring:e("Restoring"),trashed:e("Moved to Trash"),trashing:e("Trashing Post"),undo:e("undo?"),updated:e("Updated"),updating:e("Updating Post")}}}),U=(0,j.default)(D.localize,(0,x.connect)(null,{recordGoogleEvent:O.recordGoogleEvent})),F=function(e){var t,s;return U((s=t=function(t){function s(){var e,t,o,n;(0,f.default)(this,s);for(var a=arguments.length,r=Array(a),l=0;l<a;l++)r[l]=arguments[l];return t=o=(0,g.default)(this,(e=s.__proto__||(0,c.default)(s)).call.apply(e,[this].concat(r))),o.state={updated:!1,updatedStatus:null,previousStatus:null,showMoreOptions:!1,showPageActions:!1},o.buildUpdateTemplate=function(){if(o.state.updated){var e=R(o.props.translate);return T.default.createElement(N.default,{post:o.props.post||o.props.page,previousStatus:o.state.previousStatus,resetToPreviousState:o.resetToPreviousState,status:o.state.updatedStatus,strings:e[o.getType()]})}},o.updatePostStatus=function(e){var t=o.props.post||o.props.page,s=null,n=function(e,t){return e?(o.setErrorState(),!1):(o.setState({previousStatus:s,updatedStatus:t.status,showMoreOptions:!1}),!0)};switch(e){case"delete":o.setState({showPageActions:!1,updatedStatus:"deleting",updated:!0});var a=R(o.props.translate),r=o.props.post?"post":"page";return void("object"===("undefined"==typeof window?"undefined":(0,u.default)(window))&&window.confirm(a[r].deleteWarning)?k.default.trash(t,n):o.resetState());case"trash":return o.setState({showPageActions:!1,updatedStatus:"trashing",updated:!0}),s=t.status,void k.default.trash(t,n);case"restore":return o.setState({showPageActions:!1,updatedStatus:"restoring",updated:!0}),s="trash",void k.default.restore(t,n);default:o.setState({showPageActions:!1,updatedStatus:"updating",updated:!0}),k.default.update(t,{status:e},function(e,t){n(e,t)&&setTimeout(o.resetState,M)})}},o.resetState=function(){o.setState({updatedStatus:null,updated:!1,showMoreOptions:!1,showPageActions:!1})},o.resetToPreviousState=function(){var e="page"===o.getType()?["Pages","Clicked Undo Trashed Page"]:["Posts","Clicked Undo Trashed Post"],t=(0,i.default)(e,2),s=t[0],n=t[1];o.props.recordGoogleEvent(s,n),o.state.previousStatus&&o.updatePostStatus(o.state.previousStatus)},o.togglePageActions=function(){o.setState({showPageActions:!o.state.showPageActions})},o.showMoreControls=function(){o.setState({showMoreOptions:!0})},o.hideMoreControls=function(){o.setState({showMoreOptions:!1})},n=t,(0,g.default)(o,n)}return(0,y.default)(s,t),(0,m.default)(s,[{key:"getType",value:function(){return this.props.page?"page":"post"}},{key:"setErrorState",value:function(){this.setState({updated:!0,updatedStatus:"error"}),setTimeout(this.resetState,M)}},{key:"render",value:function(){return T.default.createElement(e,(0,a.default)({},this.props,{buildUpdateTemplate:this.buildUpdateTemplate,togglePageActions:this.togglePageActions,showMoreControls:this.showMoreControls,hideMoreControls:this.hideMoreControls,updatePostStatus:this.updatePostStatus},this.state))}}]),s}(S.Component),t.displayName="UpdatePostStatus("+(e.displayName||e.name||"")+")",t.propTypes={translate:C.default.func.isRequired,recordGoogleEvent:C.default.func.isRequired,post:C.default.object,page:C.default.object},s))};t.default=F,e.exports=t.default},"./client/components/update-post-status/update-template.js":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function n(e){var t=e.post,s=e.previousStatus,o=e.resetToPreviousState,n=e.status,a=e.strings,l="conf-alert",u=void 0,d=void 0,c=void 0,p=void 0;switch(n){case"trashing":case"deleting":p="deleting"===n?a.deleting:a.trashing,u=r.default.createElement("span",null,p," ",r.default.createElement(i,null)),l+=" conf-alert--trashing";break;case"trash":c=o,d=r.default.createElement("a",{className:"undo",onClick:c},r.default.createElement("span",null,a.undo)),u=a.trashed,l+=" conf-alert--trashed";break;case"deleted":u=a.deleted,l+=" conf-alert--deleted";break;case"updating":u=r.default.createElement("span",null,a.updating," ",r.default.createElement(i,null)),l+=" conf-alert--updating";break;case"error":u=a.error,l+=" conf-alert--error";break;case"restoring":u=r.default.createElement("span",null,a.restoring," ",r.default.createElement(i,null)),l+=" conf-alert--updating";break;default:u="trash"===s?a.restored:a.updated}return r.default.createElement("div",{key:t.global_ID+"-update",className:"updated-confirmation"},r.default.createElement("div",{className:l},r.default.createElement("div",{className:"conf-alert_con"},r.default.createElement("span",{className:"conf-alert_title"},u),d)))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var a=s("./node_modules/react/react.js"),r=o(a),i=function(){return r.default.createElement("span",null,r.default.createElement("span",{className:"loading-dot"},"."),r.default.createElement("span",{className:"loading-dot"},"."),r.default.createElement("span",{className:"loading-dot"},"."))};e.exports=t.default},"./client/layout/masterbar/drafts.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),a=o(n),r=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),i=o(r),l=s("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),p=s("./node_modules/babel-runtime/helpers/inherits.js"),f=o(p),h=s("./node_modules/react/react.js"),m=o(h),_=s("./node_modules/react-redux/es/index.js"),g=s("./node_modules/i18n-calypso/index.js"),v=s("./client/state/ui/selectors.js"),y=s("./client/components/popover/index.jsx"),E=o(y),b=s("./client/components/count/index.jsx"),P=o(b),j=s("./client/state/posts/counts/selectors.js"),S=s("./client/state/posts/selectors.js"),T=s("./client/my-sites/draft/index.jsx"),I=o(T),C=s("./client/components/data/query-posts/index.jsx"),x=o(C),D=s("./client/components/data/query-post-counts/index.jsx"),w=o(D),N=s("./client/components/button/index.jsx"),A=o(N),k=s("./client/blocks/site/index.jsx"),O=o(k),M=s("./client/state/current-user/selectors.js"),R=function(e){function t(){var e,s,o,n;(0,i.default)(this,t);for(var r=arguments.length,l=Array(r),u=0;u<r;u++)l[u]=arguments[u];return s=o=(0,c.default)(this,(e=t.__proto__||(0,a.default)(t)).call.apply(e,[this].concat(l))),o.state={showDrafts:!1},o.toggleDrafts=function(){var e=o.state.showDrafts;o.setState({showDrafts:!e})},o.closeDrafts=function(){o.setState({showDrafts:!1})},n=s,(0,c.default)(o,n)}return(0,f.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this.props,t=e.selectedSite,s=e.draftCount,o=e.loadingDrafts,n=e.translate,a=0!==s&&o;return t?m.default.createElement("div",null,m.default.createElement(w.default,{siteId:t.ID,type:"post"}),this.props.draftCount>0&&m.default.createElement(A.default,{compact:!0,borderless:!0,className:"masterbar__toggle-drafts",onClick:this.toggleDrafts,ref:"drafts",title:n("Latest Drafts")},m.default.createElement(P.default,{count:this.props.draftCount})),m.default.createElement(E.default,{isVisible:this.state.showDrafts,onClose:this.closeDrafts,position:"bottom left",context:this.refs&&this.refs.drafts,className:"masterbar__recent-drafts"},m.default.createElement(x.default,{siteId:t.ID,query:this.props.draftsQuery}),m.default.createElement(O.default,{compact:!0,site:t}),this.props.drafts&&this.props.drafts.map(this.renderDraft,this),a&&m.default.createElement(I.default,{isPlaceholder:!0}),this.props.draftCount>6&&m.default.createElement(A.default,{compact:!0,borderless:!0,className:"masterbar__see-all-drafts",href:"/posts/drafts/"+t.slug,onClick:this.closeDrafts},n("See all drafts"),this.props.draftCount?m.default.createElement(P.default,{count:this.props.draftCount}):null))):null}},{key:"renderDraft",value:function(e){if(!e)return null;var t=this.props.selectedSite;return m.default.createElement(I.default,{key:e.global_ID,post:e,siteId:t&&t.ID,showAuthor:t&&!t.single_user_site&&!this.props.userId,onTitleClick:this.closeDrafts})}}]),t}(h.Component);R.propTypes={user:h.PropTypes.object,isActive:h.PropTypes.bool,className:h.PropTypes.string,tooltip:h.PropTypes.string,selectedSite:h.PropTypes.object},t.default=(0,_.connect)(function(e){var t=(0,v.getSelectedSiteId)(e),s=(0,M.getCurrentUserId)(e),o=(0,v.getSelectedSite)(e),n={type:"post",status:"draft",number:10,order_by:"modified",author:!o||o.jetpack||o.single_user_site?null:s},a=(0,j.getMyPostCounts)(e,t,"post");return{drafts:(0,S.getSitePostsForQueryIgnoringPage)(e,t,n),loadingDrafts:(0,S.isRequestingSitePostsForQuery)(e,t,n),draftsQuery:n,draftCount:a&&a.draft,selectedSite:o}})((0,g.localize)(R)),e.exports=t.default},"./client/lib/posts/actions.js":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function n(e,t,s){var o,n=P.get();("string"==typeof e||Array.isArray(e))&&(e=(0,d.default)([].concat(e).map(function(e){return[e,t]}))),o=(n.metadata||[]).filter(function(t){return!e.hasOwnProperty(t.key)}),(0,l.default)(e).forEach(function(t){var n={key:t,operation:s};"delete"!==s&&(n.value=e[t]),o.push(n)}),x.handleViewAction({type:"EDIT_POST",post:{metadata:o}})}function a(e){return e=(0,h.default)(e),e=(0,g.normalizeTermsForApi)(e),e.author&&(e.author=e.author.ID),e}var r,i=s("./node_modules/babel-runtime/core-js/object/keys.js"),l=o(i),u=s("./node_modules/lodash/fromPairs.js"),d=o(u),c=s("./node_modules/lodash/defer.js"),p=o(c),f=s("./node_modules/lodash/clone.js"),h=o(f),m=s("./node_modules/lodash/assign.js"),_=o(m),g=s("./client/state/posts/utils.js"),v=s("./node_modules/debug/browser.js")("calypso:posts"),y=s("./node_modules/store/store.js"),E=s("./client/lib/wp/browser.js"),b=s("./client/lib/posts/posts-store.js"),P=s("./client/lib/posts/post-edit-store.js"),j=s("./client/lib/posts/post-list-store-factory.js"),S=s("./client/lib/preferences/store.js"),T=s("./client/lib/sites-list/index.js")(),I=s("./client/lib/posts/utils.js"),C=s("./client/lib/version-compare/index.js"),x=s("./client/dispatcher/index.js"),D=s("./client/lib/posts/stats.js");r={startEditingNew:function(e,t){var s;t=t||{},s={type:"DRAFT_NEW_POST",siteId:e,postType:t.type||"post",title:t.title,content:t.content},x.handleViewAction(s)},startEditingExisting:function(e,t){var s,o=P.get();e&&(o&&o.site_ID===e&&o.ID===t||(x.handleViewAction({type:"START_EDITING_POST",siteId:e,postId:t}),s=E.site(e).post(t),s.get({context:"edit",meta:"autosave"},function(e,t){x.handleServerAction({type:"RECEIVE_POST_TO_EDIT",error:e,post:t})})))},stopEditing:function(){x.handleViewAction({type:"STOP_EDITING_POST"})},autosave:function(e){var t,s=P.get(),o=P.getSavedPost(),n=E.undocumented().site(s.site_ID);if(e=e||function(){},!P.isDirty())return e(new Error("NOT_DIRTY"));if(y.set("wpcom-autosave:"+s.site_ID+":"+s.ID,s),I.isPublished(o)||I.isPublished(s)){if(t=T.getSite(s.site_ID),!s.ID||!t||t.jetpack&&C(t.options.jetpack_version,"3.7.0-dev","<"))return e(new Error("NO_AUTOSAVE"));x.handleViewAction({type:"POST_AUTOSAVE",post:s}),n.postAutosave(s.ID,{content:s.content,title:s.title,excerpt:s.excerpt},function(t,s){x.handleServerAction({type:"RECEIVE_POST_AUTOSAVE",error:t,autosave:s}),e(t,s)})}else r.saveEdited(null,null,e,{recordSaveEvent:!1})},blockSave:function(e){x.handleViewAction({type:"BLOCK_EDIT_POST_SAVE",key:e})},unblockSave:function(e){x.handleViewAction({type:"UNBLOCK_EDIT_POST_SAVE",key:e})},edit:function(e){x.handleViewAction({type:"EDIT_POST",post:e})},editRawContent:function(e){x.handleViewAction({type:"EDIT_POST_RAW_CONTENT",content:e})},resetRawContent:function(){x.handleViewAction({type:"RESET_POST_RAW_CONTENT"})},updateMetadata:function(e,t){n(e,t,"update")},deleteMetadata:function(e){n(e,null,"delete")},saveEdited:function(e,t,s,o){var n,r,i,u,d,c,f;return x.handleViewAction({type:"EDIT_POST",post:e}),n=P.get(),P.hasContent()?P.isSaveBlocked()?void(0,p.default)(s,new Error("SAVE_BLOCKED"),n):(u=P.getChangedAttributes(),(0,l.default)(u).length?(u=a(u),d=P.getRawContent(),c=S.get("editor-mode"),f=!n.ID,x.handleViewAction({type:"EDIT_POST_SAVE"}),r=E.site(n.site_ID).post(n.ID),i={context:"edit",apiVersion:"1.2"},o&&o.recordSaveEvent===!1||D.recordSaveEvent(t),(u&&"future"===u.status&&I.isFutureDated(n)||u&&"publish"===u.status&&I.isBackDated(n))&&(u=(0,_.default)({},u,{status:"publish",date:n.date})),void r[f?"add":"update"](i,u,function(e,t){var o,n;n=S.get("editor-mode"),e||(o=b.get(t.global_ID)),x.handleServerAction({type:"RECEIVE_POST_BEING_EDITED",error:e,rawContent:c===n?d:null,isNew:f,original:o,post:t}),s(e,t)})):void(0,p.default)(s,new Error("NO_CHANGE"),n)):void(0,p.default)(s,new Error("NO_CONTENT"),n)},update:function(e,t,s){var o=E.site(e.site_ID).post(e.ID);o.update(t,r.receiveUpdate.bind(null,s))},trash:function(e,t){var s=E.site(e.site_ID).post(e.ID);s.delete(r.receiveUpdate.bind(null,t))},restore:function(e,t){var s=E.site(e.site_ID).post(e.ID);s.restore(r.receiveUpdate.bind(null,t))},queryPosts:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";x.handleViewAction({type:"QUERY_POSTS",options:e,postListStoreId:t})},fetchNextPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",t=j(e);if(!t.isLastPage()&&!t.isFetchingNextPage()){x.handleViewAction({type:"FETCH_NEXT_POSTS_PAGE",postListStoreId:e});var s=t.getID(),o=t.getNextPageParams(),n=t.getSiteId();n?E.site(n).postsList(o,r.receivePage.bind(null,s,e)):E.me().postsList(o,r.receivePage.bind(null,s,e))}},receivePage:function(e,t,s,o){x.handleServerAction({type:"RECEIVE_POSTS_PAGE",id:e,postListStoreId:t,error:s,data:o})},fetchUpdated:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",t=j(e);if(!t.isFetchingNextPage()){x.handleViewAction({type:"FETCH_UPDATED_POSTS",postListStoreId:e});var s=t.getID(),o=t.getUpdatesParams(),n=t.getSiteId();n?(v("Fetching posts that have been updated for %s since %s %o",n,o.modified_after,o),E.site(n).postsList(o,r.receiveUpdated.bind(null,s,e))):(v("Fetching posts that have been updated since %s %o",o.modified_after,o),E.me().postsList(o,r.receiveUpdated.bind(null,s,e)))}},receiveUpdated:function(e,t,s,o){x.handleServerAction({type:"RECEIVE_UPDATED_POSTS",id:e,postListStoreId:t,error:s,data:o})},receiveUpdate:function(e,t,s){var o;t||(o=b.get(s.global_ID)),x.handleServerAction({type:"RECEIVE_UPDATED_POST",error:t,original:o,post:s}),e(t,s)},fetchCounts:function(e,t){x.handleViewAction({type:"FETCH_POST_COUNTS",siteId:e}),E.undocumented().site(e).postCounts(t,function(t,s){x.handleServerAction({type:"RECEIVE_POST_COUNTS",error:t,data:s,siteId:e})})}},e.exports=r},"./client/lib/posts/post-list-cache-store.js":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function n(e){var t=(new Date).getTime(),s=e.timeSaved;return t-s>w}function a(e){return l(e)?x[e].list:void(x[e]&&x[e].dirty&&(k("delete cached list %o",e),delete x[e],delete D[e]))}function r(e){var t=u(e.query);x[t]&&x[t].dirty||(x[t]={timeStored:(new Date).getTime(),dirty:!1,list:e,listKey:t})}function i(e,t){var s=N.getSite(e.site_ID),o=[s.slug,s.ID,!1],n=[e.status,t],a=void 0,r=void 0,i=void 0,l=void 0;for(r in x)x.hasOwnProperty(r)&&(i=x[r],l=i.list,l.query.type===e.type&&-1!==o.indexOf(l.query.siteId)&&(a=l.query.status.split(","),0!==(0,E.default)(a,n).length&&(i.dirty=!0)));C.cacheIndex.clearRecordsByParamFilter(function(e){var t=o.slice(0,-1),s=["/me/posts"].concat((0,v.default)(t.map(function(e){return"/sites/"+e+"/posts"}))),a=e.query&&e.query.status?e.query.status.split(","):[],r=(0,E.default)(a,n);return s.indexOf(e.path)!==-1&&!!r.length})}function l(e){return x[e]&&!n(x[e])&&!x[e].dirty}function u(e){var t=[],s=(0,_.default)(e).sort();return s.forEach(function(s){t.push(s+"-"+e[s])}),t.join(":")}function d(e,t,s){k("setCanonicalList %o %o (%o)",e,t,s),D[e]=D[e]||{},D[e][t]=s}function c(e,t){k("getCanonicalList %o %o",e,t);var s=D[e];if(!s||"object"!==("undefined"==typeof s?"undefined":(0,h.default)(s)))return!1;var o=(0,_.default)(s);return o[0]!==t?(delete x[e],delete D[e],!1):s[t]}function p(e,t){k("deleteCanonicalList %o %o",e,t);var s=D[e];s&&s[t]&&delete s[t]}Object.defineProperty(t,"__esModule",{value:!0});var f=s("./node_modules/babel-runtime/helpers/typeof.js"),h=o(f),m=s("./node_modules/babel-runtime/core-js/object/keys.js"),_=o(m),g=s("./node_modules/babel-runtime/helpers/toConsumableArray.js"),v=o(g),y=s("./node_modules/lodash/intersection.js"),E=o(y);t.getCacheKey=u,t.setCanonicalList=d,t.getCanonicalList=c,t.deleteCanonicalList=p;var b=s("./node_modules/debug/browser.js"),P=o(b),j=s("./client/lib/sites-list/index.js"),S=o(j),T=s("./client/dispatcher/index.js"),I=o(T),C=s("./client/lib/wp/sync-handler/cache-index.js"),x={},D={},w=3e5,N=(0,S.default)(),A={get:a,_reset:function(){x={}}},k=(0,P.default)("calypso:posts-list:cache");A.dispatchToken=I.default.register(function(e){var t=e.action,o=s("./client/lib/posts/post-list-store-factory.js")();switch(I.default.waitFor([o.dispatchToken]),t.type){case"FETCH_NEXT_POSTS_PAGE":r(o.get());break;case"RECEIVE_POSTS_PAGE":r(o.get());break;case"RECEIVE_UPDATED_POSTS":r(o.get());break;case"RECEIVE_UPDATED_POST":case"RECEIVE_POST_BEING_EDITED":t.post&&(i(t.post,t.original?t.original.status:null),r(o.get()))}}),t.default=A},"./client/lib/posts/post-list-store-factory.js":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function n(e){var t=e||"default";return i[t]||(i[t]=new r.default(t)),i[t]}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var a=s("./client/lib/posts/post-list-store.js"),r=o(a),i={};n._reset=function(){i={}},e.exports=t.default},"./client/lib/posts/post-list-store.js":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(e.length<3||t.length<2)return[];var s=e.indexOf(t[0]);if(s===-1)return n(e,t.slice(1));var o=e.indexOf(t.slice(-1)[0]);if(o===-1)return n(e,t.slice(0,-1));var a=e.slice(s,o+1);return(0,I.default)(a,t)}Object.defineProperty(t,"__esModule",{value:!0});var a=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),r=o(a),i=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),l=o(i),u=s("./node_modules/babel-runtime/helpers/createClass.js"),d=o(u),c=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),p=o(c),f=s("./node_modules/babel-runtime/helpers/inherits.js"),h=o(f),m=s("./node_modules/babel-runtime/helpers/typeof.js"),_=o(m),g=s("./node_modules/lodash/transform.js"),v=o(g),y=s("./node_modules/lodash/some.js"),E=o(y),b=s("./node_modules/lodash/maxBy.js"),P=o(b),j=s("./node_modules/lodash/last.js"),S=o(j),T=s("./node_modules/lodash/difference.js"),I=o(T),C=s("./node_modules/lodash/clone.js"),x=o(C),D=s("./node_modules/lodash/assign.js"),w=o(D);t.getRemovedPosts=n,t.default=function(e){function t(e){var t=(0,w.default)({},Y,e);"draft,pending"===t.status&&(t.orderBy="modified");var s=(0,q.getCacheKey)(t),o=L.default.get(s);o?u=o:(u={id:G,postIds:[],errors:[],page:0,isLastPage:!1,isFetchingNextPage:!1,isFetchingUpdated:!1,query:t,listKey:s},G++)}function s(e){return(0,v.default)(e,function(e,t,s){null!=t&&(e[s]=t)},{})}function o(){var e=u.query.orderBy;u.postIds.sort(function(t,s){var o=V.default.get(t),n=V.default.get(s),a=o[e],r=n[e];return a===r?o.title===n.title?0:o.title>n.title?1:-1:a>r?-1:1})}function a(e,t,s){if(t||!s||"object"!==("undefined"==typeof s?"undefined":(0,_.default)(s)))return t=t||{message:"Error fetching PostsList: empty data response"},B("Error fetching PostsList from api:",t),t.timestamp=Date.now(),void u.errors.push(t);var a=s.found,r=s.meta,i=s.posts,l=s.__sync,d=l||{},c=d.responseSource,p=d.requestKey;if(e===u.id){u.isFetchingNextPage=!1,u.nextPageHandle=r&&r.next_page,u.nextPageHandle&&a||(u.isLastPage=!0);var f=i.map(function(e){return e.global_ID}),h=u.postIds.slice(0);if("local"===c&&p)(0,q.setCanonicalList)(u.listKey,p,h);else{var m=(0,q.getCanonicalList)(u.listKey,p);m&&(B("canonicalList found (%o)",m),h=m,(0,q.deleteCanonicalList)(u.listKey,p))}var g=n(h,f);g.length&&(B("removePosts (%o)",g),h=(0,I.default)(h,g));var v=(0,I.default)(f,h);v.length&&(B("newPosts (%o)",v),h=h.concat(v),u.page++),u.postIds=h,o()}}function i(e,t,s){var n=void 0,a=void 0,r=void 0;return t?void B("An error occurred while fetching updated posts %o",t):void(e===u.id&&s.posts.length&&(n=s.posts,B("Fetched updated posts:",n),a=n.map(function(e){return e.global_ID}),r=(0,I.default)(a,u.postIds),r.length&&(u.postIds=u.postIds.concat(r),o())))}if(!e)throw new Error("must supply a post-list-store id");var u={postIds:[],errors:[],query:(0,x.default)(Y),page:0,nextPageHandle:!1,isLastPage:!1,isFetchingNextPage:!1,isFetchingUpdated:!1};return new(function(o){function n(){(0,l.default)(this,n);var t=(0,p.default)(this,(n.__proto__||(0,r.default)(n)).call(this));return t.id=e,t.dispatchToken=M.default.register(t.handlePayload.bind(t)),t}return(0,h.default)(n,o),(0,d.default)(n,[{key:"get",value:function(){return u}},{key:"getID",value:function(){return u.id}},{key:"getSiteId",value:function(){return u.query.siteId}},{key:"getAll",value:function(){return u.postIds.map(function(e){return V.default.get(e)})}},{key:"getTree",value:function(){var e=[];return u.postIds.forEach(function(t){var s=(0,x.default)(V.default.get(t));s.parent=s.parent?s.parent.ID:0,e.push(s)}),(0,U.default)("ID").treeify(e)}},{key:"getPost",value:function(e){if(u.postIds.indexOf(e)>-1)return V.default.get(e)}},{key:"getPage",value:function(){return u.page}},{key:"off",value:function(e,t){this.removeListener(e,t)}},{key:"isLastPage",value:function(){return u.isLastPage}},{key:"isFetchingNextPage",value:function(){return u.isFetchingNextPage}},{key:"hasRecentError",value:function(){var e=30,t=Date.now();return(0,E.default)(u.errors,function(s){return t-s.timestamp<1e3*e})}},{key:"getNextPageParams",value:function(){var e={},t=u.query;return e.status=t.status,e.order_by=t.orderBy,e.order=t.order,e.author=t.author,e.number=t.perPage,e.type=t.type,e.page_handle=u.nextPageHandle,e.exclude_tree=t.exclude_tree,e.number=t.number,e.before=t.before,e.after=t.after,t.search&&(e.search=t.search),t.category&&(e.category=t.category),t.tag&&(e.tag=t.tag),e.siteId||(e.site_visibility="visible"),t.meta&&(e.meta=t.meta),s(e)}},{key:"getUpdatesParams",value:function(){var e={},t=u.query;return e.status=t.status,e.author=t.author,e.type=t.type,t.search&&(e.search=t.search),t.category&&(e.category=t.category),t.tag&&(e.tag=t.tag),e.siteId||(e.site_visibility="visible"),t.meta&&(e.meta=t.meta),u.postIds.length&&(e.modified_after=(0,P.default)(this.getAll(),function(e){return new Date(e.modified).getTime()}).modified,"modified"===t.orderBy||u.isLastPage||(e.after=this.getPost((0,S.default)(u.postIds)).date)),s(e)}},{key:"handlePayload",value:function(e){var s=e.action;if(!s.postListStoreId||s.postListStoreId===this.id||"RECEIVE_UPDATED_POST"===s.type)switch(M.default.waitFor([V.default.dispatchToken]),s.type){case"QUERY_POSTS":B("QUERY_POSTS",s),t(s.options),this.emit("change");break;case"FETCH_NEXT_POSTS_PAGE":B("FETCH_NEXT_POSTS_PAGE",s),u.isFetchingNextPage=!0,this.emit("change");break;case"RECEIVE_POSTS_PAGE":B("receivePage",s),a(s.id,s.error,s.data),this.emit("change");break;case"RECEIVE_UPDATED_POSTS":i(s.id,s.error,s.data),this.emit("change");break;case"RECEIVE_UPDATED_POST":s.post&&u.postIds.indexOf(s.post.global_ID)>-1&&this.emit("change")}}}]),n}(k.EventEmitter))};var N=s("./node_modules/debug/browser.js"),A=o(N),k=s("./node_modules/events/events.js"),O=s("./client/dispatcher/index.js"),M=o(O),R=s("./client/lib/tree-convert/index.js"),U=o(R),F=s("./client/lib/posts/posts-store.js"),V=o(F),q=s("./client/lib/posts/post-list-cache-store.js"),L=o(q),Y={siteId:!1,type:"post",status:"publish",orderBy:"date",order:"DESC",author:!1,search:!1,category:!1,tag:!1,perPage:20},B=(0,A.default)("calypso:posts-list"),G=0},"./client/lib/posts/posts-store.js":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function n(e){var t=i.get(e.global_ID);t&&(0,u.default)(e,t)||(f[e.global_ID]=e)}function a(e,t){var s=t||{},o=s.global_ID;if(!o)return void d("global_ID is required for a post",t);var a=i.get(o);return a&&"local"===e?void d("existing record (%o), do not overwrite with local response",a):void c.normalizeSync(t,function(e,t){n(t)})}function r(e,t){var s=a.bind(null,t);e.forEach(s)}var i,l=s("./node_modules/lodash/isEqual.js"),u=o(l),d=s("./node_modules/debug/browser.js")("calypso:posts"),c=s("./client/lib/posts/utils.js"),p=s("./client/dispatcher/index.js"),f={};i={get:function(e){return f[e]}},i.dispatchToken=p.register(function(e){var t=e.action;switch(t.type){case"RECEIVE_POSTS_PAGE":case"RECEIVE_UPDATED_POSTS":if(!t.error&&t.data.posts){var s=t.data.__sync&&t.data.__sync.responseSource;r(t.data.posts,s)}break;case"RECEIVE_UPDATED_POST":t.error||a("server",t.post)}}),e.exports=i},"./client/lib/posts/stats.js":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function n(e,t){var s=void 0,o=T.getSelectedSite();g.default.mc.bumpStat("editor_usage",e),o&&(s=o.jetpack?"jetpack":"wpcom",g.default.mc.bumpStat("editor_usage_"+s,e),t&&g.default.mc.bumpStat("editor_cpt_usage_"+s,t+"_"+e))}function a(e){g.default.mc.bumpStat("editor_actions",e)}function r(e,t,s){g.default.ga.recordEvent("Editor",e,t,s)}function i(e){var t=y.default.get(),s=y.default.getSavedPost();if(t&&s){var o=s.status,i=t.status,l="calypso_editor_"+t.type+"_",u=!1,d=!1,c=!1,p=null;t.ID||b.default.isPublished(t)?"draft"===i?l+="savedraft":o===i?(c="edit",l+="update"):"publish"===i||"private"===i?(l+="publish",c="new",e&&e.isConfirmationSidebarEnabled&&(p="confirmation_sidebar")):"pending"===i?l+="pending":"future"===i&&(l+="schedule",u="status-schedule",d="Scheduled Post",e&&e.isConfirmationSidebarEnabled&&(p="confirmation_sidebar")):l+="savedraft",c&&n(c,t.type),u&&a(u),d&&r(d),S("recordSaveEvent %s currentStatus=%s nextStatus=%s",l,o,i),g.default.tracks.recordEvent(l,{post_id:t.ID,post_type:t.type,visibility:b.default.getVisibility(t),current_status:o,next_status:i,context:p})}}function l(e){C("editor-button","calypso_"+e),g.default.ga.recordEvent("Editor","Clicked TinyMCE Button",e),S("TinyMCE button click",e,"mc=",I)}function u(e){C("html-editor-button","calypso_"+e),g.default.ga.recordEvent("Editor","Clicked TinyMCE HTML Button",e),S("TinyMCE HTML button click",e,"mc=",I)}Object.defineProperty(t,"__esModule",{value:!0});var d=s("./node_modules/lodash/noop.js"),c=o(d);t.recordStat=a,t.recordEvent=r,t.recordSaveEvent=i,t.recordTinyMCEButtonClick=l,t.recordTinyMCEHTMLButtonClick=u;var p=s("./node_modules/debug/browser.js"),f=o(p),h=s("./client/config/index.js"),m=o(h),_=s("./client/lib/analytics/index.js"),g=o(_),v=s("./client/lib/posts/post-edit-store.js"),y=o(v),E=s("./client/lib/posts/utils.js"),b=o(E),P=s("./client/lib/sites-list/index.js"),j=o(P),S=(0,f.default)("calypso:posts:stats"),T=new j.default,I=Math.random()<=.01||"development"===(0,m.default)("env"),C=I?g.default.mc.bumpStat:c.default},"./client/lib/tree-convert/index.js":function(e,t,s){"use strict";function o(e){return this instanceof o?void(this.key=e||"id"):new o(e)}var n=s("./client/lib/tree-convert/tree-traverser.js");o.prototype.treeify=function(e){var t=[],s={};return e.forEach(function(t,o){s[e[o][this.key]]=t},this),e.forEach(function(e){var o;e.parent>0&&s[e.parent]?(o=s[e.parent],o.items=o.items||[],o.items.push(e)):(e.parent=0,t.push(e))}),this.sortItems(t),this.removeOrderProperty(t),t},o.prototype.untreeify=function(e,t){return t=t||[],e.forEach(function(e,s){e.items&&o.prototype.untreeify(e.items,t),e.order=s+1,t.push(e)}),t},o.prototype.sortItems=function(e){var t={};t.items=e,n.traverse(t,[function(e){return e.items&&e.items.sort(function(e,t){return e.order-t.order}),e}])},o.prototype.removeOrderProperty=function(e){var t={};t.items=e,n.traverse(t,[function(e){return e.items&&e.items.forEach(function(e){delete e.order}),e}])},e.exports=o},"./client/lib/tree-convert/tree-traverser.js":function(e,t,s){
"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function n(e,t){return r(t,function(t){return(0,p.default)(t.items,{id:e.id})})||t}function a(e,t,s){return t.forEach(function(t){e=t(e,s)},this),e.items&&(e.items=e.items.map(function(e){return a(e,t,s)})),e}function r(e,t){return t(e)?e:e.items?l(e.items,function(e){return r(e,t)}):void 0}function i(e,t,s){var o;if(e.items)for(o=0;o<e.items.length;o++){if(s(e.items[o]))return void(e.items[o]=t);i(e.items[o],t,s)}}function l(e,t){var s,o,n=e.length;for(s=0;s<n;s++)if(o=t(e[s]))return o}function u(e,t){return function(s){return s.id===t&&(s.items=s.items||[],s.items.push(e)),s}}function d(e,t,s){return function(o){var n,a="before"===s?0:1;return~(n=(0,h.default)(o.items,{id:t}))&&o.items.splice(n+a,0,e),o}}var c=s("./node_modules/lodash/some.js"),p=o(c),f=s("./node_modules/lodash/findIndex.js"),h=o(f);e.exports={traverse:function(e,t){return a(e,t,e)},parent:n,find:r,replaceItem:i,remover:function(e){return function(t){var s;return~(s=(0,h.default)(t.items,{id:e}))&&t.items.splice(s,1),t}},inserter:function(e,t,s){var o="child"===s?u:d;return o(e,t,s)}}},"./client/my-sites/draft/index.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),a=o(n),r=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),i=o(r),l=s("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),p=s("./node_modules/babel-runtime/helpers/inherits.js"),f=o(p),h=s("./node_modules/lodash/noop.js"),m=o(h),_=s("./node_modules/lodash/flow.js"),g=o(_),v=s("./node_modules/react/react.js"),y=o(v),E=s("./node_modules/classnames/index.js"),b=o(E),P=s("./node_modules/url/url.js"),j=o(P),S=s("./node_modules/react-redux/es/index.js"),T=s("./node_modules/i18n-calypso/index.js"),I=s("./client/components/card/compact.jsx"),C=o(I),x=s("./client/components/gravatar/index.jsx"),D=o(x),w=s("./node_modules/gridicons/build/index.js"),N=o(w),A=s("./client/components/notice/index.jsx"),k=o(A),O=s("./client/components/notice/notice-action.jsx"),M=o(O),R=s("./client/components/popover/menu.jsx"),U=o(R),F=s("./client/components/popover/menu-item.jsx"),V=o(F),q=s("./client/my-sites/post-relative-time-status/index.jsx"),L=o(q),Y=s("./client/blocks/site-icon/index.jsx"),B=o(Y),G=s("./client/lib/posts/actions.js"),W=o(G),H=s("./node_modules/photon/index.js"),z=o(H),K=s("./client/lib/touch-detect/index.js"),Q=o(K),X=s("./client/components/update-post-status/index.js"),J=o(X),Z=s("./client/lib/posts/utils.js"),$=o(Z),ee=s("./client/state/ui/selectors.js"),te=s("./client/state/sites/selectors.js"),se=function(e){function t(){var e,s,o,n;(0,i.default)(this,t);for(var r=arguments.length,l=Array(r),u=0;u<r;u++)l[u]=arguments[u];return s=o=(0,c.default)(this,(e=t.__proto__||(0,a.default)(t)).call.apply(e,[this].concat(l))),o.state={fullImage:!1,showPopoverMenu:!1,isRestoring:!1,hasError:!1},o.toggleImageState=function(){o.setState({fullImage:!o.state.fullImage})},o.trashPost=function(){o.setState({showPopoverMenu:!1,isTrashing:!0});var e=function(e){if(this.isMounted())return e?this.setState({isTrashing:!1,hasError:!0}):this.setState({isTrashing:!1})}.bind(o);$.default.userCan("delete_post",o.props.post)&&W.default.trash(o.props.post,e)},o.restorePost=function(){o.setState({showPopoverMenu:!1,isRestoring:!0});var e=function(e){if(this.isMounted())return e?this.setState({isRestoring:!1,hasError:!0}):this.setState({isRestoring:!1})}.bind(o);$.default.userCan("delete_post",o.props.post)&&W.default.restore(o.props.post,e)},o.previewPost=function(){window.open($.default.getPreviewURL(o.props.post))},o.publishPost=function(){o.setState({showPopoverMenu:!1}),$.default.userCan("publish_post",o.props.post)&&o.props.updatePostStatus("publish")},o.togglePopoverMenu=function(){o.setState({showPopoverMenu:!o.state.showPopoverMenu})},n=s,(0,c.default)(o,n)}return(0,f.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this.props.post,t=null,s=void 0,o=void 0;if(this.props.isPlaceholder)return this.postPlaceholder();var n=this.props.site;$.default.userCan("edit_post",e)&&(o=$.default.getEditURL(e,n)),this.props.postImages&&this.props.postImages.canonical_image&&(t=j.default.parse(this.props.postImages.canonical_image.uri,!0),s="//"+t.hostname+t.pathname+"?w=680px"),e&&e.canonical_image&&(t=j.default.parse(e.canonical_image.uri,!0),s=t.hostname.indexOf("files.wordpress.com")>0?"//"+t.hostname+t.pathname+"?w=680px":(0,z.default)(e.canonical_image.uri,{width:680}));var a=(0,b.default)("draft","is-"+e.format,{"has-all-actions":this.props.showAllActions,"has-image":!!t,"is-image-expanded":this.state.fullImage,"is-trashed":"trash"===this.props.post.status||this.state.isTrashing,"is-placeholder":this.props.isPlaceholder,"is-restoring":this.state.isRestoring,"is-touch":Q.default.hasTouch(),"is-selected":this.props.selected}),r=e.title||y.default.createElement("span",{className:"draft__untitled"},this.props.translate("Untitled"));return y.default.createElement(C.default,{className:a,key:"draft-"+e.ID},this.showStatusChange(),y.default.createElement("h3",{className:"draft__title"},"pending"===e.status&&y.default.createElement("span",{className:"draft__pending-label"},this.props.translate("Pending")),this.props.showAuthor&&y.default.createElement(D.default,{user:e.author,size:22}),y.default.createElement("a",{href:o,onClick:this.props.onTitleClick},r)),e.excerpt&&y.default.createElement("span",{className:"draft__excerpt"},y.default.createElement("a",{href:o,onClick:this.props.onTitleClick},e.excerpt)),this.props.selectedSiteId?this.draftActions():y.default.createElement(B.default,{site:n,size:32}),t?this.renderImage(s):null,"trash"===this.props.post.status?this.restoreButton():null)}},{key:"renderImage",value:function(e){var t=void 0;return this.state.fullImage||(t={backgroundImage:"url("+e+")"}),y.default.createElement("div",{className:"draft__featured-image",style:t,onClick:this.toggleImageState},this.state.fullImage&&y.default.createElement("img",{className:"draft__image",src:e}))}},{key:"restoreButton",value:function(){return this.state.isRestoring?null:y.default.createElement("button",{className:"draft__restore",onClick:this.restorePost},y.default.createElement(N.default,{icon:"undo",size:18}),this.props.translate("Restore"))}},{key:"showStatusChange",value:function(){return"publish"===this.props.post.status?y.default.createElement(k.default,{isCompact:!0,status:"is-success",text:"Post successfully published.",button:"View",showDismiss:!1},y.default.createElement(M.default,{href:this.props.post.URL},"View")):this.state.hasError?y.default.createElement(k.default,{isCompact:!0,status:"is-error",text:"There was a problem.",showDismiss:!1}):void 0}},{key:"postPlaceholder",value:function(){return y.default.createElement(C.default,{className:"draft is-placeholder"},y.default.createElement("h3",{className:"draft__title"}),y.default.createElement("div",{className:"draft__actions"},y.default.createElement("p",{className:"post-relative-time-status"},y.default.createElement("span",{className:"time"},y.default.createElement("span",{className:"noticon noticon-time"}),y.default.createElement("span",{className:"time-text"})))))}},{key:"renderTrashAction",value:function(){return $.default.userCan("delete_post",this.props.post)?"trash"===this.props.post.status||this.state.isRestoring?null:y.default.createElement("div",{className:"draft__actions"},y.default.createElement(N.default,{icon:"trash",onClick:this.trashPost,size:18})):null}},{key:"renderAllActions",value:function(){return y.default.createElement("div",{className:"draft__all-actions"},y.default.createElement(L.default,{post:this.props.post,includeEditLink:!0}),y.default.createElement("span",{className:"draft__actions-toggle noticon noticon-ellipsis",onClick:this.togglePopoverMenu,ref:"popoverMenuButton"}),y.default.createElement(U.default,{isVisible:this.state.showPopoverMenu,onClose:this.togglePopoverMenu,position:"bottom left",context:this.refs&&this.refs.popoverMenuButton},y.default.createElement(V.default,{onClick:this.previewPost},this.props.translate("Preview")),y.default.createElement(V.default,{onClick:this.publishPost},this.props.translate("Publish")),y.default.createElement(V.default,{className:"draft__trash-item",onClick:this.trashPost},this.props.translate("Send to Trash"))))}},{key:"draftActions",value:function(){return this.props.showAllActions?this.renderAllActions():this.renderTrashAction()}}]),t}(v.Component);se.propTypes={showAllActions:v.PropTypes.bool,post:v.PropTypes.object,isPlaceholder:v.PropTypes.bool,onTitleClick:v.PropTypes.func,postImages:v.PropTypes.object,selected:v.PropTypes.bool,showAuthor:v.PropTypes.bool,translate:v.PropTypes.func.isRequired,updatePostStatus:v.PropTypes.func.isRequired},se.defaultProps={showAllActions:!1,onTitleClick:m.default,selected:!1,showAuthor:!1};var oe=function(e,t){var s=t.siteId;return{site:(0,te.getSite)(e,s),selectedSiteId:(0,ee.getSelectedSiteId)(e)}};t.default=(0,g.default)(T.localize,J.default,(0,S.connect)(oe))(se),e.exports=t.default},"./client/my-sites/post-relative-time-status/index.jsx":function(e,t,s){"use strict";var o=s("./node_modules/react/react.js"),n=s("./node_modules/react-pure-render/mixin.js"),a=s("./node_modules/gridicons/build/index.js");e.exports=o.createClass({displayName:"PostRelativeTime",mixins:[n],propTypes:{post:o.PropTypes.object.isRequired,includeNonDraftStatuses:o.PropTypes.bool,link:o.PropTypes.string,target:o.PropTypes.string},getDefaultProps:function(){return{includeNonDraftStatuses:!1,link:null,target:null}},getTimestamp:function(){var e=this.props.post.status,t=void 0;return"draft"===e||"pending"===e?t=this.props.post.modified:"new"!==e&&(t=this.props.post.date),t},getRelativeTimeText:function(){var e=this.getTimestamp();if(e)return o.createElement("span",{className:"post-relative-time-status__time"},o.createElement(a,{icon:"time",size:18}),o.createElement("time",{className:"post-relative-time-status__time-text",dateTime:e},this.moment(e).fromNow()))},getStatusText:function(){var e,t=this.props.post.status,s="post-relative-time-status__status",n="aside";if(this.props.post.sticky?(e=this.translate("sticky"),s+=" is-sticky",n="bookmark-outline"):"pending"===t?(e=this.translate("pending review"),s+=" is-pending"):"future"===t?(e=this.translate("scheduled"),s+=" is-scheduled",n="calendar"):"trash"===t?(e=this.translate("trashed"),s+=" is-trash",n="trash"):this.props.includeBasicStatus&&("draft"===t?e=this.translate("draft"):"publish"===t?e=this.translate("published"):"new"===t&&(e=this.translate("Publish immediately"))),e)return o.createElement("span",{className:s},o.createElement(a,{icon:n,size:18}),o.createElement("span",{className:"post-relative-time-status__status-text"},e))},render:function(){var e=this.getRelativeTimeText(),t=this.getStatusText(),s=e?"post-relative-time-status":null,n=o.createElement("span",null,e,t),a=this.getTimestamp();if(this.props.link){var r="_blank"===this.props.target?"noopener noreferrer":null;n=o.createElement("a",{href:this.props.link,target:this.props.target,rel:r,onClick:this.props.onClick},n)}return o.createElement("p",{className:s,title:a},n)}})},"./client/state/posts/counts/actions.js":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function n(e,t,s){return{type:l.POST_COUNTS_RECEIVE,siteId:e,postType:t,counts:s}}function a(e,t){return function(s){return s({type:l.POST_COUNTS_REQUEST,postType:t,siteId:e}),i.default.undocumented().site(e).postCounts({type:t}).then(function(o){s(n(e,t,o.counts)),s({type:l.POST_COUNTS_REQUEST_SUCCESS,siteId:e,postType:t})}).catch(function(o){s({type:l.POST_COUNTS_REQUEST_FAILURE,siteId:e,postType:t,error:o})})}}Object.defineProperty(t,"__esModule",{value:!0}),t.receivePostCounts=n,t.requestPostCounts=a;var r=s("./client/lib/wp/browser.js"),i=o(r),l=s("./client/state/action-types.js")},"./client/state/posts/counts/selectors.js":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function n(e,t,s){return(0,_.default)(e.posts.counts.requesting,[t,s],!1)}function a(e,t,s){return(0,_.default)(e.posts.counts.counts,[t,s,"all"],null)}function r(e,t,s,o){var n=a(e,t,s);return n?n[o]||0:null}function i(e,t,s){return(0,_.default)(e.posts.counts.counts,[t,s,"mine"],null)}function l(e,t,s,o){var n=i(e,t,s);return n?n[o]||0:null}function u(e,t,s){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:a,n=o(e,t,s);return g.reduce(function(e,t){var s=(0,_.default)(n,t,0),o=void 0;switch(t){case"publish":case"private":o="publish";break;case"draft":case"pending":o="draft";break;default:o=t}return(0,h.default)({},e,(0,p.default)({},o,(e[o]||0)+s))},{})}function d(e,t,s){return u(e,t,s,i)}Object.defineProperty(t,"__esModule",{value:!0});var c=s("./node_modules/babel-runtime/helpers/defineProperty.js"),p=o(c),f=s("./node_modules/babel-runtime/helpers/extends.js"),h=o(f),m=s("./node_modules/lodash/get.js"),_=o(m);t.isRequestingPostCounts=n,t.getAllPostCounts=a,t.getAllPostCount=r,t.getMyPostCounts=i,t.getMyPostCount=l,t.getNormalizedPostCounts=u,t.getNormalizedMyPostCounts=d;var g=["publish","draft","pending","private","future","trash"]},"./node_modules/create-react-class/factory.js":function(e,t,s){"use strict";function o(e){return e}function n(e,t,s){function n(e,t){var s=v.hasOwnProperty(t)?v[t]:null;P.hasOwnProperty(t)&&l("OVERRIDE_BASE"===s,"ReactClassInterface: You are attempting to override `%s` from your class specification. Ensure that your method names do not overlap with React methods.",t),e&&l("DEFINE_MANY"===s||"DEFINE_MANY_MERGED"===s,"ReactClassInterface: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",t)}function a(e,s){if(s){l("function"!=typeof s,"ReactClass: You're attempting to use a component class or function as a mixin. Instead, just use a regular object."),l(!t(s),"ReactClass: You're attempting to use a component as a mixin. Instead, just use a regular object.");var o=e.prototype,a=o.__reactAutoBindPairs;s.hasOwnProperty(u)&&y.mixins(e,s.mixins);for(var r in s)if(s.hasOwnProperty(r)&&r!==u){var i=s[r],d=o.hasOwnProperty(r);if(n(d,r),y.hasOwnProperty(r))y[r](e,i);else{var c=v.hasOwnProperty(r),h="function"==typeof i,m=h&&!c&&!d&&s.autobind!==!1;if(m)a.push(r,i),o[r]=i;else if(d){var _=v[r];l(c&&("DEFINE_MANY_MERGED"===_||"DEFINE_MANY"===_),"ReactClass: Unexpected spec policy %s for key %s when mixing in component specs.",_,r),"DEFINE_MANY_MERGED"===_?o[r]=p(o[r],i):"DEFINE_MANY"===_&&(o[r]=f(o[r],i))}else o[r]=i}}}else;}function d(e,t){if(t)for(var s in t){var o=t[s];if(t.hasOwnProperty(s)){var n=s in y;l(!n,'ReactClass: You are attempting to define a reserved property, `%s`, that shouldn\'t be on the "statics" key. Define it as an instance property instead; it will still be accessible on the constructor.',s);var a=s in e;l(!a,"ReactClass: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",s),e[s]=o}}}function c(e,t){l(e&&t&&"object"==typeof e&&"object"==typeof t,"mergeIntoWithNoDuplicateKeys(): Cannot merge non-objects.");for(var s in t)t.hasOwnProperty(s)&&(l(void 0===e[s],"mergeIntoWithNoDuplicateKeys(): Tried to merge two objects with the same key: `%s`. This conflict may be due to a mixin; in particular, this may be caused by two getInitialState() or getDefaultProps() methods returning objects with clashing keys.",s),e[s]=t[s]);return e}function p(e,t){return function(){var s=e.apply(this,arguments),o=t.apply(this,arguments);if(null==s)return o;if(null==o)return s;var n={};return c(n,s),c(n,o),n}}function f(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function h(e,t){var s=t.bind(e);return s}function m(e){for(var t=e.__reactAutoBindPairs,s=0;s<t.length;s+=2){var o=t[s],n=t[s+1];e[o]=h(e,n)}}function _(e){var t=o(function(e,o,n){this.__reactAutoBindPairs.length&&m(this),this.props=e,this.context=o,this.refs=i,this.updater=n||s,this.state=null;var a=this.getInitialState?this.getInitialState():null;l("object"==typeof a&&!Array.isArray(a),"%s.getInitialState(): must return an object or null",t.displayName||"ReactCompositeComponent"),this.state=a});t.prototype=new j,t.prototype.constructor=t,t.prototype.__reactAutoBindPairs=[],g.forEach(a.bind(null,t)),a(t,E),a(t,e),a(t,b),t.getDefaultProps&&(t.defaultProps=t.getDefaultProps()),l(t.prototype.render,"createClass(...): Class specification must implement a `render` method.");for(var n in v)t.prototype[n]||(t.prototype[n]=null);return t}var g=[],v={mixins:"DEFINE_MANY",statics:"DEFINE_MANY",propTypes:"DEFINE_MANY",contextTypes:"DEFINE_MANY",childContextTypes:"DEFINE_MANY",getDefaultProps:"DEFINE_MANY_MERGED",getInitialState:"DEFINE_MANY_MERGED",getChildContext:"DEFINE_MANY_MERGED",render:"DEFINE_ONCE",componentWillMount:"DEFINE_MANY",componentDidMount:"DEFINE_MANY",componentWillReceiveProps:"DEFINE_MANY",shouldComponentUpdate:"DEFINE_ONCE",componentWillUpdate:"DEFINE_MANY",componentDidUpdate:"DEFINE_MANY",componentWillUnmount:"DEFINE_MANY",updateComponent:"OVERRIDE_BASE"},y={displayName:function(e,t){e.displayName=t},mixins:function(e,t){if(t)for(var s=0;s<t.length;s++)a(e,t[s])},childContextTypes:function(e,t){e.childContextTypes=r({},e.childContextTypes,t)},contextTypes:function(e,t){e.contextTypes=r({},e.contextTypes,t)},getDefaultProps:function(e,t){e.getDefaultProps?e.getDefaultProps=p(e.getDefaultProps,t):e.getDefaultProps=t},propTypes:function(e,t){e.propTypes=r({},e.propTypes,t)},statics:function(e,t){d(e,t)},autobind:function(){}},E={componentDidMount:function(){this.__isMounted=!0}},b={componentWillUnmount:function(){this.__isMounted=!1}},P={replaceState:function(e,t){this.updater.enqueueReplaceState(this,e,t)},isMounted:function(){return!!this.__isMounted}},j=function(){};return r(j.prototype,e.prototype,P),_}var a,r=s("./node_modules/object-assign/index.js"),i=s("./node_modules/fbjs/lib/emptyObject.js"),l=s("./node_modules/fbjs/lib/invariant.js"),u="mixins";a={},e.exports=n},"./node_modules/create-react-class/index.js":function(e,t,s){"use strict";var o=s("./node_modules/react/react.js"),n=s("./node_modules/create-react-class/factory.js");if("undefined"==typeof o)throw Error("create-react-class could not find the React object. If you are using script tags, make sure that React is being loaded before create-react-class.");var a=(new o.Component).updater;e.exports=n(o.Component,o.isValidElement,a)},"./node_modules/lodash/transform.js":function(e,t,s){function o(e,t,s){var o=u(e)||p(e);if(t=i(t,4),null==s)if(o||c(e)){var f=e.constructor;s=o?u(e)?new f:[]:d(f)?a(l(e)):{}}else s={};return(o?n:r)(e,function(e,o,n){return t(s,e,o,n)}),s}var n=s("./node_modules/lodash/_arrayEach.js"),a=s("./node_modules/lodash/_baseCreate.js"),r=s("./node_modules/lodash/_baseForOwn.js"),i=s("./node_modules/lodash/_baseIteratee.js"),l=s("./node_modules/lodash/_getPrototype.js"),u=s("./node_modules/lodash/isArray.js"),d=s("./node_modules/lodash/isFunction.js"),c=s("./node_modules/lodash/isObject.js"),p=s("./node_modules/lodash/isTypedArray.js");e.exports=o}});